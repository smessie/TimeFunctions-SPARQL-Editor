var H3e=Object.defineProperty;var Xie=Nt=>{throw TypeError(Nt)};var G3e=(Nt,Vt,Ht)=>Vt in Nt?H3e(Nt,Vt,{enumerable:!0,configurable:!0,writable:!0,value:Ht}):Nt[Vt]=Ht;var nr=(Nt,Vt,Ht)=>G3e(Nt,typeof Vt!="symbol"?Vt+"":Vt,Ht),TD=(Nt,Vt,Ht)=>Vt.has(Nt)||Xie("Cannot "+Ht);var he=(Nt,Vt,Ht)=>(TD(Nt,Vt,"read from private field"),Ht?Ht.call(Nt):Vt.get(Nt)),Pt=(Nt,Vt,Ht)=>Vt.has(Nt)?Xie("Cannot add the same private member more than once"):Vt instanceof WeakSet?Vt.add(Nt):Vt.set(Nt,Ht),bt=(Nt,Vt,Ht,hi)=>(TD(Nt,Vt,"write to private field"),hi?hi.call(Nt,Ht):Vt.set(Nt,Ht),Ht),ot=(Nt,Vt,Ht)=>(TD(Nt,Vt,"access private method"),Ht);var RE=(Nt,Vt,Ht,hi)=>({set _(Fi){bt(Nt,Vt,Fi,Ht)},get _(){return he(Nt,Vt,hi)}});(function(){"use strict";var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vt(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var t=a.default;if(typeof t=="function"){var u=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};u.prototype=t.prototype}else u={};return Object.defineProperty(u,"__esModule",{value:!0}),Object.keys(a).forEach(function(n){var r=Object.getOwnPropertyDescriptor(a,n);Object.defineProperty(u,n,r.get?r:{enumerable:!0,get:function(){return a[n]}})}),u}var Ht={},hi={},Fi={},sp={},Ha={},cp={},Ga={},za={},lp="delete",Kt=5,An=1<<Kt,Jr=An-1,xt={};function CE(){return{value:!1}}function En(a){a&&(a.value=!0)}function qE(){}function Kf(a){return a.size===void 0&&(a.size=a.__iterate(qD)),a.size}function ca(a,t){if(typeof t!="number"){var u=t>>>0;if(""+u!==t||u===4294967295)return NaN;t=u}return t<0?Kf(a)+t:t}function qD(){return!0}function dp(a,t,u){return(a===0&&!$D(a)||u!==void 0&&a<=-u)&&(t===void 0||u!==void 0&&t>=u)}function Wf(a,t){return BD(a,t,0)}function fp(a,t){return BD(a,t,t)}function BD(a,t,u){return a===void 0?u:$D(a)?t===1/0?t:Math.max(0,t+a)|0:t===void 0||t===a?a:Math.min(t,a)|0}function $D(a){return a<0||a===0&&1/a===-1/0}var VD="@@__IMMUTABLE_ITERABLE__@@";function Br(a){return!!(a&&a[VD])}var UD="@@__IMMUTABLE_KEYED__@@";function Gt(a){return!!(a&&a[UD])}var QD="@@__IMMUTABLE_INDEXED__@@";function xr(a){return!!(a&&a[QD])}function Yf(a){return Gt(a)||xr(a)}var Wt=function(t){return Br(t)?t:$r(t)},In=function(a){function t(u){return Gt(u)?u:da(u)}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t}(Wt),ka=function(a){function t(u){return xr(u)?u:Nn(u)}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t}(Wt),Zf=function(a){function t(u){return Br(u)&&!Yf(u)?u:rh(u)}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t}(Wt);Wt.Keyed=In,Wt.Indexed=ka,Wt.Set=Zf;var HD="@@__IMMUTABLE_SEQ__@@";function hp(a){return!!(a&&a[HD])}var GD="@@__IMMUTABLE_RECORD__@@";function la(a){return!!(a&&a[GD])}function hn(a){return Br(a)||la(a)}var eh="@@__IMMUTABLE_ORDERED__@@";function pn(a){return!!(a&&a[eh])}var pp=0,Vn=1,xn=2,BE=typeof Symbol=="function"&&Symbol.iterator,zD="@@iterator",fO=BE||zD,jt=function(t){this.next=t};jt.prototype.toString=function(){return"[Iterator]"},jt.KEYS=pp,jt.VALUES=Vn,jt.ENTRIES=xn,jt.prototype.inspect=jt.prototype.toSource=function(){return this.toString()},jt.prototype[fO]=function(){return this};function Yt(a,t,u,n){var r=a===0?t:a===1?u:[t,u];return n?n.value=r:n={value:r,done:!1},n}function Kr(){return{value:void 0,done:!0}}function $E(a){return Array.isArray(a)?!0:!!hO(a)}function kD(a){return a&&typeof a.next=="function"}function VE(a){var t=hO(a);return t&&t.call(a)}function hO(a){var t=a&&(BE&&a[BE]||a[zD]);if(typeof t=="function")return t}function gae(a){var t=hO(a);return t&&t===a.entries}function vae(a){var t=hO(a);return t&&t===a.keys}var th=Object.prototype.hasOwnProperty;function UE(a){return Array.isArray(a)||typeof a=="string"?!0:a&&typeof a=="object"&&Number.isInteger(a.length)&&a.length>=0&&(a.length===0?Object.keys(a).length===1:a.hasOwnProperty(a.length-1))}var $r=function(a){function t(u){return u==null?HE():hn(u)?u.toSeq():wae(u)}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(n,r){var e=this._cache;if(e){for(var i=e.length,o=0;o!==i;){var c=e[r?i-++o:o++];if(n(c[1],c[0],this)===!1)break}return o}return this.__iterateUncached(n,r)},t.prototype.__iterator=function(n,r){var e=this._cache;if(e){var i=e.length,o=0;return new jt(function(){if(o===i)return Kr();var c=e[r?i-++o:o++];return Yt(n,c[0],c[1])})}return this.__iteratorUncached(n,r)},t}(Wt),da=function(a){function t(u){return u==null?HE().toKeyedSeq():Br(u)?Gt(u)?u.toSeq():u.fromEntrySeq():la(u)?u.toSeq():GE(u)}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}($r),Nn=function(a){function t(u){return u==null?HE():Br(u)?Gt(u)?u.entrySeq():u.toIndexedSeq():la(u)?u.toSeq().entrySeq():JD(u)}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}($r),rh=function(a){function t(u){return(Br(u)&&!Yf(u)?u:Nn(u)).toSetSeq()}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}($r);$r.isSeq=hp,$r.Keyed=da,$r.Set=rh,$r.Indexed=Nn,$r.prototype[HD]=!0;var Xa=function(a){function t(u){this._array=u,this.size=u.length}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.get=function(n,r){return this.has(n)?this._array[ca(this,n)]:r},t.prototype.__iterate=function(n,r){for(var e=this._array,i=e.length,o=0;o!==i;){var c=r?i-++o:o++;if(n(e[c],c,this)===!1)break}return o},t.prototype.__iterator=function(n,r){var e=this._array,i=e.length,o=0;return new jt(function(){if(o===i)return Kr();var c=r?i-++o:o++;return Yt(n,c,e[c])})},t}(Nn),QE=function(a){function t(u){var n=Object.keys(u).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(u):[]);this._object=u,this._keys=n,this.size=n.length}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.get=function(n,r){return r!==void 0&&!this.has(n)?r:this._object[n]},t.prototype.has=function(n){return th.call(this._object,n)},t.prototype.__iterate=function(n,r){for(var e=this._object,i=this._keys,o=i.length,c=0;c!==o;){var s=i[r?o-++c:c++];if(n(e[s],s,this)===!1)break}return c},t.prototype.__iterator=function(n,r){var e=this._object,i=this._keys,o=i.length,c=0;return new jt(function(){if(c===o)return Kr();var s=i[r?o-++c:c++];return Yt(n,s,e[s])})},t}(da);QE.prototype[eh]=!0;var Tae=function(a){function t(u){this._collection=u,this.size=u.length||u.size}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(n,r){if(r)return this.cacheResult().__iterate(n,r);var e=this._collection,i=VE(e),o=0;if(kD(i))for(var c;!(c=i.next()).done&&n(c.value,o++,this)!==!1;);return o},t.prototype.__iteratorUncached=function(n,r){if(r)return this.cacheResult().__iterator(n,r);var e=this._collection,i=VE(e);if(!kD(i))return new jt(Kr);var o=0;return new jt(function(){var c=i.next();return c.done?c:Yt(n,o++,c.value)})},t}(Nn),XD;function HE(){return XD||(XD=new Xa([]))}function GE(a){var t=zE(a);if(t)return t.fromEntrySeq();if(typeof a=="object")return new QE(a);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+a)}function JD(a){var t=zE(a);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+a)}function wae(a){var t=zE(a);if(t)return gae(a)?t.fromEntrySeq():vae(a)?t.toSetSeq():t;if(typeof a=="object")return new QE(a);throw new TypeError("Expected Array or collection object of values, or keyed object: "+a)}function zE(a){return UE(a)?new Xa(a):$E(a)?new Tae(a):void 0}var KD="@@__IMMUTABLE_MAP__@@";function yp(a){return!!(a&&a[KD])}function pO(a){return yp(a)&&pn(a)}function yO(a){return!!(a&&typeof a.equals=="function"&&typeof a.hashCode=="function")}function Sr(a,t){if(a===t||a!==a&&t!==t)return!0;if(!a||!t)return!1;if(typeof a.valueOf=="function"&&typeof t.valueOf=="function"){if(a=a.valueOf(),t=t.valueOf(),a===t||a!==a&&t!==t)return!0;if(!a||!t)return!1}return!!(yO(a)&&yO(t)&&a.equals(t))}var bp=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(t,u){t|=0,u|=0;var n=t&65535,r=u&65535;return n*r+((t>>>16)*r+n*(u>>>16)<<16>>>0)|0};function bO(a){return a>>>1&1073741824|a&3221225471}var Sae=Object.prototype.valueOf;function Wr(a){if(a==null)return WD(a);if(typeof a.hashCode=="function")return bO(a.hashCode(a));var t=Nae(a);if(t==null)return WD(t);switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return Oae(t);case"string":return t.length>Rae?Aae(t):kE(t);case"object":case"function":return Iae(t);case"symbol":return Eae(t);default:if(typeof t.toString=="function")return kE(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function WD(a){return a===null?1108378658:1108378659}function Oae(a){if(a!==a||a===1/0)return 0;var t=a|0;for(t!==a&&(t^=a*4294967295);a>4294967295;)a/=4294967295,t^=a;return bO(t)}function Aae(a){var t=YE[a];return t===void 0&&(t=kE(a),WE===Fae&&(WE=0,YE={}),WE++,YE[a]=t),t}function kE(a){for(var t=0,u=0;u<a.length;u++)t=31*t+a.charCodeAt(u)|0;return bO(t)}function Eae(a){var t=t6[a];return t!==void 0||(t=e6(),t6[a]=t),t}function Iae(a){var t;if(XE&&(t=JE.get(a),t!==void 0)||(t=a[Ja],t!==void 0)||!ZD&&(t=a.propertyIsEnumerable&&a.propertyIsEnumerable[Ja],t!==void 0||(t=xae(a),t!==void 0)))return t;if(t=e6(),XE)JE.set(a,t);else{if(YD!==void 0&&YD(a)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(ZD)Object.defineProperty(a,Ja,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(a.propertyIsEnumerable!==void 0&&a.propertyIsEnumerable===a.constructor.prototype.propertyIsEnumerable)a.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},a.propertyIsEnumerable[Ja]=t;else if(a.nodeType!==void 0)a[Ja]=t;else throw new Error("Unable to set a non-enumerable property on object.")}return t}var YD=Object.isExtensible,ZD=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function xae(a){if(a&&a.nodeType>0)switch(a.nodeType){case 1:return a.uniqueID;case 9:return a.documentElement&&a.documentElement.uniqueID}}function Nae(a){return a.valueOf!==Sae&&typeof a.valueOf=="function"?a.valueOf(a):a}function e6(){var a=++KE;return KE&1073741824&&(KE=0),a}var XE=typeof WeakMap=="function",JE;XE&&(JE=new WeakMap);var t6=Object.create(null),KE=0,Ja="__immutablehash__";typeof Symbol=="function"&&(Ja=Symbol(Ja));var Rae=16,Fae=255,WE=0,YE={},mO=function(a){function t(u,n){this._iter=u,this._useKeys=n,this.size=u.size}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.get=function(n,r){return this._iter.get(n,r)},t.prototype.has=function(n){return this._iter.has(n)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var n=this,r=ZE(this,!0);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().reverse()}),r},t.prototype.map=function(n,r){var e=this,i=u6(this,n,r);return this._useKeys||(i.valueSeq=function(){return e._iter.toSeq().map(n,r)}),i},t.prototype.__iterate=function(n,r){var e=this;return this._iter.__iterate(function(i,o){return n(i,o,e)},r)},t.prototype.__iterator=function(n,r){return this._iter.__iterator(n,r)},t}(da);mO.prototype[eh]=!0;var r6=function(a){function t(u){this._iter=u,this.size=u.size}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.includes=function(n){return this._iter.includes(n)},t.prototype.__iterate=function(n,r){var e=this,i=0;return r&&Kf(this),this._iter.__iterate(function(o){return n(o,r?e.size-++i:i++,e)},r)},t.prototype.__iterator=function(n,r){var e=this,i=this._iter.__iterator(Vn,r),o=0;return r&&Kf(this),new jt(function(){var c=i.next();return c.done?c:Yt(n,r?e.size-++o:o++,c.value,c)})},t}(Nn),n6=function(a){function t(u){this._iter=u,this.size=u.size}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.has=function(n){return this._iter.includes(n)},t.prototype.__iterate=function(n,r){var e=this;return this._iter.__iterate(function(i){return n(i,i,e)},r)},t.prototype.__iterator=function(n,r){var e=this._iter.__iterator(Vn,r);return new jt(function(){var i=e.next();return i.done?i:Yt(n,i.value,i.value,i)})},t}(rh),i6=function(a){function t(u){this._iter=u,this.size=u.size}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(n,r){var e=this;return this._iter.__iterate(function(i){if(i){d6(i);var o=Br(i);return n(o?i.get(1):i[1],o?i.get(0):i[0],e)}},r)},t.prototype.__iterator=function(n,r){var e=this._iter.__iterator(Vn,r);return new jt(function(){for(;;){var i=e.next();if(i.done)return i;var o=i.value;if(o){d6(o);var c=Br(o);return Yt(n,c?o.get(0):o[0],c?o.get(1):o[1],i)}}})},t}(da);r6.prototype.cacheResult=mO.prototype.cacheResult=n6.prototype.cacheResult=i6.prototype.cacheResult=rI;function a6(a){var t=pi(a);return t._iter=a,t.size=a.size,t.flip=function(){return a},t.reverse=function(){var u=a.reverse.apply(this);return u.flip=function(){return a.reverse()},u},t.has=function(u){return a.includes(u)},t.includes=function(u){return a.has(u)},t.cacheResult=rI,t.__iterateUncached=function(u,n){var r=this;return a.__iterate(function(e,i){return u(i,e,r)!==!1},n)},t.__iteratorUncached=function(u,n){if(u===xn){var r=a.__iterator(u,n);return new jt(function(){var e=r.next();if(!e.done){var i=e.value[0];e.value[0]=e.value[1],e.value[1]=i}return e})}return a.__iterator(u===Vn?pp:Vn,n)},t}function u6(a,t,u){var n=pi(a);return n.size=a.size,n.has=function(r){return a.has(r)},n.get=function(r,e){var i=a.get(r,xt);return i===xt?e:t.call(u,i,r,a)},n.__iterateUncached=function(r,e){var i=this;return a.__iterate(function(o,c,s){return r(t.call(u,o,c,s),c,i)!==!1},e)},n.__iteratorUncached=function(r,e){var i=a.__iterator(xn,e);return new jt(function(){var o=i.next();if(o.done)return o;var c=o.value,s=c[0];return Yt(r,s,t.call(u,c[1],s,a),o)})},n}function ZE(a,t){var u=this,n=pi(a);return n._iter=a,n.size=a.size,n.reverse=function(){return a},a.flip&&(n.flip=function(){var r=a6(a);return r.reverse=function(){return a.flip()},r}),n.get=function(r,e){return a.get(t?r:-1-r,e)},n.has=function(r){return a.has(t?r:-1-r)},n.includes=function(r){return a.includes(r)},n.cacheResult=rI,n.__iterate=function(r,e){var i=this,o=0;return e&&Kf(a),a.__iterate(function(c,s){return r(c,t?s:e?i.size-++o:o++,i)},!e)},n.__iterator=function(r,e){var i=0;e&&Kf(a);var o=a.__iterator(xn,!e);return new jt(function(){var c=o.next();if(c.done)return c;var s=c.value;return Yt(r,t?s[0]:e?u.size-++i:i++,s[1],c)})},n}function o6(a,t,u,n){var r=pi(a);return n&&(r.has=function(e){var i=a.get(e,xt);return i!==xt&&!!t.call(u,i,e,a)},r.get=function(e,i){var o=a.get(e,xt);return o!==xt&&t.call(u,o,e,a)?o:i}),r.__iterateUncached=function(e,i){var o=this,c=0;return a.__iterate(function(s,l,d){if(t.call(u,s,l,d))return c++,e(s,n?l:c-1,o)},i),c},r.__iteratorUncached=function(e,i){var o=a.__iterator(xn,i),c=0;return new jt(function(){for(;;){var s=o.next();if(s.done)return s;var l=s.value,d=l[0],f=l[1];if(t.call(u,f,d,a))return Yt(e,n?d:c++,f,s)}})},r}function Dae(a,t,u){var n=pa().asMutable();return a.__iterate(function(r,e){n.update(t.call(u,r,e,a),0,function(i){return i+1})}),n.asImmutable()}function Pae(a,t,u){var n=Gt(a),r=(pn(a)?Qn():pa()).asMutable();a.__iterate(function(i,o){r.update(t.call(u,i,o,a),function(c){return c=c||[],c.push(n?[o,i]:i),c})});var e=tI(a);return r.map(function(i){return zt(a,e(i))}).asImmutable()}function jae(a,t,u){var n=Gt(a),r=[[],[]];a.__iterate(function(i,o){r[t.call(u,i,o,a)?1:0].push(n?[o,i]:i)});var e=tI(a);return r.map(function(i){return zt(a,e(i))})}function eI(a,t,u,n){var r=a.size;if(dp(t,u,r))return a;if(typeof r>"u"&&(t<0||u<0))return eI(a.toSeq().cacheResult(),t,u,n);var e=Wf(t,r),i=fp(u,r),o=i-e,c;o===o&&(c=o<0?0:o);var s=pi(a);return s.size=c===0?c:a.size&&c||void 0,!n&&hp(a)&&c>=0&&(s.get=function(l,d){return l=ca(this,l),l>=0&&l<c?a.get(l+e,d):d}),s.__iterateUncached=function(l,d){var f=this;if(c===0)return 0;if(d)return this.cacheResult().__iterate(l,d);var h=0,p=!0,b=0;return a.__iterate(function(_,y){if(!(p&&(p=h++<e)))return b++,l(_,n?y:b-1,f)!==!1&&b!==c}),b},s.__iteratorUncached=function(l,d){if(c!==0&&d)return this.cacheResult().__iterator(l,d);if(c===0)return new jt(Kr);var f=a.__iterator(l,d),h=0,p=0;return new jt(function(){for(;h++<e;)f.next();if(++p>c)return Kr();var b=f.next();return n||l===Vn||b.done?b:l===pp?Yt(l,p-1,void 0,b):Yt(l,p-1,b.value[1],b)})},s}function Lae(a,t,u){var n=pi(a);return n.__iterateUncached=function(r,e){var i=this;if(e)return this.cacheResult().__iterate(r,e);var o=0;return a.__iterate(function(c,s,l){return t.call(u,c,s,l)&&++o&&r(c,s,i)}),o},n.__iteratorUncached=function(r,e){var i=this;if(e)return this.cacheResult().__iterator(r,e);var o=a.__iterator(xn,e),c=!0;return new jt(function(){if(!c)return Kr();var s=o.next();if(s.done)return s;var l=s.value,d=l[0],f=l[1];return t.call(u,f,d,i)?r===xn?s:Yt(r,d,f,s):(c=!1,Kr())})},n}function s6(a,t,u,n){var r=pi(a);return r.__iterateUncached=function(e,i){var o=this;if(i)return this.cacheResult().__iterate(e,i);var c=!0,s=0;return a.__iterate(function(l,d,f){if(!(c&&(c=t.call(u,l,d,f))))return s++,e(l,n?d:s-1,o)}),s},r.__iteratorUncached=function(e,i){var o=this;if(i)return this.cacheResult().__iterator(e,i);var c=a.__iterator(xn,i),s=!0,l=0;return new jt(function(){var d,f,h;do{if(d=c.next(),d.done)return n||e===Vn?d:e===pp?Yt(e,l++,void 0,d):Yt(e,l++,d.value[1],d);var p=d.value;f=p[0],h=p[1],s&&(s=t.call(u,h,f,o))}while(s);return e===xn?d:Yt(e,f,h,d)})},r}function Mae(a,t){var u=Gt(a),n=[a].concat(t).map(function(i){return Br(i)?u&&(i=In(i)):i=u?GE(i):JD(Array.isArray(i)?i:[i]),i}).filter(function(i){return i.size!==0});if(n.length===0)return a;if(n.length===1){var r=n[0];if(r===a||u&&Gt(r)||xr(a)&&xr(r))return r}var e=new Xa(n);return u?e=e.toKeyedSeq():xr(a)||(e=e.toSetSeq()),e=e.flatten(!0),e.size=n.reduce(function(i,o){if(i!==void 0){var c=o.size;if(c!==void 0)return i+c}},0),e}function c6(a,t,u){var n=pi(a);return n.__iterateUncached=function(r,e){if(e)return this.cacheResult().__iterate(r,e);var i=0,o=!1;function c(s,l){s.__iterate(function(d,f){return(!t||l<t)&&Br(d)?c(d,l+1):(i++,r(d,u?f:i-1,n)===!1&&(o=!0)),!o},e)}return c(a,0),i},n.__iteratorUncached=function(r,e){if(e)return this.cacheResult().__iterator(r,e);var i=a.__iterator(r,e),o=[],c=0;return new jt(function(){for(;i;){var s=i.next();if(s.done!==!1){i=o.pop();continue}var l=s.value;if(r===xn&&(l=l[1]),(!t||o.length<t)&&Br(l))o.push(i),i=l.__iterator(r,e);else return u?s:Yt(r,c++,l,s)}return Kr()})},n}function Cae(a,t,u){var n=tI(a);return a.toSeq().map(function(r,e){return n(t.call(u,r,e,a))}).flatten(!0)}function qae(a,t){var u=pi(a);return u.size=a.size&&a.size*2-1,u.__iterateUncached=function(n,r){var e=this,i=0;return a.__iterate(function(o){return(!i||n(t,i++,e)!==!1)&&n(o,i++,e)!==!1},r),i},u.__iteratorUncached=function(n,r){var e=a.__iterator(Vn,r),i=0,o;return new jt(function(){return(!o||i%2)&&(o=e.next(),o.done)?o:i%2?Yt(n,i++,t):Yt(n,i++,o.value,o)})},u}function nh(a,t,u){t||(t=f6);var n=Gt(a),r=0,e=a.toSeq().map(function(i,o){return[o,i,r++,u?u(i,o,a):i]}).valueSeq().toArray();return e.sort(function(i,o){return t(i[3],o[3])||i[2]-o[2]}).forEach(n?function(i,o){e[o].length=2}:function(i,o){e[o]=i[1]}),n?da(e):xr(a)?Nn(e):rh(e)}function _O(a,t,u){if(t||(t=f6),u){var n=a.toSeq().map(function(r,e){return[r,u(r,e,a)]}).reduce(function(r,e){return l6(t,r[1],e[1])?e:r});return n&&n[0]}return a.reduce(function(r,e){return l6(t,r,e)?e:r})}function l6(a,t,u){var n=a(u,t);return n===0&&u!==t&&(u==null||u!==u)||n>0}function gO(a,t,u,n){var r=pi(a),e=new Xa(u).map(function(i){return i.size});return r.size=n?e.max():e.min(),r.__iterate=function(i,o){for(var c=this.__iterator(Vn,o),s,l=0;!(s=c.next()).done&&i(s.value,l++,this)!==!1;);return l},r.__iteratorUncached=function(i,o){var c=u.map(function(d){return d=Wt(d),VE(o?d.reverse():d)}),s=0,l=!1;return new jt(function(){var d;return l||(d=c.map(function(f){return f.next()}),l=n?d.every(function(f){return f.done}):d.some(function(f){return f.done})),l?Kr():Yt(i,s++,t.apply(null,d.map(function(f){return f.value})))})},r}function zt(a,t){return a===t?a:hp(a)?t:a.constructor(t)}function d6(a){if(a!==Object(a))throw new TypeError("Expected [K, V] tuple: "+a)}function tI(a){return Gt(a)?In:xr(a)?ka:Zf}function pi(a){return Object.create((Gt(a)?da:xr(a)?Nn:rh).prototype)}function rI(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):$r.prototype.cacheResult.call(this)}function f6(a,t){return a===void 0&&t===void 0?0:a===void 0?1:t===void 0?-1:a>t?1:a<t?-1:0}function yi(a,t){t=t||0;for(var u=Math.max(0,a.length-t),n=new Array(u),r=0;r<u;r++)n[r]=a[r+t];return n}function nI(a,t){if(!a)throw new Error(t)}function yn(a){nI(a!==1/0,"Cannot perform this action with an infinite size.")}function h6(a){if(UE(a)&&typeof a!="string")return a;if(pn(a))return a.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+a)}var Bae=Object.prototype.toString;function vO(a){if(!a||typeof a!="object"||Bae.call(a)!=="[object Object]")return!1;var t=Object.getPrototypeOf(a);if(t===null)return!0;for(var u=t,n=Object.getPrototypeOf(t);n!==null;)u=n,n=Object.getPrototypeOf(u);return u===t}function fa(a){return typeof a=="object"&&(hn(a)||Array.isArray(a)||vO(a))}function mp(a){try{return typeof a=="string"?JSON.stringify(a):String(a)}catch{return JSON.stringify(a)}}function iI(a,t){return hn(a)?a.has(t):fa(a)&&th.call(a,t)}function TO(a,t,u){return hn(a)?a.get(t,u):iI(a,t)?typeof a.get=="function"?a.get(t):a[t]:u}function wO(a){if(Array.isArray(a))return yi(a);var t={};for(var u in a)th.call(a,u)&&(t[u]=a[u]);return t}function aI(a,t){if(!fa(a))throw new TypeError("Cannot update non-data-structure value: "+a);if(hn(a)){if(!a.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+a);return a.remove(t)}if(!th.call(a,t))return a;var u=wO(a);return Array.isArray(u)?u.splice(t,1):delete u[t],u}function uI(a,t,u){if(!fa(a))throw new TypeError("Cannot update non-data-structure value: "+a);if(hn(a)){if(!a.set)throw new TypeError("Cannot update immutable value without .set() method: "+a);return a.set(t,u)}if(th.call(a,t)&&u===a[t])return a;var n=wO(a);return n[t]=u,n}function ha(a,t,u,n){n||(n=u,u=void 0);var r=p6(hn(a),a,h6(t),0,u,n);return r===xt?u:r}function p6(a,t,u,n,r,e){var i=t===xt;if(n===u.length){var o=i?r:t,c=e(o);return c===o?t:c}if(!i&&!fa(t))throw new TypeError("Cannot update within non-data-structure value in path ["+u.slice(0,n).map(mp)+"]: "+t);var s=u[n],l=i?xt:TO(t,s,xt),d=p6(l===xt?a:hn(l),l,u,n+1,r,e);return d===l?t:d===xt?aI(t,s):uI(i?a?Un():{}:t,s,d)}function oI(a,t,u){return ha(a,t,xt,function(){return u})}function sI(a,t){return oI(this,a,t)}function cI(a,t){return ha(a,t,function(){return xt})}function lI(a){return cI(this,a)}function SO(a,t,u,n){return ha(a,[t],u,n)}function dI(a,t,u){return arguments.length===1?a(this):SO(this,a,t,u)}function fI(a,t,u){return ha(this,a,t,u)}function y6(){for(var a=[],t=arguments.length;t--;)a[t]=arguments[t];return m6(this,a)}function b6(a){for(var t=[],u=arguments.length-1;u-- >0;)t[u]=arguments[u+1];if(typeof a!="function")throw new TypeError("Invalid merger function: "+a);return m6(this,t,a)}function m6(a,t,u){for(var n=[],r=0;r<t.length;r++){var e=In(t[r]);e.size!==0&&n.push(e)}return n.length===0?a:a.toSeq().size===0&&!a.__ownerID&&n.length===1?a.constructor(n[0]):a.withMutations(function(i){for(var o=u?function(s,l){SO(i,l,xt,function(d){return d===xt?s:u(d,s,l)})}:function(s,l){i.set(l,s)},c=0;c<n.length;c++)n[c].forEach(o)})}function _6(a){for(var t=[],u=arguments.length-1;u-- >0;)t[u]=arguments[u+1];return gp(a,t)}function g6(a,t){for(var u=[],n=arguments.length-2;n-- >0;)u[n]=arguments[n+2];return gp(t,u,a)}function v6(a){for(var t=[],u=arguments.length-1;u-- >0;)t[u]=arguments[u+1];return _p(a,t)}function T6(a,t){for(var u=[],n=arguments.length-2;n-- >0;)u[n]=arguments[n+2];return _p(t,u,a)}function _p(a,t,u){return gp(a,t,$ae(u))}function gp(a,t,u){if(!fa(a))throw new TypeError("Cannot merge into non-data-structure value: "+a);if(hn(a))return typeof u=="function"&&a.mergeWith?a.mergeWith.apply(a,[u].concat(t)):a.merge?a.merge.apply(a,t):a.concat.apply(a,t);for(var n=Array.isArray(a),r=a,e=n?ka:In,i=n?function(c){r===a&&(r=wO(r)),r.push(c)}:function(c,s){var l=th.call(r,s),d=l&&u?u(r[s],c,s):c;(!l||d!==r[s])&&(r===a&&(r=wO(r)),r[s]=d)},o=0;o<t.length;o++)e(t[o]).forEach(i);return r}function $ae(a){function t(u,n,r){return fa(u)&&fa(n)&&Vae(u,n)?gp(u,[n],t):a?a(u,n,r):n}return t}function Vae(a,t){var u=$r(a),n=$r(t);return xr(u)===xr(n)&&Gt(u)===Gt(n)}function w6(){for(var a=[],t=arguments.length;t--;)a[t]=arguments[t];return _p(this,a)}function S6(a){for(var t=[],u=arguments.length-1;u-- >0;)t[u]=arguments[u+1];return _p(this,t,a)}function hI(a){for(var t=[],u=arguments.length-1;u-- >0;)t[u]=arguments[u+1];return ha(this,a,Un(),function(n){return gp(n,t)})}function pI(a){for(var t=[],u=arguments.length-1;u-- >0;)t[u]=arguments[u+1];return ha(this,a,Un(),function(n){return _p(n,t)})}function vp(a){var t=this.asMutable();return a(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function Tp(){return this.__ownerID?this:this.__ensureOwner(new qE)}function wp(){return this.__ensureOwner()}function yI(){return this.__altered}var pa=function(a){function t(u){return u==null?Un():yp(u)&&!pn(u)?u:Un().withMutations(function(n){var r=a(u);yn(r.size),r.forEach(function(e,i){return n.set(i,e)})})}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.of=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return Un().withMutations(function(e){for(var i=0;i<n.length;i+=2){if(i+1>=n.length)throw new Error("Missing value for key: "+n[i]);e.set(n[i],n[i+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(n,r){return this._root?this._root.get(0,void 0,n,r):r},t.prototype.set=function(n,r){return E6(this,n,r)},t.prototype.remove=function(n){return E6(this,n,xt)},t.prototype.deleteAll=function(n){var r=Wt(n);return r.size===0?this:this.withMutations(function(e){r.forEach(function(i){return e.remove(i)})})},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Un()},t.prototype.sort=function(n){return Qn(nh(this,n))},t.prototype.sortBy=function(n,r){return Qn(nh(this,r,n))},t.prototype.map=function(n,r){var e=this;return this.withMutations(function(i){i.forEach(function(o,c){i.set(c,n.call(r,o,c,e))})})},t.prototype.__iterator=function(n,r){return new Uae(this,n,r)},t.prototype.__iterate=function(n,r){var e=this,i=0;return this._root&&this._root.iterate(function(o){return i++,n(o[1],o[0],e)},r),i},t.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?mI(this.size,this._root,n,this.__hash):this.size===0?Un():(this.__ownerID=n,this.__altered=!1,this)},t}(In);pa.isMap=yp;var Zt=pa.prototype;Zt[KD]=!0,Zt[lp]=Zt.remove,Zt.removeAll=Zt.deleteAll,Zt.setIn=sI,Zt.removeIn=Zt.deleteIn=lI,Zt.update=dI,Zt.updateIn=fI,Zt.merge=Zt.concat=y6,Zt.mergeWith=b6,Zt.mergeDeep=w6,Zt.mergeDeepWith=S6,Zt.mergeIn=hI,Zt.mergeDeepIn=pI,Zt.withMutations=vp,Zt.wasAltered=yI,Zt.asImmutable=wp,Zt["@@transducer/init"]=Zt.asMutable=Tp,Zt["@@transducer/step"]=function(a,t){return a.set(t[0],t[1])},Zt["@@transducer/result"]=function(a){return a.asImmutable()};var Sp=function(t,u){this.ownerID=t,this.entries=u};Sp.prototype.get=function(t,u,n,r){for(var e=this.entries,i=0,o=e.length;i<o;i++)if(Sr(n,e[i][0]))return e[i][1];return r},Sp.prototype.update=function(t,u,n,r,e,i,o){for(var c=e===xt,s=this.entries,l=0,d=s.length;l<d&&!Sr(r,s[l][0]);l++);var f=l<d;if(f?s[l][1]===e:c)return this;if(En(o),(c||!f)&&En(i),!(c&&s.length===1)){if(!f&&!c&&s.length>=Xae)return Qae(t,s,r,e);var h=t&&t===this.ownerID,p=h?s:yi(s);return f?c?l===d-1?p.pop():p[l]=p.pop():p[l]=[r,e]:p.push([r,e]),h?(this.entries=p,this):new Sp(t,p)}};var ih=function(t,u,n){this.ownerID=t,this.bitmap=u,this.nodes=n};ih.prototype.get=function(t,u,n,r){u===void 0&&(u=Wr(n));var e=1<<((t===0?u:u>>>t)&Jr),i=this.bitmap;return(i&e)===0?r:this.nodes[x6(i&e-1)].get(t+Kt,u,n,r)},ih.prototype.update=function(t,u,n,r,e,i,o){n===void 0&&(n=Wr(r));var c=(u===0?n:n>>>u)&Jr,s=1<<c,l=this.bitmap,d=(l&s)!==0;if(!d&&e===xt)return this;var f=x6(l&s-1),h=this.nodes,p=d?h[f]:void 0,b=_I(p,t,u+Kt,n,r,e,i,o);if(b===p)return this;if(!d&&b&&h.length>=Jae)return Gae(t,h,l,c,b);if(d&&!b&&h.length===2&&I6(h[f^1]))return h[f^1];if(d&&b&&h.length===1&&I6(b))return b;var _=t&&t===this.ownerID,y=d?b?l:l^s:l|s,g=d?b?N6(h,f,b,_):kae(h,f,_):zae(h,f,b,_);return _?(this.bitmap=y,this.nodes=g,this):new ih(t,y,g)};var Op=function(t,u,n){this.ownerID=t,this.count=u,this.nodes=n};Op.prototype.get=function(t,u,n,r){u===void 0&&(u=Wr(n));var e=(t===0?u:u>>>t)&Jr,i=this.nodes[e];return i?i.get(t+Kt,u,n,r):r},Op.prototype.update=function(t,u,n,r,e,i,o){n===void 0&&(n=Wr(r));var c=(u===0?n:n>>>u)&Jr,s=e===xt,l=this.nodes,d=l[c];if(s&&!d)return this;var f=_I(d,t,u+Kt,n,r,e,i,o);if(f===d)return this;var h=this.count;if(!d)h++;else if(!f&&(h--,h<Kae))return Hae(t,l,h,c);var p=t&&t===this.ownerID,b=N6(l,c,f,p);return p?(this.count=h,this.nodes=b,this):new Op(t,h,b)};var ah=function(t,u,n){this.ownerID=t,this.keyHash=u,this.entries=n};ah.prototype.get=function(t,u,n,r){for(var e=this.entries,i=0,o=e.length;i<o;i++)if(Sr(n,e[i][0]))return e[i][1];return r},ah.prototype.update=function(t,u,n,r,e,i,o){n===void 0&&(n=Wr(r));var c=e===xt;if(n!==this.keyHash)return c?this:(En(o),En(i),gI(this,t,u,n,[r,e]));for(var s=this.entries,l=0,d=s.length;l<d&&!Sr(r,s[l][0]);l++);var f=l<d;if(f?s[l][1]===e:c)return this;if(En(o),(c||!f)&&En(i),c&&d===2)return new Di(t,this.keyHash,s[l^1]);var h=t&&t===this.ownerID,p=h?s:yi(s);return f?c?l===d-1?p.pop():p[l]=p.pop():p[l]=[r,e]:p.push([r,e]),h?(this.entries=p,this):new ah(t,this.keyHash,p)};var Di=function(t,u,n){this.ownerID=t,this.keyHash=u,this.entry=n};Di.prototype.get=function(t,u,n,r){return Sr(n,this.entry[0])?this.entry[1]:r},Di.prototype.update=function(t,u,n,r,e,i,o){var c=e===xt,s=Sr(r,this.entry[0]);if(s?e===this.entry[1]:c)return this;if(En(o),c){En(i);return}return s?t&&t===this.ownerID?(this.entry[1]=e,this):new Di(t,this.keyHash,[r,e]):(En(i),gI(this,t,u,Wr(r),[r,e]))},Sp.prototype.iterate=ah.prototype.iterate=function(a,t){for(var u=this.entries,n=0,r=u.length-1;n<=r;n++)if(a(u[t?r-n:n])===!1)return!1},ih.prototype.iterate=Op.prototype.iterate=function(a,t){for(var u=this.nodes,n=0,r=u.length-1;n<=r;n++){var e=u[t?r-n:n];if(e&&e.iterate(a,t)===!1)return!1}},Di.prototype.iterate=function(a,t){return a(this.entry)};var Uae=function(a){function t(u,n,r){this._type=n,this._reverse=r,this._stack=u._root&&O6(u._root)}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var n=this._type,r=this._stack;r;){var e=r.node,i=r.index++,o=void 0;if(e.entry){if(i===0)return bI(n,e.entry)}else if(e.entries){if(o=e.entries.length-1,i<=o)return bI(n,e.entries[this._reverse?o-i:i])}else if(o=e.nodes.length-1,i<=o){var c=e.nodes[this._reverse?o-i:i];if(c){if(c.entry)return bI(n,c.entry);r=this._stack=O6(c,r)}continue}r=this._stack=this._stack.__prev}return Kr()},t}(jt);function bI(a,t){return Yt(a,t[0],t[1])}function O6(a,t){return{node:a,index:0,__prev:t}}function mI(a,t,u,n){var r=Object.create(Zt);return r.size=a,r._root=t,r.__ownerID=u,r.__hash=n,r.__altered=!1,r}var A6;function Un(){return A6||(A6=mI(0))}function E6(a,t,u){var n,r;if(a._root){var e=CE(),i=CE();if(n=_I(a._root,a.__ownerID,0,void 0,t,u,e,i),!i.value)return a;r=a.size+(e.value?u===xt?-1:1:0)}else{if(u===xt)return a;r=1,n=new Sp(a.__ownerID,[[t,u]])}return a.__ownerID?(a.size=r,a._root=n,a.__hash=void 0,a.__altered=!0,a):n?mI(r,n):Un()}function _I(a,t,u,n,r,e,i,o){return a?a.update(t,u,n,r,e,i,o):e===xt?a:(En(o),En(i),new Di(t,n,[r,e]))}function I6(a){return a.constructor===Di||a.constructor===ah}function gI(a,t,u,n,r){if(a.keyHash===n)return new ah(t,n,[a.entry,r]);var e=(u===0?a.keyHash:a.keyHash>>>u)&Jr,i=(u===0?n:n>>>u)&Jr,o,c=e===i?[gI(a,t,u+Kt,n,r)]:(o=new Di(t,n,r),e<i?[a,o]:[o,a]);return new ih(t,1<<e|1<<i,c)}function Qae(a,t,u,n){a||(a=new qE);for(var r=new Di(a,Wr(u),[u,n]),e=0;e<t.length;e++){var i=t[e];r=r.update(a,0,void 0,i[0],i[1])}return r}function Hae(a,t,u,n){for(var r=0,e=0,i=new Array(u),o=0,c=1,s=t.length;o<s;o++,c<<=1){var l=t[o];l!==void 0&&o!==n&&(r|=c,i[e++]=l)}return new ih(a,r,i)}function Gae(a,t,u,n,r){for(var e=0,i=new Array(An),o=0;u!==0;o++,u>>>=1)i[o]=u&1?t[e++]:void 0;return i[n]=r,new Op(a,e+1,i)}function x6(a){return a-=a>>1&1431655765,a=(a&858993459)+(a>>2&858993459),a=a+(a>>4)&252645135,a+=a>>8,a+=a>>16,a&127}function N6(a,t,u,n){var r=n?a:yi(a);return r[t]=u,r}function zae(a,t,u,n){var r=a.length+1;if(n&&t+1===r)return a[t]=u,a;for(var e=new Array(r),i=0,o=0;o<r;o++)o===t?(e[o]=u,i=-1):e[o]=a[o+i];return e}function kae(a,t,u){var n=a.length-1;if(u&&t===n)return a.pop(),a;for(var r=new Array(n),e=0,i=0;i<n;i++)i===t&&(e=1),r[i]=a[i+e];return r}var Xae=An/4,Jae=An/2,Kae=An/4,R6="@@__IMMUTABLE_LIST__@@";function OO(a){return!!(a&&a[R6])}var uh=function(a){function t(u){var n=AO();if(u==null)return n;if(OO(u))return u;var r=a(u),e=r.size;return e===0?n:(yn(e),e>0&&e<An?Ep(0,e,Kt,null,new ya(r.toArray())):n.withMutations(function(i){i.setSize(e),r.forEach(function(o,c){return i.set(c,o)})}))}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(n,r){if(n=ca(this,n),n>=0&&n<this.size){n+=this._origin;var e=P6(this,n);return e&&e.array[n&Jr]}return r},t.prototype.set=function(n,r){return Wae(this,n,r)},t.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},t.prototype.insert=function(n,r){return this.splice(n,0,r)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Kt,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):AO()},t.prototype.push=function(){var n=arguments,r=this.size;return this.withMutations(function(e){ba(e,0,r+n.length);for(var i=0;i<n.length;i++)e.set(r+i,n[i])})},t.prototype.pop=function(){return ba(this,0,-1)},t.prototype.unshift=function(){var n=arguments;return this.withMutations(function(r){ba(r,-n.length);for(var e=0;e<n.length;e++)r.set(e,n[e])})},t.prototype.shift=function(){return ba(this,1)},t.prototype.concat=function(){for(var n=arguments,r=[],e=0;e<arguments.length;e++){var i=n[e],o=a(typeof i!="string"&&$E(i)?i:[i]);o.size!==0&&r.push(o)}return r.length===0?this:this.size===0&&!this.__ownerID&&r.length===1?this.constructor(r[0]):this.withMutations(function(c){r.forEach(function(s){return s.forEach(function(l){return c.push(l)})})})},t.prototype.setSize=function(n){return ba(this,0,n)},t.prototype.map=function(n,r){var e=this;return this.withMutations(function(i){for(var o=0;o<e.size;o++)i.set(o,n.call(r,i.get(o),o,e))})},t.prototype.slice=function(n,r){var e=this.size;return dp(n,r,e)?this:ba(this,Wf(n,e),fp(r,e))},t.prototype.__iterator=function(n,r){var e=r?this.size:0,i=F6(this,r);return new jt(function(){var o=i();return o===Ap?Kr():Yt(n,r?--e:e++,o)})},t.prototype.__iterate=function(n,r){for(var e=r?this.size:0,i=F6(this,r),o;(o=i())!==Ap&&n(o,r?--e:e++,this)!==!1;);return e},t.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Ep(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?AO():(this.__ownerID=n,this.__altered=!1,this)},t}(ka);uh.isList=OO;var _r=uh.prototype;_r[R6]=!0,_r[lp]=_r.remove,_r.merge=_r.concat,_r.setIn=sI,_r.deleteIn=_r.removeIn=lI,_r.update=dI,_r.updateIn=fI,_r.mergeIn=hI,_r.mergeDeepIn=pI,_r.withMutations=vp,_r.wasAltered=yI,_r.asImmutable=wp,_r["@@transducer/init"]=_r.asMutable=Tp,_r["@@transducer/step"]=function(a,t){return a.push(t)},_r["@@transducer/result"]=function(a){return a.asImmutable()};var ya=function(t,u){this.array=t,this.ownerID=u};ya.prototype.removeBefore=function(t,u,n){if(n===u?1<<u:this.array.length===0)return this;var r=n>>>u&Jr;if(r>=this.array.length)return new ya([],t);var e=r===0,i;if(u>0){var o=this.array[r];if(i=o&&o.removeBefore(t,u-Kt,n),i===o&&e)return this}if(e&&!i)return this;var c=oh(this,t);if(!e)for(var s=0;s<r;s++)c.array[s]=void 0;return i&&(c.array[r]=i),c},ya.prototype.removeAfter=function(t,u,n){if(n===(u?1<<u:0)||this.array.length===0)return this;var r=n-1>>>u&Jr;if(r>=this.array.length)return this;var e;if(u>0){var i=this.array[r];if(e=i&&i.removeAfter(t,u-Kt,n),e===i&&r===this.array.length-1)return this}var o=oh(this,t);return o.array.splice(r+1),e&&(o.array[r]=e),o};var Ap={};function F6(a,t){var u=a._origin,n=a._capacity,r=Ip(n),e=a._tail;return i(a._root,a._level,0);function i(s,l,d){return l===0?o(s,d):c(s,l,d)}function o(s,l){var d=l===r?e&&e.array:s&&s.array,f=l>u?0:u-l,h=n-l;return h>An&&(h=An),function(){if(f===h)return Ap;var p=t?--h:f++;return d&&d[p]}}function c(s,l,d){var f,h=s&&s.array,p=d>u?0:u-d>>l,b=(n-d>>l)+1;return b>An&&(b=An),function(){for(;;){if(f){var _=f();if(_!==Ap)return _;f=null}if(p===b)return Ap;var y=t?--b:p++;f=i(h&&h[y],l-Kt,d+(y<<l))}}}}function Ep(a,t,u,n,r,e,i){var o=Object.create(_r);return o.size=t-a,o._origin=a,o._capacity=t,o._level=u,o._root=n,o._tail=r,o.__ownerID=e,o.__hash=i,o.__altered=!1,o}var D6;function AO(){return D6||(D6=Ep(0,0,Kt))}function Wae(a,t,u){if(t=ca(a,t),t!==t)return a;if(t>=a.size||t<0)return a.withMutations(function(i){t<0?ba(i,t).set(0,u):ba(i,0,t+1).set(t,u)});t+=a._origin;var n=a._tail,r=a._root,e=CE();return t>=Ip(a._capacity)?n=vI(n,a.__ownerID,0,t,u,e):r=vI(r,a.__ownerID,a._level,t,u,e),e.value?a.__ownerID?(a._root=r,a._tail=n,a.__hash=void 0,a.__altered=!0,a):Ep(a._origin,a._capacity,a._level,r,n):a}function vI(a,t,u,n,r,e){var i=n>>>u&Jr,o=a&&i<a.array.length;if(!o&&r===void 0)return a;var c;if(u>0){var s=a&&a.array[i],l=vI(s,t,u-Kt,n,r,e);return l===s?a:(c=oh(a,t),c.array[i]=l,c)}return o&&a.array[i]===r?a:(e&&En(e),c=oh(a,t),r===void 0&&i===c.array.length-1?c.array.pop():c.array[i]=r,c)}function oh(a,t){return t&&a&&t===a.ownerID?a:new ya(a?a.array.slice():[],t)}function P6(a,t){if(t>=Ip(a._capacity))return a._tail;if(t<1<<a._level+Kt){for(var u=a._root,n=a._level;u&&n>0;)u=u.array[t>>>n&Jr],n-=Kt;return u}}function ba(a,t,u){t!==void 0&&(t|=0),u!==void 0&&(u|=0);var n=a.__ownerID||new qE,r=a._origin,e=a._capacity,i=r+t,o=u===void 0?e:u<0?e+u:r+u;if(i===r&&o===e)return a;if(i>=o)return a.clear();for(var c=a._level,s=a._root,l=0;i+l<0;)s=new ya(s&&s.array.length?[void 0,s]:[],n),c+=Kt,l+=1<<c;l&&(i+=l,r+=l,o+=l,e+=l);for(var d=Ip(e),f=Ip(o);f>=1<<c+Kt;)s=new ya(s&&s.array.length?[s]:[],n),c+=Kt;var h=a._tail,p=f<d?P6(a,o-1):f>d?new ya([],n):h;if(h&&f>d&&i<e&&h.array.length){s=oh(s,n);for(var b=s,_=c;_>Kt;_-=Kt){var y=d>>>_&Jr;b=b.array[y]=oh(b.array[y],n)}b.array[d>>>Kt&Jr]=h}if(o<e&&(p=p&&p.removeAfter(n,0,o)),i>=f)i-=f,o-=f,c=Kt,s=null,p=p&&p.removeBefore(n,0,i);else if(i>r||f<d){for(l=0;s;){var g=i>>>c&Jr;if(g!==f>>>c&Jr)break;g&&(l+=(1<<c)*g),c-=Kt,s=s.array[g]}s&&i>r&&(s=s.removeBefore(n,c,i-l)),s&&f<d&&(s=s.removeAfter(n,c,f-l)),l&&(i-=l,o-=l)}return a.__ownerID?(a.size=o-i,a._origin=i,a._capacity=o,a._level=c,a._root=s,a._tail=p,a.__hash=void 0,a.__altered=!0,a):Ep(i,o,c,s,p)}function Ip(a){return a<An?0:a-1>>>Kt<<Kt}var Qn=function(a){function t(u){return u==null?xp():pO(u)?u:xp().withMutations(function(n){var r=In(u);yn(r.size),r.forEach(function(e,i){return n.set(i,e)})})}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(n,r){var e=this._map.get(n);return e!==void 0?this._list.get(e)[1]:r},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):xp()},t.prototype.set=function(n,r){return L6(this,n,r)},t.prototype.remove=function(n){return L6(this,n,xt)},t.prototype.__iterate=function(n,r){var e=this;return this._list.__iterate(function(i){return i&&n(i[1],i[0],e)},r)},t.prototype.__iterator=function(n,r){return this._list.fromEntrySeq().__iterator(n,r)},t.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var r=this._map.__ensureOwner(n),e=this._list.__ensureOwner(n);return n?TI(r,e,n,this.__hash):this.size===0?xp():(this.__ownerID=n,this.__altered=!1,this._map=r,this._list=e,this)},t}(pa);Qn.isOrderedMap=pO,Qn.prototype[eh]=!0,Qn.prototype[lp]=Qn.prototype.remove;function TI(a,t,u,n){var r=Object.create(Qn.prototype);return r.size=a?a.size:0,r._map=a,r._list=t,r.__ownerID=u,r.__hash=n,r.__altered=!1,r}var j6;function xp(){return j6||(j6=TI(Un(),AO()))}function L6(a,t,u){var n=a._map,r=a._list,e=n.get(t),i=e!==void 0,o,c;if(u===xt){if(!i)return a;r.size>=An&&r.size>=n.size*2?(c=r.filter(function(s,l){return s!==void 0&&e!==l}),o=c.toKeyedSeq().map(function(s){return s[0]}).flip().toMap(),a.__ownerID&&(o.__ownerID=c.__ownerID=a.__ownerID)):(o=n.remove(t),c=e===r.size-1?r.pop():r.set(e,void 0))}else if(i){if(u===r.get(e)[1])return a;o=n,c=r.set(e,[t,u])}else o=n.set(t,r.size),c=r.set(r.size,[t,u]);return a.__ownerID?(a.size=o.size,a._map=o,a._list=c,a.__hash=void 0,a.__altered=!0,a):TI(o,c)}var M6="@@__IMMUTABLE_STACK__@@";function Np(a){return!!(a&&a[M6])}var Rp=function(a){function t(u){return u==null?EO():Np(u)?u:EO().pushAll(u)}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(n,r){var e=this._head;for(n=ca(this,n);e&&n--;)e=e.next;return e?e.value:r},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var r=this.size+arguments.length,e=this._head,i=arguments.length-1;i>=0;i--)e={value:n[i],next:e};return this.__ownerID?(this.size=r,this._head=e,this.__hash=void 0,this.__altered=!0,this):Fp(r,e)},t.prototype.pushAll=function(n){if(n=a(n),n.size===0)return this;if(this.size===0&&Np(n))return n;yn(n.size);var r=this.size,e=this._head;return n.__iterate(function(i){r++,e={value:i,next:e}},!0),this.__ownerID?(this.size=r,this._head=e,this.__hash=void 0,this.__altered=!0,this):Fp(r,e)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):EO()},t.prototype.slice=function(n,r){if(dp(n,r,this.size))return this;var e=Wf(n,this.size),i=fp(r,this.size);if(i!==this.size)return a.prototype.slice.call(this,n,r);for(var o=this.size-e,c=this._head;e--;)c=c.next;return this.__ownerID?(this.size=o,this._head=c,this.__hash=void 0,this.__altered=!0,this):Fp(o,c)},t.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?Fp(this.size,this._head,n,this.__hash):this.size===0?EO():(this.__ownerID=n,this.__altered=!1,this)},t.prototype.__iterate=function(n,r){var e=this;if(r)return new Xa(this.toArray()).__iterate(function(c,s){return n(c,s,e)},r);for(var i=0,o=this._head;o&&n(o.value,i++,this)!==!1;)o=o.next;return i},t.prototype.__iterator=function(n,r){if(r)return new Xa(this.toArray()).__iterator(n,r);var e=0,i=this._head;return new jt(function(){if(i){var o=i.value;return i=i.next,Yt(n,e++,o)}return Kr()})},t}(ka);Rp.isStack=Np;var Yr=Rp.prototype;Yr[M6]=!0,Yr.shift=Yr.pop,Yr.unshift=Yr.push,Yr.unshiftAll=Yr.pushAll,Yr.withMutations=vp,Yr.wasAltered=yI,Yr.asImmutable=wp,Yr["@@transducer/init"]=Yr.asMutable=Tp,Yr["@@transducer/step"]=function(a,t){return a.unshift(t)},Yr["@@transducer/result"]=function(a){return a.asImmutable()};function Fp(a,t,u,n){var r=Object.create(Yr);return r.size=a,r._head=t,r.__ownerID=u,r.__hash=n,r.__altered=!1,r}var C6;function EO(){return C6||(C6=Fp(0))}var q6="@@__IMMUTABLE_SET__@@";function Dp(a){return!!(a&&a[q6])}function IO(a){return Dp(a)&&pn(a)}function wI(a,t){if(a===t)return!0;if(!Br(t)||a.size!==void 0&&t.size!==void 0&&a.size!==t.size||a.__hash!==void 0&&t.__hash!==void 0&&a.__hash!==t.__hash||Gt(a)!==Gt(t)||xr(a)!==xr(t)||pn(a)!==pn(t))return!1;if(a.size===0&&t.size===0)return!0;var u=!Yf(a);if(pn(a)){var n=a.entries();return t.every(function(c,s){var l=n.next().value;return l&&Sr(l[1],c)&&(u||Sr(l[0],s))})&&n.next().done}var r=!1;if(a.size===void 0)if(t.size===void 0)typeof a.cacheResult=="function"&&a.cacheResult();else{r=!0;var e=a;a=t,t=e}var i=!0,o=t.__iterate(function(c,s){if(u?!a.has(c):r?!Sr(c,a.get(s,xt)):!Sr(a.get(s,xt),c))return i=!1,!1});return i&&a.size===o}function Ka(a,t){var u=function(n){a.prototype[n]=t[n]};return Object.keys(t).forEach(u),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(u),a}function xO(a){if(!a||typeof a!="object")return a;if(!Br(a)){if(!fa(a))return a;a=$r(a)}if(Gt(a)){var t={};return a.__iterate(function(n,r){t[r]=xO(n)}),t}var u=[];return a.__iterate(function(n){u.push(xO(n))}),u}var sh=function(a){function t(u){return u==null?Pp():Dp(u)&&!pn(u)?u:Pp().withMutations(function(n){var r=a(u);yn(r.size),r.forEach(function(e){return n.add(e)})})}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(n){return this(In(n).keySeq())},t.intersect=function(n){return n=Wt(n).toArray(),n.length?Nr.intersect.apply(t(n.pop()),n):Pp()},t.union=function(n){return n=Wt(n).toArray(),n.length?Nr.union.apply(t(n.pop()),n):Pp()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(n){return this._map.has(n)},t.prototype.add=function(n){return NO(this,this._map.set(n,n))},t.prototype.remove=function(n){return NO(this,this._map.remove(n))},t.prototype.clear=function(){return NO(this,this._map.clear())},t.prototype.map=function(n,r){var e=this,i=!1,o=NO(this,this._map.mapEntries(function(c){var s=c[1],l=n.call(r,s,s,e);return l!==s&&(i=!0),[l,l]},r));return i?o:this},t.prototype.union=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return n=n.filter(function(e){return e.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(e){for(var i=0;i<n.length;i++)typeof n[i]=="string"?e.add(n[i]):a(n[i]).forEach(function(o){return e.add(o)})})},t.prototype.intersect=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];if(n.length===0)return this;n=n.map(function(i){return a(i)});var e=[];return this.forEach(function(i){n.every(function(o){return o.includes(i)})||e.push(i)}),this.withMutations(function(i){e.forEach(function(o){i.remove(o)})})},t.prototype.subtract=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];if(n.length===0)return this;n=n.map(function(i){return a(i)});var e=[];return this.forEach(function(i){n.some(function(o){return o.includes(i)})&&e.push(i)}),this.withMutations(function(i){e.forEach(function(o){i.remove(o)})})},t.prototype.sort=function(n){return Wa(nh(this,n))},t.prototype.sortBy=function(n,r){return Wa(nh(this,r,n))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(n,r){var e=this;return this._map.__iterate(function(i){return n(i,i,e)},r)},t.prototype.__iterator=function(n,r){return this._map.__iterator(n,r)},t.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var r=this._map.__ensureOwner(n);return n?this.__make(r,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=r,this)},t}(Zf);sh.isSet=Dp;var Nr=sh.prototype;Nr[q6]=!0,Nr[lp]=Nr.remove,Nr.merge=Nr.concat=Nr.union,Nr.withMutations=vp,Nr.asImmutable=wp,Nr["@@transducer/init"]=Nr.asMutable=Tp,Nr["@@transducer/step"]=function(a,t){return a.add(t)},Nr["@@transducer/result"]=function(a){return a.asImmutable()},Nr.__empty=Pp,Nr.__make=B6;function NO(a,t){return a.__ownerID?(a.size=t.size,a._map=t,a):t===a._map?a:t.size===0?a.__empty():a.__make(t)}function B6(a,t){var u=Object.create(Nr);return u.size=a?a.size:0,u._map=a,u.__ownerID=t,u}var $6;function Pp(){return $6||($6=B6(Un()))}var SI=function(a){function t(u,n,r){if(!(this instanceof t))return new t(u,n,r);if(nI(r!==0,"Cannot step a Range by 0"),u=u||0,n===void 0&&(n=1/0),r=r===void 0?1:Math.abs(r),n<u&&(r=-r),this._start=u,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-u)/r-1)+1),this.size===0){if(OI)return OI;OI=this}}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},t.prototype.get=function(n,r){return this.has(n)?this._start+ca(this,n)*this._step:r},t.prototype.includes=function(n){var r=(n-this._start)/this._step;return r>=0&&r<this.size&&r===Math.floor(r)},t.prototype.slice=function(n,r){return dp(n,r,this.size)?this:(n=Wf(n,this.size),r=fp(r,this.size),r<=n?new t(0,0):new t(this.get(n,this._end),this.get(r,this._end),this._step))},t.prototype.indexOf=function(n){var r=n-this._start;if(r%this._step===0){var e=r/this._step;if(e>=0&&e<this.size)return e}return-1},t.prototype.lastIndexOf=function(n){return this.indexOf(n)},t.prototype.__iterate=function(n,r){for(var e=this.size,i=this._step,o=r?this._start+(e-1)*i:this._start,c=0;c!==e&&n(o,r?e-++c:c++,this)!==!1;)o+=r?-i:i;return c},t.prototype.__iterator=function(n,r){var e=this.size,i=this._step,o=r?this._start+(e-1)*i:this._start,c=0;return new jt(function(){if(c===e)return Kr();var s=o;return o+=r?-i:i,Yt(n,r?e-++c:c++,s)})},t.prototype.equals=function(n){return n instanceof t?this._start===n._start&&this._end===n._end&&this._step===n._step:wI(this,n)},t}(Nn),OI;function RO(a,t,u){for(var n=h6(t),r=0;r!==n.length;)if(a=TO(a,n[r++],xt),a===xt)return u;return a}function V6(a,t){return RO(this,a,t)}function AI(a,t){return RO(a,t,xt)!==xt}function Yae(a){return AI(this,a)}function U6(){yn(this.size);var a={};return this.__iterate(function(t,u){a[u]=t}),a}Wt.isIterable=Br,Wt.isKeyed=Gt,Wt.isIndexed=xr,Wt.isAssociative=Yf,Wt.isOrdered=pn,Wt.Iterator=jt,Ka(Wt,{toArray:function(){yn(this.size);var t=new Array(this.size||0),u=Gt(this),n=0;return this.__iterate(function(r,e){t[n++]=u?[e,r]:r}),t},toIndexedSeq:function(){return new r6(this)},toJS:function(){return xO(this)},toKeyedSeq:function(){return new mO(this,!0)},toMap:function(){return pa(this.toKeyedSeq())},toObject:U6,toOrderedMap:function(){return Qn(this.toKeyedSeq())},toOrderedSet:function(){return Wa(Gt(this)?this.valueSeq():this)},toSet:function(){return sh(Gt(this)?this.valueSeq():this)},toSetSeq:function(){return new n6(this)},toSeq:function(){return xr(this)?this.toIndexedSeq():Gt(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Rp(Gt(this)?this.valueSeq():this)},toList:function(){return uh(Gt(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,u){return this.size===0?t+u:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+u},concat:function(){for(var t=[],u=arguments.length;u--;)t[u]=arguments[u];return zt(this,Mae(this,t))},includes:function(t){return this.some(function(u){return Sr(u,t)})},entries:function(){return this.__iterator(xn)},every:function(t,u){yn(this.size);var n=!0;return this.__iterate(function(r,e,i){if(!t.call(u,r,e,i))return n=!1,!1}),n},filter:function(t,u){return zt(this,o6(this,t,u,!0))},partition:function(t,u){return jae(this,t,u)},find:function(t,u,n){var r=this.findEntry(t,u);return r?r[1]:n},forEach:function(t,u){return yn(this.size),this.__iterate(u?t.bind(u):t)},join:function(t){yn(this.size),t=t!==void 0?""+t:",";var u="",n=!0;return this.__iterate(function(r){n?n=!1:u+=t,u+=r!=null?r.toString():""}),u},keys:function(){return this.__iterator(pp)},map:function(t,u){return zt(this,u6(this,t,u))},reduce:function(t,u,n){return Q6(this,t,u,n,arguments.length<2,!1)},reduceRight:function(t,u,n){return Q6(this,t,u,n,arguments.length<2,!0)},reverse:function(){return zt(this,ZE(this,!0))},slice:function(t,u){return zt(this,eI(this,t,u,!0))},some:function(t,u){yn(this.size);var n=!1;return this.__iterate(function(r,e,i){if(t.call(u,r,e,i))return n=!0,!1}),n},sort:function(t){return zt(this,nh(this,t))},values:function(){return this.__iterator(Vn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,u){return Kf(t?this.toSeq().filter(t,u):this)},countBy:function(t,u){return Dae(this,t,u)},equals:function(t){return wI(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Xa(t._cache);var u=t.toSeq().map(eue).toIndexedSeq();return u.fromEntrySeq=function(){return t.toSeq()},u},filterNot:function(t,u){return this.filter(EI(t),u)},findEntry:function(t,u,n){var r=n;return this.__iterate(function(e,i,o){if(t.call(u,e,i,o))return r=[i,e],!1}),r},findKey:function(t,u){var n=this.findEntry(t,u);return n&&n[0]},findLast:function(t,u,n){return this.toKeyedSeq().reverse().find(t,u,n)},findLastEntry:function(t,u,n){return this.toKeyedSeq().reverse().findEntry(t,u,n)},findLastKey:function(t,u){return this.toKeyedSeq().reverse().findKey(t,u)},first:function(t){return this.find(qD,null,t)},flatMap:function(t,u){return zt(this,Cae(this,t,u))},flatten:function(t){return zt(this,c6(this,t,!0))},fromEntrySeq:function(){return new i6(this)},get:function(t,u){return this.find(function(n,r){return Sr(r,t)},void 0,u)},getIn:V6,groupBy:function(t,u){return Pae(this,t,u)},has:function(t){return this.get(t,xt)!==xt},hasIn:Yae,isSubset:function(t){return t=typeof t.includes=="function"?t:Wt(t),this.every(function(u){return t.includes(u)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:Wt(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(u){return Sr(u,t)})},keySeq:function(){return this.toSeq().map(Zae).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return _O(this,t)},maxBy:function(t,u){return _O(this,u,t)},min:function(t){return _O(this,t?H6(t):z6)},minBy:function(t,u){return _O(this,u?H6(u):z6,t)},rest:function(){return this.slice(1)},skip:function(t){return t===0?this:this.slice(Math.max(0,t))},skipLast:function(t){return t===0?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,u){return zt(this,s6(this,t,u,!0))},skipUntil:function(t,u){return this.skipWhile(EI(t),u)},sortBy:function(t,u){return zt(this,nh(this,u,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,u){return zt(this,Lae(this,t,u))},takeUntil:function(t,u){return this.takeWhile(EI(t),u)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=tue(this))}});var Vr=Wt.prototype;Vr[VD]=!0,Vr[fO]=Vr.values,Vr.toJSON=Vr.toArray,Vr.__toStringMapper=mp,Vr.inspect=Vr.toSource=function(){return this.toString()},Vr.chain=Vr.flatMap,Vr.contains=Vr.includes,Ka(In,{flip:function(){return zt(this,a6(this))},mapEntries:function(t,u){var n=this,r=0;return zt(this,this.toSeq().map(function(e,i){return t.call(u,[i,e],r++,n)}).fromEntrySeq())},mapKeys:function(t,u){var n=this;return zt(this,this.toSeq().flip().map(function(r,e){return t.call(u,r,e,n)}).flip())}});var jp=In.prototype;jp[UD]=!0,jp[fO]=Vr.entries,jp.toJSON=U6,jp.__toStringMapper=function(a,t){return mp(t)+": "+mp(a)},Ka(ka,{toKeyedSeq:function(){return new mO(this,!1)},filter:function(t,u){return zt(this,o6(this,t,u,!1))},findIndex:function(t,u){var n=this.findEntry(t,u);return n?n[0]:-1},indexOf:function(t){var u=this.keyOf(t);return u===void 0?-1:u},lastIndexOf:function(t){var u=this.lastKeyOf(t);return u===void 0?-1:u},reverse:function(){return zt(this,ZE(this,!1))},slice:function(t,u){return zt(this,eI(this,t,u,!1))},splice:function(t,u){var n=arguments.length;if(u=Math.max(u||0,0),n===0||n===2&&!u)return this;t=Wf(t,t<0?this.count():this.size);var r=this.slice(0,t);return zt(this,n===1?r:r.concat(yi(arguments,2),this.slice(t+u)))},findLastIndex:function(t,u){var n=this.findLastEntry(t,u);return n?n[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return zt(this,c6(this,t,!1))},get:function(t,u){return t=ca(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?u:this.find(function(n,r){return r===t},void 0,u)},has:function(t){return t=ca(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return zt(this,qae(this,t))},interleave:function(){var t=[this].concat(yi(arguments)),u=gO(this.toSeq(),Nn.of,t),n=u.flatten(!0);return u.size&&(n.size=u.size*t.length),zt(this,n)},keySeq:function(){return SI(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,u){return zt(this,s6(this,t,u,!1))},zip:function(){var t=[this].concat(yi(arguments));return zt(this,gO(this,G6,t))},zipAll:function(){var t=[this].concat(yi(arguments));return zt(this,gO(this,G6,t,!0))},zipWith:function(t){var u=yi(arguments);return u[0]=this,zt(this,gO(this,t,u))}});var ch=ka.prototype;ch[QD]=!0,ch[eh]=!0,Ka(Zf,{get:function(t,u){return this.has(t)?t:u},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var lh=Zf.prototype;lh.has=Vr.includes,lh.contains=lh.includes,lh.keys=lh.values,Ka(da,jp),Ka(Nn,ch),Ka(rh,lh);function Q6(a,t,u,n,r,e){return yn(a.size),a.__iterate(function(i,o,c){r?(r=!1,u=i):u=t.call(n,u,i,o,c)},e),u}function Zae(a,t){return t}function eue(a,t){return[t,a]}function EI(a){return function(){return!a.apply(this,arguments)}}function H6(a){return function(){return-a.apply(this,arguments)}}function G6(){return yi(arguments)}function z6(a,t){return a<t?1:a>t?-1:0}function tue(a){if(a.size===1/0)return 0;var t=pn(a),u=Gt(a),n=t?1:0,r=a.__iterate(u?t?function(e,i){n=31*n+k6(Wr(e),Wr(i))|0}:function(e,i){n=n+k6(Wr(e),Wr(i))|0}:t?function(e){n=31*n+Wr(e)|0}:function(e){n=n+Wr(e)|0});return rue(r,n)}function rue(a,t){return t=bp(t,3432918353),t=bp(t<<15|t>>>-15,461845907),t=bp(t<<13|t>>>-13,5),t=(t+3864292196|0)^a,t=bp(t^t>>>16,2246822507),t=bp(t^t>>>13,3266489909),t=bO(t^t>>>16),t}function k6(a,t){return a^t+2654435769+(a<<6)+(a>>2)|0}var Wa=function(a){function t(u){return u==null?II():IO(u)?u:II().withMutations(function(n){var r=Zf(u);yn(r.size),r.forEach(function(e){return n.add(e)})})}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(n){return this(In(n).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(sh);Wa.isOrderedSet=IO;var Ya=Wa.prototype;Ya[eh]=!0,Ya.zip=ch.zip,Ya.zipWith=ch.zipWith,Ya.zipAll=ch.zipAll,Ya.__empty=II,Ya.__make=X6;function X6(a,t){var u=Object.create(Ya);return u.size=a?a.size:0,u._map=a,u.__ownerID=t,u}var J6;function II(){return J6||(J6=X6(xp()))}var K6={LeftThenRight:-1,RightThenLeft:1};function nue(a){if(la(a))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(hn(a))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(a===null||typeof a!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var gr=function(t,u){var n;nue(t);var r=function(o){var c=this;if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(t),l=e._indices={};e._name=u,e._keys=s,e._defaultValues=t;for(var d=0;d<s.length;d++){var f=s[d];l[f]=d,e[f]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+NI(this)+' with property "'+f+'" since that property name is part of the Record API.'):iue(e,f)}}return this.__ownerID=void 0,this._values=uh().withMutations(function(h){h.setSize(c._keys.length),In(o).forEach(function(p,b){h.set(c._indices[b],p===c._defaultValues[b]?void 0:p)})}),this},e=r.prototype=Object.create(kt);return e.constructor=r,u&&(r.displayName=u),r};gr.prototype.toString=function(){for(var t=NI(this)+" { ",u=this._keys,n,r=0,e=u.length;r!==e;r++)n=u[r],t+=(r?", ":"")+n+": "+mp(this.get(n));return t+" }"},gr.prototype.equals=function(t){return this===t||la(t)&&dh(this).equals(dh(t))},gr.prototype.hashCode=function(){return dh(this).hashCode()},gr.prototype.has=function(t){return this._indices.hasOwnProperty(t)},gr.prototype.get=function(t,u){if(!this.has(t))return u;var n=this._indices[t],r=this._values.get(n);return r===void 0?this._defaultValues[t]:r},gr.prototype.set=function(t,u){if(this.has(t)){var n=this._values.set(this._indices[t],u===this._defaultValues[t]?void 0:u);if(n!==this._values&&!this.__ownerID)return xI(this,n)}return this},gr.prototype.remove=function(t){return this.set(t)},gr.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:xI(this,t)},gr.prototype.wasAltered=function(){return this._values.wasAltered()},gr.prototype.toSeq=function(){return dh(this)},gr.prototype.toJS=function(){return xO(this)},gr.prototype.entries=function(){return this.__iterator(xn)},gr.prototype.__iterator=function(t,u){return dh(this).__iterator(t,u)},gr.prototype.__iterate=function(t,u){return dh(this).__iterate(t,u)},gr.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var u=this._values.__ensureOwner(t);return t?xI(this,u,t):(this.__ownerID=t,this._values=u,this)},gr.isRecord=la,gr.getDescriptiveName=NI;var kt=gr.prototype;kt[GD]=!0,kt[lp]=kt.remove,kt.deleteIn=kt.removeIn=lI,kt.getIn=V6,kt.hasIn=Vr.hasIn,kt.merge=y6,kt.mergeWith=b6,kt.mergeIn=hI,kt.mergeDeep=w6,kt.mergeDeepWith=S6,kt.mergeDeepIn=pI,kt.setIn=sI,kt.update=dI,kt.updateIn=fI,kt.withMutations=vp,kt.asMutable=Tp,kt.asImmutable=wp,kt[fO]=kt.entries,kt.toJSON=kt.toObject=Vr.toObject,kt.inspect=kt.toSource=function(){return this.toString()};function xI(a,t,u){var n=Object.create(Object.getPrototypeOf(a));return n._values=t,n.__ownerID=u,n}function NI(a){return a.constructor.displayName||a.constructor.name||"Record"}function dh(a){return GE(a._keys.map(function(t){return[t,a.get(t)]}))}function iue(a,t){try{Object.defineProperty(a,t,{get:function(){return this.get(t)},set:function(u){nI(this.__ownerID,"Cannot set on an immutable record."),this.set(t,u)}})}catch{}}var W6=function(a){function t(u,n){if(!(this instanceof t))return new t(u,n);if(this._value=u,this.size=n===void 0?1/0:Math.max(0,n),this.size===0){if(RI)return RI;RI=this}}return a&&(t.__proto__=a),t.prototype=Object.create(a&&a.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},t.prototype.get=function(n,r){return this.has(n)?this._value:r},t.prototype.includes=function(n){return Sr(this._value,n)},t.prototype.slice=function(n,r){var e=this.size;return dp(n,r,e)?this:new t(this._value,fp(r,e)-Wf(n,e))},t.prototype.reverse=function(){return this},t.prototype.indexOf=function(n){return Sr(this._value,n)?0:-1},t.prototype.lastIndexOf=function(n){return Sr(this._value,n)?this.size:-1},t.prototype.__iterate=function(n,r){for(var e=this.size,i=0;i!==e&&n(this._value,r?e-++i:i++,this)!==!1;);return i},t.prototype.__iterator=function(n,r){var e=this,i=this.size,o=0;return new jt(function(){return o===i?Kr():Yt(n,r?i-++o:o++,e._value)})},t.prototype.equals=function(n){return n instanceof t?Sr(this._value,n._value):wI(this,n)},t}(Nn),RI;function Y6(a,t){return Z6([],t||aue,a,"",t&&t.length>2?[]:void 0,{"":a})}function Z6(a,t,u,n,r,e){if(typeof u!="string"&&!hn(u)&&(UE(u)||$E(u)||vO(u))){if(~a.indexOf(u))throw new TypeError("Cannot convert circular structure to Immutable");a.push(u),r&&n!==""&&r.push(n);var i=t.call(e,n,$r(u).map(function(o,c){return Z6(a,t,o,c,r,u)}),r&&r.slice());return a.pop(),r&&r.pop(),i}return u}function aue(a,t){return xr(t)?t.toList():Gt(t)?t.toMap():t.toSet()}var eP="4.3.7",uue={version:eP,Collection:Wt,Iterable:Wt,Seq:$r,Map:pa,OrderedMap:Qn,List:uh,Stack:Rp,Set:sh,OrderedSet:Wa,PairSorting:K6,Record:gr,Range:SI,Repeat:W6,is:Sr,fromJS:Y6,hash:Wr,isImmutable:hn,isCollection:Br,isKeyed:Gt,isIndexed:xr,isAssociative:Yf,isOrdered:pn,isValueObject:yO,isPlainObject:vO,isSeq:hp,isList:OO,isMap:yp,isOrderedMap:pO,isStack:Np,isSet:Dp,isOrderedSet:IO,isRecord:la,get:TO,getIn:RO,has:iI,hasIn:AI,merge:_6,mergeDeep:v6,mergeWith:g6,mergeDeepWith:T6,remove:aI,removeIn:cI,set:uI,setIn:oI,update:SO,updateIn:ha},oue=Wt,sue=Object.freeze({__proto__:null,Collection:Wt,Iterable:oue,List:uh,Map:pa,OrderedMap:Qn,OrderedSet:Wa,PairSorting:K6,Range:SI,Record:gr,Repeat:W6,Seq:$r,Set:sh,Stack:Rp,default:uue,fromJS:Y6,get:TO,getIn:RO,has:iI,hasIn:AI,hash:Wr,is:Sr,isAssociative:Yf,isCollection:Br,isImmutable:hn,isIndexed:xr,isKeyed:Gt,isList:OO,isMap:yp,isOrdered:pn,isOrderedMap:pO,isOrderedSet:IO,isPlainObject:vO,isRecord:la,isSeq:hp,isSet:Dp,isStack:Np,isValueObject:yO,merge:_6,mergeDeep:v6,mergeDeepWith:T6,mergeWith:g6,remove:aI,removeIn:cI,set:uI,setIn:oI,update:SO,updateIn:ha,version:eP}),FI=Vt(sue),tP;function rP(){if(tP)return za;tP=1,Object.defineProperty(za,"__esModule",{value:!0}),za.ActionContextKey=za.ActionContext=void 0;const a=FI;let t=class rO{constructor(r={}){this.map=(0,a.Map)(r)}setDefault(r,e){return this.has(r)?this:this.set(r,e)}set(r,e){return this.setRaw(r.name,e)}setRaw(r,e){return new rO(this.map.set(r,e))}delete(r){return new rO(this.map.delete(r.name))}get(r){return this.getRaw(r.name)}getRaw(r){return this.map.get(r)}getSafe(r){if(!this.has(r))throw new Error(`Context entry ${r.name} is required but not available`);return this.get(r)}has(r){return this.hasRaw(r.name)}hasRaw(r){return this.map.has(r)}merge(...r){let e=this;for(const i of r)for(const o of i.keys())e=e.set(o,i.get(o));return e}keys(){return[...this.map.keys()].map(r=>new u(r))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(r){return r instanceof rO?r:new rO((0,a.Map)(r??{}))}};za.ActionContext=t;class u{constructor(r){this.name=r}}return za.ActionContextKey=u,za}var Lp={},nP;function iP(){if(nP)return Lp;nP=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.Bus=void 0;let a=class{constructor(u){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,u),this.failMessage=`All actors over bus ${this.name} failed to handle an action`}subscribe(u){this.actors.push(u),this.reorderForDependencies()}subscribeObserver(u){this.observers.push(u)}unsubscribe(u){const n=this.actors.indexOf(u);return n>=0?(this.actors.splice(n,1),!0):!1}unsubscribeObserver(u){const n=this.observers.indexOf(u);return n>=0?(this.observers.splice(n,1),!0):!1}publish(u){return this.actors.map(n=>({actor:n,reply:n.test(u)}))}onRun(u,n,r){for(const e of this.observers)e.onRun(u,n,r)}addDependencies(u,n){for(const r of n){let e=this.dependencyLinks.get(r);e||(e=[],this.dependencyLinks.set(r,e)),e.push(u)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const u=[];for(const n of this.dependencyLinks.keys()){const r=this.actors.indexOf(n);r>=0&&(this.actors.splice(r,1),u.push(n))}for(;u.length>0;){let n=-1;for(let e=0;e<u.length;e++){let i=!0;for(const o of this.dependencyLinks.get(u[e]))if(!this.actors.includes(o)&&u.includes(o)){i=!1;break}if(i){n=e;break}}if(n<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const r=u.splice(n,1)[0];this.actors.push(r)}}}};return Lp.Bus=a,Lp}var Mp={},aP;function cue(){if(aP)return Mp;aP=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.BusIndexed=void 0;const a=iP();let t=class extends a.Bus{constructor(n){super(n),this.actorsIndex={}}subscribe(n){const r=this.getActorIdentifiers(n)??["_undefined_"];for(const e of r){let i=this.actorsIndex[e];i||(i=this.actorsIndex[e]=[]),i.push(n),super.subscribe(n)}}unsubscribe(n){const r=this.getActorIdentifiers(n)??["_undefined_"];let e=!1;for(const i of r){const o=this.actorsIndex[i];if(o){const c=o.indexOf(n);c>=0&&o.splice(c,1),o.length===0&&delete this.actorsIndex[i]}e=e||super.unsubscribe(n)}return e}publish(n){const r=this.getActionIdentifier(n);return r?[...this.actorsIndex[r]||[],...this.actorsIndex._undefined_||[]].map(i=>({actor:i,reply:i.test(n)})):super.publish(n)}getActorIdentifiers(n){const r=this.actorIdentifierFields.reduce((e,i)=>e[i],n);if(r)return Array.isArray(r)?r:[r]}getActionIdentifier(n){return this.actionIdentifierFields.reduce((r,e)=>r[e],n)}};return Mp.BusIndexed=t,Mp}var Cp={},uP;function oP(){if(uP)return Cp;uP=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.CONTEXT_KEY_LOGGER=void 0;const a=rP();return Cp.CONTEXT_KEY_LOGGER=new a.ActionContextKey("@comunica/core:log"),Cp}var qp={},sP;function lue(){if(sP)return qp;sP=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.ActionObserver=void 0;let a=class{constructor(u){Object.assign(this,u)}};return qp.ActionObserver=a,qp}var Bp={},cP;function due(){if(cP)return Bp;cP=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.Actor=void 0;const a=oP();let t=class Hf{constructor(n){this.beforeActors=[],Object.assign(this,n),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors),n.busFailMessage&&(this.bus.failMessage=n.busFailMessage)}static getContextLogger(n){return n.get(a.CONTEXT_KEY_LOGGER)}runObservable(n,r){const e=this.run(n,r);return this.bus.onRun(this,n,e),e}getDefaultLogData(n,r){const e=r?r():{};return e.actor=this.name,e}logTrace(n,r,e){const i=Hf.getContextLogger(n);i&&i.trace(r,this.getDefaultLogData(n,e))}logDebug(n,r,e){const i=Hf.getContextLogger(n);i&&i.debug(r,this.getDefaultLogData(n,e))}logInfo(n,r,e){const i=Hf.getContextLogger(n);i&&i.info(r,this.getDefaultLogData(n,e))}logWarn(n,r,e){const i=Hf.getContextLogger(n);i&&i.warn(r,this.getDefaultLogData(n,e))}logError(n,r,e){const i=Hf.getContextLogger(n);i&&i.error(r,this.getDefaultLogData(n,e))}logFatal(n,r,e){const i=Hf.getContextLogger(n);i&&i.fatal(r,this.getDefaultLogData(n,e))}};return Bp.Actor=t,Bp}var $p={},lP;function fue(){if(lP)return $p;lP=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.Mediator=void 0;let a=class wD{constructor(u){Object.assign(this,u)}publish(u){const n=this.bus.publish(u);if(n.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return n}async mediateActor(u){return await this.mediateWith(u,this.publish(u))}async mediateTestable(u){return(await this.mediateActor(u)).mapAsync((r,e)=>r.runObservable(u,e))}async mediate(u){return(await this.mediateTestable(u)).getOrThrow()}constructFailureMessage(u,n){const r=`
        `;return`${this.bus.failMessage.replaceAll(/\$\{(.*?)\}/gu,(i,o)=>wD.getObjectValue({action:u},o.split("."))||i)}
    Error messages of failing actors:${r}${n.join(r)}`}static getObjectValue(u,n){if(n.length===0)return u;if(u)return wD.getObjectValue(u[n[0]],n.slice(1))}};return $p.Mediator=a,$p}var Rr={},dP;function hue(){if(dP)return Rr;dP=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.TestResultFailed=Rr.TestResultPassed=Rr.failTest=Rr.passTestVoidWithSideData=Rr.passTestWithSideData=Rr.passTestVoid=Rr.passTest=void 0;function a(o){return new e(o,void 0)}Rr.passTest=a;function t(){return new e(!0,void 0)}Rr.passTestVoid=t;function u(o,c){return new e(o,c)}Rr.passTestWithSideData=u;function n(o){return new e(!0,o)}Rr.passTestVoidWithSideData=n;function r(o){return new i(o)}Rr.failTest=r;class e{constructor(c,s){this.value=c,this.sideData=s}isPassed(){return!0}isFailed(){return!1}get(){return this.value}getOrThrow(){return this.value}getSideData(){return this.sideData}getFailMessage(){}map(c){return new e(c(this.value,this.sideData),this.sideData)}async mapAsync(c){return new e(await c(this.value,this.sideData),this.sideData)}}Rr.TestResultPassed=e;class i{constructor(c){this.failMessage=c}isPassed(){return!1}isFailed(){return!0}get(){}getOrThrow(){throw new Error(this.getFailMessage())}getSideData(){throw new Error(this.getFailMessage())}getFailMessage(){return this.failMessage}map(){return this}async mapAsync(){return this}}return Rr.TestResultFailed=i,Rr}var fP;function Te(){return fP||(fP=1,function(a){var t=Ga&&Ga.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ga&&Ga.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(rP(),a),u(iP(),a),u(cue(),a),u(oP(),a),u(lue(),a),u(due(),a),u(fue(),a),u(hue(),a)}(Ga)),Ga}var hP;function pue(){if(hP)return cp;hP=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.ActorInit=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return cp.ActorInit=t,cp}var pP;function yue(){return pP||(pP=1,function(a){var t=Ha&&Ha.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ha&&Ha.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(pue(),a)}(Ha)),Ha}var yP;function bP(){if(yP)return sp;yP=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.ActorInitQueryBase=void 0;const a=yue(),t=Te();let u=class extends a.ActorInit{async test(r){return(0,t.passTestVoid)()}async run(r){throw new Error("ActorInitSparql#run is not supported in the browser.")}};return sp.ActorInitQueryBase=u,sp}function bue(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var mP={exports:{}},hr=mP.exports={},bi,mi;function DI(){throw new Error("setTimeout has not been defined")}function PI(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?bi=setTimeout:bi=DI}catch{bi=DI}try{typeof clearTimeout=="function"?mi=clearTimeout:mi=PI}catch{mi=PI}})();function _P(a){if(bi===setTimeout)return setTimeout(a,0);if((bi===DI||!bi)&&setTimeout)return bi=setTimeout,setTimeout(a,0);try{return bi(a,0)}catch{try{return bi.call(null,a,0)}catch{return bi.call(this,a,0)}}}function mue(a){if(mi===clearTimeout)return clearTimeout(a);if((mi===PI||!mi)&&clearTimeout)return mi=clearTimeout,clearTimeout(a);try{return mi(a)}catch{try{return mi.call(null,a)}catch{return mi.call(this,a)}}}var Pi=[],fh=!1,Za,FO=-1;function _ue(){!fh||!Za||(fh=!1,Za.length?Pi=Za.concat(Pi):FO=-1,Pi.length&&gP())}function gP(){if(!fh){var a=_P(_ue);fh=!0;for(var t=Pi.length;t;){for(Za=Pi,Pi=[];++FO<t;)Za&&Za[FO].run();FO=-1,t=Pi.length}Za=null,fh=!1,mue(a)}}hr.nextTick=function(a){var t=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)t[u-1]=arguments[u];Pi.push(new vP(a,t)),Pi.length===1&&!fh&&_P(gP)};function vP(a,t){this.fun=a,this.array=t}vP.prototype.run=function(){this.fun.apply(null,this.array)},hr.title="browser",hr.browser=!0,hr.env={},hr.argv=[],hr.version="",hr.versions={};function ji(){}hr.on=ji,hr.addListener=ji,hr.once=ji,hr.off=ji,hr.removeListener=ji,hr.removeAllListeners=ji,hr.emit=ji,hr.prependListener=ji,hr.prependOnceListener=ji,hr.listeners=function(a){return[]},hr.binding=function(a){throw new Error("process.binding is not supported")},hr.cwd=function(){return"/"},hr.chdir=function(a){throw new Error("process.chdir is not supported")},hr.umask=function(){return 0};var gue=mP.exports;const DO=bue(gue);var Vp={},jI={exports:{}},TP;function ma(){if(TP)return jI.exports;TP=1;var a=jI.exports={},t,u;function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=n}catch{t=n}try{typeof clearTimeout=="function"?u=clearTimeout:u=r}catch{u=r}})();function e(b){if(t===setTimeout)return setTimeout(b,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(b,0);try{return t(b,0)}catch{try{return t.call(null,b,0)}catch{return t.call(this,b,0)}}}function i(b){if(u===clearTimeout)return clearTimeout(b);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(b);try{return u(b)}catch{try{return u.call(null,b)}catch{return u.call(this,b)}}}var o=[],c=!1,s,l=-1;function d(){!c||!s||(c=!1,s.length?o=s.concat(o):l=-1,o.length&&f())}function f(){if(!c){var b=e(d);c=!0;for(var _=o.length;_;){for(s=o,o=[];++l<_;)s&&s[l].run();l=-1,_=o.length}s=null,c=!1,i(b)}}a.nextTick=function(b){var _=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)_[y-1]=arguments[y];o.push(new h(b,_)),o.length===1&&!c&&e(f)};function h(b,_){this.fun=b,this.array=_}h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={};function p(){}return a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(b){return[]},a.binding=function(b){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(b){throw new Error("process.chdir is not supported")},a.umask=function(){return 0},jI.exports}var wP;function vue(){if(wP)return Vp;wP=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.ActorInitQuery=void 0;const a=bP();typeof DO>"u"&&(globalThis.process=ma());class t extends a.ActorInitQueryBase{}return Vp.ActorInitQuery=t,Vp}var Up={},eu={},Rt={},SP;function OP(){if(SP)return Rt;SP=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.KeysStatistics=Rt.KeysRdfJoin=Rt.KeysMergeBindingsContext=Rt.KeysRdfUpdateQuads=Rt.KeysQuerySourceIdentify=Rt.KeysRdfParseHtmlScript=Rt.KeysRdfParseJsonLd=Rt.KeysQueryOperation=Rt.KeysExpressionEvaluator=Rt.KeysInitQuery=Rt.KeysHttpProxy=Rt.KeysHttpMemento=Rt.KeysHttpWayback=Rt.KeysHttp=Rt.KeysCore=void 0;const a=Te();return Rt.KeysCore={log:a.CONTEXT_KEY_LOGGER},Rt.KeysHttp={includeCredentials:new a.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new a.ActionContextKey("@comunica/bus-http:auth"),fetch:new a.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new a.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new a.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new a.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelayFallback:new a.ActionContextKey("@comunica/bus-http:http-retry-delay-fallback"),httpRetryDelayLimit:new a.ActionContextKey("@comunica/bus-http:http-retry-delay-limit"),httpRetryStatusCodes:new a.ActionContextKey("@comunica/bus-http:http-retry-status-codes")},Rt.KeysHttpWayback={recoverBrokenLinks:new a.ActionContextKey("@comunica/bus-http:recover-broken-links")},Rt.KeysHttpMemento={datetime:new a.ActionContextKey("@comunica/actor-http-memento:datetime")},Rt.KeysHttpProxy={httpProxyHandler:new a.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},Rt.KeysInitQuery={querySourcesUnidentified:new a.ActionContextKey("@comunica/actor-init-query:querySourcesUnidentified"),initialBindings:new a.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new a.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new a.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new a.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new a.ActionContextKey("@comunica/actor-init-query:queryString"),query:new a.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new a.ActionContextKey("@comunica/actor-init-query:baseIRI"),functionArgumentsCache:new a.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new a.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),queryTimestampHighResolution:new a.ActionContextKey("@comunica/actor-init-query:queryTimestampHighResolution"),extensionFunctionCreator:new a.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new a.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new a.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new a.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new a.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new a.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new a.ActionContextKey("@context"),invalidateCache:new a.ActionContextKey("@comunica/actor-init-query:invalidateCache"),dataFactory:new a.ActionContextKey("@comunica/actor-init-query:dataFactory"),distinctConstruct:new a.ActionContextKey("@comunica/actor-init-query:distinctConstruct")},Rt.KeysExpressionEvaluator={extensionFunctionCreator:new a.ActionContextKey("@comunica/utils-expression-evaluator:extensionFunctionCreator"),superTypeProvider:new a.ActionContextKey("@comunica/utils-expression-evaluator:superTypeProvider"),defaultTimeZone:new a.ActionContextKey("@comunica/utils-expression-evaluator:defaultTimeZone"),actionContext:new a.ActionContextKey("@comunica/utils-expression-evaluator:actionContext")},Rt.KeysQueryOperation={operation:new a.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new a.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new a.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new a.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new a.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new a.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new a.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new a.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),querySources:new a.ActionContextKey("@comunica/bus-query-operation:querySources")},Rt.KeysRdfParseJsonLd={documentLoader:new a.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new a.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new a.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},Rt.KeysRdfParseHtmlScript={processingHtmlScript:new a.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new a.ActionContextKey("extractAllScripts")},Rt.KeysQuerySourceIdentify={sourceIds:new a.ActionContextKey("@comunica/bus-query-source-identify:sourceIds"),hypermediaSourcesAggregatedStores:new a.ActionContextKey("@comunica/bus-query-source-identify:hypermediaSourcesAggregatedStores"),traverse:new a.ActionContextKey("@comunica/bus-query-source-identify:traverse")},Rt.KeysRdfUpdateQuads={destination:new a.ActionContextKey("@comunica/bus-rdf-update-quads:destination")},Rt.KeysMergeBindingsContext={sourcesBinding:new a.ActionContextKey("@comunica/bus-merge-bindings-context:sourcesBinding")},Rt.KeysRdfJoin={lastPhysicalJoin:new a.ActionContextKey("@comunica/bus-rdf-join:lastPhysicalJoin")},Rt.KeysStatistics={discoveredLinks:new a.ActionContextKey("@comunica/statistic:discoveredLinks"),dereferencedLinks:new a.ActionContextKey("@comunica/statistic:dereferencedLinks"),intermediateResults:new a.ActionContextKey("@comunica/statistic:intermediateResults")},Rt}var AP;function ze(){return AP||(AP=1,function(a){var t=eu&&eu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=eu&&eu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(OP(),a)}(eu)),eu}var EP;function Tue(){if(EP)return Up;EP=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.QueryEngineBase=void 0;const a=ze(),t=Te();let u=class SD{constructor(r){this.actorInitQuery=r}async queryBindings(r,e){return this.queryOfType(r,e,"bindings")}async queryQuads(r,e){return this.queryOfType(r,e,"quads")}async queryBoolean(r,e){return this.queryOfType(r,e,"boolean")}async queryVoid(r,e){return this.queryOfType(r,e,"void")}async queryOfType(r,e,i){const o=await this.query(r,e);if(o.resultType===i)return await o.execute();throw new Error(`Query result type '${i}' was expected, while '${o.resultType}' was found.`)}async query(r,e){const i=await this.queryOrExplain(r,e);if("explain"in i)throw new Error("Tried to explain a query when in query-only mode");return i}async explain(r,e,i){return e.explain=i,await this.queryOrExplain(r,e)}async queryOrExplain(r,e){const i=t.ActionContext.ensureActionContext(e);i.get(a.KeysInitQuery.invalidateCache)&&await this.invalidateHttpCache();const{result:o}=await this.actorInitQuery.mediatorQueryProcess.mediate({query:r,context:i});return"explain"in o?o:SD.internalToFinalResult(o)}async getResultMediaTypes(r){return r=t.ActionContext.ensureActionContext(r),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:r,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(r){return r=t.ActionContext.ensureActionContext(r),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:r,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(r,e,i){if(i=t.ActionContext.ensureActionContext(i),!e)switch(r.resultType){case"bindings":e="application/json";break;case"quads":e="application/trig";break;default:e="simple";break}const o={...await SD.finalToInternalResult(r),context:i};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:i,handle:o,handleMediaType:e})).handle}invalidateHttpCache(r,e){return e=t.ActionContext.ensureActionContext(e),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:r,context:e})}static internalToFinalResult(r){switch(r.type){case"bindings":return{resultType:"bindings",execute:async()=>r.bindingsStream,metadata:async()=>{const e=await r.metadata();return e.variables=e.variables.map(i=>i.variable),e},context:r.context};case"quads":return{resultType:"quads",execute:async()=>r.quadStream,metadata:async()=>await r.metadata(),context:r.context};case"boolean":return{resultType:"boolean",execute:async()=>r.execute(),context:r.context};case"void":return{resultType:"void",execute:async()=>r.execute(),context:r.context}}}static async finalToInternalResult(r){switch(r.resultType){case"bindings":return{type:"bindings",bindingsStream:await r.execute(),metadata:async()=>{const e=await r.metadata();return e.variables=e.variables.map(i=>({variable:i,canBeUndef:!1})),e}};case"quads":return{type:"quads",quadStream:await r.execute(),metadata:async()=>await r.metadata()};case"boolean":return{type:"boolean",execute:()=>r.execute()};case"void":return{type:"void",execute:()=>r.execute()}}}};return Up.QueryEngineBase=u,Up}var IP;function xP(){return IP||(IP=1,function(a){var t=Fi&&Fi.__createBinding||(Object.create?function(r,e,i,o){o===void 0&&(o=i);var c=Object.getOwnPropertyDescriptor(e,i);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(r,o,c)}:function(r,e,i,o){o===void 0&&(o=i),r[o]=e[i]}),u=Fi&&Fi.__exportStar||function(r,e){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&t(e,r,i)};Object.defineProperty(a,"__esModule",{value:!0}),a.QueryEngineBase=void 0,u(bP(),a),u(vue(),a);var n=Tue();Object.defineProperty(a,"QueryEngineBase",{enumerable:!0,get:function(){return n.QueryEngineBase}})}(Fi)),Fi}var tu={},Qp={},ru={},LI={},NP;function wue(){return NP||(NP=1,Object.defineProperty(LI,"__esModule",{value:!0})),LI}var MI={},RP;function Sue(){return RP||(RP=1,Object.defineProperty(MI,"__esModule",{value:!0})),MI}var CI={},FP;function Oue(){return FP||(FP=1,Object.defineProperty(CI,"__esModule",{value:!0})),CI}var qI={},DP;function Aue(){return DP||(DP=1,Object.defineProperty(qI,"__esModule",{value:!0})),qI}var BI={},PP;function Eue(){return PP||(PP=1,Object.defineProperty(BI,"__esModule",{value:!0})),BI}var $I={},jP;function Iue(){return jP||(jP=1,Object.defineProperty($I,"__esModule",{value:!0})),$I}var VI={},LP;function xue(){return LP||(LP=1,Object.defineProperty(VI,"__esModule",{value:!0})),VI}var UI={},MP;function Nue(){return MP||(MP=1,Object.defineProperty(UI,"__esModule",{value:!0})),UI}var QI={},CP;function Rue(){return CP||(CP=1,Object.defineProperty(QI,"__esModule",{value:!0})),QI}var HI={},qP;function Fue(){return qP||(qP=1,Object.defineProperty(HI,"__esModule",{value:!0})),HI}var GI={},BP;function Due(){return BP||(BP=1,Object.defineProperty(GI,"__esModule",{value:!0})),GI}var zI={},$P;function Pue(){return $P||($P=1,Object.defineProperty(zI,"__esModule",{value:!0})),zI}var kI={},VP;function jue(){return VP||(VP=1,Object.defineProperty(kI,"__esModule",{value:!0})),kI}var XI={},UP;function Lue(){return UP||(UP=1,Object.defineProperty(XI,"__esModule",{value:!0})),XI}var JI={},QP;function Mue(){return QP||(QP=1,Object.defineProperty(JI,"__esModule",{value:!0})),JI}var KI={},HP;function Cue(){return HP||(HP=1,Object.defineProperty(KI,"__esModule",{value:!0})),KI}var WI={},GP;function que(){return GP||(GP=1,Object.defineProperty(WI,"__esModule",{value:!0})),WI}var YI={},zP;function Bue(){return zP||(zP=1,Object.defineProperty(YI,"__esModule",{value:!0})),YI}var ZI={},kP;function $ue(){return kP||(kP=1,Object.defineProperty(ZI,"__esModule",{value:!0})),ZI}var Hp={},XP;function Vue(){if(XP)return Hp;XP=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.Logger=void 0;let a=class Jie{static getLevelOrdinal(u){return Jie.LEVELS[u]}};return Hp.Logger=a,a.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},Hp}var Gp={},JP;function Uue(){if(JP)return Gp;JP=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.ExpressionType=void 0;var a;return function(t){t.Aggregate="aggregate",t.Existence="existence",t.Operator="operator",t.Term="term",t.Variable="variable"}(a||(Gp.ExpressionType=a={})),Gp}var KP;function _a(){return KP||(KP=1,function(a){var t=ru&&ru.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ru&&ru.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(wue(),a),u(Sue(),a),u(Oue(),a),u(Aue(),a),u(Eue(),a),u(Iue(),a),u(xue(),a),u(Nue(),a),u(Rue(),a),u(Fue(),a),u(Due(),a),u(Pue(),a),u(jue(),a),u(Lue(),a),u(Mue(),a),u(Cue(),a),u(que(),a),u(Bue(),a),u($ue(),a),u(Vue(),a),u(Uue(),a)}(ru)),ru}var WP;function Que(){if(WP)return Qp;WP=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.LoggerVoid=void 0;const a=_a();let t=class extends a.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}};return Qp.LoggerVoid=t,Qp}var YP;function Hue(){return YP||(YP=1,function(a){var t=tu&&tu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=tu&&tu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Que(),a)}(tu)),tu}var nu={},iu={},ZP;function e4(){if(ZP)return iu;ZP=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.MediatorFunctionFactory=iu.ActorFunctionFactory=void 0;const a=Te();let t=class extends a.Actor{constructor(r){super(r)}};iu.ActorFunctionFactory=t;class u extends a.Mediator{}return iu.MediatorFunctionFactory=u,iu}var zp={},t4;function Gue(){if(t4)return zp;t4=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.ActorFunctionFactoryDedicated=void 0;const a=Te(),t=e4();let u=class extends t.ActorFunctionFactory{constructor(r){super(r)}async test(r){return this.functionNames.includes(r.functionName)&&(this.termFunction||!r.requireTermExpression)?(0,a.passTestVoid)():(0,a.failTest)(`Actor ${this.name} can not provide implementation for "${r.functionName}", only for ${this.termFunction?"":"non-termExpression "}${this.functionNames.join(" and ")}.`)}};return zp.ActorFunctionFactoryDedicated=u,zp}var kp={},r4;function zue(){if(r4)return kp;r4=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.BusFunctionFactory=void 0;const a=Te();let t=class extends a.BusIndexed{constructor(n){super({...n,actorIdentifierFields:["functionNames"],actionIdentifierFields:["functionName"]})}};return kp.BusFunctionFactory=t,kp}var au={},ex={},Xp={},tx={},Fr={},uu={},Jp={},n4;function i4(){if(n4)return Jp;n4=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return Jp.BlankNode=a,Jp}var Kp={},Wp={},a4;function u4(){if(a4)return Wp;a4=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return Wp.DefaultGraph=a,a.INSTANCE=new a,Wp}var Yp={},Zp={},o4;function rx(){if(o4)return Zp;o4=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return Zp.NamedNode=a,Zp}var s4;function c4(){if(s4)return Yp;s4=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.Literal=void 0;const a=rx();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Yp.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Yp}var e0={},l4;function d4(){if(l4)return e0;l4=1,Object.defineProperty(e0,"__esModule",{value:!0}),e0.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return e0.Quad=a,e0}var t0={},f4;function h4(){if(f4)return t0;f4=1,Object.defineProperty(t0,"__esModule",{value:!0}),t0.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return t0.Variable=a,t0}var p4;function kue(){if(p4)return Kp;p4=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.DataFactory=void 0;const a=i4(),t=u4(),u=c4(),n=rx(),r=d4(),e=h4();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Kp.DataFactory=o,Kp}var y4;function Xue(){return y4||(y4=1,function(a){var t=uu&&uu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=uu&&uu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(i4(),a),u(kue(),a),u(u4(),a),u(c4(),a),u(rx(),a),u(d4(),a),u(h4(),a)}(uu)),uu}var b4;function Jue(){if(b4)return Fr;b4=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.stringQuadToQuad=Fr.quadToStringQuad=Fr.stringToTerm=Fr.getLiteralLanguage=Fr.getLiteralType=Fr.getLiteralValue=Fr.termToString=void 0;const a=Xue(),t=new a.DataFactory;function u(s){if(s)switch(s.termType){case"NamedNode":return s.value;case"BlankNode":return"_:"+s.value;case"Literal":const l=s;return'"'+l.value+'"'+(l.datatype&&l.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+l.datatype.value:"")+(l.language?"@"+l.language:"");case"Quad":return`<<${u(s.subject)} ${u(s.predicate)} ${u(s.object)}${s.graph.termType==="DefaultGraph"?"":" "+u(s.graph)}>>`;case"Variable":return"?"+s.value;case"DefaultGraph":return s.value}}Fr.termToString=u;function n(s){const l=/^"([^]*)"/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]}Fr.getLiteralValue=n;function r(s){const l=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]||(l[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}Fr.getLiteralType=r;function e(s){const l=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]?l[1].toLowerCase():""}Fr.getLiteralLanguage=e;function i(s,l){if(l=l||t,!s||!s.length)return l.defaultGraph();switch(s[0]){case"_":return l.blankNode(s.substr(2));case"?":if(!l.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return l.variable(s.substr(1));case'"':const d=e(s),f=l.namedNode(r(s));return l.literal(n(s),d||f);case"<":default:if(s[0]==="<"&&s.length>4&&s[1]==="<"&&s[s.length-1]===">"&&s[s.length-2]===">"){const h=s.slice(2,-2).trim();let p=[],b=0,_=0,y=!1;for(let g=0;g<h.length;g++){const m=h[g];if(m==="<"&&b++,m===">"){if(b===0)throw new Error("Found closing tag without opening tag in "+s);b--}if(m==='"'){let v=!1,T=g;for(;T-- >0&&h[T]==="\\";)v=!v;v||(y=!y)}if(m===" "&&!y&&b===0){for(p.push(h.slice(_,g));h[g+1]===" ";)g+=1;_=g+1}}if(b!==0)throw new Error("Found opening tag without closing tag in "+s);if(p.push(h.slice(_,h.length)),p.length!==3&&p.length!==4)throw new Error("Nested quad syntax error "+s);return p=p.map(g=>g.startsWith("<")&&!g.includes(" ")?g.slice(1,-1):g),l.quad(i(p[0]),i(p[1]),i(p[2]),p[3]?i(p[3]):void 0)}return l.namedNode(s)}}Fr.stringToTerm=i;function o(s){return{subject:u(s.subject),predicate:u(s.predicate),object:u(s.object),graph:u(s.graph)}}Fr.quadToStringQuad=o;function c(s,l){return l=l||t,l.quad(i(s.subject,l),i(s.predicate,l),i(s.object,l),i(s.graph,l))}return Fr.stringQuadToQuad=c,Fr}var m4;function ir(){return m4||(m4=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralLanguage=void 0;const t=Jue();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return t.termToString}})}(tx)),tx}var Hn={},Rn={},nx,_4;function Kue(){return _4||(_4=1,nx=function a(t,u){if(t===u)return!0;if(t&&u&&typeof t=="object"&&typeof u=="object"){if(t.constructor!==u.constructor)return!1;var n,r,e;if(Array.isArray(t)){if(n=t.length,n!=u.length)return!1;for(r=n;r--!==0;)if(!a(t[r],u[r]))return!1;return!0}if(t instanceof Map&&u instanceof Map){if(t.size!==u.size)return!1;for(r of t.entries())if(!u.has(r[0]))return!1;for(r of t.entries())if(!a(r[1],u.get(r[0])))return!1;return!0}if(t instanceof Set&&u instanceof Set){if(t.size!==u.size)return!1;for(r of t.entries())if(!u.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(u)){if(n=t.length,n!=u.length)return!1;for(r=n;r--!==0;)if(t[r]!==u[r])return!1;return!0}if(t.constructor===RegExp)return t.source===u.source&&t.flags===u.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===u.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===u.toString();if(e=Object.keys(t),n=e.length,n!==Object.keys(u).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(u,e[r]))return!1;for(r=n;r--!==0;){var i=e[r];if(!a(t[i],u[i]))return!1}return!0}return t!==t&&u!==u}),nx}var ix={},g4;function r0(){return g4||(g4=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.expressionTypes=a.types=void 0,function(t){t.ALT="alt",t.ASK="ask",t.BGP="bgp",t.CONSTRUCT="construct",t.DESCRIBE="describe",t.DISTINCT="distinct",t.EXPRESSION="expression",t.EXTEND="extend",t.FILTER="filter",t.FROM="from",t.GRAPH="graph",t.GROUP="group",t.INV="inv",t.JOIN="join",t.LEFT_JOIN="leftjoin",t.LINK="link",t.MINUS="minus",t.NOP="nop",t.NPS="nps",t.ONE_OR_MORE_PATH="OneOrMorePath",t.ORDER_BY="orderby",t.PATH="path",t.PATTERN="pattern",t.PROJECT="project",t.REDUCED="reduced",t.SEQ="seq",t.SERVICE="service",t.SLICE="slice",t.UNION="union",t.VALUES="values",t.ZERO_OR_MORE_PATH="ZeroOrMorePath",t.ZERO_OR_ONE_PATH="ZeroOrOnePath",t.COMPOSITE_UPDATE="compositeupdate",t.DELETE_INSERT="deleteinsert",t.LOAD="load",t.CLEAR="clear",t.CREATE="create",t.DROP="drop",t.ADD="add",t.MOVE="move",t.COPY="copy"}(a.types||(a.types={})),function(t){t.AGGREGATE="aggregate",t.EXISTENCE="existence",t.NAMED="named",t.OPERATOR="operator",t.TERM="term",t.WILDCARD="wildcard"}(a.expressionTypes||(a.expressionTypes={}))}(ix)),ix}var _i={},ou={},n0={},v4;function T4(){if(v4)return n0;v4=1,Object.defineProperty(n0,"__esModule",{value:!0}),n0.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return n0.BlankNode=a,n0}var i0={},a0={},w4;function S4(){if(w4)return a0;w4=1,Object.defineProperty(a0,"__esModule",{value:!0}),a0.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return a0.DefaultGraph=a,a.INSTANCE=new a,a0}var u0={},o0={},O4;function ax(){if(O4)return o0;O4=1,Object.defineProperty(o0,"__esModule",{value:!0}),o0.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return o0.NamedNode=a,o0}var A4;function E4(){if(A4)return u0;A4=1,Object.defineProperty(u0,"__esModule",{value:!0}),u0.Literal=void 0;const a=ax();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return u0.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),u0}var s0={},I4;function x4(){if(I4)return s0;I4=1,Object.defineProperty(s0,"__esModule",{value:!0}),s0.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return s0.Quad=a,s0}var c0={},N4;function R4(){if(N4)return c0;N4=1,Object.defineProperty(c0,"__esModule",{value:!0}),c0.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return c0.Variable=a,c0}var F4;function Wue(){if(F4)return i0;F4=1,Object.defineProperty(i0,"__esModule",{value:!0}),i0.DataFactory=void 0;const a=T4(),t=S4(),u=E4(),n=ax(),r=x4(),e=R4();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return i0.DataFactory=o,i0}var D4;function Yue(){return D4||(D4=1,function(a){var t=ou&&ou.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ou&&ou.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(T4(),a),u(Wue(),a),u(S4(),a),u(E4(),a),u(ax(),a),u(x4(),a),u(R4(),a)}(ou)),ou}var ux={},P4;function j4(){if(P4)return ux;P4=1;let a=class{constructor(){return t||this}equals(n){return n&&this.termType===n.termType}};Object.defineProperty(a.prototype,"value",{enumerable:!0,value:"*"}),Object.defineProperty(a.prototype,"termType",{enumerable:!0,value:"Wildcard"});var t=new a;return ux.Wildcard=a,ux}var ox,L4;function Zue(){if(L4)return ox;L4=1;var a=function(){var t=function($e,Me,Ge,We){for(Ge=Ge||{},We=$e.length;We--;Ge[$e[We]]=Me);return Ge},u=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],n=[2,247],r=[100,110,113,115,116,123,126,131,329,330,331,332,333],e=[2,409],i=[1,18],o=[1,27],c=[13,16,45,197,224,229,308],s=[28,29,53],l=[28,53],d=[1,42],f=[1,45],h=[1,41],p=[1,44],b=[123,126],_=[1,67],y=[39,45,87],g=[13,16,45,197,224,308],m=[1,87],v=[2,281],T=[1,86],S=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],x=[6,28,29,53,63,70,73,81,83,85],L=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],O=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],w=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],A=[13,16,308],E=[112,132,327,334],R=[13,16,112,132,308],V=[1,111],$=[1,117],Q=[112,132,327,328,334],ne=[13,16,112,132,308,328],ie=[28,29,45,53,87],fe=[1,138],J=[1,151],_e=[1,128],Fe=[1,127],ve=[1,129],te=[1,140],Le=[1,141],Ce=[1,142],Ve=[1,143],ge=[1,144],we=[1,145],G=[1,147],D=[1,148],j=[2,457],I=[1,158],N=[1,159],B=[1,160],X=[1,152],H=[1,153],K=[1,156],z=[1,171],Z=[1,172],de=[1,173],le=[1,174],De=[1,175],Qe=[1,176],je=[1,167],oe=[1,168],se=[1,169],ye=[1,170],Ie=[1,157],U=[1,166],F=[1,161],q=[1,162],k=[1,163],ce=[1,164],be=[1,165],Se=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Ke=[1,195],Y=[6,31,73,81,83,85],Ee=[2,285],Re=[1,199],qe=[1,201],Ue=[6,31,70,73,81,83,85],tt=[2,283],ut=[1,207],rt=[1,218],lt=[1,223],ae=[1,219],M=[1,225],P=[1,226],C=[1,224],W=[6,63,70,73,81,83,85],me=[1,236],pe=[2,334],Pe=[1,243],Be=[1,241],ke=[6,193],Je=[2,349],ct=[2,339],Ze=[28,128],Ye=[47,48,193,272],zr=[47,48,193,242,272],Xe=[47,48,193,242,246,272],ue=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],Oe=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],xe=[1,271],nt=[1,270],it=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],Ot=[1,281],cr=[1,280],Jt=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Yi=[45,89],wn=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],tr=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],qn=[31,89],jr=[48,87],fi=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],Lr=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],jf=[1,313],kr=[6,85],Xh=[6,31,81,83,85],Lf=[2,361],Sn=[2,353],dn=[1,343],KS=[31,112,335],Zi=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],tD=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],gie=[6,109,193],Mf=[31,112],wr=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],rD=[1,390],nD=[1,391],La=[13,16,87,197,308,314],vie=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],hE=[1,417],pE=[1,418],Tie=[13,16,48,197,229,308],Ma=[6,31,85],wie=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],iD=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],Cf=[29,31,85,112,159,160,161,163,164],yE=[1,443],bE=[1,444],Sie=[1,449],qf=[31,112,193,232,318,335],mE=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Oie=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],aD=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],WS=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],YS=[31,45],Aie=[1,507],Eie=[1,508],Iie=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],_E=[29,31,85,112,159,160,161,163,164,335],Bf=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],xie=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Nie=[2,352],uD=[13,16,197,308,314],Rie=[1,565],Jh=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Fie=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],ea=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Die=[13,16,87,308],ta=[2,364],Kh=[29,31,85,112,159,160,161,163,164,193,232,318,335],gE=[31,112,193,232,272,318,335],ra=[2,359],Pie=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],vE=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],jie=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Lie=[2,347],oD={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(Me,Ge,We,dt,yt,ee,On){var re=ee.length-1;switch(yt){case 1:if(ee[re-1]=ee[re-1]||{},Et.base&&(ee[re-1].base=Et.base),Et.base="",ee[re-1].prefixes=Et.prefixes,Et.prefixes=null,Et.pathOnly){if(ee[re-1].type==="path"||"termType"in ee[re-1])return ee[re-1];throw new Error("Received full SPARQL query in path only mode")}else if(ee[re-1].type==="path"||"termType"in ee[re-1])throw new Error("Received only path in full SPARQL mode");if(ee[re-1].type==="update"){const At={};for(const $t of ee[re-1].updates)if($t.updateType==="insert"){const vt={};for(const Cr of $t.insert)if(Cr.type==="bgp"||Cr.type==="graph")for(const qr of Cr.triples)qr.subject.termType==="BlankNode"&&(vt[qr.subject.value]=!0),qr.predicate.termType==="BlankNode"&&(vt[qr.predicate.value]=!0),qr.object.termType==="BlankNode"&&(vt[qr.object.value]=!0);for(const Cr of Object.keys(vt)){if(At[Cr])throw new Error("Detected reuse blank node across different INSERT DATA clauses");At[Cr]=!0}}}return ee[re-1];case 2:this.$={...ee[re-1],...ee[re],type:"query"};break;case 4:Et.base=ZS(ee[re]);break;case 5:Et.prefixes||(Et.prefixes={}),ee[re-1]=ee[re-1].substr(0,ee[re-1].length-1),ee[re]=ZS(ee[re]),Et.prefixes[ee[re-1]]=ee[re];break;case 6:this.$={...ee[re-3],...Uf(ee[re-2]),...ee[re-1],...ee[re]};break;case 7:if(!Et.skipValidation&&(yD(ee[re-3].variables.map($t=>pD($t.expression))).some($t=>$t.aggregation==="count"&&!($t.expression instanceof TE))||ee[re].group)){for(const $t of ee[re-3].variables)if($t.termType==="Variable"){if(!ee[re].group||!ee[re].group.map(vt=>tp(vt)).includes(tp($t)))throw Error("Projection of ungrouped variable (?"+tp($t)+")")}else if(pD($t.expression).length===0){const vt=V3e($t.expression);for(const Cr of vt)if(!ee[re].group||!ee[re].group.map||!ee[re].group.map(qr=>tp(qr)).includes(tp(Cr)))throw Error("Use of ungrouped variable in projection of operation (?"+tp(Cr)+")")}}const rp=ee[re-1].where.filter(At=>At.type==="query");if(rp.length>0){const At=ee[re-3].variables.filter(vt=>vt.variable&&vt.variable.value).map(vt=>vt.variable.value),$t=yD(rp.map(vt=>vt.variables)).map(vt=>vt.value||vt.variable.value);for(const vt of At)if($t.indexOf(vt)>=0)throw Error("Target id of 'AS' (?"+vt+") already used in subquery")}this.$=br(ee[re-3],Uf(ee[re-2]),ee[re-1],ee[re]);break;case 8:this.$=br({queryType:"CONSTRUCT",template:ee[re-3]},Uf(ee[re-2]),ee[re-1],ee[re]);break;case 9:this.$=br({queryType:"CONSTRUCT",template:ee[re-2]=ee[re-2]?ee[re-2].triples:[]},Uf(ee[re-5]),{where:[{type:"bgp",triples:Wh([],ee[re-2])}]},ee[re]);break;case 10:this.$=br({queryType:"DESCRIBE",variables:ee[re-3]==="*"?[new TE]:ee[re-3]},Uf(ee[re-2]),ee[re-1],ee[re]);break;case 11:this.$=br({queryType:"ASK"},Uf(ee[re-2]),ee[re-1],ee[re]);break;case 12:this.$=br(ee[re-1],{variables:[new TE]});break;case 13:const gD=ee[re].map(At=>At.value||At.variable.value),IE=U3e(gD);if(IE.length>0)throw Error("Two or more of the resulting columns have the same name (?"+IE[0]+")");this.$=br(ee[re-1],{variables:ee[re]});break;case 14:this.$=br({queryType:"SELECT"},ee[re]&&(ee[re-1]=un(ee[re]),ee[re]={},ee[re][ee[re-1]]=!0,ee[re]));break;case 16:case 27:this.$=Yh(ee[re-3],{variable:ee[re-1]});break;case 17:case 18:this.$=br(ee[re-3],ee[re-2],ee[re-1],ee[re],{type:"query"});break;case 19:case 58:this.$={iri:ee[re],named:!!ee[re-1]};break;case 20:this.$={where:ee[re].patterns};break;case 21:this.$=br(ee[re-1],ee[re]);break;case 22:this.$=br(ee[re-2],ee[re-1],ee[re]);break;case 23:this.$={group:ee[re]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=Yh(ee[re]);break;case 26:this.$=Yh(ee[re-1]);break;case 29:this.$={having:ee[re]};break;case 30:this.$={order:ee[re]};break;case 32:this.$=Yh(ee[re],{descending:!0});break;case 35:this.$={limit:ep(ee[re])};break;case 36:this.$={offset:ep(ee[re])};break;case 37:this.$={limit:ep(ee[re-2]),offset:ep(ee[re])};break;case 38:this.$={limit:ep(ee[re]),offset:ep(ee[re-2])};break;case 39:case 43:this.$={type:"values",values:ee[re]};break;case 40:case 84:this.$=ee[re-1].map(At=>({[ee[re-3]]:At}));break;case 41:case 85:this.$=ee[re-1].map(()=>({}));break;case 42:case 86:var Ca=ee[re-4].length;ee[re-4]=ee[re-4].map(sD),this.$=ee[re-1].map(function(At){if(At.length!==Ca)throw Error("Inconsistent VALUES length");for(var $t={},vt=0;vt<Ca;vt++)$t["?"+ee[re-4][vt].value]=At[vt];return $t});break;case 44:case 65:case 100:case 126:case 175:this.$=ee[re-1];break;case 45:this.$={type:"update",updates:Vf(ee[re-2],ee[re-1])};break;case 46:this.$=br({type:"load",silent:!!ee[re-2],source:ee[re-1]},ee[re]&&{destination:ee[re]});break;case 47:this.$={type:un(ee[re-2]),silent:!!ee[re-1],graph:ee[re]};break;case 48:this.$={type:un(ee[re-4]),silent:!!ee[re-3],source:ee[re-2],destination:ee[re]};break;case 49:this.$={type:"create",silent:!!ee[re-2],graph:{type:"graph",name:ee[re]}};break;case 50:this.$={updateType:"insert",insert:zie(ee[re])};break;case 51:this.$={updateType:"delete",delete:_D(zie(ee[re]))};break;case 52:this.$={updateType:"deletewhere",delete:_D(ee[re])};break;case 53:this.$={updateType:"insertdelete",...ee[re-4],...ee[re-3],...Uf(ee[re-2],"using"),where:ee[re].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=ee[re];break;case 55:this.$={delete:_D(ee[re-1]),insert:ee[re]||[]};break;case 56:this.$={delete:[],insert:ee[re]};break;case 59:this.$={graph:ee[re]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:ee[re]};break;case 64:this.$={[un(ee[re])]:!0};break;case 66:this.$=ee[re-1]?xi(ee[re],[ee[re-1]]):xi(ee[re]);break;case 67:var OE=br(ee[re-3]||{triples:[]},{type:"graph",name:ee[re-5]});this.$=ee[re]?[OE,ee[re]]:[OE];break;case 68:case 73:this.$={type:"bgp",triples:xi(ee[re-2],[ee[re-1]])};break;case 69:this.$={type:"group",patterns:[ee[re-1]]};break;case 70:for(const At of ee[re-1].filter($t=>$t.type==="bind")){const $t=ee[re-1].indexOf(At),vt=new Set;for(const Cr of ee[re-1].slice(0,$t))(Cr.type==="group"||Cr.type==="bgp")&&Hie(Cr).forEach(qr=>vt.add(qr));if(vt.has(At.variable.value))throw Error("Variable used to bind is already bound (?"+At.variable.value+")")}this.$={type:"group",patterns:ee[re-1]};break;case 71:this.$=ee[re-1]?xi([ee[re-1]],ee[re]):xi(ee[re]);break;case 72:this.$=ee[re]?[ee[re-2],ee[re]]:ee[re-2];break;case 75:this.$=br(ee[re],{type:"optional"});break;case 76:this.$=br(ee[re],{type:"minus"});break;case 77:this.$=br(ee[re],{type:"graph",name:ee[re-1]});break;case 78:this.$=br(ee[re],{type:"service",name:ee[re-1],silent:!!ee[re-2]});break;case 79:this.$={type:"filter",expression:ee[re]};break;case 80:this.$={type:"bind",variable:ee[re-1],expression:ee[re-3]};break;case 89:this.$=tO(ee[re]);break;case 90:this.$=void 0;break;case 91:this.$=ee[re-1].length?{type:"union",patterns:xi(ee[re-1].map(lD),[lD(ee[re])])}:ee[re];break;case 95:this.$={...ee[re],function:ee[re-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:Vf(ee[re-2],ee[re-1]),distinct:!!ee[re-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=Vf(ee[re-2],ee[re-1]);break;case 101:this.$=xi(ee[re-2],[ee[re-1]]);break;case 102:case 112:this.$=mD(ee[re].map(At=>br(na(ee[re-1]),At)));break;case 103:this.$=mD(Wh(ee[re].map(At=>br(na(ee[re-1].entity),At)),ee[re-1].triples));break;case 105:this.$=xi([ee[re-1]],ee[re]);break;case 106:this.$=xi(ee[re]);break;case 107:this.$=hD(ee[re-1],ee[re]);break;case 109:case 237:this.$=Et.factory.namedNode(F3e);break;case 110:case 118:this.$=Vf(ee[re-1],ee[re]);break;case 111:this.$=ee[re]?{annotation:ee[re],object:ee[re-1]}:ee[re-1];break;case 113:this.$=ee[re]?mD(Wh(ee[re].map(At=>br(na(ee[re-1].entity),At)),ee[re-1].triples)):ee[re-1].triples;break;case 114:this.$=hD(...ee[re-1],ee[re]);break;case 116:this.$=hD(...ee[re]);break;case 117:case 159:case 163:this.$=[ee[re-1],ee[re]];break;case 119:this.$=ee[re]?{object:ee[re-1],annotation:ee[re]}:ee[re-1];break;case 120:this.$=ee[re-1].length?Zh("|",Vf(ee[re-1],ee[re])):ee[re];break;case 121:this.$=ee[re-1].length?Zh("/",Vf(ee[re-1],ee[re])):ee[re];break;case 122:this.$=ee[re]?Zh(ee[re],[ee[re-1]]):ee[re-1];break;case 123:this.$=ee[re-1]?Zh(ee[re-1],[ee[re]]):ee[re];break;case 125:case 131:this.$=Zh(ee[re-1],[ee[re]]);break;case 129:this.$=Zh("|",Vf(ee[re-2],ee[re-1]));break;case 132:case 134:this.$=B3e(ee[re-1]);break;case 133:case 135:this.$=$3e(ee[re-1]);break;case 140:this.$={entity:ee[re],triples:[]};break;case 145:this.$=sD(ee[re]);break;case 149:this.$=Et.factory.namedNode(Mie);break;case 151:case 153:case 158:case 162:this.$=cD(ee[re-1],ee[re]);break;case 152:this.$=["||",ee[re]];break;case 154:this.$=["&&",ee[re]];break;case 156:this.$=Mr(ee[re-1],[ee[re-2],ee[re]]);break;case 157:this.$=Mr(ee[re-2]?"notin":"in",[ee[re-3],ee[re]]);break;case 160:this.$=["+",cD(ee[re-1],ee[re])];break;case 161:var AE=Ni(ee[re-1].value.replace("-",""),ee[re-1].datatype);this.$=["-",cD(AE,ee[re])];break;case 164:this.$=Mr("UPLUS",[ee[re]]);break;case 165:this.$=Mr(ee[re-1],[ee[re]]);break;case 166:this.$=Mr("UMINUS",[ee[re]]);break;case 177:this.$=Mr(un(ee[re-1]));break;case 178:this.$=Mr(un(ee[re-3]),[ee[re-1]]);break;case 179:this.$=tO(Mr(un(ee[re-3]),[ee[re-1]]));break;case 180:this.$=Mr(un(ee[re-5]),[ee[re-3],ee[re-1]]);break;case 181:this.$=Mr(un(ee[re-7]),[ee[re-5],ee[re-3],ee[re-1]]);break;case 182:this.$=tO(Mr(un(ee[re-7]),[ee[re-5],ee[re-3],ee[re-1]]));break;case 183:this.$=Mr(un(ee[re-1]),ee[re]);break;case 184:this.$=Mr("bound",[sD(ee[re-1])]);break;case 185:this.$=Mr(ee[re-1],[]);break;case 186:this.$=Mr(ee[re-3],[ee[re-1]]);break;case 187:this.$=Mr(ee[re-2]?"notexists":"exists",[lD(ee[re])]);break;case 188:case 189:this.$=Yh(ee[re-1],{type:"aggregate",aggregation:un(ee[re-4]),distinct:!!ee[re-2]});break;case 190:this.$=Yh(ee[re-2],{type:"aggregate",aggregation:un(ee[re-5]),distinct:!!ee[re-3],separator:typeof ee[re-1]=="string"?ee[re-1]:" "});break;case 192:this.$=Ni(ee[re]);break;case 193:this.$=L3e(ee[re-1],un(ee[re].substr(1)));break;case 194:this.$=Ni(ee[re-2],ee[re]);break;case 195:case 204:this.$=Ni(ee[re],Cie);break;case 196:case 205:this.$=Ni(ee[re],qie);break;case 197:case 206:this.$=Ni(un(ee[re]),Bie);break;case 200:this.$=Ni(ee[re].toLowerCase(),j3e);break;case 201:this.$=Ni(ee[re].substr(1),Cie);break;case 202:this.$=Ni(ee[re].substr(1),qie);break;case 203:this.$=Ni(ee[re].substr(1).toLowerCase(),Bie);break;case 207:case 208:this.$=Qie(ee[re],1);break;case 209:case 210:this.$=Qie(ee[re],3);break;case 211:this.$=Et.factory.namedNode(ZS(ee[re]));break;case 213:var EE=ee[re].indexOf(":"),mr=ee[re].substr(0,EE),Ri=Et.prefixes[mr];if(!Ri)throw new Error("Unknown prefix: "+mr);var Qf=ZS(Ri+ee[re].substr(EE+1));this.$=Et.factory.namedNode(Qf);break;case 214:if(ee[re]=ee[re].substr(0,ee[re].length-1),!(ee[re]in Et.prefixes))throw new Error("Unknown prefix: "+ee[re]);var Qf=ZS(Et.prefixes[ee[re]]);this.$=Et.factory.namedNode(Qf);break;case 215:this.$=eO(ee[re].replace(/^(_:)/,""));break;case 216:this.$=eO();break;case 217:case 218:case 232:this.$=tO(dD(ee[re-3],ee[re-2],ee[re-1]));break;case 230:case 231:this.$=tO(ee[re-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:ee[re-1].push(ee[re]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[ee[re]];break;case 308:ee[re-3].push(ee[re-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:ee[re-2].push(ee[re-1]);break}},table:[t(u,n,{3:1,4:2,10:3}),{1:[3]},t(r,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:e,16:e,45:e,197:e,224:e,229:e,308:e,24:[1,13],32:[1,14],36:[1,15],41:i}),t([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:o},{6:[2,239]},t(c,[2,411],{216:28,217:29}),t(s,[2,249],{18:30}),t(s,[2,251],{22:31}),t(l,[2,255],{25:32,27:33,29:[1,34]}),{13:d,16:f,33:35,39:[1,37],44:39,55:40,87:h,139:38,307:43,308:p,323:36},t(s,[2,267],{37:46}),t(b,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:_,87:h},t(y,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),t(u,[2,248]),t(u,[2,245]),t(u,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},t([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),t(g,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:m,29:v,52:84,53:T,56:85},{19:88,28:m,29:v,52:89,53:T,56:85},t(s,[2,253],{26:90}),{28:[1,91],52:92,53:T},t(S,[2,385],{181:93,182:94,183:95,31:[2,383]}),t(x,[2,263],{34:96}),t(x,[2,261],{44:39,55:40,307:43,139:97,13:d,16:f,87:h,308:p}),t(x,[2,262]),t(L,[2,259]),t(O,[2,143]),t(O,[2,144]),t([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),t(w,[2,211]),t(w,[2,212]),t(w,[2,213]),t(w,[2,214]),{19:98,28:m,29:v,52:99,53:T,56:85},{6:[2,309],99:100,193:[1,101]},t(A,[2,311],{101:102,328:[1,103]}),t(E,[2,317],{104:104,328:[1,105]}),t(R,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:V,114:110},{29:V,114:112},{29:V,114:113},{118:114,123:[1,115],125:116,126:$},t(Q,[2,315]),t(Q,[2,316]),t(ne,[2,319]),t(ne,[2,320]),t(ne,[2,321]),t(b,[2,327]),{13:d,16:f,55:118,307:43,308:p},t(s,[2,12]),t(s,[2,13],{44:66,43:119,45:_,87:h}),t(ie,[2,269]),t(ie,[2,15]),{13:d,16:f,44:136,45:fe,46:120,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(y,[2,14]),t(y,[2,274]),t(y,[2,271]),t(y,[2,272]),t(u,[2,4]),{13:[1,177]},t(Se,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},t(c,[2,410]),t([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:d,16:f,45:[1,193],55:194,197:Ke,219:189,220:190,223:191,224:[1,192],307:43,308:p},t(g,[2,419]),t(Y,Ee,{20:196,59:197,69:198,70:Re}),t(s,[2,250]),{29:qe,57:200},t(A,[2,279],{54:202,327:[1,203]}),{29:[2,282]},t(Ue,tt,{23:204,58:205,62:206,63:ut}),t(s,[2,252]),{19:208,28:m,29:v,52:209,53:T,56:85},{29:[1,210]},t(l,[2,256]),{31:[1,211]},{31:[2,384]},{13:d,16:f,44:215,45:rt,55:220,82:J,87:h,89:lt,145:212,172:221,185:213,187:214,231:ae,236:216,237:222,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,309:M,310:P,311:217,312:C},t(W,[2,265],{56:85,35:227,52:228,19:229,28:m,29:v,53:T}),t(L,[2,260]),t(Ue,tt,{58:205,62:206,23:230,63:ut}),t(s,[2,268]),{6:[2,45]},t(u,n,{10:3,4:231}),{13:d,16:f,55:232,307:43,308:p},t(A,[2,312]),{105:233,112:me,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},t(E,[2,318]),t(A,pe,{108:240,133:242,112:Pe,132:Be}),t(R,[2,323]),{112:[1,244]},{112:[2,325]},t(ke,[2,50]),t(S,Je,{135:245,136:246,143:247,144:248,31:ct,112:ct}),t(ke,[2,51]),t(ke,[2,52]),t(Ze,[2,328],{119:249}),{29:V,114:250},t(Ze,[2,56]),{29:V,114:251},t(b,[2,59]),t(ie,[2,270]),{47:[1,252]},t(Ye,[2,150]),t(zr,[2,428],{240:253}),t(Xe,[2,430],{244:254}),t(Xe,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),t(ue,[2,440],{252:264}),t(Oe,[2,448],{260:265}),{13:d,16:f,44:136,45:fe,55:133,67:132,68:134,77:131,82:J,87:h,172:135,255:154,257:155,264:266,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{13:d,16:f,44:136,45:fe,55:133,67:132,68:134,77:131,82:J,87:h,172:135,255:154,257:155,264:267,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{13:d,16:f,44:136,45:fe,55:133,67:132,68:134,77:131,82:J,87:h,172:135,255:154,257:155,264:268,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(Oe,[2,167]),t(Oe,[2,168]),t(Oe,[2,169]),t(Oe,[2,170],{176:269,45:xe,89:nt}),t(Oe,[2,171]),t(Oe,[2,172]),t(Oe,[2,173]),t(Oe,[2,174]),{13:d,16:f,44:136,45:fe,46:272,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(it,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:Ot,89:cr,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},t(Jt,[2,192],{292:[1,286],293:[1,287]}),t(Jt,[2,195]),t(Jt,[2,196]),t(Jt,[2,197]),t(Jt,[2,198]),t(Jt,[2,199]),t(Jt,[2,200]),{13:d,16:f,44:39,55:40,82:J,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},t(Yi,[2,452]),t(Yi,[2,453]),t(Yi,[2,454]),t(Yi,[2,455]),t(Yi,[2,456]),{279:[2,458]},t(wn,[2,207]),t(wn,[2,208]),t(wn,[2,209]),t(wn,[2,210]),t(Jt,[2,201]),t(Jt,[2,202]),t(Jt,[2,203]),t(Jt,[2,204]),t(Jt,[2,205]),t(Jt,[2,206]),t(u,[2,5]),t(tr,[2,297],{88:295}),t(qn,[2,299],{90:296}),{48:[1,297],87:[1,298]},t(jr,[2,301]),t(Se,[2,43]),t(Se,[2,82]),t(Se,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},t(c,[2,412]),t(fi,[2,123]),t(fi,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),t(Lr,[2,124]),{13:d,16:f,45:[1,311],55:194,89:[1,310],197:Ke,223:312,225:308,226:309,229:jf,307:43,308:p},t(c,e,{215:10,214:314}),t(Lr,[2,236]),t(Lr,[2,237]),t(kr,[2,6]),t(Xh,[2,287],{60:315,72:316,73:[1,317]}),t(Y,[2,286]),{13:d,16:f,45:fe,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,307:43,308:p,346:U,347:F,348:q,349:k,350:ce,351:be},t([6,31,63,70,73,81,83,85],[2,20]),t(S,Lf,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:Sn,31:Sn,85:Sn,112:Sn,159:Sn,160:Sn,161:Sn,163:Sn,164:Sn,41:i}),{13:d,16:f,55:331,307:43,308:p},t(A,[2,280]),t(kr,[2,7]),t(Y,Ee,{59:197,69:198,20:332,70:Re}),t(Ue,[2,284]),{64:[1,333]},t(Ue,tt,{58:205,62:206,23:334,63:ut}),t(s,[2,254]),t(S,Je,{144:248,30:335,143:336,31:[2,257]}),t(s,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:d,16:f,44:39,55:40,87:h,139:342,186:339,190:340,195:341,197:dn,307:43,308:p},t(KS,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:d,16:f,87:h,197:dn,308:p}),t(Zi,[2,227]),t(Zi,[2,228]),t(Zi,[2,229]),{13:d,16:f,44:215,45:rt,55:220,82:J,87:h,89:lt,172:221,185:351,187:350,200:348,230:347,231:ae,234:349,236:216,237:222,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,309:M,310:P,311:217,312:C},{13:d,16:f,44:39,55:40,87:h,139:342,186:352,190:340,195:341,197:dn,307:43,308:p},t(Zi,[2,146]),t(Zi,[2,147]),t(Zi,[2,148]),t(Zi,[2,149]),{13:d,16:f,44:354,55:355,82:J,87:h,172:357,237:356,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,309:M,310:P,311:358,312:C,313:353},t(tD,[2,215]),t(tD,[2,216]),t(Ue,tt,{58:205,62:206,23:359,63:ut}),t(x,[2,264]),t(W,[2,266]),t(kr,[2,11]),t(r,[2,308],{6:[2,310]}),t(ke,[2,313],{102:360,120:361,121:[1,362]}),t(ke,[2,47]),t(ke,[2,63]),t(ke,[2,64]),{13:d,16:f,55:363,307:43,308:p},t(ke,[2,336]),t(ke,[2,337]),t(ke,[2,338]),{109:[1,364]},t(gie,[2,60]),{13:d,16:f,55:365,307:43,308:p},t(A,[2,335]),{13:d,16:f,55:366,307:43,308:p},{31:[1,367]},t(Mf,[2,341],{137:368}),t(Mf,[2,340]),{13:d,16:f,44:215,45:rt,55:220,82:J,87:h,89:lt,145:369,172:221,185:213,187:214,231:ae,236:216,237:222,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,309:M,310:P,311:217,312:C},{28:[1,370],127:371,128:[1,372]},t(Ze,[2,330],{124:373,125:374,126:$}),t(Ze,[2,57]),{44:375,87:h},t(Ye,[2,151],{241:376,242:[1,377]}),t(zr,[2,153],{245:378,246:[1,379]}),{13:d,16:f,44:136,45:fe,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,247:380,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{250:[1,381]},t(wr,[2,432]),t(wr,[2,433]),t(wr,[2,434]),t(wr,[2,435]),t(wr,[2,436]),t(wr,[2,437]),{250:[2,439]},t([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:z,298:Z,299:de,300:le,301:De,302:Qe}),t(ue,[2,162],{261:388,262:389,39:rD,338:nD}),t(Oe,[2,164]),t(Oe,[2,165]),t(Oe,[2,166]),t(it,[2,95]),t(it,[2,96]),t(wr,[2,377],{177:392,325:[1,393]}),{48:[1,394]},t(it,[2,177]),{13:d,16:f,44:136,45:fe,46:395,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{13:d,16:f,44:136,45:fe,46:396,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{13:d,16:f,44:136,45:fe,46:397,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{13:d,16:f,44:136,45:fe,46:398,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{13:d,16:f,44:136,45:fe,46:399,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(it,[2,183]),t(it,[2,98]),t(wr,[2,381],{180:400}),{87:[1,401]},t(it,[2,185]),{13:d,16:f,44:136,45:fe,46:402,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{29:qe,57:403},t(Jt,[2,193]),{13:d,16:f,55:404,307:43,308:p},{13:d,16:f,44:39,55:40,87:h,139:342,195:405,197:dn,307:43,308:p},t(La,[2,233]),t(La,[2,234]),t(La,[2,235]),t(vie,[2,459],{281:406,325:[1,407]}),t(wr,[2,463],{284:408,325:[1,409]}),t(wr,[2,465],{286:410,325:[1,411]}),{13:d,16:f,31:[1,412],55:414,82:J,171:413,172:415,173:416,174:hE,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:pE},{31:[1,419],89:[1,420]},{29:[1,421]},t(jr,[2,302]),t(tr,[2,367],{167:422}),t(qn,[2,369],{168:423}),{48:[1,424],87:[1,425]},t(jr,[2,371]),t(fi,[2,122]),t(fi,[2,417]),t(fi,[2,413]),t(fi,[2,414]),t(fi,[2,415]),t(Lr,[2,125]),t(Lr,[2,127]),t(Lr,[2,128]),t(Tie,[2,420],{227:426}),t(Lr,[2,130]),{13:d,16:f,55:194,197:Ke,223:427,307:43,308:p},{48:[1,428]},t(Ma,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),t(Xh,[2,288]),{64:[1,433]},t(Y,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:d,16:f,45:fe,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,276:G,277:D,279:j,280:I,283:N,285:B,308:p,346:U,347:F,348:q,349:k,350:ce,351:be}),t(wie,[2,293]),t(iD,[2,92]),t(iD,[2,93]),t(iD,[2,94]),{45:xe,89:nt,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:m,29:v,56:85},{19:438,28:m,29:v,56:85},t(Cf,[2,355],{149:439}),t(Cf,[2,354]),{13:d,16:f,44:215,45:yE,55:220,82:J,87:h,89:lt,156:440,172:221,185:441,203:442,231:bE,236:216,237:222,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,309:M,310:P,311:217,312:C},t(x,[2,19]),t(Ma,[2,21]),{13:d,16:f,44:450,45:Sie,55:323,65:445,66:446,67:447,68:448,87:h,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,307:43,308:p,346:U,347:F,348:q,349:k,350:ce,351:be},t(kr,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},t(S,[2,386],{31:[2,388]}),t(KS,[2,102]),t(qf,[2,391],{191:452}),t(S,[2,395],{196:453,198:454}),t(S,[2,108]),t(S,[2,109]),t(KS,[2,103]),t(KS,[2,104]),t(KS,[2,390]),{13:d,16:f,44:215,45:rt,48:[1,455],55:220,82:J,87:h,89:lt,172:221,185:351,187:350,200:456,231:ae,234:349,236:216,237:222,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,309:M,310:P,311:217,312:C},t(mE,[2,424]),t(Oie,[2,136]),t(Oie,[2,137]),t(aD,[2,140]),{232:[1,457]},{13:d,16:f,44:39,55:40,87:h,139:342,195:458,197:dn,307:43,308:p},t(La,[2,219]),t(La,[2,220]),t(La,[2,221]),t(La,[2,222]),t(La,[2,223]),t(kr,[2,10]),t(ke,[2,46]),t(ke,[2,314]),{112:me,122:459},t(ke,[2,62]),t(A,pe,{133:242,108:460,112:Pe,132:Be}),t(gie,[2,61]),t(ke,[2,49]),t([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},t(Mf,[2,351],{146:463,335:[1,464]}),{29:qe,57:465},t(Ze,[2,329]),t(A,[2,332],{129:466,327:[1,467]}),t(Ze,[2,55]),t(Ze,[2,331]),{48:[1,468]},t(zr,[2,429]),{13:d,16:f,44:136,45:fe,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(Xe,[2,431]),{13:d,16:f,44:136,45:fe,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,243:470,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(Xe,[2,156]),{45:Ot,89:cr,179:471},t(ue,[2,441]),{13:d,16:f,44:136,45:fe,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,251:472,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(Oe,[2,444],{256:473}),t(Oe,[2,446],{258:474}),t(wr,[2,442]),t(wr,[2,443]),t(Oe,[2,449]),{13:d,16:f,44:136,45:fe,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,255:154,257:155,259:475,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(wr,[2,450]),t(wr,[2,451]),t(wr,[2,379],{178:476}),t(wr,[2,378]),t([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:d,16:f,44:136,45:fe,46:482,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{48:[1,483]},{48:[1,484]},t(it,[2,187]),t(Jt,[2,194]),{13:d,16:f,44:39,55:40,82:J,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,320:485},{13:d,16:f,39:[1,487],44:136,45:fe,46:488,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,282:486,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(vie,[2,460]),{13:d,16:f,44:136,45:fe,46:489,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(wr,[2,464]),{13:d,16:f,44:136,45:fe,46:490,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(wr,[2,466]),t(Se,[2,40]),t(tr,[2,298]),t(WS,[2,87]),t(WS,[2,88]),t(WS,[2,89]),t(WS,[2,90]),{13:d,16:f,55:492,82:J,172:493,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,311:494,312:C,315:491},t(Se,[2,41]),t(qn,[2,300]),t(YS,[2,303],{92:495}),{13:d,16:f,31:[1,496],55:414,82:J,171:497,172:415,173:416,174:hE,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:pE},{31:[1,498],89:[1,499]},{29:[1,500]},t(jr,[2,372]),{13:d,16:f,48:[2,422],55:194,197:Ke,223:312,226:502,228:501,229:jf,307:43,308:p},t(Lr,[2,131]),t(Lr,[2,126]),t(Ma,[2,22]),t(Ma,[2,290]),{82:[1,503]},{82:[1,504]},{13:d,16:f,44:510,45:fe,55:323,67:321,68:322,74:505,75:506,76:Aie,77:320,78:Eie,79:509,87:h,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,307:43,308:p,346:U,347:F,348:q,349:k,350:ce,351:be},t(wie,[2,294]),t(Iie,[2,69]),t(Iie,[2,70]),t(Y,Ee,{59:197,69:198,20:511,70:Re}),t(Ue,tt,{58:205,62:206,23:512,63:ut}),{29:[2,375],31:[2,71],84:522,85:o,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},t(Cf,[2,363],{157:524,335:[1,525]}),t(c,e,{215:10,202:526,205:527,208:528,214:529,44:530,87:h}),t(_E,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),{13:d,16:f,44:215,45:yE,55:220,82:J,87:h,89:lt,172:221,185:351,203:536,212:534,231:bE,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,309:M,310:P,311:217,312:C},t(c,e,{215:10,205:527,208:528,214:529,44:530,202:537,87:h}),t(Ue,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:d,16:f,45:Sie,87:h,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,276:G,277:D,279:j,280:I,283:N,285:B,308:p,346:U,347:F,348:q,349:k,350:ce,351:be}),t(Bf,[2,291]),t(Bf,[2,24]),t(Bf,[2,25]),{13:d,16:f,44:136,45:fe,46:539,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(Bf,[2,28]),t(Ue,tt,{58:205,62:206,23:540,63:ut}),t([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),t(qf,[2,107]),{13:d,16:f,44:215,45:rt,55:220,82:J,87:h,89:lt,172:221,185:351,187:350,199:543,200:544,231:ae,234:349,236:216,237:222,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,309:M,310:P,311:217,312:C},t(xie,[2,132]),t(mE,[2,425]),t(xie,[2,133]),{13:d,16:f,44:354,55:355,82:J,87:h,172:357,237:356,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,309:M,310:P,311:358,312:C,313:545},t(ke,[2,54]),t(ke,[2,48]),t(Mf,[2,342]),{13:d,16:f,44:39,55:40,87:h,139:546,307:43,308:p},t(Mf,[2,68]),t(S,[2,350],{31:Nie,112:Nie}),t(ke,[2,53]),{13:d,16:f,55:547,307:43,308:p},t(A,[2,333]),t(ie,[2,16]),t(zr,[2,152]),t(Xe,[2,154]),t(Xe,[2,157]),t(ue,[2,159]),t(ue,[2,160],{262:389,261:548,39:rD,338:nD}),t(ue,[2,161],{262:389,261:549,39:rD,338:nD}),t(Oe,[2,163]),{13:d,16:f,44:136,45:fe,46:550,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(it,[2,178]),t(it,[2,179]),{13:d,16:f,44:136,45:fe,46:551,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{13:d,16:f,44:136,45:fe,46:552,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{13:d,16:f,44:136,45:fe,46:553,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{48:[1,554],272:[1,555]},t(it,[2,184]),t(it,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:d,16:f,55:194,197:Ke,223:562,307:43,308:p},t(uD,[2,224]),t(uD,[2,225]),t(uD,[2,226]),{31:[1,563],45:Rie,94:564},t(Se,[2,84]),t(tr,[2,368]),t(Se,[2,85]),t(qn,[2,370]),t(YS,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},t(Ma,[2,35],{83:[1,569]}),t(Ma,[2,36],{81:[1,570]}),t(Xh,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:d,16:f,45:fe,76:Aie,78:Eie,87:h,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,276:G,277:D,279:j,280:I,283:N,285:B,308:p,346:U,347:F,348:q,349:k,350:ce,351:be}),t(Jh,[2,295]),{45:fe,77:572},{45:fe,77:573},t(Jh,[2,33]),t(Jh,[2,34]),{31:[2,275],50:574,84:575,85:o},{31:[2,277],51:576,84:577,85:o},t(Cf,[2,356]),t(Fie,[2,357],{152:578,335:[1,579]}),t(ea,[2,74]),{29:qe,57:580},{29:qe,57:581},{13:d,16:f,44:39,55:40,87:h,139:582,307:43,308:p},t(Die,[2,365],{162:583,328:[1,584]}),{13:d,16:f,45:fe,55:323,67:321,68:322,77:320,79:585,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,307:43,308:p,346:U,347:F,348:q,349:k,350:ce,351:be},{45:[1,586]},t(ea,[2,81]),{29:qe,57:587},t(Cf,[2,73]),t(S,[2,362],{29:ta,31:ta,85:ta,112:ta,159:ta,160:ta,161:ta,163:ta,164:ta}),t(_E,[2,112]),t(Kh,[2,401],{206:588}),t(S,[2,405],{209:589,210:590}),t(S,[2,403]),t(S,[2,404]),t(_E,[2,113]),t(_E,[2,400]),{13:d,16:f,44:215,45:yE,48:[1,591],55:220,82:J,87:h,89:lt,172:221,185:351,203:536,212:592,231:bE,234:535,236:216,237:222,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,309:M,310:P,311:217,312:C},t(mE,[2,426]),t(aD,[2,138]),t(aD,[2,139]),{232:[1,593]},t(Bf,[2,292]),{47:[1,595],48:[1,594]},t(kr,[2,9]),t(qf,[2,392]),t(qf,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:d,16:f,87:h,197:dn,308:p}),t(qf,[2,110],{272:[1,598]}),t(gE,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},t(Ze,[2,58]),t(Oe,[2,445]),t(Oe,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},t(it,[2,99]),t(wr,[2,382]),t([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),t(it,[2,188]),t(it,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:d,16:f,55:492,82:J,172:493,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,311:494,312:C,315:611},t(Se,[2,42]),t(YS,[2,304]),{13:d,16:f,55:414,82:J,95:612,171:613,172:415,173:416,174:hE,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:pE},{31:[1,614],45:Rie,94:615},t(Lr,[2,129]),t(Tie,[2,421]),{82:[1,616]},{82:[1,617]},t(Jh,[2,296]),t(Jh,[2,31]),t(Jh,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},t(S,Lf,{155:330,153:618,154:619,29:ra,31:ra,85:ra,112:ra,159:ra,160:ra,161:ra,163:ra,164:ra}),t(Fie,[2,358]),t(ea,[2,75]),t(ea,[2,76]),{29:qe,57:620},{13:d,16:f,44:39,55:40,87:h,139:621,307:43,308:p},t(Die,[2,366]),t(ea,[2,79]),{13:d,16:f,44:136,45:fe,46:622,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(ea,[2,91],{336:[1,623]}),t([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),t(Kh,[2,117]),{13:d,16:f,44:215,45:yE,55:220,82:J,87:h,89:lt,172:221,185:351,203:536,211:626,212:627,231:bE,234:535,236:216,237:222,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,309:M,310:P,311:217,312:C},t(Zi,[2,134]),t(mE,[2,427]),t(Zi,[2,135]),t(Bf,[2,26]),{44:628,87:h},t(qf,[2,106]),t(qf,[2,394]),t(S,[2,396]),t(gE,[2,111]),t(gE,[2,398]),{13:d,16:f,44:39,55:40,87:h,139:342,186:629,190:340,195:341,197:dn,307:43,308:p},t(tD,[2,217]),t(S,Je,{144:248,140:630,143:631,31:[2,343]}),t(it,[2,97]),t(wr,[2,380]),t(it,[2,180]),{13:d,16:f,44:136,45:fe,46:632,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},{13:d,16:f,44:136,45:fe,46:633,55:133,67:132,68:134,77:131,82:J,87:h,172:135,224:_e,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Fe,264:130,265:ve,266:137,267:139,268:te,269:Le,270:Ce,271:Ve,273:ge,274:we,275:146,276:G,277:D,278:149,279:j,280:I,283:N,285:B,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:Ie,346:U,347:F,348:q,349:k,350:ce,351:be},t(it,[2,190]),{290:[1,634]},{314:[1,635]},{13:d,16:f,48:[1,636],55:414,82:J,171:637,172:415,173:416,174:hE,255:154,257:155,291:150,294:X,295:H,296:K,297:z,298:Z,299:de,300:le,301:De,302:Qe,303:je,304:oe,305:se,306:ye,307:43,308:p,312:pE},t(Pie,[2,305]),t(Se,[2,86]),t(YS,[2,374]),t(Ma,[2,37]),t(Ma,[2,38]),t(Cf,[2,72]),t(Cf,[2,360]),t(ea,[2,77]),{29:qe,57:638},{47:[1,639]},{29:[2,376]},t(Kh,[2,402]),t(Kh,[2,115],{215:10,208:528,214:529,44:530,205:640,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),t(Kh,[2,118],{272:[1,641]}),t(vE,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:je,304:oe,305:se,306:ye},t(WS,[2,218]),t(YS,[2,44]),t(Pie,[2,306]),t(ea,[2,78]),{44:651,87:h},t(Kh,[2,116]),t(S,[2,406]),t(vE,[2,119]),t(vE,[2,408]),t(c,e,{215:10,205:527,208:528,214:529,44:530,202:652,87:h}),t(Bf,[2,27]),t(gE,[2,230]),t(jie,[2,345],{141:653,335:[1,654]}),t(it,[2,181]),t(it,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},t(S,Je,{144:248,142:657,143:658,31:Lie,112:Lie}),t(jie,[2,346]),t(ea,[2,80]),t(vE,[2,231]),t(Mf,[2,67]),t(Mf,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(Me,Ge){if(Ge.recoverable)this.trace(Me);else{var We=new Error(Me);throw We.hash=Ge,We}},parse:function(Me){var Ge=this,We=[0],dt=[null],yt=[],ee=this.table,On="",re=0,Ca=0,OE=2,AE=1,EE=yt.slice.call(arguments,1),mr=Object.create(this.lexer),Ri={yy:{}};for(var Qf in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Qf)&&(Ri.yy[Qf]=this.yy[Qf]);mr.setInput(Me,Ri.yy),Ri.yy.lexer=mr,Ri.yy.parser=this,typeof mr.yylloc>"u"&&(mr.yylloc={});var rp=mr.yylloc;yt.push(rp);var gD=mr.options&&mr.options.ranges;typeof Ri.yy.parseError=="function"?this.parseError=Ri.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var IE=function(){var np;return np=mr.lex()||AE,typeof np!="number"&&(np=Ge.symbols_[np]||np),np},At,$t,vt,Cr,qr={},xE,ia,kie,NE;;){if($t=We[We.length-1],this.defaultActions[$t]?vt=this.defaultActions[$t]:((At===null||typeof At>"u")&&(At=IE()),vt=ee[$t]&&ee[$t][At]),typeof vt>"u"||!vt.length||!vt[0]){var vD="";NE=[];for(xE in ee[$t])this.terminals_[xE]&&xE>OE&&NE.push("'"+this.terminals_[xE]+"'");mr.showPosition?vD="Parse error on line "+(re+1)+`:
`+mr.showPosition()+`
Expecting `+NE.join(", ")+", got '"+(this.terminals_[At]||At)+"'":vD="Parse error on line "+(re+1)+": Unexpected "+(At==AE?"end of input":"'"+(this.terminals_[At]||At)+"'"),this.parseError(vD,{text:mr.match,token:this.terminals_[At]||At,line:mr.yylineno,loc:rp,expected:NE})}if(vt[0]instanceof Array&&vt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+$t+", token: "+At);switch(vt[0]){case 1:We.push(At),dt.push(mr.yytext),yt.push(mr.yylloc),We.push(vt[1]),At=null,Ca=mr.yyleng,On=mr.yytext,re=mr.yylineno,rp=mr.yylloc;break;case 2:if(ia=this.productions_[vt[1]][1],qr.$=dt[dt.length-ia],qr._$={first_line:yt[yt.length-(ia||1)].first_line,last_line:yt[yt.length-1].last_line,first_column:yt[yt.length-(ia||1)].first_column,last_column:yt[yt.length-1].last_column},gD&&(qr._$.range=[yt[yt.length-(ia||1)].range[0],yt[yt.length-1].range[1]]),Cr=this.performAction.apply(qr,[On,Ca,re,Ri.yy,vt[1],dt,yt].concat(EE)),typeof Cr<"u")return Cr;ia&&(We=We.slice(0,-1*ia*2),dt=dt.slice(0,-1*ia),yt=yt.slice(0,-1*ia)),We.push(this.productions_[vt[1]][0]),dt.push(qr.$),yt.push(qr._$),kie=ee[We[We.length-2]][We[We.length-1]],We.push(kie);break;case 3:return!0}}return!0}},TE=j4().Wildcard,wE="http://www.w3.org/1999/02/22-rdf-syntax-ns#",F3e=wE+"type",D3e=wE+"first",P3e=wE+"rest",Mie=wE+"nil",SE="http://www.w3.org/2001/XMLSchema#",Cie=SE+"integer",qie=SE+"decimal",Bie=SE+"double",j3e=SE+"boolean",$f="",$ie="",Vie="";function un($e){return $e.toLowerCase()}function Vf($e,Me){return $e.push(Me),$e}function Wh($e,Me){return $e.push.apply($e,Me),$e}function br($e){$e||($e={});for(var Me=1,Ge=arguments.length,We;Me<Ge&&(We=arguments[Me]||{});Me++)for(var dt in We)$e[dt]=We[dt];return $e}function xi(){for(var $e=[],Me=0,Ge=arguments.length;Me<Ge;Me++)$e=$e.concat.apply($e,arguments[Me]);return $e}function ZS($e){if($e[0]==="<"&&($e=$e.substring(1,$e.length-1)),/^[a-z][a-z0-9.+-]*:/i.test($e))return $e;if(!Et.base)throw new Error("Cannot resolve relative IRI "+$e+" because no base IRI was set.");switch($f!==Et.base&&($f=Et.base,$ie=$f.replace(/[^\/:]*$/,""),Vie=$f.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),$e[0]){case void 0:return $f;case"#":return $f+$e;case"?":return $f.replace(/(?:\?.*)?$/,$e);case"/":return Vie+$e;default:return $ie+$e}}function sD($e){if($e){var Me=$e[0];if(Me==="?"||Me==="$")return Et.factory.variable($e.substr(1))}return $e}function Mr($e,Me){return{type:"operation",operator:$e,args:Me||[]}}function Yh($e,Me){var Ge={expression:$e==="*"?new TE:$e};if(Me)for(var We in Me)Ge[We]=Me[We];return Ge}function Zh($e,Me){return{type:"path",pathType:$e,items:Me}}function cD($e,Me){for(var Ge=0,We=Me.length,dt;Ge<We&&(dt=Me[Ge]);Ge++)$e=Mr(dt[0],[$e,dt[1]]);return $e}function Uf($e,Me){var Ge=[],We=[],dt=$e.length,yt,ee={};if(!dt)return null;for(var On=0;On<dt&&(yt=$e[On]);On++)(yt.named?We:Ge).push(yt.iri);return ee[Me||"from"]={default:Ge,named:We},ee}function ep($e){return parseInt($e,10)}function lD($e){return $e.type==="group"&&$e.patterns.length===1?$e.patterns[0]:$e}function Ni($e,Me){return Me&&Me.termType!=="NamedNode"&&(Me=Et.factory.namedNode(Me)),Et.factory.literal($e,Me)}function L3e($e,Me){return Et.factory.literal($e,Me)}function dD($e,Me,Ge){if(!("termType"in Me))throw new Error("Nested triples cannot contain paths");return Et.factory.quad($e,Me,Ge)}function na($e,Me,Ge,We){var dt={};return $e!=null&&(dt.subject=$e),Me!=null&&(dt.predicate=Me),Ge!=null&&(dt.object=Ge),We!=null&&(dt.annotations=We),dt}function eO($e){return typeof $e=="string"?$e.startsWith("e_")?Et.factory.blankNode($e):Et.factory.blankNode("e_"+$e):Et.factory.blankNode("g_"+Uie++)}var Uie=0;Et._resetBlanks=function(){Uie=0};var M3e=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,C3e={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},q3e=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,fD=String.fromCharCode;function Qie($e,Me){$e=$e.substring(Me,$e.length-Me);try{$e=$e.replace(M3e,function(Ge,We,dt,yt){var ee;if(We){if(ee=parseInt(We,16),isNaN(ee))throw new Error;return fD(ee)}else if(dt){if(ee=parseInt(dt,16),isNaN(ee))throw new Error;return ee<65535?fD(ee):fD(55296+((ee-=65536)>>10),56320+(ee&1023))}else{var On=C3e[yt];if(!On)throw new Error;return On}})}catch{return""}if(q3e.exec($e))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+$e);return $e}function B3e($e){var Me=eO(),Ge=Me,We=[],dt,yt=[];$e.forEach(function(Ca){We.push(Ca.entity),Wh(yt,Ca.triples)});for(var ee=0,On=0,re=We.length,dt=Array(re*2);ee<re;)dt[On++]=na(Ge,Et.factory.namedNode(D3e),We[ee]),dt[On++]=na(Ge,Et.factory.namedNode(P3e),Ge=++ee<re?eO():Et.factory.namedNode(Mie));return{entity:Me,triples:Wh(dt,yt)}}function $3e($e){var Me=eO();return{entity:Me,triples:$e.map(function(Ge){return br(na(Me),Ge)})}}function hD($e,Me,Ge){var We=[],dt=[];return Me.forEach(function(yt){let ee=null;yt.annotation&&(ee=yt.annotation,yt=yt.object),We.push(na(null,$e,yt.entity,ee)),Wh(dt,yt.triples)}),xi(We,Ge||[],dt)}function tp($e){return $e.variable?$e.variable.value:$e.value||$e.expression.value}function pD($e){if(!$e)return[];if($e.type==="aggregate")return[$e];if($e.type==="operation"){const Me=[];for(const Ge of $e.args)Me.push(...pD(Ge));return Me}return[]}function V3e($e){const Me=new Set,Ge=function(We){We&&(We.termType==="Variable"?Me.add(We):We.type==="operation"&&We.args.forEach(Ge))};return Ge($e),Me}function yD($e,Me=1,Ge=[]){for(const We of $e)Me>0&&We instanceof Array?yD(We,Me-1,Ge):Ge.push(We);return Ge}function bD($e){return $e.termType==="Variable"}function Hie($e){if($e.triples){const Me=[];for(const Ge of $e.triples)bD(Ge.subject)&&Me.push(Ge.subject.value),bD(Ge.predicate)&&Me.push(Ge.predicate.value),bD(Ge.object)&&Me.push(Ge.object.value);return Me}else if($e.patterns){const Me=[];for(const Ge of $e.patterns)Me.push(...Hie(Ge));return Me}return[]}function U3e($e){const Me=$e.slice().sort(),Ge=[];for(let We=0;We<Me.length-1;We++)Me[We+1]==Me[We]&&Ge.push(Me[We]);return Ge}function tO($e){if(!Et.sparqlStar)throw new Error("SPARQL-star support is not enabled");return $e}function Gie($e,Me,Ge){for(const We of Me){const dt=na("subject"in We?We.subject:$e,We.predicate,We.object);Ge.push(dt),We.annotations&&Gie(dD($e,We.predicate,We.object),We.annotations,Ge)}}function mD($e){if(Et.sparqlStar){const Me=[];return $e.forEach(Ge=>{const We=na(Ge.subject,Ge.predicate,Ge.object);Me.push(We),Ge.annotations&&Gie(dD(Ge.subject,Ge.predicate,Ge.object),Ge.annotations,Me)}),Me}return $e}function zie($e){for(const Me of $e){if(Me.type==="graph"&&Me.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(Me.type==="bgp"||Me.type==="graph"){for(const Ge of Me.triples)if(Ge.subject.termType==="Variable"||Ge.predicate.termType==="Variable"||Ge.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return $e}function _D($e){for(const Me of $e)if(Me.type==="bgp"){for(const Ge of Me.triples)if(Ge.subject.termType==="BlankNode"||Ge.predicate.termType==="BlankNode"||Ge.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return $e}var Q3e=function(){var $e={EOF:1,parseError:function(Ge,We){if(this.yy.parser)this.yy.parser.parseError(Ge,We);else throw new Error(Ge)},setInput:function(Me,Ge){return this.yy=Ge||this.yy||{},this._input=Me,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Me=this._input[0];this.yytext+=Me,this.yyleng++,this.offset++,this.match+=Me,this.matched+=Me;var Ge=Me.match(/(?:\r\n?|\n).*/g);return Ge?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Me},unput:function(Me){var Ge=Me.length,We=Me.split(/(?:\r\n?|\n)/g);this._input=Me+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ge),this.offset-=Ge;var dt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),We.length-1&&(this.yylineno-=We.length-1);var yt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:We?(We.length===dt.length?this.yylloc.first_column:0)+dt[dt.length-We.length].length-We[0].length:this.yylloc.first_column-Ge},this.options.ranges&&(this.yylloc.range=[yt[0],yt[0]+this.yyleng-Ge]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Me){this.unput(this.match.slice(Me))},pastInput:function(){var Me=this.matched.substr(0,this.matched.length-this.match.length);return(Me.length>20?"...":"")+Me.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Me=this.match;return Me.length<20&&(Me+=this._input.substr(0,20-Me.length)),(Me.substr(0,20)+(Me.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Me=this.pastInput(),Ge=new Array(Me.length+1).join("-");return Me+this.upcomingInput()+`
`+Ge+"^"},test_match:function(Me,Ge){var We,dt,yt;if(this.options.backtrack_lexer&&(yt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(yt.yylloc.range=this.yylloc.range.slice(0))),dt=Me[0].match(/(?:\r\n?|\n).*/g),dt&&(this.yylineno+=dt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:dt?dt[dt.length-1].length-dt[dt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Me[0].length},this.yytext+=Me[0],this.match+=Me[0],this.matches=Me,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Me[0].length),this.matched+=Me[0],We=this.performAction.call(this,this.yy,this,Ge,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),We)return We;if(this._backtrack){for(var ee in yt)this[ee]=yt[ee];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Me,Ge,We,dt;this._more||(this.yytext="",this.match="");for(var yt=this._currentRules(),ee=0;ee<yt.length;ee++)if(We=this._input.match(this.rules[yt[ee]]),We&&(!Ge||We[0].length>Ge[0].length)){if(Ge=We,dt=ee,this.options.backtrack_lexer){if(Me=this.test_match(We,yt[ee]),Me!==!1)return Me;if(this._backtrack){Ge=!1;continue}else return!1}else if(!this.options.flex)break}return Ge?(Me=this.test_match(Ge,yt[dt]),Me!==!1?Me:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Ge=this.next();return Ge||this.lex()},begin:function(Ge){this.conditionStack.push(Ge)},popState:function(){var Ge=this.conditionStack.length-1;return Ge>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ge){return Ge=this.conditionStack.length-1-Math.abs(Ge||0),Ge>=0?this.conditionStack[Ge]:"INITIAL"},pushState:function(Ge){this.begin(Ge)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Ge,We,dt,yt){switch(dt){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(We.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return $e}();oD.lexer=Q3e;function Et(){this.yy={}}return Et.prototype=oD,oD.Parser=Et,new Et}();return ox=a,ox}var sx,M4;function eoe(){if(M4)return sx;M4=1;var a="http://www.w3.org/2001/XMLSchema#integer",t="http://www.w3.org/2001/XMLSchema#string";function u(f){this._options=f=f||{};var h=f.prefixes||{};this._prefixByIri={};var p=[];for(var b in h){var _=h[b];o(_)&&(this._prefixByIri[_]=b,p.push(_))}var y=p.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+y+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=f.sparqlStar,this._indent=o(f.indent)?f.indent:"  ",this._newline=o(f.newline)?f.newline:`
`,this._explicitDatatype=!!f.explicitDatatype}u.prototype.toQuery=function(f){var h="";return f.queryType&&(h+=f.queryType.toUpperCase()+" "),f.reduced&&(h+="REDUCED "),f.distinct&&(h+="DISTINCT "),f.variables?h+=l(f.variables,void 0,function(p){return/^[?$]/.test(p)?p:c(p)?this.toEntity(p):"("+this.toExpression(p.expression)+" AS "+i(p.variable)+")"},this)+" ":f.template&&(h+=this.group(f.template,!0)+this._newline),f.from&&(h+=this.graphs("FROM ",f.from.default)+this.graphs("FROM NAMED ",f.from.named)),f.where&&(h+="WHERE "+this.group(f.where,!0)+this._newline),f.updates&&(h+=l(f.updates,";"+this._newline,this.toUpdate,this)),f.group&&(h+="GROUP BY "+l(f.group,void 0,function(p){var b=c(p.expression)?this.toEntity(p.expression):"("+this.toExpression(p.expression)+")";return p.variable?"("+b+" AS "+i(p.variable)+")":b},this)+this._newline),f.having&&(h+="HAVING ("+l(f.having,void 0,this.toExpression,this)+")"+this._newline),f.order&&(h+="ORDER BY "+l(f.order,void 0,function(p){var b="("+this.toExpression(p.expression)+")";return p.descending?"DESC "+b:b},this)+this._newline),f.offset&&(h+="OFFSET "+f.offset+this._newline),f.limit&&(h+="LIMIT "+f.limit+this._newline),f.values&&(h+=this.values(f)),h=this.baseAndPrefixes(f)+h,h.trim()},u.prototype.baseAndPrefixes=function(f){var h=f.base?"BASE <"+f.base+">"+this._newline:"",p="";for(var b in f.prefixes)(this._options.allPrefixes||this._usedPrefixes[b])&&(p+="PREFIX "+b+": <"+f.prefixes[b]+">"+this._newline);return h+p},u.prototype.toPattern=function(f){var h=f.type||f instanceof Array&&"array"||(f.subject&&f.predicate&&f.object?"triple":"");if(!(h in this))throw new Error("Unknown entry type: "+h);return this[h](f)},u.prototype.triple=function(f){return this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+"."},u.prototype.array=function(f){return l(f,this._newline,this.toPattern,this)},u.prototype.bgp=function(f){return this.encodeTriples(f.triples)},u.prototype.encodeTriples=function(f){if(!f.length)return"";for(var h=[],p=void 0,b=void 0,_=0;_<f.length;_++){var y=f[_];s(y.subject,p)?s(y.predicate,b)?h.push(","):(b=y.predicate,h.push(";"+this._newline,this._indent,this.toEntity(b))):(p&&h.push("."+this._newline),p=y.subject,b=y.predicate,h.push(this.toEntity(p)," ",this.toEntity(b))),h.push(" ",this.toEntity(y.object))}return h.push("."),h.join("")},u.prototype.graph=function(f){return"GRAPH "+this.toEntity(f.name)+" "+this.group(f)},u.prototype.graphs=function(f,h){return!h||h.length===0?"":l(h,"",function(p){return f+this.toEntity(p)+this._newline},this)},u.prototype.group=function(f,h){return f=h!==!0?this.array(f.patterns||f.triples):this.toPattern(f.type!=="group"?f:f.patterns),f.indexOf(this._newline)===-1?"{ "+f+" }":"{"+this._newline+this.indent(f)+this._newline+"}"},u.prototype.query=function(f){return this.toQuery(f)},u.prototype.filter=function(f){return"FILTER("+this.toExpression(f.expression)+")"},u.prototype.bind=function(f){return"BIND("+this.toExpression(f.expression)+" AS "+i(f.variable)+")"},u.prototype.optional=function(f){return"OPTIONAL "+this.group(f)},u.prototype.union=function(f){return l(f.patterns,this._newline+"UNION"+this._newline,function(h){return this.group(h,!0)},this)},u.prototype.minus=function(f){return"MINUS "+this.group(f)},u.prototype.values=function(f){var h=Object.keys(f.values.reduce(function(_,y){for(var g in y)_[g]=!0;return _},{})),p,b;return h.length===1?p=b="":(p="(",b=")"),"VALUES "+p+h.join(" ")+b+" {"+this._newline+l(f.values,this._newline,function(_){return"  "+p+l(h,void 0,function(y){return _[y]?this.toEntity(_[y]):"UNDEF"},this)+b},this)+this._newline+"}"},u.prototype.service=function(f){return"SERVICE "+(f.silent?"SILENT ":"")+this.toEntity(f.name)+" "+this.group(f)},u.prototype.toExpression=function(f){if(c(f))return this.toEntity(f);switch(f.type.toLowerCase()){case"aggregate":return f.aggregation.toUpperCase()+"("+(f.distinct?"DISTINCT ":"")+this.toExpression(f.expression)+(typeof f.separator=="string"?'; SEPARATOR = "'+f.separator.replace(n,r)+'"':"")+")";case"functioncall":return this.toEntity(f.function)+"("+l(f.args,", ",this.toExpression,this)+")";case"operation":var h=f.operator.toUpperCase(),p=f.args||[];switch(f.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(c(p[0])?this.toEntity(p[0]):"("+this.toExpression(p[0])+")")+" "+h+" "+(c(p[1])?this.toEntity(p[1]):"("+this.toExpression(p[1])+")");case"!":return"!("+this.toExpression(p[0])+")";case"uplus":return"+("+this.toExpression(p[0])+")";case"uminus":return"-("+this.toExpression(p[0])+")";case"notin":h="NOT IN";case"in":return this.toExpression(p[0])+" "+h+"("+(o(p[1])?p[1]:l(p[1],", ",this.toExpression,this))+")";case"notexists":h="NOT EXISTS";case"exists":return h+" "+this.group(p[0],!0);default:return h+"("+l(p,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+f.type)}},u.prototype.toEntity=function(f){if(c(f))switch(f.termType){case"Wildcard":return"*";case"Variable":return i(f);case"BlankNode":return"_:"+f.value;case"Literal":var h=f.value||"",p=f.language||"",b=f.datatype;if(f='"'+h.replace(n,r)+'"',p)f+="@"+p;else if(b){if(!this._explicitDatatype)switch(b.value){case t:return f;case a:if(/^\d+$/.test(h))return h+" "}f+="^^"+this.encodeIRI(b.value)}return f;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return f.graph&&f.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(f.graph)+" { "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" }  >>":"<< "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" >>";default:return this.encodeIRI(f.value)}else{var _=f.items.map(this.toEntity,this),y=f.pathType;switch(y){case"^":case"!":return y+_[0];case"*":case"+":case"?":return"("+_[0]+y+")";default:return"("+_.join(y)+")"}}};var n=/["\\\t\n\r\b\f]/g,r=function(f){return e[f]},e={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};u.prototype.encodeIRI=function(f){var h=this._prefixRegex.exec(f);if(h){var p=this._prefixByIri[h[1]];return this._usedPrefixes[p]=!0,p+":"+h[2]}return"<"+f+">"},u.prototype.toUpdate=function(f){switch(f.type||f.updateType){case"load":return"LOAD"+(f.source?" "+this.toEntity(f.source):"")+(f.destination?" INTO GRAPH "+this.toEntity(f.destination):"");case"insert":return"INSERT DATA "+this.group(f.insert,!0);case"delete":return"DELETE DATA "+this.group(f.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(f.delete,!0);case"insertdelete":return(f.graph?"WITH "+this.toEntity(f.graph)+this._newline:"")+(f.delete.length?"DELETE "+this.group(f.delete,!0)+this._newline:"")+(f.insert.length?"INSERT "+this.group(f.insert,!0)+this._newline:"")+(f.using?this.graphs("USING ",f.using.default):"")+(f.using?this.graphs("USING NAMED ",f.using.named):"")+"WHERE "+this.group(f.where,!0);case"add":case"copy":case"move":return f.type.toUpperCase()+" "+(f.silent?"SILENT ":"")+(f.source.default?"DEFAULT":this.toEntity(f.source.name))+" TO "+this.toEntity(f.destination.name);case"create":case"clear":case"drop":return f.type.toUpperCase()+(f.silent?" SILENT ":" ")+(f.graph.default?"DEFAULT":f.graph.named?"NAMED":f.graph.all?"ALL":"GRAPH "+this.toEntity(f.graph.name));default:throw new Error("Unknown update query type: "+f.type)}},u.prototype.indent=function(f){return f.replace(/^/gm,this._indent)};function i(f){return"?"+f.value}function o(f){return typeof f=="string"}function c(f){return typeof f.termType=="string"}function s(f,h){if(!f||!c(f)||!h||!c(h)||f.termType!==h.termType)return!1;switch(f.termType){case"Literal":return f.value===h.value&&f.language===h.language&&s(f.datatype,h.datatype);case"Quad":return s(f.subject,h.subject)&&s(f.predicate,h.predicate)&&s(f.object,h.object)&&s(f.graph,h.graph);default:return f.value===h.value}}function l(f,h,p,b){return f.map(p,b).join(o(h)?h:" ")}function d(f={}){return{stringify:function(h){var p=Object.create(f);return p.prefixes=h.prefixes,new u(p).toQuery(h)},createGenerator:function(){return new u(f)}}}return sx={Generator:d},sx}var su={},l0={},C4;function q4(){if(C4)return l0;C4=1,Object.defineProperty(l0,"__esModule",{value:!0}),l0.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return l0.BlankNode=a,l0}var d0={},f0={},B4;function $4(){if(B4)return f0;B4=1,Object.defineProperty(f0,"__esModule",{value:!0}),f0.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return f0.DefaultGraph=a,a.INSTANCE=new a,f0}var h0={},p0={},V4;function cx(){if(V4)return p0;V4=1,Object.defineProperty(p0,"__esModule",{value:!0}),p0.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return p0.NamedNode=a,p0}var U4;function Q4(){if(U4)return h0;U4=1,Object.defineProperty(h0,"__esModule",{value:!0}),h0.Literal=void 0;const a=cx();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return h0.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),h0}var y0={},H4;function G4(){if(H4)return y0;H4=1,Object.defineProperty(y0,"__esModule",{value:!0}),y0.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return y0.Quad=a,y0}var b0={},z4;function k4(){if(z4)return b0;z4=1,Object.defineProperty(b0,"__esModule",{value:!0}),b0.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return b0.Variable=a,b0}var X4;function toe(){if(X4)return d0;X4=1,Object.defineProperty(d0,"__esModule",{value:!0}),d0.DataFactory=void 0;const a=q4(),t=$4(),u=Q4(),n=cx(),r=G4(),e=k4();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return d0.DataFactory=o,d0}var J4;function roe(){return J4||(J4=1,function(a){var t=su&&su.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=su&&su.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(q4(),a),u(toe(),a),u($4(),a),u(Q4(),a),u(cx(),a),u(G4(),a),u(k4(),a)}(su)),su}var lx,K4;function m0(){if(K4)return lx;K4=1;const{Parser:a}=Zue(),{Generator:t}=eoe(),{Wildcard:u}=j4(),{DataFactory:n}=roe();function r({prefixes:e,baseIRI:i,factory:o,pathOnly:c,sparqlStar:s,skipValidation:l,skipUngroupedVariableCheck:d}={}){const f={};for(const p in e??{})f[p]=e[p];const h=new a;return h.parse=function(){return a.base=i||"",a.prefixes=Object.create(f),a.factory=o||new n,a.sparqlStar=!!s,a.pathOnly=!!c,a.skipValidation=!!l||!!d,a.prototype.parse.apply(h,arguments)},h._resetBlanks=a._resetBlanks,h}return lx={Parser:r,Generator:t,Wildcard:u},lx}var W4;function PO(){if(W4)return _i;W4=1;var a=_i&&_i.__createBinding||(Object.create?function(c,s,l,d){d===void 0&&(d=l);var f=Object.getOwnPropertyDescriptor(s,l);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(c,d,f)}:function(c,s,l,d){d===void 0&&(d=l),c[d]=s[l]}),t=_i&&_i.__setModuleDefault||(Object.create?function(c,s){Object.defineProperty(c,"default",{enumerable:!0,value:s})}:function(c,s){c.default=s}),u=_i&&_i.__importStar||function(c){if(c&&c.__esModule)return c;var s={};if(c!=null)for(var l in c)l!=="default"&&Object.prototype.hasOwnProperty.call(c,l)&&a(s,c,l);return t(s,c),s};Object.defineProperty(_i,"__esModule",{value:!0});const n=u(r0()),r=Yue(),e=ir(),i=m0();class o{constructor(s){this.dataFactory=s||new r.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,l=!0){return this.flattenMulti({type:n.types.ALT,input:s},l)}createAsk(s){return{type:n.types.ASK,input:s}}createBoundAggregate(s,l,d,f,h){const p=this.createAggregateExpression(l,d,f,h);return p.variable=s,p}createBgp(s){return{type:n.types.BGP,patterns:s}}createConstruct(s,l){return{type:n.types.CONSTRUCT,input:s,template:l}}createDescribe(s,l){return{type:n.types.DESCRIBE,input:s,terms:l}}createDistinct(s){return{type:n.types.DISTINCT,input:s}}createExtend(s,l,d){return{type:n.types.EXTEND,input:s,variable:l,expression:d}}createFrom(s,l,d){return{type:n.types.FROM,input:s,default:l,named:d}}createFilter(s,l){return{type:n.types.FILTER,input:s,expression:l}}createGraph(s,l){return{type:n.types.GRAPH,input:s,name:l}}createGroup(s,l,d){return{type:n.types.GROUP,input:s,variables:l,aggregates:d}}createInv(s){return{type:n.types.INV,path:s}}createJoin(s,l=!0){return this.flattenMulti({type:n.types.JOIN,input:s},l)}createLeftJoin(s,l,d){return d?{type:n.types.LEFT_JOIN,input:[s,l],expression:d}:{type:n.types.LEFT_JOIN,input:[s,l]}}createLink(s){return{type:n.types.LINK,iri:s}}createMinus(s,l){return{type:n.types.MINUS,input:[s,l]}}createNop(){return{type:n.types.NOP}}createNps(s){return{type:n.types.NPS,iris:s}}createOneOrMorePath(s){return{type:n.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,l){return{type:n.types.ORDER_BY,input:s,expressions:l}}createPath(s,l,d,f){return f?{type:n.types.PATH,subject:s,predicate:l,object:d,graph:f}:{type:n.types.PATH,subject:s,predicate:l,object:d,graph:this.dataFactory.defaultGraph()}}createPattern(s,l,d,f){const h=this.dataFactory.quad(s,l,d,f);return h.type=n.types.PATTERN,h}createProject(s,l){return{type:n.types.PROJECT,input:s,variables:l}}createReduced(s){return{type:n.types.REDUCED,input:s}}createSeq(s,l=!0){return this.flattenMulti({type:n.types.SEQ,input:s},l)}createService(s,l,d){return{type:n.types.SERVICE,input:s,name:l,silent:!!d}}createSlice(s,l,d){return l=l||0,d!==void 0?{type:n.types.SLICE,input:s,start:l,length:d}:{type:n.types.SLICE,input:s,start:l}}createUnion(s,l=!0){return this.flattenMulti({type:n.types.UNION,input:s},l)}createValues(s,l){return{type:n.types.VALUES,variables:s,bindings:l}}createZeroOrMorePath(s){return{type:n.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:n.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,l,d,f){return f?{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:l,separator:f,distinct:d}:{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:l,distinct:d}}createExistenceExpression(s,l){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.EXISTENCE,not:s,input:l}}createNamedExpression(s,l){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.NAMED,name:s,args:l}}createOperatorExpression(s,l){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.OPERATOR,operator:s,args:l}}createTermExpression(s){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.WILDCARD,wildcard:new i.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,e.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:n.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,l,d){const f={type:n.types.DELETE_INSERT};return s&&(f.delete=s),l&&(f.insert=l),d&&(f.where=d),f}createLoad(s,l,d){const f={type:n.types.LOAD,source:s};return l&&(f.destination=l),this.addSilent(f,!!d)}createClear(s,l){return this.addSilent({type:n.types.CLEAR,source:s},!!l)}createCreate(s,l){return this.addSilent({type:n.types.CREATE,source:s},!!l)}createDrop(s,l){return this.addSilent({type:n.types.DROP,source:s},!!l)}createAdd(s,l,d){return this.addSilent({type:n.types.ADD,source:s,destination:l},!!d)}createMove(s,l,d){return this.addSilent({type:n.types.MOVE,source:s,destination:l},!!d)}createCopy(s,l,d){return this.addSilent({type:n.types.COPY,source:s,destination:l},!!d)}addSilent(s,l){return l&&(s.silent=l),s}flattenMulti(s,l){if(!l)return s;const d=s.type,f=s.input;let h=[];for(const p of f)p.type===d?h.push(...p.input):h.push(p);return s.input=h,s}}return _i.default=o,_i}var hh={},cu={},ft={},lu={},_0={},Y4;function Z4(){if(Y4)return _0;Y4=1,Object.defineProperty(_0,"__esModule",{value:!0}),_0.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return _0.BlankNode=a,_0}var g0={},v0={},ej;function tj(){if(ej)return v0;ej=1,Object.defineProperty(v0,"__esModule",{value:!0}),v0.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return v0.DefaultGraph=a,a.INSTANCE=new a,v0}var T0={},w0={},rj;function dx(){if(rj)return w0;rj=1,Object.defineProperty(w0,"__esModule",{value:!0}),w0.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return w0.NamedNode=a,w0}var nj;function ij(){if(nj)return T0;nj=1,Object.defineProperty(T0,"__esModule",{value:!0}),T0.Literal=void 0;const a=dx();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return T0.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),T0}var S0={},aj;function uj(){if(aj)return S0;aj=1,Object.defineProperty(S0,"__esModule",{value:!0}),S0.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return S0.Quad=a,S0}var O0={},oj;function sj(){if(oj)return O0;oj=1,Object.defineProperty(O0,"__esModule",{value:!0}),O0.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return O0.Variable=a,O0}var cj;function noe(){if(cj)return g0;cj=1,Object.defineProperty(g0,"__esModule",{value:!0}),g0.DataFactory=void 0;const a=Z4(),t=tj(),u=ij(),n=dx(),r=uj(),e=sj();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return g0.DataFactory=o,g0}var lj;function ioe(){return lj||(lj=1,function(a){var t=lu&&lu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=lu&&lu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Z4(),a),u(noe(),a),u(tj(),a),u(ij(),a),u(dx(),a),u(uj(),a),u(sj(),a)}(lu)),lu}var dj;function fj(){if(dj)return ft;dj=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.matchPatternMappings=ft.matchPatternComplete=ft.matchPattern=ft.matchTerm=ft.getValueNestedPath=ft.someTermsNested=ft.someTerms=ft.everyTermsNested=ft.everyTerms=ft.reduceTermsNested=ft.reduceTerms=ft.mapTermsNested=ft.mapTerms=ft.filterQuadTermNamesNested=ft.filterQuadTermNames=ft.filterTermsNested=ft.filterTerms=ft.forEachTermsNested=ft.forEachTerms=ft.collectNamedTerms=ft.getNamedTerms=ft.getTermsNested=ft.getTerms=ft.TRIPLE_TERM_NAMES=ft.QUAD_TERM_NAMES=void 0;const a=ioe(),t=new a.DataFactory;ft.QUAD_TERM_NAMES=["subject","predicate","object","graph"],ft.TRIPLE_TERM_NAMES=["subject","predicate","object"];function u(O,w){return w&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}ft.getTerms=u;function n(O,w){const A=[];for(const E of u(O,w))E.termType==="Quad"?n(E,w).forEach(R=>A.push(R)):A.push(E);return A}ft.getTermsNested=n;function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}ft.getNamedTerms=r;function e(O,w,A){const E={};return O.forEach(R=>E[R.key]=R.value),w&&(E.subject=E.subject||w("subject"),E.predicate=E.predicate||w("predicate"),E.object=E.object||w("object"),E.graph=E.graph||w("graph")),(A||t).quad(E.subject,E.predicate,E.object,E.graph)}ft.collectNamedTerms=e;function i(O,w){w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph")}ft.forEachTerms=i;function o(O,w,A=[]){O.subject.termType==="Quad"?o(O.subject,w,[...A,"subject"]):w(O.subject,[...A,"subject"]),O.predicate.termType==="Quad"?o(O.predicate,w,[...A,"predicate"]):w(O.predicate,[...A,"predicate"]),O.object.termType==="Quad"?o(O.object,w,[...A,"object"]):w(O.object,[...A,"object"]),O.graph.termType==="Quad"?o(O.graph,w,[...A,"graph"]):w(O.graph,[...A,"graph"])}ft.forEachTermsNested=o;function c(O,w){const A=[];return w(O.subject,"subject")&&A.push(O.subject),w(O.predicate,"predicate")&&A.push(O.predicate),w(O.object,"object")&&A.push(O.object),w(O.graph,"graph")&&A.push(O.graph),A}ft.filterTerms=c;function s(O,w,A=[]){let E=[];return O.subject.termType==="Quad"?E=[...E,...s(O.subject,w,[...A,"subject"])]:w(O.subject,[...A,"subject"])&&E.push(O.subject),O.predicate.termType==="Quad"?E=[...E,...s(O.predicate,w,[...A,"predicate"])]:w(O.predicate,[...A,"predicate"])&&E.push(O.predicate),O.object.termType==="Quad"?E=[...E,...s(O.object,w,[...A,"object"])]:w(O.object,[...A,"object"])&&E.push(O.object),O.graph.termType==="Quad"?E=[...E,...s(O.graph,w,[...A,"graph"])]:w(O.graph,[...A,"graph"])&&E.push(O.graph),E}ft.filterTermsNested=s;function l(O,w){const A=[];return w(O.subject,"subject")&&A.push("subject"),w(O.predicate,"predicate")&&A.push("predicate"),w(O.object,"object")&&A.push("object"),w(O.graph,"graph")&&A.push("graph"),A}ft.filterQuadTermNames=l;function d(O,w,A=[]){let E=[];const R=[...A,"subject"];O.subject.termType==="Quad"?E=[...E,...d(O.subject,w,R)]:w(O.subject,R)&&E.push(R);const V=[...A,"predicate"];O.predicate.termType==="Quad"?E=[...E,...d(O.predicate,w,V)]:w(O.predicate,V)&&E.push(V);const $=[...A,"object"];O.object.termType==="Quad"?E=[...E,...d(O.object,w,$)]:w(O.object,$)&&E.push($);const Q=[...A,"graph"];return O.graph.termType==="Quad"?E=[...E,...d(O.graph,w,Q)]:w(O.graph,Q)&&E.push(Q),E}ft.filterQuadTermNamesNested=d;function f(O,w,A){return(A||t).quad(w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph"))}ft.mapTerms=f;function h(O,w,A,E=[]){return(A||t).quad(O.subject.termType==="Quad"?h(O.subject,w,A,[...E,"subject"]):w(O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,w,A,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?h(O.object,w,A,[...E,"object"]):w(O.object,[...E,"object"]),O.graph.termType==="Quad"?h(O.graph,w,A,[...E,"graph"]):w(O.graph,[...E,"graph"]))}ft.mapTermsNested=h;function p(O,w,A){let E=A;return E=w(E,O.subject,"subject"),E=w(E,O.predicate,"predicate"),E=w(E,O.object,"object"),w(E,O.graph,"graph")}ft.reduceTerms=p;function b(O,w,A,E=[]){let R=A;return O.subject.termType==="Quad"?R=b(O.subject,w,R,[...E,"subject"]):R=w(R,O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?R=b(O.predicate,w,R,[...E,"predicate"]):R=w(R,O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?R=b(O.object,w,R,[...E,"object"]):R=w(R,O.object,[...E,"object"]),O.graph.termType==="Quad"?R=b(O.graph,w,R,[...E,"graph"]):R=w(R,O.graph,[...E,"graph"]),R}ft.reduceTermsNested=b;function _(O,w){return w(O.subject,"subject")&&w(O.predicate,"predicate")&&w(O.object,"object")&&w(O.graph,"graph")}ft.everyTerms=_;function y(O,w,A=[]){return(O.subject.termType==="Quad"?y(O.subject,w,[...A,"subject"]):w(O.subject,[...A,"subject"]))&&(O.predicate.termType==="Quad"?y(O.predicate,w,[...A,"predicate"]):w(O.predicate,[...A,"predicate"]))&&(O.object.termType==="Quad"?y(O.object,w,[...A,"object"]):w(O.object,[...A,"object"]))&&(O.graph.termType==="Quad"?y(O.graph,w,[...A,"graph"]):w(O.graph,[...A,"graph"]))}ft.everyTermsNested=y;function g(O,w){return w(O.subject,"subject")||w(O.predicate,"predicate")||w(O.object,"object")||w(O.graph,"graph")}ft.someTerms=g;function m(O,w,A=[]){return(O.subject.termType==="Quad"?m(O.subject,w,[...A,"subject"]):w(O.subject,[...A,"subject"]))||(O.predicate.termType==="Quad"?m(O.predicate,w,[...A,"predicate"]):w(O.predicate,[...A,"predicate"]))||(O.object.termType==="Quad"?m(O.object,w,[...A,"object"]):w(O.object,[...A,"object"]))||(O.graph.termType==="Quad"?m(O.graph,w,[...A,"graph"]):w(O.graph,[...A,"graph"]))}ft.someTermsNested=m;function v(O,w){if(w.length===0)return O;if(O.termType==="Quad")return v(O[w[0]],w.slice(1));throw new Error(`Tried to get ${w[0]} from term of type ${O.termType}`)}ft.getValueNestedPath=v;function T(O,w){return!w||w.termType==="Variable"||w.termType==="Quad"&&O.termType==="Quad"&&x(O,w)||w.equals(O)}ft.matchTerm=T;function S(O,w,A,E,R){return T(O.subject,w)&&T(O.predicate,A)&&T(O.object,E)&&T(O.graph,R)}ft.matchPattern=S;function x(O,w){return S(O,w.subject,w.predicate,w.object,w.graph)}ft.matchPatternComplete=x;function L(O,w,A={}){const E={};function R(V,$){return _(V,(Q,ne)=>{var ie,fe;const J=$[ne];switch(Q.termType){case"Variable":return A.skipVarMapping&&J.termType==="Variable"||((fe=(ie=E[Q.value])===null||ie===void 0?void 0:ie.equals(J))!==null&&fe!==void 0?fe:(E[Q.value]=J,!0));case"Quad":return J.termType==="Quad"&&R(Q,J);default:return Q.equals(J)}})}return R(w,O)&&(A.returnMappings?E:!0)}return ft.matchPatternMappings=L,ft}var pr={},hj;function aoe(){if(hj)return pr;hj=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.getQuads=pr.getDefaultGraphs=pr.getVariables=pr.getLiterals=pr.getBlankNodes=pr.getNamedNodes=pr.getTermsOfType=pr.uniqTerms=pr.TERM_TYPES=void 0;const a=ir();pr.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function t(s){const l={};return s.filter(d=>{const f=(0,a.termToString)(d);return!(f in l)&&(l[f]=!0)})}pr.uniqTerms=t;function u(s,l){return s.filter(d=>d.termType===l)}pr.getTermsOfType=u;function n(s){return u(s,"NamedNode")}pr.getNamedNodes=n;function r(s){return u(s,"BlankNode")}pr.getBlankNodes=r;function e(s){return u(s,"Literal")}pr.getLiterals=e;function i(s){return u(s,"Variable")}pr.getVariables=i;function o(s){return u(s,"DefaultGraph")}pr.getDefaultGraphs=o;function c(s){return u(s,"Quad")}return pr.getQuads=c,pr}var pj;function Fn(){return pj||(pj=1,function(a){var t=cu&&cu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=cu&&cu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(fj(),a),u(aoe(),a)}(cu)),cu}var yj;function fx(){if(yj)return hh;yj=1;var a=hh&&hh.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hh,"__esModule",{value:!0});const t=r0(),u=a(PO()),n=Fn();class r{static flatten(i){return Array.prototype.concat(...i).filter(o=>o)}static objectify(i){if(i.termType){if(i.termType==="Quad")return{type:"pattern",termType:"Quad",subject:r.objectify(i.subject),predicate:r.objectify(i.predicate),object:r.objectify(i.object),graph:r.objectify(i.graph)};{let o={termType:i.termType,value:i.value};return i.language&&(o.language=i.language),i.datatype&&(o.datatype=r.objectify(i.datatype)),o}}if(Array.isArray(i))return i.map(o=>r.objectify(o));if(i===Object(i)){let o={};for(let c of Object.keys(i))o[c]=r.objectify(i[c]);return o}return i}static inScopeVariables(i){const o=[];function c(l){o.find(d=>l.value===d.value)||o.push(l)}function s(l){l.subject.termType==="Variable"&&c(l.subject),l.predicate.termType==="Variable"&&c(l.predicate),l.object.termType==="Variable"&&c(l.object),l.graph.termType==="Variable"&&c(l.graph),l.subject.termType==="Quad"&&s(l.subject),l.predicate.termType==="Quad"&&s(l.predicate),l.object.termType==="Quad"&&s(l.object),l.graph.termType==="Quad"&&s(l.graph)}return r.recurseOperation(i,{[t.types.EXPRESSION]:l=>(l.expressionType===t.expressionTypes.AGGREGATE&&l.variable&&c(l.variable),!0),[t.types.EXTEND]:l=>(c(l.variable),!0),[t.types.GRAPH]:l=>(l.name.termType==="Variable"&&c(l.name),!0),[t.types.GROUP]:l=>(l.variables.forEach(c),!0),[t.types.PATH]:l=>(l.subject.termType==="Variable"&&c(l.subject),l.object.termType==="Variable"&&c(l.object),l.graph.termType==="Variable"&&c(l.graph),l.subject.termType==="Quad"&&s(l.subject),l.object.termType==="Quad"&&s(l.object),l.graph.termType==="Quad"&&s(l.graph),!0),[t.types.PATTERN]:l=>(s(l),!0),[t.types.PROJECT]:l=>(l.variables.forEach(c),!1),[t.types.SERVICE]:l=>(l.name.termType==="Variable"&&c(l.name),!0),[t.types.VALUES]:l=>(l.variables.forEach(c),!0)}),o}static recurseOperation(i,o){let c=i,s=!0;const l=o[i.type];if(l&&(s=l(i)),!s)return;let d=f=>r.recurseOperation(f,o);switch(c.type){case t.types.ALT:c.input.map(d);break;case t.types.ASK:d(c.input);break;case t.types.BGP:c.patterns.forEach(d);break;case t.types.CONSTRUCT:d(c.input),c.template.map(d);break;case t.types.DESCRIBE:d(c.input);break;case t.types.DISTINCT:d(c.input);break;case t.types.EXPRESSION:c.expressionType===t.expressionTypes.EXISTENCE&&d(c.input);break;case t.types.EXTEND:d(c.input),d(c.expression);break;case t.types.FILTER:d(c.input),d(c.expression);break;case t.types.FROM:d(c.input);break;case t.types.GRAPH:d(c.input);break;case t.types.GROUP:d(c.input),c.aggregates.forEach(d);break;case t.types.INV:d(c.path);break;case t.types.JOIN:c.input.map(d);break;case t.types.LEFT_JOIN:c.input.map(d),c.expression&&d(c.expression);break;case t.types.LINK:break;case t.types.MINUS:c.input.map(d);break;case t.types.NOP:break;case t.types.NPS:break;case t.types.ONE_OR_MORE_PATH:d(c.path);break;case t.types.ORDER_BY:d(c.input),c.expressions.forEach(d);break;case t.types.PATH:d(c.predicate);break;case t.types.PATTERN:break;case t.types.PROJECT:d(c.input);break;case t.types.REDUCED:d(c.input);break;case t.types.SEQ:c.input.map(d);break;case t.types.SERVICE:d(c.input);break;case t.types.SLICE:d(c.input);break;case t.types.UNION:c.input.map(d);break;case t.types.VALUES:break;case t.types.ZERO_OR_MORE_PATH:d(c.path);break;case t.types.ZERO_OR_ONE_PATH:d(c.path);break;case t.types.COMPOSITE_UPDATE:c.updates.forEach(f=>d(f));break;case t.types.DELETE_INSERT:c.delete&&c.delete.forEach(f=>d(f)),c.insert&&c.insert.forEach(f=>d(f)),c.where&&d(c.where);break;case t.types.LOAD:break;case t.types.CLEAR:break;case t.types.CREATE:break;case t.types.DROP:break;case t.types.ADD:break;case t.types.MOVE:break;case t.types.COPY:break;default:throw new Error(`Unknown Operation type ${c.type}`)}}static mapOperation(i,o,c){let s=i,l=!0,d=!0;c=c||new u.default;const f=o[i.type];if(f){const b=f(i,c);s=b.result,l=b.recurse,d=b.copyMetadata!==!1}let h;if(d&&(s.metadata||i.metadata)&&(h={...s.metadata,...i.metadata}),!l)return h&&(s.metadata=h),s;let p=b=>r.mapOperation(b,o,c);switch(s.type){case t.types.ALT:s=c.createAlt(s.input.map(p));break;case t.types.ASK:s=c.createAsk(p(s.input));break;case t.types.BGP:s=c.createBgp(s.patterns.map(p));break;case t.types.CONSTRUCT:s=c.createConstruct(p(s.input),s.template.map(p));break;case t.types.DESCRIBE:s=c.createDescribe(p(s.input),s.terms);break;case t.types.DISTINCT:s=c.createDistinct(p(s.input));break;case t.types.EXPRESSION:s=r.mapExpression(s,o,c);break;case t.types.EXTEND:s=c.createExtend(p(s.input),s.variable,p(s.expression));break;case t.types.FILTER:s=c.createFilter(p(s.input),p(s.expression));break;case t.types.FROM:s=c.createFrom(p(s.input),[...s.default],[...s.named]);break;case t.types.GRAPH:s=c.createGraph(p(s.input),s.name);break;case t.types.GROUP:s=c.createGroup(p(s.input),[].concat(s.variables),s.aggregates.map(p));break;case t.types.INV:s=c.createInv(p(s.path));break;case t.types.JOIN:s=c.createJoin(s.input.map(p));break;case t.types.LEFT_JOIN:s=c.createLeftJoin(p(s.input[0]),p(s.input[1]),s.expression?p(s.expression):void 0);break;case t.types.LINK:s=c.createLink(s.iri);break;case t.types.MINUS:s=c.createMinus(p(s.input[0]),p(s.input[1]));break;case t.types.NOP:s=c.createNop();break;case t.types.NPS:s=c.createNps([].concat(s.iris));break;case t.types.ONE_OR_MORE_PATH:s=c.createOneOrMorePath(p(s.path));break;case t.types.ORDER_BY:s=c.createOrderBy(p(s.input),s.expressions.map(p));break;case t.types.PATH:s=c.createPath(s.subject,p(s.predicate),s.object,s.graph);break;case t.types.PATTERN:s=c.createPattern(s.subject,s.predicate,s.object,s.graph);break;case t.types.PROJECT:s=c.createProject(p(s.input),[...s.variables]);break;case t.types.REDUCED:s=c.createReduced(p(s.input));break;case t.types.SEQ:s=c.createSeq(s.input.map(p));break;case t.types.SERVICE:s=c.createService(p(s.input),s.name,s.silent);break;case t.types.SLICE:s=c.createSlice(p(s.input),s.start,s.length);break;case t.types.UNION:s=c.createUnion(s.input.map(p));break;case t.types.VALUES:s=c.createValues([].concat(s.variables),s.bindings.map(b=>Object.assign({},b)));break;case t.types.ZERO_OR_MORE_PATH:s=c.createZeroOrMorePath(p(s.path));break;case t.types.ZERO_OR_ONE_PATH:s=c.createZeroOrOnePath(p(s.path));break;case t.types.COMPOSITE_UPDATE:s=c.createCompositeUpdate(s.updates.map(p));break;case t.types.DELETE_INSERT:s=c.createDeleteInsert(s.delete?s.delete.map(p):void 0,s.insert?s.insert.map(p):void 0,s.where?p(s.where):void 0);break;case t.types.LOAD:s=c.createLoad(s.source,s.destination,s.silent);break;case t.types.CLEAR:s=c.createClear(s.source,s.silent);break;case t.types.CREATE:s=c.createCreate(s.source,s.silent);break;case t.types.DROP:s=c.createDrop(s.source,s.silent);break;case t.types.ADD:s=c.createAdd(s.source,s.destination);break;case t.types.MOVE:s=c.createMove(s.source,s.destination);break;case t.types.COPY:s=c.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return h&&(s.metadata=h),s}static mapExpression(i,o,c){let s=i,l=!0;c=c||new u.default;const d=o[i.expressionType];if(d&&({result:s,recurse:l}=d(i,c)),!l)return s;let f=h=>r.mapOperation(h,o,c);switch(i.expressionType){case t.expressionTypes.AGGREGATE:return i.variable?c.createBoundAggregate(i.variable,i.aggregator,f(i.expression),i.distinct,i.separator):c.createAggregateExpression(i.aggregator,f(i.expression),i.distinct,i.separator);case t.expressionTypes.EXISTENCE:return c.createExistenceExpression(i.not,f(i.input));case t.expressionTypes.NAMED:return c.createNamedExpression(i.name,i.args.map(f));case t.expressionTypes.OPERATOR:return c.createOperatorExpression(i.operator,i.args.map(f));case t.expressionTypes.TERM:return c.createTermExpression(i.term);case t.expressionTypes.WILDCARD:return c.createWildcardExpression();default:throw new Error(`Unknown Expression type ${i.expressionType}`)}}static cloneOperation(i){return r.mapOperation(i,{})}static cloneExpression(i){return r.mapExpression(i,{})}static createUniqueVariable(i,o,c){let s=0,l=i;for(;o[l];)l=`${i}${s++}`;return c.variable(l)}static isSimpleTerm(i){return i.termType!==void 0&&i.termType!=="Quad"&&i.termType!=="Wildcard"}static isQuad(i){return i.termType==="Quad"}static hasQuadVariables(i){return(0,n.someTermsNested)(i,o=>o.termType==="Variable")}static isWildcard(i){return i.termType==="Wildcard"}}return hh.default=r,hh}var bj;function uoe(){if(bj)return Rn;bj=1;var a=Rn&&Rn.__createBinding||(Object.create?function(D,j,I,N){N===void 0&&(N=I);var B=Object.getOwnPropertyDescriptor(j,I);(!B||("get"in B?!j.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return j[I]}}),Object.defineProperty(D,N,B)}:function(D,j,I,N){N===void 0&&(N=I),D[N]=j[I]}),t=Rn&&Rn.__setModuleDefault||(Object.create?function(D,j){Object.defineProperty(D,"default",{enumerable:!0,value:j})}:function(D,j){D.default=j}),u=Rn&&Rn.__importStar||function(D){if(D&&D.__esModule)return D;var j={};if(D!=null)for(var I in D)I!=="default"&&Object.prototype.hasOwnProperty.call(D,I)&&a(j,D,I);return t(j,D),j},n=Rn&&Rn.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(Rn,"__esModule",{value:!0});const r=Kue(),e=ir(),i=u(r0()),o=n(PO()),c=n(fx()),s=m0().Parser,l=i.types;let d=new Set,f=0,h=!1,p;function b(D,j){j=j||{},p=new o.default(j.dataFactory);let I;if(y(D)){let N=new s(j);N._resetBlanks(),I=N.parse(D)}else I=D;return _(I,j.quads,j.blankToVariable)}Rn.default=b;function _(D,j,I){if(d=new Set,f=0,h=!!j,!D.type)return p.createNop();if(D.type!=="query"&&D.type!=="update")throw new Error("Translate only works on complete query or update objects.");let N;if(T(D),D.type==="query"){const B={type:"group",patterns:D.where||[]};N=x(B),N=J(D,N)}else D.type==="update"&&(N=ve(D));return I&&(N=G(N)),N}function y(D){return typeof D=="string"}function g(D){return!!(D!=null&&D.termType)}function m(D){return D.subject&&D.predicate&&D.object}function v(D){return(D==null?void 0:D.termType)==="Variable"}function T(D){if(g(D))v(D)&&d.add(`?${D.value}`);else if(Array.isArray(D))for(const j of D)T(j);else if(D&&typeof D=="object")for(let j of Object.keys(D))j.startsWith("?")?d.add(j):j.startsWith("$")&&d.add(`?${j.slice(1)}`),T(D[j])}function S(D){let j={};if(m(D)){const I=[S(D.subject),S(D.predicate),S(D.object),D.graph?S(D.graph):{}];Object.assign(j,...I)}else if(g(D))v(D)&&(j[D.value]=D);else if(D.type==="bgp"){const I=D.triples;Object.assign(j,...I.map(S))}else if(D.type==="path")Object.assign(j,...D.items.map(S));else if(D.type==="group"||D.type==="union"||D.type==="optional")Object.assign(j,...D.patterns.map(S));else if(D.type==="service"||D.type==="graph")Object.assign(j,S(D.name)),Object.assign(j,...D.patterns.map(S));else if(D.type==="bind")Object.assign(j,S(D.variable));else if(D.type==="values"){if(D.values.length>0){const I=Object.keys(D.values[0]).map(N=>p.createTerm(N));Object.assign(j,...I.map(S))}}else if(D.type==="query"&&(D.queryType==="SELECT"||D.queryType==="DESCRIBE")){D.where&&D.variables.some(c.default.isWildcard)&&Object.assign(j,...D.where.map(S));for(const I of D.variables)v(I)?Object.assign(j,S(I)):I.variable&&Object.assign(j,S(I.variable));if(D.queryType==="SELECT"){if(D.group)for(const I of D.group)I.variable&&Object.assign(j,S(I.variable));if(D.values){const I={type:"values",values:D.values};Object.assign(j,S(I))}}}return j}function x(D){if(D.type==="bgp")return O(D);if(D.type==="union")return p.createUnion(D.patterns.map(j=>(j.type!=="group"&&(j={type:"group",patterns:[j]}),x(j))));if(D.type==="graph"){const j={type:"group",patterns:D.patterns};let I=x(j);return h?I=Q(I,D.name):I=p.createGraph(I,D.name),I}if(D.type==="values")return fe(D);if(D.type==="query")return _(D,h,!1);if(D.type==="group"){let j=[],I=[];for(let X of D.patterns)(X.type==="filter"?j:I).push(X);let N=I.reduce(ne,p.createBgp([])),B=j.map(X=>L(X.expression));return B.length>0&&(N=p.createFilter(N,B.reduce((X,H)=>p.createOperatorExpression("&&",[X,H])))),N}throw new Error(`Unexpected type: ${D.type}`)}function L(D){if(c.default.isSimpleTerm(D))return p.createTermExpression(D);if(c.default.isQuad(D))return c.default.hasQuadVariables(D)?p.createOperatorExpression("triple",[L(D.subject),L(D.predicate),L(D.object)]):p.createTermExpression(D);if(c.default.isWildcard(D))return p.createWildcardExpression();if("aggregation"in D)return p.createAggregateExpression(D.aggregation,L(D.expression),!!D.distinct,D.separator);if("function"in D)return p.createNamedExpression(D.function,D.args.map(L));if("operator"in D)return D.operator==="exists"||D.operator==="notexists"?p.createExistenceExpression(D.operator==="notexists",x(D.args[0])):((D.operator==="in"||D.operator==="notin")&&(D.args=[D.args[0]].concat(D.args[1])),p.createOperatorExpression(D.operator,D.args.map(L)));throw new Error(`Unknown expression: ${JSON.stringify(D)}`)}function O(D){let j=[],I=[];for(let N of D.triples)if("pathType"in N.predicate){let B=w(N);for(let X of B)X.type===l.PATH?(j.length>0&&I.push(p.createBgp(j)),j=[],I.push(X)):j.push(X)}else j.push(V(N));return j.length>0&&I.push(p.createBgp(j)),I.length===1?I[0]:p.createJoin(I)}function w(D){let j=D.subject,I=A(D.predicate),N=D.object;return E(j,I,N)}function A(D){if(c.default.isSimpleTerm(D)){if(D.termType==="NamedNode")return p.createLink(D);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(D)}`)}if(D.pathType==="^")return p.createInv(A(D.items[0]));if(D.pathType==="!"){let j=[],I=[],N;"pathType"in D.items[0]&&D.items[0].pathType==="|"?N=D.items[0].items:N=D.items;for(let H of N)if(c.default.isSimpleTerm(H))j.push(H);else if(H.pathType==="^")I.push(H.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(H)}`);let B=p.createNps(j),X=p.createInv(p.createNps(I));return I.length===0?B:j.length===0?X:p.createAlt([B,X])}if(D.pathType==="/")return p.createSeq(D.items.map(A));if(D.pathType==="|")return p.createAlt(D.items.map(A));if(D.pathType==="*")return p.createZeroOrMorePath(A(D.items[0]));if(D.pathType==="+")return p.createOneOrMorePath(A(D.items[0]));if(D.pathType==="?")return p.createZeroOrOnePath(A(D.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(D)}`)}function E(D,j,I){if(j.type===l.LINK)return[p.createPattern(D,j.iri,I)];if(j.type===l.INV)return E(I,j.path,D);if(j.type===l.SEQ){let N=D;return c.default.flatten(j.input.map((B,X)=>{const H=X===j.input.length-1?I:R(),K=E(N,B,H);return H.termType==="Variable"&&(N=H),K}))}return[p.createPath(D,j,I)]}function R(){let D=`?var${f++}`;return d.has(D)?R():(d.add(D),p.createTerm(D))}function V(D){if("pathType"in D.predicate)throw new Error("Trying to translate property path to quad.");return p.createPattern(D.subject,D.predicate,D.object,D.graph)}let $=Object.values(l);function Q(D,j,I){if(D.type===l.GRAPH){if(I)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");D=Q(D.input,D.name)}else if(D.type!==l.SERVICE)if(D.type===l.BGP)D.patterns=D.patterns.map(N=>(I&&(N.subject.equals(j)&&(N.subject=I),N.predicate.equals(j)&&(N.predicate=I),N.object.equals(j)&&(N.object=I)),N.graph.termType==="DefaultGraph"&&(N.graph=j),N));else if(D.type===l.PATH)I&&(D.subject.equals(j)&&(D.subject=I),D.object.equals(j)&&(D.object=I)),D.graph.termType==="DefaultGraph"&&(D.graph=j);else if(D.type===l.PROJECT&&!I)D.variables.some(N=>N.equals(j))||(I=R()),D.input=Q(D.input,j,I);else if(D.type===l.EXTEND&&!I)D.variable.equals(j)&&(I=R()),D.input=Q(D.input,j,I);else for(let N of Object.keys(D))Array.isArray(D[N])?D[N]=D[N].map(B=>Q(B,j,I)):$.indexOf(D[N].type)>=0?D[N]=Q(D[N],j,I):I&&v(D[N])&&D[N].equals(j)&&(D[N]=I);return D}function ne(D,j){if(j.type==="optional"){const I=x({type:"group",patterns:j.patterns});I.type===l.FILTER?D=p.createLeftJoin(D,I.input,I.expression):D=p.createLeftJoin(D,I)}else if(j.type==="minus"){const I=x({type:"group",patterns:j.patterns});D=p.createMinus(D,I)}else if(j.type==="bind")D=p.createExtend(D,j.variable,L(j.expression));else if(j.type==="service"){const I={type:"group",patterns:j.patterns},N=p.createService(x(I),j.name,j.silent);D=ie(D,N)}else{const I=x(j);D=ie(D,I)}return D}function ie(D,j){return D.type===l.BGP&&j.type===l.BGP?D=p.createBgp([...D.patterns,...j.patterns]):D.type===l.BGP&&D.patterns.length===0?D=j:j.type===l.BGP&&j.patterns.length===0||(D=p.createJoin([D,j])),D}function fe(D){let j=(D.values.length===0?[]:Object.keys(D.values[0])).map(p.createTerm.bind(p)),I=D.values.map(N=>{let B=Object.keys(N);B=B.filter(H=>N[H]!==void 0);let X={};for(let H of B)X[H]=N[H];return X});return p.createValues(j,I)}function J(D,j){const I=D,N=[],B={};if(I.variables=I.variables&&I.variables.map(H=>_e(H,B)),I.having=I.having&&I.having.map(H=>_e(H,B)),I.order=I.order&&I.order.map(H=>_e(H,B)),I.group||Object.keys(B).length>0){const H=Object.keys(B).map(z=>Fe(B[z],p.createTerm(z))),K=[];if(I.group)for(const z of I.group)if(c.default.isSimpleTerm(z.expression))K.push(z.expression);else{const Z="variable"in z?z.variable:R();j=p.createExtend(j,Z,L(z.expression)),K.push(Z)}j=p.createGroup(j,K,H)}if(I.having)for(let H of I.having)j=p.createFilter(j,L(H));D.values&&(j=p.createJoin([j,fe(D)]));let X=[];if(D.queryType==="SELECT"||D.queryType==="DESCRIBE")if(D.variables.some(H=>H&&c.default.isWildcard(H)))X=Object.values(S(D)).sort((H,K)=>H.value.localeCompare(K.value));else for(let H of D.variables)v(H)||!("variable"in H)?X.push(H):H.variable&&(X.push(H.variable),N.push(H));for(let H of N)j=p.createExtend(j,H.variable,L(H.expression));return I.order&&(j=p.createOrderBy(j,I.order.map(H=>{let K=L(H.expression);return H.descending&&(K=p.createOperatorExpression("desc",[K])),K}))),D.queryType==="SELECT"&&(j=p.createProject(j,X)),I.distinct&&(j=p.createDistinct(j)),I.reduced&&(j=p.createReduced(j)),D.queryType==="CONSTRUCT"?j=p.createConstruct(j,(D.template||[]).map(V)):D.queryType==="ASK"?j=p.createAsk(j):D.queryType==="DESCRIBE"&&(j=p.createDescribe(j,X)),(I.offset||I.limit)&&(j=p.createSlice(j,I.offset||0,I.limit)),I.from&&(j=p.createFrom(j,I.from.default,I.from.named)),j}function _e(D,j){if("type"in D&&D.type==="aggregate"){let I=!1,N;for(let B of Object.keys(j))if(r(j[B],D)){N=p.createTerm(B),I=!0;break}return I||(N=R(),j[(0,e.termToString)(N)]=D),N}return"expression"in D&&D.expression?{...D,expression:_e(D.expression,j)}:"args"in D&&D.args?{...D,args:D.args.map(I=>_e(I,j))}:D}function Fe(D,j){if(D.type!=="aggregate"||!D.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(D)}`);const I=L(D);return I.variable=j,I}function ve(D){return D.updates.length===1?te(D.updates[0]):p.createCompositeUpdate(D.updates.map(te))}function te(D){if("type"in D){if(D.type==="load")return ge(D);if(D.type==="clear"||D.type==="create"||D.type==="drop")return Ve(D);if(D.type==="add"||D.type==="copy"||D.type==="move")return we(D)}else if(D.updateType==="insertdelete"||D.updateType==="deletewhere"||D.updateType==="delete"||D.updateType==="insert")return Le(D);throw new Error(`Unknown update type ${JSON.stringify(D)}`)}function Le(D){if(!h)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let j=[],I=[],N;if(D.delete&&(j=c.default.flatten(D.delete.map(B=>Ce(B,D.graph)))),D.insert&&(I=c.default.flatten(D.insert.map(B=>Ce(B,D.graph)))),D.where&&D.where.length>0){N=x({type:"group",patterns:D.where});const B=D.using;B?N=p.createFrom(N,B.default,B.named):D.graph&&(N=Q(N,D.graph))}else D.updateType==="deletewhere"&&j.length>0&&(N=p.createBgp(j));return p.createDeleteInsert(j.length>0?j:void 0,I.length>0?I:void 0,N)}function Ce(D,j){let I=j;D.type==="graph"&&(I=D.name);let N=D.triples;return I&&(N=N.map(B=>Object.assign(B,{graph:I}))),N.map(V)}function Ve(D){let j;switch(c.default.isSimpleTerm(D.graph)?j=D.graph:D.graph.all?j="ALL":D.graph.default?j="DEFAULT":D.graph.named?j="NAMED":j=D.graph.name,D.type){case"clear":return p.createClear(j,D.silent);case"create":return p.createCreate(j,D.silent);case"drop":return p.createDrop(j,D.silent)}}function ge(D){return p.createLoad(D.source,D.destination,D.silent)}function we(D){const j=D.source.default?"DEFAULT":D.source.name,I=D.destination.default?"DEFAULT":D.destination.name;switch(D.type){case"copy":return p.createCopy(j,I,D.silent);case"move":return p.createMove(j,I,D.silent);case"add":return p.createAdd(j,I,D.silent)}}function G(D){const j={},I=Array.from(d).reduce((B,X)=>(B[X]=!0,B),{});return c.default.mapOperation(D,{[i.types.DELETE_INSERT]:B=>({result:p.createDeleteInsert(B.delete,B.insert,B.where&&G(B.where)),recurse:!1}),[i.types.PATH]:(B,X)=>({result:X.createPath(N(B.subject),B.predicate,N(B.object),N(B.graph)),recurse:!1}),[i.types.PATTERN]:(B,X)=>({result:X.createPattern(N(B.subject),N(B.predicate),N(B.object),N(B.graph)),recurse:!1}),[i.types.CONSTRUCT]:B=>({result:p.createConstruct(G(B.input),B.template),recurse:!1})});function N(B){if(B.termType==="BlankNode"){let X=j[B.value];return X||(X=c.default.createUniqueVariable(B.value,I,p.dataFactory),I[X.value]=!0,j[B.value]=X),X}return B}}return Rn}var Zr={},du={},It={},hx={},Ut={},px,mj;function A0(){if(mj)return px;mj=1,px=a;function a(t,u){if(!t)throw new Error(u||"Assertion failed")}return a.equal=function(u,n,r){if(u!=n)throw new Error(r||"Assertion failed: "+u+" != "+n)},px}var jO={exports:{}},_j;function ooe(){return _j||(_j=1,typeof Object.create=="function"?jO.exports=function(t,u){u&&(t.super_=u,t.prototype=Object.create(u.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:jO.exports=function(t,u){if(u){t.super_=u;var n=function(){};n.prototype=u.prototype,t.prototype=new n,t.prototype.constructor=t}}),jO.exports}var gj;function gi(){if(gj)return Ut;gj=1;var a=A0(),t=ooe();Ut.inherits=t;function u(E,R){return(E.charCodeAt(R)&64512)!==55296||R<0||R+1>=E.length?!1:(E.charCodeAt(R+1)&64512)===56320}function n(E,R){if(Array.isArray(E))return E.slice();if(!E)return[];var V=[];if(typeof E=="string")if(R){if(R==="hex")for(E=E.replace(/[^a-z0-9]+/ig,""),E.length%2!==0&&(E="0"+E),Q=0;Q<E.length;Q+=2)V.push(parseInt(E[Q]+E[Q+1],16))}else for(var $=0,Q=0;Q<E.length;Q++){var ne=E.charCodeAt(Q);ne<128?V[$++]=ne:ne<2048?(V[$++]=ne>>6|192,V[$++]=ne&63|128):u(E,Q)?(ne=65536+((ne&1023)<<10)+(E.charCodeAt(++Q)&1023),V[$++]=ne>>18|240,V[$++]=ne>>12&63|128,V[$++]=ne>>6&63|128,V[$++]=ne&63|128):(V[$++]=ne>>12|224,V[$++]=ne>>6&63|128,V[$++]=ne&63|128)}else for(Q=0;Q<E.length;Q++)V[Q]=E[Q]|0;return V}Ut.toArray=n;function r(E){for(var R="",V=0;V<E.length;V++)R+=o(E[V].toString(16));return R}Ut.toHex=r;function e(E){var R=E>>>24|E>>>8&65280|E<<8&16711680|(E&255)<<24;return R>>>0}Ut.htonl=e;function i(E,R){for(var V="",$=0;$<E.length;$++){var Q=E[$];R==="little"&&(Q=e(Q)),V+=c(Q.toString(16))}return V}Ut.toHex32=i;function o(E){return E.length===1?"0"+E:E}Ut.zero2=o;function c(E){return E.length===7?"0"+E:E.length===6?"00"+E:E.length===5?"000"+E:E.length===4?"0000"+E:E.length===3?"00000"+E:E.length===2?"000000"+E:E.length===1?"0000000"+E:E}Ut.zero8=c;function s(E,R,V,$){var Q=V-R;a(Q%4===0);for(var ne=new Array(Q/4),ie=0,fe=R;ie<ne.length;ie++,fe+=4){var J;$==="big"?J=E[fe]<<24|E[fe+1]<<16|E[fe+2]<<8|E[fe+3]:J=E[fe+3]<<24|E[fe+2]<<16|E[fe+1]<<8|E[fe],ne[ie]=J>>>0}return ne}Ut.join32=s;function l(E,R){for(var V=new Array(E.length*4),$=0,Q=0;$<E.length;$++,Q+=4){var ne=E[$];R==="big"?(V[Q]=ne>>>24,V[Q+1]=ne>>>16&255,V[Q+2]=ne>>>8&255,V[Q+3]=ne&255):(V[Q+3]=ne>>>24,V[Q+2]=ne>>>16&255,V[Q+1]=ne>>>8&255,V[Q]=ne&255)}return V}Ut.split32=l;function d(E,R){return E>>>R|E<<32-R}Ut.rotr32=d;function f(E,R){return E<<R|E>>>32-R}Ut.rotl32=f;function h(E,R){return E+R>>>0}Ut.sum32=h;function p(E,R,V){return E+R+V>>>0}Ut.sum32_3=p;function b(E,R,V,$){return E+R+V+$>>>0}Ut.sum32_4=b;function _(E,R,V,$,Q){return E+R+V+$+Q>>>0}Ut.sum32_5=_;function y(E,R,V,$){var Q=E[R],ne=E[R+1],ie=$+ne>>>0,fe=(ie<$?1:0)+V+Q;E[R]=fe>>>0,E[R+1]=ie}Ut.sum64=y;function g(E,R,V,$){var Q=R+$>>>0,ne=(Q<R?1:0)+E+V;return ne>>>0}Ut.sum64_hi=g;function m(E,R,V,$){var Q=R+$;return Q>>>0}Ut.sum64_lo=m;function v(E,R,V,$,Q,ne,ie,fe){var J=0,_e=R;_e=_e+$>>>0,J+=_e<R?1:0,_e=_e+ne>>>0,J+=_e<ne?1:0,_e=_e+fe>>>0,J+=_e<fe?1:0;var Fe=E+V+Q+ie+J;return Fe>>>0}Ut.sum64_4_hi=v;function T(E,R,V,$,Q,ne,ie,fe){var J=R+$+ne+fe;return J>>>0}Ut.sum64_4_lo=T;function S(E,R,V,$,Q,ne,ie,fe,J,_e){var Fe=0,ve=R;ve=ve+$>>>0,Fe+=ve<R?1:0,ve=ve+ne>>>0,Fe+=ve<ne?1:0,ve=ve+fe>>>0,Fe+=ve<fe?1:0,ve=ve+_e>>>0,Fe+=ve<_e?1:0;var te=E+V+Q+ie+J+Fe;return te>>>0}Ut.sum64_5_hi=S;function x(E,R,V,$,Q,ne,ie,fe,J,_e){var Fe=R+$+ne+fe+_e;return Fe>>>0}Ut.sum64_5_lo=x;function L(E,R,V){var $=R<<32-V|E>>>V;return $>>>0}Ut.rotr64_hi=L;function O(E,R,V){var $=E<<32-V|R>>>V;return $>>>0}Ut.rotr64_lo=O;function w(E,R,V){return E>>>V}Ut.shr64_hi=w;function A(E,R,V){var $=E<<32-V|R>>>V;return $>>>0}return Ut.shr64_lo=A,Ut}var yx={},vj;function E0(){if(vj)return yx;vj=1;var a=gi(),t=A0();function u(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return yx.BlockHash=u,u.prototype.update=function(r,e){if(r=a.toArray(r,e),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var i=r.length%this._delta8;this.pending=r.slice(r.length-i,r.length),this.pending.length===0&&(this.pending=null),r=a.join32(r,0,r.length-i,this.endian);for(var o=0;o<r.length;o+=this._delta32)this._update(r,o,o+this._delta32)}return this},u.prototype.digest=function(r){return this.update(this._pad()),t(this.pending===null),this._digest(r)},u.prototype._pad=function(){var r=this.pendingTotal,e=this._delta8,i=e-(r+this.padLength)%e,o=new Array(i+this.padLength);o[0]=128;for(var c=1;c<i;c++)o[c]=0;if(r<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)o[c++]=0;o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=r>>>24&255,o[c++]=r>>>16&255,o[c++]=r>>>8&255,o[c++]=r&255}else for(o[c++]=r&255,o[c++]=r>>>8&255,o[c++]=r>>>16&255,o[c++]=r>>>24&255,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,s=8;s<this.padLength;s++)o[c++]=0;return o},yx}var fu={},vi={},Tj;function wj(){if(Tj)return vi;Tj=1;var a=gi(),t=a.rotr32;function u(l,d,f,h){if(l===0)return n(d,f,h);if(l===1||l===3)return e(d,f,h);if(l===2)return r(d,f,h)}vi.ft_1=u;function n(l,d,f){return l&d^~l&f}vi.ch32=n;function r(l,d,f){return l&d^l&f^d&f}vi.maj32=r;function e(l,d,f){return l^d^f}vi.p32=e;function i(l){return t(l,2)^t(l,13)^t(l,22)}vi.s0_256=i;function o(l){return t(l,6)^t(l,11)^t(l,25)}vi.s1_256=o;function c(l){return t(l,7)^t(l,18)^l>>>3}vi.g0_256=c;function s(l){return t(l,17)^t(l,19)^l>>>10}return vi.g1_256=s,vi}var bx,Sj;function soe(){if(Sj)return bx;Sj=1;var a=gi(),t=E0(),u=wj(),n=a.rotl32,r=a.sum32,e=a.sum32_5,i=u.ft_1,o=t.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function s(){if(!(this instanceof s))return new s;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return a.inherits(s,o),bx=s,s.blockSize=512,s.outSize=160,s.hmacStrength=80,s.padLength=64,s.prototype._update=function(d,f){for(var h=this.W,p=0;p<16;p++)h[p]=d[f+p];for(;p<h.length;p++)h[p]=n(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);var b=this.h[0],_=this.h[1],y=this.h[2],g=this.h[3],m=this.h[4];for(p=0;p<h.length;p++){var v=~~(p/20),T=e(n(b,5),i(v,_,y,g),m,h[p],c[v]);m=g,g=y,y=n(_,30),_=b,b=T}this.h[0]=r(this.h[0],b),this.h[1]=r(this.h[1],_),this.h[2]=r(this.h[2],y),this.h[3]=r(this.h[3],g),this.h[4]=r(this.h[4],m)},s.prototype._digest=function(d){return d==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")},bx}var mx,Oj;function Aj(){if(Oj)return mx;Oj=1;var a=gi(),t=E0(),u=wj(),n=A0(),r=a.sum32,e=a.sum32_4,i=a.sum32_5,o=u.ch32,c=u.maj32,s=u.s0_256,l=u.s1_256,d=u.g0_256,f=u.g1_256,h=t.BlockHash,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;h.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=p,this.W=new Array(64)}return a.inherits(b,h),mx=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(y,g){for(var m=this.W,v=0;v<16;v++)m[v]=y[g+v];for(;v<m.length;v++)m[v]=e(f(m[v-2]),m[v-7],d(m[v-15]),m[v-16]);var T=this.h[0],S=this.h[1],x=this.h[2],L=this.h[3],O=this.h[4],w=this.h[5],A=this.h[6],E=this.h[7];for(n(this.k.length===m.length),v=0;v<m.length;v++){var R=i(E,l(O),o(O,w,A),this.k[v],m[v]),V=r(s(T),c(T,S,x));E=A,A=w,w=O,O=r(L,R),L=x,x=S,S=T,T=r(R,V)}this.h[0]=r(this.h[0],T),this.h[1]=r(this.h[1],S),this.h[2]=r(this.h[2],x),this.h[3]=r(this.h[3],L),this.h[4]=r(this.h[4],O),this.h[5]=r(this.h[5],w),this.h[6]=r(this.h[6],A),this.h[7]=r(this.h[7],E)},b.prototype._digest=function(y){return y==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")},mx}var _x,Ej;function coe(){if(Ej)return _x;Ej=1;var a=gi(),t=Aj();function u(){if(!(this instanceof u))return new u;t.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return a.inherits(u,t),_x=u,u.blockSize=512,u.outSize=224,u.hmacStrength=192,u.padLength=64,u.prototype._digest=function(r){return r==="hex"?a.toHex32(this.h.slice(0,7),"big"):a.split32(this.h.slice(0,7),"big")},_x}var gx,Ij;function xj(){if(Ij)return gx;Ij=1;var a=gi(),t=E0(),u=A0(),n=a.rotr64_hi,r=a.rotr64_lo,e=a.shr64_hi,i=a.shr64_lo,o=a.sum64,c=a.sum64_hi,s=a.sum64_lo,l=a.sum64_4_hi,d=a.sum64_4_lo,f=a.sum64_5_hi,h=a.sum64_5_lo,p=t.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;p.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}a.inherits(_,p),gx=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(V,$){for(var Q=this.W,ne=0;ne<32;ne++)Q[ne]=V[$+ne];for(;ne<Q.length;ne+=2){var ie=A(Q[ne-4],Q[ne-3]),fe=E(Q[ne-4],Q[ne-3]),J=Q[ne-14],_e=Q[ne-13],Fe=O(Q[ne-30],Q[ne-29]),ve=w(Q[ne-30],Q[ne-29]),te=Q[ne-32],Le=Q[ne-31];Q[ne]=l(ie,fe,J,_e,Fe,ve,te,Le),Q[ne+1]=d(ie,fe,J,_e,Fe,ve,te,Le)}},_.prototype._update=function(V,$){this._prepareBlock(V,$);var Q=this.W,ne=this.h[0],ie=this.h[1],fe=this.h[2],J=this.h[3],_e=this.h[4],Fe=this.h[5],ve=this.h[6],te=this.h[7],Le=this.h[8],Ce=this.h[9],Ve=this.h[10],ge=this.h[11],we=this.h[12],G=this.h[13],D=this.h[14],j=this.h[15];u(this.k.length===Q.length);for(var I=0;I<Q.length;I+=2){var N=D,B=j,X=x(Le,Ce),H=L(Le,Ce),K=y(Le,Ce,Ve,ge,we),z=g(Le,Ce,Ve,ge,we,G),Z=this.k[I],de=this.k[I+1],le=Q[I],De=Q[I+1],Qe=f(N,B,X,H,K,z,Z,de,le,De),je=h(N,B,X,H,K,z,Z,de,le,De);N=T(ne,ie),B=S(ne,ie),X=m(ne,ie,fe,J,_e),H=v(ne,ie,fe,J,_e,Fe);var oe=c(N,B,X,H),se=s(N,B,X,H);D=we,j=G,we=Ve,G=ge,Ve=Le,ge=Ce,Le=c(ve,te,Qe,je),Ce=s(te,te,Qe,je),ve=_e,te=Fe,_e=fe,Fe=J,fe=ne,J=ie,ne=c(Qe,je,oe,se),ie=s(Qe,je,oe,se)}o(this.h,0,ne,ie),o(this.h,2,fe,J),o(this.h,4,_e,Fe),o(this.h,6,ve,te),o(this.h,8,Le,Ce),o(this.h,10,Ve,ge),o(this.h,12,we,G),o(this.h,14,D,j)},_.prototype._digest=function(V){return V==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")};function y(R,V,$,Q,ne){var ie=R&$^~R&ne;return ie<0&&(ie+=4294967296),ie}function g(R,V,$,Q,ne,ie){var fe=V&Q^~V&ie;return fe<0&&(fe+=4294967296),fe}function m(R,V,$,Q,ne){var ie=R&$^R&ne^$&ne;return ie<0&&(ie+=4294967296),ie}function v(R,V,$,Q,ne,ie){var fe=V&Q^V&ie^Q&ie;return fe<0&&(fe+=4294967296),fe}function T(R,V){var $=n(R,V,28),Q=n(V,R,2),ne=n(V,R,7),ie=$^Q^ne;return ie<0&&(ie+=4294967296),ie}function S(R,V){var $=r(R,V,28),Q=r(V,R,2),ne=r(V,R,7),ie=$^Q^ne;return ie<0&&(ie+=4294967296),ie}function x(R,V){var $=n(R,V,14),Q=n(R,V,18),ne=n(V,R,9),ie=$^Q^ne;return ie<0&&(ie+=4294967296),ie}function L(R,V){var $=r(R,V,14),Q=r(R,V,18),ne=r(V,R,9),ie=$^Q^ne;return ie<0&&(ie+=4294967296),ie}function O(R,V){var $=n(R,V,1),Q=n(R,V,8),ne=e(R,V,7),ie=$^Q^ne;return ie<0&&(ie+=4294967296),ie}function w(R,V){var $=r(R,V,1),Q=r(R,V,8),ne=i(R,V,7),ie=$^Q^ne;return ie<0&&(ie+=4294967296),ie}function A(R,V){var $=n(R,V,19),Q=n(V,R,29),ne=e(R,V,6),ie=$^Q^ne;return ie<0&&(ie+=4294967296),ie}function E(R,V){var $=r(R,V,19),Q=r(V,R,29),ne=i(R,V,6),ie=$^Q^ne;return ie<0&&(ie+=4294967296),ie}return gx}var vx,Nj;function loe(){if(Nj)return vx;Nj=1;var a=gi(),t=xj();function u(){if(!(this instanceof u))return new u;t.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return a.inherits(u,t),vx=u,u.blockSize=1024,u.outSize=384,u.hmacStrength=192,u.padLength=128,u.prototype._digest=function(r){return r==="hex"?a.toHex32(this.h.slice(0,12),"big"):a.split32(this.h.slice(0,12),"big")},vx}var Rj;function doe(){return Rj||(Rj=1,fu.sha1=soe(),fu.sha224=coe(),fu.sha256=Aj(),fu.sha384=loe(),fu.sha512=xj()),fu}var Tx={},Fj;function foe(){if(Fj)return Tx;Fj=1;var a=gi(),t=E0(),u=a.rotl32,n=a.sum32,r=a.sum32_3,e=a.sum32_4,i=t.BlockHash;function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}a.inherits(o,i),Tx.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(_,y){for(var g=this.h[0],m=this.h[1],v=this.h[2],T=this.h[3],S=this.h[4],x=g,L=m,O=v,w=T,A=S,E=0;E<80;E++){var R=n(u(e(g,c(E,m,v,T),_[d[E]+y],s(E)),h[E]),S);g=S,S=T,T=u(v,10),v=m,m=R,R=n(u(e(x,c(79-E,L,O,w),_[f[E]+y],l(E)),p[E]),A),x=A,A=w,w=u(O,10),O=L,L=R}R=r(this.h[1],v,w),this.h[1]=r(this.h[2],T,A),this.h[2]=r(this.h[3],S,x),this.h[3]=r(this.h[4],g,L),this.h[4]=r(this.h[0],m,O),this.h[0]=R},o.prototype._digest=function(_){return _==="hex"?a.toHex32(this.h,"little"):a.split32(this.h,"little")};function c(b,_,y,g){return b<=15?_^y^g:b<=31?_&y|~_&g:b<=47?(_|~y)^g:b<=63?_&g|y&~g:_^(y|~g)}function s(b){return b<=15?0:b<=31?1518500249:b<=47?1859775393:b<=63?2400959708:2840853838}function l(b){return b<=15?1352829926:b<=31?1548603684:b<=47?1836072691:b<=63?2053994217:0}var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Tx}var wx,Dj;function hoe(){if(Dj)return wx;Dj=1;var a=gi(),t=A0();function u(n,r,e){if(!(this instanceof u))return new u(n,r,e);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(a.toArray(r,e))}return wx=u,u.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),t(r.length<=this.blockSize);for(var e=r.length;e<this.blockSize;e++)r.push(0);for(e=0;e<r.length;e++)r[e]^=54;for(this.inner=new this.Hash().update(r),e=0;e<r.length;e++)r[e]^=106;this.outer=new this.Hash().update(r)},u.prototype.update=function(r,e){return this.inner.update(r,e),this},u.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},wx}var Pj;function I0(){return Pj||(Pj=1,function(a){var t=a;t.utils=gi(),t.common=E0(),t.sha=doe(),t.ripemd=foe(),t.hmac=hoe(),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(hx)),hx}var jj;function poe(){if(jj)return It;jj=1,Object.defineProperty(It,"__esModule",{value:!0}),It.isTermGrounded=It.termToSignature=It.quadToSignature=It.sha1hex=It.hashTerm=It.hashTerms=It.getGraphBlankNodes=It.uniqGraph=It.deindexGraph=It.indexGraph=It.getQuadsWithoutBlankNodes=It.getQuadsWithBlankNodes=It.hasValue=It.hashValues=It.getBijectionInner=It.getBijection=It.isomorphic=void 0;const a=I0(),t=ir(),u=Fn();function n(T,S){return!!r(T,S)}It.isomorphic=n;function r(T,S){const x=d(l(T)),L=d(l(S));if(Object.keys(x).length!==Object.keys(L).length)return null;for(const R in x)if(x[R]!==L[R])return null;const O=h(s(T)),w=h(s(S)),A=p(T),E=p(S);return e(O,w,A,E)}It.getBijection=r;function e(T,S,x,L,O,w){O||(O={}),w||(w={});const[A,E]=b(T,x,O),[R,V]=b(S,L,w);if(Object.keys(A).length!==Object.keys(R).length)return null;for(const Q in A)if(!c(R,A[Q]))return null;let $={};for(const Q of x){const ne=t.termToString(Q),ie=E[ne];for(const fe in V)if(V[fe]===ie){$[ne]=fe,delete V[fe];break}}if(!i(Object.keys($).sort(),x.map(t.termToString).sort())||!i(o($).sort(),L.map(t.termToString).sort())){$=null;for(const Q of x){const ne=t.termToString(Q);if(!A[ne])for(const ie of L){const fe=t.termToString(ie);if(!R[fe]&&E[ne]===V[fe]){const J=y(ne);$=e(T,S,x,L,Object.assign(Object.assign({},A),{[ne]:J}),Object.assign(Object.assign({},R),{[fe]:J}))}}}}return $}It.getBijectionInner=e;function i(T,S){if(T.length!==S.length)return!1;for(let x=T.length;x--;)if(T[x]!==S[x])return!1;return!0}function o(T){const S=[];for(const x in T)S.push(T[x]);return S}It.hashValues=o;function c(T,S){for(const x in T)if(T[x]===S)return!0;return!1}It.hasValue=c;function s(T){return T.filter(S=>u.someTerms(S,x=>x.termType==="BlankNode"||x.termType==="Quad"&&u.getTermsNested(x).some(L=>L.termType==="BlankNode")))}It.getQuadsWithBlankNodes=s;function l(T){return T.filter(S=>u.everyTerms(S,x=>x.termType!=="BlankNode"&&!(x.termType==="Quad"&&u.getTermsNested(x).some(L=>L.termType==="BlankNode"))))}It.getQuadsWithoutBlankNodes=l;function d(T){const S={};for(const x of T)S[JSON.stringify(t.quadToStringQuad(x))]=!0;return S}It.indexGraph=d;function f(T){return Object.keys(T).map(S=>t.stringQuadToQuad(JSON.parse(S)))}It.deindexGraph=f;function h(T){return f(d(T))}It.uniqGraph=h;function p(T){return u.uniqTerms(T.map(S=>u.getBlankNodes(u.getTermsNested(S))).reduce((S,x)=>S.concat(x),[]))}It.getGraphBlankNodes=p;function b(T,S,x){const L=Object.assign({},x),O={};let w=!0;for(;w;){const A=Object.keys(L).length;for(const R of S){const V=t.termToString(R);if(!L[V]){const[$,Q]=_(R,T,L);$&&(L[V]=Q),O[V]=Q}}const E={};for(const R in O){const V=O[R];E[V]===void 0?E[V]=R:E[V]=!1}for(const R in E){const V=E[R];V&&(L[V]=R)}w=A!==Object.keys(L).length}return[L,O]}It.hashTerms=b;function _(T,S,x){const L=[];let O=!0;for(const A of S){const E=u.getTermsNested(A);if(E.some(R=>R.equals(T))){L.push(g(A,x,T));for(const R of E)!v(R,x)&&!R.equals(T)&&(O=!1)}}const w=y(L.sort().join(""));return[O,w]}It.hashTerm=_;function y(T){return a.sha1().update(T).digest("hex")}It.sha1hex=y;function g(T,S,x){return u.getTerms(T).map(L=>m(L,S,x)).join("|")}It.quadToSignature=g;function m(T,S,x){return T.equals(x)?"@self":T.termType==="BlankNode"?S[t.termToString(T)]||"@blank":T.termType==="Quad"?`<${g(T,S,x)}>`:t.termToString(T)}It.termToSignature=m;function v(T,S){return T.termType!=="BlankNode"&&!(T.termType==="Quad"&&u.getTermsNested(T).some(x=>!v(x,S)))||!!S[t.termToString(T)]}return It.isTermGrounded=v,It}var Lj;function yoe(){return Lj||(Lj=1,function(a){var t=du&&du.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e),Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[e]}})}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=du&&du.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(poe(),a)}(du)),du}var Mj;function boe(){if(Mj)return Zr;Mj=1;var a=Zr&&Zr.__createBinding||(Object.create?function(Y,Ee,Re,qe){qe===void 0&&(qe=Re);var Ue=Object.getOwnPropertyDescriptor(Ee,Re);(!Ue||("get"in Ue?!Ee.__esModule:Ue.writable||Ue.configurable))&&(Ue={enumerable:!0,get:function(){return Ee[Re]}}),Object.defineProperty(Y,qe,Ue)}:function(Y,Ee,Re,qe){qe===void 0&&(qe=Re),Y[qe]=Ee[Re]}),t=Zr&&Zr.__setModuleDefault||(Object.create?function(Y,Ee){Object.defineProperty(Y,"default",{enumerable:!0,value:Ee})}:function(Y,Ee){Y.default=Ee}),u=Zr&&Zr.__importStar||function(Y){if(Y&&Y.__esModule)return Y;var Ee={};if(Y!=null)for(var Re in Y)Re!=="default"&&Object.prototype.hasOwnProperty.call(Y,Re)&&a(Ee,Y,Re);return t(Ee,Y),Ee},n=Zr&&Zr.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.toSparqlJs=Zr.toSparql=void 0;const r=yoe(),e=ir(),i=m0(),o=u(r0()),c=n(PO()),s=n(fx()),l=o.types,d=o.expressionTypes;let f;const h=new c.default;function p(Y,Ee={}){return new i.Generator(Ee).stringify(b(Y))}Zr.toSparql=p;function b(Y){_(),Y=be(Y);let Ee=y(Y);return Ee.type==="group"?Ee.patterns[0]:Ee}Zr.toSparqlJs=b;function _(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function y(Y){switch(Y.type!==l.EXTEND&&Y.type!==l.ORDER_BY&&Y.type!==l.GRAPH&&(f.project=!1),Y.type){case l.EXPRESSION:return g(Y);case l.ASK:return ge(Y,l.ASK);case l.BGP:return R(Y);case l.CONSTRUCT:return V(Y);case l.DESCRIBE:return ge(Y,l.DESCRIBE);case l.DISTINCT:return $(Y);case l.EXTEND:return Q(Y);case l.FROM:return ne(Y);case l.FILTER:return ie(Y);case l.GRAPH:return fe(Y);case l.GROUP:return J(Y);case l.JOIN:return _e(Y);case l.LEFT_JOIN:return Fe(Y);case l.MINUS:return ve(Y);case l.NOP:return{};case l.ORDER_BY:return te(Y);case l.PATH:return Le(Y);case l.PATTERN:return Ce(Y);case l.PROJECT:return ge(Y,l.PROJECT);case l.REDUCED:return G(Y);case l.SERVICE:return D(Y);case l.SLICE:return j(Y);case l.UNION:return I(Y);case l.VALUES:return N(Y);case l.COMPOSITE_UPDATE:return De(Y);case l.DELETE_INSERT:return Qe(Y);case l.LOAD:return je(Y);case l.CLEAR:return oe(Y);case l.CREATE:return se(Y);case l.DROP:return ye(Y);case l.ADD:return U(Y);case l.MOVE:return F(Y);case l.COPY:return q(Y)}throw new Error(`Unknown Operation type ${Y.type}`)}function g(Y){switch(Y.expressionType){case d.AGGREGATE:return T(Y);case d.EXISTENCE:return S(Y);case d.NAMED:return x(Y);case d.OPERATOR:return L(Y);case d.TERM:return O(Y);case d.WILDCARD:return w(Y)}throw new Error(`Unknown Expression Operation type ${Y.expressionType}`)}function m(Y){switch(Y.type){case l.ALT:return B(Y);case l.INV:return X(Y);case l.LINK:return H(Y);case l.NPS:return K(Y);case l.ONE_OR_MORE_PATH:return z(Y);case l.SEQ:return Z(Y);case l.ZERO_OR_MORE_PATH:return de(Y);case l.ZERO_OR_ONE_PATH:return le(Y)}throw new Error(`Unknown Path type ${Y.type}`)}function v(Y){return(0,e.termToString)(Y)}function T(Y){const Ee={expression:g(Y.expression),type:"aggregate",aggregation:Y.aggregator,distinct:Y.distinct};return Y.separator&&(Ee.separator=Y.separator),Ee}function S(Y){return{type:"operation",operator:Y.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([y(Y.input)])}]}}function x(Y){return{type:"functionCall",function:Y.name,args:Y.args.map(g)}}function L(Y){if(Y.operator==="desc"){const Re={expression:g(Y.args[0])};return Re.descending=!0,Re}const Ee={type:"operation",operator:Y.operator,args:Y.args.map(g)};return(Ee.operator==="in"||Ee.operator==="notin")&&(Ee.args=[Ee.args[0]].concat([Ee.args.slice(1)])),Ee}function O(Y){return Y.term}function w(Y){return Y.wildcard}function A(Y){return Array.isArray(Y)?Y.length===1?Y[0]:{type:"group",patterns:Y}:Y}function E(Y){return Y}function R(Y){let Ee=Y.patterns.map(Ce);return Ee.length===0?null:{type:"bgp",triples:Ee}}function V(Y){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:Y.template.map(Ce),where:s.default.flatten([y(Y.input)])}}function $(Y){let Ee=y(Y.input);return Ee.patterns[0].distinct=!0,Ee}function Q(Y){return f.project?(f.extend.push(Y),y(Y.input)):s.default.flatten([y(Y.input),{type:"bind",variable:Y.variable,expression:g(Y.expression)}])}function ne(Y){const Ee=y(Y.input);let Re=Ee;return Ee.type==="group"&&(Re=Ee.patterns[0]),Re.from={default:Y.default,named:Y.named},Ee}function ie(Y){return{type:"group",patterns:s.default.flatten([y(Y.input),{type:"filter",expression:g(Y.expression)}])}}function fe(Y){return{type:"graph",patterns:s.default.flatten([y(Y.input)]),name:Y.name}}function J(Y){const Ee=y(Y.input),Re=Y.aggregates.map(E);return f.aggregates.push(...Re),f.group.push(...Y.variables),Ee}function _e(Y){return s.default.flatten(Y.input.map(y)).reduce((Re,qe)=>(qe.type!=="bgp"||Re.length==0||Re[Re.length-1].type!=="bgp"?Re.push(qe):Re[Re.length-1].triples.push(...qe.triples),Re),[])}function Fe(Y){const Ee={type:"optional",patterns:[y(Y.input[1])]};return Y.expression&&Ee.patterns.push({type:"filter",expression:g(Y.expression)}),Ee.patterns=s.default.flatten(Ee.patterns),s.default.flatten([y(Y.input[0]),Ee])}function ve(Y){let Ee=y(Y.input[1]);return Ee.type==="group"&&(Ee=Ee.patterns),Array.isArray(Ee)||(Ee=[Ee]),s.default.flatten([y(Y.input[0]),{type:"minus",patterns:Ee}])}function te(Y){return f.order.push(...Y.expressions),y(Y.input)}function Le(Y){return{type:"bgp",triples:[{subject:Y.subject,predicate:m(Y.predicate),object:Y.object}]}}function Ce(Y){return{subject:Y.subject,predicate:Y.predicate,object:Y.object}}function Ve(Y,Ee){let Re=s.default.isSimpleTerm(Y)?v(Y):Y;if(typeof Re=="string"){if(Ee[Re])return Ee[Re]}else if(Array.isArray(Y))Y=Y.map(qe=>Ve(qe,Ee));else for(let qe of Object.keys(Y))Y[qe]=Ve(Y[qe],Ee);return Y}function ge(Y,Ee){const Re={type:"query",prefixes:{}},qe=Re;let Ue;Ee===l.PROJECT?(Re.queryType="SELECT",Ue=Y.variables):Ee===l.ASK?Re.queryType="ASK":Ee===l.DESCRIBE&&(Re.queryType="DESCRIBE",Ue=Y.terms);const tt=f.extend,ut=f.group,rt=f.aggregates,lt=f.order;_(),f.project=!0;let ae=s.default.flatten([y(Y.input)]);ae.length===1&&ae[0].type==="group"&&(ae=ae[0].patterns),Re.where=ae;let M={};for(let W of f.aggregates)M[v(W.variable)]=g(W);let P={};for(let W=f.extend.length-1;W>=0;--W){let me=f.extend[W];P[v(me.variable)]=Ve(g(me.expression),M)}f.group.length>0&&(qe.group=f.group.map(W=>{let me=v(W);if(P[me]){let pe=P[me];return delete P[me],{variable:W,expression:pe}}return{expression:W}})),f.order.length>0&&(qe.order=f.order.map(y).map(W=>W.descending?W:{expression:W})),Ue&&(qe.variables=Ue.map(W=>{let me=v(W);if(P[me]){let pe=P[me];return delete P[me],{variable:W,expression:pe}}return W}),qe.variables.length===0&&(qe.variables=[new i.Wildcard]));const C=Object.entries(P);if(C.length>0){qe.where=qe.where||[];for(const[W,me]of C)qe.where.push({type:"bind",variable:(0,e.stringToTerm)(W),expression:me})}if(Re.where.length>0&&Re.where[Re.where.length-1].type==="filter"){const W=Re.where[Re.where.length-1];we(W,Object.keys(M))&&(qe.having=s.default.flatten([Ve(W.expression,M)]),Re.where.splice(-1))}return f.extend=tt,f.group=ut,f.aggregates=rt,f.order=lt,{type:"group",patterns:[qe]}}function we(Y,Ee){return s.default.isSimpleTerm(Y)?Ee.indexOf(v(Y))>=0:Array.isArray(Y)?Y.some(Re=>we(Re,Ee)):Y===Object(Y)?Object.keys(Y).some(Re=>we(Y[Re],Ee)):Ee.indexOf(Y)>=0}function G(Y){let Ee=y(Y.input);return Ee.patterns[0].reduced=!0,Ee}function D(Y){let Ee=y(Y.input);return Ee.type==="group"&&(Ee=Ee.patterns),Array.isArray(Ee)||(Ee=[Ee]),{type:"service",name:Y.name,silent:Y.silent,patterns:Ee}}function j(Y){let Ee=y(Y.input),Re=Ee;return Ee.type&&Ee.type==="group"&&(Re=Ee.patterns[0]),Y.start!==0&&(Re.offset=Y.start),Y.length!==void 0&&(Re.limit=Y.length),Ee}function I(Y){return{type:"union",patterns:Y.input.map(y).map(A)}}function N(Y){return{type:"values",values:Y.bindings.map(Ee=>{let Re={};for(let qe of Y.variables){let Ue=`?${qe.value}`;Ee[Ue]?Re[Ue]=Ee[Ue]:Re[Ue]=void 0}return Re})}}function B(Y){const Ee=Y.input.map(m);return Ee.every(Re=>"pathType"in Re&&Re.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(Ee.map(Re=>Re.items))}]}:{type:"path",pathType:"|",items:Ee}}function X(Y){if(Y.path.type===l.NPS){const Ee=Y.path.iris.map(Re=>({type:"path",pathType:"^",items:[Re]}));return Ee.length<=1?{type:"path",pathType:"!",items:Ee}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:Ee}]}}return{type:"path",pathType:"^",items:[m(Y.path)]}}function H(Y){return Y.iri}function K(Y){return Y.iris.length<=1?{type:"path",pathType:"!",items:Y.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:Y.iris}]}}function z(Y){return{type:"path",pathType:"+",items:[m(Y.path)]}}function Z(Y){return{type:"path",pathType:"/",items:Y.input.map(m)}}function de(Y){return{type:"path",pathType:"*",items:[m(Y.path)]}}function le(Y){return{type:"path",pathType:"?",items:[m(Y.path)]}}function De(Y){const Ee=Y.updates.map(Re=>y(Re).updates[0]);return{prefixes:{},type:"update",updates:Ee}}function Qe(Y){var Ee;let Re=Y.where,qe;if(Re&&Re.type===l.FROM){let tt=Re;Re=tt.input,qe={default:tt.default,named:tt.named}}const Ue=[{updateType:"insertdelete",delete:ce(Y.delete||[]),insert:ce(Y.insert||[])}];if(qe&&(Ue[0].using=qe),!Re||Re.type===l.BGP&&Re.patterns.length===0)Ue[0].where=[];else{const tt=[];let ut=y(Se(Re,tt));if(ut.type==="group"?Ue[0].where=ut.patterns:Ue[0].where=[ut],tt.length>0){if(tt.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((Ee=tt[0])===null||Ee===void 0?void 0:Ee.value)!==""&&(Ue[0].where=[{type:"graph",patterns:Ue[0].where,name:tt[0]}])}}return!Y.delete&&!Y.where?(Ue[0].updateType="insert",delete Ue[0].delete,delete Ue[0].where):!Y.insert&&!Y.where?(delete Ue[0].insert,delete Ue[0].where,Y.delete.some(tt=>tt.subject.termType==="Variable"||tt.predicate.termType==="Variable"||tt.object.termType==="Variable")?Ue[0].updateType="deletewhere":Ue[0].updateType="delete"):!Y.insert&&Y.where&&Y.where.type==="bgp"&&(0,r.isomorphic)(Y.delete,Y.where.patterns)&&(delete Ue[0].where,Ue[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:Ue}}function je(Y){const Ee=[{type:"load",silent:!!Y.silent,source:Y.source}];return Y.destination&&(Ee[0].destination=Y.destination),{prefixes:{},type:"update",updates:Ee}}function oe(Y){return Ie(Y,"clear")}function se(Y){return Ie(Y,"create")}function ye(Y){return Ie(Y,"drop")}function Ie(Y,Ee){const Re=[{type:Ee,silent:!!Y.silent}];return Y.source==="DEFAULT"?Re[0].graph={default:!0}:Y.source==="NAMED"?Re[0].graph={named:!0}:Y.source==="ALL"?Re[0].graph={all:!0}:Re[0].graph={type:"graph",name:Y.source},{prefixes:{},type:"update",updates:Re}}function U(Y){return k(Y,"add")}function F(Y){return k(Y,"move")}function q(Y){return k(Y,"copy")}function k(Y,Ee){const Re=[{type:Ee,silent:!!Y.silent}];return Re[0].source=Y.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:Y.source},Re[0].destination=Y.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:Y.destination},{prefixes:{},type:"update",updates:Re}}function ce(Y){if(!Y)return[];const Ee={};return Y.forEach(Re=>{const qe=Re.graph.value;Ee[qe]||(Ee[qe]=[]),Ee[qe].push(Re)}),Object.keys(Ee).map(Re=>Re===""?{type:"bgp",triples:Ee[Re].map(Ce)}:{type:"graph",triples:Ee[Re].map(Ce),name:Ee[Re][0].graph})}function be(Y){return Se(Y,[])}function Se(Y,Ee){if(Array.isArray(Y))return Y.map(ut=>Se(ut,Ee));if(!Y.type||Y.type===l.DELETE_INSERT)return Y;if((Y.type===l.PATTERN||Y.type===l.PATH)&&Y.graph)return Ee.push(Y.graph),Y.graph.name!==""?Y.type===l.PATTERN?h.createPattern(Y.subject,Y.predicate,Y.object):h.createPath(Y.subject,Y.predicate,Y.object):Y;const Re={},qe={},Ue={};for(let ut of Object.keys(Y)){const rt=[];if(Re[ut]=Se(Y[ut],rt),rt.length>0){qe[ut]=rt;for(const lt of rt)Ue[lt.value]=lt}}const tt=Object.keys(Ue);if(tt.length>0)if(tt.length===1&&![l.PROJECT,l.SERVICE].includes(Y.type))Ee.push(Ue[tt[0]]);else{if(Y.type===l.BGP)return Ke(Y,qe.patterns);for(let ut of Object.keys(qe)){const rt=Re[ut];Array.isArray(rt)?Re[ut]=rt.map((lt,ae)=>qe[ut][0].value===""?lt:h.createGraph(lt,qe[ut][ae])):qe[ut][0].value!==""&&(Re[ut]=h.createGraph(rt,qe[ut][0]))}}return Re}function Ke(Y,Ee){var Re;const qe={};for(let ut=0;ut<Y.patterns.length;++ut){const rt=Y.patterns[ut],lt=Ee[ut].value;qe[lt]=(Re=qe[lt])!==null&&Re!==void 0?Re:{patterns:[],graph:Ee[ut]},qe[lt].patterns.push(rt)}let Ue=[];for(const[ut,{patterns:rt,graph:lt}]of Object.entries(qe)){const ae=h.createBgp(rt);Ue.push(ut===""?ae:h.createGraph(ae,lt))}let tt=Ue[0];for(let ut=1;ut<Ue.length;++ut)tt=h.createJoin([tt,Ue[ut]]);return tt}return Zr}var Cj;function ht(){return Cj||(Cj=1,function(a){var t=Hn&&Hn.__createBinding||(Object.create?function(l,d,f,h){h===void 0&&(h=f);var p=Object.getOwnPropertyDescriptor(d,f);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(l,h,p)}:function(l,d,f,h){h===void 0&&(h=f),l[h]=d[f]}),u=Hn&&Hn.__setModuleDefault||(Object.create?function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}:function(l,d){l.default=d}),n=Hn&&Hn.__importStar||function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&t(d,l,f);return u(d,l),d},r=Hn&&Hn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.toSparqlJs=a.toSparql=a.Factory=a.Algebra=a.translate=void 0;const e=r(uoe());a.translate=e.default;const i=n(r0());a.Algebra=i;const o=r(PO());a.Factory=o.default;const c=boe();Object.defineProperty(a,"toSparql",{enumerable:!0,get:function(){return c.toSparql}}),Object.defineProperty(a,"toSparqlJs",{enumerable:!0,get:function(){return c.toSparqlJs}});const s=r(fx());a.Util=s.default}(Hn)),Hn}var hu={},x0={},qj;function moe(){if(qj)return x0;qj=1,Object.defineProperty(x0,"__esModule",{value:!0}),x0.asTermType=void 0;function a(t){if(t==="namedNode"||t==="literal"||t==="blankNode"||t==="quad")return t}return x0.asTermType=a,x0}var N0={},Bj;function _oe(){if(Bj)return N0;Bj=1,Object.defineProperty(N0,"__esModule",{value:!0}),N0.Variable=void 0;const a=_a();class t{constructor(n){this.expressionType=a.ExpressionType.Variable,this.name=n}}return N0.Variable=t,N0}var mt={},Gn={},pu={},R0={},$j;function Vj(){if($j)return R0;$j=1,Object.defineProperty(R0,"__esModule",{value:!0}),R0.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return R0.BlankNode=a,R0}var F0={},D0={},Uj;function Qj(){if(Uj)return D0;Uj=1,Object.defineProperty(D0,"__esModule",{value:!0}),D0.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return D0.DefaultGraph=a,a.INSTANCE=new a,D0}var P0={},j0={},Hj;function Sx(){if(Hj)return j0;Hj=1,Object.defineProperty(j0,"__esModule",{value:!0}),j0.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return j0.NamedNode=a,j0}var Gj;function zj(){if(Gj)return P0;Gj=1,Object.defineProperty(P0,"__esModule",{value:!0}),P0.Literal=void 0;const a=Sx();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return P0.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),P0}var L0={},kj;function Xj(){if(kj)return L0;kj=1,Object.defineProperty(L0,"__esModule",{value:!0}),L0.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return L0.Quad=a,L0}var M0={},Jj;function Kj(){if(Jj)return M0;Jj=1,Object.defineProperty(M0,"__esModule",{value:!0}),M0.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return M0.Variable=a,M0}var Wj;function goe(){if(Wj)return F0;Wj=1,Object.defineProperty(F0,"__esModule",{value:!0}),F0.DataFactory=void 0;const a=Vj(),t=Qj(),u=zj(),n=Sx(),r=Xj(),e=Kj();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return F0.DataFactory=o,F0}var Yj;function voe(){return Yj||(Yj=1,function(a){var t=pu&&pu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=pu&&pu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Vj(),a),u(goe(),a),u(Qj(),a),u(zj(),a),u(Sx(),a),u(Xj(),a),u(Kj(),a)}(pu)),pu}var Zj;function yu(){if(Zj)return Gn;Zj=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.SparqlOperator=Gn.TypeURL=Gn.typedLiteral=Gn.TypeAlias=void 0;const a=voe();var t;(function(i){i.SPARQL_NUMERIC="SPARQL_NUMERIC",i.SPARQL_STRINGLY="SPARQL_STRINGLY"})(t||(Gn.TypeAlias=t={}));const u=new a.DataFactory;function n(i,o){return u.literal(i,u.namedNode(o))}Gn.typedLiteral=n;var r;(function(i){i.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",i.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",i.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",i.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",i.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",i.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",i.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",i.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",i.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",i.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",i.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",i.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",i.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",i.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",i.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",i.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",i.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",i.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",i.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",i.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",i.XSD_INT="http://www.w3.org/2001/XMLSchema#int",i.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",i.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",i.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",i.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",i.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",i.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",i.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",i.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",i.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",i.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",i.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",i.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",i.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",i.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",i.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",i.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",i.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",i.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",i.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",i.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration"})(r||(Gn.TypeURL=r={}));var e;return function(i){i.NOT="!",i.UMINUS="uminus",i.UPLUS="uplus",i.LOGICAL_OR="||",i.LOGICAL_AND="&&",i.EQUAL="=",i.NOT_EQUAL="!=",i.LT="<",i.GT=">",i.LTE="<=",i.GTE=">=",i.SAME_TERM="sameterm",i.IN="in",i.NOT_IN="notin",i.MULTIPLICATION="*",i.DIVISION="/",i.ADDITION="+",i.SUBTRACTION="-",i.IS_IRI="isiri",i.IS_URI="isuri",i.IS_BLANK="isblank",i.IS_LITERAL="isliteral",i.IS_NUMERIC="isnumeric",i.STR="str",i.LANG="lang",i.DATATYPE="datatype",i.IRI="iri",i.URI="uri",i.BNODE="bnode",i.STRDT="strdt",i.STRLANG="strlang",i.UUID="uuid",i.STRUUID="struuid",i.STRLEN="strlen",i.SUBSTR="substr",i.UCASE="ucase",i.LCASE="lcase",i.STRSTARTS="strstarts",i.STRENDS="strends",i.CONTAINS="contains",i.STRBEFORE="strbefore",i.STRAFTER="strafter",i.ENCODE_FOR_URI="encode_for_uri",i.CONCAT="concat",i.LANG_MATCHES="langmatches",i.REGEX="regex",i.REPLACE="replace",i.ABS="abs",i.ROUND="round",i.CEIL="ceil",i.FLOOR="floor",i.RAND="rand",i.NOW="now",i.YEAR="year",i.MONTH="month",i.DAY="day",i.HOURS="hours",i.MINUTES="minutes",i.SECONDS="seconds",i.TIMEZONE="timezone",i.TZ="tz",i.MD5="md5",i.SHA1="sha1",i.SHA256="sha256",i.SHA384="sha384",i.SHA512="sha512",i.TRIPLE="triple",i.SUBJECT="subject",i.PREDICATE="predicate",i.OBJECT="object",i.IS_TRIPLE="istriple",i.BOUND="bound",i.IF="if",i.COALESCE="coalesce"}(e||(Gn.SparqlOperator=e={})),Gn}var Tt={},eL;function ph(){if(eL)return Tt;eL=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.NoAggregator=Tt.ExtensionFunctionError=Tt.InvalidExpression=Tt.InvalidArity=Tt.UnexpectedError=Tt.ParseError=Tt.EmptyAggregateError=Tt.IncompatibleLanguageOperation=Tt.InvalidTimezoneCall=Tt.CastError=Tt.InvalidArgumentTypes=Tt.InError=Tt.CoalesceError=Tt.RDFEqualTypeError=Tt.EBVCoercionError=Tt.UnboundVariableError=Tt.InvalidLexicalForm=Tt.isExpressionError=Tt.ExpressionError=void 0;class a extends Error{}Tt.ExpressionError=a;function t(v){return v instanceof a}Tt.isExpressionError=t;class u extends a{constructor(T){super(`Invalid lexical form '${m(T)}'`),this.arg=T}}Tt.InvalidLexicalForm=u;class n extends a{constructor(T,S){super(`Unbound variable '${m(T)}'`),this.variable=T,this.bindings=S}}Tt.UnboundVariableError=n;class r extends a{constructor(T){super(`Cannot coerce term to EBV '${m(T)}'`),this.arg=T}}Tt.EBVCoercionError=r;class e extends a{constructor(T){super("Equality test for literals with unsupported datatypes"),this.args=T}}Tt.RDFEqualTypeError=e;class i extends a{constructor(T){super("All COALESCE arguments threw errors"),this.errors=T}}Tt.CoalesceError=i;class o extends a{constructor(T){super(`Some argument to IN errorred and none where equal. ${T.map(S=>`(${S.toString()}) `).join("and ")}`),this.errors=T}}Tt.InError=o;class c extends a{constructor(T,S){super(`Argument types not valid for operator: '${m(S)}' with '${m(T)}`),this.args=T,this.op=S}}Tt.InvalidArgumentTypes=c;class s extends a{constructor(T,S){super(`Invalid cast: '${m(T)}' to '${m(S)}'`),this.arg=T}}Tt.CastError=s;class l extends a{constructor(T){super(`TIMEZONE call on ${T} which has no timezone`),this.dateString=T}}Tt.InvalidTimezoneCall=l;class d extends a{constructor(T,S){super(`Operation on incompatible language literals '${m(T)}' and '${m(S)}'`),this.arg1=T,this.arg2=S}}Tt.IncompatibleLanguageOperation=d;class f extends a{constructor(){super("Empty aggregate expression")}}Tt.EmptyAggregateError=f;class h extends a{constructor(T,S){super(`Failed to parse "${T}" as ${S}.`)}}Tt.ParseError=h;class p extends Error{constructor(T,S){super(`Programmer Error '${T}'`),this.payload=S}}Tt.UnexpectedError=p;class b extends Error{constructor(T,S){super(`The number of args does not match the arity of the operator '${m(S)}'.`),this.args=T,this.op=S}}Tt.InvalidArity=b;class _ extends Error{constructor(T){super(`Invalid SPARQL Expression '${m(T)}'`)}}Tt.InvalidExpression=_;class y extends Error{constructor(T,S){S instanceof Error?super(`Error thrown in ${T}: ${S.message}${S.stack?`
${S.stack}`:""}`):super(`Error thrown in ${T}`)}}Tt.ExtensionFunctionError=y;class g extends Error{constructor(T){super(`Aggregate expression ${m(T)} found, but no aggregate hook provided.`)}}Tt.NoAggregator=g;function m(v){return JSON.stringify(v)}return Tt}var zn={},tL;function Toe(){if(tL)return zn;tL=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.serializeDuration=zn.serializeTime=zn.serializeDate=zn.serializeDateTime=void 0;function a(i,o=2){return i.toLocaleString(void 0,{minimumIntegerDigits:o,useGrouping:!1})}function t(i){return`${n({year:i.year,month:i.month,day:i.day})}T${r(i)}`}zn.serializeDateTime=t;function u(i){return i.zoneHours===void 0||i.zoneMinutes===void 0?"":i.zoneHours===0&&i.zoneMinutes===0?"Z":`${i.zoneHours>=0?`+${a(i.zoneHours)}`:a(i.zoneHours)}:${a(Math.abs(i.zoneMinutes))}`}function n(i){return`${a(i.year,4)}-${a(i.month)}-${a(i.day)}${u(i)}`}zn.serializeDate=n;function r(i){return`${a(i.hours)}:${a(i.minutes)}:${a(i.seconds)}${u(i)}`}zn.serializeTime=r;function e(i,o="PT0S"){if(!Object.values(i).some(_=>(_||0)!==0))return o;const c=Object.values(i).some(_=>(_||0)<0)?"-":"",s=i.year?`${Math.abs(i.year)}Y`:"",l=i.month?`${Math.abs(i.month)}M`:"",d=i.day?`${Math.abs(i.day)}D`:"",f=`${c}P${s}${l}${d}`;if(!(i.hours||i.minutes||i.seconds))return f;const h=i.hours?`${Math.abs(i.hours)}H`:"",p=i.minutes?`${Math.abs(i.minutes)}M`:"",b=i.seconds?`${Math.abs(i.seconds)}S`:"";return`${f}T${h}${p}${b}`}return zn.serializeDuration=e,zn}var Ox={},er={},C0={},rL;function nL(){if(rL)return C0;rL=1,Object.defineProperty(C0,"__esModule",{value:!0}),C0.OverloadTree=void 0;const a=yh(),t=LO();let u=class OD{constructor(r,e){this.identifier=r,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=e??0,this.promotionCount=void 0}getSubtree(r){const e=(0,t.asGeneralType)(r);if(e)return this.generalOverloads[e];for(const[i,o]of this.literalOverLoads)if(r===i)return o}getImplementationExact(r){let e=this;for(const i of r)if(e=e.getSubtree(i),!e)return;return e.implementation}search(r,e,i){let o=i[this.identifier],c=0;for(;c<r.length&&(o!=null&&o.cache);){const d=r[c],f=(0,a.isLiteralTermExpression)(d);o=o.cache[f?f.dataType:d.termType],c++}if(c===r.length&&(o!=null&&o.func))return o.func;const s=[],l=0;if(r.length===0)return this.implementation;for(s.push(...this.getSubTreeWithArg(r[l],e).map(d=>({node:d,index:l+1})));s.length>0;){const{index:d,node:f}=s.pop();if(d===r.length&&f.implementation)return this.addToCache(i,r,f.implementation),f.implementation;s.push(...f.getSubTreeWithArg(r[d],e).map(h=>({node:h,index:d+1})))}}addToCache(r,e,i){function o(s,l){return l in s||(s[l]={}),s[l]}let c=o(r,this.identifier);for(const s of e){const l=(0,a.isLiteralTermExpression)(s),d=l?l.dataType:s.termType;c.cache=c.cache??{},c=o(c.cache,d)}c.func=i}addOverload(r,e){this._addOverload([...r],e,0)}_addOverload(r,e,i){const[o,...c]=r;if(!o){(this.promotionCount===void 0||i<=this.promotionCount)&&(this.promotionCount=i,this.implementation=e);return}let s=this.getSubtree(o);if(!s){const l=new OD(this.identifier,this.depth+1),d=(0,t.asGeneralType)(o);d&&(this.generalOverloads[d]=l);const f=(0,t.asOverrideType)(o);f&&this.literalOverLoads.push([f,l]),s=l}if(s._addOverload(c,e,i),t.typePromotion[o])for(const l of t.typePromotion[o])this.addPromotedOverload(l.typeToPromote,e,l.conversionFunction,c,i)}addPromotedOverload(r,e,i,o,c){let s=this.getSubtree(r);if(!s){const l=new OD(this.identifier,this.depth+1);this.literalOverLoads.push([r,l]),s=l}s._addOverload(o,l=>d=>e(l)([...d.slice(0,this.depth),i(d[this.depth]),...d.slice(this.depth+1,d.length)]),c+1)}getSubTreeWithArg(r,e){const i=[],o=(0,a.isLiteralTermExpression)(r);if(this.generalOverloads.term&&i.push(this.generalOverloads.term),this.generalOverloads[r.termType]&&i.push(this.generalOverloads[r.termType]),o){const c=(0,t.asKnownLiteralType)(o.dataType);let s;c?s=t.superTypeDictTable[c]:s=(0,t.getSuperTypes)(o.dataType,e);const l=this.literalOverLoads.filter(([d,f])=>d in s).map(([d,f])=>[s[d],f]);l.sort(([d,f],[h,p])=>d-h),i.push(...l.map(([d,f])=>f))}return i}};return C0.OverloadTree=u,C0}var iL;function aL(){if(iL)return er;iL=1,Object.defineProperty(er,"__esModule",{value:!0}),er.expressionToVar=er.dateTime=er.langString=er.string=er.double=er.float=er.decimal=er.integer=er.bool=er.Builder=er.declare=void 0;const a=ze(),t=yh(),u=yh(),n=yu(),r=yu(),e=ph(),i=nL();function o(g){return new c(g)}er.declare=o;class c{constructor(m){this.overloadTree=new i.OverloadTree(m),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(m){return v=>T=>{for(const[S,x]of T.entries())if(x instanceof u.NonLexicalLiteral)throw new e.InvalidLexicalForm(T[S].toRDF(v.context.getSafe(a.KeysInitQuery.dataFactory)));return m(v)(T)}}set(m,v,T=!0){return this.overloadTree.addOverload(m,T?c.wrapInvalidLexicalProtected(v):v),this}copy({from:m,to:v}){const T=this.overloadTree.getImplementationExact(m);if(!T)throw new e.UnexpectedError("Tried to copy implementation, but types not found",{from:m,to:v});return this.set(v,T)}onUnary(m,v,T=!0){return this.set([m],S=>([x])=>v(S)(x),T)}onUnaryTyped(m,v,T=!0){return this.set([m],S=>([x])=>v(S)(x.typedValue),T)}onBinary(m,v,T=!0){return this.set(m,S=>([x,L])=>v(S)(x,L),T)}onBinaryTyped(m,v,T=!0){return this.set(m,S=>([x,L])=>v(S)(x.typedValue,L.typedValue),T)}onTernaryTyped(m,v,T=!0){return this.set(m,S=>([x,L,O])=>v(S)(x.typedValue,L.typedValue,O.typedValue),T)}onTernary(m,v,T=!0){return this.set(m,S=>([x,L,O])=>v(S)(x,L,O),T)}onQuaternaryTyped(m,v,T=!0){return this.set(m,S=>([x,L,O,w])=>v(S)(x.typedValue,L.typedValue,O.typedValue,w.typedValue),T)}onTerm1(m,v=!1){return this.set(["term"],T=>([S])=>m(T)(S),v)}onTerm3(m){return this.set(["term","term","term"],v=>([T,S,x])=>m(v)(T,S,x))}onQuad1(m){return this.set(["quad"],v=>([T])=>m(v)(T))}onLiteral1(m,v=!0){return this.set(["literal"],T=>([S])=>m(T)(S),v)}onBoolean1(m,v=!0){return this.set([n.TypeURL.XSD_BOOLEAN],T=>([S])=>m(T)(S),v)}onBoolean1Typed(m,v=!0){return this.set([n.TypeURL.XSD_BOOLEAN],T=>([S])=>m(T)(S.typedValue),v)}onString1(m,v=!0){return this.set([n.TypeURL.XSD_STRING],T=>([S])=>m(T)(S),v)}onString1Typed(m,v=!0){return this.set([n.TypeURL.XSD_STRING],T=>([S])=>m(T)(S.typedValue),v)}onLangString1(m,v=!0){return this.set([n.TypeURL.RDF_LANG_STRING],T=>([S])=>m(T)(S),v)}onStringly1(m,v=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],T=>([S])=>m(T)(S),v)}onStringly1Typed(m,v=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],T=>([S])=>m(T)(S.typedValue),v)}onNumeric1(m,v=!0){return this.set([n.TypeAlias.SPARQL_NUMERIC],T=>([S])=>m(T)(S),v)}onDateTime1(m,v=!0){return this.set([n.TypeURL.XSD_DATE_TIME],T=>([S])=>m(T)(S),v)}numericConverter(m,v=!0){const T=S=>x=>m(S)(x.typedValue);return this.onUnary(r.TypeURL.XSD_INTEGER,S=>x=>l(T(S)(x)),v).onUnary(r.TypeURL.XSD_DECIMAL,S=>x=>d(T(S)(x)),v).onUnary(r.TypeURL.XSD_FLOAT,S=>x=>f(T(S)(x)),v).onUnary(r.TypeURL.XSD_DOUBLE,S=>x=>h(T(S)(x)),v)}arithmetic(m,v=!0){const T=S=>(x,L)=>m(S)(x.typedValue,L.typedValue);return this.onBinary([r.TypeURL.XSD_INTEGER,r.TypeURL.XSD_INTEGER],S=>(x,L)=>l(T(S)(x,L)),v).onBinary([r.TypeURL.XSD_DECIMAL,r.TypeURL.XSD_DECIMAL],S=>(x,L)=>d(T(S)(x,L)),v).onBinary([r.TypeURL.XSD_FLOAT,r.TypeURL.XSD_FLOAT],S=>(x,L)=>f(T(S)(x,L)),v).onBinary([r.TypeURL.XSD_DOUBLE,r.TypeURL.XSD_DOUBLE],S=>(x,L)=>h(T(S)(x,L)),v)}numberTest(m){return this.numeric(v=>([T,S])=>{const x=m(v)(T.typedValue,S.typedValue);return s(x)})}stringTest(m,v=!0){return this.set([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],T=>([S,x])=>{const L=m(T)(S.typedValue,x.typedValue);return s(L)},v)}booleanTest(m,v=!0){return this.set([n.TypeURL.XSD_BOOLEAN,n.TypeURL.XSD_BOOLEAN],T=>([S,x])=>{const L=m(T)(S.typedValue,x.typedValue);return s(L)},v)}dateTimeTest(m,v=!0){return this.set([n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DATE_TIME],T=>([S,x])=>{const L=m(T)(S.typedValue,x.typedValue);return s(L)},v)}numeric(m){return this.set([n.TypeAlias.SPARQL_NUMERIC,n.TypeAlias.SPARQL_NUMERIC],m)}}er.Builder=c;function s(g){return new t.BooleanLiteral(g)}er.bool=s;function l(g){return new t.IntegerLiteral(g)}er.integer=l;function d(g){return new t.DecimalLiteral(g)}er.decimal=d;function f(g){return new t.FloatLiteral(g)}er.float=f;function h(g){return new t.DoubleLiteral(g)}er.double=h;function p(g){return new t.StringLiteral(g)}er.string=p;function b(g,m){return new t.LangStringLiteral(g,m)}er.langString=b;function _(g,m){return new t.DateTimeLiteral(g,m)}er.dateTime=_;function y(g,m){return g.variable(m.name.slice(1))}return er.expressionToVar=y,er}var uL;function LO(){return uL||(uL=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.typePromotion=a.isSubTypeOf=a.getSuperTypeDict=a.isInternalSubType=a.asGeneralType=a.asOverrideType=a.asKnownLiteralType=a.asTypeAlias=a.typeAliasCheck=a.extensionTableInit=a.getSuperTypes=a.superTypeDictTable=a.extensionTableInput=void 0;const t=yh(),u=aL(),n=yu();a.extensionTableInput={[n.TypeURL.XSD_DATE_TIME_STAMP]:n.TypeURL.XSD_DATE_TIME,[n.TypeURL.XSD_DAY_TIME_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.XSD_YEAR_MONTH_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.RDF_LANG_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_NORMALIZED_STRING]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_TOKEN]:n.TypeURL.XSD_NORMALIZED_STRING,[n.TypeURL.XSD_LANGUAGE]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NM_TOKEN]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NAME]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NC_NAME]:n.TypeURL.XSD_NAME,[n.TypeURL.XSD_ENTITY]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID_REF]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_DOUBLE]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_FLOAT]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_DECIMAL]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_INTEGER]:n.TypeURL.XSD_DECIMAL,[n.TypeURL.XSD_NON_POSITIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_NEGATIVE_INTEGER]:n.TypeURL.XSD_NON_POSITIVE_INTEGER,[n.TypeURL.XSD_LONG]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_INT]:n.TypeURL.XSD_LONG,[n.TypeURL.XSD_SHORT]:n.TypeURL.XSD_INT,[n.TypeURL.XSD_BYTE]:n.TypeURL.XSD_SHORT,[n.TypeURL.XSD_NON_NEGATIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_POSITIVE_INTEGER]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_LONG]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_INT]:n.TypeURL.XSD_UNSIGNED_LONG,[n.TypeURL.XSD_UNSIGNED_SHORT]:n.TypeURL.XSD_UNSIGNED_INT,[n.TypeURL.XSD_UNSIGNED_BYTE]:n.TypeURL.XSD_UNSIGNED_SHORT,[n.TypeURL.XSD_DATE_TIME]:"term",[n.TypeURL.XSD_BOOLEAN]:"term",[n.TypeURL.XSD_DATE]:"term",[n.TypeURL.XSD_G_MONTH]:"term",[n.TypeURL.XSD_G_MONTHDAY]:"term",[n.TypeURL.XSD_G_YEAR]:"term",[n.TypeURL.XSD_G_YEAR_MONTH]:"term",[n.TypeURL.XSD_TIME]:"term",[n.TypeURL.XSD_G_DAY]:"term",[n.TypeURL.XSD_DURATION]:"term",[n.TypeAlias.SPARQL_NUMERIC]:"term",[n.TypeAlias.SPARQL_STRINGLY]:"term",[n.TypeURL.XSD_ANY_URI]:"term"},a.superTypeDictTable=Object.create(null);function r(b,_){const y=_.cache.get(b);if(y)return y;const g=_.discoverer(b);if(g==="term"){const T=Object.create(null);return T.__depth=0,T[b]=0,_.cache.set(b,T),T}let m;const v=s(g);return v?m={...a.superTypeDictTable[v]}:m={...r(g,_)},m.__depth++,m[b]=m.__depth,_.cache.set(b,m),m}a.getSuperTypes=r;function e(){for(const[b,_]of Object.entries(a.extensionTableInput)){const y=b;a.superTypeDictTable[y]||i(y,_,a.superTypeDictTable)}}a.extensionTableInit=e,e();function i(b,_,y){if(_==="term"||_===void 0){const g=Object.create(null);g.__depth=0,g[b]=0,y[b]=g;return}y[_]||i(_,a.extensionTableInput[_],y),y[b]={...y[_],[b]:y[_].__depth+1,__depth:y[_].__depth+1}}a.typeAliasCheck=Object.create(null);function o(){for(const b of Object.values(n.TypeAlias))a.typeAliasCheck[b]=!0}o();function c(b){if(b in a.typeAliasCheck)return b}a.asTypeAlias=c;function s(b){if(b in a.superTypeDictTable)return b}a.asKnownLiteralType=s;function l(b){if(s(b)??b==="term")return b}a.asOverrideType=l;function d(b){if(b==="term"||(0,t.asTermType)(b))return b}a.asGeneralType=d;function f(b,_){return b!=="term"&&a.superTypeDictTable[b]&&a.superTypeDictTable[b][_]!==void 0}a.isInternalSubType=f;function h(b,_){const y=s(b);return y?a.superTypeDictTable[y]:r(b,_)}a.getSuperTypeDict=h;function p(b,_,y){return b==="term"?!1:h(b,y)[_]!==void 0}a.isSubTypeOf=p,a.typePromotion={[n.TypeURL.XSD_STRING]:[{typeToPromote:n.TypeURL.XSD_ANY_URI,conversionFunction:b=>(0,u.string)(b.str())}],[n.TypeURL.XSD_DOUBLE]:[{typeToPromote:n.TypeURL.XSD_FLOAT,conversionFunction:b=>(0,u.double)(b.typedValue)},{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:b=>(0,u.double)(b.typedValue)}],[n.TypeURL.XSD_FLOAT]:[{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:b=>(0,u.float)(b.typedValue)}]}}(Ox)),Ox}var oL;function woe(){if(oL)return mt;oL=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.isNonLexicalLiteral=mt.NonLexicalLiteral=mt.YearMonthDurationLiteral=mt.DayTimeDurationLiteral=mt.DurationLiteral=mt.DateLiteral=mt.TimeLiteral=mt.DateTimeLiteral=mt.StringLiteral=mt.LangStringLiteral=mt.BooleanLiteral=mt.DoubleLiteral=mt.FloatLiteral=mt.DecimalLiteral=mt.IntegerLiteral=mt.NumericLiteral=mt.Literal=mt.isLiteralTermExpression=mt.DefaultGraph=mt.Quad=mt.BlankNode=mt.NamedNode=mt.Term=void 0;const a=_a(),t=yu(),u=yu(),n=ph(),r=Toe(),e=LO();class i{constructor(){this.expressionType=a.ExpressionType.Term}str(){throw new n.InvalidArgumentTypes([this],t.SparqlOperator.STR)}coerceEBV(){throw new n.EBVCoercionError(this)}}mt.Term=i;class o extends i{constructor(V){super(),this.value=V,this.termType="namedNode"}toRDF(V){return V.namedNode(this.value)}str(){return this.value}}mt.NamedNode=o;class c extends i{constructor(V){super(),this.termType="blankNode",this.value=V}toRDF(V){return typeof this.value=="string"?V.blankNode(this.value):this.value}}mt.BlankNode=c;class s extends i{constructor(V,$,Q,ne){super(),this.subject=V,this.predicate=$,this.object=Q,this.graph=ne,this.termType="quad"}toRDF(V){return V.quad(this.subject.toRDF(V),this.predicate.toRDF(V),this.object.toRDF(V),this.graph.toRDF(V))}str(){return`Quad: [${this.subject.str()}, ${this.predicate.str()}, ${this.object.str()}, ${this.graph.str()}]`}}mt.Quad=s;class l extends i{constructor(){super(),this.termType="defaultGraph"}toRDF(V){return V.defaultGraph()}str(){return"DefaultGraph"}}mt.DefaultGraph=l;function d(R){if(R.termType==="literal")return R}mt.isLiteralTermExpression=d;class f extends i{constructor(V,$,Q,ne){super(),this.typedValue=V,this.dataType=$,this.strValue=Q,this.language=ne,this.termType="literal"}toRDF(V){return V.literal(this.strValue??this.str(),this.language??V.namedNode(this.dataType))}str(){return this.strValue??this.typedValue.toString()}}mt.Literal=f;class h extends f{constructor(V,$,Q,ne){super(V,$,Q,ne),this.typedValue=V,this.strValue=Q,this.language=ne}coerceEBV(){return!!this.typedValue}toRDF(V){const $=super.toRDF(V);return Number.isFinite(this.typedValue)||($.value=$.value.replace("Infinity","INF")),$}str(){return this.strValue??this.specificFormatter(this.typedValue)}}mt.NumericLiteral=h;class p extends h{constructor(V,$,Q,ne){super(V,$??u.TypeURL.XSD_INTEGER,Q,ne),this.typedValue=V,this.strValue=Q,this.language=ne}specificFormatter(V){return V.toFixed(0)}}mt.IntegerLiteral=p;class b extends h{constructor(V,$,Q,ne){super(V,$??u.TypeURL.XSD_DECIMAL,Q,ne),this.typedValue=V,this.strValue=Q,this.language=ne}specificFormatter(V){return V.toString()}}mt.DecimalLiteral=b;class _ extends h{constructor(V,$,Q,ne){super(V,$??u.TypeURL.XSD_FLOAT,Q,ne),this.typedValue=V,this.strValue=Q,this.language=ne}specificFormatter(V){return V.toString()}}mt.FloatLiteral=_;class y extends h{constructor(V,$,Q,ne){super(V,$??u.TypeURL.XSD_DOUBLE,Q,ne),this.typedValue=V,this.strValue=Q,this.language=ne}specificFormatter(V){if(!Number.isFinite(V))return V>0?"INF":V<0?"-INF":"NaN";const $=V.toExponential(),[Q,ne]=$.split("e"),ie=ne.replace(/\+/u,"");return`${Q.includes(".")?Q:`${Q}.0`}E${ie}`}}mt.DoubleLiteral=y;class g extends f{constructor(V,$,Q){super(V,Q??u.TypeURL.XSD_BOOLEAN,$),this.typedValue=V,this.strValue=$}coerceEBV(){return this.typedValue}}mt.BooleanLiteral=g;class m extends f{constructor(V,$,Q){super(V,Q??u.TypeURL.RDF_LANG_STRING,V,$),this.typedValue=V,this.language=$}coerceEBV(){return this.str().length>0}}mt.LangStringLiteral=m;class v extends f{constructor(V,$){super(V,$??u.TypeURL.XSD_STRING,V),this.typedValue=V}coerceEBV(){return this.str().length>0}}mt.StringLiteral=v;class T extends f{constructor(V,$,Q){super(V,Q??u.TypeURL.XSD_DATE_TIME,$),this.typedValue=V,this.strValue=$}str(){return(0,r.serializeDateTime)(this.typedValue)}}mt.DateTimeLiteral=T;class S extends f{constructor(V,$,Q){super(V,Q??u.TypeURL.XSD_TIME,$),this.typedValue=V,this.strValue=$}str(){return(0,r.serializeTime)(this.typedValue)}}mt.TimeLiteral=S;class x extends f{constructor(V,$,Q){super(V,Q??u.TypeURL.XSD_DATE,$),this.typedValue=V,this.strValue=$}str(){return(0,r.serializeDate)(this.typedValue)}}mt.DateLiteral=x;class L extends f{constructor(V,$,Q){super(V,Q??u.TypeURL.XSD_DURATION,$),this.typedValue=V,this.strValue=$}str(){return(0,r.serializeDuration)(this.typedValue)}}mt.DurationLiteral=L;class O extends L{constructor(V,$,Q){super(V,$,Q??u.TypeURL.XSD_DAY_TIME_DURATION),this.typedValue=V,this.strValue=$}}mt.DayTimeDurationLiteral=O;class w extends f{constructor(V,$,Q){super(V,Q??u.TypeURL.XSD_YEAR_MONTH_DURATION,$),this.typedValue=V,this.strValue=$}str(){return(0,r.serializeDuration)(this.typedValue,"P0M")}}mt.YearMonthDurationLiteral=w;class A extends f{constructor(V,$,Q,ne,ie){super({toString:()=>"undefined"},$,ne,ie),this.openWorldType=Q}coerceEBV(){if((0,e.isSubTypeOf)(this.dataType,u.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,e.isSubTypeOf)(this.dataType,u.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new n.EBVCoercionError(this)}toRDF(V){return V.literal(this.str(),this.language??V.namedNode(this.dataType))}str(){return this.strValue??""}}mt.NonLexicalLiteral=A;function E(R){if(R instanceof A)return R}return mt.isNonLexicalLiteral=E,mt}var q0={},sL;function Soe(){if(sL)return q0;sL=1,Object.defineProperty(q0,"__esModule",{value:!0}),q0.Operator=void 0;const a=_a();let t=class{constructor(n,r,e){this.name=n,this.args=r,this.apply=e,this.expressionType=a.ExpressionType.Operator}};return q0.Operator=t,q0}var B0={},cL;function Ooe(){if(cL)return B0;cL=1,Object.defineProperty(B0,"__esModule",{value:!0}),B0.Aggregate=void 0;const a=_a();let t=class{constructor(n,r){this.name=n,this.expression=r,this.expressionType=a.ExpressionType.Aggregate}};return B0.Aggregate=t,B0}var $0={},lL;function Aoe(){if(lL)return $0;lL=1,Object.defineProperty($0,"__esModule",{value:!0}),$0.Existence=void 0;const a=_a();let t=class{constructor(n){this.expression=n,this.expressionType=a.ExpressionType.Existence}};return $0.Existence=t,$0}var dL;function yh(){return dL||(dL=1,function(a){var t=hu&&hu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=hu&&hu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(moe(),a),u(_oe(),a),u(woe(),a),u(Soe(),a),u(Ooe(),a),u(Aoe(),a)}(hu)),hu}var Or={},Ft={},fL;function V0(){if(fL)return Ft;fL=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.extractTimeZone=Ft.extractRawTimeZone=Ft.dayTimeDurationsToSeconds=Ft.yearMonthDurationsToMonths=Ft.trimToDayTimeDuration=Ft.trimToYearMonthDuration=Ft.toUTCDate=Ft.toJSDate=Ft.negateDuration=Ft.toDateTimeRepresentation=Ft.defaultedDateTimeRepresentation=Ft.simplifyDurationRepresentation=Ft.defaultedDurationRepresentation=Ft.defaultedYearMonthDurationRepresentation=Ft.defaultedDayTimeDurationRepresentation=void 0;function a(b){return{day:b.day??0,hours:b.hours??0,minutes:b.minutes??0,seconds:b.seconds??0}}Ft.defaultedDayTimeDurationRepresentation=a;function t(b){return{year:b.year??0,month:b.month??0}}Ft.defaultedYearMonthDurationRepresentation=t;function u(b){return{...a(b),...t(b)}}Ft.defaultedDurationRepresentation=u;function n(b){const _=u(b),y={},g=_.year+Math.trunc(_.month/12);g&&(y.year=g,_.month%=12),_.month&&(y.month=_.month);const m=_.day+Math.trunc(_.hours/24)+Math.trunc(_.minutes/(24*60))+Math.trunc(_.seconds/(24*60*60));m&&(y.day=m,_.hours%=24,_.minutes%=24*60,_.seconds%=24*60*60);const v=_.hours+Math.trunc(_.minutes/60)+Math.trunc(_.seconds/(60*60));v&&(y.hours=v,_.minutes%=60,_.seconds%=60*60);const T=_.minutes+Math.trunc(_.seconds/60);return T&&(y.minutes=T,_.seconds%=60),_.seconds&&(y.seconds=_.seconds),y}Ft.simplifyDurationRepresentation=n;function r(b){return{...b,day:b.day??1,hours:b.hours??0,month:b.month??1,year:b.year??0,seconds:b.seconds??0,minutes:b.minutes??0}}Ft.defaultedDateTimeRepresentation=r;function e({date:b,timeZone:_}){return{year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate(),hours:b.getHours(),minutes:b.getMinutes(),seconds:b.getSeconds(),zoneHours:_.zoneHours,zoneMinutes:_.zoneMinutes}}Ft.toDateTimeRepresentation=e;function i(b){return{year:b.year===void 0?void 0:-1*b.year,month:b.month===void 0?void 0:-1*b.month,day:b.day===void 0?void 0:-1*b.day,hours:b.hours===void 0?void 0:-1*b.hours,minutes:b.minutes===void 0?void 0:-1*b.minutes,seconds:b.seconds===void 0?void 0:-1*b.seconds}}Ft.negateDuration=i;function o(b){const _=new Date(b.year,b.month-1,b.day,b.hours,b.minutes,Math.trunc(b.seconds),b.seconds%1*1e3);return b.year>=0&&b.year<100&&_.setFullYear(_.getFullYear()-1900),_}Ft.toJSDate=o;function c(b,_){const y=o(r(b)),g=y.getTimezoneOffset(),m=b.zoneHours??_.zoneHours,v=b.zoneMinutes??_.zoneMinutes;return new Date(y.getTime()-(g+m*60+v)*60*1e3)}Ft.toUTCDate=c;function s(b){return{year:b.year,month:b.month}}Ft.trimToYearMonthDuration=s;function l(b){return{day:b.day,hours:b.hours,minutes:b.minutes,seconds:b.seconds}}Ft.trimToDayTimeDuration=l;function d(b){return b.year*12+b.month}Ft.yearMonthDurationsToMonths=d;function f(b){return((b.day*24+b.hours)*60+b.minutes)*60+b.seconds}Ft.dayTimeDurationsToSeconds=f;function h(b){return/(Z|([+-]\d\d:\d\d))?$/u.exec(b)[0]}Ft.extractRawTimeZone=h;function p(b){return{zoneHours:b.getTimezoneOffset()/60,zoneMinutes:b.getTimezoneOffset()%60}}return Ft.extractTimeZone=p,Ft}var Li={},hL;function pL(){if(hL)return Li;hL=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.elapsedDuration=Li.addDurationToDateTime=Li.maximumDayInMonthFor=void 0;const a=V0();function t(e,i,o=0){const c=e-o,s=i-o,l=Math.floor(c/s);return{intDiv:l,remainder:e-l*s}}function u(e,i){const{intDiv:o,remainder:c}=t(i,13,1),s=e+o;return[1,3,5,7,8,10,12].includes(c)?31:[4,6,9,11].includes(c)?30:c===2&&(t(s,400).remainder===0||t(s,100).remainder!==0&&t(s,4).remainder===0)?29:28}Li.maximumDayInMonthFor=u;function n(e,i){const o={...e};let c=t(e.month+i.month,13,1);for(o.month=c.remainder,o.year=e.year+i.year+c.intDiv,c=t(e.seconds+i.seconds,60),o.seconds=c.remainder,c=t(e.minutes+i.minutes+c.intDiv,60),o.minutes=c.remainder,c=t(e.hours+i.hours+c.intDiv,24),o.hours=c.remainder,o.day=e.day+i.day+c.intDiv;;){let s;if(o.day<1)o.day+=u(o.year,o.month-1),s=-1;else if(o.day>u(o.year,o.month))o.day-=u(o.year,o.month),s=1;else break;c=t(o.month+s,13,1),o.month=c.remainder,o.year+=c.intDiv}return o}Li.addDurationToDateTime=n;function r(e,i,o){const c=(0,a.toUTCDate)(e,o),s=(0,a.toUTCDate)(i,o),l=c.getTime()-s.getTime();return{day:Math.floor(l/(1e3*60*60*24)),hours:Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(l%(1e3*60*60)/(1e3*60)),seconds:l%(1e3*60)}}return Li.elapsedDuration=r,Li}var yL;function Ax(){if(yL)return Or;yL=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.parseDayTimeDuration=Or.parseYearMonthDuration=Or.parseDuration=Or.parseTime=Or.parseDate=Or.parseDateTime=Or.parseXSDDecimal=Or.parseXSDFloat=void 0;const a=V0(),t=ph(),u=pL();function n(h){const p=Number(h);return Number.isNaN(p)?h==="NaN"?Number.NaN:h==="INF"||h==="+INF"?Number.POSITIVE_INFINITY:h==="-INF"?Number.NEGATIVE_INFINITY:void 0:p}Or.parseXSDFloat=n;function r(h){const p=Number(h);return Number.isNaN(p)?void 0:p}Or.parseXSDDecimal=r;function e(h){const[p,b]=h.split("T");if(b===void 0)throw new t.ParseError(h,"dateTime");return{...o(p),...c(b)}}Or.parseDateTime=e;function i(h){if(h==="")return{zoneHours:void 0,zoneMinutes:void 0};if(h==="Z")return{zoneHours:0,zoneMinutes:0};const b=h.replaceAll(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(Number);return{zoneHours:b[0]*b[1],zoneMinutes:b[0]*b[2]}}function o(h){const p=h.replaceAll(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(p===h)throw new t.ParseError(h,"date");const b=p.split("!"),_=b.slice(0,-1).map(Number),y={year:_[0]*_[1],month:_[2],day:_[3],...i(b[4])};if(!(y.month>=1&&y.month<=12)||!(y.day>=1&&y.day<=(0,u.maximumDayInMonthFor)(y.year,y.month)))throw new t.ParseError(h,"date");return y}Or.parseDate=o;function c(h){const p=h.replaceAll(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(p===h)throw new t.ParseError(h,"time");const b=p.split("!"),_=b.slice(0,-1).map(Number),y={hours:_[0],minutes:_[1],seconds:_[2],...i(b[3])};if(y.seconds>=60||y.minutes>=60||y.hours>24||y.hours===24&&(y.minutes!==0||y.seconds!==0))throw new t.ParseError(h,"time");return y}function s(h){const p=c(h);return p.hours%=24,p}Or.parseTime=s;function l(h){const[p,b]=h.split("T"),_=p.replaceAll(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(_===p)throw new t.ParseError(h,"duration");const y=_.split("!");if(b!==void 0){const v=b.replaceAll(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(b===""||b===v)throw new t.ParseError(h,"duration");y.push(...v.split("!"))}const g=y.map(v=>v.slice(0,-1));if(!g.slice(1).some(Boolean))throw new t.ParseError(h,"duration");const m=Number(g[0]);return(0,a.simplifyDurationRepresentation)({year:g[1]?m*Number(g[1]):void 0,month:g[2]?m*Number(g[2]):void 0,day:g[3]?m*Number(g[3]):void 0,hours:g[4]?m*Number(g[4]):void 0,minutes:g[5]?m*Number(g[5]):void 0,seconds:g[6]?m*Number(g[6]):void 0})}Or.parseDuration=l;function d(h){const p=l(h);if(["hours","minutes","seconds","day"].some(b=>!!p[b]))throw new t.ParseError(h,"yearMonthDuration");return p}Or.parseYearMonthDuration=d;function f(h){const p=l(h);if(["year","month"].some(b=>!!p[b]))throw new t.ParseError(h,"dayTimeDuration");return p}return Or.parseDayTimeDuration=f,Or}var bL;function Eoe(){if(bL)return Xp;bL=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.TermTransformer=void 0;const a=ir(),t=ht(),u=yh(),n=yu(),r=ph(),e=ph(),i=Ax(),o=Ax(),c=LO();let s=class{constructor(d){this.superTypeProvider=d}transformRDFTermUnsafe(d){return this.transformTerm({term:d,type:t.Algebra.types.EXPRESSION,expressionType:t.Algebra.expressionTypes.TERM})}transformTerm(d){if(!d.term)throw new r.InvalidExpression(d);switch(d.term.termType){case"Variable":return new u.Variable(a.termToString(d.term));case"Literal":return this.transformLiteral(d.term);case"NamedNode":return new u.NamedNode(d.term.value);case"BlankNode":return new u.BlankNode(d.term.value);case"Quad":return new u.Quad(this.transformRDFTermUnsafe(d.term.subject),this.transformRDFTermUnsafe(d.term.predicate),this.transformRDFTermUnsafe(d.term.object),this.transformRDFTermUnsafe(d.term.graph));case"DefaultGraph":return new u.DefaultGraph}}transformLiteral(d){if(!d.datatype||[null,void 0,""].includes(d.datatype.value))return d.language?new u.LangStringLiteral(d.value,d.language):new u.StringLiteral(d.value);const f=d.datatype.value,h=(0,c.getSuperTypeDict)(f,this.superTypeProvider);try{if(n.TypeURL.XSD_STRING in h)return new u.StringLiteral(d.value,f);if(n.TypeURL.RDF_LANG_STRING in h)return new u.LangStringLiteral(d.value,d.language);if(n.TypeURL.XSD_YEAR_MONTH_DURATION in h)return new u.YearMonthDurationLiteral((0,i.parseYearMonthDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DAY_TIME_DURATION in h)return new u.DayTimeDurationLiteral((0,i.parseDayTimeDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DURATION in h)return new u.DurationLiteral((0,i.parseDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DATE_TIME in h){const _=new Date(d.value);return Number.isNaN(_.getTime())?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):new u.DateTimeLiteral((0,i.parseDateTime)(d.value),d.value,f)}if(n.TypeURL.XSD_DATE in h)return new u.DateLiteral((0,i.parseDate)(d.value),d.value,f);if(n.TypeURL.XSD_TIME in h)return new u.TimeLiteral((0,i.parseTime)(d.value),d.value,f);if(n.TypeURL.XSD_BOOLEAN in h)return d.value!=="true"&&d.value!=="false"&&d.value!=="1"&&d.value!=="0"?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):new u.BooleanLiteral(d.value==="true"||d.value==="1",d.value);if(n.TypeURL.XSD_DECIMAL in h){const _=o.parseXSDDecimal(d.value);return _===void 0?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):n.TypeURL.XSD_INTEGER in h?new u.IntegerLiteral(_,f,d.value):new u.DecimalLiteral(_,f,d.value)}const p=n.TypeURL.XSD_FLOAT in h,b=n.TypeURL.XSD_DOUBLE in h;if(p||b){const _=o.parseXSDFloat(d.value);return _===void 0?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):p?new u.FloatLiteral(_,f,d.value):new u.DoubleLiteral(_,f,d.value)}return new u.Literal(d.value,f,d.value)}catch(p){if((0,e.isExpressionError)(p))return new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value);throw p}}};return Xp.TermTransformer=s,Xp}var U0={},Q0={},mL;function bh(){var f,h,b,_,y,g,m,v,T,S,x,L,O,w,A,E,R,V,$,Q,ne,ie,fe,J,_e,Fe,ve,te,AD,Ce,Ve,ge,we,Kie,D,j,I,qa,Ba,ED,FE,DE,rr,ID,nO,$a,xD;if(mL)return Q0;mL=1,Object.defineProperty(Q0,"__esModule",{value:!0}),Q0.LRUCache=void 0;const a=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,u=typeof DO=="object"&&DO?DO:{},n=(je,oe,se,ye)=>{typeof u.emitWarning=="function"?u.emitWarning(je,oe,se,ye):console.error(`[${se}] ${oe}: ${je}`)};let r=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof r>"u"){e=class{constructor(){nr(this,"onabort");nr(this,"_onabort",[]);nr(this,"reason");nr(this,"aborted",!1)}addEventListener(ye,Ie){this._onabort.push(Ie)}},r=class{constructor(){nr(this,"signal",new e);oe()}abort(ye){var Ie,U;if(!this.signal.aborted){this.signal.reason=ye,this.signal.aborted=!0;for(const F of this.signal._onabort)F(ye);(U=(Ie=this.signal).onabort)==null||U.call(Ie,ye)}}};let je=((f=u.env)==null?void 0:f.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const oe=()=>{je&&(je=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",oe))}}const i=je=>!t.has(je),o=je=>je&&je===Math.floor(je)&&je>0&&isFinite(je),c=je=>o(je)?je<=Math.pow(2,8)?Uint8Array:je<=Math.pow(2,16)?Uint16Array:je<=Math.pow(2,32)?Uint32Array:je<=Number.MAX_SAFE_INTEGER?s:null:null;class s extends Array{constructor(oe){super(oe),this.fill(0)}}const p=class p{constructor(oe,se){nr(this,"heap");nr(this,"length");if(!he(p,h))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new se(oe),this.length=0}static create(oe){const se=c(oe);if(!se)return[];bt(p,h,!0);const ye=new p(oe,se);return bt(p,h,!1),ye}push(oe){this.heap[this.length++]=oe}pop(){return this.heap[--this.length]}};h=new WeakMap,Pt(p,h,!1);let l=p;const Qe=class Qe{constructor(oe){Pt(this,te);Pt(this,y);Pt(this,g);Pt(this,m);Pt(this,v);Pt(this,T);Pt(this,S);nr(this,"ttl");nr(this,"ttlResolution");nr(this,"ttlAutopurge");nr(this,"updateAgeOnGet");nr(this,"updateAgeOnHas");nr(this,"allowStale");nr(this,"noDisposeOnSet");nr(this,"noUpdateTTL");nr(this,"maxEntrySize");nr(this,"sizeCalculation");nr(this,"noDeleteOnFetchRejection");nr(this,"noDeleteOnStaleGet");nr(this,"allowStaleOnFetchAbort");nr(this,"allowStaleOnFetchRejection");nr(this,"ignoreFetchAbort");Pt(this,x);Pt(this,L);Pt(this,O);Pt(this,w);Pt(this,A);Pt(this,E);Pt(this,R);Pt(this,V);Pt(this,$);Pt(this,Q);Pt(this,ne);Pt(this,ie);Pt(this,fe);Pt(this,J);Pt(this,_e);Pt(this,Fe);Pt(this,ve);Pt(this,Ce,()=>{});Pt(this,Ve,()=>{});Pt(this,ge,()=>{});Pt(this,we,()=>!1);Pt(this,D,oe=>{});Pt(this,j,(oe,se,ye)=>{});Pt(this,I,(oe,se,ye,Ie)=>{if(ye||Ie)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});nr(this,b,"LRUCache");const{max:se=0,ttl:ye,ttlResolution:Ie=1,ttlAutopurge:U,updateAgeOnGet:F,updateAgeOnHas:q,allowStale:k,dispose:ce,disposeAfter:be,noDisposeOnSet:Se,noUpdateTTL:Ke,maxSize:Y=0,maxEntrySize:Ee=0,sizeCalculation:Re,fetchMethod:qe,memoMethod:Ue,noDeleteOnFetchRejection:tt,noDeleteOnStaleGet:ut,allowStaleOnFetchRejection:rt,allowStaleOnFetchAbort:lt,ignoreFetchAbort:ae}=oe;if(se!==0&&!o(se))throw new TypeError("max option must be a nonnegative integer");const M=se?c(se):Array;if(!M)throw new Error("invalid max value: "+se);if(bt(this,y,se),bt(this,g,Y),this.maxEntrySize=Ee||he(this,g),this.sizeCalculation=Re,this.sizeCalculation){if(!he(this,g)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Ue!==void 0&&typeof Ue!="function")throw new TypeError("memoMethod must be a function if defined");if(bt(this,S,Ue),qe!==void 0&&typeof qe!="function")throw new TypeError("fetchMethod must be a function if specified");if(bt(this,T,qe),bt(this,Fe,!!qe),bt(this,O,new Map),bt(this,w,new Array(se).fill(void 0)),bt(this,A,new Array(se).fill(void 0)),bt(this,E,new M(se)),bt(this,R,new M(se)),bt(this,V,0),bt(this,$,0),bt(this,Q,l.create(se)),bt(this,x,0),bt(this,L,0),typeof ce=="function"&&bt(this,m,ce),typeof be=="function"?(bt(this,v,be),bt(this,ne,[])):(bt(this,v,void 0),bt(this,ne,void 0)),bt(this,_e,!!he(this,m)),bt(this,ve,!!he(this,v)),this.noDisposeOnSet=!!Se,this.noUpdateTTL=!!Ke,this.noDeleteOnFetchRejection=!!tt,this.allowStaleOnFetchRejection=!!rt,this.allowStaleOnFetchAbort=!!lt,this.ignoreFetchAbort=!!ae,this.maxEntrySize!==0){if(he(this,g)!==0&&!o(he(this,g)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");ot(this,te,Kie).call(this)}if(this.allowStale=!!k,this.noDeleteOnStaleGet=!!ut,this.updateAgeOnGet=!!F,this.updateAgeOnHas=!!q,this.ttlResolution=o(Ie)||Ie===0?Ie:1,this.ttlAutopurge=!!U,this.ttl=ye||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");ot(this,te,AD).call(this)}if(he(this,y)===0&&this.ttl===0&&he(this,g)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!he(this,y)&&!he(this,g)){const P="LRU_CACHE_UNBOUNDED";i(P)&&(t.add(P),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",P,Qe))}}static unsafeExposeInternals(oe){return{starts:he(oe,fe),ttls:he(oe,J),sizes:he(oe,ie),keyMap:he(oe,O),keyList:he(oe,w),valList:he(oe,A),next:he(oe,E),prev:he(oe,R),get head(){return he(oe,V)},get tail(){return he(oe,$)},free:he(oe,Q),isBackgroundFetch:se=>{var ye;return ot(ye=oe,te,rr).call(ye,se)},backgroundFetch:(se,ye,Ie,U)=>{var F;return ot(F=oe,te,DE).call(F,se,ye,Ie,U)},moveToTail:se=>{var ye;return ot(ye=oe,te,nO).call(ye,se)},indexes:se=>{var ye;return ot(ye=oe,te,qa).call(ye,se)},rindexes:se=>{var ye;return ot(ye=oe,te,Ba).call(ye,se)},isStale:se=>{var ye;return he(ye=oe,we).call(ye,se)}}}get max(){return he(this,y)}get maxSize(){return he(this,g)}get calculatedSize(){return he(this,L)}get size(){return he(this,x)}get fetchMethod(){return he(this,T)}get memoMethod(){return he(this,S)}get dispose(){return he(this,m)}get disposeAfter(){return he(this,v)}getRemainingTTL(oe){return he(this,O).has(oe)?1/0:0}*entries(){for(const oe of ot(this,te,qa).call(this))he(this,A)[oe]!==void 0&&he(this,w)[oe]!==void 0&&!ot(this,te,rr).call(this,he(this,A)[oe])&&(yield[he(this,w)[oe],he(this,A)[oe]])}*rentries(){for(const oe of ot(this,te,Ba).call(this))he(this,A)[oe]!==void 0&&he(this,w)[oe]!==void 0&&!ot(this,te,rr).call(this,he(this,A)[oe])&&(yield[he(this,w)[oe],he(this,A)[oe]])}*keys(){for(const oe of ot(this,te,qa).call(this)){const se=he(this,w)[oe];se!==void 0&&!ot(this,te,rr).call(this,he(this,A)[oe])&&(yield se)}}*rkeys(){for(const oe of ot(this,te,Ba).call(this)){const se=he(this,w)[oe];se!==void 0&&!ot(this,te,rr).call(this,he(this,A)[oe])&&(yield se)}}*values(){for(const oe of ot(this,te,qa).call(this))he(this,A)[oe]!==void 0&&!ot(this,te,rr).call(this,he(this,A)[oe])&&(yield he(this,A)[oe])}*rvalues(){for(const oe of ot(this,te,Ba).call(this))he(this,A)[oe]!==void 0&&!ot(this,te,rr).call(this,he(this,A)[oe])&&(yield he(this,A)[oe])}[(_=Symbol.iterator,b=Symbol.toStringTag,_)](){return this.entries()}find(oe,se={}){for(const ye of ot(this,te,qa).call(this)){const Ie=he(this,A)[ye],U=ot(this,te,rr).call(this,Ie)?Ie.__staleWhileFetching:Ie;if(U!==void 0&&oe(U,he(this,w)[ye],this))return this.get(he(this,w)[ye],se)}}forEach(oe,se=this){for(const ye of ot(this,te,qa).call(this)){const Ie=he(this,A)[ye],U=ot(this,te,rr).call(this,Ie)?Ie.__staleWhileFetching:Ie;U!==void 0&&oe.call(se,U,he(this,w)[ye],this)}}rforEach(oe,se=this){for(const ye of ot(this,te,Ba).call(this)){const Ie=he(this,A)[ye],U=ot(this,te,rr).call(this,Ie)?Ie.__staleWhileFetching:Ie;U!==void 0&&oe.call(se,U,he(this,w)[ye],this)}}purgeStale(){let oe=!1;for(const se of ot(this,te,Ba).call(this,{allowStale:!0}))he(this,we).call(this,se)&&(ot(this,te,$a).call(this,he(this,w)[se],"expire"),oe=!0);return oe}info(oe){const se=he(this,O).get(oe);if(se===void 0)return;const ye=he(this,A)[se],Ie=ot(this,te,rr).call(this,ye)?ye.__staleWhileFetching:ye;if(Ie===void 0)return;const U={value:Ie};if(he(this,J)&&he(this,fe)){const F=he(this,J)[se],q=he(this,fe)[se];if(F&&q){const k=F-(a.now()-q);U.ttl=k,U.start=Date.now()}}return he(this,ie)&&(U.size=he(this,ie)[se]),U}dump(){const oe=[];for(const se of ot(this,te,qa).call(this,{allowStale:!0})){const ye=he(this,w)[se],Ie=he(this,A)[se],U=ot(this,te,rr).call(this,Ie)?Ie.__staleWhileFetching:Ie;if(U===void 0||ye===void 0)continue;const F={value:U};if(he(this,J)&&he(this,fe)){F.ttl=he(this,J)[se];const q=a.now()-he(this,fe)[se];F.start=Math.floor(Date.now()-q)}he(this,ie)&&(F.size=he(this,ie)[se]),oe.unshift([ye,F])}return oe}load(oe){this.clear();for(const[se,ye]of oe){if(ye.start){const Ie=Date.now()-ye.start;ye.start=a.now()-Ie}this.set(se,ye.value,ye)}}set(oe,se,ye={}){var Ke,Y,Ee,Re,qe;if(se===void 0)return this.delete(oe),this;const{ttl:Ie=this.ttl,start:U,noDisposeOnSet:F=this.noDisposeOnSet,sizeCalculation:q=this.sizeCalculation,status:k}=ye;let{noUpdateTTL:ce=this.noUpdateTTL}=ye;const be=he(this,I).call(this,oe,se,ye.size||0,q);if(this.maxEntrySize&&be>this.maxEntrySize)return k&&(k.set="miss",k.maxEntrySizeExceeded=!0),ot(this,te,$a).call(this,oe,"set"),this;let Se=he(this,x)===0?void 0:he(this,O).get(oe);if(Se===void 0)Se=he(this,x)===0?he(this,$):he(this,Q).length!==0?he(this,Q).pop():he(this,x)===he(this,y)?ot(this,te,FE).call(this,!1):he(this,x),he(this,w)[Se]=oe,he(this,A)[Se]=se,he(this,O).set(oe,Se),he(this,E)[he(this,$)]=Se,he(this,R)[Se]=he(this,$),bt(this,$,Se),RE(this,x)._++,he(this,j).call(this,Se,be,k),k&&(k.set="add"),ce=!1;else{ot(this,te,nO).call(this,Se);const Ue=he(this,A)[Se];if(se!==Ue){if(he(this,Fe)&&ot(this,te,rr).call(this,Ue)){Ue.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:tt}=Ue;tt!==void 0&&!F&&(he(this,_e)&&((Ke=he(this,m))==null||Ke.call(this,tt,oe,"set")),he(this,ve)&&((Y=he(this,ne))==null||Y.push([tt,oe,"set"])))}else F||(he(this,_e)&&((Ee=he(this,m))==null||Ee.call(this,Ue,oe,"set")),he(this,ve)&&((Re=he(this,ne))==null||Re.push([Ue,oe,"set"])));if(he(this,D).call(this,Se),he(this,j).call(this,Se,be,k),he(this,A)[Se]=se,k){k.set="replace";const tt=Ue&&ot(this,te,rr).call(this,Ue)?Ue.__staleWhileFetching:Ue;tt!==void 0&&(k.oldValue=tt)}}else k&&(k.set="update")}if(Ie!==0&&!he(this,J)&&ot(this,te,AD).call(this),he(this,J)&&(ce||he(this,ge).call(this,Se,Ie,U),k&&he(this,Ve).call(this,k,Se)),!F&&he(this,ve)&&he(this,ne)){const Ue=he(this,ne);let tt;for(;tt=Ue==null?void 0:Ue.shift();)(qe=he(this,v))==null||qe.call(this,...tt)}return this}pop(){var oe;try{for(;he(this,x);){const se=he(this,A)[he(this,V)];if(ot(this,te,FE).call(this,!0),ot(this,te,rr).call(this,se)){if(se.__staleWhileFetching)return se.__staleWhileFetching}else if(se!==void 0)return se}}finally{if(he(this,ve)&&he(this,ne)){const se=he(this,ne);let ye;for(;ye=se==null?void 0:se.shift();)(oe=he(this,v))==null||oe.call(this,...ye)}}}has(oe,se={}){const{updateAgeOnHas:ye=this.updateAgeOnHas,status:Ie}=se,U=he(this,O).get(oe);if(U!==void 0){const F=he(this,A)[U];if(ot(this,te,rr).call(this,F)&&F.__staleWhileFetching===void 0)return!1;if(he(this,we).call(this,U))Ie&&(Ie.has="stale",he(this,Ve).call(this,Ie,U));else return ye&&he(this,Ce).call(this,U),Ie&&(Ie.has="hit",he(this,Ve).call(this,Ie,U)),!0}else Ie&&(Ie.has="miss");return!1}peek(oe,se={}){const{allowStale:ye=this.allowStale}=se,Ie=he(this,O).get(oe);if(Ie===void 0||!ye&&he(this,we).call(this,Ie))return;const U=he(this,A)[Ie];return ot(this,te,rr).call(this,U)?U.__staleWhileFetching:U}async fetch(oe,se={}){const{allowStale:ye=this.allowStale,updateAgeOnGet:Ie=this.updateAgeOnGet,noDeleteOnStaleGet:U=this.noDeleteOnStaleGet,ttl:F=this.ttl,noDisposeOnSet:q=this.noDisposeOnSet,size:k=0,sizeCalculation:ce=this.sizeCalculation,noUpdateTTL:be=this.noUpdateTTL,noDeleteOnFetchRejection:Se=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Ke=this.allowStaleOnFetchRejection,ignoreFetchAbort:Y=this.ignoreFetchAbort,allowStaleOnFetchAbort:Ee=this.allowStaleOnFetchAbort,context:Re,forceRefresh:qe=!1,status:Ue,signal:tt}=se;if(!he(this,Fe))return Ue&&(Ue.fetch="get"),this.get(oe,{allowStale:ye,updateAgeOnGet:Ie,noDeleteOnStaleGet:U,status:Ue});const ut={allowStale:ye,updateAgeOnGet:Ie,noDeleteOnStaleGet:U,ttl:F,noDisposeOnSet:q,size:k,sizeCalculation:ce,noUpdateTTL:be,noDeleteOnFetchRejection:Se,allowStaleOnFetchRejection:Ke,allowStaleOnFetchAbort:Ee,ignoreFetchAbort:Y,status:Ue,signal:tt};let rt=he(this,O).get(oe);if(rt===void 0){Ue&&(Ue.fetch="miss");const lt=ot(this,te,DE).call(this,oe,rt,ut,Re);return lt.__returned=lt}else{const lt=he(this,A)[rt];if(ot(this,te,rr).call(this,lt)){const W=ye&&lt.__staleWhileFetching!==void 0;return Ue&&(Ue.fetch="inflight",W&&(Ue.returnedStale=!0)),W?lt.__staleWhileFetching:lt.__returned=lt}const ae=he(this,we).call(this,rt);if(!qe&&!ae)return Ue&&(Ue.fetch="hit"),ot(this,te,nO).call(this,rt),Ie&&he(this,Ce).call(this,rt),Ue&&he(this,Ve).call(this,Ue,rt),lt;const M=ot(this,te,DE).call(this,oe,rt,ut,Re),C=M.__staleWhileFetching!==void 0&&ye;return Ue&&(Ue.fetch=ae?"stale":"refresh",C&&ae&&(Ue.returnedStale=!0)),C?M.__staleWhileFetching:M.__returned=M}}async forceFetch(oe,se={}){const ye=await this.fetch(oe,se);if(ye===void 0)throw new Error("fetch() returned undefined");return ye}memo(oe,se={}){const ye=he(this,S);if(!ye)throw new Error("no memoMethod provided to constructor");const{context:Ie,forceRefresh:U,...F}=se,q=this.get(oe,F);if(!U&&q!==void 0)return q;const k=ye(oe,q,{options:F,context:Ie});return this.set(oe,k,F),k}get(oe,se={}){const{allowStale:ye=this.allowStale,updateAgeOnGet:Ie=this.updateAgeOnGet,noDeleteOnStaleGet:U=this.noDeleteOnStaleGet,status:F}=se,q=he(this,O).get(oe);if(q!==void 0){const k=he(this,A)[q],ce=ot(this,te,rr).call(this,k);return F&&he(this,Ve).call(this,F,q),he(this,we).call(this,q)?(F&&(F.get="stale"),ce?(F&&ye&&k.__staleWhileFetching!==void 0&&(F.returnedStale=!0),ye?k.__staleWhileFetching:void 0):(U||ot(this,te,$a).call(this,oe,"expire"),F&&ye&&(F.returnedStale=!0),ye?k:void 0)):(F&&(F.get="hit"),ce?k.__staleWhileFetching:(ot(this,te,nO).call(this,q),Ie&&he(this,Ce).call(this,q),k))}else F&&(F.get="miss")}delete(oe){return ot(this,te,$a).call(this,oe,"delete")}clear(){return ot(this,te,xD).call(this,"delete")}};y=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,T=new WeakMap,S=new WeakMap,x=new WeakMap,L=new WeakMap,O=new WeakMap,w=new WeakMap,A=new WeakMap,E=new WeakMap,R=new WeakMap,V=new WeakMap,$=new WeakMap,Q=new WeakMap,ne=new WeakMap,ie=new WeakMap,fe=new WeakMap,J=new WeakMap,_e=new WeakMap,Fe=new WeakMap,ve=new WeakMap,te=new WeakSet,AD=function(){const oe=new s(he(this,y)),se=new s(he(this,y));bt(this,J,oe),bt(this,fe,se),bt(this,ge,(U,F,q=a.now())=>{if(se[U]=F!==0?q:0,oe[U]=F,F!==0&&this.ttlAutopurge){const k=setTimeout(()=>{he(this,we).call(this,U)&&ot(this,te,$a).call(this,he(this,w)[U],"expire")},F+1);k.unref&&k.unref()}}),bt(this,Ce,U=>{se[U]=oe[U]!==0?a.now():0}),bt(this,Ve,(U,F)=>{if(oe[F]){const q=oe[F],k=se[F];if(!q||!k)return;U.ttl=q,U.start=k,U.now=ye||Ie();const ce=U.now-k;U.remainingTTL=q-ce}});let ye=0;const Ie=()=>{const U=a.now();if(this.ttlResolution>0){ye=U;const F=setTimeout(()=>ye=0,this.ttlResolution);F.unref&&F.unref()}return U};this.getRemainingTTL=U=>{const F=he(this,O).get(U);if(F===void 0)return 0;const q=oe[F],k=se[F];if(!q||!k)return 1/0;const ce=(ye||Ie())-k;return q-ce},bt(this,we,U=>{const F=se[U],q=oe[U];return!!q&&!!F&&(ye||Ie())-F>q})},Ce=new WeakMap,Ve=new WeakMap,ge=new WeakMap,we=new WeakMap,Kie=function(){const oe=new s(he(this,y));bt(this,L,0),bt(this,ie,oe),bt(this,D,se=>{bt(this,L,he(this,L)-oe[se]),oe[se]=0}),bt(this,I,(se,ye,Ie,U)=>{if(ot(this,te,rr).call(this,ye))return 0;if(!o(Ie))if(U){if(typeof U!="function")throw new TypeError("sizeCalculation must be a function");if(Ie=U(ye,se),!o(Ie))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return Ie}),bt(this,j,(se,ye,Ie)=>{if(oe[se]=ye,he(this,g)){const U=he(this,g)-oe[se];for(;he(this,L)>U;)ot(this,te,FE).call(this,!0)}bt(this,L,he(this,L)+oe[se]),Ie&&(Ie.entrySize=ye,Ie.totalCalculatedSize=he(this,L))})},D=new WeakMap,j=new WeakMap,I=new WeakMap,qa=function*({allowStale:oe=this.allowStale}={}){if(he(this,x))for(let se=he(this,$);!(!ot(this,te,ED).call(this,se)||((oe||!he(this,we).call(this,se))&&(yield se),se===he(this,V)));)se=he(this,R)[se]},Ba=function*({allowStale:oe=this.allowStale}={}){if(he(this,x))for(let se=he(this,V);!(!ot(this,te,ED).call(this,se)||((oe||!he(this,we).call(this,se))&&(yield se),se===he(this,$)));)se=he(this,E)[se]},ED=function(oe){return oe!==void 0&&he(this,O).get(he(this,w)[oe])===oe},FE=function(oe){var U,F;const se=he(this,V),ye=he(this,w)[se],Ie=he(this,A)[se];return he(this,Fe)&&ot(this,te,rr).call(this,Ie)?Ie.__abortController.abort(new Error("evicted")):(he(this,_e)||he(this,ve))&&(he(this,_e)&&((U=he(this,m))==null||U.call(this,Ie,ye,"evict")),he(this,ve)&&((F=he(this,ne))==null||F.push([Ie,ye,"evict"]))),he(this,D).call(this,se),oe&&(he(this,w)[se]=void 0,he(this,A)[se]=void 0,he(this,Q).push(se)),he(this,x)===1?(bt(this,V,bt(this,$,0)),he(this,Q).length=0):bt(this,V,he(this,E)[se]),he(this,O).delete(ye),RE(this,x)._--,se},DE=function(oe,se,ye,Ie){const U=se===void 0?void 0:he(this,A)[se];if(ot(this,te,rr).call(this,U))return U;const F=new r,{signal:q}=ye;q==null||q.addEventListener("abort",()=>F.abort(q.reason),{signal:F.signal});const k={signal:F.signal,options:ye,context:Ie},ce=(Re,qe=!1)=>{const{aborted:Ue}=F.signal,tt=ye.ignoreFetchAbort&&Re!==void 0;if(ye.status&&(Ue&&!qe?(ye.status.fetchAborted=!0,ye.status.fetchError=F.signal.reason,tt&&(ye.status.fetchAbortIgnored=!0)):ye.status.fetchResolved=!0),Ue&&!tt&&!qe)return Se(F.signal.reason);const ut=Y;return he(this,A)[se]===Y&&(Re===void 0?ut.__staleWhileFetching?he(this,A)[se]=ut.__staleWhileFetching:ot(this,te,$a).call(this,oe,"fetch"):(ye.status&&(ye.status.fetchUpdated=!0),this.set(oe,Re,k.options))),Re},be=Re=>(ye.status&&(ye.status.fetchRejected=!0,ye.status.fetchError=Re),Se(Re)),Se=Re=>{const{aborted:qe}=F.signal,Ue=qe&&ye.allowStaleOnFetchAbort,tt=Ue||ye.allowStaleOnFetchRejection,ut=tt||ye.noDeleteOnFetchRejection,rt=Y;if(he(this,A)[se]===Y&&(!ut||rt.__staleWhileFetching===void 0?ot(this,te,$a).call(this,oe,"fetch"):Ue||(he(this,A)[se]=rt.__staleWhileFetching)),tt)return ye.status&&rt.__staleWhileFetching!==void 0&&(ye.status.returnedStale=!0),rt.__staleWhileFetching;if(rt.__returned===rt)throw Re},Ke=(Re,qe)=>{var tt;const Ue=(tt=he(this,T))==null?void 0:tt.call(this,oe,U,k);Ue&&Ue instanceof Promise&&Ue.then(ut=>Re(ut===void 0?void 0:ut),qe),F.signal.addEventListener("abort",()=>{(!ye.ignoreFetchAbort||ye.allowStaleOnFetchAbort)&&(Re(void 0),ye.allowStaleOnFetchAbort&&(Re=ut=>ce(ut,!0)))})};ye.status&&(ye.status.fetchDispatched=!0);const Y=new Promise(Ke).then(ce,be),Ee=Object.assign(Y,{__abortController:F,__staleWhileFetching:U,__returned:void 0});return se===void 0?(this.set(oe,Ee,{...k.options,status:void 0}),se=he(this,O).get(oe)):he(this,A)[se]=Ee,Ee},rr=function(oe){if(!he(this,Fe))return!1;const se=oe;return!!se&&se instanceof Promise&&se.hasOwnProperty("__staleWhileFetching")&&se.__abortController instanceof r},ID=function(oe,se){he(this,R)[se]=oe,he(this,E)[oe]=se},nO=function(oe){oe!==he(this,$)&&(oe===he(this,V)?bt(this,V,he(this,E)[oe]):ot(this,te,ID).call(this,he(this,R)[oe],he(this,E)[oe]),ot(this,te,ID).call(this,he(this,$),oe),bt(this,$,oe))},$a=function(oe,se){var Ie,U,F,q;let ye=!1;if(he(this,x)!==0){const k=he(this,O).get(oe);if(k!==void 0)if(ye=!0,he(this,x)===1)ot(this,te,xD).call(this,se);else{he(this,D).call(this,k);const ce=he(this,A)[k];if(ot(this,te,rr).call(this,ce)?ce.__abortController.abort(new Error("deleted")):(he(this,_e)||he(this,ve))&&(he(this,_e)&&((Ie=he(this,m))==null||Ie.call(this,ce,oe,se)),he(this,ve)&&((U=he(this,ne))==null||U.push([ce,oe,se]))),he(this,O).delete(oe),he(this,w)[k]=void 0,he(this,A)[k]=void 0,k===he(this,$))bt(this,$,he(this,R)[k]);else if(k===he(this,V))bt(this,V,he(this,E)[k]);else{const be=he(this,R)[k];he(this,E)[be]=he(this,E)[k];const Se=he(this,E)[k];he(this,R)[Se]=he(this,R)[k]}RE(this,x)._--,he(this,Q).push(k)}}if(he(this,ve)&&((F=he(this,ne))!=null&&F.length)){const k=he(this,ne);let ce;for(;ce=k==null?void 0:k.shift();)(q=he(this,v))==null||q.call(this,...ce)}return ye},xD=function(oe){var se,ye,Ie;for(const U of ot(this,te,Ba).call(this,{allowStale:!0})){const F=he(this,A)[U];if(ot(this,te,rr).call(this,F))F.__abortController.abort(new Error("deleted"));else{const q=he(this,w)[U];he(this,_e)&&((se=he(this,m))==null||se.call(this,F,q,oe)),he(this,ve)&&((ye=he(this,ne))==null||ye.push([F,q,oe]))}}if(he(this,O).clear(),he(this,A).fill(void 0),he(this,w).fill(void 0),he(this,J)&&he(this,fe)&&(he(this,J).fill(0),he(this,fe).fill(0)),he(this,ie)&&he(this,ie).fill(0),bt(this,V,0),bt(this,$,0),he(this,Q).length=0,bt(this,L,0),bt(this,x,0),he(this,ve)&&he(this,ne)){const U=he(this,ne);let F;for(;F=U==null?void 0:U.shift();)(Ie=he(this,v))==null||Ie.call(this,...F)}};let d=Qe;return Q0.LRUCache=d,Q0}var _L;function Ioe(){if(_L)return U0;_L=1,Object.defineProperty(U0,"__esModule",{value:!0}),U0.prepareEvaluatorActionContext=void 0;const a=ze(),t=bh(),u=V0();function n(r){let e=r;if(e.has(a.KeysInitQuery.extensionFunctionCreator)&&e.has(a.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");if(e.has(a.KeysInitQuery.extensionFunctionCreator))e=e.set(a.KeysExpressionEvaluator.extensionFunctionCreator,e.get(a.KeysInitQuery.extensionFunctionCreator));else if(e.has(a.KeysInitQuery.extensionFunctions)){const i=e.getSafe(a.KeysInitQuery.extensionFunctions);e=e.set(a.KeysExpressionEvaluator.extensionFunctionCreator,async o=>i[o.value])}else e=e.setDefault(a.KeysExpressionEvaluator.extensionFunctionCreator,async()=>{});return e=e.setDefault(a.KeysExpressionEvaluator.defaultTimeZone,(0,u.extractTimeZone)(e.getSafe(a.KeysInitQuery.queryTimestamp))),e=e.setDefault(a.KeysExpressionEvaluator.superTypeProvider,{cache:new t.LRUCache({max:1e3}),discoverer:()=>"term"}),e}return U0.prepareEvaluatorActionContext=n,U0}var gL;function Ae(){return gL||(gL=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.LangStringLiteral=a.TimeLiteral=a.DurationLiteral=a.DateLiteral=a.DayTimeDurationLiteral=a.DateTimeLiteral=a.yearMonthDurationsToMonths=a.toUTCDate=a.toDateTimeRepresentation=a.negateDuration=a.extractRawTimeZone=a.defaultedYearMonthDurationRepresentation=a.defaultedDurationRepresentation=a.defaultedDayTimeDurationRepresentation=a.defaultedDateTimeRepresentation=a.dayTimeDurationsToSeconds=a.isSubTypeOf=a.SparqlOperator=a.TypeAlias=a.TypeURL=a.typedLiteral=a.InvalidArity=a.InvalidLexicalForm=a.ExtensionFunctionError=a.CastError=a.UnboundVariableError=a.NoAggregator=a.InError=a.CoalesceError=a.InvalidArgumentTypes=a.InvalidTimezoneCall=a.IncompatibleLanguageOperation=a.RDFEqualTypeError=a.EmptyAggregateError=a.isExpressionError=a.ExpressionError=a.Builder=a.expressionToVar=a.float=a.decimal=a.langString=a.dateTime=a.integer=a.double=a.string=a.bool=a.declare=a.prepareEvaluatorActionContext=a.OverloadTree=a.TermTransformer=void 0,a.trimToDayTimeDuration=a.trimToYearMonthDuration=a.parseDate=a.parseXSDFloat=a.parseXSDDecimal=a.parseYearMonthDuration=a.parseTime=a.parseDuration=a.parseDayTimeDuration=a.parseDateTime=a.elapsedDuration=a.addDurationToDateTime=a.isNonLexicalLiteral=a.StringLiteral=a.NonLexicalLiteral=a.FloatLiteral=a.IntegerLiteral=a.Literal=a.Existence=a.Aggregate=a.DoubleLiteral=a.DefaultGraph=a.DecimalLiteral=a.BlankNode=a.BooleanLiteral=a.NumericLiteral=a.Variable=a.NamedNode=a.Operator=a.Quad=a.YearMonthDurationLiteral=a.Term=void 0;var t=Eoe();Object.defineProperty(a,"TermTransformer",{enumerable:!0,get:function(){return t.TermTransformer}});var u=nL();Object.defineProperty(a,"OverloadTree",{enumerable:!0,get:function(){return u.OverloadTree}});var n=Ioe();Object.defineProperty(a,"prepareEvaluatorActionContext",{enumerable:!0,get:function(){return n.prepareEvaluatorActionContext}});var r=aL();Object.defineProperty(a,"declare",{enumerable:!0,get:function(){return r.declare}}),Object.defineProperty(a,"bool",{enumerable:!0,get:function(){return r.bool}}),Object.defineProperty(a,"string",{enumerable:!0,get:function(){return r.string}}),Object.defineProperty(a,"double",{enumerable:!0,get:function(){return r.double}}),Object.defineProperty(a,"integer",{enumerable:!0,get:function(){return r.integer}}),Object.defineProperty(a,"dateTime",{enumerable:!0,get:function(){return r.dateTime}}),Object.defineProperty(a,"langString",{enumerable:!0,get:function(){return r.langString}}),Object.defineProperty(a,"decimal",{enumerable:!0,get:function(){return r.decimal}}),Object.defineProperty(a,"float",{enumerable:!0,get:function(){return r.float}}),Object.defineProperty(a,"expressionToVar",{enumerable:!0,get:function(){return r.expressionToVar}}),Object.defineProperty(a,"Builder",{enumerable:!0,get:function(){return r.Builder}});var e=ph();Object.defineProperty(a,"ExpressionError",{enumerable:!0,get:function(){return e.ExpressionError}}),Object.defineProperty(a,"isExpressionError",{enumerable:!0,get:function(){return e.isExpressionError}}),Object.defineProperty(a,"EmptyAggregateError",{enumerable:!0,get:function(){return e.EmptyAggregateError}}),Object.defineProperty(a,"RDFEqualTypeError",{enumerable:!0,get:function(){return e.RDFEqualTypeError}}),Object.defineProperty(a,"IncompatibleLanguageOperation",{enumerable:!0,get:function(){return e.IncompatibleLanguageOperation}}),Object.defineProperty(a,"InvalidTimezoneCall",{enumerable:!0,get:function(){return e.InvalidTimezoneCall}}),Object.defineProperty(a,"InvalidArgumentTypes",{enumerable:!0,get:function(){return e.InvalidArgumentTypes}}),Object.defineProperty(a,"CoalesceError",{enumerable:!0,get:function(){return e.CoalesceError}}),Object.defineProperty(a,"InError",{enumerable:!0,get:function(){return e.InError}}),Object.defineProperty(a,"NoAggregator",{enumerable:!0,get:function(){return e.NoAggregator}}),Object.defineProperty(a,"UnboundVariableError",{enumerable:!0,get:function(){return e.UnboundVariableError}}),Object.defineProperty(a,"CastError",{enumerable:!0,get:function(){return e.CastError}}),Object.defineProperty(a,"ExtensionFunctionError",{enumerable:!0,get:function(){return e.ExtensionFunctionError}}),Object.defineProperty(a,"InvalidLexicalForm",{enumerable:!0,get:function(){return e.InvalidLexicalForm}}),Object.defineProperty(a,"InvalidArity",{enumerable:!0,get:function(){return e.InvalidArity}});var i=yu();Object.defineProperty(a,"typedLiteral",{enumerable:!0,get:function(){return i.typedLiteral}}),Object.defineProperty(a,"TypeURL",{enumerable:!0,get:function(){return i.TypeURL}}),Object.defineProperty(a,"TypeAlias",{enumerable:!0,get:function(){return i.TypeAlias}}),Object.defineProperty(a,"SparqlOperator",{enumerable:!0,get:function(){return i.SparqlOperator}});var o=LO();Object.defineProperty(a,"isSubTypeOf",{enumerable:!0,get:function(){return o.isSubTypeOf}});var c=V0();Object.defineProperty(a,"dayTimeDurationsToSeconds",{enumerable:!0,get:function(){return c.dayTimeDurationsToSeconds}}),Object.defineProperty(a,"defaultedDateTimeRepresentation",{enumerable:!0,get:function(){return c.defaultedDateTimeRepresentation}}),Object.defineProperty(a,"defaultedDayTimeDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDayTimeDurationRepresentation}}),Object.defineProperty(a,"defaultedDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDurationRepresentation}}),Object.defineProperty(a,"defaultedYearMonthDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedYearMonthDurationRepresentation}}),Object.defineProperty(a,"extractRawTimeZone",{enumerable:!0,get:function(){return c.extractRawTimeZone}}),Object.defineProperty(a,"negateDuration",{enumerable:!0,get:function(){return c.negateDuration}}),Object.defineProperty(a,"toDateTimeRepresentation",{enumerable:!0,get:function(){return c.toDateTimeRepresentation}}),Object.defineProperty(a,"toUTCDate",{enumerable:!0,get:function(){return c.toUTCDate}}),Object.defineProperty(a,"yearMonthDurationsToMonths",{enumerable:!0,get:function(){return c.yearMonthDurationsToMonths}});var s=yh();Object.defineProperty(a,"DateTimeLiteral",{enumerable:!0,get:function(){return s.DateTimeLiteral}}),Object.defineProperty(a,"DayTimeDurationLiteral",{enumerable:!0,get:function(){return s.DayTimeDurationLiteral}}),Object.defineProperty(a,"DateLiteral",{enumerable:!0,get:function(){return s.DateLiteral}}),Object.defineProperty(a,"DurationLiteral",{enumerable:!0,get:function(){return s.DurationLiteral}}),Object.defineProperty(a,"TimeLiteral",{enumerable:!0,get:function(){return s.TimeLiteral}}),Object.defineProperty(a,"LangStringLiteral",{enumerable:!0,get:function(){return s.LangStringLiteral}}),Object.defineProperty(a,"Term",{enumerable:!0,get:function(){return s.Term}}),Object.defineProperty(a,"YearMonthDurationLiteral",{enumerable:!0,get:function(){return s.YearMonthDurationLiteral}}),Object.defineProperty(a,"Quad",{enumerable:!0,get:function(){return s.Quad}}),Object.defineProperty(a,"Operator",{enumerable:!0,get:function(){return s.Operator}}),Object.defineProperty(a,"NamedNode",{enumerable:!0,get:function(){return s.NamedNode}}),Object.defineProperty(a,"Variable",{enumerable:!0,get:function(){return s.Variable}}),Object.defineProperty(a,"NumericLiteral",{enumerable:!0,get:function(){return s.NumericLiteral}}),Object.defineProperty(a,"BooleanLiteral",{enumerable:!0,get:function(){return s.BooleanLiteral}}),Object.defineProperty(a,"BlankNode",{enumerable:!0,get:function(){return s.BlankNode}}),Object.defineProperty(a,"DecimalLiteral",{enumerable:!0,get:function(){return s.DecimalLiteral}}),Object.defineProperty(a,"DefaultGraph",{enumerable:!0,get:function(){return s.DefaultGraph}}),Object.defineProperty(a,"DoubleLiteral",{enumerable:!0,get:function(){return s.DoubleLiteral}}),Object.defineProperty(a,"Aggregate",{enumerable:!0,get:function(){return s.Aggregate}}),Object.defineProperty(a,"Existence",{enumerable:!0,get:function(){return s.Existence}}),Object.defineProperty(a,"Literal",{enumerable:!0,get:function(){return s.Literal}}),Object.defineProperty(a,"IntegerLiteral",{enumerable:!0,get:function(){return s.IntegerLiteral}}),Object.defineProperty(a,"FloatLiteral",{enumerable:!0,get:function(){return s.FloatLiteral}}),Object.defineProperty(a,"NonLexicalLiteral",{enumerable:!0,get:function(){return s.NonLexicalLiteral}}),Object.defineProperty(a,"StringLiteral",{enumerable:!0,get:function(){return s.StringLiteral}}),Object.defineProperty(a,"isNonLexicalLiteral",{enumerable:!0,get:function(){return s.isNonLexicalLiteral}});var l=pL();Object.defineProperty(a,"addDurationToDateTime",{enumerable:!0,get:function(){return l.addDurationToDateTime}}),Object.defineProperty(a,"elapsedDuration",{enumerable:!0,get:function(){return l.elapsedDuration}});var d=Ax();Object.defineProperty(a,"parseDateTime",{enumerable:!0,get:function(){return d.parseDateTime}}),Object.defineProperty(a,"parseDayTimeDuration",{enumerable:!0,get:function(){return d.parseDayTimeDuration}}),Object.defineProperty(a,"parseDuration",{enumerable:!0,get:function(){return d.parseDuration}}),Object.defineProperty(a,"parseTime",{enumerable:!0,get:function(){return d.parseTime}}),Object.defineProperty(a,"parseYearMonthDuration",{enumerable:!0,get:function(){return d.parseYearMonthDuration}}),Object.defineProperty(a,"parseXSDDecimal",{enumerable:!0,get:function(){return d.parseXSDDecimal}}),Object.defineProperty(a,"parseXSDFloat",{enumerable:!0,get:function(){return d.parseXSDFloat}}),Object.defineProperty(a,"parseDate",{enumerable:!0,get:function(){return d.parseDate}});var f=V0();Object.defineProperty(a,"trimToYearMonthDuration",{enumerable:!0,get:function(){return f.trimToYearMonthDuration}}),Object.defineProperty(a,"trimToDayTimeDuration",{enumerable:!0,get:function(){return f.trimToDayTimeDuration}})}(ex)),ex}var vL;function TL(){if(vL)return au;vL=1,Object.defineProperty(au,"__esModule",{value:!0}),au.TermFunctionBase=au.ExpressionFunctionBase=void 0;const a=ze(),t=Ae();class u{constructor({arity:e,operator:i,apply:o}){this.arity=e,this.operator=i,this.apply=o}checkArity(e){return Array.isArray(this.arity)?this.arity.includes(e.length):this.arity===Number.POSITIVE_INFINITY?!0:e.length===this.arity}}au.ExpressionFunctionBase=u;class n extends u{constructor({arity:e,operator:i,overloads:o}){super({arity:e,operator:i,apply:async({args:c,exprEval:s,mapping:l})=>this.applyOnTerms(await Promise.all(c.map(d=>s.evaluatorExpressionEvaluation(d,l))),s)}),this.supportsTermExpressions=!0,this.overloads=o}applyOnTerms(e,i){return(this.overloads.search(e,i.context.getSafe(a.KeysExpressionEvaluator.superTypeProvider),i.context.getSafe(a.KeysInitQuery.functionArgumentsCache))??this.handleInvalidTypes(e))(i)(e)}handleInvalidTypes(e){throw new t.InvalidArgumentTypes(e,this.operator)}}return au.TermFunctionBase=n,au}var wL;function Ne(){return wL||(wL=1,function(a){var t=nu&&nu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=nu&&nu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(e4(),a),u(Gue(),a),u(zue(),a),u(TL(),a)}(nu)),nu}var bu={},H0={},SL;function OL(){if(SL)return H0;SL=1,Object.defineProperty(H0,"__esModule",{value:!0}),H0.ActorQueryOperation=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return H0.ActorQueryOperation=t,H0}var G0={},mu={},z0={},AL;function xoe(){if(AL)return z0;AL=1,Object.defineProperty(z0,"__esModule",{value:!0}),z0.MetadataValidationState=void 0;let a=class{constructor(){this.invalidateListeners=[],this.valid=!0}addInvalidateListener(u){this.invalidateListeners.push(u)}invalidate(){if(this.valid){this.valid=!1;for(const u of this.invalidateListeners)u()}}};return z0.MetadataValidationState=a,z0}var bn={},EL;function Noe(){if(EL)return bn;EL=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.cachifyMetadata=bn.validateMetadataBindings=bn.validateMetadataQuads=bn.getMetadataBindings=bn.getMetadataQuads=void 0;function a(e){return r(()=>new Promise((i,o)=>{e.getProperty("metadata",c=>i(c)),e.on("error",o)}).then(i=>u(i)))}bn.getMetadataQuads=a;function t(e){return r(()=>new Promise((i,o)=>{e.getProperty("metadata",c=>i(c)),e.on("error",o)}).then(i=>n(i)))}bn.getMetadataBindings=t;function u(e){for(const i of["cardinality"])if(!(i in e))throw new Error(`Invalid metadata: missing ${i} in ${JSON.stringify(e)}`);return e}bn.validateMetadataQuads=u;function n(e){for(const i of["cardinality","variables"])if(!(i in e))throw new Error(`Invalid metadata: missing ${i} in ${JSON.stringify(e)}`);return e}bn.validateMetadataBindings=n;function r(e){let i;return()=>(i||(i=e(),i.then(o=>o.state.addInvalidateListener(()=>{i=void 0})).catch(()=>{})),i)}return bn.cachifyMetadata=r,bn}var IL;function Er(){return IL||(IL=1,function(a){var t=mu&&mu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=mu&&mu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(xoe(),a),u(Noe(),a)}(mu)),mu}var xL;function NL(){if(xL)return G0;xL=1,Object.defineProperty(G0,"__esModule",{value:!0}),G0.ActorQueryOperationTyped=void 0;const a=ze(),t=Te(),u=Er(),n=OL();let r=class extends n.ActorQueryOperation{constructor(i,o){if(super({...i,operationName:o}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(i){if(!i.operation)return(0,t.failTest)("Missing field 'operation' in a query operation action.");if(i.operation.type!==this.operationName)return(0,t.failTest)(`Actor ${this.name} only supports ${this.operationName} operations, but got ${i.operation.type}`);const o=i.operation;return this.testOperation(o,i.context)}async run(i,o){const c=i.context.get(a.KeysInitQuery.physicalQueryPlanLogger);c&&(c.logOperation(i.operation.type,void 0,i.operation,i.context.get(a.KeysInitQuery.physicalQueryPlanNode),this.name,{}),i.context=i.context.set(a.KeysInitQuery.physicalQueryPlanNode,i.operation));const s=i.operation,l=i.context.set(a.KeysQueryOperation.operation,s),d=await this.runOperation(s,l,o);return"metadata"in d&&(d.metadata=(0,u.cachifyMetadata)(d.metadata)),d}};return G0.ActorQueryOperationTyped=r,G0}var k0={},RL;function Roe(){if(RL)return k0;RL=1,Object.defineProperty(k0,"__esModule",{value:!0}),k0.ActorQueryOperationTypedMediated=void 0;const a=NL();let t=class extends a.ActorQueryOperationTyped{constructor(n,r){super(n,r)}};return k0.ActorQueryOperationTypedMediated=t,k0}var X0={},FL;function Foe(){if(FL)return X0;FL=1,Object.defineProperty(X0,"__esModule",{value:!0}),X0.BusQueryOperation=void 0;const a=Te();let t=class extends a.BusIndexed{constructor(n){super({...n,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}};return X0.BusQueryOperation=t,X0}var DL;function Qt(){return DL||(DL=1,function(a){var t=bu&&bu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=bu&&bu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(OL(),a),u(NL(),a),u(Roe(),a),u(Foe(),a)}(bu)),bu}var _u={},J0={},gu={},K0={},PL;function Doe(){if(PL)return K0;PL=1,Object.defineProperty(K0,"__esModule",{value:!0}),K0.ActorContextPreprocess=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return K0.ActorContextPreprocess=t,K0}var jL;function W0(){return jL||(jL=1,function(a){var t=gu&&gu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=gu&&gu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Doe(),a)}(gu)),gu}var LL;function Poe(){if(LL)return J0;LL=1,Object.defineProperty(J0,"__esModule",{value:!0}),J0.ActorContextPreprocessConvertShortcuts=void 0;const a=W0(),t=Te();let u=class Wie extends a.ActorContextPreprocess{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){return{context:Wie.expandShortcuts(r.context,this.contextKeyShortcuts)}}static expandShortcuts(r,e){for(const i of r.keys())e[i.name]&&(r=r.set(new t.ActionContextKey(e[i.name]),r.get(i)).delete(i));return r}};return J0.ActorContextPreprocessConvertShortcuts=u,J0}var ML;function joe(){return ML||(ML=1,function(a){var t=_u&&_u.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=_u&&_u.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Poe(),a)}(_u)),_u}var vu={},Y0={},Tu={},Z0={},CL;function qL(){if(CL)return Z0;CL=1,Object.defineProperty(Z0,"__esModule",{value:!0}),Z0.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return Z0.BlankNode=a,Z0}var ey={},ty={},BL;function $L(){if(BL)return ty;BL=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return ty.DefaultGraph=a,a.INSTANCE=new a,ty}var ry={},ny={},VL;function Ex(){if(VL)return ny;VL=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return ny.NamedNode=a,ny}var UL;function QL(){if(UL)return ry;UL=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.Literal=void 0;const a=Ex();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return ry.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),ry}var iy={},HL;function GL(){if(HL)return iy;HL=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return iy.Quad=a,iy}var ay={},zL;function kL(){if(zL)return ay;zL=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return ay.Variable=a,ay}var XL;function Loe(){if(XL)return ey;XL=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.DataFactory=void 0;const a=qL(),t=$L(),u=QL(),n=Ex(),r=GL(),e=kL();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return ey.DataFactory=o,ey}var JL;function Moe(){return JL||(JL=1,function(a){var t=Tu&&Tu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Tu&&Tu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(qL(),a),u(Loe(),a),u($L(),a),u(QL(),a),u(Ex(),a),u(GL(),a),u(kL(),a)}(Tu)),Tu}var KL;function Coe(){if(KL)return Y0;KL=1,Object.defineProperty(Y0,"__esModule",{value:!0}),Y0.ActorContextPreprocessSetDefaults=void 0;const a=W0(),t=ze(),u=Te(),n=Moe();let r=class extends a.ActorContextPreprocess{constructor(i){super(i),this.defaultFunctionArgumentsCache={}}async test(i){return(0,u.passTestVoid)()}async run(i){let o=i.context;if(i.initialize){o=o.setDefault(t.KeysInitQuery.queryTimestamp,new Date).setDefault(t.KeysInitQuery.queryTimestampHighResolution,performance.now()).setDefault(t.KeysQuerySourceIdentify.sourceIds,new Map).setDefault(t.KeysCore.log,this.logger).setDefault(t.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(t.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores,new Map).setDefault(t.KeysInitQuery.dataFactory,new n.DataFactory);let c={language:"sparql",version:"1.1"};o.has(t.KeysInitQuery.queryFormat)?(c=o.get(t.KeysInitQuery.queryFormat),c.language==="graphql"&&(o=o.setDefault(t.KeysInitQuery.graphqlSingularizeVariables,{}))):o=o.set(t.KeysInitQuery.queryFormat,c)}return{context:o}}};return Y0.ActorContextPreprocessSetDefaults=r,Y0}var WL;function qoe(){return WL||(WL=1,function(a){var t=vu&&vu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=vu&&vu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Coe(),a)}(vu)),vu}var wu={},uy={},YL;function Boe(){if(YL)return uy;YL=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.ActorContextPreprocessSourceToDestination=void 0;const a=W0(),t=ze(),u=Te();let n=class extends a.ActorContextPreprocess{constructor(e){super(e)}async test(e){return(0,u.passTestVoid)()}async run(e){if(e.context.get(t.KeysInitQuery.querySourcesUnidentified)&&!e.context.get(t.KeysRdfUpdateQuads.destination)){const i=e.context.get(t.KeysInitQuery.querySourcesUnidentified);if(i.length===1)return{context:e.context.set(t.KeysRdfUpdateQuads.destination,i[0])}}return e}};return uy.ActorContextPreprocessSourceToDestination=n,uy}var ZL;function $oe(){return ZL||(ZL=1,function(a){var t=wu&&wu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=wu&&wu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Boe(),a)}(wu)),wu}var Su={},oy={},sy={},Ix={},MO={exports:{}},e8;function cy(){if(e8)return MO.exports;e8=1;var a=typeof Reflect=="object"?Reflect:null,t=a&&typeof a.apply=="function"?a.apply:function(T,S,x){return Function.prototype.apply.call(T,S,x)},u;a&&typeof a.ownKeys=="function"?u=a.ownKeys:Object.getOwnPropertySymbols?u=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:u=function(T){return Object.getOwnPropertyNames(T)};function n(v){console&&console.warn&&console.warn(v)}var r=Number.isNaN||function(T){return T!==T};function e(){e.init.call(this)}MO.exports=e,MO.exports.once=y,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var i=10;function o(v){if(typeof v!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof v)}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(v){if(typeof v!="number"||v<0||r(v))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+v+".");i=v}}),e.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||r(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function c(v){return v._maxListeners===void 0?e.defaultMaxListeners:v._maxListeners}e.prototype.getMaxListeners=function(){return c(this)},e.prototype.emit=function(T){for(var S=[],x=1;x<arguments.length;x++)S.push(arguments[x]);var L=T==="error",O=this._events;if(O!==void 0)L=L&&O.error===void 0;else if(!L)return!1;if(L){var w;if(S.length>0&&(w=S[0]),w instanceof Error)throw w;var A=new Error("Unhandled error."+(w?" ("+w.message+")":""));throw A.context=w,A}var E=O[T];if(E===void 0)return!1;if(typeof E=="function")t(E,this,S);else for(var R=E.length,V=p(E,R),x=0;x<R;++x)t(V[x],this,S);return!0};function s(v,T,S,x){var L,O,w;if(o(S),O=v._events,O===void 0?(O=v._events=Object.create(null),v._eventsCount=0):(O.newListener!==void 0&&(v.emit("newListener",T,S.listener?S.listener:S),O=v._events),w=O[T]),w===void 0)w=O[T]=S,++v._eventsCount;else if(typeof w=="function"?w=O[T]=x?[S,w]:[w,S]:x?w.unshift(S):w.push(S),L=c(v),L>0&&w.length>L&&!w.warned){w.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=v,A.type=T,A.count=w.length,n(A)}return v}e.prototype.addListener=function(T,S){return s(this,T,S,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(T,S){return s(this,T,S,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(v,T,S){var x={fired:!1,wrapFn:void 0,target:v,type:T,listener:S},L=l.bind(x);return L.listener=S,x.wrapFn=L,L}e.prototype.once=function(T,S){return o(S),this.on(T,d(this,T,S)),this},e.prototype.prependOnceListener=function(T,S){return o(S),this.prependListener(T,d(this,T,S)),this},e.prototype.removeListener=function(T,S){var x,L,O,w,A;if(o(S),L=this._events,L===void 0)return this;if(x=L[T],x===void 0)return this;if(x===S||x.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete L[T],L.removeListener&&this.emit("removeListener",T,x.listener||S));else if(typeof x!="function"){for(O=-1,w=x.length-1;w>=0;w--)if(x[w]===S||x[w].listener===S){A=x[w].listener,O=w;break}if(O<0)return this;O===0?x.shift():b(x,O),x.length===1&&(L[T]=x[0]),L.removeListener!==void 0&&this.emit("removeListener",T,A||S)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(T){var S,x,L;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[T]),this;if(arguments.length===0){var O=Object.keys(x),w;for(L=0;L<O.length;++L)w=O[L],w!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=x[T],typeof S=="function")this.removeListener(T,S);else if(S!==void 0)for(L=S.length-1;L>=0;L--)this.removeListener(T,S[L]);return this};function f(v,T,S){var x=v._events;if(x===void 0)return[];var L=x[T];return L===void 0?[]:typeof L=="function"?S?[L.listener||L]:[L]:S?_(L):p(L,L.length)}e.prototype.listeners=function(T){return f(this,T,!0)},e.prototype.rawListeners=function(T){return f(this,T,!1)},e.listenerCount=function(v,T){return typeof v.listenerCount=="function"?v.listenerCount(T):h.call(v,T)},e.prototype.listenerCount=h;function h(v){var T=this._events;if(T!==void 0){var S=T[v];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}e.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function p(v,T){for(var S=new Array(T),x=0;x<T;++x)S[x]=v[x];return S}function b(v,T){for(;T+1<v.length;T++)v[T]=v[T+1];v.pop()}function _(v){for(var T=new Array(v.length),S=0;S<T.length;++S)T[S]=v[S].listener||v[S];return T}function y(v,T){return new Promise(function(S,x){function L(w){v.removeListener(T,O),x(w)}function O(){typeof v.removeListener=="function"&&v.removeListener("error",L),S([].slice.call(arguments))}m(v,T,O,{once:!0}),T!=="error"&&g(v,L,{once:!0})})}function g(v,T,S){typeof v.on=="function"&&m(v,"error",T,S)}function m(v,T,S,x){if(typeof v.on=="function")x.once?v.once(T,S):v.on(T,S);else if(typeof v.addEventListener=="function")v.addEventListener(T,function L(O){x.once&&v.removeEventListener(T,L),S(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof v)}return MO.exports}var ly={},t8;function Voe(){if(t8)return ly;t8=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.LinkedList=void 0;class a{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var u;return(u=this._head)===null||u===void 0?void 0:u.value}get last(){var u;return(u=this._tail)===null||u===void 0?void 0:u.value}get empty(){return this._head===null}push(u){const n={value:u,next:null};this._tail===null?this._head=this._tail=n:this._tail.next=this._tail=n,this._length++}shift(){if(this._head===null)return;const{value:u,next:n}=this._head;return this._head=n,n===null&&(this._tail=null),this._length--,u}clear(){this._length=0,this._head=this._tail=null}}return ly.LinkedList=a,ly}var dy={},r8;function Uoe(){if(r8)return dy;r8=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.createTaskScheduler=void 0;const a=Promise.resolve(void 0);function t(){const u=typeof queueMicrotask=="function"?queueMicrotask:i=>a.then(i),n=typeof setImmediate=="function"?setImmediate:i=>setTimeout(i,0);let r=0,e=null;return i=>{e!==null?e.push(i):++r<100?u(i):(e=[i],n(()=>{for(const o of e)u(o);e=null,r=0}))}}return dy.createTaskScheduler=t,dy}var n8;function gt(){return n8||(n8=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.isIterator=a.isIterable=a.isSourceExpression=a.isPromise=a.isEventEmitter=a.isFunction=a.range=a.union=a.fromIterable=a.fromIterator=a.fromArray=a.single=a.empty=a.wrap=a.WrappingIterator=a.ClonedIterator=a.UnionIterator=a.MultiTransformIterator=a.SimpleTransformIterator=a.TransformIterator=a.BufferedIterator=a.MappingIterator=a.DESTINATION=a.identity=a.IntegerIterator=a.ArrayIterator=a.SingletonIterator=a.EmptyIterator=a.AsyncIterator=a.DESTROYED=a.ENDED=a.CLOSED=a.CLOSING=a.OPEN=a.INIT=a.setTaskScheduler=a.getTaskScheduler=a.scheduleTask=a.LinkedList=void 0;const t=cy(),u=Voe();Object.defineProperty(a,"LinkedList",{enumerable:!0,get:function(){return u.LinkedList}});let r=Uoe().createTaskScheduler();function e(j){r(j)}a.scheduleTask=e;function i(){return r}a.getTaskScheduler=i;function o(j){r=j}a.setTaskScheduler=o,a.INIT=1,a.OPEN=2,a.CLOSING=4,a.CLOSED=8,a.ENDED=16,a.DESTROYED=32;class c extends t.EventEmitter{constructor(I=a.OPEN){super(),this._readable=!1,this._state=I,this.on("newListener",s)}_changeState(I,N=!1){const B=I>this._state&&this._state<a.ENDED;return B&&(this._state=I,I===a.ENDED&&(N?r(()=>this.emit("end")):this.emit("end"))),B}read(){return null}forEach(I,N){this.on("data",Le(I,N))}close(){this._changeState(a.CLOSED)&&this._endAsync()}destroy(I){this.done||this._destroy(I,N=>{I=I||N,I&&this.emit("error",I),this._end(!0)})}_destroy(I,N){N()}_end(I=!1){this._changeState(I?a.DESTROYED:a.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){r(()=>this._end())}get readable(){return this._readable}set readable(I){I=!!I&&!this.done,this._readable!==I&&(this._readable=I,I&&r(()=>this.emit("readable")))}get closed(){return this._state>=a.CLOSING}get ended(){return this._state===a.ENDED}get destroyed(){return this._state===a.DESTROYED}get done(){return this._state>=a.ENDED}toString(){const I=this._toStringDetails();return`[${this.constructor.name}${I?` ${I}`:""}]`}_toStringDetails(){return""}toArray(I){const N=[],B=typeof(I==null?void 0:I.limit)=="number"?I.limit:1/0;return this.ended||B<=0?Promise.resolve(N):new Promise((X,H)=>{const K=()=>X(N),z=Z=>{N.push(Z),N.length>=B&&(this.removeListener("error",H),this.removeListener("data",z),this.removeListener("end",K),X(N))};this.on("error",H),this.on("data",z),this.on("end",K)})}getProperty(I,N){const B=this._properties;if(!N)return B&&B[I];if(B&&I in B)r(()=>N(B[I]));else{let X;(X=this._propertyCallbacks)||(this._propertyCallbacks=X=Object.create(null)),I in X?X[I].push(N):X[I]=[N]}}setProperty(I,N){const B=this._properties||(this._properties=Object.create(null));B[I]=N;const X=this._propertyCallbacks||{},H=X[I];if(H){delete X[I],r(()=>{for(const K of H)K(N)});for(I in X)return;delete this._propertyCallbacks}}getProperties(){const I=this._properties,N={};for(const B in I)N[B]=I[B];return N}setProperties(I){for(const N in I)this.setProperty(N,I[N])}copyProperties(I,N){for(const B of N)I.getProperty(B,X=>this.setProperty(B,X))}transform(I){return new w(this,I)}map(I,N){return new y(this,Le(I,N))}filter(I,N){return this.map(function(B){return I.call(N||this,B)?B:null})}uniq(I=_){const N=new Set;return this.filter(function(B){const X=I.call(this,B);return N.has(X)?!1:(N.add(X),!0)})}prepend(I){return this.transform({prepend:I})}append(I){return this.transform({append:I})}surround(I,N){return this.transform({prepend:I,append:N})}skip(I){return this.map(N=>I-- >0?null:N)}take(I){return this.transform({limit:I})}range(I,N){return this.transform({offset:I,limit:Math.max(N-I+1,0)})}clone(){return new V(this)}[Symbol.asyncIterator](){const I=this;let N=null,B=null,X=null;I.addListener("readable",H),I.addListener("end",H),I.addListener("error",K);function H(){if(N!==null)if(X!==null)K(X);else if(I.done)N({done:!0,value:void 0}),N=B=null,z();else{const Z=I.read();Z!==null&&(N({done:!1,value:Z}),N=B=null)}}function K(Z){B!==null?(B(Z),N=B=X=null,z()):X===null&&(X=Z)}function z(){I.removeListener("readable",H),I.removeListener("end",H),I.removeListener("error",K)}return{next(){return new Promise((Z,de)=>{N=Z,B=de,H()})}}}}a.AsyncIterator=c;function s(j){j==="data"&&(this.removeListener("newListener",s),d(this,"readable",l),this.readable&&r(()=>l.call(this)))}function l(){let j;for(;this.listenerCount("data")!==0&&(j=this.read())!==null;)this.emit("data",j);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",l),d(this,"newListener",s))}function d(j,I,N){j.listeners(I).includes(N)||j.on(I,N)}class f extends c{constructor(){super(),this._changeState(a.ENDED,!0)}}a.EmptyIterator=f;class h extends c{constructor(I){super(),this._item=I,I===null?this.close():this.readable=!0}read(){const I=this._item;return this._item=null,this.close(),I}_toStringDetails(){return this._item===null?"":`(${this._item})`}}a.SingletonIterator=h;class p extends c{constructor(I=[],{autoStart:N=!0,preserve:B=!0}={}){super();const X=B||!Array.isArray(I)?[...I]:I;this._index=0,this._sourceStarted=N!==!1,this._truncateThreshold=B?-1:64,this._sourceStarted&&X.length===0?this.close():this._buffer=X,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let I=null;return this._buffer&&(this._index<this._buffer.length&&(I=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),I}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(I,N){delete this._buffer,N()}toArray(I={}){if(!this._buffer)return Promise.resolve([]);const{length:N}=this._buffer,B=this._index,X=typeof I.limit!="number"?N:B+I.limit,H=this._buffer.slice(B,X);return this._index=X,X>=N&&this.close(),Promise.resolve(H)}}a.ArrayIterator=p;class b extends c{constructor({start:I=0,step:N=1,end:B}={}){super(),Number.isFinite(I)&&(I=Math.trunc(I)),this._next=I,Number.isFinite(N)&&(N=Math.trunc(N)),this._step=N;const X=N>=0,H=X?1/0:-1/0;Number.isFinite(B)?B=Math.trunc(B):B!==-H&&(B=H),this._last=B,!Number.isFinite(I)||(X?I>B:I<B)?this.close():this.readable=!0}read(){if(this.closed)return null;const I=this._next,N=this._step,B=this._last,X=this._next+=N;return(N>=0?X>B:X<B)&&this.close(),I}_toStringDetails(){return`(${this._next}...${this._last})`}}a.IntegerIterator=b;function _(j){return j}a.identity=_,a.DESTINATION=Symbol("destination");class y extends c{constructor(I,N=_,B={}){super(),this._map=N,this._source=g(I),this._destroySource=B.destroySource!==!1,I.done?this.close():(this._source[a.DESTINATION]=this,this._source.on("end",x),this._source.on("error",S),this._source.on("readable",T),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let I,N;for(;(I=this._source.read())!==null;)if((N=this._map(I))!==null)return N}this.readable=!1,this._source.done&&this.close()}return null}_end(I){this._source.removeListener("end",x),this._source.removeListener("error",S),this._source.removeListener("readable",T),delete this._source[a.DESTINATION],this._destroySource&&this._source.destroy(),super._end(I)}}a.MappingIterator=y;function g(j,I=!1){if(!j||!Ce(j.read)||!Ce(j.on))throw new TypeError(`Invalid source: ${j}`);if(!I&&j[a.DESTINATION])throw new Error("The source already has a destination");return j}class m extends c{constructor({maxBufferSize:I=4,autoStart:N=!0}={}){super(a.INIT),this._buffer=new u.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=I,r(()=>this._init(N)),this._sourceStarted=N!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(I){I!==1/0&&(I=Number.isFinite(I)?Math.max(Math.trunc(I),1):4),this._maxBufferSize!==I&&(this._maxBufferSize=I,this._state===a.OPEN&&this._fillBuffer())}_init(I){let N=!1;this._reading=!0,this._begin(()=>{if(N)throw new Error("done callback called multiple times");N=!0,this._reading=!1,this._changeState(a.OPEN),I?this._fillBufferAsync():this.readable=!0})}_begin(I){I()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const I=this._buffer;let N;return I.empty?(N=null,this.readable=!1):N=I.shift(),!this._reading&&I.length<this._maxBufferSize&&(this.closed?I.empty&&this._endAsync():this._fillBufferAsync()),N}_read(I,N){N()}_push(I){this.done||(this._pushedCount++,this._buffer.push(I),this.readable=!0)}_fillBuffer(){let I;this._reading||(this.closed?this._completeClose():(I=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(I,()=>{if(!I)throw new Error("done callback called multiple times");I=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,r(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(a.CLOSING):this._completeClose()}_completeClose(){this._changeState(a.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(I,N){this._buffer.clear(),N()}_flush(I){I()}_toStringDetails(){const I=this._buffer;return`{${I.empty?"":`next: ${I.first}, `}buffer: ${I.length}}`}}a.BufferedIterator=m;class v extends m{constructor(I,N=I||{}){super(N),this._boundPush=B=>this._push(B),we(I)||(I=N.source),Ve(I)?this.source=I:I&&(this._createSource=ge(I)?()=>I:I,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!N.optional,this._destroySource=N.destroySource!==!1}get source(){return Ce(this._createSource)&&this._loadSourceAsync(),this._source}set source(I){const N=this._source=this._validateSource(I);N[a.DESTINATION]=this,this.done?this._destroySource&&N.destroy():N.done?this.close():(N.on("end",L),N.on("readable",O),N.on("error",S))}_loadSourceAsync(){Ce(this._createSource)&&(Promise.resolve(this._createSource()).then(I=>{delete this._createSource,this.source=I,this._fillBuffer()},I=>this.emit("error",I)),this._createSource=null)}_validateSource(I,N=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return g(I,N)}_read(I,N){const B=()=>{this._pushedCount<I&&!this.closed?r(()=>this._readAndTransform(B,N)):N()};this._readAndTransform(B,N)}_readAndTransform(I,N){let B;const X=this.source;!X||X.done||(B=X.read())===null?N():this._optional?this._optionalTransform(B,I):this._transform(B,I,this._boundPush)}_optionalTransform(I,N){const B=this._pushedCount;this._transform(I,()=>{B===this._pushedCount&&this._push(I),N()},this._boundPush)}_transform(I,N,B){B(I),N()}_closeWhenDone(){this.close()}_end(I){const N=this._source;N&&(N.removeListener("end",L),N.removeListener("error",S),N.removeListener("readable",O),delete N[a.DESTINATION],this._destroySource&&N.destroy()),super._end(I)}}a.TransformIterator=v;function T(){this[a.DESTINATION].readable=!0}function S(j){this[a.DESTINATION].emit("error",j)}function x(){this[a.DESTINATION].close()}function L(){this[a.DESTINATION]._closeWhenDone()}function O(){this[a.DESTINATION]._sourceStarted!==!1&&this[a.DESTINATION]._fillBuffer()}class w extends v{constructor(I,N){if(super(I,N),this._offset=0,this._limit=1/0,this._filter=B=>!0,N=N||(we(I)?null:I),N){const B=Ce(N)?N:N.transform,{limit:X,offset:H,filter:K,map:z,prepend:Z,append:de}=N;H===1/0||X===-1/0?this._limit=0:(Number.isFinite(H)&&(this._offset=Math.max(Math.trunc(H),0)),Number.isFinite(X)&&(this._limit=Math.max(Math.trunc(X),0)),Ce(K)&&(this._filter=K),Ce(z)&&(this._map=z),this._transform=Ce(B)?B:null),Z&&(this._prepender=Ve(Z)?Z:J(Z)),de&&(this._appender=Ve(de)?de:J(de))}}_read(I,N){const B=()=>this._readAndTransformSimple(I,X,N);this._readAndTransformSimple(I,X,N);function X(){r(B)}}_readAndTransformSimple(I,N,B){let X;const{source:H}=this;if(!H||H.done){B();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<I&&(X=H.read())!==null;){if(!this._filter(X)||this._offset!==0&&this._offset--)continue;const K=typeof this._map>"u"?X:this._map(X);if(K===null)this._optional&&this._push(X);else if(!Ce(this._transform))this._push(K);else{this._optional?this._optionalTransform(K,N):this._transform(K,N,this._boundPush);return}--this._limit===0&&this.close()}B()}_begin(I){this._insert(this._prepender,I),delete this._prepender}_flush(I){this._insert(this._appender,I),delete this._appender}_insert(I,N){const B=H=>this._push(H);!I||I.done?N():(I.on("data",B),I.on("end",X));function X(){I.removeListener("data",B),I.removeListener("end",X),N()}}}a.SimpleTransformIterator=w;class A extends v{constructor(I,N){if(super(I,N),this._transformerQueue=[],N){const B=Ce(N)?N:N.multiTransform;B&&(this._createTransformer=B)}}_read(I,N){const B=this._transformerQueue,X=this._optional;let H,K;for(;(H=B[0])&&H.transformer.done;){X&&H.item!==null&&(I--,this._push(H.item)),B.shift();const{transformer:Z}=H;Z.removeListener("end",O),Z.removeListener("readable",O),Z.removeListener("error",S)}const{source:z}=this;for(;z&&!z.done&&B.length<this.maxBufferSize&&(K=z.read(),K!==null);){const Z=this._createTransformer(K)||new f;Z[a.DESTINATION]=this,Z.on("end",O),Z.on("readable",O),Z.on("error",S),B.push({transformer:Z,item:K})}if(H=B[0],H){const{transformer:Z}=H;for(;I-- >0&&(K=Z.read())!==null;)this._push(K),X&&(H.item=null)}else z&&z.done&&this.close();N()}_createTransformer(I){return new h(I)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(I){if(super._end(I),this._destroySource)for(const N of this._transformerQueue)N.transformer.destroy()}}a.MultiTransformIterator=A;class E extends m{constructor(I,N={}){super(N),this._sources=[],this._currentSource=-1;const B=N.autoStart!==!1;if(Ve(I))I.on("error",X=>this.emit("error",X)),this._pending={loading:!1,sources:I},B&&this._loadSources();else if(Array.isArray(I)&&I.length>0)for(const X of I)this._addSource(X);else B&&this.close();this._destroySources=N.destroySources!==!1}_loadSources(){const I=this._pending.sources;this._pending.loading=!0,I.done?(delete this._pending,this.close()):(I.on("data",N=>{this._addSource(N),this._fillBufferAsync()}),I.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(I){ge(I)&&(I=ne(I)),I.done||(this._sources.push(I),I[a.DESTINATION]=this,I.on("error",S),I.on("readable",O),I.on("end",R))}_removeEmptySources(){this._sources=this._sources.filter((I,N)=>(I.done&&N<=this._currentSource&&this._currentSource--,!I.done)),this._fillBuffer()}_read(I,N){var B;((B=this._pending)===null||B===void 0?void 0:B.loading)===!1&&this._loadSources();let X=0,H;for(;X!==(X=I);)for(let K=0;K<this._sources.length&&I>0;K++)this._currentSource=(this._currentSource+1)%this._sources.length,(H=this._sources[this._currentSource].read())!==null&&(I--,this._push(H));!this._pending&&this._sources.length===0&&this.close(),N()}_end(I=!1){if(super._end(I),this._destroySources){for(const N of this._sources)N.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}a.UnionIterator=E;function R(){this[a.DESTINATION]._removeEmptySources()}class V extends v{constructor(I){super(I,{autoStart:!1}),this._readPosition=0,this._reading=!1,I&&(this.readable=!0)}_init(){}close(){c.prototype.close.call(this)}get source(){return super.source}set source(I){const N=this._source=this._validateSource(I),B=N&&N[a.DESTINATION]||(N[a.DESTINATION]=new $(N));this.done?this._destroySource&&N.destroy():B.endsAt(0)?this.close():(B.register(this),(N._sourceStarted===!1||B.readAt(0)!==null)&&(this.readable=!0));const X=this._propertyCallbacks;for(const H in X){const K=X[H];for(const z of K)this._getSourceProperty(H,z)}}_validateSource(I,N=!1){const B=I&&I[a.DESTINATION];return super._validateSource(I,!B||B instanceof $)}getProperty(I,N){const{source:B}=this,X=this._properties,H=X&&I in X;if(!N)return H?X&&X[I]:B&&B.getProperty(I);super.getProperty(I,N),B&&!H&&this._getSourceProperty(I,N)}_getSourceProperty(I,N){this.source.getProperty(I,B=>{(!this._properties||!(I in this._properties))&&N(B)})}getProperties(){const I=this.source?this.source.getProperties():{},N=this._properties;for(const B in N)I[B]=N[B];return I}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const I=this.source;let N=null;if(!this.done&&I){const B=I[a.DESTINATION];(N=B.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,B.endsAt(this._readPosition)&&this.close()}return N}_end(I){const N=this.source,B=N==null?void 0:N[a.DESTINATION];B&&B.unregister(this),m.prototype._end.call(this,I)}}a.ClonedIterator=V;class ${constructor(I){if(this._history=[],this._trackers=new Set,this._source=I,!I.done){const N=()=>{for(const H of this._trackers)H.readable=!0},B=H=>{for(const K of this._trackers)K.emit("error",H)},X=()=>{for(const H of this._trackers)H._sourceStarted!==!1&&H._readPosition===this._history.length&&H.close();this._trackers.clear(),I.removeListener("end",X),I.removeListener("error",B),I.removeListener("readable",N)};I.on("end",X),I.on("error",B),I.on("readable",N)}}register(I){this._source.done||this._trackers.add(I)}unregister(I){this._trackers.delete(I)}readAt(I){let N=null;return I<this._history.length?N=this._history[I]:!this._source.done&&(N=this._source.read())!==null&&(this._history[I]=N),N}endsAt(I){return this._source.done&&this._history.length===I}}class Q extends c{constructor(I,N){super(),this._source=null,this._destroySource=(N==null?void 0:N.destroySource)!==!1,ge(I)?(this._source=new c,I.then(B=>{this._source=null,this.source=B}).catch(B=>this.emit("error",B))):I&&(this.source=I)}set source(I){let N=I;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(G(N)&&(N=N[Symbol.iterator]()),D(N)){let B=N;N=new t.EventEmitter,N.read=()=>{if(B!==null){let X;for(;!(X=B.next()).done;)if(X.value!==null)return X.value;B=null,this.close()}return null}}else N=g(N);if(this.done){this._destroySource&&Ce(N.destroy)&&N.destroy();return}N[a.DESTINATION]=this,N.on("end",x),N.on("error",S),N.on("readable",T),this._source=N,this.readable=N.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const I=this._source.read();if(I!==null)return I;this.readable=!1}return null}_end(I=!1){this._source!==null&&(this._source.removeListener("end",x),this._source.removeListener("error",S),this._source.removeListener("readable",T),delete this._source[a.DESTINATION],this._destroySource&&Ce(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(I)}}a.WrappingIterator=Q;function ne(j,I){if(I&&("autoStart"in I||"optional"in I||"source"in I||"maxBufferSize"in I))return j&&!Ve(j)&&(j=new Q(j)),new v(j,I);if(!j)return ie();if(ge(j))return new Q(j,I);if(j instanceof c)return j;if(Array.isArray(j))return J(j);if(G(j)||D(j)||Ve(j))return new Q(j,I);throw new TypeError(`Invalid source: ${j}`)}a.wrap=ne;function ie(){return new f}a.empty=ie;function fe(j){return new h(j)}a.single=fe;function J(j){return new p(j)}a.fromArray=J;function _e(j){return new Q(j)}a.fromIterator=_e;function Fe(j){return new Q(j)}a.fromIterable=Fe;function ve(j){return new E(j)}a.union=ve;function te(j,I,N){return new b({start:j,end:I,step:N})}a.range=te;function Le(j,I){return I?j.bind(I):j}function Ce(j){return typeof j=="function"}a.isFunction=Ce;function Ve(j){return Ce(j==null?void 0:j.on)}a.isEventEmitter=Ve;function ge(j){return Ce(j==null?void 0:j.then)}a.isPromise=ge;function we(j){return j&&(Ve(j)||ge(j)||Ce(j))}a.isSourceExpression=we;function G(j){return j&&Symbol.iterator in j}a.isIterable=G;function D(j){return Ce(j==null?void 0:j.next)}a.isIterator=D}(Ix)),Ix}var xx={},Ou={},fy={},i8;function Qoe(){if(i8)return fy;i8=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.BlankNodeScoped=void 0;let a=class{constructor(u,n){this.termType="BlankNode",this.value=u,this.skolemized=n}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}};return fy.BlankNodeScoped=a,fy}var hy={},a8;function Hoe(){if(a8)return hy;a8=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.BlankNodeBindingsScoped=void 0;let a=class{constructor(u){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}};return hy.BlankNodeBindingsScoped=a,hy}var u8;function Nx(){return u8||(u8=1,function(a){var t=Ou&&Ou.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ou&&Ou.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Qoe(),a),u(Hoe(),a)}(Ou)),Ou}var o8;function Rx(){return o8||(o8=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.deskolemizeOperation=a.deskolemizeQuad=a.deskolemizeTermNestedThrowing=a.deskolemizeTerm=a.skolemizeBindingsStream=a.skolemizeQuadStream=a.skolemizeBindings=a.skolemizeQuad=a.skolemizeTerm=a.getSourceId=a.SKOLEM_PREFIX=void 0;const t=Nx(),u=Fn(),n=ht();a.SKOLEM_PREFIX="urn:comunica_skolem:source_";function r(p,b){let _=p.get(b.referenceValue);return _===void 0&&(_=`${p.size}`,p.set(b.referenceValue,_)),_}a.getSourceId=r;function e(p,b,_){return b.termType==="BlankNode"?new t.BlankNodeScoped(`bc_${_}_${b.value}`,p.namedNode(`${a.SKOLEM_PREFIX}${_}:${b.value}`)):b}a.skolemizeTerm=e;function i(p,b,_){return(0,u.mapTermsNested)(b,y=>e(p,y,_))}a.skolemizeQuad=i;function o(p,b,_){return b.map(y=>y.termType==="Quad"?i(p,y,_):e(p,y,_))}a.skolemizeBindings=o;function c(p,b,_){const y=b.map(m=>i(p,m,_));function g(){b.getProperty("metadata",m=>{y.setProperty("metadata",m),m.state.addInvalidateListener(g)})}return g(),y}a.skolemizeQuadStream=c;function s(p,b,_){const y=b.map(m=>o(p,m,_));function g(){b.getProperty("metadata",m=>{y.setProperty("metadata",m),m.state.addInvalidateListener(g)})}return g(),y}a.skolemizeBindingsStream=s;function l(p,b,_){if(b.termType==="BlankNode"&&"skolemized"in b&&(b=b.skolemized),b.termType==="NamedNode"&&b.value.startsWith(a.SKOLEM_PREFIX)){const y=b.value.indexOf(":",a.SKOLEM_PREFIX.length);if(b.value.slice(a.SKOLEM_PREFIX.length,y)===_){const m=b.value.slice(y+1,b.value.length);return p.blankNode(m)}return null}return b}a.deskolemizeTerm=l;function d(p,b,_){if(b.termType==="Quad")return(0,u.mapTermsNested)(b,g=>{const m=l(p,g,_);if(!m)throw new Error("Skolemized term is not in scope for this source");return m});const y=l(p,b,_);if(y===null)throw new Error("Skolemized term is not in scope for this source");return y}a.deskolemizeTermNestedThrowing=d;function f(p,b,_){return(0,u.mapTermsNested)(b,y=>l(p,y,_)??y)}a.deskolemizeQuad=f;function h(p,b,_){const y=new n.Factory;try{return n.Util.mapOperation(b,{[n.Algebra.types.PATTERN](g,m){return{result:Object.assign(m.createPattern(d(p,g.subject,_),d(p,g.predicate,_),d(p,g.object,_),d(p,g.graph,_)),{metadata:g.metadata}),recurse:!1}},[n.Algebra.types.PATH](g,m){return{result:Object.assign(m.createPath(d(p,g.subject,_),g.predicate,d(p,g.object,_),d(p,g.graph,_)),{metadata:g.metadata}),recurse:!1}}},y)}catch{}}a.deskolemizeOperation=h}(xx)),xx}var s8;function c8(){if(s8)return sy;s8=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.QuerySourceSkolemized=void 0;const a=ze(),t=Er(),u=gt(),n=Rx();let r=class{constructor(i,o){this.innerSource=i,this.sourceId=o}async getSelectorShape(i){return this.innerSource.getSelectorShape(i)}queryBindings(i,o,c){const s=o.getSafe(a.KeysInitQuery.dataFactory),l=(0,n.deskolemizeOperation)(s,i,this.sourceId);if(!l){const d=new u.ArrayIterator([],{autoStart:!1});return d.setProperty("metadata",{state:new t.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]}),d}return(0,n.skolemizeBindingsStream)(s,this.innerSource.queryBindings(l,o,c),this.sourceId)}queryBoolean(i,o){return this.innerSource.queryBoolean(i,o)}queryQuads(i,o){const c=o.getSafe(a.KeysInitQuery.dataFactory),s=(0,n.deskolemizeOperation)(c,i,this.sourceId);if(!s){const l=new u.ArrayIterator([],{autoStart:!1});return l.setProperty("metadata",{state:new t.MetadataValidationState,cardinality:{type:"exact",value:0}}),l}return(0,n.skolemizeQuadStream)(c,this.innerSource.queryQuads(s,o),this.sourceId)}queryVoid(i,o){return this.innerSource.queryVoid(i,o)}get referenceValue(){return this.innerSource.referenceValue}toString(){return`${this.innerSource.toString()}(SkolemID:${this.sourceId})`}};return sy.QuerySourceSkolemized=r,sy}var l8;function Goe(){if(l8)return oy;l8=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.ActorContextPreprocessQuerySourceSkolemize=void 0;const a=W0(),t=ze(),u=Te(),n=c8(),r=Rx();let e=class extends a.ActorContextPreprocess{constructor(o){super(o)}async test(o){return(0,u.passTestVoid)()}async run(o){let c=o.context;if(c.has(t.KeysQueryOperation.querySources)){c.has(t.KeysQuerySourceIdentify.sourceIds)||(c=c.set(t.KeysQuerySourceIdentify.sourceIds,new Map));const s=c.getSafe(t.KeysQuerySourceIdentify.sourceIds);let l=c.getSafe(t.KeysQueryOperation.querySources);l=l.map(d=>({source:new n.QuerySourceSkolemized(d.source,(0,r.getSourceId)(s,d.source)),context:d.context})),c=c.set(t.KeysQueryOperation.querySources,l)}return{context:c}}};return oy.ActorContextPreprocessQuerySourceSkolemize=e,oy}var d8;function f8(){return d8||(d8=1,function(a){var t=Su&&Su.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Su&&Su.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Goe(),a),u(c8(),a),u(Rx(),a)}(Su)),Su}var Au={},py={},h8;function zoe(){if(h8)return py;h8=1,Object.defineProperty(py,"__esModule",{value:!0}),py.MediatorCombinePipeline=void 0;const a=Te();let t=class extends a.Mediator{constructor(n){super(n)}async mediate(n){let r;try{r=this.publish(n)}catch{return n}if(this.filterFailures){const c=[];for(const s of r)(await s.reply).isPassed()&&c.push(s);r=c}const e=[];if(r=await Promise.all(r.map(async({actor:c,reply:s},l)=>{try{const d=await s,f=d.getOrThrow();return e[l]=d.getSideData(),{actor:c,reply:f}}catch(d){throw new Error(this.constructFailureMessage(n,[d.message]))}})),this.order){const c=s=>{const l=this.field?s[this.field]:s;if(typeof l!="number")throw new TypeError("Cannot order elements that are not numbers.");return l};r=r.sort((s,l)=>(this.order==="increasing"?1:-1)*(c(s.reply)-c(l.reply)))}let i=n,o=0;for(const{actor:c}of r)i={...i,...await c.runObservable(i,e[o++])};return i}mediateWith(){throw new Error("Method not supported.")}};return py.MediatorCombinePipeline=t,py}var p8;function y8(){return p8||(p8=1,function(a){var t=Au&&Au.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Au&&Au.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(zoe(),a)}(Au)),Au}var Eu={},yy={},Iu={},by={},b8;function koe(){if(b8)return by;b8=1,Object.defineProperty(by,"__esModule",{value:!0}),by.ActorHashBindings=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return by.ActorHashBindings=t,by}var m8;function Xoe(){return m8||(m8=1,function(a){var t=Iu&&Iu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Iu&&Iu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(koe(),a)}(Iu)),Iu}var Fx={exports:{}};/**
 * @preserve
 * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
 *
 * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
 * @see http://github.com/homebrewing/brauhaus-diff
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 */var _8;function g8(){return _8||(_8=1,function(a){(function(){var t;function u(n,r){var e=this instanceof u?this:t;if(e.reset(r),typeof n=="string"&&n.length>0&&e.hash(n),e!==this)return e}u.prototype.hash=function(n){var r,e,i,o,c;switch(c=n.length,this.len+=c,e=this.k1,i=0,this.rem){case 0:e^=c>i?n.charCodeAt(i++)&65535:0;case 1:e^=c>i?(n.charCodeAt(i++)&65535)<<8:0;case 2:e^=c>i?(n.charCodeAt(i++)&65535)<<16:0;case 3:e^=c>i?(n.charCodeAt(i)&255)<<24:0,e^=c>i?(n.charCodeAt(i++)&65280)>>8:0}if(this.rem=c+this.rem&3,c-=this.rem,c>0){for(r=this.h1;e=e*11601+(e&65535)*3432906752&4294967295,e=e<<15|e>>>17,e=e*13715+(e&65535)*461832192&4294967295,r^=e,r=r<<13|r>>>19,r=r*5+3864292196&4294967295,!(i>=c);)e=n.charCodeAt(i++)&65535^(n.charCodeAt(i++)&65535)<<8^(n.charCodeAt(i++)&65535)<<16,o=n.charCodeAt(i++),e^=(o&255)<<24^(o&65280)>>8;switch(e=0,this.rem){case 3:e^=(n.charCodeAt(i+2)&65535)<<16;case 2:e^=(n.charCodeAt(i+1)&65535)<<8;case 1:e^=n.charCodeAt(i)&65535}this.h1=r}return this.k1=e,this},u.prototype.result=function(){var n,r;return n=this.k1,r=this.h1,n>0&&(n=n*11601+(n&65535)*3432906752&4294967295,n=n<<15|n>>>17,n=n*13715+(n&65535)*461832192&4294967295,r^=n),r^=this.len,r^=r>>>16,r=r*51819+(r&65535)*2246770688&4294967295,r^=r>>>13,r=r*44597+(r&65535)*3266445312&4294967295,r^=r>>>16,r>>>0},u.prototype.reset=function(n){return this.h1=typeof n=="number"?n:0,this.rem=this.k1=this.len=0,this},t=new u,a.exports=u})()}(Fx)),Fx.exports}var v8;function Joe(){if(v8)return yy;v8=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.ActorHashBindingsMurmur=void 0;const a=Xoe(),t=Te(),u=g8();let n=class extends a.ActorHashBindings{async test(e){return(0,t.passTestVoid)()}async run(e){return{hashFunction:(i,o)=>{var s;let c=u();for(const l of o)c=c.hash(((s=i.get(l))==null?void 0:s.value)??"UNDEF");return c.result()}}}};return yy.ActorHashBindingsMurmur=n,yy}var T8;function Koe(){return T8||(T8=1,function(a){var t=Eu&&Eu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Eu&&Eu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Joe(),a)}(Eu)),Eu}var xu={},my={},w8;function Woe(){if(w8)return my;w8=1,Object.defineProperty(my,"__esModule",{value:!0}),my.MediatorRace=void 0;const a=Te();let t=class extends a.Mediator{constructor(n){super(n)}mediateWith(n,r){return new Promise((e,i)=>{const o=[];for(const c of r)c.reply.then(s=>{s.isPassed()?e((0,a.passTestWithSideData)(c.actor,s.getSideData())):(o.push(s.getFailMessage()),o.length===r.length&&e((0,a.failTest)(this.constructFailureMessage(n,o))))}).catch(s=>{i(s)})})}};return my.MediatorRace=t,my}var S8;function Ir(){return S8||(S8=1,function(a){var t=xu&&xu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=xu&&xu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Woe(),a)}(xu)),xu}var Nu={},_y={},Ru={},gy={},O8;function Yoe(){if(O8)return gy;O8=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.ActorHashQuads=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return gy.ActorHashQuads=t,gy}var A8;function Zoe(){return A8||(A8=1,function(a){var t=Ru&&Ru.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ru&&Ru.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Yoe(),a)}(Ru)),Ru}var E8;function ese(){if(E8)return _y;E8=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.ActorHashQuadsMurmur=void 0;const a=Zoe(),t=Te(),u=g8();let n=class extends a.ActorHashQuads{async test(e){return(0,t.passTestVoid)()}async run(e){return{hashFunction:i=>{const o=u(i.subject.value);return o.hash(i.predicate.value),o.hash(i.object.value),o.hash(i.graph.value),o.result()}}}};return _y.ActorHashQuadsMurmur=n,_y}var I8;function tse(){return I8||(I8=1,function(a){var t=Nu&&Nu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Nu&&Nu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ese(),a)}(Nu)),Nu}var Fu={},vy={},Du={},Ty={},x8;function rse(){if(x8)return Ty;x8=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.ActorOptimizeQueryOperation=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return Ty.ActorOptimizeQueryOperation=t,Ty}var N8;function Dn(){return N8||(N8=1,function(a){var t=Du&&Du.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Du&&Du.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(rse(),a)}(Du)),Du}var R8;function nse(){if(R8)return vy;R8=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.ActorOptimizeQueryOperationRewriteCopy=void 0;const a=Dn(),t=ze(),u=Te(),n=ht();let r=class extends a.ActorOptimizeQueryOperation{constructor(i){super(i)}async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(t.KeysInitQuery.dataFactory),c=new n.Factory(o);return{operation:n.Util.mapOperation(i.operation,{[n.Algebra.types.COPY](l,d){let f;return typeof l.destination=="string"&&typeof l.source=="string"&&l.destination===l.source||typeof l.destination!="string"&&typeof l.source!="string"&&l.destination.equals(l.source)?f=d.createCompositeUpdate([]):f=d.createCompositeUpdate([d.createDrop(l.destination,!0),d.createAdd(l.source,l.destination,l.silent)]),{result:f,recurse:!1}}},c),context:i.context}}};return vy.ActorOptimizeQueryOperationRewriteCopy=r,vy}var F8;function ise(){return F8||(F8=1,function(a){var t=Fu&&Fu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Fu&&Fu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(nse(),a)}(Fu)),Fu}var Pu={},wy={},D8;function ase(){if(D8)return wy;D8=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.ActorOptimizeQueryOperationRewriteMove=void 0;const a=Dn(),t=ze(),u=Te(),n=ht();let r=class extends a.ActorOptimizeQueryOperation{constructor(i){super(i)}async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(t.KeysInitQuery.dataFactory),c=new n.Factory(o);return{operation:n.Util.mapOperation(i.operation,{[n.Algebra.types.MOVE](l,d){let f;if(typeof l.destination=="string"&&typeof l.source=="string"&&l.destination===l.source||typeof l.destination!="string"&&typeof l.source!="string"&&l.destination.equals(l.source))f=d.createCompositeUpdate([]);else{const h=[d.createDrop(l.destination,!0),d.createAdd(l.source,l.destination,l.silent),d.createDrop(l.source)];f=d.createCompositeUpdate(h)}return{result:f,recurse:!1}}},c),context:i.context}}};return wy.ActorOptimizeQueryOperationRewriteMove=r,wy}var P8;function use(){return P8||(P8=1,function(a){var t=Pu&&Pu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Pu&&Pu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ase(),a)}(Pu)),Pu}var ju={},Sy={},Lu={},Oy={},j8;function L8(){if(j8)return Oy;j8=1,Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return Oy.BlankNode=a,Oy}var Ay={},Ey={},M8;function C8(){if(M8)return Ey;M8=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return Ey.DefaultGraph=a,a.INSTANCE=new a,Ey}var Iy={},xy={},q8;function Dx(){if(q8)return xy;q8=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return xy.NamedNode=a,xy}var B8;function $8(){if(B8)return Iy;B8=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.Literal=void 0;const a=Dx();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Iy.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Iy}var Ny={},V8;function U8(){if(V8)return Ny;V8=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return Ny.Quad=a,Ny}var Ry={},Q8;function H8(){if(Q8)return Ry;Q8=1,Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return Ry.Variable=a,Ry}var G8;function ose(){if(G8)return Ay;G8=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.DataFactory=void 0;const a=L8(),t=C8(),u=$8(),n=Dx(),r=U8(),e=H8();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Ay.DataFactory=o,Ay}var z8;function sse(){return z8||(z8=1,function(a){var t=Lu&&Lu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Lu&&Lu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(L8(),a),u(ose(),a),u(C8(),a),u($8(),a),u(Dx(),a),u(U8(),a),u(H8(),a)}(Lu)),Lu}var k8;function cse(){if(k8)return Sy;k8=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.ActorOptimizeQueryOperationRewriteAdd=void 0;const a=Dn(),t=ze(),u=Te(),n=sse(),r=ht(),e=new n.DataFactory;let i=class extends a.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,u.passTestVoid)()}async run(c){const s=c.context.getSafe(t.KeysInitQuery.dataFactory),l=new r.Factory(s);return{operation:r.Util.mapOperation(c.operation,{[r.Algebra.types.ADD](f,h){const p=f.destination==="DEFAULT"?e.defaultGraph():f.destination,b=f.source==="DEFAULT"?e.defaultGraph():f.source;return{result:h.createDeleteInsert(void 0,[h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),p)],h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),b)),recurse:!1}}},l),context:c.context}}};return Sy.ActorOptimizeQueryOperationRewriteAdd=i,Sy}var X8;function lse(){return X8||(X8=1,function(a){var t=ju&&ju.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ju&&ju.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(cse(),a)}(ju)),ju}var Mu={},Fy={},Cu={},en={},qu={},Dy={},J8;function K8(){if(J8)return Dy;J8=1,Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return Dy.BlankNode=a,Dy}var Py={},jy={},W8;function Y8(){if(W8)return jy;W8=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return jy.DefaultGraph=a,a.INSTANCE=new a,jy}var Ly={},My={},Z8;function Px(){if(Z8)return My;Z8=1,Object.defineProperty(My,"__esModule",{value:!0}),My.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return My.NamedNode=a,My}var e5;function t5(){if(e5)return Ly;e5=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.Literal=void 0;const a=Px();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Ly.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Ly}var Cy={},r5;function n5(){if(r5)return Cy;r5=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return Cy.Quad=a,Cy}var qy={},i5;function a5(){if(i5)return qy;i5=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return qy.Variable=a,qy}var u5;function dse(){if(u5)return Py;u5=1,Object.defineProperty(Py,"__esModule",{value:!0}),Py.DataFactory=void 0;const a=K8(),t=Y8(),u=t5(),n=Px(),r=n5(),e=a5();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Py.DataFactory=o,Py}var o5;function fse(){return o5||(o5=1,function(a){var t=qu&&qu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=qu&&qu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(K8(),a),u(dse(),a),u(Y8(),a),u(t5(),a),u(Px(),a),u(n5(),a),u(a5(),a)}(qu)),qu}var s5;function hse(){if(s5)return en;s5=1,Object.defineProperty(en,"__esModule",{value:!0}),en.estimateNpsCardinality=en.estimateJoinCardinality=en.estimateUnionCardinality=en.estimateSliceCardinality=en.estimateMinusCardinality=en.estimateCardinality=void 0;const a=fse(),t=ht(),u=new a.DataFactory,n=new t.Factory(u);function r(l,d){const f=d.getCardinality(l);if(f)return f;switch(l.type){case t.Algebra.types.ASK:return{type:"exact",value:1,dataset:d.uri};case t.Algebra.types.LOAD:case t.Algebra.types.DELETE_INSERT:case t.Algebra.types.ADD:case t.Algebra.types.COMPOSITE_UPDATE:case t.Algebra.types.CLEAR:case t.Algebra.types.NOP:case t.Algebra.types.DROP:case t.Algebra.types.CREATE:case t.Algebra.types.MOVE:case t.Algebra.types.COPY:return{type:"exact",value:0,dataset:d.uri};case t.Algebra.types.PROJECT:case t.Algebra.types.FILTER:case t.Algebra.types.ORDER_BY:case t.Algebra.types.GROUP:case t.Algebra.types.CONSTRUCT:case t.Algebra.types.DISTINCT:case t.Algebra.types.REDUCED:case t.Algebra.types.EXTEND:case t.Algebra.types.FROM:case t.Algebra.types.GRAPH:return r(l.input,d);case t.Algebra.types.ZERO_OR_ONE_PATH:case t.Algebra.types.ZERO_OR_MORE_PATH:case t.Algebra.types.ONE_OR_MORE_PATH:case t.Algebra.types.INV:return r(l.path,d);case t.Algebra.types.PATH:return r(l.predicate,d);case t.Algebra.types.NPS:return s(l,d);case t.Algebra.types.LINK:return r(n.createPattern(u.variable("s"),l.iri,u.variable("o")),d);case t.Algebra.types.UNION:case t.Algebra.types.SEQ:case t.Algebra.types.ALT:return o(l.input,d);case t.Algebra.types.BGP:return c(l.patterns,d);case t.Algebra.types.JOIN:case t.Algebra.types.LEFT_JOIN:return c(l.input,d);case t.Algebra.types.SLICE:return i(l,d);case t.Algebra.types.MINUS:return e(l,d);case t.Algebra.types.VALUES:return{type:"exact",value:l.bindings.length,dataset:d.uri};case t.Algebra.types.SERVICE:case t.Algebra.types.DESCRIBE:case t.Algebra.types.EXPRESSION:case t.Algebra.types.PATTERN:return{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:d.uri}}}en.estimateCardinality=r;function e(l,d){const f=r(l.input[0],d),h=r(l.input[1],d);return{type:"estimate",value:Math.max(f.value-h.value,0),dataset:d.uri}}en.estimateMinusCardinality=e;function i(l,d){const f=r(l.input,d);return f.value>0&&(f.value=Math.max(f.value-l.start,0),l.length!==void 0&&(f.value=Math.min(f.value,l.length))),f}en.estimateSliceCardinality=i;function o(l,d){const f={type:"exact",value:0,dataset:d.uri};for(const h of l){const p=r(h,d);p.type==="estimate"&&f.type==="exact"&&(f.type=p.type),p.value>0&&(f.value+=p.value)}return f}en.estimateUnionCardinality=o;function c(l,d){const f=[];for(const p of l){const b=t.Util.inScopeVariables(p).map(y=>y.value),_=f.find(y=>b.some(g=>y.vars.has(g)));if(_){_.ops.push(p);for(const y of b)_.vars.add(y)}else f.push({ops:[p],vars:new Set(b)})}return{type:"estimate",value:f.map(p=>Math.min(...p.ops.map(b=>r(b,d).value))).reduce((p,b)=>p*b,1),dataset:d.uri}}en.estimateJoinCardinality=c;function s(l,d){const f=n.createSeq([...l.iris].reverse().map(_=>n.createLink(_))),h=r(f,d),p=n.createPattern(u.variable("s"),u.variable("p"),u.variable("o")),b=r(p,d);return{type:"estimate",value:Math.max(0,b.value-h.value),dataset:d.uri}}return en.estimateNpsCardinality=s,en}var By={},c5;function pse(){if(c5)return By;c5=1,Object.defineProperty(By,"__esModule",{value:!0}),By.doesShapeAcceptOperation=void 0;function a(n,r,e){return t(n,n,r,e)}By.doesShapeAcceptOperation=a;function t(n,r,e,i){if(r.type==="conjunction")return r.children.every(c=>t(n,c,e,i));if(r.type==="disjunction")return r.children.some(c=>t(n,c,e,i));if(r.type==="arity")return t(n,r.child,e,i);if(((i==null?void 0:i.joinBindings)&&!r.joinBindings)??((i==null?void 0:i.filterBindings)&&!r.filterBindings))return!1;const o=r.operation;switch(o.operationType){case"type":return u(n,r,e,i)?o.type===e.type:!1;case"pattern":return u(n,r,e,i)?o.pattern.type===e.type:!1;case"wildcard":return!0}}function u(n,r,e,i){return!(e.input&&!(Array.isArray(e.input)?e.input:[e.input]).every(c=>t(n,n,c,i))||e.patterns&&!e.patterns.every(o=>t(n,n,o,i)))}return By}var yr={},l5;function yse(){if(l5)return yr;l5=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.removeOperationSource=yr.assignOperationSource=yr.getOperationSource=yr.testReadOnly=yr.validateQueryOutput=yr.getSafeVoid=yr.getSafeBoolean=yr.getSafeQuads=yr.getSafeBindings=void 0;const a=ze(),t=Te();function u(d){return i(d,"bindings"),d}yr.getSafeBindings=u;function n(d){return i(d,"quads"),d}yr.getSafeQuads=n;function r(d){return i(d,"boolean"),d}yr.getSafeBoolean=r;function e(d){return i(d,"void"),d}yr.getSafeVoid=e;function i(d,f){if(d.type!==f)throw new Error(`Invalid query output type: Expected '${f}' but got '${d.type}'`)}yr.validateQueryOutput=i;function o(d){return d.get(a.KeysQueryOperation.readOnly)?(0,t.failTest)("Attempted a write operation in read-only mode"):(0,t.passTestVoid)()}yr.testReadOnly=o;function c(d){var f;return(f=d.metadata)==null?void 0:f.scopedSource}yr.getOperationSource=c;function s(d,f){return d={...d},d.metadata=d.metadata?{...d.metadata}:{},d.metadata.scopedSource=f,d}yr.assignOperationSource=s;function l(d){var f;(f=d.metadata)==null||delete f.scopedSource,d.metadata&&Object.keys(d.metadata).length===0&&delete d.metadata}return yr.removeOperationSource=l,yr}var Bu={},d5;function bse(){if(d5)return Bu;d5=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.materializeOperation=Bu.materializeTerm=void 0;const a=ir(),t=Fn(),u=ht();function n(i,o){if(i.termType==="Variable"){const c=o.get(i);if(c)return c}return i.termType==="Quad"&&(0,t.someTermsNested)(i,c=>c.termType==="Variable")?(0,t.mapTermsNested)(i,c=>n(c,o)):i}Bu.materializeTerm=n;function r(i,o,c,s,l={}){return l={strictTargetVariables:"strictTargetVariables"in l?l.strictTargetVariables:!1,bindFilter:"bindFilter"in l?l.bindFilter:!0,originalBindings:"originalBindings"in l?l.originalBindings:o},u.Util.mapOperation(i,{path(d,f){return{recurse:!1,result:Object.assign(f.createPath(n(d.subject,o),d.predicate,n(d.object,o),n(d.graph,o)),{metadata:d.metadata})}},pattern(d,f){return{recurse:!1,result:Object.assign(f.createPattern(n(d.subject,o),n(d.predicate,o),n(d.object,o),n(d.graph,o)),{metadata:d.metadata})}},join(d,f){return{recurse:!1,result:f.createJoin(d.input.map(h=>r(h,o,c,s,l)),d.input.every(h=>!h.metadata))}},extend(d){if(o.has(d.variable)){if(l.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,a.termToString)(d.variable)} in a BIND operator.`);return{recurse:!0,result:r(d.input,o,c,s,l)}}return{recurse:!0,result:d}},group(d,f){if(l.strictTargetVariables){for(const p of d.variables)if(o.has(p))throw new Error(`Tried to bind variable ${(0,a.termToString)(p)} in a GROUP BY operator.`);return{recurse:!0,result:d}}const h=d.variables.filter(p=>!o.has(p));return{recurse:!0,result:f.createGroup(d.input,h,d.aggregates)}},filter(d,f){const h=l.originalBindings;if(d.expression.expressionType!=="operator"||h.size===0)return{recurse:!1,result:d};const p=e(f,h),b=r(d.expression,o,c,s,l);let _=r(d.input,o,c,s,l);return p.length>0&&(_=f.createJoin([...p,_])),{recurse:!1,result:f.createFilter(_,b)}},project(d,f){const h=e(f,l.originalBindings,d.variables);let p=r(d.input,o,c,s,l);return h.length>0&&(p=f.createJoin([...h,p])),{recurse:!1,result:f.createProject(p,d.variables)}},values(d,f){if(l.strictTargetVariables){for(const h of d.variables)if(o.has(h))throw new Error(`Tried to bind variable ${(0,a.termToString)(h)} in a VALUES operator.`)}else{const h=d.variables.filter(b=>!o.has(b)),p=d.bindings.map(b=>{const _={...b};let y=!0;return o.forEach((g,m)=>{const v=(0,a.termToString)(m);v in _&&(g.equals(_[v])||(y=!1),delete _[v])}),y?_:void 0}).filter(Boolean);return{recurse:!0,result:f.createValues(h,p)}}return{recurse:!1,result:d}},expression(d,f){if(!l.bindFilter)return{recurse:!1,result:d};if(d.expressionType==="term")return{recurse:!1,result:f.createTermExpression(n(d.term,o))};if(d.expressionType==="operator")return d.operator==="bound"&&d.args.length===1&&d.args[0].expressionType==="term"&&[...o.keys()].some(h=>d.args[0].term.equals(h))?{recurse:!1,result:f.createTermExpression(f.dataFactory.literal("true",f.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")))}:{recurse:!0,result:d};if(d.expressionType==="aggregate"&&"variable"in d&&o.has(d.variable)){if(l.strictTargetVariables)throw new Error(`Tried to bind ${(0,a.termToString)(d.variable)} in a ${d.aggregator} aggregate.`);return{recurse:!0,result:d}}return{recurse:!0,result:d}}},c)}Bu.materializeOperation=r;function e(i,o,c){const s=[];for(const[l,d]of o)if(!c||c.some(f=>f.equals(l))){const f={[(0,a.termToString)(l)]:d};s.push(i.createValues([l],[f]))}return s}return Bu}var f5;function wt(){return f5||(f5=1,function(a){var t=Cu&&Cu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Cu&&Cu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(hse(),a),u(pse(),a),u(yse(),a),u(bse(),a)}(Cu)),Cu}var h5;function mse(){if(h5)return Fy;h5=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.ActorOptimizeQueryOperationGroupSources=void 0;const a=Dn(),t=ze(),u=Te(),n=wt(),r=ht();let e=class extends a.ActorOptimizeQueryOperation{constructor(o){super(o)}async test(o){return(0,n.getOperationSource)(o.operation)?(0,u.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,u.passTestVoid)()}async run(o){return{operation:await this.groupOperation(o.operation,o.context),context:o.context}}async groupOperation(o,c){var p;const s=c.getSafe(t.KeysInitQuery.dataFactory),l=new r.Factory(s);if((0,n.getOperationSource)(o)??!("input"in o))return o;if(!Array.isArray(o.input)){const b=await this.groupOperation(o.input,c);if((p=b.metadata)!=null&&p.scopedSource){const _=(0,n.getOperationSource)(b);(0,n.doesShapeAcceptOperation)(await _.source.getSelectorShape(c),o)&&(this.logDebug(c,`Hoist 1 source-specific operation into a single ${o.type} operation for ${_.source.toString()}`),(0,n.removeOperationSource)(b),o=(0,n.assignOperationSource)(o,_))}return{...o,input:b}}const d=await Promise.all(o.input.map(b=>this.groupOperation(b,c))),f=this.clusterOperationsWithEqualSources(d);if(f.length===1){const b=f[0],_=(0,n.getOperationSource)(f[0][0]);return{...await this.moveSourceAnnotationUpwardsIfPossible(o,b,_,c),input:b}}if(f.length===d.length)return{...o,input:d};let h;switch(o.type){case r.Algebra.types.JOIN:h=l.createJoin.bind(l);break;case r.Algebra.types.UNION:h=l.createUnion.bind(l);break;case r.Algebra.types.ALT:h=l.createAlt.bind(l);break;case r.Algebra.types.SEQ:h=l.createSeq.bind(l);break;default:throw new Error(`Unsupported operation '${o.type}' detected while grouping sources`)}return await this.groupOperationMulti(f,h,c)}async groupOperationMulti(o,c,s){let l=!0;const d=await Promise.all(o.map(async f=>{const h=(0,n.getOperationSource)(f[0]),p=await this.moveSourceAnnotationUpwardsIfPossible(c(f,!0),f,h,s);return(0,n.getOperationSource)(p)&&(l=!1),p}));return c(d,l)}clusterOperationsWithEqualSources(o){const c=new Map,s=[];for(const d of o){const f=(0,n.getOperationSource)(d);f?(c.has(f)||c.set(f,[]),c.get(f).push(d)):s.push(d)}const l=[];s.length>0&&l.push(s);for(const[d,f]of c.entries())l.push(f.map(h=>(0,n.assignOperationSource)(h,d)));return l}async moveSourceAnnotationUpwardsIfPossible(o,c,s,l){if(s&&(0,n.doesShapeAcceptOperation)(await s.source.getSelectorShape(l),o)){this.logDebug(l,`Hoist ${c.length} source-specific operations into a single ${o.type} operation for ${s.source.toString()}`),o=(0,n.assignOperationSource)(o,s);for(const d of c)(0,n.removeOperationSource)(d)}return o}};return Fy.ActorOptimizeQueryOperationGroupSources=e,Fy}var p5;function _se(){return p5||(p5=1,function(a){var t=Mu&&Mu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Mu&&Mu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(mse(),a)}(Mu)),Mu}var $u={},$y={},y5;function gse(){if(y5)return $y;y5=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.ActorOptimizeQueryOperationConstructDistinct=void 0;const a=Dn(),t=OP(),u=Te(),n=ht();let r=class extends a.ActorOptimizeQueryOperation{constructor(i){super(i)}async test(i){return i.context.has(t.KeysInitQuery.distinctConstruct)?(0,u.passTestVoid)():(0,u.failTest)(`${this.name} was not enabled by the query.`)}async run(i){return{operation:n.Util.mapOperation(i.operation,{construct(c,s){return{recurse:!1,result:s.createDistinct(s.createConstruct(c.input,c.template))}}}),context:i.context.delete(t.KeysInitQuery.distinctConstruct)}}};return $y.ActorOptimizeQueryOperationConstructDistinct=r,$y}var b5;function vse(){return b5||(b5=1,function(a){var t=$u&&$u.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=$u&&$u.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(gse(),a)}($u)),$u}var Vu={},Vy={},Uu={},Uy={},m5;function Tse(){if(m5)return Uy;m5=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.ActorQueryParse=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return Uy.ActorQueryParse=t,Uy}var _5;function g5(){return _5||(_5=1,function(a){var t=Uu&&Uu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Uu&&Uu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Tse(),a)}(Uu)),Uu}var v5;function wse(){if(v5)return Vy;v5=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.ActorQueryParseSparql=void 0;const a=g5(),t=ze(),u=Te(),n=ht(),r=m0();let e=class extends a.ActorQueryParse{constructor(o){super(o),this.prefixes=Object.freeze(this.prefixes)}async test(o){return o.queryFormat&&o.queryFormat.language!=="sparql"?(0,u.failTest)("This actor can only parse SPARQL queries"):(0,u.passTestVoid)()}async run(o){const c=o.context.getSafe(t.KeysInitQuery.dataFactory),l=new r.Parser({prefixes:this.prefixes,baseIRI:o.baseIRI,sparqlStar:!0,factory:c}).parse(o.query);return{baseIRI:l.type==="query"?l.base:void 0,operation:(0,n.translate)(l,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:o.baseIRI,dataFactory:c})}}};return Vy.ActorQueryParseSparql=e,Vy}var T5;function Sse(){return T5||(T5=1,function(a){var t=Vu&&Vu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Vu&&Vu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(wse(),a)}(Vu)),Vu}var Qu={},Qy={},Hu={},Gu={},zu={},Hy={},w5;function mh(){if(w5)return Hy;w5=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.DirectiveNodeHandlerAdapter=void 0;let a=class{constructor(u,n,r){this.targetKind=u,this.util=n,this.settings=r}getDirectiveConditionalValue(u,n){const r=this.util.getArgument(u.arguments,"if");if(!r)throw new Error(`The directive ${u.name.value} is missing an if-argument.`);const e=this.util.handleNodeValue(r.value,r.name.value,n);if(e.terms.length!==1)throw new Error(`Can not apply the directive ${u.name.value} with a list.`);return e.terms[0]}isDirectiveScopeAll(u){const n=this.util.getArgument(u.arguments,"scope");return n&&n.value.kind==="EnumValue"&&n.value.value==="all"}};return Hy.DirectiveNodeHandlerAdapter=a,Hy}var Gy={},S5;function Ose(){if(S5)return Gy;S5=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.DirectiveNodeHandlerInclude=void 0;const a=mh();let t=class extends a.DirectiveNodeHandlerAdapter{constructor(n,r){super("include",n,r)}handle(n,r){const e=this.getDirectiveConditionalValue(n.directive,r);return e.termType==="Literal"&&e.value==="false"?{ignore:!0}:{}}};return Gy.DirectiveNodeHandlerInclude=t,Gy}var zy={},O5;function Ase(){if(O5)return zy;O5=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.DirectiveNodeHandlerOptional=void 0;const a=mh();let t=class extends a.DirectiveNodeHandlerAdapter{constructor(n,r){super("optional",n,r)}handle(n,r){return{operationOverrider:e=>this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),e)}}};return zy.DirectiveNodeHandlerOptional=t,zy}var ky={},jx={},A5;function Xy(){return A5||(A5=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.SingularizeState=void 0,function(t){t[t.SINGLE=0]="SINGLE",t[t.PLURAL=1]="PLURAL"}(a.SingularizeState||(a.SingularizeState={}))}(jx)),jx}var E5;function Ese(){if(E5)return ky;E5=1,Object.defineProperty(ky,"__esModule",{value:!0}),ky.DirectiveNodeHandlerPlural=void 0;const a=Xy(),t=mh();let u=class extends t.DirectiveNodeHandlerAdapter{constructor(r,e){super("plural",r,e)}handle(r,e){return this.isDirectiveScopeAll(r.directive)&&(e.singularizeState=a.SingularizeState.PLURAL),delete e.singularizeVariables[this.util.nameToVariable(r.fieldLabel,e).value],{}}};return ky.DirectiveNodeHandlerPlural=u,ky}var Jy={},I5;function Ise(){if(I5)return Jy;I5=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.DirectiveNodeHandlerSingle=void 0;const a=Xy(),t=mh();let u=class extends t.DirectiveNodeHandlerAdapter{constructor(r,e){super("single",r,e)}handle(r,e){return this.isDirectiveScopeAll(r.directive)&&(e.singularizeState=a.SingularizeState.SINGLE),e.singularizeVariables[this.util.nameToVariable(r.fieldLabel,e).value]=!0,{}}};return Jy.DirectiveNodeHandlerSingle=u,Jy}var Ky={},x5;function xse(){if(x5)return Ky;x5=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.DirectiveNodeHandlerSkip=void 0;const a=mh();let t=class extends a.DirectiveNodeHandlerAdapter{constructor(n,r){super("skip",n,r)}handle(n,r){const e=this.getDirectiveConditionalValue(n.directive,r);return e.termType==="Literal"&&e.value==="true"?{ignore:!0}:{}}};return Ky.DirectiveNodeHandlerSkip=t,Ky}var N5;function R5(){return N5||(N5=1,function(a){var t=zu&&zu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=zu&&zu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(mh(),a),u(Ose(),a),u(Ase(),a),u(Ese(),a),u(Ise(),a),u(xse(),a)}(zu)),zu}var ku={},Wy={},F5;function Ti(){if(F5)return Wy;F5=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.NodeValueHandlerAdapter=void 0;let a=class{constructor(u,n,r){this.targetKind=u,this.util=n,this.settings=r}};return Wy.NodeValueHandlerAdapter=a,Wy}var Yy={},D5;function Nse(){if(D5)return Yy;D5=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.NodeValueHandlerBoolean=void 0;const a=Ti();let t=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("BooleanValue",n,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")}handle(n,r,e){return{terms:[this.util.dataFactory.literal(n.value?"true":"false",this.datatype)]}}};return Yy.NodeValueHandlerBoolean=t,Yy}var Zy={},P5;function Rse(){if(P5)return Zy;P5=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.NodeValueHandlerEnum=void 0;const a=Ti();let t=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("EnumValue",n,r)}handle(n,r,e){return{terms:[this.util.valueToNamedNode(n.value,e.context)]}}};return Zy.NodeValueHandlerEnum=t,Zy}var e1={},j5;function Fse(){if(j5)return e1;j5=1,Object.defineProperty(e1,"__esModule",{value:!0}),e1.NodeValueHandlerFloat=void 0;const a=Ti();let t=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("FloatValue",n,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#float")}handle(n,r,e){return{terms:[this.util.dataFactory.literal(n.value,this.datatype)]}}};return e1.NodeValueHandlerFloat=t,e1}var t1={},L5;function Dse(){if(L5)return t1;L5=1,Object.defineProperty(t1,"__esModule",{value:!0}),t1.NodeValueHandlerInt=void 0;const a=Ti();let t=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("IntValue",n,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#integer")}handle(n,r,e){return{terms:[this.util.dataFactory.literal(n.value,this.datatype)]}}};return t1.NodeValueHandlerInt=t,t1}var r1={},M5;function Pse(){if(M5)return r1;M5=1,Object.defineProperty(r1,"__esModule",{value:!0}),r1.NodeValueHandlerList=void 0;const a=Ti();let t=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("ListValue",n,r),this.nodeFirst=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),this.nodeRest=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),this.nodeNil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(n,r,e){const i=[];let o=[];for(const c of n.values){const s=this.util.handleNodeValue(c,r,e);for(const l of s.terms)i.push(l);s.auxiliaryPatterns&&(o=o.concat(s.auxiliaryPatterns))}if(this.settings.arraysToRdfLists){const c=this.util.dataFactory.blankNode();let s=c,l=i.length;for(const d of i){o.push(this.util.operationFactory.createPattern(s,this.nodeFirst,d,e.graph));const f=--l===0?this.nodeNil:this.util.dataFactory.blankNode();o.push(this.util.operationFactory.createPattern(s,this.nodeRest,f,e.graph)),s=f}return{terms:[c],auxiliaryPatterns:o}}else return{terms:i,auxiliaryPatterns:o}}};return r1.NodeValueHandlerList=t,r1}var n1={},C5;function jse(){if(C5)return n1;C5=1,Object.defineProperty(n1,"__esModule",{value:!0}),n1.NodeValueHandlerNull=void 0;const a=Ti();let t=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("NullValue",n,r),this.nil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(n,r,e){return{terms:[this.nil]}}};return n1.NodeValueHandlerNull=t,n1}var i1={},q5;function Lse(){if(q5)return i1;q5=1,Object.defineProperty(i1,"__esModule",{value:!0}),i1.NodeValueHandlerObject=void 0;const a=Ti();let t=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("ObjectValue",n,r)}handle(n,r,e){const i=this.util.dataFactory.blankNode();let o=[];for(const c of n.fields){const s=this.util.handleNodeValue(c.value,r,e);for(const l of s.terms)o.push(this.util.createQuadPattern(i,c.name,l,e.graph,e.context));s.auxiliaryPatterns&&(o=o.concat(s.auxiliaryPatterns))}return{terms:[i],auxiliaryPatterns:o}}};return i1.NodeValueHandlerObject=t,i1}var a1={},B5;function Mse(){if(B5)return a1;B5=1,Object.defineProperty(a1,"__esModule",{value:!0}),a1.NodeValueHandlerString=void 0;const a=Ti();let t=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("StringValue",n,r)}handle(n,r,e){const i=e.context.getContextRaw()[r];let o,c;return i&&typeof i!="string"&&(i["@language"]?o=i["@language"]:i["@type"]&&(c=this.util.dataFactory.namedNode(i["@type"]))),{terms:[this.util.dataFactory.literal(n.value,o||c)]}}};return a1.NodeValueHandlerString=t,a1}var u1={},$5;function Cse(){if($5)return u1;$5=1,Object.defineProperty(u1,"__esModule",{value:!0}),u1.NodeValueHandlerVariable=void 0;const a=Ti();let t=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("Variable",n,r)}handle(n,r,e){const i=n.name.value,o=e.variablesDict[i],c=e.variablesMetaDict[i];if(!o){if(!e.ignoreUnknownVariables&&(!c||c.mandatory))throw new Error(`Undefined variable: ${i}`);{const s=this.util.dataFactory.variable(i);return e.terminalVariables.map(l=>l.value).indexOf(i)<0&&e.terminalVariables.push(s),{terms:[s]}}}if(o.kind==="Variable")throw new Error(`Variable refers to another variable: ${i}`);if(c)if(c.list){if(o.kind!=="ListValue")throw new Error(`Expected a list, but got ${o.kind} for ${i}`);if(c.type){const s=o;for(const l of s.values)if(l.kind!==c.type)throw new Error(`Expected ${c.type}, but got ${l.kind} for ${i}`)}}else c.type;return this.util.handleNodeValue(o,r,e)}};return u1.NodeValueHandlerVariable=t,u1}var V5;function qse(){return V5||(V5=1,function(a){var t=ku&&ku.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ku&&ku.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ti(),a),u(Nse(),a),u(Rse(),a),u(Fse(),a),u(Dse(),a),u(Pse(),a),u(jse(),a),u(Lse(),a),u(Mse(),a),u(Cse(),a)}(ku)),ku}var o1={},U5;function CO(){if(U5)return o1;U5=1,Object.defineProperty(o1,"__esModule",{value:!0}),o1.NodeHandlerAdapter=void 0;let a=class{constructor(u,n,r){this.targetKind=u,this.util=n,this.settings=r}getNodeQuadContextSelectionSet(u,n,r){const e={};if(u){for(const i of u.selections)if(i.kind==="Field"){const o=i;this.handleNodeQuadContextField(o,r,e,"id","subject"),this.handleNodeQuadContextField(o,r,e,"graph","graph")}}return e}handleNodeQuadContextField(u,n,r,e,i){if(!r[i]&&u.name.value===e){if(!r[i]){const o=this.util.getArgument(u.arguments,"_");if(o){const c=this.util.handleNodeValue(o.value,u.name.value,n);if(c.terms.length!==1)throw new Error(`Only single values can be set as ${e}, but got ${c.terms.length} at ${u.name.value}`);r[i]=c.terms[0],c.auxiliaryPatterns&&(r.auxiliaryPatterns||(r.auxiliaryPatterns=[]),r.auxiliaryPatterns.concat(c.auxiliaryPatterns))}}if(!r[i]){const o=this.util.nameToVariable(this.util.getFieldLabel(u),n);n.terminalVariables.push(o),r[i]=o}}}getDirectiveOutputs(u,n,r){const e=[];if(u)for(const i of u){const o=this.util.handleDirectiveNode({directive:i,fieldLabel:n},r);if(o){if(o.ignore)return null;e.push(o)}}return e}handleDirectiveOutputs(u,n){for(const r of u){if(r.ignore)return this.util.operationFactory.createBgp([]);r.operationOverrider&&(n=r.operationOverrider(n))}return n}};return o1.NodeHandlerAdapter=a,o1}var s1={},Q5;function Lx(){if(Q5)return s1;Q5=1,Object.defineProperty(s1,"__esModule",{value:!0}),s1.NodeHandlerDefinitionAdapter=void 0;const a=CO();let t=class extends a.NodeHandlerAdapter{constructor(n,r,e){super(n,r,e)}};return s1.NodeHandlerDefinitionAdapter=t,s1}var c1={},H5;function Bse(){if(H5)return c1;H5=1,Object.defineProperty(c1,"__esModule",{value:!0}),c1.NodeHandlerDefinitionFragment=void 0;const a=Lx();let t=class extends a.NodeHandlerDefinitionAdapter{constructor(n,r){super("FragmentDefinition",n,r)}handle(n,r){throw new Error("Illegal state: fragment definitions must be indexed and removed before processing")}};return c1.NodeHandlerDefinitionFragment=t,c1}var l1={},G5;function $se(){if(G5)return l1;G5=1,Object.defineProperty(l1,"__esModule",{value:!0}),l1.NodeHandlerDefinitionOperation=void 0;const a=Lx();let t=class extends a.NodeHandlerDefinitionAdapter{constructor(n,r){super("OperationDefinition",n,r)}handle(n,r){if(n.operation!=="query")throw new Error("Unsupported definition operation: "+n.operation);if(n.variableDefinitions)for(const o of n.variableDefinitions){const c=o.variable.name.value;o.defaultValue&&(r.variablesDict[c]||(r.variablesDict[c]=o.defaultValue));let s=o.type;const l=s.kind==="NonNullType";l&&(s=s.type);const d=s.kind==="ListType";d&&(s=s.type);const f=s.name.value;r.variablesMetaDict[c]={mandatory:l,list:d,type:f}}const e=this.getDirectiveOutputs(n.directives,n.name?n.name.value:"",r);if(!e)return this.util.operationFactory.createBgp([]);const i=this.util.joinOperations(n.selectionSet.selections.map(o=>this.util.handleNode(o,r)));return this.handleDirectiveOutputs(e,i)}};return l1.NodeHandlerDefinitionOperation=t,l1}var d1={},z5;function Vse(){if(z5)return d1;z5=1,Object.defineProperty(d1,"__esModule",{value:!0}),d1.NodeHandlerDocument=void 0;const a=ht(),t=CO();let u=class extends t.NodeHandlerAdapter{constructor(r,e){super("Document",r,e)}handle(r,e){const i=r.definitions.map(c=>{const s=this.getNodeQuadContextDefinitionNode(c,Object.assign(Object.assign({},e),{ignoreUnknownVariables:!0})),l=Object.assign(Object.assign({},e),{graph:s.graph||e.graph,subject:s.subject||this.util.dataFactory.blankNode()});let d=this.util.handleNode(c,l);return s&&s.auxiliaryPatterns&&(d=this.util.joinOperations([d,this.util.operationFactory.createBgp(s.auxiliaryPatterns)])),d}),o=this.util.operationFactory.createProject(i.length===1?i[0]:this.util.operationFactory.createUnion(i),e.terminalVariables);return this.translateBlankNodesToVariables(o)}getNodeQuadContextDefinitionNode(r,e){if(r.kind==="OperationDefinition")return this.getNodeQuadContextSelectionSet(r.selectionSet,r.name?r.name.value:"",e);throw new Error(`Unsupported definition: ${r.kind}`)}translateBlankNodesToVariables(r){const e=this,i={},o=Array.from(r.variables).reduce((s,l)=>(s[l.value]=!0,s),{});return a.Util.mapOperation(r,{path:(s,l)=>({recurse:!1,result:l.createPath(c(s.subject),s.predicate,c(s.object),c(s.graph))}),pattern:(s,l)=>({recurse:!1,result:l.createPattern(c(s.subject),c(s.predicate),c(s.object),c(s.graph))})});function c(s){if(s.termType==="BlankNode"){let l=i[s.value];return l||(l=a.Util.createUniqueVariable(s.value,o,e.util.dataFactory),o[l.value]=!0,i[s.value]=l),l}return s}}};return d1.NodeHandlerDocument=u,d1}var f1={},k5;function qO(){if(k5)return f1;k5=1,Object.defineProperty(f1,"__esModule",{value:!0}),f1.NodeHandlerSelectionAdapter=void 0;const a=ht(),t=Xy(),u=CO();let n=class extends u.NodeHandlerAdapter{constructor(e,i,o){super(e,i,o)}getNodeQuadContextFieldNode(e,i,o){return this.getNodeQuadContextSelectionSet(e.selectionSet,i,Object.assign(Object.assign({},o),{path:this.util.appendFieldToPath(o.path,i)}))}fieldToOperation(e,i,o,c){const s=o;let l=0,d;if((i.name.value==="id"||i.name.value==="graph")&&(o=!1,i.arguments))for(const T of i.arguments)T.name.value==="_"&&this.util.handleNodeValue(T.value,i.name.value,e);const f=this.util.getFieldLabel(i);if(e.singularizeState===t.SingularizeState.SINGLE&&(e.singularizeVariables[this.util.nameToVariable(f,e).value]=!0),o){const T=this.handleMetaField(e,f,c);if(T)return T}const h=c?[this.util.operationFactory.createBgp(c)]:[],p=this.getNodeQuadContextFieldNode(i,f,e);let b=p.subject||this.util.nameToVariable(f,e),_=p.graph||e.graph;p.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(p.auxiliaryPatterns));let y=!0,g=null;if(o&&i.arguments&&i.arguments.length){for(const T of i.arguments)if(T.name.value==="_"){const S=this.util.handleNodeValue(T.value,i.name.value,e);g=S.terms,h.push(this.util.operationFactory.createBgp(S.terms.map(x=>this.util.createQuadPattern(e.subject,i.name,x,e.graph,e.context)))),S.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(S.auxiliaryPatterns)),o=!1;break}else if(T.name.value==="graph"){const S=this.util.handleNodeValue(T.value,i.name.value,e);if(S.terms.length!==1)throw new Error(`Only single values can be set as graph, but got ${S.terms.length} at ${i.name.value}`);_=S.terms[0],e=Object.assign(Object.assign({},e),{graph:_}),S.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(S.auxiliaryPatterns));break}else if(T.name.value==="alt"){let S=T.value;S.kind!=="ListValue"&&(S={kind:"ListValue",values:[S]}),h.push(this.util.createQuadPath(e.subject,i.name,S,b,e.graph,e.context)),y=!1;break}}if(o&&y&&h.push(this.util.operationFactory.createBgp([this.util.createQuadPattern(e.subject,i.name,b,e.graph,e.context)])),i.arguments&&i.arguments.length){for(const T of i.arguments)if(!(T.name.value==="_"||T.name.value==="graph"||T.name.value==="alt"))if(T.name.value==="first"){if(T.value.kind!=="IntValue")throw new Error("Invalid value type for 'first' argument: "+T.value.kind);d=parseInt(T.value.value,10)}else if(T.name.value==="offset"){if(T.value.kind!=="IntValue")throw new Error("Invalid value type for 'offset' argument: "+T.value.kind);l=parseInt(T.value.value,10)}else{const S=this.util.handleNodeValue(T.value,T.name.value,e);h.push(this.util.operationFactory.createBgp(S.terms.map(x=>this.util.createQuadPattern(b,T.name,x,e.graph,e.context)))),S.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(S.auxiliaryPatterns))}}const m=this.getDirectiveOutputs(i.directives,f,e);if(!m)return this.util.operationFactory.createBgp([]);let v=this.util.joinOperations(h);if(i.selectionSet&&i.selectionSet.selections.length){if(g){if(g.length!==1)throw new Error(`Only single values can be set as id, but got ${g.length} at ${i.name.value}`);b=g[0]}const T=Object.assign(Object.assign(Object.assign({},e),s?{path:this.util.appendFieldToPath(e.path,f)}:{}),{graph:_,subject:s?b:e.subject});let S=!1;const x=i.selectionSet.selections.filter(O=>O.kind==="Field"&&O.name.value==="totalCount"?(S=!0,!1):!0);let L=this.util.joinOperations(h.concat(x.map(O=>this.util.handleNode(O,T))));if(S){const O=this.util.dataFactory.variable("var"+this.settings.expressionVariableCounter++),w=this.util.dataFactory.variable(b.value+this.settings.variableDelimiter+"totalCount"),A=this.util.operationFactory.createBoundAggregate(O,"count",this.util.operationFactory.createTermExpression(b),!1),E=this.util.operationFactory.createProject(this.util.operationFactory.createExtend(this.util.operationFactory.createGroup(v,[],[A]),w,this.util.operationFactory.createTermExpression(O)),[w]);e.terminalVariables.push(w),x.length?L=this.util.operationFactory.createJoin([this.util.operationFactory.createProject(L,[]),E]):L=E}v=L}else o&&b.termType==="Variable"&&e.terminalVariables.push(b);return(l||d)&&(v=this.util.operationFactory.createSlice(this.util.operationFactory.createProject(v,a.Util.inScopeVariables(v)),l,d)),this.handleDirectiveOutputs(m,v)}handleMetaField(e,i,o){if(i==="__typename"){const c=this.util.nameToVariable(i,e);return e.terminalVariables.push(c),this.util.operationFactory.createBgp([this.util.operationFactory.createPattern(e.subject,this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.util.nameToVariable(i,e),e.graph)].concat(o||[]))}}};return f1.NodeHandlerSelectionAdapter=n,f1}var h1={},X5;function Use(){if(X5)return h1;X5=1,Object.defineProperty(h1,"__esModule",{value:!0}),h1.NodeHandlerSelectionField=void 0;const a=qO();let t=class extends a.NodeHandlerSelectionAdapter{constructor(n,r){super("Field",n,r)}handle(n,r){return this.fieldToOperation(r,n,!0)}};return h1.NodeHandlerSelectionField=t,h1}var p1={},J5;function Qse(){if(J5)return p1;J5=1,Object.defineProperty(p1,"__esModule",{value:!0}),p1.NodeHandlerSelectionFragmentSpread=void 0;const a=qO();let t=class extends a.NodeHandlerSelectionAdapter{constructor(n,r){super("FragmentSpread",n,r)}handle(n,r){const e=r.fragmentDefinitions[n.name.value];if(!e)throw new Error("Undefined fragment definition: "+n.name.value);const i={alias:void 0,arguments:void 0,directives:e.directives,kind:"Field",name:n.name,selectionSet:e.selectionSet},o=[this.util.newTypePattern(r.subject,e.typeCondition,r)];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(r,i,!1,o))}};return p1.NodeHandlerSelectionFragmentSpread=t,p1}var y1={},K5;function Hse(){if(K5)return y1;K5=1,Object.defineProperty(y1,"__esModule",{value:!0}),y1.NodeHandlerSelectionInlineFragment=void 0;const a=qO();let t=class extends a.NodeHandlerSelectionAdapter{constructor(n,r){super("InlineFragment",n,r)}handle(n,r){const e={alias:void 0,arguments:void 0,directives:n.directives,kind:"Field",name:{kind:"Name",value:r.subject.value},selectionSet:n.selectionSet},i=n.typeCondition?[this.util.newTypePattern(r.subject,n.typeCondition,r)]:[];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(r,e,!1,i))}};return y1.NodeHandlerSelectionInlineFragment=t,y1}var W5;function Y5(){return W5||(W5=1,function(a){var t=Gu&&Gu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Gu&&Gu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(R5(),a),u(qse(),a),u(CO(),a),u(Lx(),a),u(Bse(),a),u($se(),a),u(Vse(),a),u(qO(),a),u(Use(),a),u(Qse(),a),u(Hse(),a)}(Gu)),Gu}var Xu={},Z5=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag",Mx=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;function BO(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?BO=function(u){return typeof u}:BO=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},BO(a)}var Gse=10,eM=2;function tM(a){return $O(a,[])}function $O(a,t){switch(BO(a)){case"string":return JSON.stringify(a);case"function":return a.name?"[function ".concat(a.name,"]"):"[function]";case"object":return a===null?"null":zse(a,t);default:return String(a)}}function zse(a,t){if(t.indexOf(a)!==-1)return"[Circular]";var u=[].concat(t,[a]),n=Jse(a);if(n!==void 0){var r=n.call(a);if(r!==a)return typeof r=="string"?r:$O(r,u)}else if(Array.isArray(a))return Xse(a,u);return kse(a,u)}function kse(a,t){var u=Object.keys(a);if(u.length===0)return"{}";if(t.length>eM)return"["+Kse(a)+"]";var n=u.map(function(r){var e=$O(a[r],t);return r+": "+e});return"{ "+n.join(", ")+" }"}function Xse(a,t){if(a.length===0)return"[]";if(t.length>eM)return"[Array]";for(var u=Math.min(Gse,a.length),n=a.length-u,r=[],e=0;e<u;++e)r.push($O(a[e],t));return n===1?r.push("... 1 more item"):n>1&&r.push("... ".concat(n," more items")),"["+r.join(", ")+"]"}function Jse(a){var t=a[String(Mx)];if(typeof t=="function")return t;if(typeof a.inspect=="function")return a.inspect}function Kse(a){var t=Object.prototype.toString.call(a).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof a.constructor=="function"){var u=a.constructor.name;if(typeof u=="string"&&u!=="")return u}return t}function VO(a,t){var u=!!a;if(!u)throw new Error(t)}var Wse=function(t,u){return t instanceof u};function Yse(a,t){for(var u=0;u<t.length;u++){var n=t[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function Zse(a,t,u){return t&&Yse(a.prototype,t),a}var Cx=function(){function a(t){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof t=="string"||VO(0,"Body must be a string. Received: ".concat(tM(t),".")),this.body=t,this.name=u,this.locationOffset=n,this.locationOffset.line>0||VO(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||VO(0,"column in locationOffset is 1-indexed and must be positive.")}return Zse(a,[{key:Z5,get:function(){return"Source"}}]),a}();function ece(a){return Wse(a,Cx)}function UO(a,t){for(var u=/\r\n|[\n\r]/g,n=1,r=t+1,e;(e=u.exec(a.body))&&e.index<t;)n+=1,r=t+1-(e.index+e[0].length);return{line:n,column:r}}function rM(a){return qx(a.source,UO(a.source,a.start))}function qx(a,t){var u=a.locationOffset.column-1,n=QO(u)+a.body,r=t.line-1,e=a.locationOffset.line-1,i=t.line+e,o=t.line===1?u:0,c=t.column+o,s="".concat(a.name,":").concat(i,":").concat(c,`
`),l=n.split(/\r\n|[\n\r]/g),d=l[r];if(d.length>120){for(var f=Math.floor(c/80),h=c%80,p=[],b=0;b<d.length;b+=80)p.push(d.slice(b,b+80));return s+nM([["".concat(i),p[0]]].concat(p.slice(1,f+1).map(function(_){return["",_]}),[[" ",QO(h-1)+"^"],["",p[f+1]]]))}return s+nM([["".concat(i-1),l[r-1]],["".concat(i),d],["",QO(c-1)+"^"],["".concat(i+1),l[r+1]]])}function nM(a){var t=a.filter(function(n){n[0];var r=n[1];return r!==void 0}),u=Math.max.apply(Math,t.map(function(n){var r=n[0];return r.length}));return t.map(function(n){var r=n[0],e=n[1];return tce(u,r)+(e?" | "+e:" |")}).join(`
`)}function QO(a){return Array(a+1).join(" ")}function tce(a,t){return QO(a-t.length)+t}var et=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),He=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function HO(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?HO=function(u){return typeof u}:HO=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},HO(a)}function rce(a){return HO(a)=="object"&&a!==null}function GO(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?GO=function(u){return typeof u}:GO=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},GO(a)}function iM(a,t){var u=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),u.push.apply(u,n)}return u}function nce(a){for(var t=1;t<arguments.length;t++){var u=arguments[t]!=null?arguments[t]:{};t%2?iM(Object(u),!0).forEach(function(n){ice(a,n,u[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):iM(Object(u)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(u,n))})}return a}function ice(a,t,u){return t in a?Object.defineProperty(a,t,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[t]=u,a}function ace(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function uce(a,t){for(var u=0;u<t.length;u++){var n=t[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function oce(a,t,u){return t&&uce(a.prototype,t),a}function sce(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),t&&m1(a,t)}function cce(a){var t=uM();return function(){var n=_1(a),r;if(t){var e=_1(this).constructor;r=Reflect.construct(n,arguments,e)}else r=n.apply(this,arguments);return aM(this,r)}}function aM(a,t){return t&&(GO(t)==="object"||typeof t=="function")?t:b1(a)}function b1(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Bx(a){var t=typeof Map=="function"?new Map:void 0;return Bx=function(n){if(n===null||!lce(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,r)}function r(){return zO(n,arguments,_1(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m1(r,n)},Bx(a)}function zO(a,t,u){return uM()?zO=Reflect.construct:zO=function(r,e,i){var o=[null];o.push.apply(o,e);var c=Function.bind.apply(r,o),s=new c;return i&&m1(s,i.prototype),s},zO.apply(null,arguments)}function uM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function lce(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function m1(a,t){return m1=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},m1(a,t)}function _1(a){return _1=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},_1(a)}var dce=function(a){sce(u,a);var t=cce(u);function u(n,r,e,i,o,c,s){var l,d,f,h;ace(this,u),h=t.call(this,n),h.name="GraphQLError",h.originalError=c??void 0,h.nodes=oM(Array.isArray(r)?r:r?[r]:void 0);for(var p=[],b=0,_=(y=h.nodes)!==null&&y!==void 0?y:[];b<_.length;b++){var y,g=_[b],m=g.loc;m!=null&&p.push(m)}p=oM(p),h.source=e??((l=p)===null||l===void 0?void 0:l[0].source),h.positions=i??((d=p)===null||d===void 0?void 0:d.map(function(T){return T.start})),h.locations=i&&e?i.map(function(T){return UO(e,T)}):(f=p)===null||f===void 0?void 0:f.map(function(T){return UO(T.source,T.start)}),h.path=o??void 0;var v=c==null?void 0:c.extensions;return s==null&&rce(v)?h.extensions=nce({},v):h.extensions=s??{},Object.defineProperties(b1(h),{message:{enumerable:!0},locations:{enumerable:h.locations!=null},path:{enumerable:h.path!=null},extensions:{enumerable:h.extensions!=null&&Object.keys(h.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?(Object.defineProperty(b1(h),"stack",{value:c.stack,writable:!0,configurable:!0}),aM(h)):(Error.captureStackTrace?Error.captureStackTrace(b1(h),u):Object.defineProperty(b1(h),"stack",{value:Error().stack,writable:!0,configurable:!0}),h)}return oce(u,[{key:"toString",value:function(){return fce(this)}},{key:"toJSON",value:function(){return hce(this)}},{key:Z5,get:function(){return"Object"}}]),u}(Bx(Error));function oM(a){return a===void 0||a.length===0?void 0:a}function fce(a){var t=a.message;if(a.nodes)for(var u=0,n=a.nodes;u<n.length;u++){var r=n[u];r.loc&&(t+=`

`+rM(r.loc))}else if(a.source&&a.locations)for(var e=0,i=a.locations;e<i.length;e++){var o=i[e];t+=`

`+qx(a.source,o)}return t}function hce(a){var t;a||VO(0,"Received null or undefined error.");var u=(t=a.message)!==null&&t!==void 0?t:"An unknown error occurred.",n=a.locations,r=a.path,e=a.extensions;return e&&Object.keys(e).length>0?{message:u,locations:n,path:r,extensions:e}:{message:u,locations:n,path:r}}function mn(a,t,u){return new dce("Syntax Error: ".concat(u),void 0,a,[t])}function pce(a,t){var u=!!a;if(!u)throw new Error("Unexpected invariant triggered.")}function sM(a){var t=a.prototype.toJSON;typeof t=="function"||pce(0),a.prototype.inspect=t,Mx&&(a.prototype[Mx]=t)}var $x=function(){function a(u,n,r){this.start=u.start,this.end=n.end,this.startToken=u,this.endToken=n,this.source=r}var t=a.prototype;return t.toJSON=function(){return{start:this.start,end:this.end}},a}();sM($x);var ar=function(){function a(u,n,r,e,i,o,c){this.kind=u,this.start=n,this.end=r,this.line=e,this.column=i,this.value=c,this.prev=o,this.next=null}var t=a.prototype;return t.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},a}();sM(ar);function cM(a){return a!=null&&typeof a.kind=="string"}function yce(a){var t=a.split(/\r\n|[\n\r]/g),u=bce(a);if(u!==0)for(var n=1;n<t.length;n++)t[n]=t[n].slice(u);for(var r=0;r<t.length&&lM(t[r]);)++r;for(var e=t.length;e>r&&lM(t[e-1]);)--e;return t.slice(r,e).join(`
`)}function lM(a){for(var t=0;t<a.length;++t)if(a[t]!==" "&&a[t]!=="	")return!1;return!0}function bce(a){for(var t,u=!0,n=!0,r=0,e=null,i=0;i<a.length;++i)switch(a.charCodeAt(i)){case 13:a.charCodeAt(i+1)===10&&++i;case 10:u=!1,n=!0,r=0;break;case 9:case 32:++r;break;default:n&&!u&&(e===null||r<e)&&(e=r),n=!1}return(t=e)!==null&&t!==void 0?t:0}function mce(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=a.indexOf(`
`)===-1,r=a[0]===" "||a[0]==="	",e=a[a.length-1]==='"',i=a[a.length-1]==="\\",o=!n||e||i||u,c="";return o&&!(n&&r)&&(c+=`
`+t),c+=t?a.replace(/\n/g,`
`+t):a,o&&(c+=`
`),'"""'+c.replace(/"""/g,'\\"""')+'"""'}var dM=function(){function a(u){var n=new ar(He.SOF,0,0,0,0,null);this.source=u,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}var t=a.prototype;return t.advance=function(){this.lastToken=this.token;var n=this.token=this.lookahead();return n},t.lookahead=function(){var n=this.token;if(n.kind!==He.EOF)do{var r;n=(r=n.next)!==null&&r!==void 0?r:n.next=gce(this,n)}while(n.kind===He.COMMENT);return n},a}();function _ce(a){return a===He.BANG||a===He.DOLLAR||a===He.AMP||a===He.PAREN_L||a===He.PAREN_R||a===He.SPREAD||a===He.COLON||a===He.EQUALS||a===He.AT||a===He.BRACKET_L||a===He.BRACKET_R||a===He.BRACE_L||a===He.PIPE||a===He.BRACE_R}function Ju(a){return isNaN(a)?He.EOF:a<127?JSON.stringify(String.fromCharCode(a)):'"\\u'.concat(("00"+a.toString(16).toUpperCase()).slice(-4),'"')}function gce(a,t){for(var u=a.source,n=u.body,r=n.length,e=t.end;e<r;){var i=n.charCodeAt(e),o=a.line,c=1+e-a.lineStart;switch(i){case 65279:case 9:case 32:case 44:++e;continue;case 10:++e,++a.line,a.lineStart=e;continue;case 13:n.charCodeAt(e+1)===10?e+=2:++e,++a.line,a.lineStart=e;continue;case 33:return new ar(He.BANG,e,e+1,o,c,t);case 35:return Tce(u,e,o,c,t);case 36:return new ar(He.DOLLAR,e,e+1,o,c,t);case 38:return new ar(He.AMP,e,e+1,o,c,t);case 40:return new ar(He.PAREN_L,e,e+1,o,c,t);case 41:return new ar(He.PAREN_R,e,e+1,o,c,t);case 46:if(n.charCodeAt(e+1)===46&&n.charCodeAt(e+2)===46)return new ar(He.SPREAD,e,e+3,o,c,t);break;case 58:return new ar(He.COLON,e,e+1,o,c,t);case 61:return new ar(He.EQUALS,e,e+1,o,c,t);case 64:return new ar(He.AT,e,e+1,o,c,t);case 91:return new ar(He.BRACKET_L,e,e+1,o,c,t);case 93:return new ar(He.BRACKET_R,e,e+1,o,c,t);case 123:return new ar(He.BRACE_L,e,e+1,o,c,t);case 124:return new ar(He.PIPE,e,e+1,o,c,t);case 125:return new ar(He.BRACE_R,e,e+1,o,c,t);case 34:return n.charCodeAt(e+1)===34&&n.charCodeAt(e+2)===34?Oce(u,e,o,c,t,a):Sce(u,e,o,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return wce(u,e,i,o,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return Ece(u,e,o,c,t)}throw mn(u,e,vce(i))}var s=a.line,l=1+e-a.lineStart;return new ar(He.EOF,r,r,s,l,t)}function vce(a){return a<32&&a!==9&&a!==10&&a!==13?"Cannot contain the invalid character ".concat(Ju(a),"."):a===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(Ju(a),".")}function Tce(a,t,u,n,r){var e=a.body,i,o=t;do i=e.charCodeAt(++o);while(!isNaN(i)&&(i>31||i===9));return new ar(He.COMMENT,t,o,u,n,r,e.slice(t+1,o))}function wce(a,t,u,n,r,e){var i=a.body,o=u,c=t,s=!1;if(o===45&&(o=i.charCodeAt(++c)),o===48){if(o=i.charCodeAt(++c),o>=48&&o<=57)throw mn(a,c,"Invalid number, unexpected digit after 0: ".concat(Ju(o),"."))}else c=Vx(a,c,o),o=i.charCodeAt(c);if(o===46&&(s=!0,o=i.charCodeAt(++c),c=Vx(a,c,o),o=i.charCodeAt(c)),(o===69||o===101)&&(s=!0,o=i.charCodeAt(++c),(o===43||o===45)&&(o=i.charCodeAt(++c)),c=Vx(a,c,o),o=i.charCodeAt(c)),o===46||Ice(o))throw mn(a,c,"Invalid number, expected digit but got: ".concat(Ju(o),"."));return new ar(s?He.FLOAT:He.INT,t,c,n,r,e,i.slice(t,c))}function Vx(a,t,u){var n=a.body,r=t,e=u;if(e>=48&&e<=57){do e=n.charCodeAt(++r);while(e>=48&&e<=57);return r}throw mn(a,r,"Invalid number, expected digit but got: ".concat(Ju(e),"."))}function Sce(a,t,u,n,r){for(var e=a.body,i=t+1,o=i,c=0,s="";i<e.length&&!isNaN(c=e.charCodeAt(i))&&c!==10&&c!==13;){if(c===34)return s+=e.slice(o,i),new ar(He.STRING,t,i+1,u,n,r,s);if(c<32&&c!==9)throw mn(a,i,"Invalid character within String: ".concat(Ju(c),"."));if(++i,c===92){switch(s+=e.slice(o,i-1),c=e.charCodeAt(i),c){case 34:s+='"';break;case 47:s+="/";break;case 92:s+="\\";break;case 98:s+="\b";break;case 102:s+="\f";break;case 110:s+=`
`;break;case 114:s+="\r";break;case 116:s+="	";break;case 117:{var l=Ace(e.charCodeAt(i+1),e.charCodeAt(i+2),e.charCodeAt(i+3),e.charCodeAt(i+4));if(l<0){var d=e.slice(i+1,i+5);throw mn(a,i,"Invalid character escape sequence: \\u".concat(d,"."))}s+=String.fromCharCode(l),i+=4;break}default:throw mn(a,i,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}++i,o=i}}throw mn(a,i,"Unterminated string.")}function Oce(a,t,u,n,r,e){for(var i=a.body,o=t+3,c=o,s=0,l="";o<i.length&&!isNaN(s=i.charCodeAt(o));){if(s===34&&i.charCodeAt(o+1)===34&&i.charCodeAt(o+2)===34)return l+=i.slice(c,o),new ar(He.BLOCK_STRING,t,o+3,u,n,r,yce(l));if(s<32&&s!==9&&s!==10&&s!==13)throw mn(a,o,"Invalid character within String: ".concat(Ju(s),"."));s===10?(++o,++e.line,e.lineStart=o):s===13?(i.charCodeAt(o+1)===10?o+=2:++o,++e.line,e.lineStart=o):s===92&&i.charCodeAt(o+1)===34&&i.charCodeAt(o+2)===34&&i.charCodeAt(o+3)===34?(l+=i.slice(c,o)+'"""',o+=4,c=o):++o}throw mn(a,o,"Unterminated string.")}function Ace(a,t,u,n){return kO(a)<<12|kO(t)<<8|kO(u)<<4|kO(n)}function kO(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:-1}function Ece(a,t,u,n,r){for(var e=a.body,i=e.length,o=t+1,c=0;o!==i&&!isNaN(c=e.charCodeAt(o))&&(c===95||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++o;return new ar(He.NAME,t,o,u,n,r,e.slice(t,o))}function Ice(a){return a===95||a>=65&&a<=90||a>=97&&a<=122}var fM=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function xce(a,t){var u=new Ux(a,t);return u.parseDocument()}function Nce(a,t){var u=new Ux(a,t);u.expectToken(He.SOF);var n=u.parseValueLiteral(!1);return u.expectToken(He.EOF),n}function Rce(a,t){var u=new Ux(a,t);u.expectToken(He.SOF);var n=u.parseTypeReference();return u.expectToken(He.EOF),n}var Ux=function(){function a(u,n){var r=ece(u)?u:new Cx(u);this._lexer=new dM(r),this._options=n}var t=a.prototype;return t.parseName=function(){var n=this.expectToken(He.NAME);return{kind:et.NAME,value:n.value,loc:this.loc(n)}},t.parseDocument=function(){var n=this._lexer.token;return{kind:et.DOCUMENT,definitions:this.many(He.SOF,this.parseDefinition,He.EOF),loc:this.loc(n)}},t.parseDefinition=function(){if(this.peek(He.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(He.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var n=this._lexer.token;if(this.peek(He.BRACE_L))return{kind:et.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(n)};var r=this.parseOperationType(),e;return this.peek(He.NAME)&&(e=this.parseName()),{kind:et.OPERATION_DEFINITION,operation:r,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},t.parseOperationType=function(){var n=this.expectToken(He.NAME);switch(n.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(n)},t.parseVariableDefinitions=function(){return this.optionalMany(He.PAREN_L,this.parseVariableDefinition,He.PAREN_R)},t.parseVariableDefinition=function(){var n=this._lexer.token;return{kind:et.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(He.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(He.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(n)}},t.parseVariable=function(){var n=this._lexer.token;return this.expectToken(He.DOLLAR),{kind:et.VARIABLE,name:this.parseName(),loc:this.loc(n)}},t.parseSelectionSet=function(){var n=this._lexer.token;return{kind:et.SELECTION_SET,selections:this.many(He.BRACE_L,this.parseSelection,He.BRACE_R),loc:this.loc(n)}},t.parseSelection=function(){return this.peek(He.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var n=this._lexer.token,r=this.parseName(),e,i;return this.expectOptionalToken(He.COLON)?(e=r,i=this.parseName()):i=r,{kind:et.FIELD,alias:e,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(He.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(n){var r=n?this.parseConstArgument:this.parseArgument;return this.optionalMany(He.PAREN_L,r,He.PAREN_R)},t.parseArgument=function(){var n=this._lexer.token,r=this.parseName();return this.expectToken(He.COLON),{kind:et.ARGUMENT,name:r,value:this.parseValueLiteral(!1),loc:this.loc(n)}},t.parseConstArgument=function(){var n=this._lexer.token;return{kind:et.ARGUMENT,name:this.parseName(),value:(this.expectToken(He.COLON),this.parseValueLiteral(!0)),loc:this.loc(n)}},t.parseFragment=function(){var n=this._lexer.token;this.expectToken(He.SPREAD);var r=this.expectOptionalKeyword("on");return!r&&this.peek(He.NAME)?{kind:et.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(n)}:{kind:et.INLINE_FRAGMENT,typeCondition:r?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},t.parseFragmentDefinition=function(){var n,r=this._lexer.token;return this.expectKeyword("fragment"),((n=this._options)===null||n===void 0?void 0:n.experimentalFragmentVariables)===!0?{kind:et.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}:{kind:et.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}},t.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(n){var r=this._lexer.token;switch(r.kind){case He.BRACKET_L:return this.parseList(n);case He.BRACE_L:return this.parseObject(n);case He.INT:return this._lexer.advance(),{kind:et.INT,value:r.value,loc:this.loc(r)};case He.FLOAT:return this._lexer.advance(),{kind:et.FLOAT,value:r.value,loc:this.loc(r)};case He.STRING:case He.BLOCK_STRING:return this.parseStringLiteral();case He.NAME:switch(this._lexer.advance(),r.value){case"true":return{kind:et.BOOLEAN,value:!0,loc:this.loc(r)};case"false":return{kind:et.BOOLEAN,value:!1,loc:this.loc(r)};case"null":return{kind:et.NULL,loc:this.loc(r)};default:return{kind:et.ENUM,value:r.value,loc:this.loc(r)}}case He.DOLLAR:if(!n)return this.parseVariable();break}throw this.unexpected()},t.parseStringLiteral=function(){var n=this._lexer.token;return this._lexer.advance(),{kind:et.STRING,value:n.value,block:n.kind===He.BLOCK_STRING,loc:this.loc(n)}},t.parseList=function(n){var r=this,e=this._lexer.token,i=function(){return r.parseValueLiteral(n)};return{kind:et.LIST,values:this.any(He.BRACKET_L,i,He.BRACKET_R),loc:this.loc(e)}},t.parseObject=function(n){var r=this,e=this._lexer.token,i=function(){return r.parseObjectField(n)};return{kind:et.OBJECT,fields:this.any(He.BRACE_L,i,He.BRACE_R),loc:this.loc(e)}},t.parseObjectField=function(n){var r=this._lexer.token,e=this.parseName();return this.expectToken(He.COLON),{kind:et.OBJECT_FIELD,name:e,value:this.parseValueLiteral(n),loc:this.loc(r)}},t.parseDirectives=function(n){for(var r=[];this.peek(He.AT);)r.push(this.parseDirective(n));return r},t.parseDirective=function(n){var r=this._lexer.token;return this.expectToken(He.AT),{kind:et.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(n),loc:this.loc(r)}},t.parseTypeReference=function(){var n=this._lexer.token,r;return this.expectOptionalToken(He.BRACKET_L)?(r=this.parseTypeReference(),this.expectToken(He.BRACKET_R),r={kind:et.LIST_TYPE,type:r,loc:this.loc(n)}):r=this.parseNamedType(),this.expectOptionalToken(He.BANG)?{kind:et.NON_NULL_TYPE,type:r,loc:this.loc(n)}:r},t.parseNamedType=function(){var n=this._lexer.token;return{kind:et.NAMED_TYPE,name:this.parseName(),loc:this.loc(n)}},t.parseTypeSystemDefinition=function(){var n=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(n.kind===He.NAME)switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(n)},t.peekDescription=function(){return this.peek(He.STRING)||this.peek(He.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("schema");var e=this.parseDirectives(!0),i=this.many(He.BRACE_L,this.parseOperationTypeDefinition,He.BRACE_R);return{kind:et.SCHEMA_DEFINITION,description:r,directives:e,operationTypes:i,loc:this.loc(n)}},t.parseOperationTypeDefinition=function(){var n=this._lexer.token,r=this.parseOperationType();this.expectToken(He.COLON);var e=this.parseNamedType();return{kind:et.OPERATION_TYPE_DEFINITION,operation:r,type:e,loc:this.loc(n)}},t.parseScalarTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("scalar");var e=this.parseName(),i=this.parseDirectives(!0);return{kind:et.SCALAR_TYPE_DEFINITION,description:r,name:e,directives:i,loc:this.loc(n)}},t.parseObjectTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("type");var e=this.parseName(),i=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:et.OBJECT_TYPE_DEFINITION,description:r,name:e,interfaces:i,directives:o,fields:c,loc:this.loc(n)}},t.parseImplementsInterfaces=function(){var n;if(!this.expectOptionalKeyword("implements"))return[];if(((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLImplementsInterfaces)===!0){var r=[];this.expectOptionalToken(He.AMP);do r.push(this.parseNamedType());while(this.expectOptionalToken(He.AMP)||this.peek(He.NAME));return r}return this.delimitedMany(He.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var n;return((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLEmptyFields)===!0&&this.peek(He.BRACE_L)&&this._lexer.lookahead().kind===He.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(He.BRACE_L,this.parseFieldDefinition,He.BRACE_R)},t.parseFieldDefinition=function(){var n=this._lexer.token,r=this.parseDescription(),e=this.parseName(),i=this.parseArgumentDefs();this.expectToken(He.COLON);var o=this.parseTypeReference(),c=this.parseDirectives(!0);return{kind:et.FIELD_DEFINITION,description:r,name:e,arguments:i,type:o,directives:c,loc:this.loc(n)}},t.parseArgumentDefs=function(){return this.optionalMany(He.PAREN_L,this.parseInputValueDef,He.PAREN_R)},t.parseInputValueDef=function(){var n=this._lexer.token,r=this.parseDescription(),e=this.parseName();this.expectToken(He.COLON);var i=this.parseTypeReference(),o;this.expectOptionalToken(He.EQUALS)&&(o=this.parseValueLiteral(!0));var c=this.parseDirectives(!0);return{kind:et.INPUT_VALUE_DEFINITION,description:r,name:e,type:i,defaultValue:o,directives:c,loc:this.loc(n)}},t.parseInterfaceTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("interface");var e=this.parseName(),i=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:et.INTERFACE_TYPE_DEFINITION,description:r,name:e,interfaces:i,directives:o,fields:c,loc:this.loc(n)}},t.parseUnionTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("union");var e=this.parseName(),i=this.parseDirectives(!0),o=this.parseUnionMemberTypes();return{kind:et.UNION_TYPE_DEFINITION,description:r,name:e,directives:i,types:o,loc:this.loc(n)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(He.EQUALS)?this.delimitedMany(He.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("enum");var e=this.parseName(),i=this.parseDirectives(!0),o=this.parseEnumValuesDefinition();return{kind:et.ENUM_TYPE_DEFINITION,description:r,name:e,directives:i,values:o,loc:this.loc(n)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(He.BRACE_L,this.parseEnumValueDefinition,He.BRACE_R)},t.parseEnumValueDefinition=function(){var n=this._lexer.token,r=this.parseDescription(),e=this.parseName(),i=this.parseDirectives(!0);return{kind:et.ENUM_VALUE_DEFINITION,description:r,name:e,directives:i,loc:this.loc(n)}},t.parseInputObjectTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("input");var e=this.parseName(),i=this.parseDirectives(!0),o=this.parseInputFieldsDefinition();return{kind:et.INPUT_OBJECT_TYPE_DEFINITION,description:r,name:e,directives:i,fields:o,loc:this.loc(n)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(He.BRACE_L,this.parseInputValueDef,He.BRACE_R)},t.parseTypeSystemExtension=function(){var n=this._lexer.lookahead();if(n.kind===He.NAME)switch(n.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(n)},t.parseSchemaExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var r=this.parseDirectives(!0),e=this.optionalMany(He.BRACE_L,this.parseOperationTypeDefinition,He.BRACE_R);if(r.length===0&&e.length===0)throw this.unexpected();return{kind:et.SCHEMA_EXTENSION,directives:r,operationTypes:e,loc:this.loc(n)}},t.parseScalarTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var r=this.parseName(),e=this.parseDirectives(!0);if(e.length===0)throw this.unexpected();return{kind:et.SCALAR_TYPE_EXTENSION,name:r,directives:e,loc:this.loc(n)}},t.parseObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var r=this.parseName(),e=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(e.length===0&&i.length===0&&o.length===0)throw this.unexpected();return{kind:et.OBJECT_TYPE_EXTENSION,name:r,interfaces:e,directives:i,fields:o,loc:this.loc(n)}},t.parseInterfaceTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var r=this.parseName(),e=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(e.length===0&&i.length===0&&o.length===0)throw this.unexpected();return{kind:et.INTERFACE_TYPE_EXTENSION,name:r,interfaces:e,directives:i,fields:o,loc:this.loc(n)}},t.parseUnionTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var r=this.parseName(),e=this.parseDirectives(!0),i=this.parseUnionMemberTypes();if(e.length===0&&i.length===0)throw this.unexpected();return{kind:et.UNION_TYPE_EXTENSION,name:r,directives:e,types:i,loc:this.loc(n)}},t.parseEnumTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var r=this.parseName(),e=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();if(e.length===0&&i.length===0)throw this.unexpected();return{kind:et.ENUM_TYPE_EXTENSION,name:r,directives:e,values:i,loc:this.loc(n)}},t.parseInputObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var r=this.parseName(),e=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();if(e.length===0&&i.length===0)throw this.unexpected();return{kind:et.INPUT_OBJECT_TYPE_EXTENSION,name:r,directives:e,fields:i,loc:this.loc(n)}},t.parseDirectiveDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("directive"),this.expectToken(He.AT);var e=this.parseName(),i=this.parseArgumentDefs(),o=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var c=this.parseDirectiveLocations();return{kind:et.DIRECTIVE_DEFINITION,description:r,name:e,arguments:i,repeatable:o,locations:c,loc:this.loc(n)}},t.parseDirectiveLocations=function(){return this.delimitedMany(He.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var n=this._lexer.token,r=this.parseName();if(fM[r.value]!==void 0)return r;throw this.unexpected(n)},t.loc=function(n){var r;if(((r=this._options)===null||r===void 0?void 0:r.noLocation)!==!0)return new $x(n,this._lexer.lastToken,this._lexer.source)},t.peek=function(n){return this._lexer.token.kind===n},t.expectToken=function(n){var r=this._lexer.token;if(r.kind===n)return this._lexer.advance(),r;throw mn(this._lexer.source,r.start,"Expected ".concat(hM(n),", found ").concat(Qx(r),"."))},t.expectOptionalToken=function(n){var r=this._lexer.token;if(r.kind===n)return this._lexer.advance(),r},t.expectKeyword=function(n){var r=this._lexer.token;if(r.kind===He.NAME&&r.value===n)this._lexer.advance();else throw mn(this._lexer.source,r.start,'Expected "'.concat(n,'", found ').concat(Qx(r),"."))},t.expectOptionalKeyword=function(n){var r=this._lexer.token;return r.kind===He.NAME&&r.value===n?(this._lexer.advance(),!0):!1},t.unexpected=function(n){var r=n??this._lexer.token;return mn(this._lexer.source,r.start,"Unexpected ".concat(Qx(r),"."))},t.any=function(n,r,e){this.expectToken(n);for(var i=[];!this.expectOptionalToken(e);)i.push(r.call(this));return i},t.optionalMany=function(n,r,e){if(this.expectOptionalToken(n)){var i=[];do i.push(r.call(this));while(!this.expectOptionalToken(e));return i}return[]},t.many=function(n,r,e){this.expectToken(n);var i=[];do i.push(r.call(this));while(!this.expectOptionalToken(e));return i},t.delimitedMany=function(n,r){this.expectOptionalToken(n);var e=[];do e.push(r.call(this));while(this.expectOptionalToken(n));return e},a}();function Qx(a){var t=a.value;return hM(a.kind)+(t!=null?' "'.concat(t,'"'):"")}function hM(a){return _ce(a)?'"'.concat(a,'"'):a}var Fce={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},_h=Object.freeze({});function pM(a,t){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fce,n=void 0,r=Array.isArray(a),e=[a],i=-1,o=[],c=void 0,s=void 0,l=void 0,d=[],f=[],h=a;do{i++;var p=i===e.length,b=p&&o.length!==0;if(p){if(s=f.length===0?void 0:d[d.length-1],c=l,l=f.pop(),b){if(r)c=c.slice();else{for(var _={},y=0,g=Object.keys(c);y<g.length;y++){var m=g[y];_[m]=c[m]}c=_}for(var v=0,T=0;T<o.length;T++){var S=o[T][0],x=o[T][1];r&&(S-=v),r&&x===null?(c.splice(S,1),v++):c[S]=x}}i=n.index,e=n.keys,o=n.edits,r=n.inArray,n=n.prev}else{if(s=l?r?i:e[i]:void 0,c=l?l[s]:h,c==null)continue;l&&d.push(s)}var L=void 0;if(!Array.isArray(c)){if(!cM(c))throw new Error("Invalid AST Node: ".concat(tM(c),"."));var O=XO(t,c.kind,p);if(O){if(L=O.call(t,c,s,l,d,f),L===_h)break;if(L===!1){if(!p){d.pop();continue}}else if(L!==void 0&&(o.push([s,L]),!p))if(cM(L))c=L;else{d.pop();continue}}}if(L===void 0&&b&&o.push([s,c]),p)d.pop();else{var w;n={inArray:r,index:i,keys:e,edits:o,prev:n},r=Array.isArray(c),e=r?c:(w=u[c.kind])!==null&&w!==void 0?w:[],i=-1,o=[],l&&f.push(l),l=c}}while(n!==void 0);return o.length!==0&&(h=o[o.length-1][1]),h}function Dce(a){var t=new Array(a.length);return{enter:function(n){for(var r=0;r<a.length;r++)if(t[r]==null){var e=XO(a[r],n.kind,!1);if(e){var i=e.apply(a[r],arguments);if(i===!1)t[r]=n;else if(i===_h)t[r]=_h;else if(i!==void 0)return i}}},leave:function(n){for(var r=0;r<a.length;r++)if(t[r]==null){var e=XO(a[r],n.kind,!0);if(e){var i=e.apply(a[r],arguments);if(i===_h)t[r]=_h;else if(i!==void 0&&i!==!1)return i}}else t[r]===n&&(t[r]=null)}}}function XO(a,t,u){var n=a[t];if(n){if(!u&&typeof n=="function")return n;var r=u?n.leave:n.enter;if(typeof r=="function")return r}else{var e=u?a.leave:a.enter;if(e){if(typeof e=="function")return e;var i=e[t];if(typeof i=="function")return i}}}function Pce(a){return pM(a,{leave:Lce})}var jce=80,Lce={Name:function(t){return t.value},Variable:function(t){return"$"+t.name},Document:function(t){return st(t.definitions,`

`)+`
`},OperationDefinition:function(t){var u=t.operation,n=t.name,r=ur("(",st(t.variableDefinitions,", "),")"),e=st(t.directives," "),i=t.selectionSet;return!n&&!e&&!r&&u==="query"?i:st([u,st([n,r]),e,i]," ")},VariableDefinition:function(t){var u=t.variable,n=t.type,r=t.defaultValue,e=t.directives;return u+": "+n+ur(" = ",r)+ur(" ",st(e," "))},SelectionSet:function(t){var u=t.selections;return Xn(u)},Field:function(t){var u=t.alias,n=t.name,r=t.arguments,e=t.directives,i=t.selectionSet,o=ur("",u,": ")+n,c=o+ur("(",st(r,", "),")");return c.length>jce&&(c=o+ur(`(
`,JO(st(r,`
`)),`
)`)),st([c,st(e," "),i]," ")},Argument:function(t){var u=t.name,n=t.value;return u+": "+n},FragmentSpread:function(t){var u=t.name,n=t.directives;return"..."+u+ur(" ",st(n," "))},InlineFragment:function(t){var u=t.typeCondition,n=t.directives,r=t.selectionSet;return st(["...",ur("on ",u),st(n," "),r]," ")},FragmentDefinition:function(t){var u=t.name,n=t.typeCondition,r=t.variableDefinitions,e=t.directives,i=t.selectionSet;return"fragment ".concat(u).concat(ur("(",st(r,", "),")")," ")+"on ".concat(n," ").concat(ur("",st(e," ")," "))+i},IntValue:function(t){var u=t.value;return u},FloatValue:function(t){var u=t.value;return u},StringValue:function(t,u){var n=t.value,r=t.block;return r?mce(n,u==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(t){var u=t.value;return u?"true":"false"},NullValue:function(){return"null"},EnumValue:function(t){var u=t.value;return u},ListValue:function(t){var u=t.values;return"["+st(u,", ")+"]"},ObjectValue:function(t){var u=t.fields;return"{"+st(u,", ")+"}"},ObjectField:function(t){var u=t.name,n=t.value;return u+": "+n},Directive:function(t){var u=t.name,n=t.arguments;return"@"+u+ur("(",st(n,", "),")")},NamedType:function(t){var u=t.name;return u},ListType:function(t){var u=t.type;return"["+u+"]"},NonNullType:function(t){var u=t.type;return u+"!"},SchemaDefinition:kn(function(a){var t=a.directives,u=a.operationTypes;return st(["schema",st(t," "),Xn(u)]," ")}),OperationTypeDefinition:function(t){var u=t.operation,n=t.type;return u+": "+n},ScalarTypeDefinition:kn(function(a){var t=a.name,u=a.directives;return st(["scalar",t,st(u," ")]," ")}),ObjectTypeDefinition:kn(function(a){var t=a.name,u=a.interfaces,n=a.directives,r=a.fields;return st(["type",t,ur("implements ",st(u," & ")),st(n," "),Xn(r)]," ")}),FieldDefinition:kn(function(a){var t=a.name,u=a.arguments,n=a.type,r=a.directives;return t+(yM(u)?ur(`(
`,JO(st(u,`
`)),`
)`):ur("(",st(u,", "),")"))+": "+n+ur(" ",st(r," "))}),InputValueDefinition:kn(function(a){var t=a.name,u=a.type,n=a.defaultValue,r=a.directives;return st([t+": "+u,ur("= ",n),st(r," ")]," ")}),InterfaceTypeDefinition:kn(function(a){var t=a.name,u=a.interfaces,n=a.directives,r=a.fields;return st(["interface",t,ur("implements ",st(u," & ")),st(n," "),Xn(r)]," ")}),UnionTypeDefinition:kn(function(a){var t=a.name,u=a.directives,n=a.types;return st(["union",t,st(u," "),n&&n.length!==0?"= "+st(n," | "):""]," ")}),EnumTypeDefinition:kn(function(a){var t=a.name,u=a.directives,n=a.values;return st(["enum",t,st(u," "),Xn(n)]," ")}),EnumValueDefinition:kn(function(a){var t=a.name,u=a.directives;return st([t,st(u," ")]," ")}),InputObjectTypeDefinition:kn(function(a){var t=a.name,u=a.directives,n=a.fields;return st(["input",t,st(u," "),Xn(n)]," ")}),DirectiveDefinition:kn(function(a){var t=a.name,u=a.arguments,n=a.repeatable,r=a.locations;return"directive @"+t+(yM(u)?ur(`(
`,JO(st(u,`
`)),`
)`):ur("(",st(u,", "),")"))+(n?" repeatable":"")+" on "+st(r," | ")}),SchemaExtension:function(t){var u=t.directives,n=t.operationTypes;return st(["extend schema",st(u," "),Xn(n)]," ")},ScalarTypeExtension:function(t){var u=t.name,n=t.directives;return st(["extend scalar",u,st(n," ")]," ")},ObjectTypeExtension:function(t){var u=t.name,n=t.interfaces,r=t.directives,e=t.fields;return st(["extend type",u,ur("implements ",st(n," & ")),st(r," "),Xn(e)]," ")},InterfaceTypeExtension:function(t){var u=t.name,n=t.interfaces,r=t.directives,e=t.fields;return st(["extend interface",u,ur("implements ",st(n," & ")),st(r," "),Xn(e)]," ")},UnionTypeExtension:function(t){var u=t.name,n=t.directives,r=t.types;return st(["extend union",u,st(n," "),r&&r.length!==0?"= "+st(r," | "):""]," ")},EnumTypeExtension:function(t){var u=t.name,n=t.directives,r=t.values;return st(["extend enum",u,st(n," "),Xn(r)]," ")},InputObjectTypeExtension:function(t){var u=t.name,n=t.directives,r=t.fields;return st(["extend input",u,st(n," "),Xn(r)]," ")}};function kn(a){return function(t){return st([t.description,a(t)],`
`)}}function st(a){var t,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t=a==null?void 0:a.filter(function(n){return n}).join(u))!==null&&t!==void 0?t:""}function Xn(a){return ur(`{
`,JO(st(a,`
`)),`
}`)}function ur(a,t){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return t!=null&&t!==""?a+t+u:""}function JO(a){return ur("  ",a.replace(/\n/g,`
  `))}function Mce(a){return a.indexOf(`
`)!==-1}function yM(a){return a!=null&&a.some(Mce)}function Cce(a){return bM(a)||mM(a)||gM(a)}function bM(a){return a.kind===et.OPERATION_DEFINITION||a.kind===et.FRAGMENT_DEFINITION}function qce(a){return a.kind===et.FIELD||a.kind===et.FRAGMENT_SPREAD||a.kind===et.INLINE_FRAGMENT}function Bce(a){return a.kind===et.VARIABLE||a.kind===et.INT||a.kind===et.FLOAT||a.kind===et.STRING||a.kind===et.BOOLEAN||a.kind===et.NULL||a.kind===et.ENUM||a.kind===et.LIST||a.kind===et.OBJECT}function $ce(a){return a.kind===et.NAMED_TYPE||a.kind===et.LIST_TYPE||a.kind===et.NON_NULL_TYPE}function mM(a){return a.kind===et.SCHEMA_DEFINITION||_M(a)||a.kind===et.DIRECTIVE_DEFINITION}function _M(a){return a.kind===et.SCALAR_TYPE_DEFINITION||a.kind===et.OBJECT_TYPE_DEFINITION||a.kind===et.INTERFACE_TYPE_DEFINITION||a.kind===et.UNION_TYPE_DEFINITION||a.kind===et.ENUM_TYPE_DEFINITION||a.kind===et.INPUT_OBJECT_TYPE_DEFINITION}function gM(a){return a.kind===et.SCHEMA_EXTENSION||vM(a)}function vM(a){return a.kind===et.SCALAR_TYPE_EXTENSION||a.kind===et.OBJECT_TYPE_EXTENSION||a.kind===et.INTERFACE_TYPE_EXTENSION||a.kind===et.UNION_TYPE_EXTENSION||a.kind===et.ENUM_TYPE_EXTENSION||a.kind===et.INPUT_OBJECT_TYPE_EXTENSION}var Vce=Object.freeze({__proto__:null,BREAK:_h,DirectiveLocation:fM,Kind:et,Lexer:dM,Location:$x,Source:Cx,Token:ar,TokenKind:He,getLocation:UO,getVisitFn:XO,isDefinitionNode:Cce,isExecutableDefinitionNode:bM,isSelectionNode:qce,isTypeDefinitionNode:_M,isTypeExtensionNode:vM,isTypeNode:$ce,isTypeSystemDefinitionNode:mM,isTypeSystemExtensionNode:gM,isValueNode:Bce,parse:xce,parseType:Rce,parseValue:Nce,print:Pce,printLocation:rM,printSourceLocation:qx,visit:pM,visitInParallel:Dce}),Uce=Vt(Vce),g1={},Ku={},v1={},TM;function wM(){if(TM)return v1;TM=1,Object.defineProperty(v1,"__esModule",{value:!0}),v1.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return v1.BlankNode=a,v1}var T1={},w1={},SM;function OM(){if(SM)return w1;SM=1,Object.defineProperty(w1,"__esModule",{value:!0}),w1.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return w1.DefaultGraph=a,a.INSTANCE=new a,w1}var S1={},O1={},AM;function Hx(){if(AM)return O1;AM=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return O1.NamedNode=a,O1}var EM;function IM(){if(EM)return S1;EM=1,Object.defineProperty(S1,"__esModule",{value:!0}),S1.Literal=void 0;const a=Hx();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return S1.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),S1}var A1={},xM;function NM(){if(xM)return A1;xM=1,Object.defineProperty(A1,"__esModule",{value:!0}),A1.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return A1.Quad=a,A1}var E1={},RM;function FM(){if(RM)return E1;RM=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return E1.Variable=a,E1}var DM;function Qce(){if(DM)return T1;DM=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.DataFactory=void 0;const a=wM(),t=OM(),u=IM(),n=Hx(),r=NM(),e=FM();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return T1.DataFactory=o,T1}var PM;function Hce(){return PM||(PM=1,function(a){var t=Ku&&Ku.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ku&&Ku.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(wM(),a),u(Qce(),a),u(OM(),a),u(IM(),a),u(Hx(),a),u(NM(),a),u(FM(),a)}(Ku)),Ku}var Wu={},I1={},Yu={},Mi={},jM;function Gce(){if(jM)return Mi;jM=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.removeDotSegmentsOfPath=Mi.removeDotSegments=Mi.resolve=void 0;function a(r,e){e=e||"";const i=e.indexOf("#");if(i>0&&(e=e.substr(0,i)),!r.length){if(e.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${e}' for value '${r}'`);return e}if(r.startsWith("?")){const h=e.indexOf("?");return h>0&&(e=e.substr(0,h)),e+r}if(r.startsWith("#"))return e+r;if(!e.length){const h=r.indexOf(":");if(h<0)throw new Error(`Found invalid relative IRI '${r}' for a missing baseIRI`);return u(r,h)}const o=r.indexOf(":");if(o>=0)return u(r,o);const c=e.indexOf(":");if(c<0)throw new Error(`Found invalid baseIRI '${e}' for value '${r}'`);const s=e.substr(0,c+1);if(r.indexOf("//")===0)return s+u(r,o);let l;if(e.indexOf("//",c)===c+1){if(l=e.indexOf("/",c+3),l<0)return e.length>c+3?e+"/"+u(r,o):s+u(r,o)}else if(l=e.indexOf("/",c+1),l<0)return s+u(r,o);if(r.indexOf("/")===0)return e.substr(0,l)+t(r);let d=e.substr(l);const f=d.lastIndexOf("/");return f>=0&&f<d.length-1&&(d=d.substr(0,f+1),r[0]==="."&&r[1]!=="."&&r[1]!=="/"&&r[2]&&(r=r.substr(1))),r=d+r,r=t(r),e.substr(0,l)+r}Mi.resolve=a;function t(r){const e=[];let i=0;for(;i<r.length;)switch(r[i]){case"/":if(r[i+1]===".")if(r[i+2]==="."){if(!n(r[i+3])){e.push([]),i++;break}e.pop(),r[i+3]||e.push([]),i+=3}else{if(!n(r[i+2])){e.push([]),i++;break}r[i+2]||e.push([]),i+=2}else e.push([]),i++;break;case"#":case"?":e.length||e.push([]),e[e.length-1].push(r.substr(i)),i=r.length;break;default:e.length||e.push([]),e[e.length-1].push(r[i]),i++;break}return"/"+e.map(o=>o.join("")).join("/")}Mi.removeDotSegments=t;function u(r,e){let i=e+1;e>=0?r[e+1]==="/"&&r[e+2]==="/"&&(i=e+3):r[0]==="/"&&r[1]==="/"&&(i=2);const o=r.indexOf("/",i);if(o<0)return r;const c=r.substr(0,o),s=r.substr(o);return c+t(s)}Mi.removeDotSegmentsOfPath=u;function n(r){return!r||r==="#"||r==="?"||r==="/"}return Mi}var LM;function vr(){return LM||(LM=1,function(a){var t=Yu&&Yu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e),Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[e]}})}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Yu&&Yu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Gce(),a)}(Yu)),Yu}var Gx={},MM;function KO(){return MM||(MM=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ERROR_CODES=a.ErrorCoded=void 0;class t extends Error{constructor(n,r){super(n),this.code=r}}a.ErrorCoded=t,function(u){u.COLLIDING_KEYWORDS="colliding keywords",u.CONFLICTING_INDEXES="conflicting indexes",u.CYCLIC_IRI_MAPPING="cyclic IRI mapping",u.INVALID_ID_VALUE="invalid @id value",u.INVALID_INDEX_VALUE="invalid @index value",u.INVALID_NEST_VALUE="invalid @nest value",u.INVALID_PREFIX_VALUE="invalid @prefix value",u.INVALID_PROPAGATE_VALUE="invalid @propagate value",u.INVALID_REVERSE_VALUE="invalid @reverse value",u.INVALID_IMPORT_VALUE="invalid @import value",u.INVALID_VERSION_VALUE="invalid @version value",u.INVALID_BASE_IRI="invalid base IRI",u.INVALID_CONTAINER_MAPPING="invalid container mapping",u.INVALID_CONTEXT_ENTRY="invalid context entry",u.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",u.INVALID_DEFAULT_LANGUAGE="invalid default language",u.INVALID_INCLUDED_VALUE="invalid @included value",u.INVALID_IRI_MAPPING="invalid IRI mapping",u.INVALID_JSON_LITERAL="invalid JSON literal",u.INVALID_KEYWORD_ALIAS="invalid keyword alias",u.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",u.INVALID_LANGUAGE_MAPPING="invalid language mapping",u.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",u.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",u.INVALID_LOCAL_CONTEXT="invalid local context",u.INVALID_REMOTE_CONTEXT="invalid remote context",u.INVALID_REVERSE_PROPERTY="invalid reverse property",u.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",u.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",u.INVALID_SCOPED_CONTEXT="invalid scoped context",u.INVALID_SCRIPT_ELEMENT="invalid script element",u.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",u.INVALID_TERM_DEFINITION="invalid term definition",u.INVALID_TYPE_MAPPING="invalid type mapping",u.INVALID_TYPE_VALUE="invalid type value",u.INVALID_TYPED_VALUE="invalid typed value",u.INVALID_VALUE_OBJECT="invalid value object",u.INVALID_VALUE_OBJECT_VALUE="invalid value object value",u.INVALID_VOCAB_MAPPING="invalid vocab mapping",u.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",u.KEYWORD_REDEFINITION="keyword redefinition",u.LOADING_DOCUMENT_FAILED="loading document failed",u.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",u.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",u.PROCESSING_MODE_CONFLICT="processing mode conflict",u.PROTECTED_TERM_REDEFINITION="protected term redefinition",u.CONTEXT_OVERFLOW="context overflow",u.INVALID_BASE_DIRECTION="invalid base direction",u.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",u.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",u.INVALID_EMBEDDED_NODE="invalid embedded node",u.INVALID_ANNOTATION="invalid annotation"}(a.ERROR_CODES||(a.ERROR_CODES={}))}(Gx)),Gx}var x1={},zx={},WO={};WO.byteLength=Xce,WO.toByteArray=Kce,WO.fromByteArray=Zce;for(var wi=[],Pn=[],zce=typeof Uint8Array<"u"?Uint8Array:Array,kx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gh=0,kce=kx.length;gh<kce;++gh)wi[gh]=kx[gh],Pn[kx.charCodeAt(gh)]=gh;Pn[45]=62,Pn[95]=63;function CM(a){var t=a.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=a.indexOf("=");u===-1&&(u=t);var n=u===t?0:4-u%4;return[u,n]}function Xce(a){var t=CM(a),u=t[0],n=t[1];return(u+n)*3/4-n}function Jce(a,t,u){return(t+u)*3/4-u}function Kce(a){var t,u=CM(a),n=u[0],r=u[1],e=new zce(Jce(a,n,r)),i=0,o=r>0?n-4:n,c;for(c=0;c<o;c+=4)t=Pn[a.charCodeAt(c)]<<18|Pn[a.charCodeAt(c+1)]<<12|Pn[a.charCodeAt(c+2)]<<6|Pn[a.charCodeAt(c+3)],e[i++]=t>>16&255,e[i++]=t>>8&255,e[i++]=t&255;return r===2&&(t=Pn[a.charCodeAt(c)]<<2|Pn[a.charCodeAt(c+1)]>>4,e[i++]=t&255),r===1&&(t=Pn[a.charCodeAt(c)]<<10|Pn[a.charCodeAt(c+1)]<<4|Pn[a.charCodeAt(c+2)]>>2,e[i++]=t>>8&255,e[i++]=t&255),e}function Wce(a){return wi[a>>18&63]+wi[a>>12&63]+wi[a>>6&63]+wi[a&63]}function Yce(a,t,u){for(var n,r=[],e=t;e<u;e+=3)n=(a[e]<<16&16711680)+(a[e+1]<<8&65280)+(a[e+2]&255),r.push(Wce(n));return r.join("")}function Zce(a){for(var t,u=a.length,n=u%3,r=[],e=16383,i=0,o=u-n;i<o;i+=e)r.push(Yce(a,i,i+e>o?o:i+e));return n===1?(t=a[u-1],r.push(wi[t>>2]+wi[t<<4&63]+"==")):n===2&&(t=(a[u-2]<<8)+a[u-1],r.push(wi[t>>10]+wi[t>>4&63]+wi[t<<2&63]+"=")),r.join("")}var Xx={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Xx.read=function(a,t,u,n,r){var e,i,o=r*8-n-1,c=(1<<o)-1,s=c>>1,l=-7,d=u?r-1:0,f=u?-1:1,h=a[t+d];for(d+=f,e=h&(1<<-l)-1,h>>=-l,l+=o;l>0;e=e*256+a[t+d],d+=f,l-=8);for(i=e&(1<<-l)-1,e>>=-l,l+=n;l>0;i=i*256+a[t+d],d+=f,l-=8);if(e===0)e=1-s;else{if(e===c)return i?NaN:(h?-1:1)*(1/0);i=i+Math.pow(2,n),e=e-s}return(h?-1:1)*i*Math.pow(2,e-n)},Xx.write=function(a,t,u,n,r,e){var i,o,c,s=e*8-r-1,l=(1<<s)-1,d=l>>1,f=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:e-1,p=n?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),i+d>=1?t+=f/c:t+=f*Math.pow(2,1-d),t*c>=2&&(i++,c/=2),i+d>=l?(o=0,i=l):i+d>=1?(o=(t*c-1)*Math.pow(2,r),i=i+d):(o=t*Math.pow(2,d-1)*Math.pow(2,r),i=0));r>=8;a[u+h]=o&255,h+=p,o/=256,r-=8);for(i=i<<r|o,s+=r;s>0;a[u+h]=i&255,h+=p,i/=256,s-=8);a[u+h-p]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(a){const t=WO,u=Xx,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=l,a.SlowBuffer=T,a.INSPECT_MAX_BYTES=50;const r=2147483647;a.kMaxLength=r;const{Uint8Array:e,ArrayBuffer:i,SharedArrayBuffer:o}=globalThis;l.TYPED_ARRAY_SUPPORT=c(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const U=new e(1),F={foo:function(){return 42}};return Object.setPrototypeOf(F,e.prototype),Object.setPrototypeOf(U,F),U.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function s(U){if(U>r)throw new RangeError('The value "'+U+'" is invalid for option "size"');const F=new e(U);return Object.setPrototypeOf(F,l.prototype),F}function l(U,F,q){if(typeof U=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(U)}return d(U,F,q)}l.poolSize=8192;function d(U,F,q){if(typeof U=="string")return b(U,F);if(i.isView(U))return y(U);if(U==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(je(U,i)||U&&je(U.buffer,i)||typeof o<"u"&&(je(U,o)||U&&je(U.buffer,o)))return g(U,F,q);if(typeof U=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=U.valueOf&&U.valueOf();if(k!=null&&k!==U)return l.from(k,F,q);const ce=m(U);if(ce)return ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof U[Symbol.toPrimitive]=="function")return l.from(U[Symbol.toPrimitive]("string"),F,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}l.from=function(U,F,q){return d(U,F,q)},Object.setPrototypeOf(l.prototype,e.prototype),Object.setPrototypeOf(l,e);function f(U){if(typeof U!="number")throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function h(U,F,q){return f(U),U<=0?s(U):F!==void 0?typeof q=="string"?s(U).fill(F,q):s(U).fill(F):s(U)}l.alloc=function(U,F,q){return h(U,F,q)};function p(U){return f(U),s(U<0?0:v(U)|0)}l.allocUnsafe=function(U){return p(U)},l.allocUnsafeSlow=function(U){return p(U)};function b(U,F){if((typeof F!="string"||F==="")&&(F="utf8"),!l.isEncoding(F))throw new TypeError("Unknown encoding: "+F);const q=S(U,F)|0;let k=s(q);const ce=k.write(U,F);return ce!==q&&(k=k.slice(0,ce)),k}function _(U){const F=U.length<0?0:v(U.length)|0,q=s(F);for(let k=0;k<F;k+=1)q[k]=U[k]&255;return q}function y(U){if(je(U,e)){const F=new e(U);return g(F.buffer,F.byteOffset,F.byteLength)}return _(U)}function g(U,F,q){if(F<0||U.byteLength<F)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<F+(q||0))throw new RangeError('"length" is outside of buffer bounds');let k;return F===void 0&&q===void 0?k=new e(U):q===void 0?k=new e(U,F):k=new e(U,F,q),Object.setPrototypeOf(k,l.prototype),k}function m(U){if(l.isBuffer(U)){const F=v(U.length)|0,q=s(F);return q.length===0||U.copy(q,0,0,F),q}if(U.length!==void 0)return typeof U.length!="number"||oe(U.length)?s(0):_(U);if(U.type==="Buffer"&&Array.isArray(U.data))return _(U.data)}function v(U){if(U>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return U|0}function T(U){return+U!=U&&(U=0),l.alloc(+U)}l.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==l.prototype},l.compare=function(F,q){if(je(F,e)&&(F=l.from(F,F.offset,F.byteLength)),je(q,e)&&(q=l.from(q,q.offset,q.byteLength)),!l.isBuffer(F)||!l.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===q)return 0;let k=F.length,ce=q.length;for(let be=0,Se=Math.min(k,ce);be<Se;++be)if(F[be]!==q[be]){k=F[be],ce=q[be];break}return k<ce?-1:ce<k?1:0},l.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(F,q){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return l.alloc(0);let k;if(q===void 0)for(q=0,k=0;k<F.length;++k)q+=F[k].length;const ce=l.allocUnsafe(q);let be=0;for(k=0;k<F.length;++k){let Se=F[k];if(je(Se,e))be+Se.length>ce.length?(l.isBuffer(Se)||(Se=l.from(Se)),Se.copy(ce,be)):e.prototype.set.call(ce,Se,be);else if(l.isBuffer(Se))Se.copy(ce,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=Se.length}return ce};function S(U,F){if(l.isBuffer(U))return U.length;if(i.isView(U)||je(U,i))return U.byteLength;if(typeof U!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const q=U.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&q===0)return 0;let ce=!1;for(;;)switch(F){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return Z(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q*2;case"hex":return q>>>1;case"base64":return De(U).length;default:if(ce)return k?-1:Z(U).length;F=(""+F).toLowerCase(),ce=!0}}l.byteLength=S;function x(U,F,q){let k=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,F>>>=0,q<=F))return"";for(U||(U="utf8");;)switch(U){case"hex":return Fe(this,F,q);case"utf8":case"utf-8":return ne(this,F,q);case"ascii":return J(this,F,q);case"latin1":case"binary":return _e(this,F,q);case"base64":return Q(this,F,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,F,q);default:if(k)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),k=!0}}l.prototype._isBuffer=!0;function L(U,F,q){const k=U[F];U[F]=U[q],U[q]=k}l.prototype.swap16=function(){const F=this.length;if(F%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let q=0;q<F;q+=2)L(this,q,q+1);return this},l.prototype.swap32=function(){const F=this.length;if(F%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let q=0;q<F;q+=4)L(this,q,q+3),L(this,q+1,q+2);return this},l.prototype.swap64=function(){const F=this.length;if(F%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let q=0;q<F;q+=8)L(this,q,q+7),L(this,q+1,q+6),L(this,q+2,q+5),L(this,q+3,q+4);return this},l.prototype.toString=function(){const F=this.length;return F===0?"":arguments.length===0?ne(this,0,F):x.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(F){if(!l.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F?!0:l.compare(this,F)===0},l.prototype.inspect=function(){let F="";const q=a.INSPECT_MAX_BYTES;return F=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(F+=" ... "),"<Buffer "+F+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(F,q,k,ce,be){if(je(F,e)&&(F=l.from(F,F.offset,F.byteLength)),!l.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(q===void 0&&(q=0),k===void 0&&(k=F?F.length:0),ce===void 0&&(ce=0),be===void 0&&(be=this.length),q<0||k>F.length||ce<0||be>this.length)throw new RangeError("out of range index");if(ce>=be&&q>=k)return 0;if(ce>=be)return-1;if(q>=k)return 1;if(q>>>=0,k>>>=0,ce>>>=0,be>>>=0,this===F)return 0;let Se=be-ce,Ke=k-q;const Y=Math.min(Se,Ke),Ee=this.slice(ce,be),Re=F.slice(q,k);for(let qe=0;qe<Y;++qe)if(Ee[qe]!==Re[qe]){Se=Ee[qe],Ke=Re[qe];break}return Se<Ke?-1:Ke<Se?1:0};function O(U,F,q,k,ce){if(U.length===0)return-1;if(typeof q=="string"?(k=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,oe(q)&&(q=ce?0:U.length-1),q<0&&(q=U.length+q),q>=U.length){if(ce)return-1;q=U.length-1}else if(q<0)if(ce)q=0;else return-1;if(typeof F=="string"&&(F=l.from(F,k)),l.isBuffer(F))return F.length===0?-1:w(U,F,q,k,ce);if(typeof F=="number")return F=F&255,typeof e.prototype.indexOf=="function"?ce?e.prototype.indexOf.call(U,F,q):e.prototype.lastIndexOf.call(U,F,q):w(U,[F],q,k,ce);throw new TypeError("val must be string, number or Buffer")}function w(U,F,q,k,ce){let be=1,Se=U.length,Ke=F.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(U.length<2||F.length<2)return-1;be=2,Se/=2,Ke/=2,q/=2}function Y(Re,qe){return be===1?Re[qe]:Re.readUInt16BE(qe*be)}let Ee;if(ce){let Re=-1;for(Ee=q;Ee<Se;Ee++)if(Y(U,Ee)===Y(F,Re===-1?0:Ee-Re)){if(Re===-1&&(Re=Ee),Ee-Re+1===Ke)return Re*be}else Re!==-1&&(Ee-=Ee-Re),Re=-1}else for(q+Ke>Se&&(q=Se-Ke),Ee=q;Ee>=0;Ee--){let Re=!0;for(let qe=0;qe<Ke;qe++)if(Y(U,Ee+qe)!==Y(F,qe)){Re=!1;break}if(Re)return Ee}return-1}l.prototype.includes=function(F,q,k){return this.indexOf(F,q,k)!==-1},l.prototype.indexOf=function(F,q,k){return O(this,F,q,k,!0)},l.prototype.lastIndexOf=function(F,q,k){return O(this,F,q,k,!1)};function A(U,F,q,k){q=Number(q)||0;const ce=U.length-q;k?(k=Number(k),k>ce&&(k=ce)):k=ce;const be=F.length;k>be/2&&(k=be/2);let Se;for(Se=0;Se<k;++Se){const Ke=parseInt(F.substr(Se*2,2),16);if(oe(Ke))return Se;U[q+Se]=Ke}return Se}function E(U,F,q,k){return Qe(Z(F,U.length-q),U,q,k)}function R(U,F,q,k){return Qe(de(F),U,q,k)}function V(U,F,q,k){return Qe(De(F),U,q,k)}function $(U,F,q,k){return Qe(le(F,U.length-q),U,q,k)}l.prototype.write=function(F,q,k,ce){if(q===void 0)ce="utf8",k=this.length,q=0;else if(k===void 0&&typeof q=="string")ce=q,k=this.length,q=0;else if(isFinite(q))q=q>>>0,isFinite(k)?(k=k>>>0,ce===void 0&&(ce="utf8")):(ce=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-q;if((k===void 0||k>be)&&(k=be),F.length>0&&(k<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");let Se=!1;for(;;)switch(ce){case"hex":return A(this,F,q,k);case"utf8":case"utf-8":return E(this,F,q,k);case"ascii":case"latin1":case"binary":return R(this,F,q,k);case"base64":return V(this,F,q,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,F,q,k);default:if(Se)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),Se=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(U,F,q){return F===0&&q===U.length?t.fromByteArray(U):t.fromByteArray(U.slice(F,q))}function ne(U,F,q){q=Math.min(U.length,q);const k=[];let ce=F;for(;ce<q;){const be=U[ce];let Se=null,Ke=be>239?4:be>223?3:be>191?2:1;if(ce+Ke<=q){let Y,Ee,Re,qe;switch(Ke){case 1:be<128&&(Se=be);break;case 2:Y=U[ce+1],(Y&192)===128&&(qe=(be&31)<<6|Y&63,qe>127&&(Se=qe));break;case 3:Y=U[ce+1],Ee=U[ce+2],(Y&192)===128&&(Ee&192)===128&&(qe=(be&15)<<12|(Y&63)<<6|Ee&63,qe>2047&&(qe<55296||qe>57343)&&(Se=qe));break;case 4:Y=U[ce+1],Ee=U[ce+2],Re=U[ce+3],(Y&192)===128&&(Ee&192)===128&&(Re&192)===128&&(qe=(be&15)<<18|(Y&63)<<12|(Ee&63)<<6|Re&63,qe>65535&&qe<1114112&&(Se=qe))}}Se===null?(Se=65533,Ke=1):Se>65535&&(Se-=65536,k.push(Se>>>10&1023|55296),Se=56320|Se&1023),k.push(Se),ce+=Ke}return fe(k)}const ie=4096;function fe(U){const F=U.length;if(F<=ie)return String.fromCharCode.apply(String,U);let q="",k=0;for(;k<F;)q+=String.fromCharCode.apply(String,U.slice(k,k+=ie));return q}function J(U,F,q){let k="";q=Math.min(U.length,q);for(let ce=F;ce<q;++ce)k+=String.fromCharCode(U[ce]&127);return k}function _e(U,F,q){let k="";q=Math.min(U.length,q);for(let ce=F;ce<q;++ce)k+=String.fromCharCode(U[ce]);return k}function Fe(U,F,q){const k=U.length;(!F||F<0)&&(F=0),(!q||q<0||q>k)&&(q=k);let ce="";for(let be=F;be<q;++be)ce+=se[U[be]];return ce}function ve(U,F,q){const k=U.slice(F,q);let ce="";for(let be=0;be<k.length-1;be+=2)ce+=String.fromCharCode(k[be]+k[be+1]*256);return ce}l.prototype.slice=function(F,q){const k=this.length;F=~~F,q=q===void 0?k:~~q,F<0?(F+=k,F<0&&(F=0)):F>k&&(F=k),q<0?(q+=k,q<0&&(q=0)):q>k&&(q=k),q<F&&(q=F);const ce=this.subarray(F,q);return Object.setPrototypeOf(ce,l.prototype),ce};function te(U,F,q){if(U%1!==0||U<0)throw new RangeError("offset is not uint");if(U+F>q)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(F,q,k){F=F>>>0,q=q>>>0,k||te(F,q,this.length);let ce=this[F],be=1,Se=0;for(;++Se<q&&(be*=256);)ce+=this[F+Se]*be;return ce},l.prototype.readUintBE=l.prototype.readUIntBE=function(F,q,k){F=F>>>0,q=q>>>0,k||te(F,q,this.length);let ce=this[F+--q],be=1;for(;q>0&&(be*=256);)ce+=this[F+--q]*be;return ce},l.prototype.readUint8=l.prototype.readUInt8=function(F,q){return F=F>>>0,q||te(F,1,this.length),this[F]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(F,q){return F=F>>>0,q||te(F,2,this.length),this[F]|this[F+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(F,q){return F=F>>>0,q||te(F,2,this.length),this[F]<<8|this[F+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(F,q){return F=F>>>0,q||te(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+this[F+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(F,q){return F=F>>>0,q||te(F,4,this.length),this[F]*16777216+(this[F+1]<<16|this[F+2]<<8|this[F+3])},l.prototype.readBigUInt64LE=ye(function(F){F=F>>>0,X(F,"offset");const q=this[F],k=this[F+7];(q===void 0||k===void 0)&&H(F,this.length-8);const ce=q+this[++F]*2**8+this[++F]*2**16+this[++F]*2**24,be=this[++F]+this[++F]*2**8+this[++F]*2**16+k*2**24;return BigInt(ce)+(BigInt(be)<<BigInt(32))}),l.prototype.readBigUInt64BE=ye(function(F){F=F>>>0,X(F,"offset");const q=this[F],k=this[F+7];(q===void 0||k===void 0)&&H(F,this.length-8);const ce=q*2**24+this[++F]*2**16+this[++F]*2**8+this[++F],be=this[++F]*2**24+this[++F]*2**16+this[++F]*2**8+k;return(BigInt(ce)<<BigInt(32))+BigInt(be)}),l.prototype.readIntLE=function(F,q,k){F=F>>>0,q=q>>>0,k||te(F,q,this.length);let ce=this[F],be=1,Se=0;for(;++Se<q&&(be*=256);)ce+=this[F+Se]*be;return be*=128,ce>=be&&(ce-=Math.pow(2,8*q)),ce},l.prototype.readIntBE=function(F,q,k){F=F>>>0,q=q>>>0,k||te(F,q,this.length);let ce=q,be=1,Se=this[F+--ce];for(;ce>0&&(be*=256);)Se+=this[F+--ce]*be;return be*=128,Se>=be&&(Se-=Math.pow(2,8*q)),Se},l.prototype.readInt8=function(F,q){return F=F>>>0,q||te(F,1,this.length),this[F]&128?(255-this[F]+1)*-1:this[F]},l.prototype.readInt16LE=function(F,q){F=F>>>0,q||te(F,2,this.length);const k=this[F]|this[F+1]<<8;return k&32768?k|4294901760:k},l.prototype.readInt16BE=function(F,q){F=F>>>0,q||te(F,2,this.length);const k=this[F+1]|this[F]<<8;return k&32768?k|4294901760:k},l.prototype.readInt32LE=function(F,q){return F=F>>>0,q||te(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},l.prototype.readInt32BE=function(F,q){return F=F>>>0,q||te(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},l.prototype.readBigInt64LE=ye(function(F){F=F>>>0,X(F,"offset");const q=this[F],k=this[F+7];(q===void 0||k===void 0)&&H(F,this.length-8);const ce=this[F+4]+this[F+5]*2**8+this[F+6]*2**16+(k<<24);return(BigInt(ce)<<BigInt(32))+BigInt(q+this[++F]*2**8+this[++F]*2**16+this[++F]*2**24)}),l.prototype.readBigInt64BE=ye(function(F){F=F>>>0,X(F,"offset");const q=this[F],k=this[F+7];(q===void 0||k===void 0)&&H(F,this.length-8);const ce=(q<<24)+this[++F]*2**16+this[++F]*2**8+this[++F];return(BigInt(ce)<<BigInt(32))+BigInt(this[++F]*2**24+this[++F]*2**16+this[++F]*2**8+k)}),l.prototype.readFloatLE=function(F,q){return F=F>>>0,q||te(F,4,this.length),u.read(this,F,!0,23,4)},l.prototype.readFloatBE=function(F,q){return F=F>>>0,q||te(F,4,this.length),u.read(this,F,!1,23,4)},l.prototype.readDoubleLE=function(F,q){return F=F>>>0,q||te(F,8,this.length),u.read(this,F,!0,52,8)},l.prototype.readDoubleBE=function(F,q){return F=F>>>0,q||te(F,8,this.length),u.read(this,F,!1,52,8)};function Le(U,F,q,k,ce,be){if(!l.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>ce||F<be)throw new RangeError('"value" argument is out of bounds');if(q+k>U.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(F,q,k,ce){if(F=+F,q=q>>>0,k=k>>>0,!ce){const Ke=Math.pow(2,8*k)-1;Le(this,F,q,k,Ke,0)}let be=1,Se=0;for(this[q]=F&255;++Se<k&&(be*=256);)this[q+Se]=F/be&255;return q+k},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(F,q,k,ce){if(F=+F,q=q>>>0,k=k>>>0,!ce){const Ke=Math.pow(2,8*k)-1;Le(this,F,q,k,Ke,0)}let be=k-1,Se=1;for(this[q+be]=F&255;--be>=0&&(Se*=256);)this[q+be]=F/Se&255;return q+k},l.prototype.writeUint8=l.prototype.writeUInt8=function(F,q,k){return F=+F,q=q>>>0,k||Le(this,F,q,1,255,0),this[q]=F&255,q+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(F,q,k){return F=+F,q=q>>>0,k||Le(this,F,q,2,65535,0),this[q]=F&255,this[q+1]=F>>>8,q+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(F,q,k){return F=+F,q=q>>>0,k||Le(this,F,q,2,65535,0),this[q]=F>>>8,this[q+1]=F&255,q+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(F,q,k){return F=+F,q=q>>>0,k||Le(this,F,q,4,4294967295,0),this[q+3]=F>>>24,this[q+2]=F>>>16,this[q+1]=F>>>8,this[q]=F&255,q+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(F,q,k){return F=+F,q=q>>>0,k||Le(this,F,q,4,4294967295,0),this[q]=F>>>24,this[q+1]=F>>>16,this[q+2]=F>>>8,this[q+3]=F&255,q+4};function Ce(U,F,q,k,ce){B(F,k,ce,U,q,7);let be=Number(F&BigInt(4294967295));U[q++]=be,be=be>>8,U[q++]=be,be=be>>8,U[q++]=be,be=be>>8,U[q++]=be;let Se=Number(F>>BigInt(32)&BigInt(4294967295));return U[q++]=Se,Se=Se>>8,U[q++]=Se,Se=Se>>8,U[q++]=Se,Se=Se>>8,U[q++]=Se,q}function Ve(U,F,q,k,ce){B(F,k,ce,U,q,7);let be=Number(F&BigInt(4294967295));U[q+7]=be,be=be>>8,U[q+6]=be,be=be>>8,U[q+5]=be,be=be>>8,U[q+4]=be;let Se=Number(F>>BigInt(32)&BigInt(4294967295));return U[q+3]=Se,Se=Se>>8,U[q+2]=Se,Se=Se>>8,U[q+1]=Se,Se=Se>>8,U[q]=Se,q+8}l.prototype.writeBigUInt64LE=ye(function(F,q=0){return Ce(this,F,q,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=ye(function(F,q=0){return Ve(this,F,q,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(F,q,k,ce){if(F=+F,q=q>>>0,!ce){const Y=Math.pow(2,8*k-1);Le(this,F,q,k,Y-1,-Y)}let be=0,Se=1,Ke=0;for(this[q]=F&255;++be<k&&(Se*=256);)F<0&&Ke===0&&this[q+be-1]!==0&&(Ke=1),this[q+be]=(F/Se>>0)-Ke&255;return q+k},l.prototype.writeIntBE=function(F,q,k,ce){if(F=+F,q=q>>>0,!ce){const Y=Math.pow(2,8*k-1);Le(this,F,q,k,Y-1,-Y)}let be=k-1,Se=1,Ke=0;for(this[q+be]=F&255;--be>=0&&(Se*=256);)F<0&&Ke===0&&this[q+be+1]!==0&&(Ke=1),this[q+be]=(F/Se>>0)-Ke&255;return q+k},l.prototype.writeInt8=function(F,q,k){return F=+F,q=q>>>0,k||Le(this,F,q,1,127,-128),F<0&&(F=255+F+1),this[q]=F&255,q+1},l.prototype.writeInt16LE=function(F,q,k){return F=+F,q=q>>>0,k||Le(this,F,q,2,32767,-32768),this[q]=F&255,this[q+1]=F>>>8,q+2},l.prototype.writeInt16BE=function(F,q,k){return F=+F,q=q>>>0,k||Le(this,F,q,2,32767,-32768),this[q]=F>>>8,this[q+1]=F&255,q+2},l.prototype.writeInt32LE=function(F,q,k){return F=+F,q=q>>>0,k||Le(this,F,q,4,2147483647,-2147483648),this[q]=F&255,this[q+1]=F>>>8,this[q+2]=F>>>16,this[q+3]=F>>>24,q+4},l.prototype.writeInt32BE=function(F,q,k){return F=+F,q=q>>>0,k||Le(this,F,q,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[q]=F>>>24,this[q+1]=F>>>16,this[q+2]=F>>>8,this[q+3]=F&255,q+4},l.prototype.writeBigInt64LE=ye(function(F,q=0){return Ce(this,F,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=ye(function(F,q=0){return Ve(this,F,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(U,F,q,k,ce,be){if(q+k>U.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function we(U,F,q,k,ce){return F=+F,q=q>>>0,ce||ge(U,F,q,4),u.write(U,F,q,k,23,4),q+4}l.prototype.writeFloatLE=function(F,q,k){return we(this,F,q,!0,k)},l.prototype.writeFloatBE=function(F,q,k){return we(this,F,q,!1,k)};function G(U,F,q,k,ce){return F=+F,q=q>>>0,ce||ge(U,F,q,8),u.write(U,F,q,k,52,8),q+8}l.prototype.writeDoubleLE=function(F,q,k){return G(this,F,q,!0,k)},l.prototype.writeDoubleBE=function(F,q,k){return G(this,F,q,!1,k)},l.prototype.copy=function(F,q,k,ce){if(!l.isBuffer(F))throw new TypeError("argument should be a Buffer");if(k||(k=0),!ce&&ce!==0&&(ce=this.length),q>=F.length&&(q=F.length),q||(q=0),ce>0&&ce<k&&(ce=k),ce===k||F.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),F.length-q<ce-k&&(ce=F.length-q+k);const be=ce-k;return this===F&&typeof e.prototype.copyWithin=="function"?this.copyWithin(q,k,ce):e.prototype.set.call(F,this.subarray(k,ce),q),be},l.prototype.fill=function(F,q,k,ce){if(typeof F=="string"){if(typeof q=="string"?(ce=q,q=0,k=this.length):typeof k=="string"&&(ce=k,k=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!l.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(F.length===1){const Se=F.charCodeAt(0);(ce==="utf8"&&Se<128||ce==="latin1")&&(F=Se)}}else typeof F=="number"?F=F&255:typeof F=="boolean"&&(F=Number(F));if(q<0||this.length<q||this.length<k)throw new RangeError("Out of range index");if(k<=q)return this;q=q>>>0,k=k===void 0?this.length:k>>>0,F||(F=0);let be;if(typeof F=="number")for(be=q;be<k;++be)this[be]=F;else{const Se=l.isBuffer(F)?F:l.from(F,ce),Ke=Se.length;if(Ke===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(be=0;be<k-q;++be)this[be+q]=Se[be%Ke]}return this};const D={};function j(U,F,q){D[U]=class extends q{constructor(){super(),Object.defineProperty(this,"message",{value:F.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,this.stack,delete this.name}get code(){return U}set code(ce){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ce,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}j("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),j("ERR_INVALID_ARG_TYPE",function(U,F){return`The "${U}" argument must be of type number. Received type ${typeof F}`},TypeError),j("ERR_OUT_OF_RANGE",function(U,F,q){let k=`The value of "${U}" is out of range.`,ce=q;return Number.isInteger(q)&&Math.abs(q)>2**32?ce=I(String(q)):typeof q=="bigint"&&(ce=String(q),(q>BigInt(2)**BigInt(32)||q<-(BigInt(2)**BigInt(32)))&&(ce=I(ce)),ce+="n"),k+=` It must be ${F}. Received ${ce}`,k},RangeError);function I(U){let F="",q=U.length;const k=U[0]==="-"?1:0;for(;q>=k+4;q-=3)F=`_${U.slice(q-3,q)}${F}`;return`${U.slice(0,q)}${F}`}function N(U,F,q){X(F,"offset"),(U[F]===void 0||U[F+q]===void 0)&&H(F,U.length-(q+1))}function B(U,F,q,k,ce,be){if(U>q||U<F){const Se=typeof F=="bigint"?"n":"";let Ke;throw F===0||F===BigInt(0)?Ke=`>= 0${Se} and < 2${Se} ** ${(be+1)*8}${Se}`:Ke=`>= -(2${Se} ** ${(be+1)*8-1}${Se}) and < 2 ** ${(be+1)*8-1}${Se}`,new D.ERR_OUT_OF_RANGE("value",Ke,U)}N(k,ce,be)}function X(U,F){if(typeof U!="number")throw new D.ERR_INVALID_ARG_TYPE(F,"number",U)}function H(U,F,q){throw Math.floor(U)!==U?(X(U,q),new D.ERR_OUT_OF_RANGE("offset","an integer",U)):F<0?new D.ERR_BUFFER_OUT_OF_BOUNDS:new D.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${F}`,U)}const K=/[^+/0-9A-Za-z-_]/g;function z(U){if(U=U.split("=")[0],U=U.trim().replace(K,""),U.length<2)return"";for(;U.length%4!==0;)U=U+"=";return U}function Z(U,F){F=F||1/0;let q;const k=U.length;let ce=null;const be=[];for(let Se=0;Se<k;++Se){if(q=U.charCodeAt(Se),q>55295&&q<57344){if(!ce){if(q>56319){(F-=3)>-1&&be.push(239,191,189);continue}else if(Se+1===k){(F-=3)>-1&&be.push(239,191,189);continue}ce=q;continue}if(q<56320){(F-=3)>-1&&be.push(239,191,189),ce=q;continue}q=(ce-55296<<10|q-56320)+65536}else ce&&(F-=3)>-1&&be.push(239,191,189);if(ce=null,q<128){if((F-=1)<0)break;be.push(q)}else if(q<2048){if((F-=2)<0)break;be.push(q>>6|192,q&63|128)}else if(q<65536){if((F-=3)<0)break;be.push(q>>12|224,q>>6&63|128,q&63|128)}else if(q<1114112){if((F-=4)<0)break;be.push(q>>18|240,q>>12&63|128,q>>6&63|128,q&63|128)}else throw new Error("Invalid code point")}return be}function de(U){const F=[];for(let q=0;q<U.length;++q)F.push(U.charCodeAt(q)&255);return F}function le(U,F){let q,k,ce;const be=[];for(let Se=0;Se<U.length&&!((F-=2)<0);++Se)q=U.charCodeAt(Se),k=q>>8,ce=q%256,be.push(ce),be.push(k);return be}function De(U){return t.toByteArray(z(U))}function Qe(U,F,q,k){let ce;for(ce=0;ce<k&&!(ce+q>=F.length||ce>=U.length);++ce)F[ce+q]=U[ce];return ce}function je(U,F){return U instanceof F||U!=null&&U.constructor!=null&&U.constructor.name!=null&&U.constructor.name===F.name}function oe(U){return U!==U}const se=function(){const U="0123456789abcdef",F=new Array(256);for(let q=0;q<16;++q){const k=q*16;for(let ce=0;ce<16;++ce)F[k+ce]=U[q]+U[ce]}return F}();function ye(U){return typeof BigInt>"u"?Ie:U}function Ie(){throw new Error("BigInt not supported")}})(zx);const qM=zx.Buffer,ele=zx.Buffer;var Jx,BM;function N1(){if(BM)return Jx;BM=1;var a=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/\s|\uFEFF|\xA0/,n=/\r?\n[\x20\x09]+/g,r=/[;,"]/,e=/[;,"]|\s/,i=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,o={IDLE:1,URI:2,ATTR:4};function c(p){return p.replace(t,"")}function s(p){return u.test(p)}function l(p,b){for(;s(p[b]);)b++;return b}function d(p){return e.test(p)||!i.test(p)}function f(p,b){return Object.keys(p).length===Object.keys(b).length&&Object.keys(p).every(_=>_ in b&&p[_]===b[_])}class h{constructor(b){this.refs=[],b&&this.parse(b)}rel(b){for(var _=[],y=b.toLowerCase(),g=0;g<this.refs.length;g++)typeof this.refs[g].rel=="string"&&this.refs[g].rel.toLowerCase()===y&&_.push(this.refs[g]);return _}get(b,_){b=b.toLowerCase(),_=_.toLowerCase();for(var y=[],g=0;g<this.refs.length;g++)typeof this.refs[g][b]=="string"&&this.refs[g][b].toLowerCase()===_&&y.push(this.refs[g]);return y}set(b){return this.refs.push(b),this}setUnique(b){return this.refs.some(_=>f(_,b))||this.refs.push(b),this}has(b,_){b=b.toLowerCase(),_=_.toLowerCase();for(var y=0;y<this.refs.length;y++)if(typeof this.refs[y][b]=="string"&&this.refs[y][b].toLowerCase()===_)return!0;return!1}parse(b,m){m=m||0,b=m?b.slice(m):b,b=c(b).replace(n,"");for(var y=o.IDLE,g=b.length,m=0,v=null;m<g;)if(y===o.IDLE){if(s(b[m])){m++;continue}else if(b[m]==="<"){v!=null&&(v.rel!=null?this.refs.push(...h.expandRelations(v)):this.refs.push(v));var T=b.indexOf(">",m);if(T===-1)throw new Error("Expected end of URI delimiter at offset "+m);v={uri:b.slice(m+1,T)},m=T,y=o.URI}else throw new Error('Unexpected character "'+b[m]+'" at offset '+m);m++}else if(y===o.URI)if(s(b[m])){m++;continue}else if(b[m]===";")y=o.ATTR,m++;else if(b[m]===",")y=o.IDLE,m++;else throw new Error('Unexpected character "'+b[m]+'" at offset '+m);else if(y===o.ATTR){if(b[m]===";"||s(b[m])){m++;continue}var T=b.indexOf("=",m);T===-1&&(T=b.indexOf(";",m)),T===-1&&(T=b.length);var S=c(b.slice(m,T)).toLowerCase(),x="";if(m=T+1,m=l(b,m),b[m]==='"')for(m++;m<g;){if(b[m]==='"'){m++;break}b[m]==="\\"&&m++,x+=b[m],m++}else{for(var T=m+1;!r.test(b[T])&&T<g;)T++;x=b.slice(m,T),m=T}switch(v[S]&&h.isSingleOccurenceAttr(S)||(S[S.length-1]==="*"?v[S]=h.parseExtendedValue(x):(x=S==="type"?x.toLowerCase():x,v[S]!=null?Array.isArray(v[S])?v[S].push(x):v[S]=[v[S],x]:v[S]=x)),b[m]){case",":y=o.IDLE;break;case";":y=o.ATTR;break}m++}else throw new Error('Unknown parser state "'+y+'"');return v!=null&&(v.rel!=null?this.refs.push(...h.expandRelations(v)):this.refs.push(v)),v=null,this}toString(){for(var b=[],_="",y=null,g=0;g<this.refs.length;g++)y=this.refs[g],_=Object.keys(this.refs[g]).reduce(function(m,v){return v==="uri"?m:m+"; "+h.formatAttribute(v,y[v])},"<"+y.uri+">"),b.push(_);return b.join(", ")}}return h.isCompatibleEncoding=function(p){return a.test(p)},h.parse=function(p,b){return new h().parse(p,b)},h.isSingleOccurenceAttr=function(p){return p==="rel"||p==="type"||p==="media"||p==="title"||p==="title*"},h.isTokenAttr=function(p){return p==="rel"||p==="type"||p==="anchor"},h.escapeQuotes=function(p){return p.replace(/"/g,'\\"')},h.expandRelations=function(p){var b=p.rel.split(" ");return b.map(function(_){var y=Object.assign({},p);return y.rel=_,y})},h.parseExtendedValue=function(p){var b=/([^']+)?(?:'([^']*)')?(.+)/.exec(p);return{language:b[2].toLowerCase(),encoding:h.isCompatibleEncoding(b[1])?null:b[1].toLowerCase(),value:h.isCompatibleEncoding(b[1])?decodeURIComponent(b[3]):b[3]}},h.formatExtendedAttribute=function(p,b){var _=(b.encoding||"utf-8").toUpperCase(),y=b.language||"en",g="";return qM.isBuffer(b.value)&&h.isCompatibleEncoding(_)?g=b.value.toString(_):qM.isBuffer(b.value)?g=b.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):g=encodeURIComponent(b.value),p+"="+_+"'"+y+"'"+g},h.formatAttribute=function(p,b){return Array.isArray(b)?b.map(_=>h.formatAttribute(p,_)).join("; "):p[p.length-1]==="*"||typeof b!="string"?h.formatExtendedAttribute(p,b):(h.isTokenAttr(p)?b=d(b)?'"'+h.escapeQuotes(b)+'"':h.escapeQuotes(b):d(b)&&(b=encodeURIComponent(b),b=b.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),b='"'+b+'"'),p+"="+b)},Jx=h,Jx}var $M;function VM(){if($M)return x1;$M=1,Object.defineProperty(x1,"__esModule",{value:!0}),x1.FetchDocumentLoader=void 0;const a=KO(),t=N1(),u=vr();class n{constructor(e){this.fetcher=e}async load(e){const i=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(i.ok&&i.headers){let o=i.headers.get("Content-Type");if(o){const c=o.indexOf(";");c>0&&(o=o.substr(0,c))}if(o==="application/ld+json")return await i.json();if(i.headers.has("Link")){let c;if(i.headers.forEach((s,l)=>{if(l==="link"){const d=(0,t.parse)(s);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+e);c=(0,u.resolve)(f.uri,e)}}}),c)return this.load(c)}throw new a.ErrorCoded(`Unsupported JSON-LD media type ${o}`,a.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(i.statusText||`Status code: ${i.status}`)}}return x1.FetchDocumentLoader=n,x1}var Kx={},R1={},UM;function Wx(){if(UM)return R1;UM=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.Util=void 0;class a{static isCompactIri(u){return u.indexOf(":")>0&&!(u&&u[0]==="#")}static getPrefix(u,n){if(u&&u[0]==="#")return null;const r=u.indexOf(":");if(r>=0){if(u.length>r+1&&u.charAt(r+1)==="/"&&u.charAt(r+2)==="/")return null;const e=u.substr(0,r);if(e==="_")return null;if(n[e])return e}return null}static getContextValueId(u){if(u===null||typeof u=="string")return u;const n=u["@id"];return n||null}static isSimpleTermDefinitionPrefix(u,n){return!a.isPotentialKeyword(u)&&(n.allowPrefixNonGenDelims||typeof u=="string"&&(u[0]==="_"||a.isPrefixIriEndingWithGenDelim(u)))}static isPotentialKeyword(u){return typeof u=="string"&&a.KEYWORD_REGEX.test(u)}static isPrefixIriEndingWithGenDelim(u){return a.ENDS_WITH_GEN_DELIM.test(u)}static isPrefixValue(u){return u&&(typeof u=="string"||u&&typeof u=="object")}static isValidIri(u){return!!(u&&a.IRI_REGEX.test(u))}static isValidIriWeak(u){return!!u&&u[0]!==":"&&a.IRI_REGEX_WEAK.test(u)}static isValidKeyword(u){return a.VALID_KEYWORDS[u]}static isTermProtected(u,n){const r=u[n];return typeof r!="string"&&r&&r["@protected"]}static hasProtectedTerms(u){for(const n of Object.keys(u))if(a.isTermProtected(u,n))return!0;return!1}static isReservedInternalKeyword(u){return u.startsWith("@__")}static deepEqual(u,n){const r=Object.keys(u),e=Object.keys(n);return r.length!==e.length?!1:r.every(i=>{const o=u[i],c=n[i];return o===c||o!==null&&c!==null&&typeof o=="object"&&typeof c=="object"&&this.deepEqual(o,c)})}}return a.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,a.IRI_REGEX_WEAK=/(?::[^:])|\//,a.KEYWORD_REGEX=/^@[a-z]+$/i,a.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,a.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,a.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,a.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},a.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],a.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],a.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],a.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],a.CONTAINERS_1_0=["@list","@set","@index"],R1.Util=a,R1}var QM;function HM(){return QM||(QM=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.defaultExpandOptions=a.JsonLdContextNormalized=void 0;const t=vr(),u=KO(),n=Wx();class r{constructor(i){this.contextRaw=i}getContextRaw(){return this.contextRaw}expandTerm(i,o,c=a.defaultExpandOptions){const s=this.contextRaw[i];if(s===null||s&&s["@id"]===null)return null;let l=!0;if(s&&o){const _=n.Util.getContextValueId(s);if(_&&_!==i)if(typeof _!="string"||!n.Util.isValidIri(_)&&!n.Util.isValidKeyword(_))n.Util.isPotentialKeyword(_)||(l=!1);else return _}const d=n.Util.getPrefix(i,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],b=n.Util.isPotentialKeyword(i);if(d){const _=this.contextRaw[d],y=n.Util.getContextValueId(_);if(y){if(typeof _=="string"||!c.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(y,c))return i}else if(y[0]!=="_"&&!b&&!_["@prefix"]&&!(i in this.contextRaw))return i;return y+i.substr(d.length+1)}}else if(o&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!b&&!n.Util.isCompactIri(i))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,t.resolve)(f,p):"")+i;throw new u.ErrorCoded(`Relative vocab expansion for term '${i}' with vocab '${f}' is not allowed.`,u.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+i;else if(!o&&p&&!b&&!n.Util.isCompactIri(i))return(0,t.resolve)(i,p);if(l)return i;throw new u.ErrorCoded(`Invalid IRI mapping found for context entry '${i}': '${JSON.stringify(s)}'`,u.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(i,o){if(o&&this.contextRaw["@vocab"]&&i.startsWith(this.contextRaw["@vocab"]))return i.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&i.startsWith(this.contextRaw["@base"]))return i.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:i};for(const s in this.contextRaw){const l=this.contextRaw[s];if(l&&!n.Util.isPotentialKeyword(s)){const d=n.Util.getContextValueId(l);if(i.startsWith(d)){const f=i.substr(d.length);if(f)f.length<c.suffix.length&&(c.prefix=s,c.suffix=f);else if(o)return s}}}return c.prefix?c.prefix+":"+c.suffix:i}}a.JsonLdContextNormalized=r,a.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(Kx)),Kx}var GM;function tle(){if(GM)return I1;GM=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.ContextParser=void 0;const a=vr(),t=KO(),u=VM(),n=HM(),r=Wx();class e{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new u.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,c,s){if(typeof o!="string")throw new t.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,s);if(!r.Util.REGEX_LANGUAGE_TAG.test(o)){if(c)throw new t.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,s);return!1}return!0}static validateDirection(o,c){if(typeof o!="string")throw new t.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,t.ERROR_CODES.INVALID_BASE_DIRECTION);if(!r.Util.REGEX_DIRECTION_TAG.test(o)){if(c)throw new t.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,t.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const c of Object.keys(o)){let s=o[c];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||r.Util.isValidKeyword(s["@reverse"]))throw new t.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);s=o[c]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],r.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return o}expandPrefixedTerms(o,c,s){const l=o.getContextRaw();for(const d of s||Object.keys(l))if(r.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!r.Util.isReservedInternalKeyword(d)){const f=l[d];if(r.Util.isPotentialKeyword(d)&&r.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof l[d]=="object"&&!(l[d]["@protected"]||l[d]["@container"]==="@set")))throw new t.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,t.ERROR_CODES.KEYWORD_REDEFINITION);if(r.Util.ALIAS_RANGE_BLACKLIST.indexOf(r.Util.getContextValueId(f))>=0)throw new t.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,t.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&r.Util.isPotentialKeyword(r.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new t.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);for(;r.Util.isPrefixValue(l[d]);){const h=l[d];let p=!1;if(typeof h=="string")l[d]=o.expandTerm(h,!0),p=p||h!==l[d];else{const b=h["@id"],_=h["@type"],y=!("@prefix"in h)||r.Util.isValidIri(d);if("@id"in h)b!=null&&typeof b=="string"&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":o.expandTerm(b,!0)}),p=p||b!==l[d]["@id"]);else if(!r.Util.isPotentialKeyword(d)&&y){const g=o.expandTerm(d,!0);g!==d&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":g}),p=!0)}if(_&&typeof _=="string"&&_!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&y){let g=o.expandTerm(_,!0);c&&_===g&&(g=o.expandTerm(_,!1)),g!==_&&(p=!0,l[d]=Object.assign(Object.assign({},l[d]),{"@type":g}))}}if(!p)break}}}normalize(o,{processingMode:c,normalizeLanguageTags:s}){if(s||c===1)for(const l of Object.keys(o))if(l==="@language"&&typeof o[l]=="string")o[l]=o[l].toLowerCase();else{const d=o[l];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[l]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const c of Object.keys(o)){const s=o[c];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")o[c]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const l={};for(const d of s["@container"])l[d]=!0;o[c]=Object.assign(Object.assign({},s),{"@container":l})}}}}applyScopedProtected(o,{processingMode:c},s){if(c&&c>=1.1&&o["@protected"]){for(const l of Object.keys(o))if(!r.Util.isReservedInternalKeyword(l)&&!r.Util.isPotentialKeyword(l)&&!r.Util.isTermProtected(o,l)){const d=o[l];d&&typeof d=="object"?"@protected"in o[l]||(o[l]=Object.assign(Object.assign({},o[l]),{"@protected":!0})):(o[l]={"@id":d,"@protected":!0},r.Util.isSimpleTermDefinitionPrefix(d,s)&&(o[l]=Object.assign(Object.assign({},o[l]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,c,s,l){for(const d of l??Object.keys(c))if(r.Util.isTermProtected(o,d)&&(typeof c[d]=="string"?c[d]={"@id":c[d],"@protected":!0}:c[d]=Object.assign(Object.assign({},c[d]),{"@protected":!0}),!r.Util.deepEqual(o[d],c[d])))throw new t.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(r.Util.getContextValueId(o[d]))} to ${JSON.stringify(r.Util.getContextValueId(c[d]))}`,t.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:c}){for(const s of Object.keys(o)){if(r.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new t.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(o[s])}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);const l=o[s],d=typeof l;if(r.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(l!==null&&d!=="string")throw new t.ErrorCoded(`Found an invalid @vocab IRI: ${l}`,t.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(l!==null&&d!=="string")throw new t.ErrorCoded(`Found an invalid @base IRI: ${o[s]}`,t.ERROR_CODES.INVALID_BASE_IRI);break;case"language":l!==null&&e.validateLanguage(l,!0,t.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(l!==null&&d!=="number")throw new t.ErrorCoded(`Found an invalid @version number: ${l}`,t.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":l!==null&&e.validateDirection(l,!0);break;case"propagate":if(c===1)throw new t.ErrorCoded(`Found an illegal @propagate keyword: ${l}`,t.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(l!==null&&d!=="boolean")throw new t.ErrorCoded(`Found an invalid @propagate value: ${l}`,t.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(r.Util.isValidKeyword(s)&&r.Util.isValidKeyword(r.Util.getContextValueId(l)))throw new t.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${r.Util.getContextValueId(l)}'`,t.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(l!==null)switch(d){case"string":if(r.Util.getPrefix(l,o)===s)throw new t.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.CYCLIC_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(l==="@type")throw new t.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${l}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(l)&&l!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new t.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${l}'`,t.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!r.Util.isCompactIri(s)&&!("@id"in l)&&(l["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new t.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(l)){const h=l[f];if(h)switch(f){case"@id":if(r.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new t.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(h==="@type")throw new t.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(h)&&h!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new t.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new t.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.getPrefix(h,o)===s)throw new t.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(l["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new t.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${h}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new t.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!r.Util.isValidIri(h)))throw new t.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${h}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&l["@id"]&&l["@id"]!==h)throw new t.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${h}' and '${l["@id"]}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in l)throw new t.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||r.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new t.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(h)}') in 1.0, must be only one of ${r.Util.CONTAINERS_1_0.join(", ")}`,t.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&l["@reverse"])throw new t.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(r.Util.CONTAINERS.indexOf(p)<0)throw new t.ErrorCoded(`Invalid term @container for '${s}' ('${p}'), must be one of ${r.Util.CONTAINERS.join(", ")}`,t.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":e.validateLanguage(h,!0,t.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":e.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new t.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in l)&&!r.Util.isValidIri(s))throw new t.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!l["@container"]||!l["@container"]["@index"])throw new t.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(r.Util.isPotentialKeyword(h)&&h!=="@nest")throw new t.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new t.ErrorCoded(`Found an invalid term value: '${s}': '${l}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,c,s){return typeof o=="string"||(s&&!("@base"in o)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(o["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!r.Util.isValidIri(o["@base"])&&(o["@base"]=(0,a.resolve)(o["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(o["@base"]=c.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,c){if(!r.Util.isValidIri(o))try{o=(0,a.resolve)(o,c)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,c,s){for(const l of s??Object.keys(o)){const d=o[l];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[l]:Object.assign({},o[l])});delete f[l]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new t.ErrorCoded(f.message,t.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[l]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,c={},s={}){const{baseIRI:l,parentContext:d,external:f,processingMode:h=e.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:b,minimalProcessing:_}=c,y=c.remoteContexts||{};if(Object.keys(y).length>=this.remoteContextsDepthLimit)throw new t.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(y),t.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!b&&d&&r.Util.hasProtectedTerms(d))throw new t.ErrorCoded("Illegal context nullification when terms are protected",t.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof o=="string"){const g=this.normalizeContextIri(o,l),m=this.getOverriddenLoad(g,c);if(m)return new n.JsonLdContextNormalized(m);const v=await this.parse(await this.load(g),Object.assign(Object.assign({},c),{baseIRI:g,external:!0,remoteContexts:Object.assign(Object.assign({},y),{[g]:!0})}));return this.applyBaseEntry(v.getContextRaw(),c,!0),v}else if(Array.isArray(o)){const g=[],m=await Promise.all(o.map((T,S)=>{if(typeof T=="string"){const x=this.normalizeContextIri(T,l);g[S]=x;const L=this.getOverriddenLoad(x,c);return L||this.load(x)}else return T}));if(_)return new n.JsonLdContextNormalized(m);const v=await m.reduce((T,S,x)=>T.then(L=>this.parse(S,Object.assign(Object.assign({},c),{baseIRI:g[x]||c.baseIRI,external:!!g[x]||c.external,parentContext:L.getContextRaw(),remoteContexts:g[x]?Object.assign(Object.assign({},y),{[g[x]]:!0}):y}),{skipValidation:x<m.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(v.getContextRaw(),c,!0),v}else if(typeof o=="object"){if("@context"in o)return await this.parse(o["@context"],c);if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,c,!0),this.containersToHash(o),_)return new n.JsonLdContextNormalized(o);let g={};if("@import"in o)if(h>=1.1){if(typeof o["@import"]!="string")throw new t.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],t.ERROR_CODES.INVALID_IMPORT_VALUE);g=await this.loadImportContext(this.normalizeContextIri(o["@import"],l)),delete o["@import"]}else throw new t.ErrorCoded("Context importing is not supported in JSON-LD 1.0",t.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(g,{processingMode:h},n.defaultExpandOptions);const m=Object.assign(g,o);this.idifyReverseTerms(m),this.normalize(m,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(m,{processingMode:h},n.defaultExpandOptions);const v=Object.keys(m),T=[];if(typeof d=="object")for(const x in d)x in m?T.push(x):m[x]=d[x];await this.parseInnerContexts(m,c,v);const S=new n.JsonLdContextNormalized(m);return(m&&m["@version"]||e.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?m["@vocab"]=d["@vocab"]+o["@vocab"]:(r.Util.isCompactIri(o["@vocab"])||o["@vocab"]in m)&&(m["@vocab"]=S.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,v),!b&&d&&h>=1.1&&this.validateKeywordRedefinitions(d,m,n.defaultExpandOptions,T),this.validateContext&&!s.skipValidation&&this.validate(m,{processingMode:h}),S}else throw new t.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,t.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const c=this.documentCache[o];if(c)return c;let s;try{s=await this.documentLoader.load(o)}catch(l){throw new t.ErrorCoded(`Failed to load remote context ${o}: ${l.message}`,t.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new t.ErrorCoded(`Missing @context in remote context at ${o}`,t.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=s["@context"]}getOverriddenLoad(o,c){if(o in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return o;throw new t.ErrorCoded("Detected a cyclic context inclusion of "+o,t.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let c=await this.load(o);if(typeof c!="object"||Array.isArray(c))throw new t.ErrorCoded("An imported context must be a single object: "+o,t.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new t.ErrorCoded("An imported context can not import another context: "+o,t.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}}return e.DEFAULT_PROCESSING_MODE=1.1,I1.ContextParser=e,I1}var Yx={},zM;function rle(){return zM||(zM=1,Object.defineProperty(Yx,"__esModule",{value:!0})),Yx}var Zx={},kM;function nle(){return kM||(kM=1,Object.defineProperty(Zx,"__esModule",{value:!0})),Zx}var XM;function ile(){return XM||(XM=1,function(a){var t=Wu&&Wu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Wu&&Wu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(tle(),a),u(KO(),a),u(VM(),a),u(rle(),a),u(nle(),a),u(HM(),a),u(Wx(),a)}(Wu)),Wu}var JM;function KM(){if(JM)return g1;JM=1,Object.defineProperty(g1,"__esModule",{value:!0}),g1.Util=void 0;const a=Hce(),t=ile(),u=ht();class n{constructor(e){this.nodeHandlers={},this.nodeValueHandlers={},this.directiveNodeHandlers={},this.settings=e,this.dataFactory=e.dataFactory||new a.DataFactory,this.operationFactory=new u.Factory(this.dataFactory),this.contextParser=new t.ContextParser}registerNodeHandler(e){this.nodeHandlers[e.targetKind]=e}registerNodeValueHandler(e){this.nodeValueHandlers[e.targetKind]=e}registerDirectiveNodeHandler(e){this.directiveNodeHandlers[e.targetKind]=e}handleNode(e,i){const o=this.nodeHandlers[e.kind];if(!o)throw new Error(`Unsupported GraphQL node '${e.kind}'`);return o.handle(e,i)}handleNodeValue(e,i,o){const c=this.nodeValueHandlers[e.kind];if(!c)throw new Error(`Unsupported GraphQL value node '${e.kind}'`);return c.handle(e,i,o)}handleDirectiveNode(e,i){const o=this.directiveNodeHandlers[e.directive.name.value];return o?o.handle(e,i):null}joinOperations(e){if(e.length===1)return e[0];const i=[],o=[];for(const c of e)c.type==="bgp"?i.push(c):o.push(c);if(i.length===e.length)return this.joinOperationsAsBgp(i);if(i.length===e.length-1&&o[0].type==="leftjoin"&&o[0].input[0].type==="bgp"){const c=o[0];return i.push(c.input[0]),this.operationFactory.createLeftJoin(this.joinOperationsAsBgp(i),c.input[1])}else return o.length===e.length?this.joinOperationsAsNestedJoin(o):this.joinOperationsAsNestedJoin([this.joinOperationsAsBgp(i),this.joinOperationsAsNestedJoin(o)])}joinOperationsAsBgp(e){return this.operationFactory.createBgp([].concat.apply([],e.map(i=>i.patterns)))}joinOperationsAsNestedJoin(e){return this.operationFactory.createJoin(e)}appendFieldToPath(e,i){return e.concat([i])}getFieldLabel(e){return(e.alias?e.alias:e.name).value}nameToVariable(e,i){return this.dataFactory.variable((i.path.length?i.path.join(this.settings.variableDelimiter)+this.settings.variableDelimiter:"")+e)}valueToNamedNode(e,i){const o=i.expandTerm(e,!0);if(this.settings.requireContext&&!o)throw new Error("No context entry was found for "+e);return this.dataFactory.namedNode(o||e)}getArgument(e,i){if(e){for(const o of e)if(o.name.value===i)return o}}newTypePattern(e,i,o){return this.operationFactory.createPattern(e,this.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.valueToNamedNode(i.name.value,o.context),o.graph)}createQuadPattern(e,i,o,c,s){const l=this.valueToNamedNode(i.value,s);return s&&s.getContextRaw()[i.value]&&s.getContextRaw()[i.value]["@reverse"]?this.operationFactory.createPattern(o,l,e,c):this.operationFactory.createPattern(e,l,o,c)}createQuadPath(e,i,o,c,s,l){const d=this.valueToNamedNode(i.value,l);let f=this.operationFactory.createLink(d);for(const h of o.values){if(h.kind!=="EnumValue")throw new Error("Invalid value type for 'alt' argument, must be EnumValue, but got "+h.kind);f=this.operationFactory.createAlt([f,this.operationFactory.createLink(this.valueToNamedNode(h.value,l))])}return l&&l.getContextRaw()[i.value]&&l.getContextRaw()[i.value]["@reverse"]?this.operationFactory.createPath(c,f,e,s):this.operationFactory.createPath(e,f,c,s)}}return g1.Util=n,g1}var WM;function ale(){if(WM)return Xu;WM=1;var a=Xu&&Xu.__awaiter||function(o,c,s,l){function d(f){return f instanceof s?f:new s(function(h){h(f)})}return new(s||(s=Promise))(function(f,h){function p(y){try{_(l.next(y))}catch(g){h(g)}}function b(y){try{_(l.throw(y))}catch(g){h(g)}}function _(y){y.done?f(y.value):d(y.value).then(p,b)}_((l=l.apply(o,c||[])).next())})};Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.Converter=void 0;const t=Uce,u=Y5(),n=R5(),r=Xy(),e=KM();class i{constructor(c){c=c||{},c.variableDelimiter=c.variableDelimiter||"_",c.expressionVariableCounter=c.expressionVariableCounter||0,this.util=new e.Util(c),this.initializeNodeHandlers(c)}static registerNodeHandlers(c,s){c.registerNodeHandler(new u.NodeHandlerDocument(c,s)),c.registerNodeHandler(new u.NodeHandlerDefinitionOperation(c,s)),c.registerNodeHandler(new u.NodeHandlerDefinitionFragment(c,s)),c.registerNodeHandler(new u.NodeHandlerSelectionFragmentSpread(c,s)),c.registerNodeHandler(new u.NodeHandlerSelectionInlineFragment(c,s)),c.registerNodeHandler(new u.NodeHandlerSelectionField(c,s))}static registerNodeValueHandlers(c,s){c.registerNodeValueHandler(new u.NodeValueHandlerVariable(c,s)),c.registerNodeValueHandler(new u.NodeValueHandlerInt(c,s)),c.registerNodeValueHandler(new u.NodeValueHandlerFloat(c,s)),c.registerNodeValueHandler(new u.NodeValueHandlerString(c,s)),c.registerNodeValueHandler(new u.NodeValueHandlerBoolean(c,s)),c.registerNodeValueHandler(new u.NodeValueHandlerNull(c,s)),c.registerNodeValueHandler(new u.NodeValueHandlerEnum(c,s)),c.registerNodeValueHandler(new u.NodeValueHandlerList(c,s)),c.registerNodeValueHandler(new u.NodeValueHandlerObject(c,s))}static registerDirectiveNodeHandlers(c,s){c.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerInclude(c,s)),c.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerOptional(c,s)),c.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerPlural(c,s)),c.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerSingle(c,s)),c.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerSkip(c,s))}graphqlToSparqlAlgebra(c,s,l){return a(this,void 0,void 0,function*(){return this.graphqlToSparqlAlgebraRawContext(c,yield this.util.contextParser.parse(s),l)})}graphqlToSparqlAlgebraRawContext(c,s,l){l=l||{};const d=typeof c=="string"?(0,t.parse)(c):c,f=this.indexFragments(d),h={context:s,fragmentDefinitions:f,graph:this.util.dataFactory.defaultGraph(),path:[],singularizeState:r.SingularizeState.PLURAL,singularizeVariables:l.singularizeVariables||{},subject:null,terminalVariables:[],variablesDict:l.variablesDict||{},variablesMetaDict:{}};return this.util.handleNode(d,h)}indexFragments(c){const s={},l=[];for(const d of c.definitions)d.kind==="FragmentDefinition"?s[d.name.value]=d:l.push(d);return c.definitions=l,s}initializeNodeHandlers(c){i.registerNodeHandlers(this.util,c),i.registerNodeValueHandlers(this.util,c),i.registerDirectiveNodeHandlers(this.util,c)}}return Xu.Converter=i,Xu}var eN={},YM;function ule(){return YM||(YM=1,Object.defineProperty(eN,"__esModule",{value:!0})),eN}var ZM;function ole(){return ZM||(ZM=1,function(a){var t=Hu&&Hu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Hu&&Hu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Y5(),a),u(ale(),a),u(Xy(),a),u(ule(),a),u(KM(),a)}(Hu)),Hu}var e9;function sle(){if(e9)return Qy;e9=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.ActorQueryParseGraphql=void 0;const a=g5(),t=ze(),u=Te(),n=ole();let r=class extends a.ActorQueryParse{constructor(i){super(i),this.graphqlToSparql=new n.Converter({requireContext:!0})}async test(i){var o;return((o=i.queryFormat)==null?void 0:o.language)!=="graphql"?(0,u.failTest)("This actor can only parse GraphQL queries"):(0,u.passTestVoid)()}async run(i){const o=i.context.get(t.KeysInitQuery.jsonLdContext)||{},c={singularizeVariables:i.context.get(t.KeysInitQuery.graphqlSingularizeVariables)};return{operation:await this.graphqlToSparql.graphqlToSparqlAlgebra(i.query,o,c)}}};return Qy.ActorQueryParseGraphql=r,Qy}var t9;function cle(){return t9||(t9=1,function(a){var t=Qu&&Qu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Qu&&Qu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(sle(),a)}(Qu)),Qu}var Zu={},F1={},eo={},D1={},to={},P1={},r9;function n9(){if(r9)return P1;r9=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.ActorAbstractMediaTyped=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}async run(n){if("handle"in n){const r=n;return{handle:await this.runHandle(r.handle,r.handleMediaType,n.context)}}if("mediaTypes"in n)return{mediaTypes:await this.getMediaTypes(n.context)};if("mediaTypeFormats"in n)return{mediaTypeFormats:await this.getMediaTypeFormats(n.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}async test(n){if("handle"in n){const r=n;return(await this.testHandle(r.handle,r.handleMediaType,n.context)).map(e=>({handle:e}))}return"mediaTypes"in n?(await this.testMediaType(n.context)).map(r=>({mediaTypes:r})):"mediaTypeFormats"in n?(await this.testMediaTypeFormats(n.context)).map(r=>({mediaTypeFormats:r})):(0,a.failTest)("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}};return P1.ActorAbstractMediaTyped=t,P1}var j1={},i9;function lle(){if(i9)return j1;i9=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.ActorAbstractMediaTypedFixed=void 0;const a=Te(),t=n9();let u=class extends t.ActorAbstractMediaTyped{constructor(r){super(r);const e=this.priorityScale||this.priorityScale===0?this.priorityScale:1;if(this.mediaTypePriorities)for(const[i,[o,c]]of Object.entries(this.mediaTypePriorities).entries())this.mediaTypePriorities[o]=e*c;this.mediaTypePriorities=Object.freeze(this.mediaTypePriorities),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats)}async testHandle(r,e,i){return!e||!(e in this.mediaTypePriorities)?(0,a.failTest)(`Unrecognized media type: ${e}`):await this.testHandleChecked(r,i)}async testMediaType(r){return(0,a.passTestVoid)()}async getMediaTypes(r){return this.mediaTypePriorities}async testMediaTypeFormats(r){return(0,a.passTestVoid)()}async getMediaTypeFormats(r){return this.mediaTypeFormats}};return j1.ActorAbstractMediaTypedFixed=u,j1}var a9;function vh(){return a9||(a9=1,function(a){var t=to&&to.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=to&&to.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(n9(),a),u(lle(),a)}(to)),to}var u9;function dle(){if(u9)return D1;u9=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.ActorQueryResultSerialize=void 0;const a=vh();let t=class extends a.ActorAbstractMediaTyped{constructor(n){super(n)}};return D1.ActorQueryResultSerialize=t,D1}var L1={},o9;function fle(){if(o9)return L1;o9=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.ActorQueryResultSerializeFixedMediaTypes=void 0;const a=vh(),t=Te();let u=class extends a.ActorAbstractMediaTypedFixed{constructor(r){super(r)}async testHandleChecked(r,e){return(0,t.passTestVoid)()}};return L1.ActorQueryResultSerializeFixedMediaTypes=u,L1}var s9;function Si(){return s9||(s9=1,function(a){var t=eo&&eo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=eo&&eo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(dle(),a),u(fle(),a)}(eo)),eo}var tN={exports:{}},rN={exports:{}},nN={},c9;function Ci(){return c9||(c9=1,function(a){Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},u={};u.byteLength=l,u.toByteArray=f,u.fromByteArray=b;for(var n=[],r=[],e=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=i.length;o<c;++o)n[o]=i[o],r[i.charCodeAt(o)]=o;r[45]=62,r[95]=63;function s(g){var m=g.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=m);var T=v===m?0:4-v%4;return[v,T]}function l(g){var m=s(g),v=m[0],T=m[1];return(v+T)*3/4-T}function d(g,m,v){return(m+v)*3/4-v}function f(g){var m,v=s(g),T=v[0],S=v[1],x=new e(d(g,T,S)),L=0,O=S>0?T-4:T,w;for(w=0;w<O;w+=4)m=r[g.charCodeAt(w)]<<18|r[g.charCodeAt(w+1)]<<12|r[g.charCodeAt(w+2)]<<6|r[g.charCodeAt(w+3)],x[L++]=m>>16&255,x[L++]=m>>8&255,x[L++]=m&255;return S===2&&(m=r[g.charCodeAt(w)]<<2|r[g.charCodeAt(w+1)]>>4,x[L++]=m&255),S===1&&(m=r[g.charCodeAt(w)]<<10|r[g.charCodeAt(w+1)]<<4|r[g.charCodeAt(w+2)]>>2,x[L++]=m>>8&255,x[L++]=m&255),x}function h(g){return n[g>>18&63]+n[g>>12&63]+n[g>>6&63]+n[g&63]}function p(g,m,v){for(var T,S=[],x=m;x<v;x+=3)T=(g[x]<<16&16711680)+(g[x+1]<<8&65280)+(g[x+2]&255),S.push(h(T));return S.join("")}function b(g){for(var m,v=g.length,T=v%3,S=[],x=16383,L=0,O=v-T;L<O;L+=x)S.push(p(g,L,L+x>O?O:L+x));return T===1?(m=g[v-1],S.push(n[m>>2]+n[m<<4&63]+"==")):T===2&&(m=(g[v-2]<<8)+g[v-1],S.push(n[m>>10]+n[m>>4&63]+n[m<<2&63]+"=")),S.join("")}var _={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(g,m,v,T,S){var x,L,O=S*8-T-1,w=(1<<O)-1,A=w>>1,E=-7,R=v?S-1:0,V=v?-1:1,$=g[m+R];for(R+=V,x=$&(1<<-E)-1,$>>=-E,E+=O;E>0;x=x*256+g[m+R],R+=V,E-=8);for(L=x&(1<<-E)-1,x>>=-E,E+=T;E>0;L=L*256+g[m+R],R+=V,E-=8);if(x===0)x=1-A;else{if(x===w)return L?NaN:($?-1:1)*(1/0);L=L+Math.pow(2,T),x=x-A}return($?-1:1)*L*Math.pow(2,x-T)},_.write=function(g,m,v,T,S,x){var L,O,w,A=x*8-S-1,E=(1<<A)-1,R=E>>1,V=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=T?0:x-1,Q=T?1:-1,ne=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(O=isNaN(m)?1:0,L=E):(L=Math.floor(Math.log(m)/Math.LN2),m*(w=Math.pow(2,-L))<1&&(L--,w*=2),L+R>=1?m+=V/w:m+=V*Math.pow(2,1-R),m*w>=2&&(L++,w/=2),L+R>=E?(O=0,L=E):L+R>=1?(O=(m*w-1)*Math.pow(2,S),L=L+R):(O=m*Math.pow(2,R-1)*Math.pow(2,S),L=0));S>=8;g[v+$]=O&255,$+=Q,O/=256,S-=8);for(L=L<<S|O,A+=S;A>0;g[v+$]=L&255,$+=Q,L/=256,A-=8);g[v+$-Q]|=ne*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(g){const m=u,v=_,T=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=E,g.SlowBuffer=ve,g.INSPECT_MAX_BYTES=50;const S=2147483647;g.kMaxLength=S;const{Uint8Array:x,ArrayBuffer:L,SharedArrayBuffer:O}=globalThis;E.TYPED_ARRAY_SUPPORT=w(),!E.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{const M=new x(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,x.prototype),Object.setPrototypeOf(M,P),M.foo()===42}catch{return!1}}Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}});function A(M){if(M>S)throw new RangeError('The value "'+M+'" is invalid for option "size"');const P=new x(M);return Object.setPrototypeOf(P,E.prototype),P}function E(M,P,C){if(typeof M=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Q(M)}return R(M,P,C)}E.poolSize=8192;function R(M,P,C){if(typeof M=="string")return ne(M,P);if(L.isView(M))return fe(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(tt(M,L)||M&&tt(M.buffer,L)||typeof O<"u"&&(tt(M,O)||M&&tt(M.buffer,O)))return J(M,P,C);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=M.valueOf&&M.valueOf();if(W!=null&&W!==M)return E.from(W,P,C);const me=_e(M);if(me)return me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return E.from(M[Symbol.toPrimitive]("string"),P,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}E.from=function(M,P,C){return R(M,P,C)},Object.setPrototypeOf(E.prototype,x.prototype),Object.setPrototypeOf(E,x);function V(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function $(M,P,C){return V(M),M<=0?A(M):P!==void 0?typeof C=="string"?A(M).fill(P,C):A(M).fill(P):A(M)}E.alloc=function(M,P,C){return $(M,P,C)};function Q(M){return V(M),A(M<0?0:Fe(M)|0)}E.allocUnsafe=function(M){return Q(M)},E.allocUnsafeSlow=function(M){return Q(M)};function ne(M,P){if((typeof P!="string"||P==="")&&(P="utf8"),!E.isEncoding(P))throw new TypeError("Unknown encoding: "+P);const C=te(M,P)|0;let W=A(C);const me=W.write(M,P);return me!==C&&(W=W.slice(0,me)),W}function ie(M){const P=M.length<0?0:Fe(M.length)|0,C=A(P);for(let W=0;W<P;W+=1)C[W]=M[W]&255;return C}function fe(M){if(tt(M,x)){const P=new x(M);return J(P.buffer,P.byteOffset,P.byteLength)}return ie(M)}function J(M,P,C){if(P<0||M.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<P+(C||0))throw new RangeError('"length" is outside of buffer bounds');let W;return P===void 0&&C===void 0?W=new x(M):C===void 0?W=new x(M,P):W=new x(M,P,C),Object.setPrototypeOf(W,E.prototype),W}function _e(M){if(E.isBuffer(M)){const P=Fe(M.length)|0,C=A(P);return C.length===0||M.copy(C,0,0,P),C}if(M.length!==void 0)return typeof M.length!="number"||ut(M.length)?A(0):ie(M);if(M.type==="Buffer"&&Array.isArray(M.data))return ie(M.data)}function Fe(M){if(M>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return M|0}function ve(M){return+M!=M&&(M=0),E.alloc(+M)}E.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==E.prototype},E.compare=function(P,C){if(tt(P,x)&&(P=E.from(P,P.offset,P.byteLength)),tt(C,x)&&(C=E.from(C,C.offset,C.byteLength)),!E.isBuffer(P)||!E.isBuffer(C))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===C)return 0;let W=P.length,me=C.length;for(let pe=0,Pe=Math.min(W,me);pe<Pe;++pe)if(P[pe]!==C[pe]){W=P[pe],me=C[pe];break}return W<me?-1:me<W?1:0},E.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(P,C){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return E.alloc(0);let W;if(C===void 0)for(C=0,W=0;W<P.length;++W)C+=P[W].length;const me=E.allocUnsafe(C);let pe=0;for(W=0;W<P.length;++W){let Pe=P[W];if(tt(Pe,x))pe+Pe.length>me.length?(E.isBuffer(Pe)||(Pe=E.from(Pe)),Pe.copy(me,pe)):x.prototype.set.call(me,Pe,pe);else if(E.isBuffer(Pe))Pe.copy(me,pe);else throw new TypeError('"list" argument must be an Array of Buffers');pe+=Pe.length}return me};function te(M,P){if(E.isBuffer(M))return M.length;if(L.isView(M)||tt(M,L))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const C=M.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&C===0)return 0;let me=!1;for(;;)switch(P){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return Y(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C*2;case"hex":return C>>>1;case"base64":return qe(M).length;default:if(me)return W?-1:Y(M).length;P=(""+P).toLowerCase(),me=!0}}E.byteLength=te;function Le(M,P,C){let W=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((C===void 0||C>this.length)&&(C=this.length),C<=0)||(C>>>=0,P>>>=0,C<=P))return"";for(M||(M="utf8");;)switch(M){case"hex":return Z(this,P,C);case"utf8":case"utf-8":return B(this,P,C);case"ascii":return K(this,P,C);case"latin1":case"binary":return z(this,P,C);case"base64":return N(this,P,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,P,C);default:if(W)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),W=!0}}E.prototype._isBuffer=!0;function Ce(M,P,C){const W=M[P];M[P]=M[C],M[C]=W}E.prototype.swap16=function(){const P=this.length;if(P%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let C=0;C<P;C+=2)Ce(this,C,C+1);return this},E.prototype.swap32=function(){const P=this.length;if(P%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let C=0;C<P;C+=4)Ce(this,C,C+3),Ce(this,C+1,C+2);return this},E.prototype.swap64=function(){const P=this.length;if(P%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let C=0;C<P;C+=8)Ce(this,C,C+7),Ce(this,C+1,C+6),Ce(this,C+2,C+5),Ce(this,C+3,C+4);return this},E.prototype.toString=function(){const P=this.length;return P===0?"":arguments.length===0?B(this,0,P):Le.apply(this,arguments)},E.prototype.toLocaleString=E.prototype.toString,E.prototype.equals=function(P){if(!E.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P?!0:E.compare(this,P)===0},E.prototype.inspect=function(){let P="";const C=g.INSPECT_MAX_BYTES;return P=this.toString("hex",0,C).replace(/(.{2})/g,"$1 ").trim(),this.length>C&&(P+=" ... "),"<Buffer "+P+">"},T&&(E.prototype[T]=E.prototype.inspect),E.prototype.compare=function(P,C,W,me,pe){if(tt(P,x)&&(P=E.from(P,P.offset,P.byteLength)),!E.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(C===void 0&&(C=0),W===void 0&&(W=P?P.length:0),me===void 0&&(me=0),pe===void 0&&(pe=this.length),C<0||W>P.length||me<0||pe>this.length)throw new RangeError("out of range index");if(me>=pe&&C>=W)return 0;if(me>=pe)return-1;if(C>=W)return 1;if(C>>>=0,W>>>=0,me>>>=0,pe>>>=0,this===P)return 0;let Pe=pe-me,Be=W-C;const ke=Math.min(Pe,Be),Je=this.slice(me,pe),ct=P.slice(C,W);for(let Ze=0;Ze<ke;++Ze)if(Je[Ze]!==ct[Ze]){Pe=Je[Ze],Be=ct[Ze];break}return Pe<Be?-1:Be<Pe?1:0};function Ve(M,P,C,W,me){if(M.length===0)return-1;if(typeof C=="string"?(W=C,C=0):C>2147483647?C=2147483647:C<-2147483648&&(C=-2147483648),C=+C,ut(C)&&(C=me?0:M.length-1),C<0&&(C=M.length+C),C>=M.length){if(me)return-1;C=M.length-1}else if(C<0)if(me)C=0;else return-1;if(typeof P=="string"&&(P=E.from(P,W)),E.isBuffer(P))return P.length===0?-1:ge(M,P,C,W,me);if(typeof P=="number")return P=P&255,typeof x.prototype.indexOf=="function"?me?x.prototype.indexOf.call(M,P,C):x.prototype.lastIndexOf.call(M,P,C):ge(M,[P],C,W,me);throw new TypeError("val must be string, number or Buffer")}function ge(M,P,C,W,me){let pe=1,Pe=M.length,Be=P.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(M.length<2||P.length<2)return-1;pe=2,Pe/=2,Be/=2,C/=2}function ke(ct,Ze){return pe===1?ct[Ze]:ct.readUInt16BE(Ze*pe)}let Je;if(me){let ct=-1;for(Je=C;Je<Pe;Je++)if(ke(M,Je)===ke(P,ct===-1?0:Je-ct)){if(ct===-1&&(ct=Je),Je-ct+1===Be)return ct*pe}else ct!==-1&&(Je-=Je-ct),ct=-1}else for(C+Be>Pe&&(C=Pe-Be),Je=C;Je>=0;Je--){let ct=!0;for(let Ze=0;Ze<Be;Ze++)if(ke(M,Je+Ze)!==ke(P,Ze)){ct=!1;break}if(ct)return Je}return-1}E.prototype.includes=function(P,C,W){return this.indexOf(P,C,W)!==-1},E.prototype.indexOf=function(P,C,W){return Ve(this,P,C,W,!0)},E.prototype.lastIndexOf=function(P,C,W){return Ve(this,P,C,W,!1)};function we(M,P,C,W){C=Number(C)||0;const me=M.length-C;W?(W=Number(W),W>me&&(W=me)):W=me;const pe=P.length;W>pe/2&&(W=pe/2);let Pe;for(Pe=0;Pe<W;++Pe){const Be=parseInt(P.substr(Pe*2,2),16);if(ut(Be))return Pe;M[C+Pe]=Be}return Pe}function G(M,P,C,W){return Ue(Y(P,M.length-C),M,C,W)}function D(M,P,C,W){return Ue(Ee(P),M,C,W)}function j(M,P,C,W){return Ue(qe(P),M,C,W)}function I(M,P,C,W){return Ue(Re(P,M.length-C),M,C,W)}E.prototype.write=function(P,C,W,me){if(C===void 0)me="utf8",W=this.length,C=0;else if(W===void 0&&typeof C=="string")me=C,W=this.length,C=0;else if(isFinite(C))C=C>>>0,isFinite(W)?(W=W>>>0,me===void 0&&(me="utf8")):(me=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const pe=this.length-C;if((W===void 0||W>pe)&&(W=pe),P.length>0&&(W<0||C<0)||C>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");let Pe=!1;for(;;)switch(me){case"hex":return we(this,P,C,W);case"utf8":case"utf-8":return G(this,P,C,W);case"ascii":case"latin1":case"binary":return D(this,P,C,W);case"base64":return j(this,P,C,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,P,C,W);default:if(Pe)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),Pe=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(M,P,C){return P===0&&C===M.length?m.fromByteArray(M):m.fromByteArray(M.slice(P,C))}function B(M,P,C){C=Math.min(M.length,C);const W=[];let me=P;for(;me<C;){const pe=M[me];let Pe=null,Be=pe>239?4:pe>223?3:pe>191?2:1;if(me+Be<=C){let ke,Je,ct,Ze;switch(Be){case 1:pe<128&&(Pe=pe);break;case 2:ke=M[me+1],(ke&192)===128&&(Ze=(pe&31)<<6|ke&63,Ze>127&&(Pe=Ze));break;case 3:ke=M[me+1],Je=M[me+2],(ke&192)===128&&(Je&192)===128&&(Ze=(pe&15)<<12|(ke&63)<<6|Je&63,Ze>2047&&(Ze<55296||Ze>57343)&&(Pe=Ze));break;case 4:ke=M[me+1],Je=M[me+2],ct=M[me+3],(ke&192)===128&&(Je&192)===128&&(ct&192)===128&&(Ze=(pe&15)<<18|(ke&63)<<12|(Je&63)<<6|ct&63,Ze>65535&&Ze<1114112&&(Pe=Ze))}}Pe===null?(Pe=65533,Be=1):Pe>65535&&(Pe-=65536,W.push(Pe>>>10&1023|55296),Pe=56320|Pe&1023),W.push(Pe),me+=Be}return H(W)}const X=4096;function H(M){const P=M.length;if(P<=X)return String.fromCharCode.apply(String,M);let C="",W=0;for(;W<P;)C+=String.fromCharCode.apply(String,M.slice(W,W+=X));return C}function K(M,P,C){let W="";C=Math.min(M.length,C);for(let me=P;me<C;++me)W+=String.fromCharCode(M[me]&127);return W}function z(M,P,C){let W="";C=Math.min(M.length,C);for(let me=P;me<C;++me)W+=String.fromCharCode(M[me]);return W}function Z(M,P,C){const W=M.length;(!P||P<0)&&(P=0),(!C||C<0||C>W)&&(C=W);let me="";for(let pe=P;pe<C;++pe)me+=rt[M[pe]];return me}function de(M,P,C){const W=M.slice(P,C);let me="";for(let pe=0;pe<W.length-1;pe+=2)me+=String.fromCharCode(W[pe]+W[pe+1]*256);return me}E.prototype.slice=function(P,C){const W=this.length;P=~~P,C=C===void 0?W:~~C,P<0?(P+=W,P<0&&(P=0)):P>W&&(P=W),C<0?(C+=W,C<0&&(C=0)):C>W&&(C=W),C<P&&(C=P);const me=this.subarray(P,C);return Object.setPrototypeOf(me,E.prototype),me};function le(M,P,C){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+P>C)throw new RangeError("Trying to access beyond buffer length")}E.prototype.readUintLE=E.prototype.readUIntLE=function(P,C,W){P=P>>>0,C=C>>>0,W||le(P,C,this.length);let me=this[P],pe=1,Pe=0;for(;++Pe<C&&(pe*=256);)me+=this[P+Pe]*pe;return me},E.prototype.readUintBE=E.prototype.readUIntBE=function(P,C,W){P=P>>>0,C=C>>>0,W||le(P,C,this.length);let me=this[P+--C],pe=1;for(;C>0&&(pe*=256);)me+=this[P+--C]*pe;return me},E.prototype.readUint8=E.prototype.readUInt8=function(P,C){return P=P>>>0,C||le(P,1,this.length),this[P]},E.prototype.readUint16LE=E.prototype.readUInt16LE=function(P,C){return P=P>>>0,C||le(P,2,this.length),this[P]|this[P+1]<<8},E.prototype.readUint16BE=E.prototype.readUInt16BE=function(P,C){return P=P>>>0,C||le(P,2,this.length),this[P]<<8|this[P+1]},E.prototype.readUint32LE=E.prototype.readUInt32LE=function(P,C){return P=P>>>0,C||le(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+this[P+3]*16777216},E.prototype.readUint32BE=E.prototype.readUInt32BE=function(P,C){return P=P>>>0,C||le(P,4,this.length),this[P]*16777216+(this[P+1]<<16|this[P+2]<<8|this[P+3])},E.prototype.readBigUInt64LE=lt(function(P){P=P>>>0,ce(P,"offset");const C=this[P],W=this[P+7];(C===void 0||W===void 0)&&be(P,this.length-8);const me=C+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24,pe=this[++P]+this[++P]*2**8+this[++P]*2**16+W*2**24;return BigInt(me)+(BigInt(pe)<<BigInt(32))}),E.prototype.readBigUInt64BE=lt(function(P){P=P>>>0,ce(P,"offset");const C=this[P],W=this[P+7];(C===void 0||W===void 0)&&be(P,this.length-8);const me=C*2**24+this[++P]*2**16+this[++P]*2**8+this[++P],pe=this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+W;return(BigInt(me)<<BigInt(32))+BigInt(pe)}),E.prototype.readIntLE=function(P,C,W){P=P>>>0,C=C>>>0,W||le(P,C,this.length);let me=this[P],pe=1,Pe=0;for(;++Pe<C&&(pe*=256);)me+=this[P+Pe]*pe;return pe*=128,me>=pe&&(me-=Math.pow(2,8*C)),me},E.prototype.readIntBE=function(P,C,W){P=P>>>0,C=C>>>0,W||le(P,C,this.length);let me=C,pe=1,Pe=this[P+--me];for(;me>0&&(pe*=256);)Pe+=this[P+--me]*pe;return pe*=128,Pe>=pe&&(Pe-=Math.pow(2,8*C)),Pe},E.prototype.readInt8=function(P,C){return P=P>>>0,C||le(P,1,this.length),this[P]&128?(255-this[P]+1)*-1:this[P]},E.prototype.readInt16LE=function(P,C){P=P>>>0,C||le(P,2,this.length);const W=this[P]|this[P+1]<<8;return W&32768?W|4294901760:W},E.prototype.readInt16BE=function(P,C){P=P>>>0,C||le(P,2,this.length);const W=this[P+1]|this[P]<<8;return W&32768?W|4294901760:W},E.prototype.readInt32LE=function(P,C){return P=P>>>0,C||le(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},E.prototype.readInt32BE=function(P,C){return P=P>>>0,C||le(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},E.prototype.readBigInt64LE=lt(function(P){P=P>>>0,ce(P,"offset");const C=this[P],W=this[P+7];(C===void 0||W===void 0)&&be(P,this.length-8);const me=this[P+4]+this[P+5]*2**8+this[P+6]*2**16+(W<<24);return(BigInt(me)<<BigInt(32))+BigInt(C+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24)}),E.prototype.readBigInt64BE=lt(function(P){P=P>>>0,ce(P,"offset");const C=this[P],W=this[P+7];(C===void 0||W===void 0)&&be(P,this.length-8);const me=(C<<24)+this[++P]*2**16+this[++P]*2**8+this[++P];return(BigInt(me)<<BigInt(32))+BigInt(this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+W)}),E.prototype.readFloatLE=function(P,C){return P=P>>>0,C||le(P,4,this.length),v.read(this,P,!0,23,4)},E.prototype.readFloatBE=function(P,C){return P=P>>>0,C||le(P,4,this.length),v.read(this,P,!1,23,4)},E.prototype.readDoubleLE=function(P,C){return P=P>>>0,C||le(P,8,this.length),v.read(this,P,!0,52,8)},E.prototype.readDoubleBE=function(P,C){return P=P>>>0,C||le(P,8,this.length),v.read(this,P,!1,52,8)};function De(M,P,C,W,me,pe){if(!E.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>me||P<pe)throw new RangeError('"value" argument is out of bounds');if(C+W>M.length)throw new RangeError("Index out of range")}E.prototype.writeUintLE=E.prototype.writeUIntLE=function(P,C,W,me){if(P=+P,C=C>>>0,W=W>>>0,!me){const Be=Math.pow(2,8*W)-1;De(this,P,C,W,Be,0)}let pe=1,Pe=0;for(this[C]=P&255;++Pe<W&&(pe*=256);)this[C+Pe]=P/pe&255;return C+W},E.prototype.writeUintBE=E.prototype.writeUIntBE=function(P,C,W,me){if(P=+P,C=C>>>0,W=W>>>0,!me){const Be=Math.pow(2,8*W)-1;De(this,P,C,W,Be,0)}let pe=W-1,Pe=1;for(this[C+pe]=P&255;--pe>=0&&(Pe*=256);)this[C+pe]=P/Pe&255;return C+W},E.prototype.writeUint8=E.prototype.writeUInt8=function(P,C,W){return P=+P,C=C>>>0,W||De(this,P,C,1,255,0),this[C]=P&255,C+1},E.prototype.writeUint16LE=E.prototype.writeUInt16LE=function(P,C,W){return P=+P,C=C>>>0,W||De(this,P,C,2,65535,0),this[C]=P&255,this[C+1]=P>>>8,C+2},E.prototype.writeUint16BE=E.prototype.writeUInt16BE=function(P,C,W){return P=+P,C=C>>>0,W||De(this,P,C,2,65535,0),this[C]=P>>>8,this[C+1]=P&255,C+2},E.prototype.writeUint32LE=E.prototype.writeUInt32LE=function(P,C,W){return P=+P,C=C>>>0,W||De(this,P,C,4,4294967295,0),this[C+3]=P>>>24,this[C+2]=P>>>16,this[C+1]=P>>>8,this[C]=P&255,C+4},E.prototype.writeUint32BE=E.prototype.writeUInt32BE=function(P,C,W){return P=+P,C=C>>>0,W||De(this,P,C,4,4294967295,0),this[C]=P>>>24,this[C+1]=P>>>16,this[C+2]=P>>>8,this[C+3]=P&255,C+4};function Qe(M,P,C,W,me){k(P,W,me,M,C,7);let pe=Number(P&BigInt(4294967295));M[C++]=pe,pe=pe>>8,M[C++]=pe,pe=pe>>8,M[C++]=pe,pe=pe>>8,M[C++]=pe;let Pe=Number(P>>BigInt(32)&BigInt(4294967295));return M[C++]=Pe,Pe=Pe>>8,M[C++]=Pe,Pe=Pe>>8,M[C++]=Pe,Pe=Pe>>8,M[C++]=Pe,C}function je(M,P,C,W,me){k(P,W,me,M,C,7);let pe=Number(P&BigInt(4294967295));M[C+7]=pe,pe=pe>>8,M[C+6]=pe,pe=pe>>8,M[C+5]=pe,pe=pe>>8,M[C+4]=pe;let Pe=Number(P>>BigInt(32)&BigInt(4294967295));return M[C+3]=Pe,Pe=Pe>>8,M[C+2]=Pe,Pe=Pe>>8,M[C+1]=Pe,Pe=Pe>>8,M[C]=Pe,C+8}E.prototype.writeBigUInt64LE=lt(function(P,C=0){return Qe(this,P,C,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeBigUInt64BE=lt(function(P,C=0){return je(this,P,C,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeIntLE=function(P,C,W,me){if(P=+P,C=C>>>0,!me){const ke=Math.pow(2,8*W-1);De(this,P,C,W,ke-1,-ke)}let pe=0,Pe=1,Be=0;for(this[C]=P&255;++pe<W&&(Pe*=256);)P<0&&Be===0&&this[C+pe-1]!==0&&(Be=1),this[C+pe]=(P/Pe>>0)-Be&255;return C+W},E.prototype.writeIntBE=function(P,C,W,me){if(P=+P,C=C>>>0,!me){const ke=Math.pow(2,8*W-1);De(this,P,C,W,ke-1,-ke)}let pe=W-1,Pe=1,Be=0;for(this[C+pe]=P&255;--pe>=0&&(Pe*=256);)P<0&&Be===0&&this[C+pe+1]!==0&&(Be=1),this[C+pe]=(P/Pe>>0)-Be&255;return C+W},E.prototype.writeInt8=function(P,C,W){return P=+P,C=C>>>0,W||De(this,P,C,1,127,-128),P<0&&(P=255+P+1),this[C]=P&255,C+1},E.prototype.writeInt16LE=function(P,C,W){return P=+P,C=C>>>0,W||De(this,P,C,2,32767,-32768),this[C]=P&255,this[C+1]=P>>>8,C+2},E.prototype.writeInt16BE=function(P,C,W){return P=+P,C=C>>>0,W||De(this,P,C,2,32767,-32768),this[C]=P>>>8,this[C+1]=P&255,C+2},E.prototype.writeInt32LE=function(P,C,W){return P=+P,C=C>>>0,W||De(this,P,C,4,2147483647,-2147483648),this[C]=P&255,this[C+1]=P>>>8,this[C+2]=P>>>16,this[C+3]=P>>>24,C+4},E.prototype.writeInt32BE=function(P,C,W){return P=+P,C=C>>>0,W||De(this,P,C,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[C]=P>>>24,this[C+1]=P>>>16,this[C+2]=P>>>8,this[C+3]=P&255,C+4},E.prototype.writeBigInt64LE=lt(function(P,C=0){return Qe(this,P,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeBigInt64BE=lt(function(P,C=0){return je(this,P,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function oe(M,P,C,W,me,pe){if(C+W>M.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("Index out of range")}function se(M,P,C,W,me){return P=+P,C=C>>>0,me||oe(M,P,C,4),v.write(M,P,C,W,23,4),C+4}E.prototype.writeFloatLE=function(P,C,W){return se(this,P,C,!0,W)},E.prototype.writeFloatBE=function(P,C,W){return se(this,P,C,!1,W)};function ye(M,P,C,W,me){return P=+P,C=C>>>0,me||oe(M,P,C,8),v.write(M,P,C,W,52,8),C+8}E.prototype.writeDoubleLE=function(P,C,W){return ye(this,P,C,!0,W)},E.prototype.writeDoubleBE=function(P,C,W){return ye(this,P,C,!1,W)},E.prototype.copy=function(P,C,W,me){if(!E.isBuffer(P))throw new TypeError("argument should be a Buffer");if(W||(W=0),!me&&me!==0&&(me=this.length),C>=P.length&&(C=P.length),C||(C=0),me>0&&me<W&&(me=W),me===W||P.length===0||this.length===0)return 0;if(C<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),P.length-C<me-W&&(me=P.length-C+W);const pe=me-W;return this===P&&typeof x.prototype.copyWithin=="function"?this.copyWithin(C,W,me):x.prototype.set.call(P,this.subarray(W,me),C),pe},E.prototype.fill=function(P,C,W,me){if(typeof P=="string"){if(typeof C=="string"?(me=C,C=0,W=this.length):typeof W=="string"&&(me=W,W=this.length),me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!E.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(P.length===1){const Pe=P.charCodeAt(0);(me==="utf8"&&Pe<128||me==="latin1")&&(P=Pe)}}else typeof P=="number"?P=P&255:typeof P=="boolean"&&(P=Number(P));if(C<0||this.length<C||this.length<W)throw new RangeError("Out of range index");if(W<=C)return this;C=C>>>0,W=W===void 0?this.length:W>>>0,P||(P=0);let pe;if(typeof P=="number")for(pe=C;pe<W;++pe)this[pe]=P;else{const Pe=E.isBuffer(P)?P:E.from(P,me),Be=Pe.length;if(Be===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(pe=0;pe<W-C;++pe)this[pe+C]=Pe[pe%Be]}return this};const Ie={};function U(M,P,C){Ie[M]=class extends C{constructor(){super(),Object.defineProperty(this,"message",{value:P.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code(me){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:me,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}U("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(M,P){return`The "${M}" argument must be of type number. Received type ${typeof P}`},TypeError),U("ERR_OUT_OF_RANGE",function(M,P,C){let W=`The value of "${M}" is out of range.`,me=C;return Number.isInteger(C)&&Math.abs(C)>2**32?me=F(String(C)):typeof C=="bigint"&&(me=String(C),(C>BigInt(2)**BigInt(32)||C<-(BigInt(2)**BigInt(32)))&&(me=F(me)),me+="n"),W+=` It must be ${P}. Received ${me}`,W},RangeError);function F(M){let P="",C=M.length;const W=M[0]==="-"?1:0;for(;C>=W+4;C-=3)P=`_${M.slice(C-3,C)}${P}`;return`${M.slice(0,C)}${P}`}function q(M,P,C){ce(P,"offset"),(M[P]===void 0||M[P+C]===void 0)&&be(P,M.length-(C+1))}function k(M,P,C,W,me,pe){if(M>C||M<P){const Pe=typeof P=="bigint"?"n":"";let Be;throw P===0||P===BigInt(0)?Be=`>= 0${Pe} and < 2${Pe} ** ${(pe+1)*8}${Pe}`:Be=`>= -(2${Pe} ** ${(pe+1)*8-1}${Pe}) and < 2 ** ${(pe+1)*8-1}${Pe}`,new Ie.ERR_OUT_OF_RANGE("value",Be,M)}q(W,me,pe)}function ce(M,P){if(typeof M!="number")throw new Ie.ERR_INVALID_ARG_TYPE(P,"number",M)}function be(M,P,C){throw Math.floor(M)!==M?(ce(M,C),new Ie.ERR_OUT_OF_RANGE("offset","an integer",M)):P<0?new Ie.ERR_BUFFER_OUT_OF_BOUNDS:new Ie.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${P}`,M)}const Se=/[^+/0-9A-Za-z-_]/g;function Ke(M){if(M=M.split("=")[0],M=M.trim().replace(Se,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function Y(M,P){P=P||1/0;let C;const W=M.length;let me=null;const pe=[];for(let Pe=0;Pe<W;++Pe){if(C=M.charCodeAt(Pe),C>55295&&C<57344){if(!me){if(C>56319){(P-=3)>-1&&pe.push(239,191,189);continue}else if(Pe+1===W){(P-=3)>-1&&pe.push(239,191,189);continue}me=C;continue}if(C<56320){(P-=3)>-1&&pe.push(239,191,189),me=C;continue}C=(me-55296<<10|C-56320)+65536}else me&&(P-=3)>-1&&pe.push(239,191,189);if(me=null,C<128){if((P-=1)<0)break;pe.push(C)}else if(C<2048){if((P-=2)<0)break;pe.push(C>>6|192,C&63|128)}else if(C<65536){if((P-=3)<0)break;pe.push(C>>12|224,C>>6&63|128,C&63|128)}else if(C<1114112){if((P-=4)<0)break;pe.push(C>>18|240,C>>12&63|128,C>>6&63|128,C&63|128)}else throw new Error("Invalid code point")}return pe}function Ee(M){const P=[];for(let C=0;C<M.length;++C)P.push(M.charCodeAt(C)&255);return P}function Re(M,P){let C,W,me;const pe=[];for(let Pe=0;Pe<M.length&&!((P-=2)<0);++Pe)C=M.charCodeAt(Pe),W=C>>8,me=C%256,pe.push(me),pe.push(W);return pe}function qe(M){return m.toByteArray(Ke(M))}function Ue(M,P,C,W){let me;for(me=0;me<W&&!(me+C>=P.length||me>=M.length);++me)P[me+C]=M[me];return me}function tt(M,P){return M instanceof P||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===P.name}function ut(M){return M!==M}const rt=function(){const M="0123456789abcdef",P=new Array(256);for(let C=0;C<16;++C){const W=C*16;for(let me=0;me<16;++me)P[W+me]=M[C]+M[me]}return P}();function lt(M){return typeof BigInt>"u"?ae:M}function ae(){throw new Error("BigInt not supported")}})(t);const y=t.Buffer;a.Blob=t.Blob,a.BlobOptions=t.BlobOptions,a.Buffer=t.Buffer,a.File=t.File,a.FileOptions=t.FileOptions,a.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,a.SlowBuffer=t.SlowBuffer,a.TranscodeEncoding=t.TranscodeEncoding,a.atob=t.atob,a.btoa=t.btoa,a.constants=t.constants,a.default=y,a.isAscii=t.isAscii,a.isUtf8=t.isUtf8,a.kMaxLength=t.kMaxLength,a.kStringMaxLength=t.kStringMaxLength,a.resolveObjectURL=t.resolveObjectURL,a.transcode=t.transcode}(nN)),nN}var iN,l9;function or(){if(l9)return iN;l9=1;class a extends Error{constructor(u){if(!Array.isArray(u))throw new TypeError(`Expected input to be an Array, got ${typeof u}`);let n="";for(let r=0;r<u.length;r++)n+=`    ${u[r].stack}
`;super(n),this.name="AggregateError",this.errors=u}}return iN={AggregateError:a,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,u){return t.includes(u)},ArrayPrototypeIndexOf(t,u){return t.indexOf(u)},ArrayPrototypeJoin(t,u){return t.join(u)},ArrayPrototypeMap(t,u){return t.map(u)},ArrayPrototypePop(t,u){return t.pop(u)},ArrayPrototypePush(t,u){return t.push(u)},ArrayPrototypeSlice(t,u,n){return t.slice(u,n)},Error,FunctionPrototypeCall(t,u,...n){return t.call(u,...n)},FunctionPrototypeSymbolHasInstance(t,u){return Function.prototype[Symbol.hasInstance].call(t,u)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,u){return Object.defineProperties(t,u)},ObjectDefineProperty(t,u,n){return Object.defineProperty(t,u,n)},ObjectGetOwnPropertyDescriptor(t,u){return Object.getOwnPropertyDescriptor(t,u)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,u){return Object.setPrototypeOf(t,u)},Promise,PromisePrototypeCatch(t,u){return t.catch(u)},PromisePrototypeThen(t,u,n){return t.then(u,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,u){return t.test(u)},SafeSet:Set,String,StringPrototypeSlice(t,u,n){return t.slice(u,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,u,n){return t.set(u,n)},Boolean,Uint8Array},iN}var aN={exports:{}},uN,d9;function f9(){return d9||(d9=1,uN={format(a,...t){return a.replace(/%([sdifj])/g,function(...[u,n]){const r=t.shift();return n==="f"?r.toFixed(6):n==="j"?JSON.stringify(r):n==="s"&&typeof r=="object"?`${r.constructor!==Object?r.constructor.name:""} {}`.trim():r.toString()})},inspect(a){switch(typeof a){case"string":if(a.includes("'"))if(a.includes('"')){if(!a.includes("`")&&!a.includes("${"))return`\`${a}\``}else return`"${a}"`;return`'${a}'`;case"number":return isNaN(a)?"NaN":Object.is(a,-0)?String(a):a;case"bigint":return`${String(a)}n`;case"boolean":case"undefined":return String(a);case"object":return"{}"}}}),uN}var oN,h9;function tn(){if(h9)return oN;h9=1;const{format:a,inspect:t}=f9(),{AggregateError:u}=or(),n=globalThis.AggregateError||u,r=Symbol("kIsNodeError"),e=["string","function","number","object","Function","Object","boolean","bigint","symbol"],i=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",c={};function s(_,y){if(!_)throw new c.ERR_INTERNAL_ASSERTION(y)}function l(_){let y="",g=_.length;const m=_[0]==="-"?1:0;for(;g>=m+4;g-=3)y=`_${_.slice(g-3,g)}${y}`;return`${_.slice(0,g)}${y}`}function d(_,y,g){if(typeof y=="function")return s(y.length<=g.length,`Code: ${_}; The provided arguments length (${g.length}) does not match the required ones (${y.length}).`),y(...g);const m=(y.match(/%[dfijoOs]/g)||[]).length;return s(m===g.length,`Code: ${_}; The provided arguments length (${g.length}) does not match the required ones (${m}).`),g.length===0?y:a(y,...g)}function f(_,y,g){g||(g=Error);class m extends g{constructor(...T){super(d(_,y,T))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(m.prototype,{name:{value:g.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),m.prototype.code=_,m.prototype[r]=!0,c[_]=m}function h(_){const y=o+_.name;return Object.defineProperty(_,"name",{value:y}),_}function p(_,y){if(_&&y&&_!==y){if(Array.isArray(y.errors))return y.errors.push(_),y;const g=new n([y,_],y.message);return g.code=y.code,g}return _||y}class b extends Error{constructor(y="The operation was aborted",g=void 0){if(g!==void 0&&typeof g!="object")throw new c.ERR_INVALID_ARG_TYPE("options","Object",g);super(y,g),this.code="ABORT_ERR",this.name="AbortError"}}return f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(_,y,g)=>{s(typeof _=="string","'name' must be a string"),Array.isArray(y)||(y=[y]);let m="The ";_.endsWith(" argument")?m+=`${_} `:m+=`"${_}" ${_.includes(".")?"property":"argument"} `,m+="must be ";const v=[],T=[],S=[];for(const L of y)s(typeof L=="string","All expected entries have to be of type string"),e.includes(L)?v.push(L.toLowerCase()):i.test(L)?T.push(L):(s(L!=="object",'The value "object" should be written as "Object"'),S.push(L));if(T.length>0){const L=v.indexOf("object");L!==-1&&(v.splice(v,L,1),T.push("Object"))}if(v.length>0){switch(v.length){case 1:m+=`of type ${v[0]}`;break;case 2:m+=`one of type ${v[0]} or ${v[1]}`;break;default:{const L=v.pop();m+=`one of type ${v.join(", ")}, or ${L}`}}(T.length>0||S.length>0)&&(m+=" or ")}if(T.length>0){switch(T.length){case 1:m+=`an instance of ${T[0]}`;break;case 2:m+=`an instance of ${T[0]} or ${T[1]}`;break;default:{const L=T.pop();m+=`an instance of ${T.join(", ")}, or ${L}`}}S.length>0&&(m+=" or ")}switch(S.length){case 0:break;case 1:S[0].toLowerCase()!==S[0]&&(m+="an "),m+=`${S[0]}`;break;case 2:m+=`one of ${S[0]} or ${S[1]}`;break;default:{const L=S.pop();m+=`one of ${S.join(", ")}, or ${L}`}}if(g==null)m+=`. Received ${g}`;else if(typeof g=="function"&&g.name)m+=`. Received function ${g.name}`;else if(typeof g=="object"){var x;if((x=g.constructor)!==null&&x!==void 0&&x.name)m+=`. Received an instance of ${g.constructor.name}`;else{const L=t(g,{depth:-1});m+=`. Received ${L}`}}else{let L=t(g,{colors:!1});L.length>25&&(L=`${L.slice(0,25)}...`),m+=`. Received type ${typeof g} (${L})`}return m},TypeError),f("ERR_INVALID_ARG_VALUE",(_,y,g="is invalid")=>{let m=t(y);return m.length>128&&(m=m.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${g}. Received ${m}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(_,y,g)=>{var m;const v=g!=null&&(m=g.constructor)!==null&&m!==void 0&&m.name?`instance of ${g.constructor.name}`:`type ${typeof g}`;return`Expected ${_} to be returned from the "${y}" function but got ${v}.`},TypeError),f("ERR_MISSING_ARGS",(..._)=>{s(_.length>0,"At least one arg needs to be specified");let y;const g=_.length;switch(_=(Array.isArray(_)?_:[_]).map(m=>`"${m}"`).join(" or "),g){case 1:y+=`The ${_[0]} argument`;break;case 2:y+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const m=_.pop();y+=`The ${_.join(", ")}, and ${m} arguments`}break}return`${y} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(_,y,g)=>{s(y,'Missing "range" argument');let m;if(Number.isInteger(g)&&Math.abs(g)>2**32)m=l(String(g));else if(typeof g=="bigint"){m=String(g);const v=BigInt(2)**BigInt(32);(g>v||g<-v)&&(m=l(m)),m+="n"}else m=t(g);return`The value of "${_}" is out of range. It must be ${y}. Received ${m}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),oN={AbortError:b,aggregateTwoErrors:h(p),hideStackFrames:h,codes:c},oN}var M1={exports:{}},p9;function C1(){if(p9)return M1.exports;p9=1;const{AbortController:a,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return M1.exports=a,M1.exports.AbortSignal=t,M1.exports.default=a,M1.exports}var y9;function on(){return y9||(y9=1,function(a){const t=Ci(),{format:u,inspect:n}=f9(),{codes:{ERR_INVALID_ARG_TYPE:r}}=tn(),{kResistStopPropagation:e,AggregateError:i,SymbolDispose:o}=or(),c=globalThis.AbortSignal||C1().AbortSignal,s=globalThis.AbortController||C1().AbortController,l=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||t.Blob,f=typeof d<"u"?function(_){return _ instanceof d}:function(_){return!1},h=(b,_)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new r(_,"AbortSignal",b)},p=(b,_)=>{if(typeof b!="function")throw new r(_,"Function",b)};a.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(b){let _=!1;return function(...y){_||(_=!0,b.apply(this,y))}},createDeferredPromise:function(){let b,_;return{promise:new Promise((g,m)=>{b=g,_=m}),resolve:b,reject:_}},promisify(b){return new Promise((_,y)=>{b((g,...m)=>g?y(g):_(...m))})},debuglog(){return function(){}},format:u,inspect:n,types:{isAsyncFunction(b){return b instanceof l},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:f,deprecate(b,_){return b},addAbortListener:cy().addAbortListener||function(_,y){if(_===void 0)throw new r("signal","AbortSignal",_);h(_,"signal"),p(y,"listener");let g;return _.aborted?queueMicrotask(()=>y()):(_.addEventListener("abort",y,{__proto__:null,once:!0,[e]:!0}),g=()=>{_.removeEventListener("abort",y)}),{__proto__:null,[o](){var m;(m=g)===null||m===void 0||m()}}},AbortSignalAny:c.any||function(_){if(_.length===1)return _[0];const y=new s,g=()=>y.abort();return _.forEach(m=>{h(m,"signals"),m.addEventListener("abort",g,{once:!0})}),y.signal.addEventListener("abort",()=>{_.forEach(m=>m.removeEventListener("abort",g))},{once:!0}),y.signal}},a.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(aN)),aN.exports}var YO={},sN,b9;function q1(){if(b9)return sN;b9=1;const{ArrayIsArray:a,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:u,ArrayPrototypeMap:n,NumberIsInteger:r,NumberIsNaN:e,NumberMAX_SAFE_INTEGER:i,NumberMIN_SAFE_INTEGER:o,NumberParseInt:c,ObjectPrototypeHasOwnProperty:s,RegExpPrototypeExec:l,String:d,StringPrototypeToUpperCase:f,StringPrototypeTrim:h}=or(),{hideStackFrames:p,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:y,ERR_OUT_OF_RANGE:g,ERR_UNKNOWN_SIGNAL:m}}=tn(),{normalizeEncoding:v}=on(),{isAsyncFunction:T,isArrayBufferView:S}=on().types,x={};function L(z){return z===(z|0)}function O(z){return z===z>>>0}const w=/^[0-7]+$/,A="must be a 32-bit unsigned integer or an octal string";function E(z,Z,de){if(typeof z>"u"&&(z=de),typeof z=="string"){if(l(w,z)===null)throw new y(Z,z,A);z=c(z,8)}return $(z,Z),z}const R=p((z,Z,de=o,le=i)=>{if(typeof z!="number")throw new _(Z,"number",z);if(!r(z))throw new g(Z,"an integer",z);if(z<de||z>le)throw new g(Z,`>= ${de} && <= ${le}`,z)}),V=p((z,Z,de=-2147483648,le=2147483647)=>{if(typeof z!="number")throw new _(Z,"number",z);if(!r(z))throw new g(Z,"an integer",z);if(z<de||z>le)throw new g(Z,`>= ${de} && <= ${le}`,z)}),$=p((z,Z,de=!1)=>{if(typeof z!="number")throw new _(Z,"number",z);if(!r(z))throw new g(Z,"an integer",z);const le=de?1:0,De=4294967295;if(z<le||z>De)throw new g(Z,`>= ${le} && <= ${De}`,z)});function Q(z,Z){if(typeof z!="string")throw new _(Z,"string",z)}function ne(z,Z,de=void 0,le){if(typeof z!="number")throw new _(Z,"number",z);if(de!=null&&z<de||le!=null&&z>le||(de!=null||le!=null)&&e(z))throw new g(Z,`${de!=null?`>= ${de}`:""}${de!=null&&le!=null?" && ":""}${le!=null?`<= ${le}`:""}`,z)}const ie=p((z,Z,de)=>{if(!t(de,z)){const De="must be one of: "+u(n(de,Qe=>typeof Qe=="string"?`'${Qe}'`:d(Qe)),", ");throw new y(Z,z,De)}});function fe(z,Z){if(typeof z!="boolean")throw new _(Z,"boolean",z)}function J(z,Z,de){return z==null||!s(z,Z)?de:z[Z]}const _e=p((z,Z,de=null)=>{const le=J(de,"allowArray",!1),De=J(de,"allowFunction",!1);if(!J(de,"nullable",!1)&&z===null||!le&&a(z)||typeof z!="object"&&(!De||typeof z!="function"))throw new _(Z,"Object",z)}),Fe=p((z,Z)=>{if(z!=null&&typeof z!="object"&&typeof z!="function")throw new _(Z,"a dictionary",z)}),ve=p((z,Z,de=0)=>{if(!a(z))throw new _(Z,"Array",z);if(z.length<de){const le=`must be longer than ${de}`;throw new y(Z,z,le)}});function te(z,Z){ve(z,Z);for(let de=0;de<z.length;de++)Q(z[de],`${Z}[${de}]`)}function Le(z,Z){ve(z,Z);for(let de=0;de<z.length;de++)fe(z[de],`${Z}[${de}]`)}function Ce(z,Z){ve(z,Z);for(let de=0;de<z.length;de++){const le=z[de],De=`${Z}[${de}]`;if(le==null)throw new _(De,"AbortSignal",le);D(le,De)}}function Ve(z,Z="signal"){if(Q(z,Z),x[z]===void 0)throw x[f(z)]!==void 0?new m(z+" (signals must use all capital letters)"):new m(z)}const ge=p((z,Z="buffer")=>{if(!S(z))throw new _(Z,["Buffer","TypedArray","DataView"],z)});function we(z,Z){const de=v(Z),le=z.length;if(de==="hex"&&le%2!==0)throw new y("encoding",Z,`is invalid for data of length ${le}`)}function G(z,Z="Port",de=!0){if(typeof z!="number"&&typeof z!="string"||typeof z=="string"&&h(z).length===0||+z!==+z>>>0||z>65535||z===0&&!de)throw new b(Z,z,de);return z|0}const D=p((z,Z)=>{if(z!==void 0&&(z===null||typeof z!="object"||!("aborted"in z)))throw new _(Z,"AbortSignal",z)}),j=p((z,Z)=>{if(typeof z!="function")throw new _(Z,"Function",z)}),I=p((z,Z)=>{if(typeof z!="function"||T(z))throw new _(Z,"Function",z)}),N=p((z,Z)=>{if(z!==void 0)throw new _(Z,"undefined",z)});function B(z,Z,de){if(!t(de,z))throw new _(Z,`('${u(de,"|")}')`,z)}const X=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function H(z,Z){if(typeof z>"u"||!l(X,z))throw new y(Z,z,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function K(z){if(typeof z=="string")return H(z,"hints"),z;if(a(z)){const Z=z.length;let de="";if(Z===0)return de;for(let le=0;le<Z;le++){const De=z[le];H(De,"hints"),de+=De,le!==Z-1&&(de+=", ")}return de}throw new y("hints",z,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return sN={isInt32:L,isUint32:O,parseFileMode:E,validateArray:ve,validateStringArray:te,validateBooleanArray:Le,validateAbortSignalArray:Ce,validateBoolean:fe,validateBuffer:ge,validateDictionary:Fe,validateEncoding:we,validateFunction:j,validateInt32:V,validateInteger:R,validateNumber:ne,validateObject:_e,validateOneOf:ie,validatePlainFunction:I,validatePort:G,validateSignalName:Ve,validateString:Q,validateUint32:$,validateUndefined:N,validateUnion:B,validateAbortSignal:D,validateLinkHeaderValue:K},sN}var ZO={exports:{}},cN,m9;function qi(){if(m9)return cN;m9=1;const{SymbolAsyncIterator:a,SymbolIterator:t,SymbolFor:u}=or(),n=u("nodejs.stream.destroyed"),r=u("nodejs.stream.errored"),e=u("nodejs.stream.readable"),i=u("nodejs.stream.writable"),o=u("nodejs.stream.disturbed"),c=u("nodejs.webstream.isClosedPromise"),s=u("nodejs.webstream.controllerErrorFunction");function l(J,_e=!1){var Fe;return!!(J&&typeof J.pipe=="function"&&typeof J.on=="function"&&(!_e||typeof J.pause=="function"&&typeof J.resume=="function")&&(!J._writableState||((Fe=J._readableState)===null||Fe===void 0?void 0:Fe.readable)!==!1)&&(!J._writableState||J._readableState))}function d(J){var _e;return!!(J&&typeof J.write=="function"&&typeof J.on=="function"&&(!J._readableState||((_e=J._writableState)===null||_e===void 0?void 0:_e.writable)!==!1))}function f(J){return!!(J&&typeof J.pipe=="function"&&J._readableState&&typeof J.on=="function"&&typeof J.write=="function")}function h(J){return J&&(J._readableState||J._writableState||typeof J.write=="function"&&typeof J.on=="function"||typeof J.pipe=="function"&&typeof J.on=="function")}function p(J){return!!(J&&!h(J)&&typeof J.pipeThrough=="function"&&typeof J.getReader=="function"&&typeof J.cancel=="function")}function b(J){return!!(J&&!h(J)&&typeof J.getWriter=="function"&&typeof J.abort=="function")}function _(J){return!!(J&&!h(J)&&typeof J.readable=="object"&&typeof J.writable=="object")}function y(J){return p(J)||b(J)||_(J)}function g(J,_e){return J==null?!1:_e===!0?typeof J[a]=="function":_e===!1?typeof J[t]=="function":typeof J[a]=="function"||typeof J[t]=="function"}function m(J){if(!h(J))return null;const _e=J._writableState,Fe=J._readableState,ve=_e||Fe;return!!(J.destroyed||J[n]||ve!=null&&ve.destroyed)}function v(J){if(!d(J))return null;if(J.writableEnded===!0)return!0;const _e=J._writableState;return _e!=null&&_e.errored?!1:typeof(_e==null?void 0:_e.ended)!="boolean"?null:_e.ended}function T(J,_e){if(!d(J))return null;if(J.writableFinished===!0)return!0;const Fe=J._writableState;return Fe!=null&&Fe.errored?!1:typeof(Fe==null?void 0:Fe.finished)!="boolean"?null:!!(Fe.finished||_e===!1&&Fe.ended===!0&&Fe.length===0)}function S(J){if(!l(J))return null;if(J.readableEnded===!0)return!0;const _e=J._readableState;return!_e||_e.errored?!1:typeof(_e==null?void 0:_e.ended)!="boolean"?null:_e.ended}function x(J,_e){if(!l(J))return null;const Fe=J._readableState;return Fe!=null&&Fe.errored?!1:typeof(Fe==null?void 0:Fe.endEmitted)!="boolean"?null:!!(Fe.endEmitted||_e===!1&&Fe.ended===!0&&Fe.length===0)}function L(J){return J&&J[e]!=null?J[e]:typeof(J==null?void 0:J.readable)!="boolean"?null:m(J)?!1:l(J)&&J.readable&&!x(J)}function O(J){return J&&J[i]!=null?J[i]:typeof(J==null?void 0:J.writable)!="boolean"?null:m(J)?!1:d(J)&&J.writable&&!v(J)}function w(J,_e){return h(J)?m(J)?!0:!((_e==null?void 0:_e.readable)!==!1&&L(J)||(_e==null?void 0:_e.writable)!==!1&&O(J)):null}function A(J){var _e,Fe;return h(J)?J.writableErrored?J.writableErrored:(_e=(Fe=J._writableState)===null||Fe===void 0?void 0:Fe.errored)!==null&&_e!==void 0?_e:null:null}function E(J){var _e,Fe;return h(J)?J.readableErrored?J.readableErrored:(_e=(Fe=J._readableState)===null||Fe===void 0?void 0:Fe.errored)!==null&&_e!==void 0?_e:null:null}function R(J){if(!h(J))return null;if(typeof J.closed=="boolean")return J.closed;const _e=J._writableState,Fe=J._readableState;return typeof(_e==null?void 0:_e.closed)=="boolean"||typeof(Fe==null?void 0:Fe.closed)=="boolean"?(_e==null?void 0:_e.closed)||(Fe==null?void 0:Fe.closed):typeof J._closed=="boolean"&&V(J)?J._closed:null}function V(J){return typeof J._closed=="boolean"&&typeof J._defaultKeepAlive=="boolean"&&typeof J._removedConnection=="boolean"&&typeof J._removedContLen=="boolean"}function $(J){return typeof J._sent100=="boolean"&&V(J)}function Q(J){var _e;return typeof J._consuming=="boolean"&&typeof J._dumped=="boolean"&&((_e=J.req)===null||_e===void 0?void 0:_e.upgradeOrConnect)===void 0}function ne(J){if(!h(J))return null;const _e=J._writableState,Fe=J._readableState,ve=_e||Fe;return!ve&&$(J)||!!(ve&&ve.autoDestroy&&ve.emitClose&&ve.closed===!1)}function ie(J){var _e;return!!(J&&((_e=J[o])!==null&&_e!==void 0?_e:J.readableDidRead||J.readableAborted))}function fe(J){var _e,Fe,ve,te,Le,Ce,Ve,ge,we,G;return!!(J&&((_e=(Fe=(ve=(te=(Le=(Ce=J[r])!==null&&Ce!==void 0?Ce:J.readableErrored)!==null&&Le!==void 0?Le:J.writableErrored)!==null&&te!==void 0?te:(Ve=J._readableState)===null||Ve===void 0?void 0:Ve.errorEmitted)!==null&&ve!==void 0?ve:(ge=J._writableState)===null||ge===void 0?void 0:ge.errorEmitted)!==null&&Fe!==void 0?Fe:(we=J._readableState)===null||we===void 0?void 0:we.errored)!==null&&_e!==void 0?_e:!((G=J._writableState)===null||G===void 0)&&G.errored))}return cN={isDestroyed:m,kIsDestroyed:n,isDisturbed:ie,kIsDisturbed:o,isErrored:fe,kIsErrored:r,isReadable:L,kIsReadable:e,kIsClosedPromise:c,kControllerErrorFunction:s,kIsWritable:i,isClosed:R,isDuplexNodeStream:f,isFinished:w,isIterable:g,isReadableNodeStream:l,isReadableStream:p,isReadableEnded:S,isReadableFinished:x,isReadableErrored:E,isNodeStream:h,isWebStream:y,isWritable:O,isWritableNodeStream:d,isWritableStream:b,isWritableEnded:v,isWritableFinished:T,isWritableErrored:A,isServerRequest:Q,isServerResponse:$,willEmitClose:ne,isTransformStream:_},cN}var _9;function ga(){if(_9)return ZO.exports;_9=1;const a=ma(),{AbortError:t,codes:u}=tn(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:r}=u,{kEmptyObject:e,once:i}=on(),{validateAbortSignal:o,validateFunction:c,validateObject:s,validateBoolean:l}=q1(),{Promise:d,PromisePrototypeThen:f,SymbolDispose:h}=or(),{isClosed:p,isReadable:b,isReadableNodeStream:_,isReadableStream:y,isReadableFinished:g,isReadableErrored:m,isWritable:v,isWritableNodeStream:T,isWritableStream:S,isWritableFinished:x,isWritableErrored:L,isNodeStream:O,willEmitClose:w,kIsClosedPromise:A}=qi();let E;function R(ie){return ie.setHeader&&typeof ie.abort=="function"}const V=()=>{};function $(ie,fe,J){var _e,Fe;if(arguments.length===2?(J=fe,fe=e):fe==null?fe=e:s(fe,"options"),c(J,"callback"),o(fe.signal,"options.signal"),J=i(J),y(ie)||S(ie))return Q(ie,fe,J);if(!O(ie))throw new n("stream",["ReadableStream","WritableStream","Stream"],ie);const ve=(_e=fe.readable)!==null&&_e!==void 0?_e:_(ie),te=(Fe=fe.writable)!==null&&Fe!==void 0?Fe:T(ie),Le=ie._writableState,Ce=ie._readableState,Ve=()=>{ie.writable||G()};let ge=w(ie)&&_(ie)===ve&&T(ie)===te,we=x(ie,!1);const G=()=>{we=!0,ie.destroyed&&(ge=!1),!(ge&&(!ie.readable||ve))&&(!ve||D)&&J.call(ie)};let D=g(ie,!1);const j=()=>{D=!0,ie.destroyed&&(ge=!1),!(ge&&(!ie.writable||te))&&(!te||we)&&J.call(ie)},I=z=>{J.call(ie,z)};let N=p(ie);const B=()=>{N=!0;const z=L(ie)||m(ie);if(z&&typeof z!="boolean")return J.call(ie,z);if(ve&&!D&&_(ie,!0)&&!g(ie,!1))return J.call(ie,new r);if(te&&!we&&!x(ie,!1))return J.call(ie,new r);J.call(ie)},X=()=>{N=!0;const z=L(ie)||m(ie);if(z&&typeof z!="boolean")return J.call(ie,z);J.call(ie)},H=()=>{ie.req.on("finish",G)};R(ie)?(ie.on("complete",G),ge||ie.on("abort",B),ie.req?H():ie.on("request",H)):te&&!Le&&(ie.on("end",Ve),ie.on("close",Ve)),!ge&&typeof ie.aborted=="boolean"&&ie.on("aborted",B),ie.on("end",j),ie.on("finish",G),fe.error!==!1&&ie.on("error",I),ie.on("close",B),N?a.nextTick(B):Le!=null&&Le.errorEmitted||Ce!=null&&Ce.errorEmitted?ge||a.nextTick(X):(!ve&&(!ge||b(ie))&&(we||v(ie)===!1)||!te&&(!ge||v(ie))&&(D||b(ie)===!1)||Ce&&ie.req&&ie.aborted)&&a.nextTick(X);const K=()=>{J=V,ie.removeListener("aborted",B),ie.removeListener("complete",G),ie.removeListener("abort",B),ie.removeListener("request",H),ie.req&&ie.req.removeListener("finish",G),ie.removeListener("end",Ve),ie.removeListener("close",Ve),ie.removeListener("finish",G),ie.removeListener("end",j),ie.removeListener("error",I),ie.removeListener("close",B)};if(fe.signal&&!N){const z=()=>{const Z=J;K(),Z.call(ie,new t(void 0,{cause:fe.signal.reason}))};if(fe.signal.aborted)a.nextTick(z);else{E=E||on().addAbortListener;const Z=E(fe.signal,z),de=J;J=i((...le)=>{Z[h](),de.apply(ie,le)})}}return K}function Q(ie,fe,J){let _e=!1,Fe=V;if(fe.signal)if(Fe=()=>{_e=!0,J.call(ie,new t(void 0,{cause:fe.signal.reason}))},fe.signal.aborted)a.nextTick(Fe);else{E=E||on().addAbortListener;const te=E(fe.signal,Fe),Le=J;J=i((...Ce)=>{te[h](),Le.apply(ie,Ce)})}const ve=(...te)=>{_e||a.nextTick(()=>J.apply(ie,te))};return f(ie[A].promise,ve,ve),V}function ne(ie,fe){var J;let _e=!1;return fe===null&&(fe=e),(J=fe)!==null&&J!==void 0&&J.cleanup&&(l(fe.cleanup,"cleanup"),_e=fe.cleanup),new d((Fe,ve)=>{const te=$(ie,fe,Le=>{_e&&te(),Le?ve(Le):Fe()})})}return ZO.exports=$,ZO.exports.finished=ne,ZO.exports}var lN,g9;function Th(){if(g9)return lN;g9=1;const a=ma(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:u},AbortError:n}=tn(),{Symbol:r}=or(),{kIsDestroyed:e,isDestroyed:i,isFinished:o,isServerRequest:c}=qi(),s=r("kDestroy"),l=r("kConstruct");function d(w,A,E){w&&(w.stack,A&&!A.errored&&(A.errored=w),E&&!E.errored&&(E.errored=w))}function f(w,A){const E=this._readableState,R=this._writableState,V=R||E;return R!=null&&R.destroyed||E!=null&&E.destroyed?(typeof A=="function"&&A(),this):(d(w,R,E),R&&(R.destroyed=!0),E&&(E.destroyed=!0),V.constructed?h(this,w,A):this.once(s,function($){h(this,t($,w),A)}),this)}function h(w,A,E){let R=!1;function V($){if(R)return;R=!0;const Q=w._readableState,ne=w._writableState;d($,ne,Q),ne&&(ne.closed=!0),Q&&(Q.closed=!0),typeof E=="function"&&E($),$?a.nextTick(p,w,$):a.nextTick(b,w)}try{w._destroy(A||null,V)}catch($){V($)}}function p(w,A){_(w,A),b(w)}function b(w){const A=w._readableState,E=w._writableState;E&&(E.closeEmitted=!0),A&&(A.closeEmitted=!0),(E!=null&&E.emitClose||A!=null&&A.emitClose)&&w.emit("close")}function _(w,A){const E=w._readableState,R=w._writableState;R!=null&&R.errorEmitted||E!=null&&E.errorEmitted||(R&&(R.errorEmitted=!0),E&&(E.errorEmitted=!0),w.emit("error",A))}function y(){const w=this._readableState,A=this._writableState;w&&(w.constructed=!0,w.closed=!1,w.closeEmitted=!1,w.destroyed=!1,w.errored=null,w.errorEmitted=!1,w.reading=!1,w.ended=w.readable===!1,w.endEmitted=w.readable===!1),A&&(A.constructed=!0,A.destroyed=!1,A.closed=!1,A.closeEmitted=!1,A.errored=null,A.errorEmitted=!1,A.finalCalled=!1,A.prefinished=!1,A.ended=A.writable===!1,A.ending=A.writable===!1,A.finished=A.writable===!1)}function g(w,A,E){const R=w._readableState,V=w._writableState;if(V!=null&&V.destroyed||R!=null&&R.destroyed)return this;R!=null&&R.autoDestroy||V!=null&&V.autoDestroy?w.destroy(A):A&&(A.stack,V&&!V.errored&&(V.errored=A),R&&!R.errored&&(R.errored=A),E?a.nextTick(_,w,A):_(w,A))}function m(w,A){if(typeof w._construct!="function")return;const E=w._readableState,R=w._writableState;E&&(E.constructed=!1),R&&(R.constructed=!1),w.once(l,A),!(w.listenerCount(l)>1)&&a.nextTick(v,w)}function v(w){let A=!1;function E(R){if(A){g(w,R??new u);return}A=!0;const V=w._readableState,$=w._writableState,Q=$||V;V&&(V.constructed=!0),$&&($.constructed=!0),Q.destroyed?w.emit(s,R):R?g(w,R,!0):a.nextTick(T,w)}try{w._construct(R=>{a.nextTick(E,R)})}catch(R){a.nextTick(E,R)}}function T(w){w.emit(l)}function S(w){return(w==null?void 0:w.setHeader)&&typeof w.abort=="function"}function x(w){w.emit("close")}function L(w,A){w.emit("error",A),a.nextTick(x,w)}function O(w,A){!w||i(w)||(!A&&!o(w)&&(A=new n),c(w)?(w.socket=null,w.destroy(A)):S(w)?w.abort():S(w.req)?w.req.abort():typeof w.destroy=="function"?w.destroy(A):typeof w.close=="function"?w.close():A?a.nextTick(L,w,A):a.nextTick(x,w),w.destroyed||(w[e]=!0))}return lN={construct:m,destroyer:O,destroy:f,undestroy:y,errorOrDestroy:g},lN}var dN,v9;function fN(){if(v9)return dN;v9=1;const{ArrayIsArray:a,ObjectSetPrototypeOf:t}=or(),{EventEmitter:u}=cy();function n(e){u.call(this,e)}t(n.prototype,u.prototype),t(n,u),n.prototype.pipe=function(e,i){const o=this;function c(b){e.writable&&e.write(b)===!1&&o.pause&&o.pause()}o.on("data",c);function s(){o.readable&&o.resume&&o.resume()}e.on("drain",s),!e._isStdio&&(!i||i.end!==!1)&&(o.on("end",d),o.on("close",f));let l=!1;function d(){l||(l=!0,e.end())}function f(){l||(l=!0,typeof e.destroy=="function"&&e.destroy())}function h(b){p(),u.listenerCount(this,"error")===0&&this.emit("error",b)}r(o,"error",h),r(e,"error",h);function p(){o.removeListener("data",c),e.removeListener("drain",s),o.removeListener("end",d),o.removeListener("close",f),o.removeListener("error",h),e.removeListener("error",h),o.removeListener("end",p),o.removeListener("close",p),e.removeListener("close",p)}return o.on("end",p),o.on("close",p),e.on("close",p),e.emit("pipe",o),e};function r(e,i,o){if(typeof e.prependListener=="function")return e.prependListener(i,o);!e._events||!e._events[i]?e.on(i,o):a(e._events[i])?e._events[i].unshift(o):e._events[i]=[o,e._events[i]]}return dN={Stream:n,prependListener:r},dN}var hN={exports:{}},T9;function eA(){return T9||(T9=1,function(a){const{SymbolDispose:t}=or(),{AbortError:u,codes:n}=tn(),{isNodeStream:r,isWebStream:e,kControllerErrorFunction:i}=qi(),o=ga(),{ERR_INVALID_ARG_TYPE:c}=n;let s;const l=(d,f)=>{if(typeof d!="object"||!("aborted"in d))throw new c(f,"AbortSignal",d)};a.exports.addAbortSignal=function(f,h){if(l(f,"signal"),!r(h)&&!e(h))throw new c("stream",["ReadableStream","WritableStream","Stream"],h);return a.exports.addAbortSignalNoValidate(f,h)},a.exports.addAbortSignalNoValidate=function(d,f){if(typeof d!="object"||!("aborted"in d))return f;const h=r(f)?()=>{f.destroy(new u(void 0,{cause:d.reason}))}:()=>{f[i](new u(void 0,{cause:d.reason}))};if(d.aborted)h();else{s=s||on().addAbortListener;const p=s(d,h);o(f,p[t])}return f}}(hN)),hN.exports}var pN,w9;function hle(){if(w9)return pN;w9=1;const{StringPrototypeSlice:a,SymbolIterator:t,TypedArrayPrototypeSet:u,Uint8Array:n}=or(),{Buffer:r}=Ci(),{inspect:e}=on();return pN=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const c={data:o,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(o){const c={data:o,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let c=this.head,s=""+c.data;for(;(c=c.next)!==null;)s+=o+c.data;return s}concat(o){if(this.length===0)return r.alloc(0);const c=r.allocUnsafe(o>>>0);let s=this.head,l=0;for(;s;)u(c,s.data,l),l+=s.data.length,s=s.next;return c}consume(o,c){const s=this.head.data;if(o<s.length){const l=s.slice(0,o);return this.head.data=s.slice(o),l}return o===s.length?this.shift():c?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[t](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let c="",s=this.head,l=0;do{const d=s.data;if(o>d.length)c+=d,o-=d.length;else{o===d.length?(c+=d,++l,s.next?this.head=s.next:this.head=this.tail=null):(c+=a(d,0,o),this.head=s,s.data=a(d,o));break}++l}while((s=s.next)!==null);return this.length-=l,c}_getBuffer(o){const c=r.allocUnsafe(o),s=o;let l=this.head,d=0;do{const f=l.data;if(o>f.length)u(c,f,s-o),o-=f.length;else{o===f.length?(u(c,f,s-o),++d,l.next?this.head=l.next:this.head=this.tail=null):(u(c,new n(f.buffer,f.byteOffset,o),s-o),this.head=l,l.data=f.slice(o));break}++d}while((l=l.next)!==null);return this.length-=d,c}[Symbol.for("nodejs.util.inspect.custom")](o,c){return e(this,{...c,depth:0,customInspect:!1})}},pN}var yN,S9;function tA(){if(S9)return yN;S9=1;const{MathFloor:a,NumberIsInteger:t}=or(),{validateInteger:u}=q1(),{ERR_INVALID_ARG_VALUE:n}=tn().codes;let r=16*1024,e=16;function i(l,d,f){return l.highWaterMark!=null?l.highWaterMark:d?l[f]:null}function o(l){return l?e:r}function c(l,d){u(d,"value",0),l?e=d:r=d}function s(l,d,f,h){const p=i(d,h,f);if(p!=null){if(!t(p)||p<0){const b=h?`options.${f}`:"options.highWaterMark";throw new n(b,p)}return a(p)}return o(l.objectMode)}return yN={getHighWaterMark:s,getDefaultHighWaterMark:o,setDefaultHighWaterMark:c},yN}var bN={},rA={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var O9;function ple(){return O9||(O9=1,function(a,t){var u=Ci(),n=u.Buffer;function r(i,o){for(var c in i)o[c]=i[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?a.exports=u:(r(u,t),t.Buffer=e);function e(i,o,c){return n(i,o,c)}e.prototype=Object.create(n.prototype),r(n,e),e.from=function(i,o,c){if(typeof i=="number")throw new TypeError("Argument must not be a number");return n(i,o,c)},e.alloc=function(i,o,c){if(typeof i!="number")throw new TypeError("Argument must be a number");var s=n(i);return o!==void 0?typeof c=="string"?s.fill(o,c):s.fill(o):s.fill(0),s},e.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return n(i)},e.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return u.SlowBuffer(i)}}(rA,rA.exports)),rA.exports}var A9;function yle(){if(A9)return bN;A9=1;var a=ple().Buffer,t=a.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u(y){if(!y)return"utf8";for(var g;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(g)return;y=(""+y).toLowerCase(),g=!0}}function n(y){var g=u(y);if(typeof g!="string"&&(a.isEncoding===t||!t(y)))throw new Error("Unknown encoding: "+y);return g||y}bN.StringDecoder=r;function r(y){this.encoding=n(y);var g;switch(this.encoding){case"utf16le":this.text=d,this.end=f,g=4;break;case"utf8":this.fillLast=c,g=4;break;case"base64":this.text=h,this.end=p,g=3;break;default:this.write=b,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(g)}r.prototype.write=function(y){if(y.length===0)return"";var g,m;if(this.lastNeed){if(g=this.fillLast(y),g===void 0)return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<y.length?g?g+this.text(y,m):this.text(y,m):g||""},r.prototype.end=l,r.prototype.text=s,r.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function e(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function i(y,g,m){var v=g.length-1;if(v<m)return 0;var T=e(g[v]);return T>=0?(T>0&&(y.lastNeed=T-1),T):--v<m||T===-2?0:(T=e(g[v]),T>=0?(T>0&&(y.lastNeed=T-2),T):--v<m||T===-2?0:(T=e(g[v]),T>=0?(T>0&&(T===2?T=0:y.lastNeed=T-3),T):0))}function o(y,g,m){if((g[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&g.length>1){if((g[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&g.length>2&&(g[2]&192)!==128)return y.lastNeed=2,""}}function c(y){var g=this.lastTotal-this.lastNeed,m=o(this,y);if(m!==void 0)return m;if(this.lastNeed<=y.length)return y.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,g,0,y.length),this.lastNeed-=y.length}function s(y,g){var m=i(this,y,g);if(!this.lastNeed)return y.toString("utf8",g);this.lastTotal=m;var v=y.length-(m-this.lastNeed);return y.copy(this.lastChar,0,v),y.toString("utf8",g,v)}function l(y){var g=y&&y.length?this.write(y):"";return this.lastNeed?g+"":g}function d(y,g){if((y.length-g)%2===0){var m=y.toString("utf16le",g);if(m){var v=m.charCodeAt(m.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",g,y.length-1)}function f(y){var g=y&&y.length?this.write(y):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,m)}return g}function h(y,g){var m=(y.length-g)%3;return m===0?y.toString("base64",g):(this.lastNeed=3-m,this.lastTotal=3,m===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",g,y.length-m))}function p(y){var g=y&&y.length?this.write(y):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function b(y){return y.toString(this.encoding)}function _(y){return y&&y.length?this.write(y):""}return bN}var mN,E9;function I9(){if(E9)return mN;E9=1;const a=ma(),{PromisePrototypeThen:t,SymbolAsyncIterator:u,SymbolIterator:n}=or(),{Buffer:r}=Ci(),{ERR_INVALID_ARG_TYPE:e,ERR_STREAM_NULL_VALUES:i}=tn().codes;function o(c,s,l){let d;if(typeof s=="string"||s instanceof r)return new c({objectMode:!0,...l,read(){this.push(s),this.push(null)}});let f;if(s&&s[u])f=!0,d=s[u]();else if(s&&s[n])f=!1,d=s[n]();else throw new e("iterable",["Iterable"],s);const h=new c({objectMode:!0,highWaterMark:1,...l});let p=!1;h._read=function(){p||(p=!0,_())},h._destroy=function(y,g){t(b(y),()=>a.nextTick(g,y),m=>a.nextTick(g,m||y))};async function b(y){const g=y!=null,m=typeof d.throw=="function";if(g&&m){const{value:v,done:T}=await d.throw(y);if(await v,T)return}if(typeof d.return=="function"){const{value:v}=await d.return();await v}}async function _(){for(;;){try{const{value:y,done:g}=f?await d.next():d.next();if(g)h.push(null);else{const m=y&&typeof y.then=="function"?await y:y;if(m===null)throw p=!1,new i;if(h.push(m))continue;p=!1}}catch(y){h.destroy(y)}break}}return h}return mN=o,mN}var _N,x9;function nA(){if(x9)return _N;x9=1;const a=ma(),{ArrayPrototypeIndexOf:t,NumberIsInteger:u,NumberIsNaN:n,NumberParseInt:r,ObjectDefineProperties:e,ObjectKeys:i,ObjectSetPrototypeOf:o,Promise:c,SafeSet:s,SymbolAsyncDispose:l,SymbolAsyncIterator:d,Symbol:f}=or();_N=le,le.ReadableState=de;const{EventEmitter:h}=cy(),{Stream:p,prependListener:b}=fN(),{Buffer:_}=Ci(),{addAbortSignal:y}=eA(),g=ga();let m=on().debuglog("stream",ae=>{m=ae});const v=hle(),T=Th(),{getHighWaterMark:S,getDefaultHighWaterMark:x}=tA(),{aggregateTwoErrors:L,codes:{ERR_INVALID_ARG_TYPE:O,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_OUT_OF_RANGE:A,ERR_STREAM_PUSH_AFTER_EOF:E,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:R},AbortError:V}=tn(),{validateObject:$}=q1(),Q=f("kPaused"),{StringDecoder:ne}=yle(),ie=I9();o(le.prototype,p.prototype),o(le,p);const fe=()=>{},{errorOrDestroy:J}=T,_e=1,Fe=2,ve=4,te=8,Le=16,Ce=32,Ve=64,ge=128,we=256,G=512,D=1024,j=2048,I=4096,N=8192,B=16384,X=32768,H=65536,K=1<<17,z=1<<18;function Z(ae){return{enumerable:!1,get(){return(this.state&ae)!==0},set(M){M?this.state|=ae:this.state&=~ae}}}e(de.prototype,{objectMode:Z(_e),ended:Z(Fe),endEmitted:Z(ve),reading:Z(te),constructed:Z(Le),sync:Z(Ce),needReadable:Z(Ve),emittedReadable:Z(ge),readableListening:Z(we),resumeScheduled:Z(G),errorEmitted:Z(D),emitClose:Z(j),autoDestroy:Z(I),destroyed:Z(N),closed:Z(B),closeEmitted:Z(X),multiAwaitDrain:Z(H),readingMore:Z(K),dataEmitted:Z(z)});function de(ae,M,P){typeof P!="boolean"&&(P=M instanceof Bi()),this.state=j|I|Le|Ce,ae&&ae.objectMode&&(this.state|=_e),P&&ae&&ae.readableObjectMode&&(this.state|=_e),this.highWaterMark=ae?S(this,ae,"readableHighWaterMark",P):x(!1),this.buffer=new v,this.length=0,this.pipes=[],this.flowing=null,this[Q]=null,ae&&ae.emitClose===!1&&(this.state&=~j),ae&&ae.autoDestroy===!1&&(this.state&=~I),this.errored=null,this.defaultEncoding=ae&&ae.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ae&&ae.encoding&&(this.decoder=new ne(ae.encoding),this.encoding=ae.encoding)}function le(ae){if(!(this instanceof le))return new le(ae);const M=this instanceof Bi();this._readableState=new de(ae,this,M),ae&&(typeof ae.read=="function"&&(this._read=ae.read),typeof ae.destroy=="function"&&(this._destroy=ae.destroy),typeof ae.construct=="function"&&(this._construct=ae.construct),ae.signal&&!M&&y(ae.signal,this)),p.call(this,ae),T.construct(this,()=>{this._readableState.needReadable&&F(this,this._readableState)})}le.prototype.destroy=T.destroy,le.prototype._undestroy=T.undestroy,le.prototype._destroy=function(ae,M){M(ae)},le.prototype[h.captureRejectionSymbol]=function(ae){this.destroy(ae)},le.prototype[l]=function(){let ae;return this.destroyed||(ae=this.readableEnded?null:new V,this.destroy(ae)),new c((M,P)=>g(this,C=>C&&C!==ae?P(C):M(null)))},le.prototype.push=function(ae,M){return De(this,ae,M,!1)},le.prototype.unshift=function(ae,M){return De(this,ae,M,!0)};function De(ae,M,P,C){m("readableAddChunk",M);const W=ae._readableState;let me;if((W.state&_e)===0&&(typeof M=="string"?(P=P||W.defaultEncoding,W.encoding!==P&&(C&&W.encoding?M=_.from(M,P).toString(W.encoding):(M=_.from(M,P),P=""))):M instanceof _?P="":p._isUint8Array(M)?(M=p._uint8ArrayToBuffer(M),P=""):M!=null&&(me=new O("chunk",["string","Buffer","Uint8Array"],M))),me)J(ae,me);else if(M===null)W.state&=~te,ye(ae,W);else if((W.state&_e)!==0||M&&M.length>0)if(C)if((W.state&ve)!==0)J(ae,new R);else{if(W.destroyed||W.errored)return!1;Qe(ae,W,M,!0)}else if(W.ended)J(ae,new E);else{if(W.destroyed||W.errored)return!1;W.state&=~te,W.decoder&&!P?(M=W.decoder.write(M),W.objectMode||M.length!==0?Qe(ae,W,M,!1):F(ae,W)):Qe(ae,W,M,!1)}else C||(W.state&=~te,F(ae,W));return!W.ended&&(W.length<W.highWaterMark||W.length===0)}function Qe(ae,M,P,C){M.flowing&&M.length===0&&!M.sync&&ae.listenerCount("data")>0?((M.state&H)!==0?M.awaitDrainWriters.clear():M.awaitDrainWriters=null,M.dataEmitted=!0,ae.emit("data",P)):(M.length+=M.objectMode?1:P.length,C?M.buffer.unshift(P):M.buffer.push(P),(M.state&Ve)!==0&&Ie(ae)),F(ae,M)}le.prototype.isPaused=function(){const ae=this._readableState;return ae[Q]===!0||ae.flowing===!1},le.prototype.setEncoding=function(ae){const M=new ne(ae);this._readableState.decoder=M,this._readableState.encoding=this._readableState.decoder.encoding;const P=this._readableState.buffer;let C="";for(const W of P)C+=M.write(W);return P.clear(),C!==""&&P.push(C),this._readableState.length=C.length,this};const je=1073741824;function oe(ae){if(ae>je)throw new A("size","<= 1GiB",ae);return ae--,ae|=ae>>>1,ae|=ae>>>2,ae|=ae>>>4,ae|=ae>>>8,ae|=ae>>>16,ae++,ae}function se(ae,M){return ae<=0||M.length===0&&M.ended?0:(M.state&_e)!==0?1:n(ae)?M.flowing&&M.length?M.buffer.first().length:M.length:ae<=M.length?ae:M.ended?M.length:0}le.prototype.read=function(ae){m("read",ae),ae===void 0?ae=NaN:u(ae)||(ae=r(ae,10));const M=this._readableState,P=ae;if(ae>M.highWaterMark&&(M.highWaterMark=oe(ae)),ae!==0&&(M.state&=~ge),ae===0&&M.needReadable&&((M.highWaterMark!==0?M.length>=M.highWaterMark:M.length>0)||M.ended))return m("read: emitReadable",M.length,M.ended),M.length===0&&M.ended?Ue(this):Ie(this),null;if(ae=se(ae,M),ae===0&&M.ended)return M.length===0&&Ue(this),null;let C=(M.state&Ve)!==0;if(m("need readable",C),(M.length===0||M.length-ae<M.highWaterMark)&&(C=!0,m("length less than watermark",C)),M.ended||M.reading||M.destroyed||M.errored||!M.constructed)C=!1,m("reading, ended or constructing",C);else if(C){m("do read"),M.state|=te|Ce,M.length===0&&(M.state|=Ve);try{this._read(M.highWaterMark)}catch(me){J(this,me)}M.state&=~Ce,M.reading||(ae=se(P,M))}let W;return ae>0?W=qe(ae,M):W=null,W===null?(M.needReadable=M.length<=M.highWaterMark,ae=0):(M.length-=ae,M.multiAwaitDrain?M.awaitDrainWriters.clear():M.awaitDrainWriters=null),M.length===0&&(M.ended||(M.needReadable=!0),P!==ae&&M.ended&&Ue(this)),W!==null&&!M.errorEmitted&&!M.closeEmitted&&(M.dataEmitted=!0,this.emit("data",W)),W};function ye(ae,M){if(m("onEofChunk"),!M.ended){if(M.decoder){const P=M.decoder.end();P&&P.length&&(M.buffer.push(P),M.length+=M.objectMode?1:P.length)}M.ended=!0,M.sync?Ie(ae):(M.needReadable=!1,M.emittedReadable=!0,U(ae))}}function Ie(ae){const M=ae._readableState;m("emitReadable",M.needReadable,M.emittedReadable),M.needReadable=!1,M.emittedReadable||(m("emitReadable",M.flowing),M.emittedReadable=!0,a.nextTick(U,ae))}function U(ae){const M=ae._readableState;m("emitReadable_",M.destroyed,M.length,M.ended),!M.destroyed&&!M.errored&&(M.length||M.ended)&&(ae.emit("readable"),M.emittedReadable=!1),M.needReadable=!M.flowing&&!M.ended&&M.length<=M.highWaterMark,Y(ae)}function F(ae,M){!M.readingMore&&M.constructed&&(M.readingMore=!0,a.nextTick(q,ae,M))}function q(ae,M){for(;!M.reading&&!M.ended&&(M.length<M.highWaterMark||M.flowing&&M.length===0);){const P=M.length;if(m("maybeReadMore read 0"),ae.read(0),P===M.length)break}M.readingMore=!1}le.prototype._read=function(ae){throw new w("_read()")},le.prototype.pipe=function(ae,M){const P=this,C=this._readableState;C.pipes.length===1&&(C.multiAwaitDrain||(C.multiAwaitDrain=!0,C.awaitDrainWriters=new s(C.awaitDrainWriters?[C.awaitDrainWriters]:[]))),C.pipes.push(ae),m("pipe count=%d opts=%j",C.pipes.length,M);const me=(!M||M.end!==!1)&&ae!==a.stdout&&ae!==a.stderr?Pe:ue;C.endEmitted?a.nextTick(me):P.once("end",me),ae.on("unpipe",pe);function pe(Oe,xe){m("onunpipe"),Oe===P&&xe&&xe.hasUnpiped===!1&&(xe.hasUnpiped=!0,Je())}function Pe(){m("onend"),ae.end()}let Be,ke=!1;function Je(){m("cleanup"),ae.removeListener("close",zr),ae.removeListener("finish",Xe),Be&&ae.removeListener("drain",Be),ae.removeListener("error",Ye),ae.removeListener("unpipe",pe),P.removeListener("end",Pe),P.removeListener("end",ue),P.removeListener("data",Ze),ke=!0,Be&&C.awaitDrainWriters&&(!ae._writableState||ae._writableState.needDrain)&&Be()}function ct(){ke||(C.pipes.length===1&&C.pipes[0]===ae?(m("false write response, pause",0),C.awaitDrainWriters=ae,C.multiAwaitDrain=!1):C.pipes.length>1&&C.pipes.includes(ae)&&(m("false write response, pause",C.awaitDrainWriters.size),C.awaitDrainWriters.add(ae)),P.pause()),Be||(Be=k(P,ae),ae.on("drain",Be))}P.on("data",Ze);function Ze(Oe){m("ondata");const xe=ae.write(Oe);m("dest.write",xe),xe===!1&&ct()}function Ye(Oe){if(m("onerror",Oe),ue(),ae.removeListener("error",Ye),ae.listenerCount("error")===0){const xe=ae._writableState||ae._readableState;xe&&!xe.errorEmitted?J(ae,Oe):ae.emit("error",Oe)}}b(ae,"error",Ye);function zr(){ae.removeListener("finish",Xe),ue()}ae.once("close",zr);function Xe(){m("onfinish"),ae.removeListener("close",zr),ue()}ae.once("finish",Xe);function ue(){m("unpipe"),P.unpipe(ae)}return ae.emit("pipe",P),ae.writableNeedDrain===!0?ct():C.flowing||(m("pipe resume"),P.resume()),ae};function k(ae,M){return function(){const C=ae._readableState;C.awaitDrainWriters===M?(m("pipeOnDrain",1),C.awaitDrainWriters=null):C.multiAwaitDrain&&(m("pipeOnDrain",C.awaitDrainWriters.size),C.awaitDrainWriters.delete(M)),(!C.awaitDrainWriters||C.awaitDrainWriters.size===0)&&ae.listenerCount("data")&&ae.resume()}}le.prototype.unpipe=function(ae){const M=this._readableState,P={hasUnpiped:!1};if(M.pipes.length===0)return this;if(!ae){const W=M.pipes;M.pipes=[],this.pause();for(let me=0;me<W.length;me++)W[me].emit("unpipe",this,{hasUnpiped:!1});return this}const C=t(M.pipes,ae);return C===-1?this:(M.pipes.splice(C,1),M.pipes.length===0&&this.pause(),ae.emit("unpipe",this,P),this)},le.prototype.on=function(ae,M){const P=p.prototype.on.call(this,ae,M),C=this._readableState;return ae==="data"?(C.readableListening=this.listenerCount("readable")>0,C.flowing!==!1&&this.resume()):ae==="readable"&&!C.endEmitted&&!C.readableListening&&(C.readableListening=C.needReadable=!0,C.flowing=!1,C.emittedReadable=!1,m("on readable",C.length,C.reading),C.length?Ie(this):C.reading||a.nextTick(be,this)),P},le.prototype.addListener=le.prototype.on,le.prototype.removeListener=function(ae,M){const P=p.prototype.removeListener.call(this,ae,M);return ae==="readable"&&a.nextTick(ce,this),P},le.prototype.off=le.prototype.removeListener,le.prototype.removeAllListeners=function(ae){const M=p.prototype.removeAllListeners.apply(this,arguments);return(ae==="readable"||ae===void 0)&&a.nextTick(ce,this),M};function ce(ae){const M=ae._readableState;M.readableListening=ae.listenerCount("readable")>0,M.resumeScheduled&&M[Q]===!1?M.flowing=!0:ae.listenerCount("data")>0?ae.resume():M.readableListening||(M.flowing=null)}function be(ae){m("readable nexttick read 0"),ae.read(0)}le.prototype.resume=function(){const ae=this._readableState;return ae.flowing||(m("resume"),ae.flowing=!ae.readableListening,Se(this,ae)),ae[Q]=!1,this};function Se(ae,M){M.resumeScheduled||(M.resumeScheduled=!0,a.nextTick(Ke,ae,M))}function Ke(ae,M){m("resume",M.reading),M.reading||ae.read(0),M.resumeScheduled=!1,ae.emit("resume"),Y(ae),M.flowing&&!M.reading&&ae.read(0)}le.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Q]=!0,this};function Y(ae){const M=ae._readableState;for(m("flow",M.flowing);M.flowing&&ae.read()!==null;);}le.prototype.wrap=function(ae){let M=!1;ae.on("data",C=>{!this.push(C)&&ae.pause&&(M=!0,ae.pause())}),ae.on("end",()=>{this.push(null)}),ae.on("error",C=>{J(this,C)}),ae.on("close",()=>{this.destroy()}),ae.on("destroy",()=>{this.destroy()}),this._read=()=>{M&&ae.resume&&(M=!1,ae.resume())};const P=i(ae);for(let C=1;C<P.length;C++){const W=P[C];this[W]===void 0&&typeof ae[W]=="function"&&(this[W]=ae[W].bind(ae))}return this},le.prototype[d]=function(){return Ee(this)},le.prototype.iterator=function(ae){return ae!==void 0&&$(ae,"options"),Ee(this,ae)};function Ee(ae,M){typeof ae.read!="function"&&(ae=le.wrap(ae,{objectMode:!0}));const P=Re(ae,M);return P.stream=ae,P}async function*Re(ae,M){let P=fe;function C(pe){this===ae?(P(),P=fe):P=pe}ae.on("readable",C);let W;const me=g(ae,{writable:!1},pe=>{W=pe?L(W,pe):null,P(),P=fe});try{for(;;){const pe=ae.destroyed?null:ae.read();if(pe!==null)yield pe;else{if(W)throw W;if(W===null)return;await new c(C)}}}catch(pe){throw W=L(W,pe),W}finally{(W||(M==null?void 0:M.destroyOnReturn)!==!1)&&(W===void 0||ae._readableState.autoDestroy)?T.destroyer(ae,null):(ae.off("readable",C),me())}}e(le.prototype,{readable:{__proto__:null,get(){const ae=this._readableState;return!!ae&&ae.readable!==!1&&!ae.destroyed&&!ae.errorEmitted&&!ae.endEmitted},set(ae){this._readableState&&(this._readableState.readable=!!ae)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ae){this._readableState&&(this._readableState.flowing=ae)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ae){this._readableState&&(this._readableState.destroyed=ae)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),e(de.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Q]!==!1},set(ae){this[Q]=!!ae}}}),le._fromList=qe;function qe(ae,M){if(M.length===0)return null;let P;return M.objectMode?P=M.buffer.shift():!ae||ae>=M.length?(M.decoder?P=M.buffer.join(""):M.buffer.length===1?P=M.buffer.first():P=M.buffer.concat(M.length),M.buffer.clear()):P=M.buffer.consume(ae,M.decoder),P}function Ue(ae){const M=ae._readableState;m("endReadable",M.endEmitted),M.endEmitted||(M.ended=!0,a.nextTick(tt,M,ae))}function tt(ae,M){if(m("endReadableNT",ae.endEmitted,ae.length),!ae.errored&&!ae.closeEmitted&&!ae.endEmitted&&ae.length===0){if(ae.endEmitted=!0,M.emit("end"),M.writable&&M.allowHalfOpen===!1)a.nextTick(ut,M);else if(ae.autoDestroy){const P=M._writableState;(!P||P.autoDestroy&&(P.finished||P.writable===!1))&&M.destroy()}}}function ut(ae){ae.writable&&!ae.writableEnded&&!ae.destroyed&&ae.end()}le.from=function(ae,M){return ie(le,ae,M)};let rt;function lt(){return rt===void 0&&(rt={}),rt}return le.fromWeb=function(ae,M){return lt().newStreamReadableFromReadableStream(ae,M)},le.toWeb=function(ae,M){return lt().newReadableStreamFromStreamReadable(ae,M)},le.wrap=function(ae,M){var P,C;return new le({objectMode:(P=(C=ae.readableObjectMode)!==null&&C!==void 0?C:ae.objectMode)!==null&&P!==void 0?P:!0,...M,destroy(W,me){T.destroyer(ae,W),me(W)}}).wrap(ae)},_N}var gN,N9;function vN(){if(N9)return gN;N9=1;const a=ma(),{ArrayPrototypeSlice:t,Error:u,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:r,ObjectDefineProperties:e,ObjectSetPrototypeOf:i,StringPrototypeToLowerCase:o,Symbol:c,SymbolHasInstance:s}=or();gN=$,$.WritableState=R;const{EventEmitter:l}=cy(),d=fN().Stream,{Buffer:f}=Ci(),h=Th(),{addAbortSignal:p}=eA(),{getHighWaterMark:b,getDefaultHighWaterMark:_}=tA(),{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:g,ERR_MULTIPLE_CALLBACK:m,ERR_STREAM_CANNOT_PIPE:v,ERR_STREAM_DESTROYED:T,ERR_STREAM_ALREADY_FINISHED:S,ERR_STREAM_NULL_VALUES:x,ERR_STREAM_WRITE_AFTER_END:L,ERR_UNKNOWN_ENCODING:O}=tn().codes,{errorOrDestroy:w}=h;i($.prototype,d.prototype),i($,d);function A(){}const E=c("kOnFinished");function R(I,N,B){typeof B!="boolean"&&(B=N instanceof Bi()),this.objectMode=!!(I&&I.objectMode),B&&(this.objectMode=this.objectMode||!!(I&&I.writableObjectMode)),this.highWaterMark=I?b(this,I,"writableHighWaterMark",B):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const X=!!(I&&I.decodeStrings===!1);this.decodeStrings=!X,this.defaultEncoding=I&&I.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=J.bind(void 0,N),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,V(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!I||I.emitClose!==!1,this.autoDestroy=!I||I.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[E]=[]}function V(I){I.buffered=[],I.bufferedIndex=0,I.allBuffers=!0,I.allNoop=!0}R.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},r(R.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function $(I){const N=this instanceof Bi();if(!N&&!n($,this))return new $(I);this._writableState=new R(I,this,N),I&&(typeof I.write=="function"&&(this._write=I.write),typeof I.writev=="function"&&(this._writev=I.writev),typeof I.destroy=="function"&&(this._destroy=I.destroy),typeof I.final=="function"&&(this._final=I.final),typeof I.construct=="function"&&(this._construct=I.construct),I.signal&&p(I.signal,this)),d.call(this,I),h.construct(this,()=>{const B=this._writableState;B.writing||te(this,B),ge(this,B)})}r($,s,{__proto__:null,value:function(I){return n(this,I)?!0:this!==$?!1:I&&I._writableState instanceof R}}),$.prototype.pipe=function(){w(this,new v)};function Q(I,N,B,X){const H=I._writableState;if(typeof B=="function")X=B,B=H.defaultEncoding;else{if(!B)B=H.defaultEncoding;else if(B!=="buffer"&&!f.isEncoding(B))throw new O(B);typeof X!="function"&&(X=A)}if(N===null)throw new x;if(!H.objectMode)if(typeof N=="string")H.decodeStrings!==!1&&(N=f.from(N,B),B="buffer");else if(N instanceof f)B="buffer";else if(d._isUint8Array(N))N=d._uint8ArrayToBuffer(N),B="buffer";else throw new y("chunk",["string","Buffer","Uint8Array"],N);let K;return H.ending?K=new L:H.destroyed&&(K=new T("write")),K?(a.nextTick(X,K),w(I,K,!0),K):(H.pendingcb++,ne(I,H,N,B,X))}$.prototype.write=function(I,N,B){return Q(this,I,N,B)===!0},$.prototype.cork=function(){this._writableState.corked++},$.prototype.uncork=function(){const I=this._writableState;I.corked&&(I.corked--,I.writing||te(this,I))},$.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=o(N)),!f.isEncoding(N))throw new O(N);return this._writableState.defaultEncoding=N,this};function ne(I,N,B,X,H){const K=N.objectMode?1:B.length;N.length+=K;const z=N.length<N.highWaterMark;return z||(N.needDrain=!0),N.writing||N.corked||N.errored||!N.constructed?(N.buffered.push({chunk:B,encoding:X,callback:H}),N.allBuffers&&X!=="buffer"&&(N.allBuffers=!1),N.allNoop&&H!==A&&(N.allNoop=!1)):(N.writelen=K,N.writecb=H,N.writing=!0,N.sync=!0,I._write(B,X,N.onwrite),N.sync=!1),z&&!N.errored&&!N.destroyed}function ie(I,N,B,X,H,K,z){N.writelen=X,N.writecb=z,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new T("write")):B?I._writev(H,N.onwrite):I._write(H,K,N.onwrite),N.sync=!1}function fe(I,N,B,X){--N.pendingcb,X(B),ve(N),w(I,B)}function J(I,N){const B=I._writableState,X=B.sync,H=B.writecb;if(typeof H!="function"){w(I,new m);return}B.writing=!1,B.writecb=null,B.length-=B.writelen,B.writelen=0,N?(N.stack,B.errored||(B.errored=N),I._readableState&&!I._readableState.errored&&(I._readableState.errored=N),X?a.nextTick(fe,I,B,N,H):fe(I,B,N,H)):(B.buffered.length>B.bufferedIndex&&te(I,B),X?B.afterWriteTickInfo!==null&&B.afterWriteTickInfo.cb===H?B.afterWriteTickInfo.count++:(B.afterWriteTickInfo={count:1,cb:H,stream:I,state:B},a.nextTick(_e,B.afterWriteTickInfo)):Fe(I,B,1,H))}function _e({stream:I,state:N,count:B,cb:X}){return N.afterWriteTickInfo=null,Fe(I,N,B,X)}function Fe(I,N,B,X){for(!N.ending&&!I.destroyed&&N.length===0&&N.needDrain&&(N.needDrain=!1,I.emit("drain"));B-- >0;)N.pendingcb--,X();N.destroyed&&ve(N),ge(I,N)}function ve(I){if(I.writing)return;for(let H=I.bufferedIndex;H<I.buffered.length;++H){var N;const{chunk:K,callback:z}=I.buffered[H],Z=I.objectMode?1:K.length;I.length-=Z,z((N=I.errored)!==null&&N!==void 0?N:new T("write"))}const B=I[E].splice(0);for(let H=0;H<B.length;H++){var X;B[H]((X=I.errored)!==null&&X!==void 0?X:new T("end"))}V(I)}function te(I,N){if(N.corked||N.bufferProcessing||N.destroyed||!N.constructed)return;const{buffered:B,bufferedIndex:X,objectMode:H}=N,K=B.length-X;if(!K)return;let z=X;if(N.bufferProcessing=!0,K>1&&I._writev){N.pendingcb-=K-1;const Z=N.allNoop?A:le=>{for(let De=z;De<B.length;++De)B[De].callback(le)},de=N.allNoop&&z===0?B:t(B,z);de.allBuffers=N.allBuffers,ie(I,N,!0,N.length,de,"",Z),V(N)}else{do{const{chunk:Z,encoding:de,callback:le}=B[z];B[z++]=null;const De=H?1:Z.length;ie(I,N,!1,De,Z,de,le)}while(z<B.length&&!N.writing);z===B.length?V(N):z>256?(B.splice(0,z),N.bufferedIndex=0):N.bufferedIndex=z}N.bufferProcessing=!1}$.prototype._write=function(I,N,B){if(this._writev)this._writev([{chunk:I,encoding:N}],B);else throw new g("_write()")},$.prototype._writev=null,$.prototype.end=function(I,N,B){const X=this._writableState;typeof I=="function"?(B=I,I=null,N=null):typeof N=="function"&&(B=N,N=null);let H;if(I!=null){const K=Q(this,I,N);K instanceof u&&(H=K)}return X.corked&&(X.corked=1,this.uncork()),H||(!X.errored&&!X.ending?(X.ending=!0,ge(this,X,!0),X.ended=!0):X.finished?H=new S("end"):X.destroyed&&(H=new T("end"))),typeof B=="function"&&(H||X.finished?a.nextTick(B,H):X[E].push(B)),this};function Le(I){return I.ending&&!I.destroyed&&I.constructed&&I.length===0&&!I.errored&&I.buffered.length===0&&!I.finished&&!I.writing&&!I.errorEmitted&&!I.closeEmitted}function Ce(I,N){let B=!1;function X(H){if(B){w(I,H??m());return}if(B=!0,N.pendingcb--,H){const K=N[E].splice(0);for(let z=0;z<K.length;z++)K[z](H);w(I,H,N.sync)}else Le(N)&&(N.prefinished=!0,I.emit("prefinish"),N.pendingcb++,a.nextTick(we,I,N))}N.sync=!0,N.pendingcb++;try{I._final(X)}catch(H){X(H)}N.sync=!1}function Ve(I,N){!N.prefinished&&!N.finalCalled&&(typeof I._final=="function"&&!N.destroyed?(N.finalCalled=!0,Ce(I,N)):(N.prefinished=!0,I.emit("prefinish")))}function ge(I,N,B){Le(N)&&(Ve(I,N),N.pendingcb===0&&(B?(N.pendingcb++,a.nextTick((X,H)=>{Le(H)?we(X,H):H.pendingcb--},I,N)):Le(N)&&(N.pendingcb++,we(I,N))))}function we(I,N){N.pendingcb--,N.finished=!0;const B=N[E].splice(0);for(let X=0;X<B.length;X++)B[X]();if(I.emit("finish"),N.autoDestroy){const X=I._readableState;(!X||X.autoDestroy&&(X.endEmitted||X.readable===!1))&&I.destroy()}}e($.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(I){this._writableState&&(this._writableState.destroyed=I)}},writable:{__proto__:null,get(){const I=this._writableState;return!!I&&I.writable!==!1&&!I.destroyed&&!I.errored&&!I.ending&&!I.ended},set(I){this._writableState&&(this._writableState.writable=!!I)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const I=this._writableState;return I?!I.destroyed&&!I.ending&&I.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const G=h.destroy;$.prototype.destroy=function(I,N){const B=this._writableState;return!B.destroyed&&(B.bufferedIndex<B.buffered.length||B[E].length)&&a.nextTick(ve,B),G.call(this,I,N),this},$.prototype._undestroy=h.undestroy,$.prototype._destroy=function(I,N){N(I)},$.prototype[l.captureRejectionSymbol]=function(I){this.destroy(I)};let D;function j(){return D===void 0&&(D={}),D}return $.fromWeb=function(I,N){return j().newStreamWritableFromWritableStream(I,N)},$.toWeb=function(I){return j().newWritableStreamFromStreamWritable(I)},gN}var TN,R9;function ble(){if(R9)return TN;R9=1;const a=ma(),t=Ci(),{isReadable:u,isWritable:n,isIterable:r,isNodeStream:e,isReadableNodeStream:i,isWritableNodeStream:o,isDuplexNodeStream:c,isReadableStream:s,isWritableStream:l}=qi(),d=ga(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:p}}=tn(),{destroyer:b}=Th(),_=Bi(),y=nA(),g=vN(),{createDeferredPromise:m}=on(),v=I9(),T=globalThis.Blob||t.Blob,S=typeof T<"u"?function(R){return R instanceof T}:function(R){return!1},x=globalThis.AbortController||C1().AbortController,{FunctionPrototypeCall:L}=or();class O extends _{constructor(R){super(R),(R==null?void 0:R.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(R==null?void 0:R.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}TN=function E(R,V){if(c(R))return R;if(i(R))return A({readable:R});if(o(R))return A({writable:R});if(e(R))return A({writable:!1,readable:!1});if(s(R))return A({readable:y.fromWeb(R)});if(l(R))return A({writable:g.fromWeb(R)});if(typeof R=="function"){const{value:Q,write:ne,final:ie,destroy:fe}=w(R);if(r(Q))return v(O,Q,{objectMode:!0,write:ne,final:ie,destroy:fe});const J=Q==null?void 0:Q.then;if(typeof J=="function"){let _e;const Fe=L(J,Q,ve=>{if(ve!=null)throw new p("nully","body",ve)},ve=>{b(_e,ve)});return _e=new O({objectMode:!0,readable:!1,write:ne,final(ve){ie(async()=>{try{await Fe,a.nextTick(ve,null)}catch(te){a.nextTick(ve,te)}})},destroy:fe})}throw new p("Iterable, AsyncIterable or AsyncFunction",V,Q)}if(S(R))return E(R.arrayBuffer());if(r(R))return v(O,R,{objectMode:!0,writable:!1});if(s(R==null?void 0:R.readable)&&l(R==null?void 0:R.writable))return O.fromWeb(R);if(typeof(R==null?void 0:R.writable)=="object"||typeof(R==null?void 0:R.readable)=="object"){const Q=R!=null&&R.readable?i(R==null?void 0:R.readable)?R==null?void 0:R.readable:E(R.readable):void 0,ne=R!=null&&R.writable?o(R==null?void 0:R.writable)?R==null?void 0:R.writable:E(R.writable):void 0;return A({readable:Q,writable:ne})}const $=R==null?void 0:R.then;if(typeof $=="function"){let Q;return L($,R,ne=>{ne!=null&&Q.push(ne),Q.push(null)},ne=>{b(Q,ne)}),Q=new O({objectMode:!0,writable:!1,read(){}})}throw new h(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],R)};function w(E){let{promise:R,resolve:V}=m();const $=new x,Q=$.signal;return{value:E(async function*(){for(;;){const ie=R;R=null;const{chunk:fe,done:J,cb:_e}=await ie;if(a.nextTick(_e),J)return;if(Q.aborted)throw new f(void 0,{cause:Q.reason});({promise:R,resolve:V}=m()),yield fe}}(),{signal:Q}),write(ie,fe,J){const _e=V;V=null,_e({chunk:ie,done:!1,cb:J})},final(ie){const fe=V;V=null,fe({done:!0,cb:ie})},destroy(ie,fe){$.abort(),fe(ie)}}}function A(E){const R=E.readable&&typeof E.readable.read!="function"?y.wrap(E.readable):E.readable,V=E.writable;let $=!!u(R),Q=!!n(V),ne,ie,fe,J,_e;function Fe(ve){const te=J;J=null,te?te(ve):ve&&_e.destroy(ve)}return _e=new O({readableObjectMode:!!(R!=null&&R.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:$,writable:Q}),Q&&(d(V,ve=>{Q=!1,ve&&b(R,ve),Fe(ve)}),_e._write=function(ve,te,Le){V.write(ve,te)?Le():ne=Le},_e._final=function(ve){V.end(),ie=ve},V.on("drain",function(){if(ne){const ve=ne;ne=null,ve()}}),V.on("finish",function(){if(ie){const ve=ie;ie=null,ve()}})),$&&(d(R,ve=>{$=!1,ve&&b(R,ve),Fe(ve)}),R.on("readable",function(){if(fe){const ve=fe;fe=null,ve()}}),R.on("end",function(){_e.push(null)}),_e._read=function(){for(;;){const ve=R.read();if(ve===null){fe=_e._read;return}if(!_e.push(ve))return}}),_e._destroy=function(ve,te){!ve&&J!==null&&(ve=new f),fe=null,ne=null,ie=null,J===null?te(ve):(J=te,b(V,ve),b(R,ve))},_e}return TN}var wN,F9;function Bi(){if(F9)return wN;F9=1;const{ObjectDefineProperties:a,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:u,ObjectSetPrototypeOf:n}=or();wN=i;const r=nA(),e=vN();n(i.prototype,r.prototype),n(i,r);{const l=u(e.prototype);for(let d=0;d<l.length;d++){const f=l[d];i.prototype[f]||(i.prototype[f]=e.prototype[f])}}function i(l){if(!(this instanceof i))return new i(l);r.call(this,l),e.call(this,l),l?(this.allowHalfOpen=l.allowHalfOpen!==!1,l.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),l.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}a(i.prototype,{writable:{__proto__:null,...t(e.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(e.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(e.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(e.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(e.prototype,"writableLength")},writableFinished:{__proto__:null,...t(e.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(e.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(e.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(e.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(l){this._readableState&&this._writableState&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}});let o;function c(){return o===void 0&&(o={}),o}i.fromWeb=function(l,d){return c().newStreamDuplexFromReadableWritablePair(l,d)},i.toWeb=function(l){return c().newReadableWritablePairFromDuplex(l)};let s;return i.from=function(l){return s||(s=ble()),s(l,"body")},wN}var SN,D9;function P9(){if(D9)return SN;D9=1;const{ObjectSetPrototypeOf:a,Symbol:t}=or();SN=i;const{ERR_METHOD_NOT_IMPLEMENTED:u}=tn().codes,n=Bi(),{getHighWaterMark:r}=tA();a(i.prototype,n.prototype),a(i,n);const e=t("kCallback");function i(s){if(!(this instanceof i))return new i(s);const l=s?r(this,s,"readableHighWaterMark",!0):null;l===0&&(s={...s,highWaterMark:null,readableHighWaterMark:l,writableHighWaterMark:s.writableHighWaterMark||0}),n.call(this,s),this._readableState.sync=!1,this[e]=null,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",c)}function o(s){typeof this._flush=="function"&&!this.destroyed?this._flush((l,d)=>{if(l){s?s(l):this.destroy(l);return}d!=null&&this.push(d),this.push(null),s&&s()}):(this.push(null),s&&s())}function c(){this._final!==o&&o.call(this)}return i.prototype._final=o,i.prototype._transform=function(s,l,d){throw new u("_transform()")},i.prototype._write=function(s,l,d){const f=this._readableState,h=this._writableState,p=f.length;this._transform(s,l,(b,_)=>{if(b){d(b);return}_!=null&&this.push(_),h.ended||p===f.length||f.length<f.highWaterMark?d():this[e]=d})},i.prototype._read=function(){if(this[e]){const s=this[e];this[e]=null,s()}},SN}var ON,j9;function L9(){if(j9)return ON;j9=1;const{ObjectSetPrototypeOf:a}=or();ON=u;const t=P9();a(u.prototype,t.prototype),a(u,t);function u(n){if(!(this instanceof u))return new u(n);t.call(this,n)}return u.prototype._transform=function(n,r,e){e(null,n)},ON}var AN,M9;function EN(){if(M9)return AN;M9=1;const a=ma(),{ArrayIsArray:t,Promise:u,SymbolAsyncIterator:n,SymbolDispose:r}=or(),e=ga(),{once:i}=on(),o=Th(),c=Bi(),{aggregateTwoErrors:s,codes:{ERR_INVALID_ARG_TYPE:l,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:f,ERR_STREAM_DESTROYED:h,ERR_STREAM_PREMATURE_CLOSE:p},AbortError:b}=tn(),{validateFunction:_,validateAbortSignal:y}=q1(),{isIterable:g,isReadable:m,isReadableNodeStream:v,isNodeStream:T,isTransformStream:S,isWebStream:x,isReadableStream:L,isReadableFinished:O}=qi(),w=globalThis.AbortController||C1().AbortController;let A,E,R;function V(ve,te,Le){let Ce=!1;ve.on("close",()=>{Ce=!0});const Ve=e(ve,{readable:te,writable:Le},ge=>{Ce=!ge});return{destroy:ge=>{Ce||(Ce=!0,o.destroyer(ve,ge||new h("pipe")))},cleanup:Ve}}function $(ve){return _(ve[ve.length-1],"streams[stream.length - 1]"),ve.pop()}function Q(ve){if(g(ve))return ve;if(v(ve))return ne(ve);throw new l("val",["Readable","Iterable","AsyncIterable"],ve)}async function*ne(ve){E||(E=nA()),yield*E.prototype[n].call(ve)}async function ie(ve,te,Le,{end:Ce}){let Ve,ge=null;const we=j=>{if(j&&(Ve=j),ge){const I=ge;ge=null,I()}},G=()=>new u((j,I)=>{Ve?I(Ve):ge=()=>{Ve?I(Ve):j()}});te.on("drain",we);const D=e(te,{readable:!1},we);try{te.writableNeedDrain&&await G();for await(const j of ve)te.write(j)||await G();Ce&&(te.end(),await G()),Le()}catch(j){Le(Ve!==j?s(Ve,j):j)}finally{D(),te.off("drain",we)}}async function fe(ve,te,Le,{end:Ce}){S(te)&&(te=te.writable);const Ve=te.getWriter();try{for await(const ge of ve)await Ve.ready,Ve.write(ge).catch(()=>{});await Ve.ready,Ce&&await Ve.close(),Le()}catch(ge){try{await Ve.abort(ge),Le(ge)}catch(we){Le(we)}}}function J(...ve){return _e(ve,i($(ve)))}function _e(ve,te,Le){if(ve.length===1&&t(ve[0])&&(ve=ve[0]),ve.length<2)throw new f("streams");const Ce=new w,Ve=Ce.signal,ge=Le==null?void 0:Le.signal,we=[];y(ge,"options.signal");function G(){H(new b)}R=R||on().addAbortListener;let D;ge&&(D=R(ge,G));let j,I;const N=[];let B=0;function X(de){H(de,--B===0)}function H(de,le){var De;if(de&&(!j||j.code==="ERR_STREAM_PREMATURE_CLOSE")&&(j=de),!(!j&&!le)){for(;N.length;)N.shift()(j);(De=D)===null||De===void 0||De[r](),Ce.abort(),le&&(j||we.forEach(Qe=>Qe()),a.nextTick(te,j,I))}}let K;for(let de=0;de<ve.length;de++){const le=ve[de],De=de<ve.length-1,Qe=de>0,je=De||(Le==null?void 0:Le.end)!==!1,oe=de===ve.length-1;if(T(le)){let se=function(ye){ye&&ye.name!=="AbortError"&&ye.code!=="ERR_STREAM_PREMATURE_CLOSE"&&X(ye)};if(je){const{destroy:ye,cleanup:Ie}=V(le,De,Qe);N.push(ye),m(le)&&oe&&we.push(Ie)}le.on("error",se),m(le)&&oe&&we.push(()=>{le.removeListener("error",se)})}if(de===0)if(typeof le=="function"){if(K=le({signal:Ve}),!g(K))throw new d("Iterable, AsyncIterable or Stream","source",K)}else g(le)||v(le)||S(le)?K=le:K=c.from(le);else if(typeof le=="function"){if(S(K)){var z;K=Q((z=K)===null||z===void 0?void 0:z.readable)}else K=Q(K);if(K=le(K,{signal:Ve}),De){if(!g(K,!0))throw new d("AsyncIterable",`transform[${de-1}]`,K)}else{var Z;A||(A=L9());const se=new A({objectMode:!0}),ye=(Z=K)===null||Z===void 0?void 0:Z.then;if(typeof ye=="function")B++,ye.call(K,F=>{I=F,F!=null&&se.write(F),je&&se.end(),a.nextTick(X)},F=>{se.destroy(F),a.nextTick(X,F)});else if(g(K,!0))B++,ie(K,se,X,{end:je});else if(L(K)||S(K)){const F=K.readable||K;B++,ie(F,se,X,{end:je})}else throw new d("AsyncIterable or Promise","destination",K);K=se;const{destroy:Ie,cleanup:U}=V(K,!1,!0);N.push(Ie),oe&&we.push(U)}}else if(T(le)){if(v(K)){B+=2;const se=Fe(K,le,X,{end:je});m(le)&&oe&&we.push(se)}else if(S(K)||L(K)){const se=K.readable||K;B++,ie(se,le,X,{end:je})}else if(g(K))B++,ie(K,le,X,{end:je});else throw new l("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],K);K=le}else if(x(le)){if(v(K))B++,fe(Q(K),le,X,{end:je});else if(L(K)||g(K))B++,fe(K,le,X,{end:je});else if(S(K))B++,fe(K.readable,le,X,{end:je});else throw new l("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],K);K=le}else K=c.from(le)}return(Ve!=null&&Ve.aborted||ge!=null&&ge.aborted)&&a.nextTick(G),K}function Fe(ve,te,Le,{end:Ce}){let Ve=!1;if(te.on("close",()=>{Ve||Le(new p)}),ve.pipe(te,{end:!1}),Ce){let ge=function(){Ve=!0,te.end()};O(ve)?a.nextTick(ge):ve.once("end",ge)}else Le();return e(ve,{readable:!0,writable:!1},ge=>{const we=ve._readableState;ge&&ge.code==="ERR_STREAM_PREMATURE_CLOSE"&&we&&we.ended&&!we.errored&&!we.errorEmitted?ve.once("end",Le).once("error",Le):Le(ge)}),e(te,{readable:!1,writable:!0},Le)}return AN={pipelineImpl:_e,pipeline:J},AN}var IN,C9;function q9(){if(C9)return IN;C9=1;const{pipeline:a}=EN(),t=Bi(),{destroyer:u}=Th(),{isNodeStream:n,isReadable:r,isWritable:e,isWebStream:i,isTransformStream:o,isWritableStream:c,isReadableStream:s}=qi(),{AbortError:l,codes:{ERR_INVALID_ARG_VALUE:d,ERR_MISSING_ARGS:f}}=tn(),h=ga();return IN=function(...b){if(b.length===0)throw new f("streams");if(b.length===1)return t.from(b[0]);const _=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const A=b.length-1;b[A]=t.from(b[A])}for(let A=0;A<b.length;++A)if(!(!n(b[A])&&!i(b[A]))){if(A<b.length-1&&!(r(b[A])||s(b[A])||o(b[A])))throw new d(`streams[${A}]`,_[A],"must be readable");if(A>0&&!(e(b[A])||c(b[A])||o(b[A])))throw new d(`streams[${A}]`,_[A],"must be writable")}let y,g,m,v,T;function S(A){const E=v;v=null,E?E(A):A?T.destroy(A):!w&&!O&&T.destroy()}const x=b[0],L=a(b,S),O=!!(e(x)||c(x)||o(x)),w=!!(r(L)||s(L)||o(L));if(T=new t({writableObjectMode:!!(x!=null&&x.writableObjectMode),readableObjectMode:!!(L!=null&&L.readableObjectMode),writable:O,readable:w}),O){if(n(x))T._write=function(E,R,V){x.write(E,R)?V():y=V},T._final=function(E){x.end(),g=E},x.on("drain",function(){if(y){const E=y;y=null,E()}});else if(i(x)){const R=(o(x)?x.writable:x).getWriter();T._write=async function(V,$,Q){try{await R.ready,R.write(V).catch(()=>{}),Q()}catch(ne){Q(ne)}},T._final=async function(V){try{await R.ready,R.close().catch(()=>{}),g=V}catch($){V($)}}}const A=o(L)?L.readable:L;h(A,()=>{if(g){const E=g;g=null,E()}})}if(w){if(n(L))L.on("readable",function(){if(m){const A=m;m=null,A()}}),L.on("end",function(){T.push(null)}),T._read=function(){for(;;){const A=L.read();if(A===null){m=T._read;return}if(!T.push(A))return}};else if(i(L)){const E=(o(L)?L.readable:L).getReader();T._read=async function(){for(;;)try{const{value:R,done:V}=await E.read();if(!T.push(R))return;if(V){T.push(null);return}}catch{return}}}}return T._destroy=function(A,E){!A&&v!==null&&(A=new l),m=null,y=null,g=null,v===null?E(A):(v=E,n(L)&&u(L,A))},T},IN}var B9;function mle(){if(B9)return YO;B9=1;const a=globalThis.AbortController||C1().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:u,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:r},AbortError:e}=tn(),{validateAbortSignal:i,validateInteger:o,validateObject:c}=q1(),s=or().Symbol("kWeak"),l=or().Symbol("kResistStopPropagation"),{finished:d}=ga(),f=q9(),{addAbortSignalNoValidate:h}=eA(),{isWritable:p,isNodeStream:b}=qi(),{deprecate:_}=on(),{ArrayPrototypePush:y,Boolean:g,MathFloor:m,Number:v,NumberIsNaN:T,Promise:S,PromiseReject:x,PromiseResolve:L,PromisePrototypeThen:O,Symbol:w}=or(),A=w("kEmpty"),E=w("kEof");function R(ge,we){if(we!=null&&c(we,"options"),(we==null?void 0:we.signal)!=null&&i(we.signal,"options.signal"),b(ge)&&!p(ge))throw new t("stream",ge,"must be writable");const G=f(this,ge);return we!=null&&we.signal&&h(we.signal,G),G}function V(ge,we){if(typeof ge!="function")throw new u("fn",["Function","AsyncFunction"],ge);we!=null&&c(we,"options"),(we==null?void 0:we.signal)!=null&&i(we.signal,"options.signal");let G=1;(we==null?void 0:we.concurrency)!=null&&(G=m(we.concurrency));let D=G-1;return(we==null?void 0:we.highWaterMark)!=null&&(D=m(we.highWaterMark)),o(G,"options.concurrency",1),o(D,"options.highWaterMark",0),D+=G,(async function*(){const I=on().AbortSignalAny([we==null?void 0:we.signal].filter(g)),N=this,B=[],X={signal:I};let H,K,z=!1,Z=0;function de(){z=!0,le()}function le(){Z-=1,De()}function De(){K&&!z&&Z<G&&B.length<D&&(K(),K=null)}async function Qe(){try{for await(let je of N){if(z)return;if(I.aborted)throw new e;try{if(je=ge(je,X),je===A)continue;je=L(je)}catch(oe){je=x(oe)}Z+=1,O(je,le,de),B.push(je),H&&(H(),H=null),!z&&(B.length>=D||Z>=G)&&await new S(oe=>{K=oe})}B.push(E)}catch(je){const oe=x(je);O(oe,le,de),B.push(oe)}finally{z=!0,H&&(H(),H=null)}}Qe();try{for(;;){for(;B.length>0;){const je=await B[0];if(je===E)return;if(I.aborted)throw new e;je!==A&&(yield je),B.shift(),De()}await new S(je=>{H=je})}}finally{z=!0,K&&(K(),K=null)}}).call(this)}function $(ge=void 0){return ge!=null&&c(ge,"options"),(ge==null?void 0:ge.signal)!=null&&i(ge.signal,"options.signal"),(async function*(){let G=0;for await(const j of this){var D;if(ge!=null&&(D=ge.signal)!==null&&D!==void 0&&D.aborted)throw new e({cause:ge.signal.reason});yield[G++,j]}}).call(this)}async function Q(ge,we=void 0){for await(const G of J.call(this,ge,we))return!0;return!1}async function ne(ge,we=void 0){if(typeof ge!="function")throw new u("fn",["Function","AsyncFunction"],ge);return!await Q.call(this,async(...G)=>!await ge(...G),we)}async function ie(ge,we){for await(const G of J.call(this,ge,we))return G}async function fe(ge,we){if(typeof ge!="function")throw new u("fn",["Function","AsyncFunction"],ge);async function G(D,j){return await ge(D,j),A}for await(const D of V.call(this,G,we));}function J(ge,we){if(typeof ge!="function")throw new u("fn",["Function","AsyncFunction"],ge);async function G(D,j){return await ge(D,j)?D:A}return V.call(this,G,we)}class _e extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Fe(ge,we,G){var D;if(typeof ge!="function")throw new u("reducer",["Function","AsyncFunction"],ge);G!=null&&c(G,"options"),(G==null?void 0:G.signal)!=null&&i(G.signal,"options.signal");let j=arguments.length>1;if(G!=null&&(D=G.signal)!==null&&D!==void 0&&D.aborted){const H=new e(void 0,{cause:G.signal.reason});throw this.once("error",()=>{}),await d(this.destroy(H)),H}const I=new a,N=I.signal;if(G!=null&&G.signal){const H={once:!0,[s]:this,[l]:!0};G.signal.addEventListener("abort",()=>I.abort(),H)}let B=!1;try{for await(const H of this){var X;if(B=!0,G!=null&&(X=G.signal)!==null&&X!==void 0&&X.aborted)throw new e;j?we=await ge(we,H,{signal:N}):(we=H,j=!0)}if(!B&&!j)throw new _e}finally{I.abort()}return we}async function ve(ge){ge!=null&&c(ge,"options"),(ge==null?void 0:ge.signal)!=null&&i(ge.signal,"options.signal");const we=[];for await(const D of this){var G;if(ge!=null&&(G=ge.signal)!==null&&G!==void 0&&G.aborted)throw new e(void 0,{cause:ge.signal.reason});y(we,D)}return we}function te(ge,we){const G=V.call(this,ge,we);return(async function*(){for await(const j of G)yield*j}).call(this)}function Le(ge){if(ge=v(ge),T(ge))return 0;if(ge<0)throw new r("number",">= 0",ge);return ge}function Ce(ge,we=void 0){return we!=null&&c(we,"options"),(we==null?void 0:we.signal)!=null&&i(we.signal,"options.signal"),ge=Le(ge),(async function*(){var D;if(we!=null&&(D=we.signal)!==null&&D!==void 0&&D.aborted)throw new e;for await(const I of this){var j;if(we!=null&&(j=we.signal)!==null&&j!==void 0&&j.aborted)throw new e;ge--<=0&&(yield I)}}).call(this)}function Ve(ge,we=void 0){return we!=null&&c(we,"options"),(we==null?void 0:we.signal)!=null&&i(we.signal,"options.signal"),ge=Le(ge),(async function*(){var D;if(we!=null&&(D=we.signal)!==null&&D!==void 0&&D.aborted)throw new e;for await(const I of this){var j;if(we!=null&&(j=we.signal)!==null&&j!==void 0&&j.aborted)throw new e;if(ge-- >0&&(yield I),ge<=0)return}}).call(this)}return YO.streamReturningOperators={asIndexedPairs:_($,"readable.asIndexedPairs will be removed in a future version."),drop:Ce,filter:J,flatMap:te,map:V,take:Ve,compose:R},YO.promiseReturningOperators={every:ne,forEach:fe,reduce:Fe,toArray:ve,some:Q,find:ie},YO}var xN,$9;function V9(){if($9)return xN;$9=1;const{ArrayPrototypePop:a,Promise:t}=or(),{isIterable:u,isNodeStream:n,isWebStream:r}=qi(),{pipelineImpl:e}=EN(),{finished:i}=ga();Q9();function o(...c){return new t((s,l)=>{let d,f;const h=c[c.length-1];if(h&&typeof h=="object"&&!n(h)&&!u(h)&&!r(h)){const p=a(c);d=p.signal,f=p.end}e(c,(p,b)=>{p?l(p):s(b)},{signal:d,end:f})})}return xN={finished:i,pipeline:o},xN}var U9;function Q9(){if(U9)return rN.exports;U9=1;const{Buffer:a}=Ci(),{ObjectDefineProperty:t,ObjectKeys:u,ReflectApply:n}=or(),{promisify:{custom:r}}=on(),{streamReturningOperators:e,promiseReturningOperators:i}=mle(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=tn(),c=q9(),{setDefaultHighWaterMark:s,getDefaultHighWaterMark:l}=tA(),{pipeline:d}=EN(),{destroyer:f}=Th(),h=ga(),p=V9(),b=qi(),_=rN.exports=fN().Stream;_.isDestroyed=b.isDestroyed,_.isDisturbed=b.isDisturbed,_.isErrored=b.isErrored,_.isReadable=b.isReadable,_.isWritable=b.isWritable,_.Readable=nA();for(const g of u(e)){let v=function(...T){if(new.target)throw o();return _.Readable.from(n(m,this,T))};const m=e[g];t(v,"name",{__proto__:null,value:m.name}),t(v,"length",{__proto__:null,value:m.length}),t(_.Readable.prototype,g,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(const g of u(i)){let v=function(...T){if(new.target)throw o();return n(m,this,T)};const m=i[g];t(v,"name",{__proto__:null,value:m.name}),t(v,"length",{__proto__:null,value:m.length}),t(_.Readable.prototype,g,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}_.Writable=vN(),_.Duplex=Bi(),_.Transform=P9(),_.PassThrough=L9(),_.pipeline=d;const{addAbortSignal:y}=eA();return _.addAbortSignal=y,_.finished=h,_.destroy=f,_.compose=c,_.setDefaultHighWaterMark=s,_.getDefaultHighWaterMark=l,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return p}}),t(d,r,{__proto__:null,enumerable:!0,get(){return p.pipeline}}),t(h,r,{__proto__:null,enumerable:!0,get(){return p.finished}}),_.Stream=_,_._isUint8Array=function(m){return m instanceof Uint8Array},_._uint8ArrayToBuffer=function(m){return a.from(m.buffer,m.byteOffset,m.byteLength)},rN.exports}var H9;function Mt(){return H9||(H9=1,function(a){const t=Q9(),u=V9(),n=t.Readable.destroy;a.exports=t.Readable,a.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,a.exports._isUint8Array=t._isUint8Array,a.exports.isDisturbed=t.isDisturbed,a.exports.isErrored=t.isErrored,a.exports.isReadable=t.isReadable,a.exports.Readable=t.Readable,a.exports.Writable=t.Writable,a.exports.Duplex=t.Duplex,a.exports.Transform=t.Transform,a.exports.PassThrough=t.PassThrough,a.exports.addAbortSignal=t.addAbortSignal,a.exports.finished=t.finished,a.exports.destroy=t.destroy,a.exports.destroy=n,a.exports.pipeline=t.pipeline,a.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return u}}),a.exports.Stream=t.Stream,a.exports.default=a.exports}(tN)),tN.exports}var G9;function _le(){if(G9)return F1;G9=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.ActorQueryResultSerializeJson=void 0;const a=Si(),t=Te(),u=gt(),n=ir(),r=Mt();let e=class extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}async testHandleChecked(o,c){return["bindings","quads","boolean"].includes(o.type)?(0,t.passTestVoid)():(0,t.failTest)("This actor can only handle bindings or quad streams.")}async runHandle(o,c,s){const l=new r.Readable;if(l._read=()=>{},o.type==="bindings"||o.type==="quads"){let d=o.type==="bindings"?(0,u.wrap)(o.bindingsStream).map(h=>JSON.stringify(Object.fromEntries([...h].map(([p,b])=>[p.value,n.termToString(b)])))):(0,u.wrap)(o.quadStream).map(h=>JSON.stringify(n.quadToStringQuad(h))),f=!0;d=d.map(h=>{const p=`${f?"":","}
${h}`;return f=!1,p}).prepend(["["]).append([`
]
`]),l.wrap(d)}else try{l.push(`${JSON.stringify(await o.execute())}
`),l.push(null)}catch(d){setTimeout(()=>l.emit("error",d))}return{data:l}}};return F1.ActorQueryResultSerializeJson=e,F1}var z9;function gle(){return z9||(z9=1,function(a){var t=Zu&&Zu.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Zu&&Zu.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(_le(),a)}(Zu)),Zu}var ro={},B1={},k9;function vle(){if(k9)return B1;k9=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.ActorQueryResultSerializeSimple=void 0;const a=Si(),t=Te(),u=gt(),n=ir(),r=Mt();let e=class ip extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}async testHandleChecked(o,c){return["bindings","quads","boolean","void"].includes(o.type)?(0,t.passTestVoid)():(0,t.failTest)("This actor can only handle bindings streams, quad streams, booleans, or updates.")}static termToString(o){return o.termType==="Quad"?(0,n.termToString)(o):o.value}async runHandle(o,c,s){const l=new r.Readable;return o.type==="bindings"?l.wrap(o.bindingsStream.map(d=>`${[...d].map(([f,h])=>`?${f.value}: ${ip.termToString(h)}`).join(`
`)}

`)):o.type==="quads"?l.wrap(o.quadStream.map(d=>`subject: ${ip.termToString(d.subject)}
predicate: ${ip.termToString(d.predicate)}
object: ${ip.termToString(d.object)}
graph: ${ip.termToString(d.graph)}

`)):l.wrap((0,u.wrap)(o.type==="boolean"?o.execute().then(d=>[`${d}
`]):o.execute().then(()=>[`ok
`]))),{data:l}}};return B1.ActorQueryResultSerializeSimple=e,B1}var X9;function Tle(){return X9||(X9=1,function(a){var t=ro&&ro.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ro&&ro.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(vle(),a)}(ro)),ro}var no={},$1={},J9;function wle(){if(J9)return $1;J9=1,Object.defineProperty($1,"__esModule",{value:!0}),$1.ActorQueryResultSerializeSparqlCsv=void 0;const a=Si(),t=Te(),u=Mt();let n=class iO extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToCsvBindings(e){if(!e)return"";let i=e.value;if(e.termType==="Literal")i=`${i}`;else if(e.termType==="BlankNode")i=`_:${i}`;else if(e.termType==="Quad"){let o=iO.bindingToCsvBindings(e.object);e.object.termType==="Literal"&&(o=`"${o.replaceAll('"','""')}"`),i=`<< ${iO.bindingToCsvBindings(e.subject)} ${iO.bindingToCsvBindings(e.predicate)} ${o} >>`}else i=`<${i}>`;return/[",\n\r]/u.test(i)&&(i=`"${i.replaceAll('"','""')}"`),i}async testHandleChecked(e,i){return e.type!=="bindings"?(0,t.failTest)("This actor can only handle bindings streams."):(0,t.passTestVoid)()}async runHandle(e,i,o){const c=e,s=new u.Readable,l=await c.metadata();return s.push(`${l.variables.map(d=>d.variable.value).join(",")}\r
`),s.wrap(c.bindingsStream.map(d=>`${l.variables.map(f=>iO.bindingToCsvBindings(d.get(f.variable))).join(",")}\r
`)),{data:s}}};return $1.ActorQueryResultSerializeSparqlCsv=n,$1}var K9;function Sle(){return K9||(K9=1,function(a){var t=no&&no.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=no&&no.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(wle(),a)}(no)),no}var io={},V1={},NN={},Dr={},ao={},U1={},W9;function Y9(){if(W9)return U1;W9=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return U1.BlankNode=a,U1}var Q1={},H1={},Z9;function eC(){if(Z9)return H1;Z9=1,Object.defineProperty(H1,"__esModule",{value:!0}),H1.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return H1.DefaultGraph=a,a.INSTANCE=new a,H1}var G1={},z1={},tC;function RN(){if(tC)return z1;tC=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return z1.NamedNode=a,z1}var rC;function nC(){if(rC)return G1;rC=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.Literal=void 0;const a=RN();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return G1.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),G1}var k1={},iC;function aC(){if(iC)return k1;iC=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return k1.Quad=a,k1}var X1={},uC;function oC(){if(uC)return X1;uC=1,Object.defineProperty(X1,"__esModule",{value:!0}),X1.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return X1.Variable=a,X1}var sC;function Ole(){if(sC)return Q1;sC=1,Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.DataFactory=void 0;const a=Y9(),t=eC(),u=nC(),n=RN(),r=aC(),e=oC();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Q1.DataFactory=o,Q1}var cC;function Ale(){return cC||(cC=1,function(a){var t=ao&&ao.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ao&&ao.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Y9(),a),u(Ole(),a),u(eC(),a),u(nC(),a),u(RN(),a),u(aC(),a),u(oC(),a)}(ao)),ao}var lC;function Ele(){if(lC)return Dr;lC=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.stringQuadToQuad=Dr.quadToStringQuad=Dr.stringToTerm=Dr.getLiteralLanguage=Dr.getLiteralType=Dr.getLiteralValue=Dr.termToString=void 0;const a=Ale(),t=new a.DataFactory;function u(p){if(p)switch(p.termType){case"NamedNode":return`<${s(p.value)}>`;case"BlankNode":return`_:${p.value}`;case"Literal":{const b=p;return`"${l(b.value)}"${b.datatype&&b.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&b.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?`^^<${b.datatype.value}>`:""}${b.language?`@${b.language}`:""}`}case"Quad":return`<<${u(p.subject)} ${u(p.predicate)} ${u(p.object)}${p.graph.termType==="DefaultGraph"?"":` ${u(p.graph)}`}>>`;case"Variable":return`?${p.value}`;case"DefaultGraph":return p.value}}Dr.termToString=u;function n(p){const b=/^"([^]*)"((\^\^.*)|(@.*))?$/u.exec(p);if(!b)throw new Error(`${p} is not a literal`);return b[1].replace(/\\"/ug,'"')}Dr.getLiteralValue=n;function r(p){const b=/^"[^]*"(?:\^\^<([^"]+)>|(@)[^@"]+)?$/u.exec(p);if(!b)throw new Error(`${p} is not a literal`);return b[1]||(b[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}Dr.getLiteralType=r;function e(p){const b=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/u.exec(p);if(!b)throw new Error(`${p} is not a literal`);return b[1]?b[1].toLowerCase():""}Dr.getLiteralLanguage=e;function i(p,b){if(b=b||t,!p||p.length===0)return b.defaultGraph();switch(p[0]){case"_":return b.blankNode(p.slice(2));case"?":if(!b.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return b.variable(p.slice(1));case'"':{const _=e(p),y=b.namedNode(r(p));return b.literal(n(p),_||y)}case"<":default:if(p.startsWith("<<")&&p.endsWith(">>")){const _=p.slice(2,-2),y=[];let g=0,m=0;for(let v=0;v<_.length;v++){const T=_[v];if(T==="<"&&g++,T===">"){if(g===0)throw new Error(`Found closing tag without opening tag in ${p}`);g--}T===" "&&g===0&&(y.push(_.slice(m,v)),m=v+1)}if(g!==0)throw new Error(`Found opening tag without closing tag in ${p}`);if(y.push(_.slice(m,_.length)),y.length!==3&&y.length!==4)throw new Error(`Nested quad syntax error ${p}`);return b.quad(i(y[0]),i(y[1]),i(y[2]),y[3]?i(y[3]):void 0)}if(!p.startsWith("<")||!p.endsWith(">"))throw new Error(`Detected invalid iri for named node (must be wrapped in <>): ${p}`);return b.namedNode(p.slice(1,-1))}}Dr.stringToTerm=i;function o(p){return{subject:u(p.subject),predicate:u(p.predicate),object:u(p.object),graph:u(p.graph)}}Dr.quadToStringQuad=o;function c(p,b){return b=b||t,b.quad(i(p.subject,b),i(p.predicate,b),i(p.object,b),i(p.graph,b))}Dr.stringQuadToQuad=c;function s(p){return p.replace(d,h)}function l(p){return d.test(p)&&(p=p.replace(d,h)),p}const d=/["\\\t\n\r\b\f\u0000-\u0019]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=new Map([["\\","\\\\"],['"','\\"'],["	","\\t"],[`
`,"\\n"],["\r","\\r"],["\b","\\b"],["\f","\\f"]]);function h(p){const b=f.get(p);if(!b){if(p.length===1){const y=p.charCodeAt(0).toString(16);return`${"\\u0000".slice(0,-y.length)}${y}`}const _=((p.charCodeAt(0)-55296)*1024+p.charCodeAt(1)+9216).toString(16);return`${"\\U00000000".slice(0,-_.length)}${_}`}return b}return Dr}var dC;function J1(){return dC||(dC=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralLanguage=void 0;const t=Ele();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return t.termToString}})}(NN)),NN}var fC;function Ile(){if(fC)return V1;fC=1,Object.defineProperty(V1,"__esModule",{value:!0}),V1.ActorQueryResultSerializeSparqlTsv=void 0;const a=Si(),t=Te(),u=J1(),n=Mt();let r=class Yie extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(i){super(i)}static bindingToTsvBindings(i){return i?(0,u.termToString)(i).replaceAll("	","\\t").replaceAll(`
`,"\\n").replaceAll("\r","\\r"):""}async testHandleChecked(i,o){return i.type!=="bindings"?(0,t.failTest)("This actor can only handle bindings streams."):(0,t.passTestVoid)()}async runHandle(i,o,c){const s=i,l=new n.Readable,d=await s.metadata();return l.push(`${d.variables.map(f=>f.variable.value).join("	")}
`),l.wrap(s.bindingsStream.map(f=>`${d.variables.map(h=>Yie.bindingToTsvBindings(f.get(h.variable))).join("	")}
`)),{data:l}}};return V1.ActorQueryResultSerializeSparqlTsv=r,V1}var hC;function xle(){return hC||(hC=1,function(a){var t=io&&io.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=io&&io.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ile(),a)}(io)),io}var uo={},K1={},W1={},pC;function Nle(){if(pC)return W1;pC=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.XmlSerializer=void 0;let a=class{constructor(){this.stack=[]}open(u,n){const r=`${this.identation()+this.formatTag(u,n,"open")}
`;return this.stack.push(u),r}close(){const u=this.stack.pop();if(u===void 0)throw new Error("There is no tag left to close");return`${this.identation()+this.formatTag(u,{},"close")}
`}serializeNode(u){if(u.children===void 0)return`${this.identation()+this.formatTag(u.name,u.attributes,"self-closing")}
`;if(typeof u.children=="string")return`${this.identation()+this.formatTag(u.name,u.attributes,"open")+this.escape(u.children)+this.formatTag(u.name,{},"close")}
`;const n=[];n.push(`${this.identation()+this.formatTag(u.name,u.attributes,"open")}
`),this.stack.push(u.name);for(const r of u.children)n.push(this.serializeNode(r));return this.stack.pop(),n.push(`${this.identation()+this.formatTag(u.name,{},"close")}
`),n.join("")}identation(){return this.stack.map(u=>"  ").join("")}formatTag(u,n,r){return`<${r==="close"?"/":""}${u}${Object.entries(n??{}).map(e=>` ${e[0]}="${this.escape(e[1])}"`)}${r==="self-closing"?"/":""}>`}escape(u){return u.replaceAll(/["&'<>]/gu,n=>{switch(n){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}})}};return W1.XmlSerializer=a,a.header=`<?xml version="1.0" encoding="UTF-8"?>
`,W1}var yC;function Rle(){if(yC)return K1;yC=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.ActorQueryResultSerializeSparqlXml=void 0;const a=Si(),t=Te(),u=gt(),n=Mt(),r=Nle();let e=class Zie extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}static bindingToXmlBindings(o,c){return{name:"binding",attributes:{name:c.value},children:[this.valueToXmlValue(o)]}}static valueToXmlValue(o){let c;switch(o.termType){case"Literal":return o.language?c={"xml:lang":o.language}:o.datatype&&o.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"?c={datatype:o.datatype.value}:c={},{name:"literal",attributes:c,children:o.value};case"BlankNode":return{name:"bnode",children:o.value};case"Quad":return{name:"triple",children:[{name:"subject",children:[this.valueToXmlValue(o.subject)]},{name:"predicate",children:[this.valueToXmlValue(o.predicate)]},{name:"object",children:[this.valueToXmlValue(o.object)]}]};default:return{name:"uri",children:o.value}}}async testHandleChecked(o,c){return["bindings","boolean"].includes(o.type)?(0,t.passTestVoid)():(0,t.failTest)("This actor can only handle bindings streams or booleans.")}async runHandle(o,c,s){const l=new n.Readable;l._read=()=>{};const d=new r.XmlSerializer,f=await o.metadata();if(l.push(r.XmlSerializer.header),l.push(d.open("sparql",{xmlns:"http://www.w3.org/2005/sparql-results#"})),l.push(d.serializeNode({name:"head",children:f.variables.map(h=>({name:"variable",attributes:{name:h.variable.value}}))})),o.type==="bindings"){function*h(){yield d.close(),yield d.close()}l.push(d.open("results"));const p=(0,u.wrap)(o.bindingsStream).map(b=>d.serializeNode({name:"result",children:[...b].map(([_,y])=>Zie.bindingToXmlBindings(y,_))})).append((0,u.wrap)(h()));l.wrap(p)}else try{const h=await o.execute();l.push(d.serializeNode({name:"boolean",children:h.toString()})),l.push(d.close()),setTimeout(()=>l.push(null))}catch(h){setTimeout(()=>l.emit("error",h))}return{data:l}}};return K1.ActorQueryResultSerializeSparqlXml=e,K1}var bC;function Fle(){return bC||(bC=1,function(a){var t=uo&&uo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=uo&&uo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Rle(),a)}(uo)),uo}var oo={},Y1={},mC;function Dle(){if(mC)return Y1;mC=1,Object.defineProperty(Y1,"__esModule",{value:!0}),Y1.ActorQueryResultSerializeTable=void 0;const a=Si(),t=ze(),u=Te(),n=ir(),r=Fn(),e=Mt();let i=class ND extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(c){super(c),this.padding=ND.repeat(" ",this.columnWidth)}static repeat(c,s){return c.repeat(s)}async testHandleChecked(c,s){return["bindings","quads"].includes(c.type)?(0,u.passTestVoid)():(0,u.failTest)("This actor can only handle bindings or quad streams.")}termToString(c){return c.termType==="Quad"?(0,n.termToString)(c):c.value}pad(c){return c.length<=this.columnWidth?c+this.padding.slice(c.length):`${c.slice(0,this.columnWidth-1)}`}pushHeader(c,s){const l=s.map(d=>this.pad(d.value)).join(" ");c.push(`${l}
${ND.repeat("-",l.length)}
`)}createRow(c,s){return`${c.map(l=>s.has(l)?this.termToString(s.get(l)):"").map(l=>this.pad(l)).join(" ")}
`}async runHandle(c,s,l){const d=new e.Readable;let f;if(c.type==="bindings"){f=c.bindingsStream.map(p=>this.createRow(h,p));const h=(await c.metadata()).variables.map(p=>p.variable);this.pushHeader(d,h)}else{f=c.quadStream.map(p=>`${(0,r.getTerms)(p).map(b=>this.pad(this.termToString(b))).join(" ")}
`);const h=c.context.getSafe(t.KeysInitQuery.dataFactory);this.pushHeader(d,r.QUAD_TERM_NAMES.map(p=>h.variable(p)))}return d.wrap(f),{data:d}}};return Y1.ActorQueryResultSerializeTable=i,Y1}var _C;function Ple(){return _C||(_C=1,function(a){var t=oo&&oo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=oo&&oo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Dle(),a)}(oo)),oo}var so={},Z1={},co={},eb={},lo={},fo={},tb={},gC;function vC(){if(gC)return tb;gC=1,Object.defineProperty(tb,"__esModule",{value:!0}),tb.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return tb.BlankNode=a,tb}var rb={},nb={},TC;function wC(){if(TC)return nb;TC=1,Object.defineProperty(nb,"__esModule",{value:!0}),nb.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return nb.DefaultGraph=a,a.INSTANCE=new a,nb}var ib={},ab={},SC;function FN(){if(SC)return ab;SC=1,Object.defineProperty(ab,"__esModule",{value:!0}),ab.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return ab.NamedNode=a,ab}var OC;function AC(){if(OC)return ib;OC=1,Object.defineProperty(ib,"__esModule",{value:!0}),ib.Literal=void 0;const a=FN();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return ib.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),ib}var ub={},EC;function IC(){if(EC)return ub;EC=1,Object.defineProperty(ub,"__esModule",{value:!0}),ub.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return ub.Quad=a,ub}var ob={},xC;function NC(){if(xC)return ob;xC=1,Object.defineProperty(ob,"__esModule",{value:!0}),ob.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return ob.Variable=a,ob}var RC;function jle(){if(RC)return rb;RC=1,Object.defineProperty(rb,"__esModule",{value:!0}),rb.DataFactory=void 0;const a=vC(),t=wC(),u=AC(),n=FN(),r=IC(),e=NC();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return rb.DataFactory=o,rb}var FC;function Lle(){return FC||(FC=1,function(a){var t=fo&&fo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=fo&&fo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(vC(),a),u(jle(),a),u(wC(),a),u(AC(),a),u(FN(),a),u(IC(),a),u(NC(),a)}(fo)),fo}var ho={},sb={},cb={},DC;function wh(){if(DC)return cb;DC=1,Object.defineProperty(cb,"__esModule",{value:!0}),cb.Translator=void 0;let a=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(u){throw new Error(`Invalid RDF ${u.datatype.value} value: '${u.value}'`)}registerHandler(u,n,r){for(const e of n)this.supportedRdfDatatypes.push(e),this.fromRdfHandlers[e.value]=u;for(const e of r){let i=this.toRdfHandlers[e];i||(this.toRdfHandlers[e]=i=[]),i.push(u)}}fromRdf(u,n){const r=this.fromRdfHandlers[u.datatype.value];return r?r.fromRdf(u,n):u.value}toRdf(u,n){const r=this.toRdfHandlers[typeof u];if(r)for(const e of r){const i=e.toRdf(u,n);if(i)return i}throw new Error(`Invalid JavaScript value: '${u}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}};return cb.Translator=a,cb}var PC;function Mle(){if(PC)return sb;PC=1,Object.defineProperty(sb,"__esModule",{value:!0}),sb.TypeHandlerBoolean=void 0;const a=wh();let t=class eae{fromRdf(n,r){switch(n.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return r&&a.Translator.incorrectRdfDataType(n),!1}toRdf(n,{datatype:r,dataFactory:e}){return e.literal(n?"true":"false",r||e.namedNode(eae.TYPE))}};return t.TYPE="http://www.w3.org/2001/XMLSchema#boolean",sb.TypeHandlerBoolean=t,sb}var lb={},jC;function Cle(){if(jC)return lb;jC=1,Object.defineProperty(lb,"__esModule",{value:!0}),lb.TypeHandlerDate=void 0;const a=wh();let t=class RD{fromRdf(n,r){switch(r&&!n.value.match(RD.VALIDATORS[n.datatype.value.substr(33,n.datatype.value.length)])&&a.Translator.incorrectRdfDataType(n),n.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(n.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const e=n.value.split("-");return new Date(0,parseInt(e[0],10)-1,parseInt(e[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(n.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(n.value+"-01");default:return new Date(n.value)}}toRdf(n,{datatype:r,dataFactory:e}){if(r=r||e.namedNode(RD.TYPES[0]),!(n instanceof Date))return null;const i=n;let o;switch(r.value){case"http://www.w3.org/2001/XMLSchema#gDay":o=String(i.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":o=i.getUTCMonth()+1+"-"+i.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":o=String(i.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":o=i.getUTCFullYear()+"-"+(i.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":o=i.toISOString().replace(/T.*$/,"");break;default:o=i.toISOString()}return e.literal(o,r)}};return t.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],t.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},lb.TypeHandlerDate=t,lb}var db={},LC;function qle(){if(LC)return db;LC=1,Object.defineProperty(db,"__esModule",{value:!0}),db.TypeHandlerNumberDouble=void 0;const a=wh();let t=class tae{fromRdf(n,r){const e=parseFloat(n.value);return r&&isNaN(e)&&a.Translator.incorrectRdfDataType(n),e}toRdf(n,{datatype:r,dataFactory:e}){return r=r||e.namedNode(tae.TYPES[0]),isNaN(n)?e.literal("NaN",r):isFinite(n)?n%1===0?null:e.literal(n.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),r):e.literal(n>0?"INF":"-INF",r)}};return t.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],db.TypeHandlerNumberDouble=t,db}var fb={},MC;function Ble(){if(MC)return fb;MC=1,Object.defineProperty(fb,"__esModule",{value:!0}),fb.TypeHandlerNumberInteger=void 0;const a=wh();let t=class aO{fromRdf(n,r){const e=parseInt(n.value,10);return r&&(isNaN(e)||n.value.indexOf(".")>=0)&&a.Translator.incorrectRdfDataType(n),e}toRdf(n,{datatype:r,dataFactory:e}){return e.literal(String(n),r||(n<=aO.MAX_INT&&n>=aO.MIN_INT?e.namedNode(aO.TYPES[0]):e.namedNode(aO.TYPES[1])))}};return t.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],t.MAX_INT=2147483647,t.MIN_INT=-2147483648,fb.TypeHandlerNumberInteger=t,fb}var hb={},CC;function $le(){if(CC)return hb;CC=1,Object.defineProperty(hb,"__esModule",{value:!0}),hb.TypeHandlerString=void 0;let a=class{fromRdf(u){return u.value}toRdf(u,{datatype:n,dataFactory:r}){return r.literal(u,n)}};return a.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],hb.TypeHandlerString=a,hb}var qC;function BC(){return qC||(qC=1,function(a){var t=ho&&ho.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ho&&ho.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Mle(),a),u(Cle(),a),u(qle(),a),u(Ble(),a),u($le(),a)}(ho)),ho}var DN={},$C;function Vle(){return $C||($C=1,Object.defineProperty(DN,"__esModule",{value:!0})),DN}var VC;function Ule(){return VC||(VC=1,function(a){var t=lo&&lo.__createBinding||(Object.create?function(h,p,b,_){_===void 0&&(_=b);var y=Object.getOwnPropertyDescriptor(p,b);(!y||("get"in y?!p.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return p[b]}}),Object.defineProperty(h,_,y)}:function(h,p,b,_){_===void 0&&(_=b),h[_]=p[b]}),u=lo&&lo.__exportStar||function(h,p){for(var b in h)b!=="default"&&!Object.prototype.hasOwnProperty.call(p,b)&&t(p,h,b)};Object.defineProperty(a,"__esModule",{value:!0}),a.getSupportedJavaScriptPrimitives=a.getSupportedRdfDatatypes=a.getTermRaw=a.toRdf=a.fromRdf=void 0;const n=Lle(),r=BC(),e=wh();u(BC(),a),u(Vle(),a),u(wh(),a);const i=new n.DataFactory,o=new e.Translator;o.registerHandler(new r.TypeHandlerString,r.TypeHandlerString.TYPES.map(h=>i.namedNode(h)),["string"]),o.registerHandler(new r.TypeHandlerBoolean,[r.TypeHandlerBoolean.TYPE].map(h=>i.namedNode(h)),["boolean"]),o.registerHandler(new r.TypeHandlerNumberDouble,r.TypeHandlerNumberDouble.TYPES.map(h=>i.namedNode(h)),["number"]),o.registerHandler(new r.TypeHandlerNumberInteger,r.TypeHandlerNumberInteger.TYPES.map(h=>i.namedNode(h)),["number"]),o.registerHandler(new r.TypeHandlerDate,r.TypeHandlerDate.TYPES.map(h=>i.namedNode(h)),["object"]);function c(h,p){return o.fromRdf(h,p)}a.fromRdf=c;function s(h,p){return p&&"namedNode"in p&&(p={dataFactory:p}),p=p||{},p&&!p.dataFactory&&(p.dataFactory=i),o.toRdf(h,p)}a.toRdf=s;function l(h,p){return h.termType==="Literal"?c(h,p):h.value}a.getTermRaw=l;function d(){return o.getSupportedRdfDatatypes()}a.getSupportedRdfDatatypes=d;function f(){return o.getSupportedJavaScriptPrimitives()}a.getSupportedJavaScriptPrimitives=f}(lo)),lo}var po={},pb={},yo={},yb={},UC;function QC(){if(UC)return yb;UC=1,Object.defineProperty(yb,"__esModule",{value:!0}),yb.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return yb.BlankNode=a,yb}var bb={},mb={},HC;function GC(){if(HC)return mb;HC=1,Object.defineProperty(mb,"__esModule",{value:!0}),mb.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return mb.DefaultGraph=a,a.INSTANCE=new a,mb}var _b={},gb={},zC;function PN(){if(zC)return gb;zC=1,Object.defineProperty(gb,"__esModule",{value:!0}),gb.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return gb.NamedNode=a,gb}var kC;function XC(){if(kC)return _b;kC=1,Object.defineProperty(_b,"__esModule",{value:!0}),_b.Literal=void 0;const a=PN();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return _b.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),_b}var vb={},JC;function KC(){if(JC)return vb;JC=1,Object.defineProperty(vb,"__esModule",{value:!0}),vb.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return vb.Quad=a,vb}var Tb={},WC;function YC(){if(WC)return Tb;WC=1,Object.defineProperty(Tb,"__esModule",{value:!0}),Tb.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return Tb.Variable=a,Tb}var ZC;function Qle(){if(ZC)return bb;ZC=1,Object.defineProperty(bb,"__esModule",{value:!0}),bb.DataFactory=void 0;const a=QC(),t=GC(),u=XC(),n=PN(),r=KC(),e=YC();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return bb.DataFactory=o,bb}var eq;function Hle(){return eq||(eq=1,function(a){var t=yo&&yo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=yo&&yo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(QC(),a),u(Qle(),a),u(GC(),a),u(XC(),a),u(PN(),a),u(KC(),a),u(YC(),a)}(yo)),yo}var jN,tq;function rq(){if(tq)return jN;tq=1;var{Buffer:a}=Ci(),t={},u=t.LEFT_BRACE=1,n=t.RIGHT_BRACE=2,r=t.LEFT_BRACKET=3,e=t.RIGHT_BRACKET=4,i=t.COLON=5,o=t.COMMA=6,c=t.TRUE=7,s=t.FALSE=8,l=t.NULL=9,d=t.STRING=10,f=t.NUMBER=11,h=t.START=17,p=t.STOP=18,b=t.TRUE1=33,_=t.TRUE2=34,y=t.TRUE3=35,g=t.FALSE1=49,m=t.FALSE2=50,v=t.FALSE3=51,T=t.FALSE4=52,S=t.NULL1=65,x=t.NULL2=66,L=t.NULL3=67,O=t.NUMBER1=81,w=t.NUMBER3=83,A=t.STRING1=97,E=t.STRING2=98,R=t.STRING3=99,V=t.STRING4=100,$=t.STRING5=101,Q=t.STRING6=102,ne=t.VALUE=113,ie=t.KEY=114,fe=t.OBJECT=129,J=t.ARRAY=130,_e=92,Fe=47,ve=8,te=12,Le=10,Ce=13,Ve=9,ge=64*1024;function we(j){return a.alloc?a.alloc(j):new a(j)}function G(){this.tState=h,this.value=void 0,this.string=void 0,this.stringBuffer=we(ge),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=ne,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:we(2),3:we(3),4:we(4)},this.offset=-1}G.toknam=function(j){for(var I=Object.keys(t),N=0,B=I.length;N<B;N++){var X=I[N];if(t[X]===j)return X}return j&&"0x"+j.toString(16)};var D=G.prototype;return D.onError=function(j){throw j},D.charError=function(j,I){this.tState=p,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(j[I]))+" at position "+I+" in state "+G.toknam(this.tState)))},D.appendStringChar=function(j){this.stringBufferOffset>=ge&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=j},D.appendStringBuf=function(j,I,N){var B=j.length;typeof I=="number"&&(typeof N=="number"?N<0?B=j.length-I+N:B=N-I:B=j.length-I),B<0&&(B=0),this.stringBufferOffset+B>ge&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),j.copy(this.stringBuffer,this.stringBufferOffset,I,N),this.stringBufferOffset+=B},D.write=function(j){typeof j=="string"&&(j=new a(j));for(var I,N=0,B=j.length;N<B;N++)if(this.tState===h){if(I=j[N],this.offset++,I===123)this.onToken(u,"{");else if(I===125)this.onToken(n,"}");else if(I===91)this.onToken(r,"[");else if(I===93)this.onToken(e,"]");else if(I===58)this.onToken(i,":");else if(I===44)this.onToken(o,",");else if(I===116)this.tState=b;else if(I===102)this.tState=g;else if(I===110)this.tState=S;else if(I===34)this.string="",this.stringBufferOffset=0,this.tState=A;else if(I===45)this.string="-",this.tState=O;else if(I>=48&&I<64)this.string=String.fromCharCode(I),this.tState=w;else if(!(I===32||I===9||I===10||I===13))return this.charError(j,N)}else if(this.tState===A)if(I=j[N],this.bytes_remaining>0){for(var X=0;X<this.bytes_remaining;X++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+X]=j[X];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,N=N+X-1}else if(this.bytes_remaining===0&&I>=128){if(I<=193||I>244)return this.onError(new Error("Invalid UTF-8 character at position "+N+" in state "+G.toknam(this.tState)));if(I>=194&&I<=223&&(this.bytes_in_sequence=2),I>=224&&I<=239&&(this.bytes_in_sequence=3),I>=240&&I<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+N>j.length){for(var H=0;H<=j.length-1-N;H++)this.temp_buffs[this.bytes_in_sequence][H]=j[N+H];this.bytes_remaining=N+this.bytes_in_sequence-j.length,N=j.length-1}else this.appendStringBuf(j,N,N+this.bytes_in_sequence),N=N+this.bytes_in_sequence-1}else if(I===34)this.tState=h,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(d,this.string),this.offset+=a.byteLength(this.string,"utf8")+1,this.string=void 0;else if(I===92)this.tState=E;else if(I>=32)this.appendStringChar(I);else return this.charError(j,N);else if(this.tState===E)if(I=j[N],I===34)this.appendStringChar(I),this.tState=A;else if(I===92)this.appendStringChar(_e),this.tState=A;else if(I===47)this.appendStringChar(Fe),this.tState=A;else if(I===98)this.appendStringChar(ve),this.tState=A;else if(I===102)this.appendStringChar(te),this.tState=A;else if(I===110)this.appendStringChar(Le),this.tState=A;else if(I===114)this.appendStringChar(Ce),this.tState=A;else if(I===116)this.appendStringChar(Ve),this.tState=A;else if(I===117)this.unicode="",this.tState=R;else return this.charError(j,N);else if(this.tState===R||this.tState===V||this.tState===$||this.tState===Q)if(I=j[N],I>=48&&I<64||I>64&&I<=70||I>96&&I<=102){if(this.unicode+=String.fromCharCode(I),this.tState++===Q){var K=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&K>=56320&&K<57344?(this.appendStringBuf(new a(String.fromCharCode(this.highSurrogate,K))),this.highSurrogate=void 0):this.highSurrogate===void 0&&K>=55296&&K<56320?this.highSurrogate=K:(this.highSurrogate!==void 0&&(this.appendStringBuf(new a(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new a(String.fromCharCode(K)))),this.tState=A}}else return this.charError(j,N);else if(this.tState===O||this.tState===w)switch(I=j[N],I){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(I),this.tState=w;break;default:this.tState=h;var z=this.numberReviver(this.string,j,N);if(z)return z;this.offset+=this.string.length-1,this.string=void 0,N--;break}else if(this.tState===b)if(j[N]===114)this.tState=_;else return this.charError(j,N);else if(this.tState===_)if(j[N]===117)this.tState=y;else return this.charError(j,N);else if(this.tState===y)if(j[N]===101)this.tState=h,this.onToken(c,!0),this.offset+=3;else return this.charError(j,N);else if(this.tState===g)if(j[N]===97)this.tState=m;else return this.charError(j,N);else if(this.tState===m)if(j[N]===108)this.tState=v;else return this.charError(j,N);else if(this.tState===v)if(j[N]===115)this.tState=T;else return this.charError(j,N);else if(this.tState===T)if(j[N]===101)this.tState=h,this.onToken(s,!1),this.offset+=4;else return this.charError(j,N);else if(this.tState===S)if(j[N]===117)this.tState=x;else return this.charError(j,N);else if(this.tState===x)if(j[N]===108)this.tState=L;else return this.charError(j,N);else if(this.tState===L)if(j[N]===108)this.tState=h,this.onToken(l,null),this.offset+=3;else return this.charError(j,N)},D.onToken=function(j,I){},D.parseError=function(j,I){this.tState=p,this.onError(new Error("Unexpected "+G.toknam(j)+(I?"("+JSON.stringify(I)+")":"")+" in state "+G.toknam(this.state)))},D.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},D.pop=function(){var j=this.value,I=this.stack.pop();this.value=I.value,this.key=I.key,this.mode=I.mode,this.emit(j),this.mode||(this.state=ne)},D.emit=function(j){this.mode&&(this.state=o),this.onValue(j)},D.onValue=function(j){},D.onToken=function(j,I){if(this.state===ne)if(j===d||j===f||j===c||j===s||j===l)this.value&&(this.value[this.key]=I),this.emit(I);else if(j===u)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=ie,this.mode=fe;else if(j===r)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=J,this.state=ne;else if(j===n)if(this.mode===fe)this.pop();else return this.parseError(j,I);else if(j===e)if(this.mode===J)this.pop();else return this.parseError(j,I);else return this.parseError(j,I);else if(this.state===ie)if(j===d)this.key=I,this.state=i;else if(j===n)this.pop();else return this.parseError(j,I);else if(this.state===i)if(j===i)this.state=ne;else return this.parseError(j,I);else if(this.state===o)if(j===o)this.mode===J?(this.key++,this.state=ne):this.mode===fe&&(this.state=ie);else if(j===e&&this.mode===J||j===n&&this.mode===fe)this.pop();else return this.parseError(j,I);else return this.parseError(j,I)},D.numberReviver=function(j,I,N){var B=Number(j);if(isNaN(B))return this.charError(I,N);j.match(/[0-9]+/)==j&&B.toString()!=j?this.onToken(d,j):this.onToken(f,B)},G.C=t,jN=G,jN}var nq;function Gle(){if(nq)return pb;nq=1,Object.defineProperty(pb,"__esModule",{value:!0}),pb.SparqlJsonParser=void 0;const a=Hle(),t=Mt(),u=rq();let n=class{constructor(e){var i;e=e||{},this.dataFactory=e.dataFactory||new a.DataFactory,this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark,this.suppressMissingStreamResultsError=(i=e.suppressMissingStreamResultsError)!==null&&i!==void 0?i:!0}parseJsonResults(e){return e.results.bindings.map(i=>this.parseJsonBindings(i))}parseJsonResultsStream(e){const i=d=>l.emit("error",d);e.on("error",i);const o=new u;o.onError=i;let c=!1,s=!1;o.onValue=d=>{if(o.key==="vars"&&o.stack.length===2&&o.stack[1].key==="head")l.emit("variables",d.map(f=>this.dataFactory.variable(f))),c=!0;else if(o.key==="results"&&o.stack.length===1)s=!0;else if(typeof o.key=="number"&&o.stack.length===3&&o.stack[1].key==="results"&&o.stack[2].key==="bindings")try{l.push(this.parseJsonBindings(d))}catch(f){l.emit("error",f)}else o.key==="metadata"&&o.stack.length===1&&l.emit("metadata",d)};const l=e.on("end",d=>{!s&&!this.suppressMissingStreamResultsError?l.emit("error",new Error("No valid SPARQL query results were found.")):c||l.emit("variables",[])}).pipe(new t.Transform({objectMode:!0,transform(d,f,h){o.write(d),h()}}));return l}parseJsonBindings(e){const i={};for(const o in e){const c=e[o];i[this.prefixVariableQuestionMark?"?"+o:o]=this.parseJsonValue(c)}return i}parseJsonValue(e){let i;switch(e.type){case"bnode":i=this.dataFactory.blankNode(e.value);break;case"literal":e["xml:lang"]?i=this.dataFactory.literal(e.value,e["xml:lang"]):e.datatype?i=this.dataFactory.literal(e.value,this.dataFactory.namedNode(e.datatype)):i=this.dataFactory.literal(e.value);break;case"typed-literal":i=this.dataFactory.literal(e.value,this.dataFactory.namedNode(e.datatype));break;case"triple":const o=e.value;if(!o||!o.subject||!o.predicate||!o.object)throw new Error("Invalid quoted triple: "+JSON.stringify(e));i=this.dataFactory.quad(this.parseJsonValue(o.subject),this.parseJsonValue(o.predicate),this.parseJsonValue(o.object));break;default:i=this.dataFactory.namedNode(e.value);break}return i}parseJsonBoolean(e){if("boolean"in e)return e.boolean;throw new Error("No valid ASK response was found.")}parseJsonBooleanStream(e){return new Promise((i,o)=>{const c=new u;c.onError=o,c.onValue=s=>{c.key==="boolean"&&typeof s=="boolean"&&c.stack.length===1&&i(s)},e.on("error",o).on("data",s=>c.write(s)).on("end",()=>o(new Error("No valid ASK response was found.")))})}};return pb.SparqlJsonParser=n,pb}var iq;function aq(){return iq||(iq=1,function(a){var t=po&&po.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=po&&po.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Gle(),a)}(po)),po}var uq;function zle(){if(uq)return eb;uq=1,Object.defineProperty(eb,"__esModule",{value:!0}),eb.Converter=void 0;const a=Ule(),t=aq();let u=class aa{constructor(r){r=r||{delimiter:"_"},r.prefixVariableQuestionMark=!1,this.delimiter=r.delimiter||"_",this.parser=new t.SparqlJsonParser(r),this.materializeRdfJsTerms=r.materializeRdfJsTerms}static addValueToTree(r,e,i,o,c,s){const l=e[0],d=o?o+s+l:l,f=c.singularizeVariables[d];if(e.length===1)f?r[l]||(r[l]=i):(r[l]||(r[l]=[]),r[l].push(i));else{let h;f?(r[l]||(r[l]={}),h=r[l]):(r[l]||(r[l]=[{}]),h=r[l][0]),aa.addValueToTree(h,e.slice(1),i,d,c,s)}}static mergeTrees(r,e){if(typeof r!=typeof e)throw new Error(`Two incompatible tree nodes were found: ${typeof r} and ${typeof e}`);if(Array.isArray(r)!==Array.isArray(e))throw new Error(`Two incompatible tree nodes were found: Array?${Array.isArray(r)} and Array?${Array.isArray(e)}`);if(typeof r=="object"&&typeof e=="object"){if(r.termType&&e.termType)return r.equals(e)?{valid:!0,result:r}:{valid:!1,result:r};if(Array.isArray(r)&&Array.isArray(e)){if(r.length>0){const i=[];let o=!1;for(const c of r){const s=aa.mergeTrees(c,e[0]);s.valid?(o=!0,i.push(s.result)):i.push(c)}if(o)return{valid:!0,result:i}}return{valid:!0,result:r.concat(e)}}else{const i={};for(const o in e)i[o]=e[o];for(const o in r)if(i[o]){const c=aa.mergeTrees(r[o],i[o]);if(c.valid)i[o]=c.result;else return{valid:!1,result:r}}else i[o]=r[o];return{valid:!0,result:i}}}else throw new Error(`Unmergable tree types: ${typeof r} and ${typeof e}`)}static materializeTree(r){if(r.termType)return(0,a.getTermRaw)(r);if(Array.isArray(r))return r.map(aa.materializeTree);{const e={};for(const i in r)e[i]=aa.materializeTree(r[i]);return e}}sparqlJsonResultsToTree(r,e){return this.bindingsToTree(this.parser.parseJsonResults(r),e||{singularizeVariables:{}})}bindingsToTree(r,e){const i=e&&e.singularizeVariables[""];let o=i?{}:[];for(const c of r){const s=i?{}:[{}];for(const l in c){const d=l.split(this.delimiter),f=c[l];aa.addValueToTree(i?s:s[0],d,f,"",e,this.delimiter)}o=aa.mergeTrees(o,s).result}return this.materializeRdfJsTerms&&(o=aa.materializeTree(o)),o}};return eb.Converter=u,eb}var oq;function kle(){return oq||(oq=1,function(a){var t=co&&co.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=co&&co.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(zle(),a)}(co)),co}var sq;function cq(){if(sq)return Z1;sq=1,Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.ActorQueryResultSerializeTree=void 0;const a=Si(),t=ze(),u=Te(),n=Mt(),r=kle();let e=class rae extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}static async bindingsStreamToGraphQl(o,c,s){const l=u.ActionContext.ensureActionContext(c),d=new r.Converter(s),f={singularizeVariables:l.get(t.KeysInitQuery.graphqlSingularizeVariables)??{}};return d.bindingsToTree(await o.map(h=>Object.fromEntries([...h].map(([p,b])=>[p.value,b]))).toArray(),f)}async testHandleChecked(o){return o.type!=="bindings"?(0,u.failTest)("This actor can only handle bindings streams."):(0,u.passTestVoid)()}async runHandle(o,c){const s=new n.Readable;return s._read=()=>{s._read=()=>{},rae.bindingsStreamToGraphQl(o.bindingsStream,o.context,{materializeRdfJsTerms:!0}).then(l=>{s.push(JSON.stringify(l,null,"  ")),s.push(null)}).catch(l=>s.emit("error",l))},{data:s}}};return Z1.ActorQueryResultSerializeTree=e,Z1}var lq;function Xle(){return lq||(lq=1,function(a){var t=so&&so.__createBinding||(Object.create?function(e,i,o,c){c===void 0&&(c=o);var s=Object.getOwnPropertyDescriptor(i,o);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(e,c,s)}:function(e,i,o,c){c===void 0&&(c=o),e[c]=i[o]}),u=so&&so.__exportStar||function(e,i){for(var o in e)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,e,o)};Object.defineProperty(a,"__esModule",{value:!0}),a.bindingsStreamToGraphQl=void 0;const n=cq(),{bindingsStreamToGraphQl:r}=n.ActorQueryResultSerializeTree;a.bindingsStreamToGraphQl=r,u(cq(),a)}(so)),so}var bo={},wb={},dq;function Jle(){if(dq)return wb;dq=1,Object.defineProperty(wb,"__esModule",{value:!0}),wb.MediatorCombineUnion=void 0;const a=Te();let t=class extends a.Mediator{constructor(n){super(n),this.combiner=this.createCombiner()}async mediate(n){let r;try{r=this.publish(n)}catch{r=[]}if(this.filterFailures){const o=[];for(const c of r)(await c.reply).isPassed()&&o.push(c);r=o}const e=[];await Promise.all(r.map(async({reply:o},c)=>{const s=await o,l=s.getOrThrow();return e[c]=s.getSideData(),l}));const i=await Promise.all(r.map((o,c)=>o.actor.runObservable(n,e[c])));return this.combiner(i)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return n=>{const r={};return r[this.field]={},[{}].concat(n.map(e=>e[this.field])).forEach(e=>{r[this.field]={...e,...r[this.field]}}),r}}};return wb.MediatorCombineUnion=t,wb}var fq;function va(){return fq||(fq=1,function(a){var t=bo&&bo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=bo&&bo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Jle(),a)}(bo)),bo}var mo={},Sb={},hq;function Kle(){if(hq)return Sb;hq=1,Object.defineProperty(Sb,"__esModule",{value:!0}),Sb.MediatorNumber=void 0;const a=Te();let t=class extends a.Mediator{constructor(n){super(n),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return n=>n.reduce((r,e,i)=>{const o=this.getOrDefault(e[this.field],Number.POSITIVE_INFINITY);return o!==null&&(Number.isNaN(r[0])||r[0]>o)?[o,i]:r},[Number.NaN,-1])[1];case"max":return n=>n.reduce((r,e,i)=>{const o=this.getOrDefault(e[this.field],Number.NEGATIVE_INFINITY);return o!==null&&(Number.isNaN(r[0])||r[0]<o)?[o,i]:r},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(n,r){return n===void 0?r:n}async mediateWith(n,r){let e=await Promise.all(r.map(({reply:l})=>l));const i=[];if(this.ignoreFailures){const l={};l[this.field]=null,e=e.map(d=>d.isFailed()?(i.push(d.getFailMessage()),(0,a.passTestWithSideData)(l,void 0)):d)}const o=[],c=e.map((l,d)=>{const f=l.getOrThrow();return o[d]=l.getSideData(),f}),s=this.indexPicker(c);return s<0?(0,a.failTest)(this.constructFailureMessage(n,i)):(0,a.passTestWithSideData)(r[s].actor,o[s])}};return Sb.MediatorNumber=t,Sb}var pq;function Sh(){return pq||(pq=1,function(a){var t=mo&&mo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=mo&&mo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Kle(),a)}(mo)),mo}var _o={},Ob={},go={},Ab={},$i={},yq;function LN(){if(yq)return $i;yq=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.ActorDereferenceBase=$i.isHardError=$i.emptyReadable=void 0;const a=ze(),t=Te(),u=Mt();function n(){const i=new u.Readable;return i.push(null),i}$i.emptyReadable=n;function r(i){return!i.get(a.KeysInitQuery.lenient)}$i.isHardError=r;let e=class extends t.Actor{constructor(o){super(o)}async dereferenceErrorHandler(o,c,s){if(r(o.context))throw c;return this.logWarn(o.context,c.message,()=>({url:o.url})),{...s,data:n()}}};return $i.ActorDereferenceBase=e,$i}var bq;function Wle(){if(bq)return Ab;bq=1,Object.defineProperty(Ab,"__esModule",{value:!0}),Ab.ActorDereference=void 0;const a=LN();let t=class extends a.ActorDereferenceBase{constructor(n){super(n)}async handleDereferenceErrors(n,r,e,i=0){return this.dereferenceErrorHandler(n,r,{url:n.url,exists:!1,headers:e,requestTime:i})}};return Ab.ActorDereference=t,Ab}var vo={},mq;function Yle(){if(mq)return vo;mq=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.ActorDereferenceParse=vo.getMediaTypeFromExtension=void 0;const a=Te(),t=Mt(),u=LN();function n(e,i){const o=e.lastIndexOf(".");return o>=0&&(i==null?void 0:i[e.slice(o+1)])||""}vo.getMediaTypeFromExtension=n;let r=class extends u.ActorDereferenceBase{constructor(i){super(i)}async test(i){return(0,a.passTestVoid)()}handleDereferenceStreamErrors(i,o){return(0,u.isHardError)(i.context)||(o.on("error",c=>{this.logWarn(i.context,c.message,()=>({url:i.url})),o.push(null)}),o=o.pipe(new t.PassThrough({objectMode:!0}))),o}async run(i){var l,d,f,h;const{context:o}=i,c=await this.mediatorDereference.mediate({...i,mediaTypes:async()=>{var p,b;return(b=await((p=this.mediatorParseMediatypes)==null?void 0:p.mediate({context:o,mediaTypes:!0})))==null?void 0:b.mediaTypes}});let s;if(c.exists)try{s=(await this.mediatorParse.mediate({context:o,handle:{context:o,...c,metadata:await this.getMetadata(c)},handleMediaType:c.mediaType||i.mediaType||n(c.url,this.mediaMappings)})).handle,s.data=this.handleDereferenceStreamErrors(i,s.data)}catch(p){await((d=(l=c.data).close)==null?void 0:d.call(l)),s=await this.dereferenceErrorHandler(i,p,{})}else await((h=(f=c.data).close)==null?void 0:h.call(f)),s={data:(0,u.emptyReadable)()};return{...c,...s}}};return vo.ActorDereferenceParse=r,vo}var _q;function MN(){return _q||(_q=1,function(a){var t=go&&go.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=go&&go.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Wle(),a),u(Yle(),a),u(LN(),a)}(go)),go}var gq;function Zle(){if(gq)return Ob;gq=1,Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.ActorDereferenceFallback=void 0;const a=MN(),t=Te();let u=class extends a.ActorDereference{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){return this.handleDereferenceErrors(r,new Error(`Could not dereference '${r.url}'`))}};return Ob.ActorDereferenceFallback=u,Ob}var vq;function ede(){return vq||(vq=1,function(a){var t=_o&&_o.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=_o&&_o.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Zle(),a)}(_o)),_o}var To={},Eb={},wo={},Ib={},Tq;function tde(){if(Tq)return Ib;Tq=1,Object.defineProperty(Ib,"__esModule",{value:!0}),Ib.ActorRdfJoinEntriesSort=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return Ib.ActorRdfJoinEntriesSort=t,Ib}var wq;function Sq(){return wq||(wq=1,function(a){var t=wo&&wo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=wo&&wo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(tde(),a)}(wo)),wo}var Oq;function rde(){if(Oq)return Eb;Oq=1,Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.ActorRdfJoinEntriesSortCardinality=void 0;const a=Sq(),t=Te();let u=class extends a.ActorRdfJoinEntriesSort{constructor(r){super(r)}async test(r){return(0,t.passTest)({accuracy:r.entries.length===0?1:r.entries.reduce((e,i)=>e+(Number.isFinite(i.metadata.cardinality.value)?1:0),0)/r.entries.length})}async run(r){return{entries:[...r.entries].sort((i,o)=>i.metadata.cardinality.value-o.metadata.cardinality.value)}}};return Eb.ActorRdfJoinEntriesSortCardinality=u,Eb}var Aq;function nde(){return Aq||(Aq=1,function(a){var t=To&&To.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=To&&To.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(rde(),a)}(To)),To}var So={},Oo={},Ao={},xb={},Eq;function ide(){if(Eq)return xb;Eq=1,Object.defineProperty(xb,"__esModule",{value:!0}),xb.ActorRdfJoinSelectivity=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return xb.ActorRdfJoinSelectivity=t,xb}var Iq;function ade(){return Iq||(Iq=1,function(a){var t=Ao&&Ao.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ao&&Ao.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ide(),a)}(Ao)),Ao}var xq;function ude(){if(xq)return Oo;xq=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.JoinTypes=Oo.ActorRdfJoinSelectivityVariableCounting=void 0;const a=ade(),t=Te(),u=ht();let n=class Gf extends a.ActorRdfJoinSelectivity{constructor(i){super(i)}async test(i){return(0,t.passTest)({accuracy:.5})}static getPatternCost(i){let o=1;return i.subject.termType==="Variable"&&(o+=4),(i.predicate.termType==="Variable"||i.type===u.Algebra.types.PATH)&&(o+=1),i.object.termType==="Variable"&&(o+=2),i.graph.termType==="Variable"&&(o+=1),o/9}static getJoinTypes(i,o){const c=[];return i.subject.termType==="Variable"?(i.subject.equals(o.subject)&&c.push(r.unboundSS),o.type==="pattern"&&i.subject.equals(o.predicate)&&c.push(r.unboundSP),i.subject.equals(o.object)&&c.push(r.unboundSO),i.subject.equals(o.graph)&&c.push(r.unboundSG)):(i.subject.equals(o.subject)&&c.push(r.boundSS),o.type==="pattern"&&i.subject.equals(o.predicate)&&c.push(r.boundSP),i.subject.equals(o.object)&&c.push(r.boundSO),i.subject.equals(o.graph)&&c.push(r.boundSG)),i.type==="pattern"&&(i.predicate.termType==="Variable"?(i.predicate.equals(o.subject)&&c.push(r.unboundPS),o.type==="pattern"&&i.predicate.equals(o.predicate)&&c.push(r.unboundPP),i.predicate.equals(o.object)&&c.push(r.unboundPO),i.predicate.equals(o.graph)&&c.push(r.unboundPG)):(i.predicate.equals(o.subject)&&c.push(r.boundPS),o.type==="pattern"&&i.predicate.equals(o.predicate)&&c.push(r.boundPP),i.predicate.equals(o.object)&&c.push(r.boundPO),i.predicate.equals(o.graph)&&c.push(r.boundPG))),i.object.termType==="Variable"?(i.object.equals(o.subject)&&c.push(r.unboundOS),o.type==="pattern"&&i.object.equals(o.predicate)&&c.push(r.unboundOP),i.object.equals(o.object)&&c.push(r.unboundOO),i.object.equals(o.graph)&&c.push(r.unboundOG)):(i.object.equals(o.subject)&&c.push(r.boundOS),o.type==="pattern"&&i.object.equals(o.predicate)&&c.push(r.boundOP),i.object.equals(o.object)&&c.push(r.boundOO),i.object.equals(o.graph)&&c.push(r.boundOG)),i.graph.termType==="Variable"?(i.graph.equals(o.subject)&&c.push(r.unboundGS),o.type==="pattern"&&i.graph.equals(o.predicate)&&c.push(r.unboundGP),i.graph.equals(o.object)&&c.push(r.unboundGO),i.graph.equals(o.graph)&&c.push(r.unboundGG)):(i.graph.equals(o.subject)&&c.push(r.boundGS),o.type==="pattern"&&i.graph.equals(o.predicate)&&c.push(r.boundGP),i.graph.equals(o.object)&&c.push(r.boundGO),i.graph.equals(o.graph)&&c.push(r.boundGG)),c}static getOperationsPairwiseJoinCost(i,o){let c=Gf.MAX_PAIRWISE_COST;for(const s of Gf.getJoinTypes(i,o))switch(s){case r.boundSS:c-=2*2;break;case r.boundSP:c-=3*2;break;case r.boundSO:c-=1*2;break;case r.boundSG:c-=3*2;break;case r.boundPS:c-=3*2;break;case r.boundPP:return 1;case r.boundPO:c-=3*2;break;case r.boundPG:c-=3*2;break;case r.boundOS:c-=1*2;break;case r.boundOP:c-=3*2;break;case r.boundOO:c-=1*2;break;case r.boundOG:c-=3*2;break;case r.boundGS:c-=3*2;break;case r.boundGP:c-=3*2;break;case r.boundGO:c-=3*2;break;case r.boundGG:c-=3*2;break;case r.unboundSS:c-=2;break;case r.unboundSP:c-=3;break;case r.unboundSO:c-=1;break;case r.unboundSG:c-=3;break;case r.unboundPS:c-=3;break;case r.unboundPP:c-=3;break;case r.unboundPO:c-=3;break;case r.unboundPG:c-=3;break;case r.unboundOS:c-=1;break;case r.unboundOP:c-=3;break;case r.unboundOO:c-=1;break;case r.unboundOG:c-=3;break;case r.unboundGS:c-=3;break;case r.unboundGP:c-=3;break;case r.unboundGO:c-=3;break;case r.unboundGG:c-=3;break}return c/Gf.MAX_PAIRWISE_COST}static getOperationsJoinCost(i){const o=[];for(const l of i)u.Util.recurseOperation(l,{[u.Algebra.types.PATTERN](d){return o.push(d),!1},[u.Algebra.types.PATH](d){return o.push(d),!1}});let c=0,s=0;for(const l of o)for(const d of o)l!==d&&(c+=Gf.getOperationsPairwiseJoinCost(l,d),s++);return s===0?1:c/s*o.reduce((l,d)=>l*Gf.getPatternCost(d),1)}async run(i){return i.entries.length<=1?{selectivity:1}:{selectivity:Gf.getOperationsJoinCost(i.entries.map(o=>o.operation))}}};Oo.ActorRdfJoinSelectivityVariableCounting=n,n.MAX_PAIRWISE_COST=41*2;var r;return function(e){e[e.boundSS=0]="boundSS",e[e.boundSP=1]="boundSP",e[e.boundSO=2]="boundSO",e[e.boundSG=3]="boundSG",e[e.boundPS=4]="boundPS",e[e.boundPP=5]="boundPP",e[e.boundPO=6]="boundPO",e[e.boundPG=7]="boundPG",e[e.boundOS=8]="boundOS",e[e.boundOP=9]="boundOP",e[e.boundOO=10]="boundOO",e[e.boundOG=11]="boundOG",e[e.boundGS=12]="boundGS",e[e.boundGP=13]="boundGP",e[e.boundGO=14]="boundGO",e[e.boundGG=15]="boundGG",e[e.unboundSS=16]="unboundSS",e[e.unboundSP=17]="unboundSP",e[e.unboundSO=18]="unboundSO",e[e.unboundSG=19]="unboundSG",e[e.unboundPS=20]="unboundPS",e[e.unboundPP=21]="unboundPP",e[e.unboundPO=22]="unboundPO",e[e.unboundPG=23]="unboundPG",e[e.unboundOS=24]="unboundOS",e[e.unboundOP=25]="unboundOP",e[e.unboundOO=26]="unboundOO",e[e.unboundOG=27]="unboundOG",e[e.unboundGS=28]="unboundGS",e[e.unboundGP=29]="unboundGP",e[e.unboundGO=30]="unboundGO",e[e.unboundGG=31]="unboundGG"}(r||(Oo.JoinTypes=r={})),Oo}var Nq;function ode(){return Nq||(Nq=1,function(a){var t=So&&So.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=So&&So.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ude(),a)}(So)),So}var Eo={},Nb={},Io={},Rb={},Rq;function sde(){if(Rq)return Rb;Rq=1,Object.defineProperty(Rb,"__esModule",{value:!0}),Rb.ActorRdfMetadata=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return Rb.ActorRdfMetadata=t,Rb}var Fq;function Dq(){return Fq||(Fq=1,function(a){var t=Io&&Io.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Io&&Io.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(sde(),a)}(Io)),Io}var Pq;function cde(){if(Pq)return Nb;Pq=1,Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.ActorRdfMetadataPrimaryTopic=void 0;const a=Dq(),t=Te(),u=Mt();let n=class extends a.ActorRdfMetadata{constructor(e){super(e)}async test(e){return e.triples?(0,t.failTest)("This actor only supports non-triple quad streams."):(0,t.passTestVoid)()}async run(e){const i=new u.Readable({objectMode:!0}),o=new u.Readable({objectMode:!0}),c=()=>{i._read=o._read=()=>{},e.quads.on("error",f=>{i.emit("error",f),o.emit("error",f)});const s={};let l;const d={};e.quads.on("data",f=>{f.predicate.value==="http://rdfs.org/ns/void#subset"&&f.object.value===e.url?l=f.subject.value:f.predicate.value==="http://xmlns.com/foaf/0.1/primaryTopic"&&(d[f.object.value]=f.subject.value);let h=s[f.graph.value];h||(h=s[f.graph.value]=[]),h.push(f)}),e.quads.on("end",()=>{const f=l?d[l]:void 0;for(const h in s)if(h===f){for(const p of s[h])o.push(p);if(this.metadataToData)for(const p of s[h])i.push(p)}else{for(const p of s[h])i.push(p);if(!f&&this.dataToMetadataOnInvalidMetadataGraph)for(const p of s[h])o.push(p)}i.push(null),o.push(null)})};return i._read=o._read=()=>{c()},{data:i,metadata:o}}};return Nb.ActorRdfMetadataPrimaryTopic=n,Nb}var jq;function lde(){return jq||(jq=1,function(a){var t=Eo&&Eo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Eo&&Eo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(cde(),a)}(Eo)),Eo}var xo={},Fb={},Lq;function dde(){if(Lq)return Fb;Lq=1,Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.ActorRdfMetadataAll=void 0;const a=Dq(),t=Te(),u=Mt();let n=class extends a.ActorRdfMetadata{constructor(e){super(e)}async test(e){return(0,t.passTestVoid)()}async run(e){const i=new u.Readable({objectMode:!0}),o=new u.Readable({objectMode:!0});e.quads.on("error",s=>{i.emit("error",s),o.emit("error",s)}),e.quads.on("end",()=>{i.push(null),o.push(null)});const c=i._read=o._read=s=>{for(;s>0;){const l=e.quads.read();if(l===null)return e.quads.once("readable",()=>c(s));s--,i.push(l),o.push(l)}};return{data:i,metadata:o}}};return Fb.ActorRdfMetadataAll=n,Fb}var Mq;function fde(){return Mq||(Mq=1,function(a){var t=xo&&xo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=xo&&xo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(dde(),a)}(xo)),xo}var No={},Db={},Ro={},Pb={},Cq;function hde(){if(Cq)return Pb;Cq=1,Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.ActorRdfMetadataAccumulate=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return Pb.ActorRdfMetadataAccumulate=t,Pb}var qq;function CN(){return qq||(qq=1,function(a){var t=Ro&&Ro.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ro&&Ro.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(hde(),a)}(Ro)),Ro}var Bq;function pde(){if(Bq)return Db;Bq=1,Object.defineProperty(Db,"__esModule",{value:!0}),Db.ActorRdfMetadataAccumulateCardinality=void 0;const a=CN(),t=Te();let u=class extends a.ActorRdfMetadataAccumulate{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){if(r.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0}}};const e={...r.accumulatedMetadata.cardinality};if(e.dataset){if(r.accumulatedMetadata.defaultGraph===e.dataset&&e.dataset!==r.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:r.appendingMetadata.cardinality}};if(r.appendingMetadata.cardinality.dataset){if(e.dataset!==r.appendingMetadata.cardinality.dataset&&r.appendingMetadata.subsetOf===e.dataset)return{metadata:{cardinality:r.appendingMetadata.cardinality}};if(e.dataset===r.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:e}};delete e.dataset}else return{metadata:{cardinality:e}}}return!r.appendingMetadata.cardinality||!Number.isFinite(r.appendingMetadata.cardinality.value)?(e.type="estimate",e.value=Number.POSITIVE_INFINITY):(r.appendingMetadata.cardinality.type==="estimate"&&(e.type="estimate"),e.value+=r.appendingMetadata.cardinality.value),{metadata:{cardinality:e}}}};return Db.ActorRdfMetadataAccumulateCardinality=u,Db}var $q;function yde(){return $q||($q=1,function(a){var t=No&&No.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=No&&No.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(pde(),a)}(No)),No}var Fo={},jb={},Vq;function bde(){if(Vq)return jb;Vq=1,Object.defineProperty(jb,"__esModule",{value:!0}),jb.ActorRdfMetadataAccumulatePageSize=void 0;const a=CN(),t=Te();let u=class extends a.ActorRdfMetadataAccumulate{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){return r.mode==="initialize"?{metadata:{}}:{metadata:{..."pageSize"in r.accumulatedMetadata||"pageSize"in r.appendingMetadata?{pageSize:(r.accumulatedMetadata.pageSize??0)+(r.appendingMetadata.pageSize??0)}:{}}}}};return jb.ActorRdfMetadataAccumulatePageSize=u,jb}var Uq;function mde(){return Uq||(Uq=1,function(a){var t=Fo&&Fo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Fo&&Fo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(bde(),a)}(Fo)),Fo}var Do={},Lb={},Qq;function _de(){if(Qq)return Lb;Qq=1,Object.defineProperty(Lb,"__esModule",{value:!0}),Lb.ActorRdfMetadataAccumulateRequestTime=void 0;const a=CN(),t=Te();let u=class extends a.ActorRdfMetadataAccumulate{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){return r.mode==="initialize"?{metadata:{}}:{metadata:{..."requestTime"in r.accumulatedMetadata||"requestTime"in r.appendingMetadata?{requestTime:(r.accumulatedMetadata.requestTime??0)+(r.appendingMetadata.requestTime??0)}:{}}}}};return Lb.ActorRdfMetadataAccumulateRequestTime=u,Lb}var Hq;function gde(){return Hq||(Hq=1,function(a){var t=Do&&Do.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Do&&Do.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(_de(),a)}(Do)),Do}var Po={},Mb={},jo={},Cb={},Gq;function vde(){if(Gq)return Cb;Gq=1,Object.defineProperty(Cb,"__esModule",{value:!0}),Cb.ActorRdfMetadataExtract=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return Cb.ActorRdfMetadataExtract=t,Cb}var zq;function Vi(){return zq||(zq=1,function(a){var t=jo&&jo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=jo&&jo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(vde(),a)}(jo)),jo}var qN={exports:{}},kq;function Tde(){return kq||(kq=1,function(a){(function(t){var u=function(){function p(b){this.options=b}return p.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},p}(),n=function(){function p(x){return Object.prototype.toString.apply(x)==="[object Array]"}function b(x){return Object.prototype.toString.apply(x)==="[object String]"}function _(x){return Object.prototype.toString.apply(x)==="[object Number]"}function y(x){return Object.prototype.toString.apply(x)==="[object Boolean]"}function g(x,L){var O="",w=!0,A;for(A=0;A<x.length;A+=1)w?w=!1:O+=L,O+=x[A];return O}function m(x,L){for(var O=[],w=0;w<x.length;w+=1)O.push(L(x[w]));return O}function v(x,L){for(var O=[],w=0;w<x.length;w+=1)L(x[w])&&O.push(x[w]);return O}function T(x){if(typeof x!="object"||x===null)return x;Object.freeze(x);var L,O;for(O in x)x.hasOwnProperty(O)&&(L=x[O],typeof L=="object"&&S(L));return x}function S(x){return typeof Object.freeze=="function"?T(x):x}return{isArray:p,isString:b,isNumber:_,isBoolean:y,join:g,map:m,filter:v,deepFreeze:S}}(),r=function(){function p(y){return y>="a"&&y<="z"||y>="A"&&y<="Z"}function b(y){return y>="0"&&y<="9"}function _(y){return b(y)||y>="a"&&y<="f"||y>="A"&&y<="F"}return{isAlpha:p,isDigit:b,isHexDigit:_}}(),e=function(){var p={encode:function(v){return unescape(encodeURIComponent(v))},numBytes:function(v){return v<=127?1:194<=v&&v<=223?2:224<=v&&v<=239?3:240<=v&&v<=244?4:0},isValidFollowingCharCode:function(v){return 128<=v&&v<=191}};function b(v){var T="",S=p.encode(v),x,L;for(L=0;L<S.length;L+=1)x=S.charCodeAt(L),T+="%"+(x<16?"0":"")+x.toString(16).toUpperCase();return T}function _(v,T){return v.charAt(T)==="%"&&r.isHexDigit(v.charAt(T+1))&&r.isHexDigit(v.charAt(T+2))}function y(v,T){return parseInt(v.substr(T,2),16)}function g(v){if(!_(v,0))return!1;var T=y(v,1),S=p.numBytes(T);if(S===0)return!1;for(var x=1;x<S;x+=1)if(!_(v,3*x)||!p.isValidFollowingCharCode(y(v,3*x+1)))return!1;return!0}function m(v,T){var S=v.charAt(T);if(!_(v,T))return S;var x=y(v,T+1),L=p.numBytes(x);if(L===0)return S;for(var O=1;O<L;O+=1)if(!_(v,T+3*O)||!p.isValidFollowingCharCode(y(v,T+3*O+1)))return S;return v.substr(T,3*L)}return{encodeCharacter:b,isPctEncoded:g,pctCharAt:m}}(),i=function(){function p(y){return r.isAlpha(y)||r.isDigit(y)||y==="_"||e.isPctEncoded(y)}function b(y){return r.isAlpha(y)||r.isDigit(y)||y==="-"||y==="."||y==="_"||y==="~"}function _(y){return y===":"||y==="/"||y==="?"||y==="#"||y==="["||y==="]"||y==="@"||y==="!"||y==="$"||y==="&"||y==="("||y===")"||y==="*"||y==="+"||y===","||y===";"||y==="="||y==="'"}return{isVarchar:p,isUnreserved:b,isReserved:_}}(),o=function(){function p(g,m){var v="",T,S="";for((typeof g=="number"||typeof g=="boolean")&&(g=g.toString()),T=0;T<g.length;T+=S.length)S=g.charAt(T),v+=i.isUnreserved(S)||m&&i.isReserved(S)?S:e.encodeCharacter(S);return v}function b(g){return p(g,!0)}function _(g,m){var v=e.pctCharAt(g,m);return v.length>1||i.isReserved(v)||i.isUnreserved(v)?v:e.encodeCharacter(v)}function y(g){var m="",v,T="";for(v=0;v<g.length;v+=T.length)T=e.pctCharAt(g,v),T.length>1?m+=T:m+=i.isReserved(T)||i.isUnreserved(T)?T:e.encodeCharacter(T);return m}return{encode:p,encodePassReserved:b,encodeLiteral:y,encodeLiteralCharacter:_}}(),c=function(){var p={};function b(_){p[_]={symbol:_,separator:_==="?"?"&":_===""||_==="+"||_==="#"?",":_,named:_===";"||_==="&"||_==="?",ifEmpty:_==="&"||_==="?"?"=":"",first:_==="+"?"":_,encode:_==="+"||_==="#"?o.encodePassReserved:o.encode,toString:function(){return this.symbol}}}return b(""),b("+"),b("#"),b("."),b("/"),b(";"),b("?"),b("&"),{valueOf:function(_){return p[_]?p[_]:"=,!@|".indexOf(_)>=0?null:p[""]}}}();function s(p){var b;if(p==null)return!1;if(n.isArray(p))return p.length>0;if(typeof p=="string"||typeof p=="number"||typeof p=="boolean")return!0;for(b in p)if(p.hasOwnProperty(b)&&s(p[b]))return!0;return!1}var l=function(){function p(b){this.literal=o.encodeLiteral(b)}return p.prototype.expand=function(){return this.literal},p.prototype.toString=p.prototype.expand,p}(),d=function(){function p(_){var y,g=[],m=null,v=null,T=null,S,x="";function L(){var w=_.substring(v,S);if(w.length===0)throw new u({expressionText:_,message:"a varname must be specified",position:S});m={varname:w,exploded:!1,maxLength:null},v=null}function O(){if(T===S)throw new u({expressionText:_,message:"after a ':' you have to specify the length",position:S});m.maxLength=parseInt(_.substring(T,S),10),T=null}for(y=function(w){var A=c.valueOf(w);if(A===null)throw new u({expressionText:_,message:"illegal use of reserved operator",position:S,operator:w});return A}(_.charAt(0)),S=y.symbol.length,v=S;S<_.length;S+=x.length){if(x=e.pctCharAt(_,S),v!==null){if(x==="."){if(v===S)throw new u({expressionText:_,message:"a varname MUST NOT start with a dot",position:S});continue}if(i.isVarchar(x))continue;L()}if(T!==null){if(S===T&&x==="0")throw new u({expressionText:_,message:"A :prefix must not start with digit 0",position:S});if(r.isDigit(x)){if(S-T>=4)throw new u({expressionText:_,message:"A :prefix must have max 4 digits",position:S});continue}O()}if(x===":"){if(m.maxLength!==null)throw new u({expressionText:_,message:"only one :maxLength is allowed per varspec",position:S});if(m.exploded)throw new u({expressionText:_,message:"an exploeded varspec MUST NOT be varspeced",position:S});T=S+1;continue}if(x==="*"){if(m===null)throw new u({expressionText:_,message:"exploded without varspec",position:S});if(m.exploded)throw new u({expressionText:_,message:"exploded twice",position:S});if(m.maxLength)throw new u({expressionText:_,message:"an explode (*) MUST NOT follow to a prefix",position:S});m.exploded=!0;continue}if(x===","){g.push(m),m=null,v=S+1;continue}throw new u({expressionText:_,message:"illegal character",character:x,position:S})}return v!==null&&L(),T!==null&&O(),g.push(m),new f(_,y,g)}function b(_){var y,g,m=[],v=null,T=0;for(y=0;y<_.length;y+=1){if(g=_.charAt(y),T!==null){if(g==="}")throw new u({templateText:_,message:"unopened brace closed",position:y});g==="{"&&(T<y&&m.push(new l(_.substring(T,y))),T=null,v=y);continue}if(v!==null){if(g==="{")throw new u({templateText:_,message:"brace already opened",position:y});if(g==="}"){if(v+1===y)throw new u({templateText:_,message:"empty braces",position:v});try{m.push(p(_.substring(v+1,y)))}catch(S){throw S.prototype===u.prototype?new u({templateText:_,message:S.options.message,position:v+S.options.position,details:S.options}):S}v=null,T=y+1}continue}throw new Error("reached unreachable code")}if(v!==null)throw new u({templateText:_,message:"unclosed brace",position:v});return T<_.length&&m.push(new l(_.substr(T))),new h(_,m)}return b}(),f=function(){function p(x){return JSON&&JSON.stringify?JSON.stringify(x):x}function b(x){if(!s(x))return!0;if(n.isString(x))return x==="";if(n.isNumber(x)||n.isBoolean(x))return!1;if(n.isArray(x))return x.length===0;for(var L in x)if(x.hasOwnProperty(L))return!1;return!0}function _(x){var L=[],O;for(O in x)x.hasOwnProperty(O)&&L.push({name:O,value:x[O]});return L}function y(x,L,O){this.templateText=x,this.operator=L,this.varspecs=O}y.prototype.toString=function(){return this.templateText};function g(x,L,O){var w="";if(O=O.toString(),L.named){if(w+=o.encodeLiteral(x.varname),O==="")return w+=L.ifEmpty,w;w+="="}return x.maxLength!==null&&(O=O.substr(0,x.maxLength)),w+=L.encode(O),w}function m(x){return s(x.value)}function v(x,L,O){var w=[],A="";if(L.named){if(A+=o.encodeLiteral(x.varname),b(O))return A+=L.ifEmpty,A;A+="="}return n.isArray(O)?(w=O,w=n.filter(w,s),w=n.map(w,L.encode),A+=n.join(w,",")):(w=_(O),w=n.filter(w,m),w=n.map(w,function(E){return L.encode(E.name)+","+L.encode(E.value)}),A+=n.join(w,",")),A}function T(x,L,O){var w=n.isArray(O),A=[];return w?(A=O,A=n.filter(A,s),A=n.map(A,function(E){var R=o.encodeLiteral(x.varname);return b(E)?R+=L.ifEmpty:R+="="+L.encode(E),R})):(A=_(O),A=n.filter(A,m),A=n.map(A,function(E){var R=o.encodeLiteral(E.name);return b(E.value)?R+=L.ifEmpty:R+="="+L.encode(E.value),R})),n.join(A,L.separator)}function S(x,L){var O=[],w="";return n.isArray(L)?(O=L,O=n.filter(O,s),O=n.map(O,x.encode),w+=n.join(O,x.separator)):(O=_(L),O=n.filter(O,function(A){return s(A.value)}),O=n.map(O,function(A){return x.encode(A.name)+"="+x.encode(A.value)}),w+=n.join(O,x.separator)),w}return y.prototype.expand=function(x){var L=[],O,w,A,E=this.operator;for(O=0;O<this.varspecs.length;O+=1)if(w=this.varspecs[O],A=x[w.varname],A!=null)if(w.exploded,n.isArray(A),typeof A=="string"||typeof A=="number"||typeof A=="boolean")L.push(g(w,E,A));else{if(w.maxLength&&s(A))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+p(A));w.exploded?s(A)&&(E.named?L.push(T(w,E,A)):L.push(S(E,A))):(E.named||!b(A))&&L.push(v(w,E,A))}return L.length===0?"":E.first+n.join(L,E.separator)},y}(),h=function(){function p(b,_){this.templateText=b,this.expressions=_,n.deepFreeze(this)}return p.prototype.toString=function(){return this.templateText},p.prototype.expand=function(b){var _,y="";for(_=0;_<this.expressions.length;_+=1)y+=this.expressions[_].expand(b);return y},p.parse=d,p.UriTemplateError=u,p}();t(h)})(function(t){a.exports=t})}(qN)),qN.exports}var Xq;function wde(){if(Xq)return Mb;Xq=1,Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.ActorRdfMetadataExtractHydraControls=void 0;const a=Vi(),t=Te(),u=Tde();let n=class PE extends a.ActorRdfMetadataExtract{constructor(e){super(e),this.parsedUriTemplateCache={}}async test(e){return(0,t.passTestVoid)()}getLinks(e,i){return Object.fromEntries(PE.LINK_TYPES.map(o=>{const c=i[o]||i[`${o}Page`],s=c&&c[e];return[o,s&&s.length>0?[s[0]]:[]]}))}parseUriTemplateCached(e){const i=this.parsedUriTemplateCache[e];return i||(this.parsedUriTemplateCache[e]=(0,u.parse)(e))}getSearchForms(e){const i=e.search,o=[];if(i)for(const c in i)for(const s of i[c]){const l=(e.template||{})[s]||[];if(l.length!==1)throw new Error(`Expected 1 hydra:template for ${s}`);const d=l[0],f=this.parseUriTemplateCached(d),h=Object.fromEntries(((e.mapping||{})[s]||[]).map(b=>{const _=((e.variable||{})[b]||[])[0],y=((e.property||{})[b]||[])[0];if(!_)throw new Error(`Expected a hydra:variable for ${b}`);if(!y)throw new Error(`Expected a hydra:property for ${b}`);return[y,_]})),p=b=>f.expand(Object.fromEntries(Object.keys(b).map(_=>[h[_],b[_]])));o.push({dataset:c,template:d,mappings:h,getUri:p})}return{values:o}}getHydraProperties(e){return new Promise((i,o)=>{e.on("error",o);const c={};e.on("data",s=>{if(s.predicate.value.startsWith(PE.HYDRA)){const l=s.predicate.value.slice(PE.HYDRA.length),d=c[l]||(c[l]={});(d[s.subject.value]||(d[s.subject.value]=[])).push(s.object.value)}}),e.on("end",()=>i(c))})}async run(e){const i={},o=await this.getHydraProperties(e.metadata);return Object.assign(i,this.getLinks(e.url,o)),i.searchForms=this.getSearchForms(o),{metadata:i}}};return Mb.ActorRdfMetadataExtractHydraControls=n,n.HYDRA="http://www.w3.org/ns/hydra/core#",n.LINK_TYPES=["first","next","previous","last"],Mb}var Jq;function Sde(){return Jq||(Jq=1,function(a){var t=Po&&Po.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Po&&Po.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(wde(),a)}(Po)),Po}var Lo={},qb={},Kq;function Ode(){if(Kq)return qb;Kq=1,Object.defineProperty(qb,"__esModule",{value:!0}),qb.ActorRdfMetadataExtractHydraCount=void 0;const a=Vi(),t=Te();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}run(r){return new Promise((e,i)=>{r.metadata.on("error",i),r.metadata.on("data",o=>{this.predicates.includes(o.predicate.value)&&e({metadata:{cardinality:{type:"estimate",value:Number.parseInt(o.object.value,10),dataset:o.subject.value}}})}),r.metadata.on("end",()=>{e({metadata:{cardinality:{type:"estimate",value:0}}})})})}};return qb.ActorRdfMetadataExtractHydraCount=u,qb}var Wq;function Ade(){return Wq||(Wq=1,function(a){var t=Lo&&Lo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Lo&&Lo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ode(),a)}(Lo)),Lo}var Mo={},Bb={},Yq;function Ede(){if(Yq)return Bb;Yq=1,Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.ActorRdfMetadataExtractHydraPagesize=void 0;const a=Vi(),t=Te();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){return new Promise((e,i)=>{r.metadata.on("error",i),r.metadata.on("data",o=>{this.predicates.includes(o.predicate.value)&&e({metadata:{pageSize:Number.parseInt(o.object.value,10)}})}),r.metadata.on("end",()=>{e({metadata:{}})})})}};return Bb.ActorRdfMetadataExtractHydraPagesize=u,Bb}var Zq;function Ide(){return Zq||(Zq=1,function(a){var t=Mo&&Mo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Mo&&Mo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ede(),a)}(Mo)),Mo}var Co={},$b={},e7;function xde(){if(e7)return $b;e7=1,Object.defineProperty($b,"__esModule",{value:!0}),$b.ActorRdfMetadataExtractRequestTime=void 0;const a=Vi(),t=Te();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){return{metadata:{requestTime:r.requestTime}}}};return $b.ActorRdfMetadataExtractRequestTime=u,$b}var t7;function Nde(){return t7||(t7=1,function(a){var t=Co&&Co.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Co&&Co.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(xde(),a)}(Co)),Co}var qo={},Vb={},r7;function Rde(){if(r7)return Vb;r7=1,Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.ActorRdfMetadataExtractAllowHttpMethods=void 0;const a=Vi(),t=Te();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){var i,o;const e={};return(i=r.headers)!=null&&i.get("allow")&&(e.allowHttpMethods=(o=r.headers.get("allow"))==null?void 0:o.split(/, */u)),{metadata:e}}};return Vb.ActorRdfMetadataExtractAllowHttpMethods=u,Vb}var n7;function Fde(){return n7||(n7=1,function(a){var t=qo&&qo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=qo&&qo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Rde(),a)}(qo)),qo}var Bo={},Ub={},i7;function Dde(){if(i7)return Ub;i7=1,Object.defineProperty(Ub,"__esModule",{value:!0}),Ub.ActorRdfMetadataExtractPutAccepted=void 0;const a=Vi(),t=Te();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){var i,o;const e={};return(i=r.headers)!=null&&i.get("accept-put")&&(e.putAccepted=(o=r.headers.get("accept-put"))==null?void 0:o.split(/, */u)),{metadata:e}}};return Ub.ActorRdfMetadataExtractPutAccepted=u,Ub}var a7;function Pde(){return a7||(a7=1,function(a){var t=Bo&&Bo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Bo&&Bo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Dde(),a)}(Bo)),Bo}var $o={},Qb={},u7;function jde(){if(u7)return Qb;u7=1,Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.ActorRdfMetadataExtractPatchSparqlUpdate=void 0;const a=Vi(),t=Te();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){var i,o,c,s;const e={};return(((o=(i=r.headers)==null?void 0:i.get("accept-patch"))==null?void 0:o.includes("application/sparql-update"))??((s=(c=r.headers)==null?void 0:c.get("ms-author-via"))==null?void 0:s.includes("SPARQL")))&&(e.patchSparqlUpdate=!0),{metadata:e}}};return Qb.ActorRdfMetadataExtractPatchSparqlUpdate=u,Qb}var o7;function Lde(){return o7||(o7=1,function(a){var t=$o&&$o.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=$o&&$o.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(jde(),a)}($o)),$o}var Vo={},Hb={},s7;function Mde(){if(s7)return Hb;s7=1,Object.defineProperty(Hb,"__esModule",{value:!0}),Hb.ActorRdfMetadataExtractSparqlService=void 0;const a=Vi(),t=Te(),u=vr();let n=class extends a.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return(0,t.passTestVoid)()}async run(e){return new Promise((i,o)=>{e.metadata.on("error",o);const c=new Set([e.url]),s={},l=new Set,d=new Set,f=new Set;e.metadata.on("data",h=>{if(h.predicate.value==="http://rdfs.org/ns/void#subset"&&h.object.value===e.url)c.add(h.subject.value);else if(h.subject.value===s.defaultDataset||h.subject.termType==="BlankNode"||c.has(h.subject.value))switch(h.predicate.value){case"http://www.w3.org/ns/sparql-service-description#endpoint":s.sparqlService=h.object.termType==="Literal"?(0,u.resolve)(h.object.value,e.url):h.object.value,this.inferHttpsEndpoint&&e.url.startsWith("https")&&!h.object.value.startsWith("https")&&(s.sparqlService=s.sparqlService.replace(/^http:/u,"https:"));break;case"http://www.w3.org/ns/sparql-service-description#defaultDataset":s.defaultDataset=h.object.value;break;case"http://www.w3.org/ns/sparql-service-description#defaultGraph":s.defaultGraph=h.object.value;break;case"http://www.w3.org/ns/sparql-service-description#inputFormat":l.add(h.object.value);break;case"http://www.w3.org/ns/sparql-service-description#resultFormat":d.add(h.object.value);break;case"http://www.w3.org/ns/sparql-service-description#supportedLanguage":f.add(h.object.value);break;case"http://www.w3.org/ns/sparql-service-description#feature":h.object.value==="http://www.w3.org/ns/sparql-service-description#UnionDefaultGraph"?s.unionDefaultGraph=!0:h.object.value==="http://www.w3.org/ns/sparql-service-description#BasicFederatedQuery"&&(s.basicFederatedQuery=!0);break}}),e.metadata.on("end",()=>{i({metadata:{...s,...l.size>0?{inputFormats:[...l.values()]}:{},...d.size>0?{resultFormats:[...d.values()]}:{},...f.size>0?{supportedLanguages:[...f.values()]}:{}}})})})}};return Hb.ActorRdfMetadataExtractSparqlService=n,Hb}var c7;function Cde(){return c7||(c7=1,function(a){var t=Vo&&Vo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Vo&&Vo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Mde(),a)}(Vo)),Vo}var Uo={},Gb={},BN={},l7;function d7(){return l7||(l7=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.VOID_CLASS_PARTITION=a.VOID_PROPERTY_PARTITION=a.VOID_DISTINCT_SUBJECTS=a.VOID_DISTINCT_OBJECTS=a.VOID_URI_REGEX_PATTERN=a.VOID_URI_SPACE=a.VOID_VOCABULARY=a.VOID_PROPERTY=a.VOID_CLASS=a.VOID_ENTITIES=a.VOID_TRIPLES=a.VOID_CLASSES=a.VOID_DATASET=a.VOID=a.SD_GRAPH=a.SD_FEATURE=a.SD_UNION_DEFAULT_GRAPH=a.SD_DEFAULT_GRAPH=a.SD_DEFAULT_DATASET=a.SD=a.RDF_TYPE=void 0,a.RDF_TYPE="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",a.SD="http://www.w3.org/ns/sparql-service-description#",a.SD_DEFAULT_DATASET=`${a.SD}defaultDataset`,a.SD_DEFAULT_GRAPH=`${a.SD}defaultGraph`,a.SD_UNION_DEFAULT_GRAPH=`${a.SD}UnionDefaultGraph`,a.SD_FEATURE=`${a.SD}feature`,a.SD_GRAPH=`${a.SD}Graph`,a.VOID="http://rdfs.org/ns/void#",a.VOID_DATASET=`${a.VOID}Dataset`,a.VOID_CLASSES=`${a.VOID}classes`,a.VOID_TRIPLES=`${a.VOID}triples`,a.VOID_ENTITIES=`${a.VOID}entities`,a.VOID_CLASS=`${a.VOID}class`,a.VOID_PROPERTY=`${a.VOID}property`,a.VOID_VOCABULARY=`${a.VOID}vocabulary`,a.VOID_URI_SPACE=`${a.VOID}uriSpace`,a.VOID_URI_REGEX_PATTERN=`${a.VOID}uriRegexPattern`,a.VOID_DISTINCT_OBJECTS=`${a.VOID}distinctSubjects`,a.VOID_DISTINCT_SUBJECTS=`${a.VOID}distinctObjects`,a.VOID_PROPERTY_PARTITION=`${a.VOID}propertyPartition`,a.VOID_CLASS_PARTITION=`${a.VOID}classPartition`}(BN)),BN}var sr={},f7;function qde(){if(f7)return sr;f7=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.getClassPartitionEntities=sr.getPredicateTriples=sr.getPredicateSubjects=sr.getPredicateObjects=sr.getDistinctSubjects=sr.getDistinctObjects=sr.estimatePatternCardinalityRaw=sr.matchPatternVocabularies=sr.matchPatternResourceUris=sr.estimatePatternCardinality=void 0;const a=d7();function t(d,f){const h={type:"exact",value:0};if(n(d,f)&&u(d,f)){const p=r(d,f);p>0&&(h.value=p,h.type="estimate")}return h}sr.estimatePatternCardinality=t;function u(d,f){return!d.uriRegexPattern||f.subject.termType!=="NamedNode"||d.uriRegexPattern.test(f.subject.value)||f.object.termType!=="NamedNode"||d.uriRegexPattern.test(f.object.value)}sr.matchPatternResourceUris=u;function n(d,f){return d.vocabularies!==void 0&&f.predicate.termType==="NamedNode"?d.vocabularies.some(h=>f.predicate.value.startsWith(h)):!0}sr.matchPatternVocabularies=n;function r(d,f){if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&f.predicate.value===a.RDF_TYPE&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode"))return l(d,f.object);if(f.subject.termType==="Variable"&&f.predicate.termType==="Variable"&&f.object.termType==="Variable")return d.triples;if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="Variable"&&(f.object.termType==="Variable"||f.object.termType==="Literal")){const h=i(d);if(h>0)return d.triples/h}if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&(f.object.termType==="Variable"||f.object.termType==="Literal"))return s(d,f.predicate);if(f.subject.termType==="Variable"&&f.predicate.termType==="Variable"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode"||f.object.termType==="Literal")){const h=e(d);if(h>0)return d.triples/h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="NamedNode"&&(f.object.termType==="Variable"||f.object.termType==="Literal")){const h=s(d,f.predicate),p=c(d,f.predicate);return p>0?h/p:h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="Variable"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=i(d),p=e(d);if(h>0&&p>0)return d.triples/(h*p)}if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=s(d,f.predicate),p=o(d,f.predicate);return p>0?h/p:h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="NamedNode"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=s(d,f.predicate),p=c(d,f.predicate),b=o(d,f.predicate);return p>0&&b>0?h/(p*b):h}return d.triples}sr.estimatePatternCardinalityRaw=r;function e(d){return d.distinctObjects??d.entities??d.triples}sr.getDistinctObjects=e;function i(d){return d.distinctSubjects??d.entities??d.triples}sr.getDistinctSubjects=i;function o(d,f){if(d.propertyPartitions){const h=d.propertyPartitions[f.value];return(h==null?void 0:h.distinctObjects)??(h==null?void 0:h.triples)??0}return d.triples}sr.getPredicateObjects=o;function c(d,f){if(d.propertyPartitions){const h=d.propertyPartitions[f.value];return(h==null?void 0:h.distinctSubjects)??(h==null?void 0:h.triples)??0}return d.triples}sr.getPredicateSubjects=c;function s(d,f){var h;return d.propertyPartitions?((h=d.propertyPartitions[f.value])==null?void 0:h.triples)??0:d.triples}sr.getPredicateTriples=s;function l(d,f){var h;return d.classPartitions?((h=d.classPartitions[f.value])==null?void 0:h.entities)??0:d.entities!==void 0&&d.classes?d.entities/d.classes:d.triples}return sr.getClassPartitionEntities=l,sr}var h7;function Bde(){if(h7)return Gb;h7=1,Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.ActorRdfMetadataExtractVoid=void 0;const a=Vi(),t=Te(),u=ht(),n=d7(),r=qde();let e=class extends a.ActorRdfMetadataExtract{constructor(o){super(o)}async test(o){return(0,t.passTestVoid)()}async run(o){return new Promise((c,s)=>{const l=new Set,d=new Set,f={},h={},p={},b={},_={},y={},g={},m={},v={},T={},S={};let x,L,O=!1;o.metadata.on("error",s).on("data",w=>{switch(w.predicate.value){case n.RDF_TYPE:(w.object.value===n.SD_GRAPH||w.object.value===n.VOID_DATASET)&&l.add(w.subject.value);break;case n.VOID_TRIPLES:f[w.subject.value]=Number.parseInt(w.object.value,10);break;case n.VOID_ENTITIES:h[w.subject.value]=Number.parseInt(w.object.value,10);break;case n.VOID_CLASSES:b[w.subject.value]=Number.parseInt(w.object.value,10);break;case n.VOID_CLASS:S[w.subject.value]=w.object.value;break;case n.VOID_PROPERTY:v[w.subject.value]=w.object.value;break;case n.VOID_DISTINCT_OBJECTS:_[w.subject.value]=Number.parseInt(w.object.value,10);break;case n.VOID_DISTINCT_SUBJECTS:y[w.subject.value]=Number.parseInt(w.object.value,10);break;case n.VOID_VOCABULARY:p[w.subject.value]?p[w.subject.value].push(w.object.value):p[w.subject.value]=[w.object.value];break;case n.VOID_URI_SPACE:g[w.subject.value]||(g[w.subject.value]=new RegExp(`^${w.object.value}`,"u"));break;case n.VOID_URI_REGEX_PATTERN:g[w.subject.value]=new RegExp(w.object.value,"u");break;case n.VOID_PROPERTY_PARTITION:d.add(w.object.value),m[w.subject.value]?m[w.subject.value].push(w.object.value):m[w.subject.value]=[w.object.value];break;case n.VOID_CLASS_PARTITION:d.add(w.object.value),T[w.subject.value]?T[w.subject.value].push(w.object.value):T[w.subject.value]=[w.object.value];break;case n.SD_DEFAULT_DATASET:x=w.object.value;break;case n.SD_DEFAULT_GRAPH:L=w.object.value;break;case n.SD_FEATURE:w.object.value===n.SD_UNION_DEFAULT_GRAPH&&(O=!0);break}}).on("end",()=>{var R;const w=[],A=V=>{const $={};for(const Q of m[V]){const ne=v[Q];ne&&($[ne]={distinctObjects:_[Q],distinctSubjects:y[Q],triples:f[Q]})}return $},E=V=>{const $={};for(const Q of T[V]){const ne=S[Q];ne&&($[ne]={entities:h[Q],propertyPartitions:m[Q]?A(Q):void 0})}return $};x&&d.add(x),O&&L&&d.add(L),x&&L&&p[x]&&(p[L]=[...p[L]??[],...p[x]]);for(const V of d)l.delete(V);for(const V of l)if(f[V]){const $={entities:h[V],identifier:V,classes:b[V]??((R=T[V])==null?void 0:R.length)??0,classPartitions:T[V]?E(V):void 0,distinctObjects:_[V],distinctSubjects:y[V],propertyPartitions:m[V]?A(V):void 0,triples:f[V],uriRegexPattern:g[V],vocabularies:p[V]};w.push({uri:V,source:o.url,getCardinality:Q=>{if(Q.type===u.Algebra.types.PATTERN)return{...(0,r.estimatePatternCardinality)($,Q),dataset:V}}})}c({metadata:w.length>0?{datasets:w}:{}})})})}};return Gb.ActorRdfMetadataExtractVoid=e,Gb}var p7;function $de(){return p7||(p7=1,function(a){var t=Uo&&Uo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Uo&&Uo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Bde(),a)}(Uo)),Uo}var Qo={},zb={},Ho={},kb={},y7;function Vde(){if(y7)return kb;y7=1,Object.defineProperty(kb,"__esModule",{value:!0}),kb.ActorRdfParse=void 0;const a=vh();let t=class extends a.ActorAbstractMediaTyped{constructor(n){super(n)}};return kb.ActorRdfParse=t,kb}var Xb={},b7;function Ude(){if(b7)return Xb;b7=1,Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.ActorRdfParseFixedMediaTypes=void 0;const a=vh(),t=Te();let u=class extends a.ActorAbstractMediaTypedFixed{constructor(r){super(r)}async testHandleChecked(r){return(0,t.passTestVoid)()}};return Xb.ActorRdfParseFixedMediaTypes=u,Xb}var m7;function Oh(){return m7||(m7=1,function(a){var t=Ho&&Ho.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ho&&Ho.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Vde(),a),u(Ude(),a)}(Ho)),Ho}const Jb="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Kb="http://www.w3.org/2001/XMLSchema#",iA="http://www.w3.org/2000/10/swap/";var Pr={xsd:{decimal:`${Kb}decimal`,boolean:`${Kb}boolean`,double:`${Kb}double`,integer:`${Kb}integer`,string:`${Kb}string`},rdf:{type:`${Jb}type`,nil:`${Jb}nil`,first:`${Jb}first`,rest:`${Jb}rest`,langString:`${Jb}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${iA}reify#forSome`,forAll:`${iA}reify#forAll`},log:{implies:`${iA}log#implies`,isImpliedBy:`${iA}log#isImpliedBy`}};const{xsd:aA}=Pr,Qde=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,_7={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Hde=/[\x00-\x20<>\\"\{\}\|\^\`]/,Gde={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},zde=/$0^/;class $N{constructor(t){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,t=t||{},this._isImpliedBy=t.isImpliedBy,this._lineMode=!!t.lineMode){this._n3Mode=!1;for(const u in this)!(u in Gde)&&this[u]instanceof RegExp&&(this[u]=zde)}else this._n3Mode=t.n3!==!1;this.comments=!!t.comments,this._literalClosingPos=0}_tokenizeToEnd(t,u){let n=this._input,r=n.length;for(;;){let o,c;for(;o=this._newline.exec(n);)this.comments&&(c=this._comment.exec(o[0]))&&e("comment",c[1],"",this._line,o[0].length),n=n.substr(o[0].length,n.length),r=n.length,this._line++;if(!o&&(o=this._whitespace.exec(n))&&(n=n.substr(o[0].length,n.length)),this._endOfFile.test(n))return u&&(this.comments&&(c=this._comment.exec(n))&&e("comment",c[1],"",this._line,n.length),n=null,e("eof","","",this._line,0)),this._input=n;const s=this._line,l=n[0];let d="",f="",h="",p=null,b=0,_=!1;switch(l){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){_=!0;break}}else{this._n3Mode&&(b=1,d="^");break}case"<":if(p=this._unescapedIri.exec(n))d="IRI",f=p[1];else if(p=this._iri.exec(n)){if(f=this._unescape(p[1]),f===null||Hde.test(f))return i(this);d="IRI"}else n.length>1&&n[1]==="<"?(d="<<",b=2):this._n3Mode&&n.length>1&&n[1]==="="&&(b=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":n.length>1&&n[1]===">"&&(d=">>",b=2);break;case"_":((p=this._blank.exec(n))||u&&(p=this._blank.exec(`${n} `)))&&(d="blank",h="_",f=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))f=p[1];else if({value:f,matchLength:b}=this._parseLiteral(n),f===null)return i(this);(p!==null||b!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))f=p[1];else if({value:f,matchLength:b}=this._parseLiteral(n),f===null)return i(this);(p!==null||b!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(d="var",f=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(n))?(d="langcode",f=p[1]):(p=this._keyword.exec(n))&&(d=p[0]);break;case".":if(n.length===1?u:n[1]<"0"||n[1]>"9"){d=".",b=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(n)||u&&(p=this._number.exec(`${n} `)))&&(d="literal",f=p[0],h=typeof p[1]=="string"?aA.double:typeof p[2]=="string"?aA.decimal:aA.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(n))?d=p[0].toUpperCase():_=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(d="literal",f=p[0],h=aA.boolean):_=!0;break;case"a":(p=this._shortPredicates.exec(n))?(d="abbreviation",f="a"):_=!0;break;case"=":this._n3Mode&&n.length>1&&(d="abbreviation",n[1]!==">"?(b=1,f="="):(b=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(b=1,d=l);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(d="{|",b=2):(d=l,b=1));break;case"|":n.length>=2&&n[1]==="}"&&(d="|}",b=2);break;default:_=!0}if(_&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(n))?(d="prefix",f=p[1]||""):((p=this._prefixed.exec(n))||u&&(p=this._prefixed.exec(`${n} `)))&&(d="prefixed",h=p[1]||"",f=this._unescape(p[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return u||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?i(this):this._input=n;const y=b||p[0].length,g=e(d,f,h,s,y);this.previousToken=g,this._previousMarker=d,n=n.substr(y,n.length)}function e(o,c,s,l,d){const f=n?r-n.length:r,h=f+d,p={type:o,value:c,prefix:s,line:l,start:f,end:h};return t(null,p),p}function i(o){t(o._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(t){let u=!1;const n=t.replace(Qde,(r,e,i,o)=>{if(typeof e=="string")return String.fromCharCode(Number.parseInt(e,16));if(typeof i=="string"){let c=Number.parseInt(i,16);return c<=65535?String.fromCharCode(Number.parseInt(i,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return o in _7?_7[o]:(u=!0,"")});return u?null:n}_parseLiteral(t){if(t.length>=3){const u=t.match(/^(?:"""|"|'''|'|)/)[0],n=u.length;let r=Math.max(this._literalClosingPos,n);for(;(r=t.indexOf(u,r))>0;){let e=0;for(;t[r-e-1]==="\\";)e++;if(e%2===0){const i=t.substring(n,r),o=i.split(/\r\n|\r|\n/).length-1,c=r+n;if(n===1&&o!==0||n===3&&this._lineMode)break;return this._line+=o,{value:this._unescape(i),matchLength:c}}r++}this._literalClosingPos=t.length-n+1}return{value:"",matchLength:0}}_syntaxError(t){this._input=null;const u=new Error(`Unexpected "${t}" on line ${this._line}.`);return u.context={token:void 0,line:this._line,previousToken:this.previousToken},u}_readStartingBom(t){return t.startsWith("\uFEFF")?t.substr(1):t}tokenize(t,u){if(this._line=1,typeof t=="string")if(this._input=this._readStartingBom(t),typeof u=="function")queueMicrotask(()=>this._tokenizeToEnd(u,!0));else{const n=[];let r;if(this._tokenizeToEnd((e,i)=>e?r=e:n.push(i),!0),r)throw r;return n}else this._pendingBuffer=null,typeof t.setEncoding=="function"&&t.setEncoding("utf8"),t.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=ele.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(u,!1)))}),t.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(u,!0)}),t.on("error",u)}}const{rdf:kde,xsd:Go}=Pr;let Ah,Xde=0;const Jn={namedNode:g7,blankNode:v7,variable:w7,literal:T7,defaultGraph:Jde,quad:HN,triple:HN,fromTerm:Wb,fromQuad:S7};class _n{constructor(t){this.id=t}get value(){return this.id}equals(t){return t instanceof _n?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let uA=class extends _n{get termType(){return"NamedNode"}},Eh=class nae extends _n{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const t=this.id;let u=t.lastIndexOf('"')+1;return u<t.length&&t[u++]==="@"?t.substr(u).toLowerCase():""}get datatype(){return new uA(this.datatypeString)}get datatypeString(){const t=this.id,u=t.lastIndexOf('"')+1,n=u<t.length?t[u]:"";return n==="^"?t.substr(u+2):n!=="@"?Go.string:kde.langString}equals(t){return t instanceof nae?this.id===t.id:!!t&&!!t.datatype&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&this.datatype.value===t.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},VN=class extends _n{constructor(t){super(`_:${t}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},UN=class extends _n{constructor(t){super(`?${t}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},QN=class extends _n{constructor(){return super(""),Ah||this}get termType(){return"DefaultGraph"}equals(t){return this===t||!!t&&this.termType===t.termType}};Ah=new QN;function zo(a,t,u){if(t=t||Jn,!a)return t.defaultGraph();switch(a[0]){case"?":return t.variable(a.substr(1));case"_":return t.blankNode(a.substr(2));case'"':if(t===Jn)return new Eh(a);if(a[a.length-1]==='"')return t.literal(a.substr(1,a.length-2));const n=a.lastIndexOf('"',a.length-1);return t.literal(a.substr(1,n-1),a[n+1]==="@"?a.substr(n+2):t.namedNode(a.substr(n+3)));case"[":a=JSON.parse(a);break;default:if(!u||!Array.isArray(a))return t.namedNode(a)}return t.quad(zo(a[0],t,!0),zo(a[1],t,!0),zo(a[2],t,!0),a[3]&&zo(a[3],t,!0))}function Ta(a,t){if(typeof a=="string")return a;if(a instanceof _n&&a.termType!=="Quad")return a.id;if(!a)return Ah.id;switch(a.termType){case"NamedNode":return a.value;case"BlankNode":return`_:${a.value}`;case"Variable":return`?${a.value}`;case"DefaultGraph":return"";case"Literal":return`"${a.value}"${a.language?`@${a.language}`:a.datatype&&a.datatype.value!==Go.string?`^^${a.datatype.value}`:""}`;case"Quad":const u=[Ta(a.subject,!0),Ta(a.predicate,!0),Ta(a.object,!0)];return a.graph&&a.graph.termType!=="DefaultGraph"&&u.push(Ta(a.graph,!0)),t?u:JSON.stringify(u);default:throw new Error(`Unexpected termType: ${a.termType}`)}}let Ih=class extends _n{constructor(t,u,n,r){super(""),this._subject=t,this._predicate=u,this._object=n,this._graph=r||Ah}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(t){return!!t&&this._subject.equals(t.subject)&&this._predicate.equals(t.predicate)&&this._object.equals(t.object)&&this._graph.equals(t.graph)}};function g7(a){return new uA(a)}function v7(a){return new VN(a||`n3-${Xde++}`)}function T7(a,t){if(typeof t=="string")return new Eh(`"${a}"@${t.toLowerCase()}`);let u=t?t.value:"";return u===""&&(typeof a=="boolean"?u=Go.boolean:typeof a=="number"&&(Number.isFinite(a)?u=Number.isInteger(a)?Go.integer:Go.double:(u=Go.double,Number.isNaN(a)||(a=a>0?"INF":"-INF")))),u===""||u===Go.string?new Eh(`"${a}"`):new Eh(`"${a}"^^${u}`)}function w7(a){return new UN(a)}function Jde(){return Ah}function HN(a,t,u,n){return new Ih(a,t,u,n)}function Wb(a){if(a instanceof _n)return a;switch(a.termType){case"NamedNode":return g7(a.value);case"BlankNode":return v7(a.value);case"Variable":return w7(a.value);case"DefaultGraph":return Ah;case"Literal":return T7(a.value,a.language||a.datatype);case"Quad":return S7(a);default:throw new Error(`Unexpected termType: ${a.termType}`)}}function S7(a){if(a instanceof Ih)return a;if(a.termType!=="Quad")throw new Error(`Unexpected termType: ${a.termType}`);return HN(Wb(a.subject),Wb(a.predicate),Wb(a.object),Wb(a.graph))}let O7=0;class oA{constructor(t){this._contextStack=[],this._graph=null,t=t||{},this._setBase(t.baseIRI),t.factory&&A7(this,t.factory);const u=typeof t.format=="string"?t.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(u),r=/trig/.test(u),e=/triple/.test(u),i=/quad/.test(u),o=this._n3Mode=/n3/.test(u),c=e||i;(this._supportsNamedGraphs=!(n||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||r||e||o),this._isImpliedBy=t.isImpliedBy,this._supportsRDFStar=u===""||/star|\*$/.test(u),c&&(this._resolveRelativeIRI=s=>null),this._blankNodePrefix=typeof t.blankNodePrefix!="string"?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new $N({lineMode:c,n3:o,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!t.explicitQuantifiers}static _resetBlankNodePrefix(){O7=0}_setBase(t){if(!t)this._base="",this._basePath="";else{const u=t.indexOf("#");u>=0&&(t=t.substr(0,u)),this._base=t,this._basePath=t.indexOf("/")<0?t:t.replace(/[^\/?]*(?:\?.*)?$/,""),t=t.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=t[0],this._baseScheme=t[1]}}_saveContext(t,u,n,r,e){const i=this._n3Mode;this._contextStack.push({type:t,subject:n,predicate:r,object:e,graph:u,inverse:i?this._inversePredicate:!1,blankPrefix:i?this._prefixes._:"",quantified:i?this._quantified:null}),i&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(t,u){const n=this._contextStack.pop();if(!n||n.type!==t)return this._error(`Unexpected ${u.type}`,u);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(t){switch(t.type){case"eof":return this._graph!==null?this._error("Unclosed graph",t):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t)}}_readEntity(t,u){let n;switch(t.type){case"IRI":case"typeIRI":const r=this._resolveIRI(t.value);if(r===null)return this._error("Invalid IRI",t);n=this._factory.namedNode(r);break;case"type":case"prefixed":const e=this._prefixes[t.prefix];if(e===void 0)return this._error(`Undefined prefix "${t.prefix}:"`,t);n=this._factory.namedNode(e+t.value);break;case"blank":n=this._factory.blankNode(this._prefixes[t.prefix]+t.value);break;case"var":n=this._factory.variable(t.value.substr(1));break;default:return this._error(`Expected entity but got ${t.type}`,t)}return!u&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(t){switch(this._predicate=null,t.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",t);case"}":return this._readPunctuation(t);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',t);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',t);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",t);if(t.prefix.length===0)return this._literalValue=t.value,this._completeSubjectLiteral;this._subject=this._factory.literal(t.value,this._factory.namedNode(t.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",t);default:if((this._subject=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(t){const u=t.type;switch(u){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[t.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${u}`,t):(this._subject=null,u==="]"?this._readBlankNodeTail(t):this._readPunctuation(t));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",t);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",t);default:if((this._predicate=this._readEntity(t))===void 0)return}return this._readObject}_readObject(t){switch(t.type){case"literal":if(t.prefix.length===0)return this._literalValue=t.value,this._readDataTypeOrLang;this._object=this._factory.literal(t.value,this._factory.namedNode(t.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",t);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",t);default:if((this._object=this._readEntity(t))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(t){return t.type==="{"?this._readGraph(t):this._readPredicate(t)}_readGraph(t){return t.type!=="{"?this._error(`Expected graph but got ${t.type}`,t):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(t){return t.type==="]"?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))}_readBlankNodeTail(t){if(t.type!=="]")return this._readBlankNodePunctuation(t);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const u=this._predicate===null;return this._restoreContext("blank",t),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:u?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(t){switch(t.type){case".":case"}":return this._subject=null,this._readPunctuation(t);default:return this._readPredicate(t)}}_readListItem(t){let u=null,n=null,r=this._readListItem;const e=this._subject,i=this._contextStack,o=i[i.length-1];switch(t.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=u=this._factory.blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",t),i.length!==0&&i[i.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;n=this.RDF_NIL;break;case"literal":t.prefix.length===0?(this._literalValue=t.value,r=this._readListItemDataTypeOrLang):(u=this._factory.literal(t.value,this._factory.namedNode(t.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",t);default:if((u=this._readEntity(t))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),e===null?o.predicate===null?o.subject=n:o.object=n:this._emit(e,this.RDF_REST,n,this._graph),u!==null){if(this._n3Mode&&(t.type==="IRI"||t.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,u),this._subject=u,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,u,this._graph)}return r}_readDataTypeOrLang(t){return this._completeObjectLiteral(t,!1)}_readListItemDataTypeOrLang(t){return this._completeObjectLiteral(t,!0)}_completeLiteral(t){let u=this._factory.literal(this._literalValue);switch(t.type){case"type":case"typeIRI":const n=this._readEntity(t);if(n===void 0)return;u=this._factory.literal(this._literalValue,n),t=null;break;case"langcode":u=this._factory.literal(this._literalValue,t.value),t=null;break}return{token:t,literal:u}}_completeSubjectLiteral(t){return this._subject=this._completeLiteral(t).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(t,u){const n=this._completeLiteral(t);if(n)return this._object=n.literal,u&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(t){return t.type!=="}"?this._readPunctuation(t):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",t),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(t){let u,n=this._graph;const r=this._subject,e=this._inversePredicate;switch(t.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",t);if(this._n3Mode)return this._readFormulaTail(t);this._graph=null;case".":this._subject=null,u=this._contextStack.length?this._readSubject:this._readInTopContext,e&&(this._inversePredicate=!1);break;case";":u=this._readPredicate;break;case",":u=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",t);const i=this._predicate,o=this._object;this._subject=this._factory.quad(r,i,o,this.DEFAULTGRAPH),u=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",t);this._subject=null,u=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(t))!==void 0){u=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}if(r!==null){const i=this._predicate,o=this._object;e?this._emit(o,i,r,n):this._emit(r,i,o,n)}return u}_readBlankNodePunctuation(t){let u;switch(t.type){case";":u=this._readPredicate;break;case",":u=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}return this._emit(this._subject,this._predicate,this._object,this._graph),u}_readQuadPunctuation(t){return t.type!=="."?this._error("Expected dot to follow quad",t):this._readInTopContext}_readPrefix(t){return t.type!=="prefix"?this._error("Expected prefix to follow @prefix",t):(this._prefix=t.value,this._readPrefixIRI)}_readPrefixIRI(t){if(t.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,t);const u=this._readEntity(t);return this._prefixes[this._prefix]=u.value,this._prefixCallback(this._prefix,u),this._readDeclarationPunctuation}_readBaseIRI(t){const u=t.type==="IRI"&&this._resolveIRI(t.value);return u?(this._setBase(u),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",t)}_readNamedGraphLabel(t){switch(t.type){case"IRI":case"blank":case"prefixed":return this._readSubject(t),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",t)}}_readNamedGraphBlankLabel(t){return t.type!=="]"?this._error("Invalid graph label",t):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(t){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(t)):t.type!=="."?this._error("Expected declaration to end with a dot",t):this._readInTopContext}_readQuantifierList(t){let u;switch(t.type){case"IRI":case"prefixed":if((u=this._readEntity(t,!0))!==void 0)break;default:return this._error(`Unexpected ${t.type}`,t)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,u,this.QUANTIFIERS_GRAPH)):this._quantified[u.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(t){return t.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(t))}_getPathReader(t){return this._afterPath=t,this._readPath}_readPath(t){switch(t.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const u=this._contextStack,n=u.length&&u[u.length-1];if(n&&n.type==="item"){const r=this._subject;this._restoreContext("item",t),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(t)}}_readForwardPath(t){let u,n;const r=this._factory.blankNode();if((n=this._readEntity(t))!==void 0)return this._predicate===null?(u=this._subject,this._subject=r):(u=this._object,this._object=r),this._emit(u,n,r,this._graph),this._readPath}_readBackwardPath(t){const u=this._factory.blankNode();let n,r;if((n=this._readEntity(t))!==void 0)return this._predicate===null?(r=this._subject,this._subject=u):(r=this._object,this._object=u),this._emit(u,n,r,this._graph),this._readPath}_readRDFStarTailOrGraph(t){return t.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(t))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,t):this._readRDFStarTail(t)}_readRDFStarTail(t){if(t.type!==">>")return this._error(`Expected >> but got ${t.type}`,t);const u=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",t),this._subject===null?(this._subject=u,this._readPredicate):(this._object=u,this._getContextEndReader())}_getContextEndReader(){const t=this._contextStack;if(!t.length)return this._readPunctuation;switch(t[t.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(t,u,n,r){this._callback(null,this._factory.quad(t,u,n,r||this.DEFAULTGRAPH))}_error(t,u){const n=new Error(`${t} on line ${u.line}.`);n.context={token:u,line:u.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=sA}_resolveIRI(t){return/^[a-z][a-z0-9+.-]*:/i.test(t)?t:this._resolveRelativeIRI(t)}_resolveRelativeIRI(t){if(!t.length)return this._base;switch(t[0]){case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return(t[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return/^[^/:]*:/.test(t)?null:this._removeDotSegments(this._basePath+t)}}_removeDotSegments(t){if(!/(^|\/)\.\.?($|[/#?])/.test(t))return t;const u=t.length;let n="",r=-1,e=-1,i=0,o="/";for(;r<u;){switch(o){case":":if(e<0&&t[++r]==="/"&&t[++r]==="/")for(;(e=r+1)<u&&t[e]!=="/";)r=e;break;case"?":case"#":r=u;break;case"/":if(t[r+1]===".")switch(o=t[++r+1],o){case"/":n+=t.substring(i,r-1),i=r+1;break;case void 0:case"?":case"#":return n+t.substring(i,r)+t.substr(r+1);case".":if(o=t[++r+1],o===void 0||o==="/"||o==="?"||o==="#"){if(n+=t.substring(i,r-2),(i=n.lastIndexOf("/"))>=e&&(n=n.substr(0,i)),o!=="/")return`${n}/${t.substr(r+1)}`;i=r+1}}}o=t[++r]}return n+t.substring(i)}parse(t,u,n){let r,e,i;if(u&&(u.onQuad||u.onPrefix||u.onComment)?(r=u.onQuad,e=u.onPrefix,i=u.onComment):(r=u,e=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${O7++}_`,this._prefixCallback=e||sA,this._inversePredicate=!1,this._quantified=Object.create(null),!r){const c=[];let s;if(this._callback=(l,d)=>{l?s=l:d&&c.push(d)},this._lexer.tokenize(t).every(l=>this._readCallback=this._readCallback(l)),s)throw s;return c}let o=(c,s)=>{c!==null?(this._callback(c),this._callback=sA):this._readCallback&&(this._readCallback=this._readCallback(s))};i&&(this._lexer.comments=!0,o=(c,s)=>{c!==null?(this._callback(c),this._callback=sA):this._readCallback&&(s.type==="comment"?i(s.value):this._readCallback=this._readCallback(s))}),this._callback=r,this._lexer.tokenize(t,o)}}function sA(){}function A7(a,t){a._factory=t,a.DEFAULTGRAPH=t.defaultGraph(),a.RDF_FIRST=t.namedNode(Pr.rdf.first),a.RDF_REST=t.namedNode(Pr.rdf.rest),a.RDF_NIL=t.namedNode(Pr.rdf.nil),a.N3_FORALL=t.namedNode(Pr.r.forAll),a.N3_FORSOME=t.namedNode(Pr.r.forSome),a.ABBREVIATIONS={a:t.namedNode(Pr.rdf.type),"=":t.namedNode(Pr.owl.sameAs),">":t.namedNode(Pr.log.implies),"<":t.namedNode(Pr.log.isImpliedBy)},a.QUANTIFIERS_GRAPH=t.namedNode("urn:n3:quantifiers")}A7(oA.prototype,Jn);function Kde(a){return!!a&&a.termType==="NamedNode"}function Wde(a){return!!a&&a.termType==="BlankNode"}function Yde(a){return!!a&&a.termType==="Literal"}function Zde(a){return!!a&&a.termType==="Variable"}function efe(a){return!!a&&a.termType==="Quad"}function Yb(a){return!!a&&a.termType==="DefaultGraph"}function tfe(a){return Yb(a.graph)}function rfe(a,t){return E7({"":a.value||a},t)("")}function E7(a,t){const u=Object.create(null);for(const r in a)n(r,a[r]);t=t||Jn;function n(r,e){if(typeof e=="string"){const i=Object.create(null);u[r]=o=>i[o]||(i[o]=t.namedNode(e+o))}else if(!(r in u))throw new Error(`Unknown prefix: ${r}`);return u[r]}return n}var I7=Object.freeze({__proto__:null,inDefaultGraph:tfe,isBlankNode:Wde,isDefaultGraph:Yb,isLiteral:Yde,isNamedNode:Kde,isQuad:efe,isVariable:Zde,prefix:rfe,prefixes:E7});function cA(a){return a.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const nfe=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,ife=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,x7="./",afe="../",GN="?",N7="#";class Zb{constructor(t){this.base=t,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(t.length+1)}static supports(t){return!nfe.test(t)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!Zb.supports(this.base))return this._baseMatcher=/.^/;const t=/^[^:]*:\/*/.exec(this.base)[0],u=["^",cA(t)],n=[],r=[],e=/[^/?#]*([/?#])/y;let i,o=0,c=0,s=e.lastIndex=t.length;for(;!o&&!c&&(i=e.exec(this.base));)i[1]===N7?c=e.lastIndex-1:(u.push(cA(i[0]),"(?:"),n.push(")?"),i[1]!==GN?r.push(s=e.lastIndex):(o=s=e.lastIndex,c=this.base.indexOf(N7,o),this._pathReplacements[o]=GN));for(let l=0;l<r.length;l++)this._pathReplacements[r[l]]=afe.repeat(r.length-l-1);return this._pathReplacements[r[r.length-1]]=x7,this._baseLength=c>0?c:this.base.length,u.push(cA(this.base.substring(s,this._baseLength)),o?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...u,...n].join(""))}toRelative(t){const u=this._getBaseMatcher().exec(t);if(!u)return t;const n=u[0].length;if(n===this._baseLength&&n===t.length)return"";const r=this._pathReplacements[n];if(r){const e=t.substring(n);return r!==GN&&!ife.test(e)?t:r===x7&&/^[^?#]/.test(e)?e:r+e}return t.substring(n-1)}}const em=Jn.defaultGraph(),{rdf:ufe,xsd:xh}=Pr,R7=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,F7=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,ofe={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class tm extends _n{equals(t){return t===this}}class rm{constructor(t,u){if(this._prefixRegex=/$0^/,t&&typeof t.write!="function"&&(u=t,t=null),u=u||{},this._lists=u.lists,t)this._outputStream=t,this._endStream=u.end===void 0?!0:!!u.end;else{let n="";this._outputStream={write(r,e,i){n+=r,i&&i()},end:r=>{r&&r(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(u.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=em,this._prefixIRIs=Object.create(null),u.prefixes&&this.addPrefixes(u.prefixes),u.baseIRI&&(this._baseIri=new Zb(u.baseIRI)))}get _inDefaultGraph(){return em.equals(this._graph)}_write(t,u){this._outputStream.write(t,"utf8",u)}_writeQuad(t,u,n,r,e){try{r.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(em.equals(r)?"":`${this._encodeIriOrBlank(r)} {
`)),this._graph=r,this._subject=null),t.equals(this._subject)?u.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,e):this._write(`;
    ${this._encodePredicate(this._predicate=u)} ${this._encodeObject(n)}`,e):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=t)} ${this._encodePredicate(this._predicate=u)} ${this._encodeObject(n)}`,e)}catch(i){e&&e(i)}}_writeQuadLine(t,u,n,r,e){delete this._prefixMatch,this._write(this.quadToString(t,u,n,r),e)}quadToString(t,u,n,r){return`${this._encodeSubject(t)} ${this._encodeIriOrBlank(u)} ${this._encodeObject(n)}${r&&r.value?` ${this._encodeIriOrBlank(r)} .
`:` .
`}`}quadsToString(t){let u="";for(const n of t)u+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return u}_encodeSubject(t){return t.termType==="Quad"?this._encodeQuad(t):this._encodeIriOrBlank(t)}_encodeIriOrBlank(t){if(t.termType!=="NamedNode")return this._lists&&t.value in this._lists&&(t=this.list(this._lists[t.value])),"id"in t?t.id:`_:${t.value}`;let u=t.value;this._baseIri&&(u=this._baseIri.toRelative(u)),R7.test(u)&&(u=u.replace(F7,D7));const n=this._prefixRegex.exec(u);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:u:`<${u}>`}_encodeLiteral(t){let u=t.value;if(R7.test(u)&&(u=u.replace(F7,D7)),t.language)return`"${u}"@${t.language}`;if(this._lineMode){if(t.datatype.value===xh.string)return`"${u}"`}else switch(t.datatype.value){case xh.string:return`"${u}"`;case xh.boolean:if(u==="true"||u==="false")return u;break;case xh.integer:if(/^[+-]?\d+$/.test(u))return u;break;case xh.decimal:if(/^[+-]?\d*\.\d+$/.test(u))return u;break;case xh.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(u))return u;break}return`"${u}"^^${this._encodeIriOrBlank(t.datatype)}`}_encodePredicate(t){return t.value===ufe.type?"a":this._encodeIriOrBlank(t)}_encodeObject(t){switch(t.termType){case"Quad":return this._encodeQuad(t);case"Literal":return this._encodeLiteral(t);default:return this._encodeIriOrBlank(t)}}_encodeQuad({subject:t,predicate:u,object:n,graph:r}){return`<<${this._encodeSubject(t)} ${this._encodePredicate(u)} ${this._encodeObject(n)}${Yb(r)?"":` ${this._encodeIriOrBlank(r)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(t,u,n,r,e){n===void 0?this._writeQuad(t.subject,t.predicate,t.object,t.graph,u):typeof r=="function"?this._writeQuad(t,u,n,em,r):this._writeQuad(t,u,n,r||em,e)}addQuads(t){for(let u=0;u<t.length;u++)this.addQuad(t[u])}addPrefix(t,u,n){const r={};r[t]=u,this.addPrefixes(r,n)}addPrefixes(t,u){if(!this._prefixIRIs)return u&&u();let n=!1;for(let r in t){let e=t[r];typeof e!="string"&&(e=e.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[e]=r+=":",this._write(`@prefix ${r} <${e}>.
`)}if(n){let r="",e="";for(const i in this._prefixIRIs)r+=r?`|${i}`:i,e+=(e?"|":"")+this._prefixIRIs[i];r=cA(r),this._prefixRegex=new RegExp(`^(?:${e})[^/]*$|^(${r})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",u)}blank(t,u){let n=t,r,e;switch(t===void 0?n=[]:t.termType?n=[{predicate:t,object:u}]:"length"in t||(n=[t]),e=n.length){case 0:return new tm("[]");case 1:if(r=n[0],!(r.object instanceof tm))return new tm(`[ ${this._encodePredicate(r.predicate)} ${this._encodeObject(r.object)} ]`);default:let i="[";for(let o=0;o<e;o++)r=n[o],r.predicate.equals(t)?i+=`, ${this._encodeObject(r.object)}`:(i+=`${(o?`;
  `:`
  `)+this._encodePredicate(r.predicate)} ${this._encodeObject(r.object)}`,t=r.predicate);return new tm(`${i}
]`)}}list(t){const u=t&&t.length||0,n=new Array(u);for(let r=0;r<u;r++)n[r]=this._encodeObject(t[r]);return new tm(`(${n.join(" ")})`)}end(t){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let u=t&&((n,r)=>{u=null,t(n,r)});if(this._endStream)try{return this._outputStream.end(u)}catch{}u&&u()}}function D7(a){let t=ofe[a];return t===void 0&&(a.length===1?(t=a.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=((a.charCodeAt(0)-55296)*1024+a.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}var lA=Mt();const zN=Symbol("iter");function nm(a,t,u=4){if(u===0)return Object.assign(a,t);for(const n in t)a[n]=nm(a[n]||Object.create(null),t[n],u-1);return a}function P7(a,t,u=4){let n=!1;for(const r in a)if(r in t){const e=u===0?null:P7(a[r],t[r],u-1);if(e!==!1)n=n||Object.create(null),n[r]=e;else if(u===3)return!1}return n}function j7(a,t,u=4){let n=!1;for(const r in a)if(!(r in t))n=n||Object.create(null),n[r]=u===0?null:nm({},a[r],u-1);else if(u!==0){const e=j7(a[r],t[r],u-1);if(e!==!1)n=n||Object.create(null),n[r]=e;else if(u===3)return!1}return n}class kN{constructor(t={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=t.factory||Jn}_termFromId(t){if(t[0]==="."){const u=this._entities,n=t.split(".");return this._factory.quad(this._termFromId(u[n[1]]),this._termFromId(u[n[2]]),this._termFromId(u[n[3]]),n[4]&&this._termFromId(u[n[4]]))}return zo(t,this._factory)}_termToNumericId(t){if(t.termType==="Quad"){const u=this._termToNumericId(t.subject),n=this._termToNumericId(t.predicate),r=this._termToNumericId(t.object);let e;return u&&n&&r&&(Yb(t.graph)||(e=this._termToNumericId(t.graph)))&&this._ids[e?`.${u}.${n}.${r}.${e}`:`.${u}.${n}.${r}`]}return this._ids[Ta(t)]}_termToNewNumericId(t){const u=t&&t.termType==="Quad"?`.${this._termToNewNumericId(t.subject)}.${this._termToNewNumericId(t.predicate)}.${this._termToNewNumericId(t.object)}${Yb(t.graph)?"":`.${this._termToNewNumericId(t.graph)}`}`:Ta(t);return this._ids[u]||(this._ids[this._entities[++this._id]=u]=this._id)}createBlankNode(t){let u,n;if(t)for(u=t=`_:${t}`,n=1;this._ids[u];)u=t+n++;else do u=`_:b${this._blankNodeIndex++}`;while(this._ids[u]);return this._ids[u]=++this._id,this._entities[this._id]=u,this._factory.blankNode(u.substr(2))}}class Ur{constructor(t,u){this._size=0,this._graphs=Object.create(null),!u&&t&&!t[0]&&typeof t.match!="function"&&(u=t,t=null),u=u||{},this._factory=u.factory||Jn,this._entityIndex=u.entityIndex||new kN({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),t&&this.addAll(t)}get size(){let t=this._size;if(t!==null)return t;t=0;const u=this._graphs;let n,r;for(const e in u)for(const i in n=u[e].subjects)for(const o in r=n[i])t+=Object.keys(r[o]).length;return this._size=t}_addToIndex(t,u,n,r){const e=t[u]||(t[u]={}),i=e[n]||(e[n]={}),o=r in i;return o||(i[r]=null),!o}_removeFromIndex(t,u,n,r){const e=t[u],i=e[n];delete i[r];for(const o in i)return;delete e[n];for(const o in e)return;delete t[u]}*_findInIndex(t,u,n,r,e,i,o,c){let s,l,d;const f=this._entities,h=this._termFromId(f[c]),p={subject:null,predicate:null,object:null};u&&((s=t,t={})[u]=s[u]);for(const b in t)if(l=t[b]){p[e]=this._termFromId(f[b]),n&&((s=l,l={})[n]=s[n]);for(const _ in l)if(d=l[_]){p[i]=this._termFromId(f[_]);const y=r?r in d?[r]:[]:Object.keys(d);for(let g=0;g<y.length;g++)p[o]=this._termFromId(f[y[g]]),yield this._factory.quad(p.subject,p.predicate,p.object,h)}}}_loop(t,u){for(const n in t)u(n)}_loopByKey0(t,u,n){let r,e;if(r=t[u])for(e in r)n(e)}_loopByKey1(t,u,n){let r,e;for(r in t)e=t[r],e[u]&&n(r)}_loopBy2Keys(t,u,n,r){let e,i,o;if((e=t[u])&&(i=e[n]))for(o in i)r(o)}_countInIndex(t,u,n,r){let e=0,i,o,c;u&&((i=t,t={})[u]=i[u]);for(const s in t)if(o=t[s]){n&&((i=o,o={})[n]=i[n]);for(const l in o)(c=o[l])&&(r?r in c&&e++:e+=Object.keys(c).length)}return e}_getGraphs(t){return t=t===""?1:t&&(this._termToNumericId(t)||-1),typeof t!="number"?this._graphs:{[t]:this._graphs[t]}}_uniqueEntities(t){const u=Object.create(null);return n=>{n in u||(u[n]=!0,t(this._termFromId(this._entities[n],this._factory)))}}add(t){return this.addQuad(t),this}addQuad(t,u,n,r){u||(r=t.graph,n=t.object,u=t.predicate,t=t.subject),r=r?this._termToNewNumericId(r):1;let e=this._graphs[r];return e||(e=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(e)),t=this._termToNewNumericId(t),u=this._termToNewNumericId(u),n=this._termToNewNumericId(n),this._addToIndex(e.subjects,t,u,n)?(this._addToIndex(e.predicates,u,n,t),this._addToIndex(e.objects,n,t,u),this._size=null,!0):!1}addQuads(t){for(let u=0;u<t.length;u++)this.addQuad(t[u])}delete(t){return this.removeQuad(t),this}has(t,u,n,r){return t&&t.subject&&({subject:t,predicate:u,object:n,graph:r}=t),!this.readQuads(t,u,n,r).next().done}import(t){return t.on("data",u=>{this.addQuad(u)}),t}removeQuad(t,u,n,r){u||({subject:t,predicate:u,object:n,graph:r}=t),r=r?this._termToNumericId(r):1;const e=this._graphs;let i,o,c;if(!(t=t&&this._termToNumericId(t))||!(u=u&&this._termToNumericId(u))||!(n=n&&this._termToNumericId(n))||!(i=e[r])||!(o=i.subjects[t])||!(c=o[u])||!(n in c))return!1;this._removeFromIndex(i.subjects,t,u,n),this._removeFromIndex(i.predicates,u,n,t),this._removeFromIndex(i.objects,n,t,u),this._size!==null&&this._size--;for(t in i.subjects)return!0;return delete e[r],!0}removeQuads(t){for(let u=0;u<t.length;u++)this.removeQuad(t[u])}remove(t){return t.on("data",u=>{this.removeQuad(u)}),t}removeMatches(t,u,n,r){const e=new lA.Readable({objectMode:!0}),i=this.readQuads(t,u,n,r);return e._read=o=>{for(;--o>=0;){const{done:c,value:s}=i.next();if(c){e.push(null);return}e.push(s)}},this.remove(e)}deleteGraph(t){return this.removeMatches(null,null,null,t)}getQuads(t,u,n,r){return[...this.readQuads(t,u,n,r)]}*readQuads(t,u,n,r){const e=this._getGraphs(r);let i,o,c,s;if(!(t&&!(o=this._termToNumericId(t))||u&&!(c=this._termToNumericId(u))||n&&!(s=this._termToNumericId(n))))for(const l in e)(i=e[l])&&(o?s?yield*this._findInIndex(i.objects,s,o,c,"object","subject","predicate",l):yield*this._findInIndex(i.subjects,o,c,null,"subject","predicate","object",l):c?yield*this._findInIndex(i.predicates,c,s,null,"predicate","object","subject",l):s?yield*this._findInIndex(i.objects,s,null,null,"object","subject","predicate",l):yield*this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",l))}match(t,u,n,r){return new wa(this,t,u,n,r,{entityIndex:this._entityIndex})}countQuads(t,u,n,r){const e=this._getGraphs(r);let i=0,o,c,s,l;if(t&&!(c=this._termToNumericId(t))||u&&!(s=this._termToNumericId(u))||n&&!(l=this._termToNumericId(n)))return 0;for(const d in e)(o=e[d])&&(t?n?i+=this._countInIndex(o.objects,l,c,s):i+=this._countInIndex(o.subjects,c,s,l):u?i+=this._countInIndex(o.predicates,s,l,c):i+=this._countInIndex(o.objects,l,c,s));return i}forEach(t,u,n,r,e){this.some(i=>(t(i,this),!1),u,n,r,e)}every(t,u,n,r,e){return!this.some(i=>!t(i,this),u,n,r,e)}some(t,u,n,r,e){for(const i of this.readQuads(u,n,r,e))if(t(i,this))return!0;return!1}getSubjects(t,u,n){const r=[];return this.forSubjects(e=>{r.push(e)},t,u,n),r}forSubjects(t,u,n,r){const e=this._getGraphs(r);let i,o,c;if(t=this._uniqueEntities(t),!(u&&!(o=this._termToNumericId(u))||n&&!(c=this._termToNumericId(n))))for(r in e)(i=e[r])&&(o?c?this._loopBy2Keys(i.predicates,o,c,t):this._loopByKey1(i.subjects,o,t):c?this._loopByKey0(i.objects,c,t):this._loop(i.subjects,t))}getPredicates(t,u,n){const r=[];return this.forPredicates(e=>{r.push(e)},t,u,n),r}forPredicates(t,u,n,r){const e=this._getGraphs(r);let i,o,c;if(t=this._uniqueEntities(t),!(u&&!(o=this._termToNumericId(u))||n&&!(c=this._termToNumericId(n))))for(r in e)(i=e[r])&&(o?c?this._loopBy2Keys(i.objects,c,o,t):this._loopByKey0(i.subjects,o,t):c?this._loopByKey1(i.predicates,c,t):this._loop(i.predicates,t))}getObjects(t,u,n){const r=[];return this.forObjects(e=>{r.push(e)},t,u,n),r}forObjects(t,u,n,r){const e=this._getGraphs(r);let i,o,c;if(t=this._uniqueEntities(t),!(u&&!(o=this._termToNumericId(u))||n&&!(c=this._termToNumericId(n))))for(r in e)(i=e[r])&&(o?c?this._loopBy2Keys(i.subjects,o,c,t):this._loopByKey1(i.objects,o,t):c?this._loopByKey0(i.predicates,c,t):this._loop(i.objects,t))}getGraphs(t,u,n){const r=[];return this.forGraphs(e=>{r.push(e)},t,u,n),r}forGraphs(t,u,n,r){for(const e in this._graphs)this.some(i=>(t(i.graph),!0),u,n,r,this._termFromId(this._entities[e]))}createBlankNode(t){return this._entityIndex.createBlankNode(t)}extractLists({remove:t=!1,ignoreErrors:u=!1}={}){const n={},r=u?()=>!0:(o,c)=>{throw new Error(`${o.value} ${c}`)},e=this.getQuads(null,Pr.rdf.rest,Pr.rdf.nil,null),i=t?[...e]:[];return e.forEach(o=>{const c=[];let s=!1,l,d;const f=o.graph;let h=o.subject;for(;h&&!s;){const p=this.getQuads(null,null,h,null),b=this.getQuads(h,null,null,null);let _,y=null,g=null,m=null;for(let v=0;v<b.length&&!s;v++)_=b[v],_.graph.equals(f)?l?s=r(h,"has non-list arcs out"):_.predicate.value===Pr.rdf.first?y?s=r(h,"has multiple rdf:first arcs"):i.push(y=_):_.predicate.value===Pr.rdf.rest?g?s=r(h,"has multiple rdf:rest arcs"):i.push(g=_):p.length?s=r(h,"can't be subject and object"):(l=_,d="subject"):s=r(h,"not confined to single graph");for(let v=0;v<p.length&&!s;++v)_=p[v],l?s=r(h,"can't have coreferences"):_.predicate.value===Pr.rdf.rest?m?s=r(h,"has incoming rdf:rest arcs"):m=_:(l=_,d="object");y?c.unshift(y.object):s=r(h,"has no list head"),h=m&&m.subject}s?t=!1:l&&(n[l[d].value]=c)}),t&&this.removeQuads(i),n}addAll(t){if(t instanceof wa&&(t=t.filtered),Array.isArray(t))this.addQuads(t);else if(t instanceof Ur&&t._entityIndex===this._entityIndex)t._size!==0&&(this._graphs=nm(this._graphs,t._graphs),this._size=null);else for(const u of t)this.add(u);return this}contains(t){if(t instanceof wa&&(t=t.filtered),t===this)return!0;if(!(t instanceof Ur)||this._entityIndex!==t._entityIndex)return t.every(s=>this.has(s));const u=this._graphs,n=t._graphs;let r,e,i,o,c;for(const s in n){if(!(r=u[s]))return!1;r=r.subjects;for(const l in e=n[s].subjects){if(!(i=r[l]))return!1;for(const d in o=e[l]){if(!(c=i[d]))return!1;for(const f in o[d])if(!(f in c))return!1}}}return!0}deleteMatches(t,u,n,r){for(const e of this.match(t,u,n,r))this.removeQuad(e);return this}difference(t){if(t&&t instanceof wa&&(t=t.filtered),t===this)return new Ur({entityIndex:this._entityIndex});if(t instanceof Ur&&t._entityIndex===this._entityIndex){const u=new Ur({entityIndex:this._entityIndex}),n=j7(this._graphs,t._graphs);return n&&(u._graphs=n,u._size=null),u}return this.filter(u=>!t.has(u))}equals(t){return t instanceof wa&&(t=t.filtered),t===this||this.size===t.size&&this.contains(t)}filter(t){const u=new Ur({entityIndex:this._entityIndex});for(const n of this)t(n,this)&&u.add(n);return u}intersection(t){if(t instanceof wa&&(t=t.filtered),t===this){const u=new Ur({entityIndex:this._entityIndex});return u._graphs=nm(Object.create(null),this._graphs),u._size=this._size,u}else if(t instanceof Ur&&this._entityIndex===t._entityIndex){const u=new Ur({entityIndex:this._entityIndex}),n=P7(t._graphs,this._graphs);return n&&(u._graphs=n,u._size=null),u}return this.filter(u=>t.has(u))}map(t){const u=new Ur({entityIndex:this._entityIndex});for(const n of this)u.add(t(n,this));return u}reduce(t,u){const n=this.readQuads();let r=u===void 0?n.next().value:u;for(const e of n)r=t(r,e,this);return r}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new rm().quadsToString(this)}union(t){const u=new Ur({entityIndex:this._entityIndex});return u._graphs=nm(Object.create(null),this._graphs),u._size=this._size,u.addAll(t),u}*[Symbol.iterator](){yield*this.readQuads()}}function Oi(a,t,u=0){const n=t[u];if(n&&!(n in a))return!1;let r=!1;for(const e in n?{[n]:a[n]}:a){const i=u===2?null:Oi(a[e],t,u+1);i!==!1&&(r=r||Object.create(null),r[e]=i)}return r}class wa extends lA.Readable{constructor(t,u,n,r,e,i){super({objectMode:!0}),Object.assign(this,{n3Store:t,subject:u,predicate:n,object:r,graph:e,options:i})}get filtered(){if(!this._filtered){const{n3Store:t,graph:u,object:n,predicate:r,subject:e}=this,i=this._filtered=new Ur({factory:t._factory,entityIndex:this.options.entityIndex});let o,c,s;if(e&&!(o=i._termToNumericId(e))||r&&!(c=i._termToNumericId(r))||n&&!(s=i._termToNumericId(n)))return i;const l=t._getGraphs(u);for(const d in l){let f,h,p,b;(b=l[d])&&(!o&&c?(h=Oi(b.predicates,[c,s,o]))&&(f=Oi(b.subjects,[o,c,s]),p=Oi(b.objects,[s,o,c])):s?(p=Oi(b.objects,[s,o,c]))&&(f=Oi(b.subjects,[o,c,s]),h=Oi(b.predicates,[c,s,o])):(f=Oi(b.subjects,[o,c,s]))&&(h=Oi(b.predicates,[c,s,o]),p=Oi(b.objects,[s,o,c])),f&&(i._graphs[d]={subjects:f,predicates:h,objects:p}))}i._size=null}return this._filtered}get size(){return this.filtered.size}_read(t){t>0&&!this[zN]&&(this[zN]=this[Symbol.iterator]());const u=this[zN];for(;--t>=0;){const{done:n,value:r}=u.next();if(n){this.push(null);return}this.push(r)}}addAll(t){return this.filtered.addAll(t)}contains(t){return this.filtered.contains(t)}deleteMatches(t,u,n,r){return this.filtered.deleteMatches(t,u,n,r)}difference(t){return this.filtered.difference(t)}equals(t){return this.filtered.equals(t)}every(t,u,n,r,e){return this.filtered.every(t,u,n,r,e)}filter(t){return this.filtered.filter(t)}forEach(t,u,n,r,e){return this.filtered.forEach(t,u,n,r,e)}import(t){return this.filtered.import(t)}intersection(t){return this.filtered.intersection(t)}map(t){return this.filtered.map(t)}some(t,u,n,r,e){return this.filtered.some(t,u,n,r,e)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(t){return this._filtered?this._filtered.union(t):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(t)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(t,u){return this.filtered.reduce(t,u)}toString(){return new rm().quadsToString(this)}add(t){return this.filtered.add(t)}delete(t){return this.filtered.delete(t)}has(t){return this.filtered.has(t)}match(t,u,n,r){return new wa(this.filtered,t,u,n,r,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class L7{dataset(t){return new Ur(t)}}function M7(a){const t=[];for(const{subject:u,object:n}of a.match(null,Jn.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,Jn.defaultGraph())){const r=[...a.match(null,null,null,u)],e=[...a.match(null,null,null,n)];t.push({premise:r,conclusion:e})}return t}class C7{constructor(t){this._store=t}_add(t,u,n,r,e){this._store._addToIndex(r.subjects,t,u,n)&&(this._store._addToIndex(r.predicates,u,n,t),this._store._addToIndex(r.objects,n,t,u),e())}_evaluatePremise(t,u,n,r=0){let e,i,o,c,s;const[l,d,f]=t.premise[r].value,h=u[t.premise[r].content],p=!(o=l.value);for(o in p?h:{[o]:h[o]})if(c=h[o]){p&&(l.value=Number(o)),e=!(o=d.value);for(o in e?c:{[o]:c[o]})if(s=c[o]){e&&(d.value=Number(o)),i=!(o=f.value);for(o in i?s:{[o]:s[o]})i&&(f.value=Number(o)),r===t.premise.length-1?t.conclusion.forEach(b=>{this._add(b.subject.value,b.predicate.value,b.object.value,u,()=>{n(b)})}):this._evaluatePremise(t,u,n,r+1);i&&(f.value=null)}e&&(d.value=null)}p&&(l.value=null)}_evaluateRules(t,u,n){for(let r=0;r<t.length;r++)this._evaluatePremise(t[r],u,n)}_reasonGraphNaive(t,u){const n=[];function r(o){o.next&&o.next.forEach(c=>{n.push([o.subject.value,o.predicate.value,o.object.value,c])})}const e=o=>{o.forEach(c=>{this._add(c.subject.value,c.predicate.value,c.object.value,u,()=>{r(c)})})};this._evaluateRules(t,u,r);let i;for(;(i=n.pop())!==void 0;){const[o,c,s,l]=i,d=l.basePremise.subject.value;d||(l.basePremise.subject.value=o);const f=l.basePremise.predicate.value;f||(l.basePremise.predicate.value=c);const h=l.basePremise.object.value;h||(l.basePremise.object.value=s),l.premise.length===0?e(l.conclusion):this._evaluatePremise(l,u,r),d||(l.basePremise.subject.value=null),f||(l.basePremise.predicate.value=null),h||(l.basePremise.object.value=null)}}_createRule({premise:t,conclusion:u}){const n={},r=i=>i.termType==="Variable"?n[i.value]=n[i.value]||{}:{value:this._store._termToNewNumericId(i)},e=i=>({subject:r(i.subject),predicate:r(i.predicate),object:r(i.object)});return{premise:t.map(i=>e(i)),conclusion:u.map(i=>e(i)),variables:Object.values(n)}}reason(t){Array.isArray(t)||(t=M7(t)),t=t.map(n=>this._createRule(n));for(const n of t)for(const r of t)for(let e=0;e<r.premise.length;e++){const i=r.premise[e];for(const o of n.conclusion){if(XN(i.subject,o.subject)&&XN(i.predicate,o.predicate)&&XN(i.object,o.object)){const c=new Set,s=[];i.subject.value=i.subject.value||1,i.object.value=i.object.value||1,i.predicate.value=i.predicate.value||1;for(let l=0;l<r.premise.length;l++)l!==e&&s.push(q7(r.premise[l],c));(o.next=o.next||[]).push({premise:s,conclusion:r.conclusion,basePremise:i})}r.variables.forEach(c=>{c.value=null})}}for(const n of t){const r=new Set;n.premise=n.premise.map(e=>q7(e,r))}const u=this._store._getGraphs();for(const n in u)this._reasonGraphNaive(t,u[n]);this._store._size=null}}function q7({subject:a,predicate:t,object:u},n){const r=a.value||n.has(a)||(n.add(a),!1),e=t.value||n.has(t)||(n.add(t),!1),i=u.value||n.has(u)||(n.add(u),!1);return!r&&e?{content:"predicates",value:[t,u,a]}:i?{content:"objects",value:[u,a,t]}:{content:"subjects",value:[a,t,u]}}function XN(a,t){return a.value===null&&(a.value=t.value),a.value===t.value}class B7 extends lA.Transform{constructor(t){super({decodeStrings:!0}),this._readableState.objectMode=!0;const u=new oA(t);let n,r;const e={onQuad:(i,o)=>{i&&this.emit("error",i)||o&&this.push(o)},onPrefix:(i,o)=>{this.emit("prefix",i,o)}};t&&t.comments&&(e.onComment=i=>{this.emit("comment",i)}),u.parse({on:(i,o)=>{switch(i){case"data":n=o;break;case"end":r=o;break}}},e),this._transform=(i,o,c)=>{n(i),c()},this._flush=i=>{r(),i()}}import(t){return t.on("data",u=>{this.write(u)}),t.on("end",()=>{this.end()}),t.on("error",u=>{this.emit("error",u)}),this}}class $7 extends lA.Transform{constructor(t){super({encoding:"utf8",writableObjectMode:!0});const u=this._writer=new rm({write:(n,r,e)=>{this.push(n),e&&e()},end:n=>{this.push(null),n&&n()}},t);this._transform=(n,r,e)=>{u.addQuad(n,e)},this._flush=n=>{u.end(n)}}import(t){return t.on("data",u=>{this.write(u)}),t.on("end",()=>{this.end()}),t.on("error",u=>{this.emit("error",u)}),t.on("prefix",(u,n)=>{this._writer.addPrefix(u,n)}),this}}var sfe={Lexer:$N,Parser:oA,Writer:rm,Store:Ur,StoreFactory:L7,EntityIndex:kN,StreamParser:B7,StreamWriter:$7,Util:I7,Reasoner:C7,BaseIRI:Zb,DataFactory:Jn,Term:_n,NamedNode:uA,Literal:Eh,BlankNode:VN,Variable:UN,DefaultGraph:QN,Quad:Ih,Triple:Ih,termFromId:zo,termToId:Ta},cfe=Object.freeze({__proto__:null,BaseIRI:Zb,BlankNode:VN,DataFactory:Jn,DefaultGraph:QN,EntityIndex:kN,Lexer:$N,Literal:Eh,NamedNode:uA,Parser:oA,Quad:Ih,Reasoner:C7,Store:Ur,StoreFactory:L7,StreamParser:B7,StreamWriter:$7,Term:_n,Triple:Ih,Util:I7,Variable:UN,Writer:rm,default:sfe,getRulesFromDataset:M7,termFromId:zo,termToId:Ta}),Sa=Vt(cfe),V7;function lfe(){if(V7)return zb;V7=1,Object.defineProperty(zb,"__esModule",{value:!0}),zb.ActorRdfParseN3=void 0;const a=Oh(),t=ze(),u=Sa;let n=class extends a.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,i,o){var l;const c=e.context.getSafe(t.KeysInitQuery.dataFactory);e.data.on("error",d=>s.emit("error",d));const s=e.data.pipe(new u.StreamParser({factory:c,baseIRI:(l=e.metadata)==null?void 0:l.baseIRI,format:i.endsWith("n3")?i:`${i}*`}));return{data:s,metadata:{triples:i==="text/turtle"||i==="application/n-triples"||i==="text/n3"}}}};return zb.ActorRdfParseN3=n,zb}var U7;function dfe(){return U7||(U7=1,function(a){var t=Qo&&Qo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Qo&&Qo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(lfe(),a)}(Qo)),Qo}var ko={},im={},Xo={},Jo={},Ko={},JN={},Q7;function ffe(){return Q7||(Q7=1,function(a){/**
 * Character classes and associated utilities for the 5th edition of XML 1.0.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(a,"__esModule",{value:!0}),a.CHAR=`	
\r ---`,a.S=` 	\r
`,a.NAME_START_CHAR=":A-Z_a-z-----------",a.NAME_CHAR="-"+a.NAME_START_CHAR+".0-9--",a.CHAR_RE=new RegExp("^["+a.CHAR+"]$","u"),a.S_RE=new RegExp("^["+a.S+"]+$","u"),a.NAME_START_CHAR_RE=new RegExp("^["+a.NAME_START_CHAR+"]$","u"),a.NAME_CHAR_RE=new RegExp("^["+a.NAME_CHAR+"]$","u"),a.NAME_RE=new RegExp("^["+a.NAME_START_CHAR+"]["+a.NAME_CHAR+"]*$","u"),a.NMTOKEN_RE=new RegExp("^["+a.NAME_CHAR+"]+$","u");var t=9,u=10,n=13,r=32;a.S_LIST=[r,u,n,t];function e(s){return s>=r&&s<=55295||s===u||s===n||s===t||s>=57344&&s<=65533||s>=65536&&s<=1114111}a.isChar=e;function i(s){return s===r||s===u||s===n||s===t}a.isS=i;function o(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}a.isNameStartChar=o;function c(s){return o(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}a.isNameChar=c}(JN)),JN}var KN={},H7;function hfe(){return H7||(H7=1,function(a){/**
 * Character classes and associated utilities for the 2nd edition of XML 1.1.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(a,"__esModule",{value:!0}),a.CHAR="---",a.RESTRICTED_CHAR="-\b\v\f---",a.S=` 	\r
`,a.NAME_START_CHAR=":A-Z_a-z-----------",a.NAME_CHAR="-"+a.NAME_START_CHAR+".0-9--",a.CHAR_RE=new RegExp("^["+a.CHAR+"]$","u"),a.RESTRICTED_CHAR_RE=new RegExp("^["+a.RESTRICTED_CHAR+"]$","u"),a.S_RE=new RegExp("^["+a.S+"]+$","u"),a.NAME_START_CHAR_RE=new RegExp("^["+a.NAME_START_CHAR+"]$","u"),a.NAME_CHAR_RE=new RegExp("^["+a.NAME_CHAR+"]$","u"),a.NAME_RE=new RegExp("^["+a.NAME_START_CHAR+"]["+a.NAME_CHAR+"]*$","u"),a.NMTOKEN_RE=new RegExp("^["+a.NAME_CHAR+"]+$","u");var t=9,u=10,n=13,r=32;a.S_LIST=[r,u,n,t];function e(d){return d>=1&&d<=55295||d>=57344&&d<=65533||d>=65536&&d<=1114111}a.isChar=e;function i(d){return d>=1&&d<=8||d===11||d===12||d>=14&&d<=31||d>=127&&d<=132||d>=134&&d<=159}a.isRestrictedChar=i;function o(d){return d===9||d===10||d===13||d>31&&d<127||d===133||d>159&&d<=55295||d>=57344&&d<=65533||d>=65536&&d<=1114111}a.isCharAndNotRestricted=o;function c(d){return d===r||d===u||d===n||d===t}a.isS=c;function s(d){return d>=65&&d<=90||d>=97&&d<=122||d===58||d===95||d===8204||d===8205||d>=192&&d<=214||d>=216&&d<=246||d>=248&&d<=767||d>=880&&d<=893||d>=895&&d<=8191||d>=8304&&d<=8591||d>=11264&&d<=12271||d>=12289&&d<=55295||d>=63744&&d<=64975||d>=65008&&d<=65533||d>=65536&&d<=983039}a.isNameStartChar=s;function l(d){return s(d)||d>=48&&d<=57||d===45||d===46||d===183||d>=768&&d<=879||d>=8255&&d<=8256}a.isNameChar=l}(KN)),KN}var WN={},G7;function pfe(){return G7||(G7=1,function(a){/**
 * Character class utilities for XML NS 1.0 edition 3.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(a,"__esModule",{value:!0}),a.NC_NAME_START_CHAR="A-Z_a-z------------",a.NC_NAME_CHAR="-"+a.NC_NAME_START_CHAR+".0-9--",a.NC_NAME_START_CHAR_RE=new RegExp("^["+a.NC_NAME_START_CHAR+"]$","u"),a.NC_NAME_CHAR_RE=new RegExp("^["+a.NC_NAME_CHAR+"]$","u"),a.NC_NAME_RE=new RegExp("^["+a.NC_NAME_START_CHAR+"]["+a.NC_NAME_CHAR+"]*$","u");function t(n){return n>=65&&n<=90||n===95||n>=97&&n<=122||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}a.isNCNameStartChar=t;function u(n){return t(n)||n===45||n===46||n>=48&&n<=57||n===183||n>=768&&n<=879||n>=8255&&n<=8256}a.isNCNameChar=u}(WN)),WN}var z7;function k7(){if(z7)return Ko;z7=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.SaxesParser=Ko.EVENTS=void 0;const a=ffe(),t=hfe(),u=pfe();var n=a.isS,r=a.isChar,e=a.isNameStartChar,i=a.isNameChar,o=a.S_LIST,c=a.NAME_RE,s=t.isChar,l=u.isNCNameStartChar,d=u.isNCNameChar,f=u.NC_NAME_RE;const h="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",b={__proto__:null,xml:h,xmlns:p},_={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},y=-1,g=-2,m=0,v=1,T=2,S=3,x=4,L=5,O=6,w=7,A=8,E=9,R=10,V=11,$=12,Q=13,ne=14,ie=15,fe=16,J=17,_e=18,Fe=19,ve=20,te=21,Le=22,Ce=23,Ve=24,ge=25,we=26,G=27,D=28,j=29,I=30,N=31,B=32,X=33,H=34,K=35,z=36,Z=37,de=38,le=39,De=40,Qe=41,je=42,oe=43,se=44,ye=9,Ie=10,U=13,F=32,q=33,k=34,ce=38,be=39,Se=45,Ke=47,Y=59,Ee=60,Re=61,qe=62,Ue=63,tt=91,ut=93,rt=133,lt=8232,ae=Xe=>Xe===k||Xe===be,M=[k,be],P=[...M,tt,qe],C=[...M,Ee,ut],W=[Re,Ue,...o],me=[...o,qe,ce,Ee];function pe(Xe,ue,Oe){switch(ue){case"xml":Oe!==h&&Xe.fail(`xml prefix must be bound to ${h}.`);break;case"xmlns":Oe!==p&&Xe.fail(`xmlns prefix must be bound to ${p}.`);break}switch(Oe){case p:Xe.fail(ue===""?`the default namespace may not be set to ${Oe}.`:`may not assign a prefix (even "xmlns") to the URI ${p}.`);break;case h:switch(ue){case"xml":break;case"":Xe.fail(`the default namespace may not be set to ${Oe}.`);break;default:Xe.fail("may not assign the xml namespace to another prefix.")}break}}function Pe(Xe,ue){for(const Oe of Object.keys(ue))pe(Xe,Oe,ue[Oe])}const Be=Xe=>f.test(Xe),ke=Xe=>c.test(Xe),Je=0,ct=1,Ze=2;Ko.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const Ye={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class zr{get closed(){return this._closed}constructor(ue){this.opt=ue??{},this.fragmentOpt=!!this.opt.fragment;const Oe=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,Oe){this.nameStartCheck=l,this.nameCheck=d,this.isName=Be,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},b);const xe=this.opt.additionalNamespaces;xe!=null&&(Pe(this,xe),Object.assign(this.ns,xe))}else this.nameStartCheck=e,this.nameCheck=i,this.isName=ke,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var ue;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=Je,this.attribList=[];const{fragmentOpt:Oe}=this;this.state=Oe?Q:m,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=Oe,this.xmlDeclPossible=!Oe,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:xe}=this.opt;if(xe===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");xe="1.0"}this.setXMLVersion(xe),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(_),(ue=this.readyHandler)===null||ue===void 0||ue.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(ue,Oe){this[Ye[ue]]=Oe}off(ue){this[Ye[ue]]=void 0}makeError(ue){var Oe;let xe=(Oe=this.fileName)!==null&&Oe!==void 0?Oe:"";return this.trackPosition&&(xe.length>0&&(xe+=":"),xe+=`${this.line}:${this.column}`),xe.length>0&&(xe+=": "),new Error(xe+ue)}fail(ue){const Oe=this.makeError(ue),xe=this.errorHandler;if(xe===void 0)throw Oe;return xe(Oe),this}write(ue){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let Oe=!1;ue===null?(Oe=!0,ue=""):typeof ue=="object"&&(ue=ue.toString()),this.carriedFromPrevious!==void 0&&(ue=`${this.carriedFromPrevious}${ue}`,this.carriedFromPrevious=void 0);let xe=ue.length;const nt=ue.charCodeAt(xe-1);!Oe&&(nt===U||nt>=55296&&nt<=56319)&&(this.carriedFromPrevious=ue[xe-1],xe--,ue=ue.slice(0,xe));const{stateTable:it}=this;for(this.chunk=ue,this.i=0;this.i<xe;)it[this.state].call(this);return this.chunkPosition+=xe,Oe?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:ue,i:Oe}=this;if(this.prevI=Oe,this.i=Oe+1,Oe>=ue.length)return y;const xe=ue.charCodeAt(Oe);if(this.column++,xe<55296){if(xe>=F||xe===ye)return xe;switch(xe){case Ie:return this.line++,this.column=0,this.positionAtNewLine=this.position,Ie;case U:return ue.charCodeAt(Oe+1)===Ie&&(this.i=Oe+2),this.line++,this.column=0,this.positionAtNewLine=this.position,g;default:return this.fail("disallowed character."),xe}}if(xe>56319)return xe>=57344&&xe<=65533||this.fail("disallowed character."),xe;const nt=65536+(xe-55296)*1024+(ue.charCodeAt(Oe+1)-56320);return this.i=Oe+2,nt>1114111&&this.fail("disallowed character."),nt}getCode11(){const{chunk:ue,i:Oe}=this;if(this.prevI=Oe,this.i=Oe+1,Oe>=ue.length)return y;const xe=ue.charCodeAt(Oe);if(this.column++,xe<55296){if(xe>31&&xe<127||xe>159&&xe!==lt||xe===ye)return xe;switch(xe){case Ie:return this.line++,this.column=0,this.positionAtNewLine=this.position,Ie;case U:{const it=ue.charCodeAt(Oe+1);(it===Ie||it===rt)&&(this.i=Oe+2)}case rt:case lt:return this.line++,this.column=0,this.positionAtNewLine=this.position,g;default:return this.fail("disallowed character."),xe}}if(xe>56319)return xe>=57344&&xe<=65533||this.fail("disallowed character."),xe;const nt=65536+(xe-55296)*1024+(ue.charCodeAt(Oe+1)-56320);return this.i=Oe+2,nt>1114111&&this.fail("disallowed character."),nt}getCodeNorm(){const ue=this.getCode();return ue===g?Ie:ue}unget(){this.i=this.prevI,this.column--}captureTo(ue){let{i:Oe}=this;const{chunk:xe}=this;for(;;){const nt=this.getCode(),it=nt===g,Ot=it?Ie:nt;if(Ot===y||ue.includes(Ot))return this.text+=xe.slice(Oe,this.prevI),Ot;it&&(this.text+=`${xe.slice(Oe,this.prevI)}
`,Oe=this.i)}}captureToChar(ue){let{i:Oe}=this;const{chunk:xe}=this;for(;;){let nt=this.getCode();switch(nt){case g:this.text+=`${xe.slice(Oe,this.prevI)}
`,Oe=this.i,nt=Ie;break;case y:return this.text+=xe.slice(Oe),!1}if(nt===ue)return this.text+=xe.slice(Oe,this.prevI),!0}}captureNameChars(){const{chunk:ue,i:Oe}=this;for(;;){const xe=this.getCode();if(xe===y)return this.name+=ue.slice(Oe),y;if(!i(xe))return this.name+=ue.slice(Oe,this.prevI),xe===g?Ie:xe}}skipSpaces(){for(;;){const ue=this.getCodeNorm();if(ue===y||!n(ue))return ue}}setXMLVersion(ue){this.currentXMLVersion=ue,ue==="1.0"?(this.isChar=r,this.getCode=this.getCode10):(this.isChar=s,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=v}sBeginWhitespace(){const ue=this.i,Oe=this.skipSpaces();switch(this.prevI!==ue&&(this.xmlDeclPossible=!1),Oe){case Ee:if(this.state=ie,this.text.length!==0)throw new Error("no-empty text at start");break;case y:break;default:this.unget(),this.state=Q,this.xmlDeclPossible=!1}}sDoctype(){var ue;const Oe=this.captureTo(P);switch(Oe){case qe:{(ue=this.doctypeHandler)===null||ue===void 0||ue.call(this,this.text),this.text="",this.state=Q,this.doctype=!0;break}case y:break;default:this.text+=String.fromCodePoint(Oe),Oe===tt?this.state=x:ae(Oe)&&(this.state=S,this.q=Oe)}}sDoctypeQuote(){const ue=this.q;this.captureToChar(ue)&&(this.text+=String.fromCodePoint(ue),this.q=null,this.state=T)}sDTD(){const ue=this.captureTo(C);ue!==y&&(this.text+=String.fromCodePoint(ue),ue===ut?this.state=T:ue===Ee?this.state=O:ae(ue)&&(this.state=L,this.q=ue))}sDTDQuoted(){const ue=this.q;this.captureToChar(ue)&&(this.text+=String.fromCodePoint(ue),this.state=x,this.q=null)}sDTDOpenWaka(){const ue=this.getCodeNorm();switch(this.text+=String.fromCodePoint(ue),ue){case q:this.state=w,this.openWakaBang="";break;case Ue:this.state=V;break;default:this.state=x}}sDTDOpenWakaBang(){const ue=String.fromCodePoint(this.getCodeNorm()),Oe=this.openWakaBang+=ue;this.text+=ue,Oe!=="-"&&(this.state=Oe==="--"?A:x,this.openWakaBang="")}sDTDComment(){this.captureToChar(Se)&&(this.text+="-",this.state=E)}sDTDCommentEnding(){const ue=this.getCodeNorm();this.text+=String.fromCodePoint(ue),this.state=ue===Se?R:A}sDTDCommentEnded(){const ue=this.getCodeNorm();this.text+=String.fromCodePoint(ue),ue===qe?this.state=x:(this.fail("malformed comment."),this.state=A)}sDTDPI(){this.captureToChar(Ue)&&(this.text+="?",this.state=$)}sDTDPIEnding(){const ue=this.getCodeNorm();this.text+=String.fromCodePoint(ue),ue===qe&&(this.state=x)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:ue}=this;const{chunk:Oe}=this;e:for(;;)switch(this.getCode()){case g:this.entity+=`${Oe.slice(ue,this.prevI)}
`,ue=this.i;break;case Y:{const{entityReturnState:xe}=this,nt=this.entity+Oe.slice(ue,this.prevI);this.state=xe;let it;nt===""?(this.fail("empty entity name."),it="&;"):(it=this.parseEntity(nt),this.entity=""),(xe!==Q||this.textHandler!==void 0)&&(this.text+=it);break e}case y:this.entity+=Oe.slice(ue);break e}}sOpenWaka(){const ue=this.getCode();if(e(ue))this.state=H,this.unget(),this.xmlDeclPossible=!1;else switch(ue){case Ke:this.state=oe,this.xmlDeclPossible=!1;break;case q:this.state=fe,this.openWakaBang="",this.xmlDeclPossible=!1;break;case Ue:this.state=Ce;break;default:this.fail("disallowed character in tag name"),this.state=Q,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=ve,this.openWakaBang="";break;case"--":this.state=J,this.openWakaBang="";break;case"DOCTYPE":this.state=T,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(Se)&&(this.state=_e)}sCommentEnding(){var ue;const Oe=this.getCodeNorm();Oe===Se?(this.state=Fe,(ue=this.commentHandler)===null||ue===void 0||ue.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(Oe)}`,this.state=J)}sCommentEnded(){const ue=this.getCodeNorm();ue!==qe?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(ue)}`,this.state=J):this.state=Q}sCData(){this.captureToChar(ut)&&(this.state=te)}sCDataEnding(){const ue=this.getCodeNorm();ue===ut?this.state=Le:(this.text+=`]${String.fromCodePoint(ue)}`,this.state=ve)}sCDataEnding2(){var ue;const Oe=this.getCodeNorm();switch(Oe){case qe:{(ue=this.cdataHandler)===null||ue===void 0||ue.call(this,this.text),this.text="",this.state=Q;break}case ut:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(Oe)}`,this.state=ve}}sPIFirstChar(){const ue=this.getCodeNorm();this.nameStartCheck(ue)?(this.piTarget+=String.fromCodePoint(ue),this.state=Ve):ue===Ue||n(ue)?(this.fail("processing instruction without a target."),this.state=ue===Ue?we:ge):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(ue),this.state=Ve)}sPIRest(){const{chunk:ue,i:Oe}=this;for(;;){const xe=this.getCodeNorm();if(xe===y){this.piTarget+=ue.slice(Oe);return}if(!this.nameCheck(xe)){this.piTarget+=ue.slice(Oe,this.prevI);const nt=xe===Ue;nt||n(xe)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=nt?X:G):this.state=nt?we:ge:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(xe));break}}}sPIBody(){if(this.text.length===0){const ue=this.getCodeNorm();ue===Ue?this.state=we:n(ue)||(this.text=String.fromCodePoint(ue))}else this.captureToChar(Ue)&&(this.state=we)}sPIEnding(){var ue;const Oe=this.getCodeNorm();if(Oe===qe){const{piTarget:xe}=this;xe.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(ue=this.piHandler)===null||ue===void 0||ue.call(this,{target:xe,body:this.text}),this.piTarget=this.text="",this.state=Q}else Oe===Ue?this.text+="?":(this.text+=`?${String.fromCodePoint(Oe)}`,this.state=ge);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const ue=this.skipSpaces();if(ue===Ue){this.state=X;return}ue!==y&&(this.state=D,this.name=String.fromCodePoint(ue))}sXMLDeclName(){const ue=this.captureTo(W);if(ue===Ue){this.state=X,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(n(ue)||ue===Re){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=ue===Re?I:j}}sXMLDeclEq(){const ue=this.getCodeNorm();if(ue===Ue){this.state=X,this.fail("XML declaration is incomplete.");return}n(ue)||(ue!==Re&&this.fail("value required."),this.state=I)}sXMLDeclValueStart(){const ue=this.getCodeNorm();if(ue===Ue){this.state=X,this.fail("XML declaration is incomplete.");return}n(ue)||(ae(ue)?this.q=ue:(this.fail("value must be quoted."),this.q=F),this.state=N)}sXMLDeclValue(){const ue=this.captureTo([this.q,Ue]);if(ue===Ue){this.state=X,this.text="",this.fail("XML declaration is incomplete.");return}if(ue===y)return;const Oe=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const xe=Oe;this.xmlDecl.version=xe,/^1\.[0-9]+$/.test(xe)?this.opt.forceXMLVersion||this.setXMLVersion(xe):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(Oe)||this.fail("encoding value must match 	/^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=Oe;break;case"standalone":Oe!=="yes"&&Oe!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=Oe;break}this.name="",this.state=B}sXMLDeclSeparator(){const ue=this.getCodeNorm();if(ue===Ue){this.state=X;return}n(ue)||(this.fail("whitespace required."),this.unget()),this.state=G}sXMLDeclEnding(){var ue;this.getCodeNorm()===qe?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(ue=this.xmldeclHandler)===null||ue===void 0||ue.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=Q):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var ue;const Oe=this.captureNameChars();if(Oe===y)return;const xe=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=xe.ns=Object.create(null)),(ue=this.openTagStartHandler)===null||ue===void 0||ue.call(this,xe),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),Oe){case qe:this.openTag();break;case Ke:this.state=K;break;default:n(Oe)||this.fail("disallowed character in tag name."),this.state=z}}sOpenTagSlash(){this.getCode()===qe?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=z)}sAttrib(){const ue=this.skipSpaces();ue!==y&&(e(ue)?(this.unget(),this.state=Z):ue===qe?this.openTag():ue===Ke?this.state=K:this.fail("disallowed character in attribute name."))}sAttribName(){const ue=this.captureNameChars();ue===Re?this.state=le:n(ue)?this.state=de:ue===qe?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):ue!==y&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const ue=this.skipSpaces();switch(ue){case y:return;case Re:this.state=le;break;default:this.fail("attribute without value."),this.text="",this.name="",ue===qe?this.openTag():e(ue)?(this.unget(),this.state=Z):(this.fail("disallowed character in attribute name."),this.state=z)}}sAttribValue(){const ue=this.getCodeNorm();ae(ue)?(this.q=ue,this.state=De):n(ue)||(this.fail("unquoted attribute value."),this.state=je,this.unget())}sAttribValueQuoted(){const{q:ue,chunk:Oe}=this;let{i:xe}=this;for(;;)switch(this.getCode()){case ue:this.pushAttrib(this.name,this.text+Oe.slice(xe,this.prevI)),this.name=this.text="",this.q=null,this.state=Qe;return;case ce:this.text+=Oe.slice(xe,this.prevI),this.state=ne,this.entityReturnState=De;return;case Ie:case g:case ye:this.text+=`${Oe.slice(xe,this.prevI)} `,xe=this.i;break;case Ee:this.text+=Oe.slice(xe,this.prevI),this.fail("disallowed character.");return;case y:this.text+=Oe.slice(xe);return}}sAttribValueClosed(){const ue=this.getCodeNorm();n(ue)?this.state=z:ue===qe?this.openTag():ue===Ke?this.state=K:e(ue)?(this.fail("no whitespace between attributes."),this.unget(),this.state=Z):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const ue=this.captureTo(me);switch(ue){case ce:this.state=ne,this.entityReturnState=je;break;case Ee:this.fail("disallowed character.");break;case y:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",ue===qe?this.openTag():this.state=z}}sCloseTag(){const ue=this.captureNameChars();ue===qe?this.closeTag():n(ue)?this.state=se:ue!==y&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case qe:this.closeTag();break;case y:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:ue,forbiddenState:Oe}=this;const{chunk:xe,textHandler:nt}=this;e:for(;;)switch(this.getCode()){case Ee:{if(this.state=ie,nt!==void 0){const{text:it}=this,Ot=xe.slice(ue,this.prevI);it.length!==0?(nt(it+Ot),this.text=""):Ot.length!==0&&nt(Ot)}Oe=Je;break e}case ce:this.state=ne,this.entityReturnState=Q,nt!==void 0&&(this.text+=xe.slice(ue,this.prevI)),Oe=Je;break e;case ut:switch(Oe){case Je:Oe=ct;break;case ct:Oe=Ze;break;case Ze:break;default:throw new Error("impossible state")}break;case qe:Oe===Ze&&this.fail('the string "]]>" is disallowed in char data.'),Oe=Je;break;case g:nt!==void 0&&(this.text+=`${xe.slice(ue,this.prevI)}
`),ue=this.i,Oe=Je;break;case y:nt!==void 0&&(this.text+=xe.slice(ue));break e;default:Oe=Je}this.forbiddenState=Oe}handleTextOutsideRoot(){let{i:ue}=this;const{chunk:Oe,textHandler:xe}=this;let nt=!1;e:for(;;){const it=this.getCode();switch(it){case Ee:{if(this.state=ie,xe!==void 0){const{text:Ot}=this,cr=Oe.slice(ue,this.prevI);Ot.length!==0?(xe(Ot+cr),this.text=""):cr.length!==0&&xe(cr)}break e}case ce:this.state=ne,this.entityReturnState=Q,xe!==void 0&&(this.text+=Oe.slice(ue,this.prevI)),nt=!0;break e;case g:xe!==void 0&&(this.text+=`${Oe.slice(ue,this.prevI)}
`),ue=this.i;break;case y:xe!==void 0&&(this.text+=Oe.slice(ue));break e;default:n(it)||(nt=!0)}}nt&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(ue,Oe){var xe;const{prefix:nt,local:it}=this.qname(ue),Ot={name:ue,prefix:nt,local:it,value:Oe};if(this.attribList.push(Ot),(xe=this.attributeHandler)===null||xe===void 0||xe.call(this,Ot),nt==="xmlns"){const cr=Oe.trim();this.currentXMLVersion==="1.0"&&cr===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[it]=cr,pe(this,it,cr)}else if(ue==="xmlns"){const cr=Oe.trim();this.topNS[""]=cr,pe(this,"",cr)}}pushAttribPlain(ue,Oe){var xe;const nt={name:ue,value:Oe};this.attribList.push(nt),(xe=this.attributeHandler)===null||xe===void 0||xe.call(this,nt)}end(){var ue,Oe;this.sawRoot||this.fail("document must contain a root element.");const{tags:xe}=this;for(;xe.length>0;){const it=xe.pop();this.fail(`unclosed tag: ${it.name}`)}this.state!==m&&this.state!==Q&&this.fail("unexpected end.");const{text:nt}=this;return nt.length!==0&&((ue=this.textHandler)===null||ue===void 0||ue.call(this,nt),this.text=""),this._closed=!0,(Oe=this.endHandler)===null||Oe===void 0||Oe.call(this),this._init(),this}resolve(ue){var Oe,xe;let nt=this.topNS[ue];if(nt!==void 0)return nt;const{tags:it}=this;for(let Ot=it.length-1;Ot>=0;Ot--)if(nt=it[Ot].ns[ue],nt!==void 0)return nt;return nt=this.ns[ue],nt!==void 0?nt:(xe=(Oe=this.opt).resolvePrefix)===null||xe===void 0?void 0:xe.call(Oe,ue)}qname(ue){const Oe=ue.indexOf(":");if(Oe===-1)return{prefix:"",local:ue};const xe=ue.slice(Oe+1),nt=ue.slice(0,Oe);return(nt===""||xe===""||xe.includes(":"))&&this.fail(`malformed name: ${ue}.`),{prefix:nt,local:xe}}processAttribsNS(){var ue;const{attribList:Oe}=this,xe=this.tag;{const{prefix:Ot,local:cr}=this.qname(xe.name);xe.prefix=Ot,xe.local=cr;const Jt=xe.uri=(ue=this.resolve(Ot))!==null&&ue!==void 0?ue:"";Ot!==""&&(Ot==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),Jt===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Ot)}.`),xe.uri=Ot))}if(Oe.length===0)return;const{attributes:nt}=xe,it=new Set;for(const Ot of Oe){const{name:cr,prefix:Jt,local:Yi}=Ot;let wn,tr;Jt===""?(wn=cr==="xmlns"?p:"",tr=cr):(wn=this.resolve(Jt),wn===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Jt)}.`),wn=Jt),tr=`{${wn}}${Yi}`),it.has(tr)&&this.fail(`duplicate attribute: ${tr}.`),it.add(tr),Ot.uri=wn,nt[cr]=Ot}this.attribList=[]}processAttribsPlain(){const{attribList:ue}=this,Oe=this.tag.attributes;for(const{name:xe,value:nt}of ue)Oe[xe]!==void 0&&this.fail(`duplicate attribute: ${xe}.`),Oe[xe]=nt;this.attribList=[]}openTag(){var ue;this.processAttribs();const{tags:Oe}=this,xe=this.tag;xe.isSelfClosing=!1,(ue=this.openTagHandler)===null||ue===void 0||ue.call(this,xe),Oe.push(xe),this.state=Q,this.name=""}openSelfClosingTag(){var ue,Oe,xe;this.processAttribs();const{tags:nt}=this,it=this.tag;it.isSelfClosing=!0,(ue=this.openTagHandler)===null||ue===void 0||ue.call(this,it),(Oe=this.closeTagHandler)===null||Oe===void 0||Oe.call(this,it),(this.tag=(xe=nt[nt.length-1])!==null&&xe!==void 0?xe:null)===null&&(this.closedRoot=!0),this.state=Q,this.name=""}closeTag(){const{tags:ue,name:Oe}=this;if(this.state=Q,this.name="",Oe===""){this.fail("weird empty close tag."),this.text+="</>";return}const xe=this.closeTagHandler;let nt=ue.length;for(;nt-- >0;){const it=this.tag=ue.pop();if(this.topNS=it.ns,xe==null||xe(it),it.name===Oe)break;this.fail("unexpected close tag.")}nt===0?this.closedRoot=!0:nt<0&&(this.fail(`unmatched closing tag: ${Oe}.`),this.text+=`</${Oe}>`)}parseEntity(ue){if(ue[0]!=="#"){const xe=this.ENTITIES[ue];return xe!==void 0?xe:(this.fail(this.isName(ue)?"undefined entity.":"disallowed character in entity name."),`&${ue};`)}let Oe=NaN;return ue[1]==="x"&&/^#x[0-9a-f]+$/i.test(ue)?Oe=parseInt(ue.slice(2),16):/^#[0-9]+$/.test(ue)&&(Oe=parseInt(ue.slice(1),10)),this.isChar(Oe)?String.fromCodePoint(Oe):(this.fail("malformed character entity."),`&${ue};`)}}return Ko.SaxesParser=zr,Ko}var am={},X7;function yfe(){if(X7)return am;X7=1,Object.defineProperty(am,"__esModule",{value:!0}),am.ParseError=void 0;let a=class extends Error{constructor(u,n){const r=u.saxParser;super(u.trackPosition?`Line ${r.line} column ${r.column+1}: ${n}`:n)}};return am.ParseError=a,am}var Wo={},um={},J7;function K7(){if(J7)return um;J7=1,Object.defineProperty(um,"__esModule",{value:!0}),um.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return um.BlankNode=a,um}var om={},sm={},W7;function Y7(){if(W7)return sm;W7=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return sm.DefaultGraph=a,a.INSTANCE=new a,sm}var cm={},lm={},Z7;function YN(){if(Z7)return lm;Z7=1,Object.defineProperty(lm,"__esModule",{value:!0}),lm.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return lm.NamedNode=a,lm}var eB;function tB(){if(eB)return cm;eB=1,Object.defineProperty(cm,"__esModule",{value:!0}),cm.Literal=void 0;const a=YN();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return cm.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),cm}var dm={},rB;function nB(){if(rB)return dm;rB=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return dm.Quad=a,dm}var fm={},iB;function aB(){if(iB)return fm;iB=1,Object.defineProperty(fm,"__esModule",{value:!0}),fm.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return fm.Variable=a,fm}var uB;function bfe(){if(uB)return om;uB=1,Object.defineProperty(om,"__esModule",{value:!0}),om.DataFactory=void 0;const a=K7(),t=Y7(),u=tB(),n=YN(),r=nB(),e=aB();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return om.DataFactory=o,om}var oB;function mfe(){return oB||(oB=1,function(a){var t=Wo&&Wo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Wo&&Wo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(K7(),a),u(bfe(),a),u(Y7(),a),u(tB(),a),u(YN(),a),u(nB(),a),u(aB(),a)}(Wo)),Wo}var Yo={},ZN={},sB;function _fe(){return sB||(sB=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.validateIri=a.IriValidationStrategy=void 0;function t(){const o="[!$&'()*+,;=]",c="%[a-fA-F0-9]{2}",s="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",l=`${s}\\.${s}\\.${s}\\.${s}`,d="[a-fA-F0-9]{1,4}",f=`(${d}:${d}|${l})`,h=`((${d}:){6}${f}|::(${d}:){5}${f}|(${d})?::(${d}:){4}${f}|((${d}:){0,1}${d})?::(${d}:){3}${f}|((${d}:){0,2}${d})?::(${d}:){2}${f}|((${d}:){0,3}${d})?::${d}:${f}|((${d}:){0,4}${d})?::${f}|((${d}:){0,5}${d})?::${d}|((${d}:){0,6}${d})?::)`,p=`v[a-fA-F0-9]+\\.(${o}|${o}|":)+`,b=`\\[(${h}|${p})\\]`,_="[0-9]*",y="[a-zA-Z][a-zA-Z0-9+\\-.]*",m="[---]",S="[a-zA-Z0-9\\-._~-----------------]",x=`(${S}|${c}|${o}|[:@])*`,L=`(${x}|[\\/?])*`,O=`(${x}|${m}|[\\/?])*`,w=`(${x})+`,A=`(${x})*`,E="",R=`${w}(\\/${A})*`,V=`\\/(${w}(\\/${A})*)?`,$=`(\\/${A})*`,Q=`(${S}|${c}|${o})*`,ne=`(${b}|${l}|${Q})`,J=`(\\/\\/${`(${`(${S}|${c}|${o}|:)*`}@)?${ne}(:${_})?`}${$}|${V}|${R}|${E})`,_e=`^${y}:${J}(\\?${O})?(#${L})?$`;return new RegExp(_e,"u")}const u=t(),n=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var r;(function(i){i.Strict="strict",i.Pragmatic="pragmatic",i.None="none"})(r=a.IriValidationStrategy||(a.IriValidationStrategy={}));function e(i,o=r.Strict){switch(o){case r.Strict:return u.test(i)?void 0:new Error(`Invalid IRI according to RFC 3987: '${i}'`);case r.Pragmatic:return n.test(i)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${i}'`);case r.None:return;default:return new Error(`Not supported validation strategy "${o}"`)}}a.validateIri=e}(ZN)),ZN}var cB;function gfe(){return cB||(cB=1,function(a){var t=Yo&&Yo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Yo&&Yo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(_fe(),a)}(Yo)),Yo}var lB;function vfe(){if(lB)return Jo;lB=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.ParseType=Jo.RdfXmlParser=void 0;const a=vr(),t=k7(),u=Mt(),n=yfe(),r=mfe(),e=gfe();let i=class lr extends u.Transform{constructor(s){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},s&&(Object.assign(this,s),this.options=s),this.dataFactory||(this.dataFactory=new r.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?e.IriValidationStrategy.Pragmatic:e.IriValidationStrategy.None),this.saxParser=new t.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(s){const l=new u.PassThrough({readableObjectMode:!0});s.on("error",f=>d.emit("error",f)),s.on("data",f=>l.push(f)),s.on("end",()=>l.push(null));const d=l.pipe(new lr(this.options));return d}_transform(s,l,d){try{this.saxParser.write(s)}catch(f){return d(f)}d()}newParseError(s){return new n.ParseError(this,s)}valueToUri(s,l){return this.uriToNamedNode((0,a.resolve)(s,l.baseIRI))}uriToNamedNode(s){const l=(0,e.validateIri)(s,this.iriValidationStrategy);if(l instanceof Error)throw this.newParseError(l.message);return this.dataFactory.namedNode(s)}validateNcname(s){if(!lr.NCNAME_MATCHER.test(s))throw this.newParseError(`Not a valid NCName: ${s}`)}attachSaxListeners(){this.saxParser.on("error",s=>this.emit("error",s)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(s){const l=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let d=o.RESOURCE;if(l&&(l.hadChildren=!0,d=l.childrenParseType),l&&l.childrenStringTags){const h=s.name;let p="";for(const g in s.attributes)p+=` ${g}="${s.attributes[g].value}"`;const _=`<${`${h}${p}`}>`;l.childrenStringTags.push(_);const y={childrenStringTags:l.childrenStringTags};y.childrenStringEmitClosingTag=`</${h}>`,this.activeTagStack.push(y);return}const f={};l?(f.language=l.language,f.baseIRI=l.baseIRI):f.baseIRI=this.baseIRI,this.activeTagStack.push(f),d===o.RESOURCE?this.onTagResource(s,f,l,!l):this.onTagProperty(s,f,l)}onTagResource(s,l,d,f){l.childrenParseType=o.PROPERTY;let h=!0;if(s.uri===lr.RDF){if(!f&&lr.FORBIDDEN_NODE_ELEMENTS.indexOf(s.local)>=0)throw this.newParseError(`Illegal node element name: ${s.local}`);switch(s.local){case"RDF":l.childrenParseType=o.RESOURCE;case"Description":h=!1}}const p=[],b=[];let _=null,y=!1,g=!1,m=null;for(const v in s.attributes){const T=s.attributes[v];if(d&&T.uri===lr.RDF)switch(T.local){case"about":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${T.value} and ${_} where found.`);_=T.value;continue;case"ID":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${T.value} and ${_} where found.`);this.validateNcname(T.value),_="#"+T.value,y=!0;continue;case"nodeID":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${T.value} and ${_} where found.`);this.validateNcname(T.value),_=T.value,g=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":m=T.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(T.uri===lr.XML){if(T.local==="lang"){l.language=T.value===""?null:T.value.toLowerCase();continue}else if(T.local==="base"){l.baseIRI=(0,a.resolve)(T.value,l.baseIRI);continue}}T.prefix!=="xml"&&T.prefix!=="xmlns"&&(T.prefix!==""||T.local!=="xmlns")&&T.uri&&(p.push(this.uriToNamedNode(T.uri+T.local)),b.push(T.value))}if(_!==null&&(l.subject=g?this.dataFactory.blankNode(_):this.valueToUri(_,l),y&&this.claimNodeId(l.subject)),l.subject||(l.subject=this.dataFactory.blankNode()),h){const v=this.uriToNamedNode(s.uri+s.local);this.emitTriple(l.subject,this.dataFactory.namedNode(lr.RDF+"type"),v,d?d.reifiedStatementId:null)}if(d){if(d.predicate)if(d.childrenCollectionSubject){const v=this.dataFactory.blankNode();this.emitTriple(d.childrenCollectionSubject,d.childrenCollectionPredicate,v,d.reifiedStatementId),this.emitTriple(v,this.dataFactory.namedNode(lr.RDF+"first"),l.subject,l.reifiedStatementId),d.childrenCollectionSubject=v,d.childrenCollectionPredicate=this.dataFactory.namedNode(lr.RDF+"rest")}else{this.emitTriple(d.subject,d.predicate,l.subject,d.reifiedStatementId);for(let v=0;v<d.predicateSubPredicates.length;v++)this.emitTriple(l.subject,d.predicateSubPredicates[v],d.predicateSubObjects[v],null);d.predicateSubPredicates=[],d.predicateSubObjects=[],d.predicateEmitted=!0}for(let v=0;v<p.length;v++){const T=this.dataFactory.literal(b[v],l.datatype||l.language);this.emitTriple(l.subject,p[v],T,d.reifiedStatementId)}m&&this.emitTriple(l.subject,this.dataFactory.namedNode(lr.RDF+"type"),this.uriToNamedNode(m),null)}}onTagProperty(s,l,d){if(l.childrenParseType=o.RESOURCE,l.subject=d.subject,s.uri===lr.RDF&&s.local==="li"?(d.listItemCounter||(d.listItemCounter=1),l.predicate=this.uriToNamedNode(s.uri+"_"+d.listItemCounter++)):l.predicate=this.uriToNamedNode(s.uri+s.local),s.uri===lr.RDF&&lr.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(s.local)>=0)throw this.newParseError(`Illegal property element name: ${s.local}`);l.predicateSubPredicates=[],l.predicateSubObjects=[];let f=!1,h=!1,p=null,b=!0;const _=[],y=[];for(const g in s.attributes){const m=s.attributes[g];if(m.uri===lr.RDF)switch(m.local){case"resource":if(p)throw this.newParseError(`Found both rdf:resource (${m.value}) and rdf:nodeID (${p}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${m.value})`);l.hadChildren=!0,p=m.value,b=!1;continue;case"datatype":if(h)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${m.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${m.value})`);l.datatype=this.valueToUri(m.value,l);continue;case"nodeID":if(h)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${m.value}).`);if(l.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${m.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${m.value})`);this.validateNcname(m.value),l.hadChildren=!0,p=m.value,b=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(h)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(l.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${l.datatype.value})`);if(p)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${p})`);if(m.value==="Resource"){f=!0,l.childrenParseType=o.PROPERTY;const v=this.dataFactory.blankNode();this.emitTriple(l.subject,l.predicate,v,l.reifiedStatementId),l.subject=v,l.predicate=null}else m.value==="Collection"?(f=!0,l.hadChildren=!0,l.childrenCollectionSubject=l.subject,l.childrenCollectionPredicate=l.predicate,b=!1):m.value==="Literal"&&(f=!0,l.childrenTagsToString=!0,l.childrenStringTags=[]);continue;case"ID":this.validateNcname(m.value),l.reifiedStatementId=this.valueToUri("#"+m.value,l),this.claimNodeId(l.reifiedStatementId);continue}else if(m.uri===lr.XML&&m.local==="lang"){l.language=m.value===""?null:m.value.toLowerCase();continue}if(m.prefix!=="xml"&&m.prefix!=="xmlns"&&(m.prefix!==""||m.local!=="xmlns")&&m.uri){if(f||l.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${m.value}`);l.hadChildren=!0,h=!0,_.push(this.uriToNamedNode(m.uri+m.local)),y.push(this.dataFactory.literal(m.value,l.datatype||l.language))}}if(p!==null){const g=l.subject;l.subject=b?this.dataFactory.blankNode(p):this.valueToUri(p,l),this.emitTriple(g,l.predicate,l.subject,l.reifiedStatementId);for(let m=0;m<_.length;m++)this.emitTriple(l.subject,_[m],y[m],null);l.predicateEmitted=!0}else b&&(l.predicateSubPredicates=_,l.predicateSubObjects=y,l.predicateEmitted=!1)}emitTriple(s,l,d,f){this.push(this.dataFactory.quad(s,l,d,this.defaultGraph)),f&&(this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(lr.RDF+"type"),this.dataFactory.namedNode(lr.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(lr.RDF+"subject"),s,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(lr.RDF+"predicate"),l,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(lr.RDF+"object"),d,this.defaultGraph)))}claimNodeId(s){if(!this.allowDuplicateRdfIds){if(this.nodeIds[s.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${s.value}'.`);this.nodeIds[s.value]=!0}}onText(s){const l=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;l&&(l.childrenStringTags?l.childrenStringTags.push(s):l.predicate&&(l.text=s))}onCloseTag(){const s=this.activeTagStack.pop();if(s.childrenStringEmitClosingTag&&s.childrenStringTags.push(s.childrenStringEmitClosingTag),s.childrenTagsToString&&(s.datatype=this.dataFactory.namedNode(lr.RDF+"XMLLiteral"),s.text=s.childrenStringTags.join(""),s.hadChildren=!1),s.childrenCollectionSubject)this.emitTriple(s.childrenCollectionSubject,s.childrenCollectionPredicate,this.dataFactory.namedNode(lr.RDF+"nil"),s.reifiedStatementId);else if(s.predicate){if(!s.hadChildren&&s.childrenParseType!==o.PROPERTY)this.emitTriple(s.subject,s.predicate,this.dataFactory.literal(s.text||"",s.datatype||s.language),s.reifiedStatementId);else if(!s.predicateEmitted){const l=this.dataFactory.blankNode();this.emitTriple(s.subject,s.predicate,l,s.reifiedStatementId);for(let d=0;d<s.predicateSubPredicates.length;d++)this.emitTriple(l,s.predicateSubPredicates[d],s.predicateSubObjects[d],null)}}}onDoctype(s){s.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(l,d,f)=>(this.saxParser.ENTITIES[d]=f,""))}};Jo.RdfXmlParser=i,i.MIME_TYPE="application/rdf+xml",i.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i.XML="http://www.w3.org/XML/1998/namespace",i.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],i.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],i.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u;var o;return function(c){c[c.RESOURCE=0]="RESOURCE",c[c.PROPERTY=1]="PROPERTY"}(o||(Jo.ParseType=o={})),Jo}var dB;function Tfe(){return dB||(dB=1,function(a){var t=Xo&&Xo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Xo&&Xo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(vfe(),a)}(Xo)),Xo}var fB;function wfe(){if(fB)return im;fB=1,Object.defineProperty(im,"__esModule",{value:!0}),im.ActorRdfParseRdfXml=void 0;const a=Oh(),t=ze(),u=Tfe();let n=class extends a.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e){var c;const i=e.context.getSafe(t.KeysInitQuery.dataFactory);e.data.on("error",s=>o.emit("error",s));const o=e.data.pipe(new u.RdfXmlParser({dataFactory:i,baseIRI:(c=e.metadata)==null?void 0:c.baseIRI}));return{data:o,metadata:{triples:!0}}}};return im.ActorRdfParseRdfXml=n,im}var hB;function Sfe(){return hB||(hB=1,function(a){var t=ko&&ko.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ko&&ko.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(wfe(),a)}(ko)),ko}var Zo={},hm={},es={},eR={},pB;function Ofe(){return pB||(pB=1,Object.defineProperty(eR,"__esModule",{value:!0})),eR}var tR={},yB;function Afe(){return yB||(yB=1,Object.defineProperty(tR,"__esModule",{value:!0})),tR}var rR={},bB;function Efe(){return bB||(bB=1,Object.defineProperty(rR,"__esModule",{value:!0})),rR}var pm={},Kn={},Wn={},nR={},Yn={},dA={},mB;function Ife(){return mB||(mB=1,Object.defineProperty(dA,"__esModule",{value:!0}),dA.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(a){return a.charCodeAt(0)}))),dA}var fA={},_B;function xfe(){return _B||(_B=1,Object.defineProperty(fA,"__esModule",{value:!0}),fA.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(a){return a.charCodeAt(0)}))),fA}var iR={},gB;function vB(){return gB||(gB=1,function(a){var t;Object.defineProperty(a,"__esModule",{value:!0}),a.replaceCodePoint=a.fromCodePoint=void 0;var u=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);a.fromCodePoint=(t=String.fromCodePoint)!==null&&t!==void 0?t:function(e){var i="";return e>65535&&(e-=65536,i+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),i+=String.fromCharCode(e),i};function n(e){var i;return e>=55296&&e<=57343||e>1114111?65533:(i=u.get(e))!==null&&i!==void 0?i:e}a.replaceCodePoint=n;function r(e){return(0,a.fromCodePoint)(n(e))}a.default=r}(iR)),iR}var TB;function Nh(){return TB||(TB=1,function(a){var t=Yn&&Yn.__createBinding||(Object.create?function(A,E,R,V){V===void 0&&(V=R);var $=Object.getOwnPropertyDescriptor(E,R);(!$||("get"in $?!E.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return E[R]}}),Object.defineProperty(A,V,$)}:function(A,E,R,V){V===void 0&&(V=R),A[V]=E[R]}),u=Yn&&Yn.__setModuleDefault||(Object.create?function(A,E){Object.defineProperty(A,"default",{enumerable:!0,value:E})}:function(A,E){A.default=E}),n=Yn&&Yn.__importStar||function(A){if(A&&A.__esModule)return A;var E={};if(A!=null)for(var R in A)R!=="default"&&Object.prototype.hasOwnProperty.call(A,R)&&t(E,A,R);return u(E,A),E},r=Yn&&Yn.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(a,"__esModule",{value:!0}),a.decodeXML=a.decodeHTMLStrict=a.decodeHTMLAttribute=a.decodeHTML=a.determineBranch=a.EntityDecoder=a.DecodingMode=a.BinTrieFlags=a.fromCodePoint=a.replaceCodePoint=a.decodeCodePoint=a.xmlDecodeTree=a.htmlDecodeTree=void 0;var e=r(Ife());a.htmlDecodeTree=e.default;var i=r(xfe());a.xmlDecodeTree=i.default;var o=n(vB());a.decodeCodePoint=o.default;var c=vB();Object.defineProperty(a,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(a,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var s;(function(A){A[A.NUM=35]="NUM",A[A.SEMI=59]="SEMI",A[A.EQUALS=61]="EQUALS",A[A.ZERO=48]="ZERO",A[A.NINE=57]="NINE",A[A.LOWER_A=97]="LOWER_A",A[A.LOWER_F=102]="LOWER_F",A[A.LOWER_X=120]="LOWER_X",A[A.LOWER_Z=122]="LOWER_Z",A[A.UPPER_A=65]="UPPER_A",A[A.UPPER_F=70]="UPPER_F",A[A.UPPER_Z=90]="UPPER_Z"})(s||(s={}));var l=32,d;(function(A){A[A.VALUE_LENGTH=49152]="VALUE_LENGTH",A[A.BRANCH_LENGTH=16256]="BRANCH_LENGTH",A[A.JUMP_TABLE=127]="JUMP_TABLE"})(d=a.BinTrieFlags||(a.BinTrieFlags={}));function f(A){return A>=s.ZERO&&A<=s.NINE}function h(A){return A>=s.UPPER_A&&A<=s.UPPER_F||A>=s.LOWER_A&&A<=s.LOWER_F}function p(A){return A>=s.UPPER_A&&A<=s.UPPER_Z||A>=s.LOWER_A&&A<=s.LOWER_Z||f(A)}function b(A){return A===s.EQUALS||p(A)}var _;(function(A){A[A.EntityStart=0]="EntityStart",A[A.NumericStart=1]="NumericStart",A[A.NumericDecimal=2]="NumericDecimal",A[A.NumericHex=3]="NumericHex",A[A.NamedEntity=4]="NamedEntity"})(_||(_={}));var y;(function(A){A[A.Legacy=0]="Legacy",A[A.Strict=1]="Strict",A[A.Attribute=2]="Attribute"})(y=a.DecodingMode||(a.DecodingMode={}));var g=function(){function A(E,R,V){this.decodeTree=E,this.emitCodePoint=R,this.errors=V,this.state=_.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=y.Strict}return A.prototype.startEntity=function(E){this.decodeMode=E,this.state=_.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},A.prototype.write=function(E,R){switch(this.state){case _.EntityStart:return E.charCodeAt(R)===s.NUM?(this.state=_.NumericStart,this.consumed+=1,this.stateNumericStart(E,R+1)):(this.state=_.NamedEntity,this.stateNamedEntity(E,R));case _.NumericStart:return this.stateNumericStart(E,R);case _.NumericDecimal:return this.stateNumericDecimal(E,R);case _.NumericHex:return this.stateNumericHex(E,R);case _.NamedEntity:return this.stateNamedEntity(E,R)}},A.prototype.stateNumericStart=function(E,R){return R>=E.length?-1:(E.charCodeAt(R)|l)===s.LOWER_X?(this.state=_.NumericHex,this.consumed+=1,this.stateNumericHex(E,R+1)):(this.state=_.NumericDecimal,this.stateNumericDecimal(E,R))},A.prototype.addToNumericResult=function(E,R,V,$){if(R!==V){var Q=V-R;this.result=this.result*Math.pow($,Q)+parseInt(E.substr(R,Q),$),this.consumed+=Q}},A.prototype.stateNumericHex=function(E,R){for(var V=R;R<E.length;){var $=E.charCodeAt(R);if(f($)||h($))R+=1;else return this.addToNumericResult(E,V,R,16),this.emitNumericEntity($,3)}return this.addToNumericResult(E,V,R,16),-1},A.prototype.stateNumericDecimal=function(E,R){for(var V=R;R<E.length;){var $=E.charCodeAt(R);if(f($))R+=1;else return this.addToNumericResult(E,V,R,10),this.emitNumericEntity($,2)}return this.addToNumericResult(E,V,R,10),-1},A.prototype.emitNumericEntity=function(E,R){var V;if(this.consumed<=R)return(V=this.errors)===null||V===void 0||V.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(E===s.SEMI)this.consumed+=1;else if(this.decodeMode===y.Strict)return 0;return this.emitCodePoint((0,o.replaceCodePoint)(this.result),this.consumed),this.errors&&(E!==s.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},A.prototype.stateNamedEntity=function(E,R){for(var V=this.decodeTree,$=V[this.treeIndex],Q=($&d.VALUE_LENGTH)>>14;R<E.length;R++,this.excess++){var ne=E.charCodeAt(R);if(this.treeIndex=v(V,$,this.treeIndex+Math.max(1,Q),ne),this.treeIndex<0)return this.result===0||this.decodeMode===y.Attribute&&(Q===0||b(ne))?0:this.emitNotTerminatedNamedEntity();if($=V[this.treeIndex],Q=($&d.VALUE_LENGTH)>>14,Q!==0){if(ne===s.SEMI)return this.emitNamedEntityData(this.treeIndex,Q,this.consumed+this.excess);this.decodeMode!==y.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},A.prototype.emitNotTerminatedNamedEntity=function(){var E,R=this,V=R.result,$=R.decodeTree,Q=($[V]&d.VALUE_LENGTH)>>14;return this.emitNamedEntityData(V,Q,this.consumed),(E=this.errors)===null||E===void 0||E.missingSemicolonAfterCharacterReference(),this.consumed},A.prototype.emitNamedEntityData=function(E,R,V){var $=this.decodeTree;return this.emitCodePoint(R===1?$[E]&~d.VALUE_LENGTH:$[E+1],V),R===3&&this.emitCodePoint($[E+2],V),V},A.prototype.end=function(){var E;switch(this.state){case _.NamedEntity:return this.result!==0&&(this.decodeMode!==y.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case _.NumericDecimal:return this.emitNumericEntity(0,2);case _.NumericHex:return this.emitNumericEntity(0,3);case _.NumericStart:return(E=this.errors)===null||E===void 0||E.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case _.EntityStart:return 0}},A}();a.EntityDecoder=g;function m(A){var E="",R=new g(A,function(V){return E+=(0,o.fromCodePoint)(V)});return function($,Q){for(var ne=0,ie=0;(ie=$.indexOf("&",ie))>=0;){E+=$.slice(ne,ie),R.startEntity(Q);var fe=R.write($,ie+1);if(fe<0){ne=ie+R.end();break}ne=ie+fe,ie=fe===0?ne+1:ne}var J=E+$.slice(ne);return E="",J}}function v(A,E,R,V){var $=(E&d.BRANCH_LENGTH)>>7,Q=E&d.JUMP_TABLE;if($===0)return Q!==0&&V===Q?R:-1;if(Q){var ne=V-Q;return ne<0||ne>=$?-1:A[R+ne]-1}for(var ie=R,fe=ie+$-1;ie<=fe;){var J=ie+fe>>>1,_e=A[J];if(_e<V)ie=J+1;else if(_e>V)fe=J-1;else return A[J+$]}return-1}a.determineBranch=v;var T=m(e.default),S=m(i.default);function x(A,E){return E===void 0&&(E=y.Legacy),T(A,E)}a.decodeHTML=x;function L(A){return T(A,y.Attribute)}a.decodeHTMLAttribute=L;function O(A){return T(A,y.Strict)}a.decodeHTMLStrict=O;function w(A){return S(A,y.Strict)}a.decodeXML=w}(Yn)),Yn}var wB;function SB(){return wB||(wB=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.QuoteType=void 0;var t=Nh(),u;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(u||(u={}));var n;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(n||(n={}));function r(f){return f===u.Space||f===u.NewLine||f===u.Tab||f===u.FormFeed||f===u.CarriageReturn}function e(f){return f===u.Slash||f===u.Gt||r(f)}function i(f){return f>=u.Zero&&f<=u.Nine}function o(f){return f>=u.LowerA&&f<=u.LowerZ||f>=u.UpperA&&f<=u.UpperZ}function c(f){return f>=u.UpperA&&f<=u.UpperF||f>=u.LowerA&&f<=u.LowerF}var s;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(s=a.QuoteType||(a.QuoteType={}));var l={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},d=function(){function f(h,p){var b=h.xmlMode,_=b===void 0?!1:b,y=h.decodeEntities,g=y===void 0?!0:y;this.cbs=p,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=_,this.decodeEntities=g,this.entityTrie=_?t.xmlDecodeTree:t.htmlDecodeTree}return f.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(h){this.offset+=this.buffer.length,this.buffer=h,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(h){h===u.Lt||!this.decodeEntities&&this.fastForwardTo(u.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&h===u.Amp&&(this.state=n.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(h){var p=this.sequenceIndex===this.currentSequence.length,b=p?e(h):(h|32)===this.currentSequence[this.sequenceIndex];if(!b)this.isSpecial=!1;else if(!p){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(h)},f.prototype.stateInSpecialTag=function(h){if(this.sequenceIndex===this.currentSequence.length){if(h===u.Gt||r(h)){var p=this.index-this.currentSequence.length;if(this.sectionStart<p){var b=this.index;this.index=p,this.cbs.ontext(this.sectionStart,p),this.index=b}this.isSpecial=!1,this.sectionStart=p+2,this.stateInClosingTagName(h);return}this.sequenceIndex=0}(h|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===l.TitleEnd?this.decodeEntities&&h===u.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(u.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(h===u.Lt)},f.prototype.stateCDATASequence=function(h){h===l.Cdata[this.sequenceIndex]?++this.sequenceIndex===l.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=l.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(h))},f.prototype.fastForwardTo=function(h){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===h)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(h){h===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):h!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(h){return this.xmlMode?!e(h):o(h)},f.prototype.startSpecial=function(h,p){this.isSpecial=!0,this.currentSequence=h,this.sequenceIndex=p,this.state=n.SpecialStartSequence},f.prototype.stateBeforeTagName=function(h){if(h===u.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(h===u.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(h)){var p=h|32;this.sectionStart=this.index,!this.xmlMode&&p===l.TitleEnd[2]?this.startSpecial(l.TitleEnd,3):this.state=!this.xmlMode&&p===l.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else h===u.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(h))},f.prototype.stateInTagName=function(h){e(h)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(h))},f.prototype.stateBeforeClosingTagName=function(h){r(h)||(h===u.Gt?this.state=n.Text:(this.state=this.isTagStartChar(h)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(h){(h===u.Gt||r(h))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(h))},f.prototype.stateAfterClosingTagName=function(h){(h===u.Gt||this.fastForwardTo(u.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(h){h===u.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):h===u.Slash?this.state=n.InSelfClosingTag:r(h)||(this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(h){h===u.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):r(h)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(h))},f.prototype.stateInAttributeName=function(h){(h===u.Eq||e(h))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(h))},f.prototype.stateAfterAttributeName=function(h){h===u.Eq?this.state=n.BeforeAttributeValue:h===u.Slash||h===u.Gt?(this.cbs.onattribend(s.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(h)):r(h)||(this.cbs.onattribend(s.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(h){h===u.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):h===u.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):r(h)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(h))},f.prototype.handleInAttributeValue=function(h,p){h===p||!this.decodeEntities&&this.fastForwardTo(p)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(p===u.DoubleQuote?s.Double:s.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&h===u.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(h){this.handleInAttributeValue(h,u.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(h){this.handleInAttributeValue(h,u.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(h){r(h)||h===u.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(h)):this.decodeEntities&&h===u.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(h){h===u.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=h===u.Dash?n.BeforeComment:n.InDeclaration},f.prototype.stateInDeclaration=function(h){(h===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(h){(h===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(h){h===u.Dash?(this.state=n.InCommentLike,this.currentSequence=l.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},f.prototype.stateInSpecialComment=function(h){(h===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(h){var p=h|32;p===l.ScriptEnd[3]?this.startSpecial(l.ScriptEnd,4):p===l.StyleEnd[3]?this.startSpecial(l.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(h))},f.prototype.stateBeforeEntity=function(h){this.entityExcess=1,this.entityResult=0,h===u.Number?this.state=n.BeforeNumericEntity:h===u.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(h))},f.prototype.stateInNamedEntity=function(h){if(this.entityExcess+=1,this.trieIndex=(0,t.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,h),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var p=this.trieCurrent&t.BinTrieFlags.VALUE_LENGTH;if(p){var b=(p>>14)-1;if(!this.allowLegacyEntity()&&h!==u.Semi)this.trieIndex+=b;else{var _=this.index-this.entityExcess+1;_>this.sectionStart&&this.emitPartial(this.sectionStart,_),this.entityResult=this.trieIndex,this.trieIndex+=b,this.entityExcess=0,this.sectionStart=this.index+1,b===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var h=(this.entityTrie[this.entityResult]&t.BinTrieFlags.VALUE_LENGTH)>>14;switch(h){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~t.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(h){(h|32)===u.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(h))},f.prototype.emitNumericEntity=function(h){var p=this.index-this.entityExcess-1,b=p+2+ +(this.state===n.InHexEntity);b!==this.index&&(p>this.sectionStart&&this.emitPartial(this.sectionStart,p),this.sectionStart=this.index+Number(h),this.emitCodePoint((0,t.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(h){h===u.Semi?this.emitNumericEntity(!0):i(h)?(this.entityResult=this.entityResult*10+(h-u.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(h){h===u.Semi?this.emitNumericEntity(!0):i(h)?(this.entityResult=this.entityResult*16+(h-u.Zero),this.entityExcess++):c(h)?(this.entityResult=this.entityResult*16+((h|32)-u.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var h=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(h);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(h);break}case n.InSpecialTag:{this.stateInSpecialTag(h);break}case n.CDATASequence:{this.stateCDATASequence(h);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(h);break}case n.InAttributeName:{this.stateInAttributeName(h);break}case n.InCommentLike:{this.stateInCommentLike(h);break}case n.InSpecialComment:{this.stateInSpecialComment(h);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(h);break}case n.InTagName:{this.stateInTagName(h);break}case n.InClosingTagName:{this.stateInClosingTagName(h);break}case n.BeforeTagName:{this.stateBeforeTagName(h);break}case n.AfterAttributeName:{this.stateAfterAttributeName(h);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(h);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(h);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(h);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(h);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(h);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(h);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(h);break}case n.InDeclaration:{this.stateInDeclaration(h);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(h);break}case n.BeforeComment:{this.stateBeforeComment(h);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(h);break}case n.InNamedEntity:{this.stateInNamedEntity(h);break}case n.BeforeEntity:{this.stateBeforeEntity(h);break}case n.InHexEntity:{this.stateInHexEntity(h);break}case n.InNumericEntity:{this.stateInNumericEntity(h);break}default:this.stateBeforeNumericEntity(h)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var h=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,h,0):this.cbs.oncomment(this.sectionStart,h,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,h)},f.prototype.emitPartial=function(h,p){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(h,p):this.cbs.ontext(h,p)},f.prototype.emitCodePoint=function(h){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(h):this.cbs.ontextentity(h)},f}();a.default=d}(nR)),nR}var OB;function AB(){if(OB)return Wn;OB=1;var a=Wn&&Wn.__createBinding||(Object.create?function(_,y,g,m){m===void 0&&(m=g);var v=Object.getOwnPropertyDescriptor(y,g);(!v||("get"in v?!y.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return y[g]}}),Object.defineProperty(_,m,v)}:function(_,y,g,m){m===void 0&&(m=g),_[m]=y[g]}),t=Wn&&Wn.__setModuleDefault||(Object.create?function(_,y){Object.defineProperty(_,"default",{enumerable:!0,value:y})}:function(_,y){_.default=y}),u=Wn&&Wn.__importStar||function(_){if(_&&_.__esModule)return _;var y={};if(_!=null)for(var g in _)g!=="default"&&Object.prototype.hasOwnProperty.call(_,g)&&a(y,_,g);return t(y,_),y};Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.Parser=void 0;var n=u(SB()),r=Nh(),e=new Set(["input","option","optgroup","select","button","datalist","textarea"]),i=new Set(["p"]),o=new Set(["thead","tbody"]),c=new Set(["dd","dt"]),s=new Set(["rt","rp"]),l=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",i],["h1",i],["h2",i],["h3",i],["h4",i],["h5",i],["h6",i],["select",e],["input",e],["output",e],["button",e],["datalist",e],["textarea",e],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",c],["dt",c],["address",i],["article",i],["aside",i],["blockquote",i],["details",i],["div",i],["dl",i],["fieldset",i],["figcaption",i],["figure",i],["footer",i],["form",i],["header",i],["hr",i],["main",i],["nav",i],["ol",i],["pre",i],["section",i],["table",i],["ul",i],["rt",s],["rp",s],["tbody",o],["tfoot",o]]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),p=/\s|\//,b=function(){function _(y,g){g===void 0&&(g={});var m,v,T,S,x;this.options=g,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=y??{},this.lowerCaseTagNames=(m=g.lowerCaseTags)!==null&&m!==void 0?m:!g.xmlMode,this.lowerCaseAttributeNames=(v=g.lowerCaseAttributeNames)!==null&&v!==void 0?v:!g.xmlMode,this.tokenizer=new((T=g.Tokenizer)!==null&&T!==void 0?T:n.default)(this.options,this),(x=(S=this.cbs).onparserinit)===null||x===void 0||x.call(S,this)}return _.prototype.ontext=function(y,g){var m,v,T=this.getSlice(y,g);this.endIndex=g-1,(v=(m=this.cbs).ontext)===null||v===void 0||v.call(m,T),this.startIndex=g},_.prototype.ontextentity=function(y){var g,m,v=this.tokenizer.getSectionStart();this.endIndex=v-1,(m=(g=this.cbs).ontext)===null||m===void 0||m.call(g,(0,r.fromCodePoint)(y)),this.startIndex=v},_.prototype.isVoidElement=function(y){return!this.options.xmlMode&&d.has(y)},_.prototype.onopentagname=function(y,g){this.endIndex=g;var m=this.getSlice(y,g);this.lowerCaseTagNames&&(m=m.toLowerCase()),this.emitOpenTag(m)},_.prototype.emitOpenTag=function(y){var g,m,v,T;this.openTagStart=this.startIndex,this.tagname=y;var S=!this.options.xmlMode&&l.get(y);if(S)for(;this.stack.length>0&&S.has(this.stack[this.stack.length-1]);){var x=this.stack.pop();(m=(g=this.cbs).onclosetag)===null||m===void 0||m.call(g,x,!0)}this.isVoidElement(y)||(this.stack.push(y),f.has(y)?this.foreignContext.push(!0):h.has(y)&&this.foreignContext.push(!1)),(T=(v=this.cbs).onopentagname)===null||T===void 0||T.call(v,y),this.cbs.onopentag&&(this.attribs={})},_.prototype.endOpenTag=function(y){var g,m;this.startIndex=this.openTagStart,this.attribs&&((m=(g=this.cbs).onopentag)===null||m===void 0||m.call(g,this.tagname,this.attribs,y),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},_.prototype.onopentagend=function(y){this.endIndex=y,this.endOpenTag(!1),this.startIndex=y+1},_.prototype.onclosetag=function(y,g){var m,v,T,S,x,L;this.endIndex=g;var O=this.getSlice(y,g);if(this.lowerCaseTagNames&&(O=O.toLowerCase()),(f.has(O)||h.has(O))&&this.foreignContext.pop(),this.isVoidElement(O))!this.options.xmlMode&&O==="br"&&((v=(m=this.cbs).onopentagname)===null||v===void 0||v.call(m,"br"),(S=(T=this.cbs).onopentag)===null||S===void 0||S.call(T,"br",{},!0),(L=(x=this.cbs).onclosetag)===null||L===void 0||L.call(x,"br",!1));else{var w=this.stack.lastIndexOf(O);if(w!==-1)if(this.cbs.onclosetag)for(var A=this.stack.length-w;A--;)this.cbs.onclosetag(this.stack.pop(),A!==0);else this.stack.length=w;else!this.options.xmlMode&&O==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=g+1},_.prototype.onselfclosingtag=function(y){this.endIndex=y,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=y+1):this.onopentagend(y)},_.prototype.closeCurrentTag=function(y){var g,m,v=this.tagname;this.endOpenTag(y),this.stack[this.stack.length-1]===v&&((m=(g=this.cbs).onclosetag)===null||m===void 0||m.call(g,v,!y),this.stack.pop())},_.prototype.onattribname=function(y,g){this.startIndex=y;var m=this.getSlice(y,g);this.attribname=this.lowerCaseAttributeNames?m.toLowerCase():m},_.prototype.onattribdata=function(y,g){this.attribvalue+=this.getSlice(y,g)},_.prototype.onattribentity=function(y){this.attribvalue+=(0,r.fromCodePoint)(y)},_.prototype.onattribend=function(y,g){var m,v;this.endIndex=g,(v=(m=this.cbs).onattribute)===null||v===void 0||v.call(m,this.attribname,this.attribvalue,y===n.QuoteType.Double?'"':y===n.QuoteType.Single?"'":y===n.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},_.prototype.getInstructionName=function(y){var g=y.search(p),m=g<0?y:y.substr(0,g);return this.lowerCaseTagNames&&(m=m.toLowerCase()),m},_.prototype.ondeclaration=function(y,g){this.endIndex=g;var m=this.getSlice(y,g);if(this.cbs.onprocessinginstruction){var v=this.getInstructionName(m);this.cbs.onprocessinginstruction("!".concat(v),"!".concat(m))}this.startIndex=g+1},_.prototype.onprocessinginstruction=function(y,g){this.endIndex=g;var m=this.getSlice(y,g);if(this.cbs.onprocessinginstruction){var v=this.getInstructionName(m);this.cbs.onprocessinginstruction("?".concat(v),"?".concat(m))}this.startIndex=g+1},_.prototype.oncomment=function(y,g,m){var v,T,S,x;this.endIndex=g,(T=(v=this.cbs).oncomment)===null||T===void 0||T.call(v,this.getSlice(y,g-m)),(x=(S=this.cbs).oncommentend)===null||x===void 0||x.call(S),this.startIndex=g+1},_.prototype.oncdata=function(y,g,m){var v,T,S,x,L,O,w,A,E,R;this.endIndex=g;var V=this.getSlice(y,g-m);this.options.xmlMode||this.options.recognizeCDATA?((T=(v=this.cbs).oncdatastart)===null||T===void 0||T.call(v),(x=(S=this.cbs).ontext)===null||x===void 0||x.call(S,V),(O=(L=this.cbs).oncdataend)===null||O===void 0||O.call(L)):((A=(w=this.cbs).oncomment)===null||A===void 0||A.call(w,"[CDATA[".concat(V,"]]")),(R=(E=this.cbs).oncommentend)===null||R===void 0||R.call(E)),this.startIndex=g+1},_.prototype.onend=function(){var y,g;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var m=this.stack.length;m>0;this.cbs.onclosetag(this.stack[--m],!0));}(g=(y=this.cbs).onend)===null||g===void 0||g.call(y)},_.prototype.reset=function(){var y,g,m,v;(g=(y=this.cbs).onreset)===null||g===void 0||g.call(y),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(v=(m=this.cbs).onparserinit)===null||v===void 0||v.call(m,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},_.prototype.parseComplete=function(y){this.reset(),this.end(y)},_.prototype.getSlice=function(y,g){for(;y-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var m=this.buffers[0].slice(y-this.bufferOffset,g-this.bufferOffset);g-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),m+=this.buffers[0].slice(0,g-this.bufferOffset);return m},_.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},_.prototype.write=function(y){var g,m;if(this.ended){(m=(g=this.cbs).onerror)===null||m===void 0||m.call(g,new Error(".write() after done!"));return}this.buffers.push(y),this.tokenizer.running&&(this.tokenizer.write(y),this.writeIndex++)},_.prototype.end=function(y){var g,m;if(this.ended){(m=(g=this.cbs).onerror)===null||m===void 0||m.call(g,new Error(".end() after done!"));return}y&&this.write(y),this.ended=!0,this.tokenizer.end()},_.prototype.pause=function(){this.tokenizer.pause()},_.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},_.prototype.parseChunk=function(y){this.write(y)},_.prototype.done=function(y){this.end(y)},_}();return Wn.Parser=b,Wn}var ts={},aR={},EB;function rs(){return EB||(EB=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Doctype=a.CDATA=a.Tag=a.Style=a.Script=a.Comment=a.Directive=a.Text=a.Root=a.isTag=a.ElementType=void 0;var t;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(t=a.ElementType||(a.ElementType={}));function u(n){return n.type===t.Tag||n.type===t.Script||n.type===t.Style}a.isTag=u,a.Root=t.Root,a.Text=t.Text,a.Directive=t.Directive,a.Comment=t.Comment,a.Script=t.Script,a.Style=t.Style,a.Tag=t.Tag,a.CDATA=t.CDATA,a.Doctype=t.Doctype}(aR)),aR}var St={},IB;function xB(){if(IB)return St;IB=1;var a=St&&St.__extends||function(){var T=function(S,x){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,O){L.__proto__=O}||function(L,O){for(var w in O)Object.prototype.hasOwnProperty.call(O,w)&&(L[w]=O[w])},T(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");T(S,x);function L(){this.constructor=S}S.prototype=x===null?Object.create(x):(L.prototype=x.prototype,new L)}}(),t=St&&St.__assign||function(){return t=Object.assign||function(T){for(var S,x=1,L=arguments.length;x<L;x++){S=arguments[x];for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(T[O]=S[O])}return T},t.apply(this,arguments)};Object.defineProperty(St,"__esModule",{value:!0}),St.cloneNode=St.hasChildren=St.isDocument=St.isDirective=St.isComment=St.isText=St.isCDATA=St.isTag=St.Element=St.Document=St.CDATA=St.NodeWithChildren=St.ProcessingInstruction=St.Comment=St.Text=St.DataNode=St.Node=void 0;var u=rs(),n=function(){function T(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(T.prototype,"parentNode",{get:function(){return this.parent},set:function(S){this.parent=S},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"previousSibling",{get:function(){return this.prev},set:function(S){this.prev=S},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"nextSibling",{get:function(){return this.next},set:function(S){this.next=S},enumerable:!1,configurable:!0}),T.prototype.cloneNode=function(S){return S===void 0&&(S=!1),m(this,S)},T}();St.Node=n;var r=function(T){a(S,T);function S(x){var L=T.call(this)||this;return L.data=x,L}return Object.defineProperty(S.prototype,"nodeValue",{get:function(){return this.data},set:function(x){this.data=x},enumerable:!1,configurable:!0}),S}(n);St.DataNode=r;var e=function(T){a(S,T);function S(){var x=T!==null&&T.apply(this,arguments)||this;return x.type=u.ElementType.Text,x}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),S}(r);St.Text=e;var i=function(T){a(S,T);function S(){var x=T!==null&&T.apply(this,arguments)||this;return x.type=u.ElementType.Comment,x}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),S}(r);St.Comment=i;var o=function(T){a(S,T);function S(x,L){var O=T.call(this,L)||this;return O.name=x,O.type=u.ElementType.Directive,O}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),S}(r);St.ProcessingInstruction=o;var c=function(T){a(S,T);function S(x){var L=T.call(this)||this;return L.children=x,L}return Object.defineProperty(S.prototype,"firstChild",{get:function(){var x;return(x=this.children[0])!==null&&x!==void 0?x:null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"childNodes",{get:function(){return this.children},set:function(x){this.children=x},enumerable:!1,configurable:!0}),S}(n);St.NodeWithChildren=c;var s=function(T){a(S,T);function S(){var x=T!==null&&T.apply(this,arguments)||this;return x.type=u.ElementType.CDATA,x}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),S}(c);St.CDATA=s;var l=function(T){a(S,T);function S(){var x=T!==null&&T.apply(this,arguments)||this;return x.type=u.ElementType.Root,x}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),S}(c);St.Document=l;var d=function(T){a(S,T);function S(x,L,O,w){O===void 0&&(O=[]),w===void 0&&(w=x==="script"?u.ElementType.Script:x==="style"?u.ElementType.Style:u.ElementType.Tag);var A=T.call(this,O)||this;return A.name=x,A.attribs=L,A.type=w,A}return Object.defineProperty(S.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"tagName",{get:function(){return this.name},set:function(x){this.name=x},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"attributes",{get:function(){var x=this;return Object.keys(this.attribs).map(function(L){var O,w;return{name:L,value:x.attribs[L],namespace:(O=x["x-attribsNamespace"])===null||O===void 0?void 0:O[L],prefix:(w=x["x-attribsPrefix"])===null||w===void 0?void 0:w[L]}})},enumerable:!1,configurable:!0}),S}(c);St.Element=d;function f(T){return(0,u.isTag)(T)}St.isTag=f;function h(T){return T.type===u.ElementType.CDATA}St.isCDATA=h;function p(T){return T.type===u.ElementType.Text}St.isText=p;function b(T){return T.type===u.ElementType.Comment}St.isComment=b;function _(T){return T.type===u.ElementType.Directive}St.isDirective=_;function y(T){return T.type===u.ElementType.Root}St.isDocument=y;function g(T){return Object.prototype.hasOwnProperty.call(T,"children")}St.hasChildren=g;function m(T,S){S===void 0&&(S=!1);var x;if(p(T))x=new e(T.data);else if(b(T))x=new i(T.data);else if(f(T)){var L=S?v(T.children):[],O=new d(T.name,t({},T.attribs),L);L.forEach(function(R){return R.parent=O}),T.namespace!=null&&(O.namespace=T.namespace),T["x-attribsNamespace"]&&(O["x-attribsNamespace"]=t({},T["x-attribsNamespace"])),T["x-attribsPrefix"]&&(O["x-attribsPrefix"]=t({},T["x-attribsPrefix"])),x=O}else if(h(T)){var L=S?v(T.children):[],w=new s(L);L.forEach(function(V){return V.parent=w}),x=w}else if(y(T)){var L=S?v(T.children):[],A=new l(L);L.forEach(function(V){return V.parent=A}),T["x-mode"]&&(A["x-mode"]=T["x-mode"]),x=A}else if(_(T)){var E=new o(T.name,T.data);T["x-name"]!=null&&(E["x-name"]=T["x-name"],E["x-publicId"]=T["x-publicId"],E["x-systemId"]=T["x-systemId"]),x=E}else throw new Error("Not implemented yet: ".concat(T.type));return x.startIndex=T.startIndex,x.endIndex=T.endIndex,T.sourceCodeLocation!=null&&(x.sourceCodeLocation=T.sourceCodeLocation),x}St.cloneNode=m;function v(T){for(var S=T.map(function(L){return m(L,!0)}),x=1;x<S.length;x++)S[x].prev=S[x-1],S[x-1].next=S[x];return S}return St}var NB;function jn(){return NB||(NB=1,function(a){var t=ts&&ts.__createBinding||(Object.create?function(o,c,s,l){l===void 0&&(l=s);var d=Object.getOwnPropertyDescriptor(c,s);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[s]}}),Object.defineProperty(o,l,d)}:function(o,c,s,l){l===void 0&&(l=s),o[l]=c[s]}),u=ts&&ts.__exportStar||function(o,c){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&t(c,o,s)};Object.defineProperty(a,"__esModule",{value:!0}),a.DomHandler=void 0;var n=rs(),r=xB();u(xB(),a);var e={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},i=function(){function o(c,s,l){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof s=="function"&&(l=s,s=e),typeof c=="object"&&(s=c,c=void 0),this.callback=c??null,this.options=s??e,this.elementCB=l??null}return o.prototype.onparserinit=function(c){this.parser=c},o.prototype.onreset=function(){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(c){this.handleCallback(c)},o.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},o.prototype.onopentag=function(c,s){var l=this.options.xmlMode?n.ElementType.Tag:void 0,d=new r.Element(c,s,void 0,l);this.addNode(d),this.tagStack.push(d)},o.prototype.ontext=function(c){var s=this.lastNode;if(s&&s.type===n.ElementType.Text)s.data+=c,this.options.withEndIndices&&(s.endIndex=this.parser.endIndex);else{var l=new r.Text(c);this.addNode(l),this.lastNode=l}},o.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=c;return}var s=new r.Comment(c);this.addNode(s),this.lastNode=s},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var c=new r.Text(""),s=new r.CDATA([c]);this.addNode(s),c.parent=s,this.lastNode=c},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(c,s){var l=new r.ProcessingInstruction(c,s);this.addNode(l)},o.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},o.prototype.addNode=function(c){var s=this.tagStack[this.tagStack.length-1],l=s.children[s.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),s.children.push(c),l&&(c.prev=l,l.next=c),c.parent=s,this.lastNode=null},o}();a.DomHandler=i,a.default=i}(ts)),ts}var ns={},Ai={},sn={},uR={},Ui={},hA={},RB;function Nfe(){if(RB)return hA;RB=1,Object.defineProperty(hA,"__esModule",{value:!0});function a(t){for(var u=1;u<t.length;u++)t[u][0]+=t[u-1][0]+1;return t}return hA.default=new Map(a([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(a([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(a([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(a([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),hA}var oR={},FB;function sR(){return FB||(FB=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.escapeText=a.escapeAttribute=a.escapeUTF8=a.escape=a.encodeXML=a.getCodePoint=a.xmlReplacer=void 0,a.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);a.getCodePoint=String.prototype.codePointAt!=null?function(r,e){return r.codePointAt(e)}:function(r,e){return(r.charCodeAt(e)&64512)===55296?(r.charCodeAt(e)-55296)*1024+r.charCodeAt(e+1)-56320+65536:r.charCodeAt(e)};function u(r){for(var e="",i=0,o;(o=a.xmlReplacer.exec(r))!==null;){var c=o.index,s=r.charCodeAt(c),l=t.get(s);l!==void 0?(e+=r.substring(i,c)+l,i=c+1):(e+="".concat(r.substring(i,c),"&#x").concat((0,a.getCodePoint)(r,c).toString(16),";"),i=a.xmlReplacer.lastIndex+=+((s&64512)===55296))}return e+r.substr(i)}a.encodeXML=u,a.escape=u;function n(r,e){return function(o){for(var c,s=0,l="";c=r.exec(o);)s!==c.index&&(l+=o.substring(s,c.index)),l+=e.get(c[0].charCodeAt(0)),s=c.index+1;return l+o.substring(s)}}a.escapeUTF8=n(/[&<>'"]/g,t),a.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),a.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}(oR)),oR}var DB;function PB(){if(DB)return Ui;DB=1;var a=Ui&&Ui.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.encodeNonAsciiHTML=Ui.encodeHTML=void 0;var t=a(Nfe()),u=sR(),n=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function r(o){return i(n,o)}Ui.encodeHTML=r;function e(o){return i(u.xmlReplacer,o)}Ui.encodeNonAsciiHTML=e;function i(o,c){for(var s="",l=0,d;(d=o.exec(c))!==null;){var f=d.index;s+=c.substring(l,f);var h=c.charCodeAt(f),p=t.default.get(h);if(typeof p=="object"){if(f+1<c.length){var b=c.charCodeAt(f+1),_=typeof p.n=="number"?p.n===b?p.o:void 0:p.n.get(b);if(_!==void 0){s+=_,l=o.lastIndex+=1;continue}}p=p.v}if(p!==void 0)s+=p,l=f+1;else{var y=(0,u.getCodePoint)(c,f);s+="&#x".concat(y.toString(16),";"),l=o.lastIndex+=+(y!==h)}}return s+c.substr(l)}return Ui}var jB;function Rfe(){return jB||(jB=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.decodeXMLStrict=a.decodeHTML5Strict=a.decodeHTML4Strict=a.decodeHTML5=a.decodeHTML4=a.decodeHTMLAttribute=a.decodeHTMLStrict=a.decodeHTML=a.decodeXML=a.DecodingMode=a.EntityDecoder=a.encodeHTML5=a.encodeHTML4=a.encodeNonAsciiHTML=a.encodeHTML=a.escapeText=a.escapeAttribute=a.escapeUTF8=a.escape=a.encodeXML=a.encode=a.decodeStrict=a.decode=a.EncodingMode=a.EntityLevel=void 0;var t=Nh(),u=PB(),n=sR(),r;(function(f){f[f.XML=0]="XML",f[f.HTML=1]="HTML"})(r=a.EntityLevel||(a.EntityLevel={}));var e;(function(f){f[f.UTF8=0]="UTF8",f[f.ASCII=1]="ASCII",f[f.Extensive=2]="Extensive",f[f.Attribute=3]="Attribute",f[f.Text=4]="Text"})(e=a.EncodingMode||(a.EncodingMode={}));function i(f,h){h===void 0&&(h=r.XML);var p=typeof h=="number"?h:h.level;if(p===r.HTML){var b=typeof h=="object"?h.mode:void 0;return(0,t.decodeHTML)(f,b)}return(0,t.decodeXML)(f)}a.decode=i;function o(f,h){var p;h===void 0&&(h=r.XML);var b=typeof h=="number"?{level:h}:h;return(p=b.mode)!==null&&p!==void 0||(b.mode=t.DecodingMode.Strict),i(f,b)}a.decodeStrict=o;function c(f,h){h===void 0&&(h=r.XML);var p=typeof h=="number"?{level:h}:h;return p.mode===e.UTF8?(0,n.escapeUTF8)(f):p.mode===e.Attribute?(0,n.escapeAttribute)(f):p.mode===e.Text?(0,n.escapeText)(f):p.level===r.HTML?p.mode===e.ASCII?(0,u.encodeNonAsciiHTML)(f):(0,u.encodeHTML)(f):(0,n.encodeXML)(f)}a.encode=c;var s=sR();Object.defineProperty(a,"encodeXML",{enumerable:!0,get:function(){return s.encodeXML}}),Object.defineProperty(a,"escape",{enumerable:!0,get:function(){return s.escape}}),Object.defineProperty(a,"escapeUTF8",{enumerable:!0,get:function(){return s.escapeUTF8}}),Object.defineProperty(a,"escapeAttribute",{enumerable:!0,get:function(){return s.escapeAttribute}}),Object.defineProperty(a,"escapeText",{enumerable:!0,get:function(){return s.escapeText}});var l=PB();Object.defineProperty(a,"encodeHTML",{enumerable:!0,get:function(){return l.encodeHTML}}),Object.defineProperty(a,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return l.encodeNonAsciiHTML}}),Object.defineProperty(a,"encodeHTML4",{enumerable:!0,get:function(){return l.encodeHTML}}),Object.defineProperty(a,"encodeHTML5",{enumerable:!0,get:function(){return l.encodeHTML}});var d=Nh();Object.defineProperty(a,"EntityDecoder",{enumerable:!0,get:function(){return d.EntityDecoder}}),Object.defineProperty(a,"DecodingMode",{enumerable:!0,get:function(){return d.DecodingMode}}),Object.defineProperty(a,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(a,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(a,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(a,"decodeHTMLAttribute",{enumerable:!0,get:function(){return d.decodeHTMLAttribute}}),Object.defineProperty(a,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(a,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(a,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(a,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(a,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})}(uR)),uR}var is={},LB;function Ffe(){return LB||(LB=1,Object.defineProperty(is,"__esModule",{value:!0}),is.attributeNames=is.elementNames=void 0,is.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(a){return[a.toLowerCase(),a]})),is.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(a){return[a.toLowerCase(),a]}))),is}var MB;function Dfe(){if(MB)return sn;MB=1;var a=sn&&sn.__assign||function(){return a=Object.assign||function(v){for(var T,S=1,x=arguments.length;S<x;S++){T=arguments[S];for(var L in T)Object.prototype.hasOwnProperty.call(T,L)&&(v[L]=T[L])}return v},a.apply(this,arguments)},t=sn&&sn.__createBinding||(Object.create?function(v,T,S,x){x===void 0&&(x=S);var L=Object.getOwnPropertyDescriptor(T,S);(!L||("get"in L?!T.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return T[S]}}),Object.defineProperty(v,x,L)}:function(v,T,S,x){x===void 0&&(x=S),v[x]=T[S]}),u=sn&&sn.__setModuleDefault||(Object.create?function(v,T){Object.defineProperty(v,"default",{enumerable:!0,value:T})}:function(v,T){v.default=T}),n=sn&&sn.__importStar||function(v){if(v&&v.__esModule)return v;var T={};if(v!=null)for(var S in v)S!=="default"&&Object.prototype.hasOwnProperty.call(v,S)&&t(T,v,S);return u(T,v),T};Object.defineProperty(sn,"__esModule",{value:!0}),sn.render=void 0;var r=n(rs()),e=Rfe(),i=Ffe(),o=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function c(v){return v.replace(/"/g,"&quot;")}function s(v,T){var S;if(v){var x=((S=T.encodeEntities)!==null&&S!==void 0?S:T.decodeEntities)===!1?c:T.xmlMode||T.encodeEntities!=="utf8"?e.encodeXML:e.escapeAttribute;return Object.keys(v).map(function(L){var O,w,A=(O=v[L])!==null&&O!==void 0?O:"";return T.xmlMode==="foreign"&&(L=(w=i.attributeNames.get(L))!==null&&w!==void 0?w:L),!T.emptyAttrs&&!T.xmlMode&&A===""?L:"".concat(L,'="').concat(x(A),'"')}).join(" ")}}var l=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function d(v,T){T===void 0&&(T={});for(var S=("length"in v)?v:[v],x="",L=0;L<S.length;L++)x+=f(S[L],T);return x}sn.render=d,sn.default=d;function f(v,T){switch(v.type){case r.Root:return d(v.children,T);case r.Doctype:case r.Directive:return _(v);case r.Comment:return m(v);case r.CDATA:return g(v);case r.Script:case r.Style:case r.Tag:return b(v,T);case r.Text:return y(v,T)}}var h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),p=new Set(["svg","math"]);function b(v,T){var S;T.xmlMode==="foreign"&&(v.name=(S=i.elementNames.get(v.name))!==null&&S!==void 0?S:v.name,v.parent&&h.has(v.parent.name)&&(T=a(a({},T),{xmlMode:!1}))),!T.xmlMode&&p.has(v.name)&&(T=a(a({},T),{xmlMode:"foreign"}));var x="<".concat(v.name),L=s(v.attribs,T);return L&&(x+=" ".concat(L)),v.children.length===0&&(T.xmlMode?T.selfClosingTags!==!1:T.selfClosingTags&&l.has(v.name))?(T.xmlMode||(x+=" "),x+="/>"):(x+=">",v.children.length>0&&(x+=d(v.children,T)),(T.xmlMode||!l.has(v.name))&&(x+="</".concat(v.name,">"))),x}function _(v){return"<".concat(v.data,">")}function y(v,T){var S,x=v.data||"";return((S=T.encodeEntities)!==null&&S!==void 0?S:T.decodeEntities)!==!1&&!(!T.xmlMode&&v.parent&&o.has(v.parent.name))&&(x=T.xmlMode||T.encodeEntities!=="utf8"?(0,e.encodeXML)(x):(0,e.escapeText)(x)),x}function g(v){return"<![CDATA[".concat(v.children[0].data,"]]>")}function m(v){return"<!--".concat(v.data,"-->")}return sn}var CB;function qB(){if(CB)return Ai;CB=1;var a=Ai&&Ai.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.getOuterHTML=r,Ai.getInnerHTML=e,Ai.getText=i,Ai.textContent=o,Ai.innerText=c;var t=jn(),u=a(Dfe()),n=rs();function r(s,l){return(0,u.default)(s,l)}function e(s,l){return(0,t.hasChildren)(s)?s.children.map(function(d){return r(d,l)}).join(""):""}function i(s){return Array.isArray(s)?s.map(i).join(""):(0,t.isTag)(s)?s.name==="br"?`
`:i(s.children):(0,t.isCDATA)(s)?i(s.children):(0,t.isText)(s)?s.data:""}function o(s){return Array.isArray(s)?s.map(o).join(""):(0,t.hasChildren)(s)&&!(0,t.isComment)(s)?o(s.children):(0,t.isText)(s)?s.data:""}function c(s){return Array.isArray(s)?s.map(c).join(""):(0,t.hasChildren)(s)&&(s.type===n.ElementType.Tag||(0,t.isCDATA)(s))?c(s.children):(0,t.isText)(s)?s.data:""}return Ai}var Zn={},BB;function Pfe(){if(BB)return Zn;BB=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.getChildren=t,Zn.getParent=u,Zn.getSiblings=n,Zn.getAttributeValue=r,Zn.hasAttrib=e,Zn.getName=i,Zn.nextElementSibling=o,Zn.prevElementSibling=c;var a=jn();function t(s){return(0,a.hasChildren)(s)?s.children:[]}function u(s){return s.parent||null}function n(s){var l,d,f=u(s);if(f!=null)return t(f);for(var h=[s],p=s.prev,b=s.next;p!=null;)h.unshift(p),l=p,p=l.prev;for(;b!=null;)h.push(b),d=b,b=d.next;return h}function r(s,l){var d;return(d=s.attribs)===null||d===void 0?void 0:d[l]}function e(s,l){return s.attribs!=null&&Object.prototype.hasOwnProperty.call(s.attribs,l)&&s.attribs[l]!=null}function i(s){return s.name}function o(s){for(var l,d=s.next;d!==null&&!(0,a.isTag)(d);)l=d,d=l.next;return d}function c(s){for(var l,d=s.prev;d!==null&&!(0,a.isTag)(d);)l=d,d=l.prev;return d}return Zn}var Qi={},$B;function jfe(){if($B)return Qi;$B=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.removeElement=a,Qi.replaceElement=t,Qi.appendChild=u,Qi.append=n,Qi.prependChild=r,Qi.prepend=e;function a(i){if(i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),i.parent){var o=i.parent.children,c=o.lastIndexOf(i);c>=0&&o.splice(c,1)}i.next=null,i.prev=null,i.parent=null}function t(i,o){var c=o.prev=i.prev;c&&(c.next=o);var s=o.next=i.next;s&&(s.prev=o);var l=o.parent=i.parent;if(l){var d=l.children;d[d.lastIndexOf(i)]=o,i.parent=null}}function u(i,o){if(a(o),o.next=null,o.parent=i,i.children.push(o)>1){var c=i.children[i.children.length-2];c.next=o,o.prev=c}else o.prev=null}function n(i,o){a(o);var c=i.parent,s=i.next;if(o.next=s,o.prev=i,i.next=o,o.parent=c,s){if(s.prev=o,c){var l=c.children;l.splice(l.lastIndexOf(s),0,o)}}else c&&c.children.push(o)}function r(i,o){if(a(o),o.parent=i,o.prev=null,i.children.unshift(o)!==1){var c=i.children[1];c.prev=o,o.next=c}else o.next=null}function e(i,o){a(o);var c=i.parent;if(c){var s=c.children;s.splice(s.indexOf(i),0,o)}i.prev&&(i.prev.next=o),o.parent=c,o.prev=i.prev,o.next=i,i.prev=o}return Qi}var Hi={},VB;function UB(){if(VB)return Hi;VB=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.filter=t,Hi.find=u,Hi.findOneChild=n,Hi.findOne=r,Hi.existsOne=e,Hi.findAll=i;var a=jn();function t(o,c,s,l){return s===void 0&&(s=!0),l===void 0&&(l=1/0),u(o,Array.isArray(c)?c:[c],s,l)}function u(o,c,s,l){for(var d=[],f=[Array.isArray(c)?c:[c]],h=[0];;){if(h[0]>=f[0].length){if(h.length===1)return d;f.shift(),h.shift();continue}var p=f[0][h[0]++];if(o(p)&&(d.push(p),--l<=0))return d;s&&(0,a.hasChildren)(p)&&p.children.length>0&&(h.unshift(0),f.unshift(p.children))}}function n(o,c){return c.find(o)}function r(o,c,s){s===void 0&&(s=!0);for(var l=Array.isArray(c)?c:[c],d=0;d<l.length;d++){var f=l[d];if((0,a.isTag)(f)&&o(f))return f;if(s&&(0,a.hasChildren)(f)&&f.children.length>0){var h=r(o,f.children,!0);if(h)return h}}return null}function e(o,c){return(Array.isArray(c)?c:[c]).some(function(s){return(0,a.isTag)(s)&&o(s)||(0,a.hasChildren)(s)&&e(o,s.children)})}function i(o,c){for(var s=[],l=[Array.isArray(c)?c:[c]],d=[0];;){if(d[0]>=l[0].length){if(l.length===1)return s;l.shift(),d.shift();continue}var f=l[0][d[0]++];(0,a.isTag)(f)&&o(f)&&s.push(f),(0,a.hasChildren)(f)&&f.children.length>0&&(d.unshift(0),l.unshift(f.children))}}return Hi}var Gi={},QB;function HB(){if(QB)return Gi;QB=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.testElement=i,Gi.getElements=o,Gi.getElementById=c,Gi.getElementsByTagName=s,Gi.getElementsByClassName=l,Gi.getElementsByTagType=d;var a=jn(),t=UB(),u={tag_name:function(f){return typeof f=="function"?function(h){return(0,a.isTag)(h)&&f(h.name)}:f==="*"?a.isTag:function(h){return(0,a.isTag)(h)&&h.name===f}},tag_type:function(f){return typeof f=="function"?function(h){return f(h.type)}:function(h){return h.type===f}},tag_contains:function(f){return typeof f=="function"?function(h){return(0,a.isText)(h)&&f(h.data)}:function(h){return(0,a.isText)(h)&&h.data===f}}};function n(f,h){return typeof h=="function"?function(p){return(0,a.isTag)(p)&&h(p.attribs[f])}:function(p){return(0,a.isTag)(p)&&p.attribs[f]===h}}function r(f,h){return function(p){return f(p)||h(p)}}function e(f){var h=Object.keys(f).map(function(p){var b=f[p];return Object.prototype.hasOwnProperty.call(u,p)?u[p](b):n(p,b)});return h.length===0?null:h.reduce(r)}function i(f,h){var p=e(f);return p?p(h):!0}function o(f,h,p,b){b===void 0&&(b=1/0);var _=e(f);return _?(0,t.filter)(_,h,p,b):[]}function c(f,h,p){return p===void 0&&(p=!0),Array.isArray(h)||(h=[h]),(0,t.findOne)(n("id",f),h,p)}function s(f,h,p,b){return p===void 0&&(p=!0),b===void 0&&(b=1/0),(0,t.filter)(u.tag_name(f),h,p,b)}function l(f,h,p,b){return p===void 0&&(p=!0),b===void 0&&(b=1/0),(0,t.filter)(n("class",f),h,p,b)}function d(f,h,p,b){return p===void 0&&(p=!0),b===void 0&&(b=1/0),(0,t.filter)(u.tag_type(f),h,p,b)}return Gi}var Oa={},GB;function Lfe(){if(GB)return Oa;GB=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.DocumentPosition=void 0,Oa.removeSubsets=t,Oa.compareDocumentPosition=n,Oa.uniqueSort=r;var a=jn();function t(e){for(var i=e.length;--i>=0;){var o=e[i];if(i>0&&e.lastIndexOf(o,i-1)>=0){e.splice(i,1);continue}for(var c=o.parent;c;c=c.parent)if(e.includes(c)){e.splice(i,1);break}}return e}var u;(function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"})(u||(Oa.DocumentPosition=u={}));function n(e,i){var o=[],c=[];if(e===i)return 0;for(var s=(0,a.hasChildren)(e)?e:e.parent;s;)o.unshift(s),s=s.parent;for(s=(0,a.hasChildren)(i)?i:i.parent;s;)c.unshift(s),s=s.parent;for(var l=Math.min(o.length,c.length),d=0;d<l&&o[d]===c[d];)d++;if(d===0)return u.DISCONNECTED;var f=o[d-1],h=f.children,p=o[d],b=c[d];return h.indexOf(p)>h.indexOf(b)?f===i?u.FOLLOWING|u.CONTAINED_BY:u.FOLLOWING:f===e?u.PRECEDING|u.CONTAINS:u.PRECEDING}function r(e){return e=e.filter(function(i,o,c){return!c.includes(i,o+1)}),e.sort(function(i,o){var c=n(i,o);return c&u.PRECEDING?-1:c&u.FOLLOWING?1:0}),e}return Oa}var pA={},zB;function Mfe(){if(zB)return pA;zB=1,Object.defineProperty(pA,"__esModule",{value:!0}),pA.getFeed=u;var a=qB(),t=HB();function u(f){var h=c(d,f);return h?h.name==="feed"?n(h):r(h):null}function n(f){var h,p=f.children,b={type:"atom",items:(0,t.getElementsByTagName)("entry",p).map(function(g){var m,v=g.children,T={media:o(v)};l(T,"id","id",v),l(T,"title","title",v);var S=(m=c("link",v))===null||m===void 0?void 0:m.attribs.href;S&&(T.link=S);var x=s("summary",v)||s("content",v);x&&(T.description=x);var L=s("updated",v);return L&&(T.pubDate=new Date(L)),T})};l(b,"id","id",p),l(b,"title","title",p);var _=(h=c("link",p))===null||h===void 0?void 0:h.attribs.href;_&&(b.link=_),l(b,"description","subtitle",p);var y=s("updated",p);return y&&(b.updated=new Date(y)),l(b,"author","email",p,!0),b}function r(f){var h,p,b=(p=(h=c("channel",f.children))===null||h===void 0?void 0:h.children)!==null&&p!==void 0?p:[],_={type:f.name.substr(0,3),id:"",items:(0,t.getElementsByTagName)("item",f.children).map(function(g){var m=g.children,v={media:o(m)};l(v,"id","guid",m),l(v,"title","title",m),l(v,"link","link",m),l(v,"description","description",m);var T=s("pubDate",m)||s("dc:date",m);return T&&(v.pubDate=new Date(T)),v})};l(_,"title","title",b),l(_,"link","link",b),l(_,"description","description",b);var y=s("lastBuildDate",b);return y&&(_.updated=new Date(y)),l(_,"author","managingEditor",b,!0),_}var e=["url","type","lang"],i=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function o(f){return(0,t.getElementsByTagName)("media:content",f).map(function(h){for(var p=h.attribs,b={medium:p.medium,isDefault:!!p.isDefault},_=0,y=e;_<y.length;_++){var g=y[_];p[g]&&(b[g]=p[g])}for(var m=0,v=i;m<v.length;m++){var g=v[m];p[g]&&(b[g]=parseInt(p[g],10))}return p.expression&&(b.expression=p.expression),b})}function c(f,h){return(0,t.getElementsByTagName)(f,h,!0,1)[0]}function s(f,h,p){return p===void 0&&(p=!1),(0,a.textContent)((0,t.getElementsByTagName)(f,h,p,1)).trim()}function l(f,h,p,b,_){_===void 0&&(_=!1);var y=s(p,b,_);y&&(f[h]=y)}function d(f){return f==="rss"||f==="feed"||f==="rdf:RDF"}return pA}var kB;function zi(){return kB||(kB=1,function(a){var t=ns&&ns.__createBinding||(Object.create?function(r,e,i,o){o===void 0&&(o=i);var c=Object.getOwnPropertyDescriptor(e,i);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(r,o,c)}:function(r,e,i,o){o===void 0&&(o=i),r[o]=e[i]}),u=ns&&ns.__exportStar||function(r,e){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&t(e,r,i)};Object.defineProperty(a,"__esModule",{value:!0}),a.hasChildren=a.isDocument=a.isComment=a.isText=a.isCDATA=a.isTag=void 0,u(qB(),a),u(Pfe(),a),u(jfe(),a),u(UB(),a),u(HB(),a),u(Lfe(),a),u(Mfe(),a);var n=jn();Object.defineProperty(a,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(a,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(a,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(a,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(a,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(a,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})}(ns)),ns}var XB;function Cfe(){return XB||(XB=1,function(a){var t=Kn&&Kn.__createBinding||(Object.create?function(y,g,m,v){v===void 0&&(v=m);var T=Object.getOwnPropertyDescriptor(g,m);(!T||("get"in T?!g.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return g[m]}}),Object.defineProperty(y,v,T)}:function(y,g,m,v){v===void 0&&(v=m),y[v]=g[m]}),u=Kn&&Kn.__setModuleDefault||(Object.create?function(y,g){Object.defineProperty(y,"default",{enumerable:!0,value:g})}:function(y,g){y.default=g}),n=Kn&&Kn.__importStar||function(y){if(y&&y.__esModule)return y;var g={};if(y!=null)for(var m in y)m!=="default"&&Object.prototype.hasOwnProperty.call(y,m)&&t(g,y,m);return u(g,y),g},r=Kn&&Kn.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomUtils=a.parseFeed=a.getFeed=a.ElementType=a.Tokenizer=a.createDomStream=a.parseDOM=a.parseDocument=a.DefaultHandler=a.DomHandler=a.Parser=void 0;var e=AB(),i=AB();Object.defineProperty(a,"Parser",{enumerable:!0,get:function(){return i.Parser}});var o=jn(),c=jn();Object.defineProperty(a,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(a,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function s(y,g){var m=new o.DomHandler(void 0,g);return new e.Parser(m,g).end(y),m.root}a.parseDocument=s;function l(y,g){return s(y,g).children}a.parseDOM=l;function d(y,g,m){var v=new o.DomHandler(y,g,m);return new e.Parser(v,g)}a.createDomStream=d;var f=SB();Object.defineProperty(a,"Tokenizer",{enumerable:!0,get:function(){return r(f).default}}),a.ElementType=n(rs());var h=zi(),p=zi();Object.defineProperty(a,"getFeed",{enumerable:!0,get:function(){return p.getFeed}});var b={xmlMode:!0};function _(y,g){return g===void 0&&(g=b),(0,h.getFeed)(l(y,g))}a.parseFeed=_,a.DomUtils=n(zi())}(Kn)),Kn}var qfe={"@context":{alternate:"http://www.w3.org/1999/xhtml/vocab#alternate",appendix:"http://www.w3.org/1999/xhtml/vocab#appendix",cite:"http://www.w3.org/1999/xhtml/vocab#cite",bookmark:"http://www.w3.org/1999/xhtml/vocab#bookmark",contents:"http://www.w3.org/1999/xhtml/vocab#contents",chapter:"http://www.w3.org/1999/xhtml/vocab#chapter",copyright:"http://www.w3.org/1999/xhtml/vocab#copyright",first:"http://www.w3.org/1999/xhtml/vocab#first",glossary:"http://www.w3.org/1999/xhtml/vocab#glossary",help:"http://www.w3.org/1999/xhtml/vocab#help",icon:"http://www.w3.org/1999/xhtml/vocab#icon",index:"http://www.w3.org/1999/xhtml/vocab#index",last:"http://www.w3.org/1999/xhtml/vocab#last",license:"http://www.w3.org/1999/xhtml/vocab#license",meta:"http://www.w3.org/1999/xhtml/vocab#meta",next:"http://www.w3.org/1999/xhtml/vocab#next",prev:"http://www.w3.org/1999/xhtml/vocab#prev",previous:"http://www.w3.org/1999/xhtml/vocab#previous",section:"http://www.w3.org/1999/xhtml/vocab#section",start:"http://www.w3.org/1999/xhtml/vocab#start",stylesheet:"http://www.w3.org/1999/xhtml/vocab#stylesheet",subsection:"http://www.w3.org/1999/xhtml/vocab#subsection",top:"http://www.w3.org/1999/xhtml/vocab#top",up:"http://www.w3.org/1999/xhtml/vocab#up",p3pv1:"http://www.w3.org/1999/xhtml/vocab#p3pv1"}},Bfe={"@context":{as:"https://www.w3.org/ns/activitystreams#",cat:"http://www.w3.org/ns/dcat#",cc:"http://creativecommons.org/ns#",cnt:"http://www.w3.org/2008/content#",csvw:"http://www.w3.org/ns/csvw#",ctag:"http://commontag.org/ns#",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcat:"http://www.w3.org/ns/dcat#",dcterms:"http://purl.org/dc/terms/",dqv:"http://www.w3.org/ns/dqv#",duv:"https://www.w3.org/TR/vocab-duv#",earl:"http://www.w3.org/ns/earl#",foaf:"http://xmlns.com/foaf/0.1/",gldp:"http://www.w3.org/ns/people#",gr:"http://purl.org/goodrelations/v1#",grddl:"http://www.w3.org/2003/g/data-view#",ht:"http://www.w3.org/2006/http#",ical:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",ma:"http://www.w3.org/ns/ma-ont#",oa:"http://www.w3.org/ns/oa#",odrl:"http://www.w3.org/ns/odrl/2/",og:"http://ogp.me/ns#",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",prov:"http://www.w3.org/ns/prov#",ptr:"http://www.w3.org/2009/pointers#",qb:"http://purl.org/linked-data/cube#",rev:"http://purl.org/stuff/rev#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfa:"http://www.w3.org/ns/rdfa#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rif:"http://www.w3.org/2007/rif#",rr:"http://www.w3.org/ns/r2rml#",schema:"http://schema.org/",sd:"http://www.w3.org/ns/sparql-service-description#",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",ssn:"http://www.w3.org/ns/ssn/",sosa:"http://www.w3.org/ns/sosa/",time:"http://www.w3.org/2006/time#",v:"http://rdf.data-vocabulary.org/#",vcard:"http://www.w3.org/2006/vcard/ns#",void:"http://rdfs.org/ns/void#",wdr:"http://www.w3.org/2007/05/powder#",wdrs:"http://www.w3.org/2007/05/powder-s#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",describedby:"http://www.w3.org/2007/05/powder-s#describedby",license:"http://www.w3.org/1999/xhtml/vocab#license",role:"http://www.w3.org/1999/xhtml/vocab#role"}},as={},JB;function cR(){return JB||(JB=1,Object.defineProperty(as,"__esModule",{value:!0}),as.RDFA_CONTENTTYPES=as.RDFA_FEATURES=void 0,as.RDFA_FEATURES={"":{baseTag:!0,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},core:{baseTag:!1,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!1,datetimeAttribute:!1,timeTag:!1,htmlDatatype:!1,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!1},html:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0},xhtml:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},xml:{baseTag:!1,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!1,inheritSubjectInHeadBody:!1,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!1,copyRdfaPatterns:!1,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0}},as.RDFA_CONTENTTYPES={"text/html":"html","application/xhtml+xml":"xhtml","application/xml":"xml","text/xml":"xml","image/svg+xml":"xml"}),as}var ym={},us={},bm={},KB;function WB(){if(KB)return bm;KB=1,Object.defineProperty(bm,"__esModule",{value:!0}),bm.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return bm.BlankNode=a,bm}var mm={},_m={},YB;function ZB(){if(YB)return _m;YB=1,Object.defineProperty(_m,"__esModule",{value:!0}),_m.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return _m.DefaultGraph=a,a.INSTANCE=new a,_m}var gm={},vm={},e$;function lR(){if(e$)return vm;e$=1,Object.defineProperty(vm,"__esModule",{value:!0}),vm.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return vm.NamedNode=a,vm}var t$;function r$(){if(t$)return gm;t$=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.Literal=void 0;const a=lR();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return gm.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),gm}var Tm={},n$;function i$(){if(n$)return Tm;n$=1,Object.defineProperty(Tm,"__esModule",{value:!0}),Tm.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return Tm.Quad=a,Tm}var wm={},a$;function u$(){if(a$)return wm;a$=1,Object.defineProperty(wm,"__esModule",{value:!0}),wm.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return wm.Variable=a,wm}var o$;function $fe(){if(o$)return mm;o$=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.DataFactory=void 0;const a=WB(),t=ZB(),u=r$(),n=lR(),r=i$(),e=u$();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return mm.DataFactory=o,mm}var s$;function Vfe(){return s$||(s$=1,function(a){var t=us&&us.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=us&&us.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(WB(),a),u($fe(),a),u(ZB(),a),u(r$(),a),u(lR(),a),u(i$(),a),u(u$(),a)}(us)),us}var c$;function l$(){if(c$)return ym;c$=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym.Util=void 0;const a=vr(),t=cR(),u=Vfe();class n{constructor(e,i){this.dataFactory=e||new u.DataFactory,this.baseIRI=this.dataFactory.namedNode(i||""),this.baseIRIDocument=this.baseIRI}static parsePrefixes(e,i,o){const c={};if(o)for(const s in e)s.startsWith("xmlns")&&(c[s.substr(6)]=e[s]);if(e.prefix||Object.keys(c).length>0){const s=Object.assign(Object.assign({},i),c);if(e.prefix){let l;for(;l=n.PREFIX_REGEX.exec(e.prefix);)s[l[1]]=l[2]}return s}else return i}static expandPrefixedTerm(e,i){const o=e.indexOf(":");let c,s;if(o>=0&&(c=e.substr(0,o),s=e.substr(o+1)),c==="")return"http://www.w3.org/1999/xhtml/vocab#"+s;if(c){const l=i.prefixesAll[c];if(l)return l+s}if(e){const l=i.prefixesAll[e.toLocaleLowerCase()];if(l)return l}return e}static isValidIri(e){return n.IRI_REGEX.test(e)}static contentTypeToProfile(e){return t.RDFA_CONTENTTYPES[e]||""}getBaseIRI(e){let i=e;const o=i.indexOf("#");return o>=0&&(i=i.substr(0,o)),this.dataFactory.namedNode((0,a.resolve)(i,this.baseIRI.value))}getResourceOrBaseIri(e,i){return e===!0?this.getBaseIriTerm(i):e}getBaseIriTerm(e){return e.localBaseIRI||this.baseIRI}createVocabIris(e,i,o,c){return e.split(/\s+/).filter(s=>s&&(o||s.indexOf(":")>=0)).map(s=>this.createIri(s,i,!0,!0,c)).filter(s=>s!=null)}createLiteral(e,i){if(i.interpretObjectAsTime&&!i.datatype){for(const o of n.TIME_REGEXES)if(e.match(o.regex)){i.datatype=this.dataFactory.namedNode(n.XSD+o.type);break}}return this.dataFactory.literal(e,i.datatype||i.language)}createBlankNode(){return this.blankNodeFactory?this.blankNodeFactory():this.dataFactory.blankNode()}createIri(e,i,o,c,s){if(e=e||"",!c)return o||(e=(0,a.resolve)(e,this.getBaseIriTerm(i).value)),n.isValidIri(e)?this.dataFactory.namedNode(e):null;if(e.length>0&&e[0]==="["&&e[e.length-1]==="]"&&(e=e.substr(1,e.length-2),e.indexOf(":")<0))return null;if(e.startsWith("_:"))return s?this.dataFactory.blankNode(e.substr(2)||"b_identity"):null;if(o&&i.vocab&&e.indexOf(":")<0)return this.dataFactory.namedNode(i.vocab+e);let l=n.expandPrefixedTerm(e,i);return o?e!==l&&(l=(0,a.resolve)(l,this.baseIRIDocument.value)):l=(0,a.resolve)(l,this.getBaseIriTerm(i).value),n.isValidIri(l)?this.dataFactory.namedNode(l):null}}return ym.Util=n,n.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n.XSD="http://www.w3.org/2001/XMLSchema#",n.RDFA="http://www.w3.org/ns/rdfa#",n.PREFIX_REGEX=/\s*([^:\s]*)*:\s*([^\s]*)*\s*/g,n.TIME_REGEXES=[{regex:/^-?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+-[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}],n.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`]*$/,ym}var d$;function Ufe(){if(d$)return pm;d$=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.RdfaParser=void 0;const a=Cfe(),t=Mt(),u=qfe,n=Bfe,r=cR(),e=l$();let i=class iae extends t.Transform{constructor(c){super({readableObjectMode:!0}),this.activeTagStack=[],c=c||{},this.options=c,this.util=new e.Util(c.dataFactory,c.baseIRI),this.defaultGraph=c.defaultGraph||this.util.dataFactory.defaultGraph();const s=c.contentType?e.Util.contentTypeToProfile(c.contentType):c.profile||"";this.features=c.features||r.RDFA_FEATURES[s],this.htmlParseListener=c.htmlParseListener,this.rdfaPatterns=this.features.copyRdfaPatterns?{}:null,this.pendingRdfaPatternCopies=this.features.copyRdfaPatterns?{}:null,this.parser=this.initializeParser(s==="xml"),this.activeTagStack.push({incompleteTriples:[],inlist:!1,language:c.language,listMapping:{},listMappingLocal:{},name:"",prefixesAll:Object.assign(Object.assign({},n["@context"]),this.features.xhtmlInitialContext?u["@context"]:{}),prefixesCustom:{},skipElement:!1,vocab:c.vocab})}import(c){const s=new t.PassThrough({readableObjectMode:!0});c.on("error",d=>l.emit("error",d)),c.on("data",d=>s.push(d)),c.on("end",()=>s.push(null));const l=s.pipe(new iae(this.options));return l}_transform(c,s,l){this.parser.write(c.toString()),l()}_flush(c){this.parser.end(),c()}onTagOpen(c,s){let l=this.activeTagStack.length-1;for(;l>0&&this.activeTagStack[l].skipElement;)l--;let d=this.activeTagStack[l];l!==this.activeTagStack.length-1&&(d=Object.assign(Object.assign({},d),{language:this.activeTagStack[this.activeTagStack.length-1].language,prefixesAll:this.activeTagStack[this.activeTagStack.length-1].prefixesAll,prefixesCustom:this.activeTagStack[this.activeTagStack.length-1].prefixesCustom,vocab:this.activeTagStack[this.activeTagStack.length-1].vocab}));const f={collectChildTags:d.collectChildTags,incompleteTriples:[],inlist:"inlist"in s,listMapping:[],listMappingLocal:d.listMapping,localBaseIRI:d.localBaseIRI,name:c,prefixesAll:null,prefixesCustom:null,skipElement:!1};if(this.activeTagStack.push(f),f.collectChildTags){for(const T of Object.keys(d.prefixesCustom).sort()){const S=d.prefixesCustom[T],x=T===""?"xmlns":"xmlns:"+T;x in s||(s[x]=S)}const v=Object.keys(s).map(T=>`${T}="${s[T]}"`).join(" ");if(f.text=[`<${c}${v?" "+v:""}>`],this.features.skipHandlingXmlLiteralChildren)return}let h=!0,p=!0;if(this.features.onlyAllowUriRelRevIfProperty&&("property"in s&&"rel"in s&&(h=!1,s.rel.indexOf(":")<0&&delete s.rel),"property"in s&&"rev"in s&&(p=!1,s.rev.indexOf(":")<0&&delete s.rev)),this.features.copyRdfaPatterns){if(d.collectedPatternTag){const v={attributes:s,children:[],name:c,referenced:!1,rootPattern:!1,text:[]};d.collectedPatternTag.children.push(v),f.collectedPatternTag=v;return}if(s.typeof==="rdfa:Pattern"){f.collectedPatternTag={attributes:s,children:[],name:c,parentTag:d,referenced:!1,rootPattern:!0,text:[]};return}if(s.property==="rdfa:copy"){const v=s.resource||s.href||s.src;this.rdfaPatterns[v]?this.emitPatternCopy(d,this.rdfaPatterns[v],v):(this.pendingRdfaPatternCopies[v]||(this.pendingRdfaPatternCopies[v]=[]),this.pendingRdfaPatternCopies[v].push(d));return}}this.features.baseTag&&c==="base"&&s.href&&(this.util.baseIRI=this.util.getBaseIRI(s.href)),this.features.xmlBase&&s["xml:base"]&&(f.localBaseIRI=this.util.getBaseIRI(s["xml:base"])),this.features.timeTag&&c==="time"&&!s.datatype&&(f.interpretObjectAsTime=!0);let b,_,y;if("vocab"in s?s.vocab?(f.vocab=s.vocab,this.emitTriple(this.util.getBaseIriTerm(f),this.util.dataFactory.namedNode(e.Util.RDFA+"usesVocabulary"),this.util.dataFactory.namedNode(f.vocab))):f.vocab=this.activeTagStack[0].vocab:f.vocab=d.vocab,f.prefixesCustom=e.Util.parsePrefixes(s,d.prefixesCustom,this.features.xmlnsPrefixMappings),f.prefixesAll=Object.keys(f.prefixesCustom).length>0?Object.assign(Object.assign({},d.prefixesAll),f.prefixesCustom):d.prefixesAll,this.features.roleAttribute&&s.role){const v=s.id?this.util.createIri("#"+s.id,f,!1,!1,!1):this.util.createBlankNode(),T=f.vocab;f.vocab="http://www.w3.org/1999/xhtml/vocab#";for(const S of this.util.createVocabIris(s.role,f,!0,!1))this.emitTriple(v,this.util.dataFactory.namedNode("http://www.w3.org/1999/xhtml/vocab#role"),S);f.vocab=T}"xml:lang"in s||this.features.langAttribute&&"lang"in s?f.language=s["xml:lang"]||s.lang:f.language=d.language;const g=this.activeTagStack.length===2;if(!("rel"in s)&&!("rev"in s)?"property"in s&&!("content"in s)&&!("datatype"in s)?("about"in s?(b=this.util.createIri(s.about,f,!1,!0,!0),f.explicitNewSubject=!!b):g?b=!0:d.object&&(b=d.object),"typeof"in s&&("about"in s&&(y=this.util.createIri(s.about,f,!1,!0,!0)),!y&&g&&(y=!0),!y&&"resource"in s&&(y=this.util.createIri(s.resource,f,!1,!0,!0)),!y&&("href"in s||"src"in s)&&(y=this.util.createIri(s.href||s.src,f,!1,!1,!0)),!y&&this.isInheritSubjectInHeadBody(c)&&(y=b),y||(y=this.util.createBlankNode()),_=y)):(("about"in s||"resource"in s)&&(b=this.util.createIri(s.about||s.resource,f,!1,!0,!0),f.explicitNewSubject=!!b),!b&&("href"in s||"src"in s)&&(b=this.util.createIri(s.href||s.src,f,!1,!1,!0),f.explicitNewSubject=!!b),b||(g?b=!0:this.isInheritSubjectInHeadBody(c)?b=d.object:"typeof"in s?(b=this.util.createBlankNode(),f.explicitNewSubject=!0):d.object&&(b=d.object,"property"in s||(f.skipElement=!0))),"typeof"in s&&(y=b)):("about"in s?(b=this.util.createIri(s.about,f,!1,!0,!0),f.explicitNewSubject=!!b,"typeof"in s&&(y=b)):g?b=!0:d.object&&(b=d.object),"resource"in s&&(_=this.util.createIri(s.resource,f,!1,!0,!0)),_||("href"in s||"src"in s?_=this.util.createIri(s.href||s.src,f,!1,!1,!0):"typeof"in s&&!("about"in s)&&!this.isInheritSubjectInHeadBody(c)&&(_=this.util.createBlankNode())),"typeof"in s&&!("about"in s)&&(this.isInheritSubjectInHeadBody(c)?y=b:y=_)),y)for(const v of this.util.createVocabIris(s.typeof,f,!0,!0))this.emitTriple(this.util.getResourceOrBaseIri(y,f),this.util.dataFactory.namedNode(e.Util.RDF+"type"),v);if(b&&(f.listMapping={}),_){if("rel"in s&&"inlist"in s)for(const v of this.util.createVocabIris(s.rel,f,h,!1))this.addListMapping(f,b,v,_);if(!("rel"in s&&"inlist"in s)){if("rel"in s)for(const v of this.util.createVocabIris(s.rel,f,h,!1))this.emitTriple(this.util.getResourceOrBaseIri(b,f),v,this.util.getResourceOrBaseIri(_,f));if("rev"in s)for(const v of this.util.createVocabIris(s.rev,f,p,!1))this.emitTriple(this.util.getResourceOrBaseIri(_,f),v,this.util.getResourceOrBaseIri(b,f))}}if(!_){if("rel"in s)if("inlist"in s)for(const v of this.util.createVocabIris(s.rel,f,h,!1))this.addListMapping(f,b,v,null),f.incompleteTriples.push({predicate:v,reverse:!1,list:!0});else for(const v of this.util.createVocabIris(s.rel,f,h,!1))f.incompleteTriples.push({predicate:v,reverse:!1});if("rev"in s)for(const v of this.util.createVocabIris(s.rev,f,p,!1))f.incompleteTriples.push({predicate:v,reverse:!0});f.incompleteTriples.length>0&&(_=this.util.createBlankNode())}if("property"in s){f.predicates=this.util.createVocabIris(s.property,f,!0,!1);let v;if("datatype"in s?(f.datatype=this.util.createIri(s.datatype,f,!0,!0,!1),f.datatype&&(f.datatype.value===e.Util.RDF+"XMLLiteral"||this.features.htmlDatatype&&f.datatype.value===e.Util.RDF+"HTML")&&(f.collectChildTags=!0)):(!("rev"in s)&&!("rel"in s)&&!("content"in s)&&("resource"in s&&(v=this.util.createIri(s.resource,f,!1,!0,!0)),!v&&"href"in s&&(v=this.util.createIri(s.href,f,!1,!1,!0)),!v&&"src"in s&&(v=this.util.createIri(s.src,f,!1,!1,!0))),"typeof"in s&&!("about"in s)&&(v=y)),"content"in s){const T=this.util.createLiteral(s.content,f);if("inlist"in s)for(const S of f.predicates)this.addListMapping(f,b,S,T);else{const S=this.util.getResourceOrBaseIri(b,f);for(const x of f.predicates)this.emitTriple(S,x,T)}f.predicates=null}else if(this.features.datetimeAttribute&&"datetime"in s){f.interpretObjectAsTime=!0;const T=this.util.createLiteral(s.datetime,f);if("inlist"in s)for(const S of f.predicates)this.addListMapping(f,b,S,T);else{const S=this.util.getResourceOrBaseIri(b,f);for(const x of f.predicates)this.emitTriple(S,x,T)}f.predicates=null}else if(v){const T=this.util.getResourceOrBaseIri(v,f);if("inlist"in s)for(const S of f.predicates)this.addListMapping(f,b,S,T);else{const S=this.util.getResourceOrBaseIri(b,f);for(const x of f.predicates)this.emitTriple(S,x,T)}f.predicates=null}}let m=!1;if(!f.skipElement&&b&&d.incompleteTriples.length>0){m=!0;const v=this.util.getResourceOrBaseIri(d.subject,f),T=this.util.getResourceOrBaseIri(b,f);for(const S of d.incompleteTriples)if(S.reverse)this.emitTriple(T,S.predicate,v);else if(S.list){let x=null;for(let L=this.activeTagStack.length-1;L>=0;L--)if(this.activeTagStack[L].inlist){x=this.activeTagStack[L];break}this.addListMapping(x,b,S.predicate,T)}else this.emitTriple(v,S.predicate,T)}!m&&d.incompleteTriples.length>0&&(f.incompleteTriples=f.incompleteTriples.concat(d.incompleteTriples)),f.subject=b||d.subject,f.object=_||b}onText(c){const s=this.activeTagStack[this.activeTagStack.length-1];if(this.features.copyRdfaPatterns&&s.collectedPatternTag){s.collectedPatternTag.text.push(c);return}s.text||(s.text=[]),s.text.push(c)}onTagClose(){const c=this.activeTagStack[this.activeTagStack.length-1],s=this.activeTagStack[this.activeTagStack.length-2];if(!(c.collectChildTags&&s.collectChildTags&&this.features.skipHandlingXmlLiteralChildren)){if(this.features.copyRdfaPatterns&&c.collectedPatternTag&&c.collectedPatternTag.rootPattern){const l=c.collectedPatternTag.attributes.resource;if(delete c.collectedPatternTag.attributes.resource,delete c.collectedPatternTag.attributes.typeof,this.rdfaPatterns[l]=c.collectedPatternTag,this.pendingRdfaPatternCopies[l]){for(const d of this.pendingRdfaPatternCopies[l])this.emitPatternCopy(d,c.collectedPatternTag,l);delete this.pendingRdfaPatternCopies[l]}this.activeTagStack.pop();return}if(c.predicates){const l=this.util.getResourceOrBaseIri(c.subject,c);let d=c.text||[];c.collectChildTags&&s.collectChildTags&&(d=d.slice(1));const f=this.util.createLiteral(d.join(""),c);if(c.inlist)for(const h of c.predicates)this.addListMapping(c,l,h,f);else for(const h of c.predicates)this.emitTriple(l,h,f);s.predicates||(c.text=null)}if(c.object&&Object.keys(c.listMapping).length>0){const l=this.util.getResourceOrBaseIri(c.object,c);for(const d in c.listMapping){const f=this.util.dataFactory.namedNode(d),h=c.listMapping[d];if(h.length>0){const p=h.map(()=>this.util.createBlankNode());for(let b=0;b<h.length;b++){const _=this.util.getResourceOrBaseIri(h[b],c);this.emitTriple(p[b],this.util.dataFactory.namedNode(e.Util.RDF+"first"),_),this.emitTriple(p[b],this.util.dataFactory.namedNode(e.Util.RDF+"rest"),b<h.length-1?p[b+1]:this.util.dataFactory.namedNode(e.Util.RDF+"nil"))}this.emitTriple(l,f,p[0])}else this.emitTriple(l,f,this.util.dataFactory.namedNode(e.Util.RDF+"nil"))}}}this.activeTagStack.pop(),c.collectChildTags&&c.text&&c.text.push(`</${c.name}>`),c.text&&s&&(s.text?s.text=s.text.concat(c.text):s.text=c.text)}onEnd(){if(this.features.copyRdfaPatterns){this.features.copyRdfaPatterns=!1;for(const c in this.rdfaPatterns){const s=this.rdfaPatterns[c];s.referenced||(s.attributes.typeof="rdfa:Pattern",s.attributes.resource=c,this.emitPatternCopy(s.parentTag,s,c),s.referenced=!1,delete s.attributes.typeof,delete s.attributes.resource)}for(const c in this.pendingRdfaPatternCopies)for(const s of this.pendingRdfaPatternCopies[c])this.activeTagStack.push(s),this.onTagOpen("link",{property:"rdfa:copy",href:c}),this.onTagClose(),this.activeTagStack.pop();this.features.copyRdfaPatterns=!0}}isInheritSubjectInHeadBody(c){return this.features.inheritSubjectInHeadBody&&(c==="head"||c==="body")}addListMapping(c,s,l,d){if(c.explicitNewSubject){const f=this.util.createBlankNode();this.emitTriple(this.util.getResourceOrBaseIri(s,c),l,f),this.emitTriple(f,this.util.dataFactory.namedNode(e.Util.RDF+"first"),this.util.getResourceOrBaseIri(d,c)),this.emitTriple(f,this.util.dataFactory.namedNode(e.Util.RDF+"rest"),this.util.dataFactory.namedNode(e.Util.RDF+"nil"))}else{let f=c.listMappingLocal[l.value];f||(c.listMappingLocal[l.value]=f=[]),d&&f.push(d)}}emitTriple(c,s,l){c.termType==="NamedNode"&&c.value.indexOf(":")<0||s.termType==="NamedNode"&&s.value.indexOf(":")<0||l.termType==="NamedNode"&&l.value.indexOf(":")<0||this.push(this.util.dataFactory.quad(c,s,l,this.defaultGraph))}emitPatternCopy(c,s,l){if(this.activeTagStack.push(c),s.referenced=!0,!s.constructedBlankNodes)s.constructedBlankNodes=[],this.util.blankNodeFactory=()=>{const d=this.util.dataFactory.blankNode();return s.constructedBlankNodes.push(d),d};else{let d=0;this.util.blankNodeFactory=()=>s.constructedBlankNodes[d++]}this.emitPatternCopyAbsolute(s,!0,l),this.util.blankNodeFactory=null,this.activeTagStack.pop()}emitPatternCopyAbsolute(c,s,l){if(!(!s&&c.attributes.property==="rdfa:copy"&&c.attributes.href===l)){this.onTagOpen(c.name,c.attributes);for(const d of c.text)this.onText(d);for(const d of c.children)this.emitPatternCopyAbsolute(d,!1,l);this.onTagClose()}}initializeParser(c){return new a.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(s){this.emit("error",s)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(s){this.emit("error",s)}},onopentag:(s,l)=>{try{this.onTagOpen(s,l),this.htmlParseListener&&this.htmlParseListener.onTagOpen(s,l)}catch(d){this.emit("error",d)}},ontext:s=>{try{this.onText(s),this.htmlParseListener&&this.htmlParseListener.onText(s)}catch(l){this.emit("error",l)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:c})}};return pm.RdfaParser=i,pm}var f$;function h$(){return f$||(f$=1,function(a){var t=es&&es.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=es&&es.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ofe(),a),u(Afe(),a),u(Efe(),a),u(Ufe(),a),u(cR(),a),u(l$(),a)}(es)),es}var p$;function Qfe(){if(p$)return hm;p$=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.ActorRdfParseXmlRdfa=void 0;const a=Oh(),t=ze(),u=h$();let n=class extends a.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,i,o){var d;const c=e.context.getSafe(t.KeysInitQuery.dataFactory),s=(e.headers&&e.headers.get("content-language"))??void 0;e.data.on("error",f=>l.emit("error",f));const l=e.data.pipe(new u.RdfaParser({dataFactory:c,baseIRI:(d=e.metadata)==null?void 0:d.baseIRI,profile:"xml",language:s}));return{data:l,metadata:{triples:!0}}}};return hm.ActorRdfParseXmlRdfa=n,hm}var y$;function Hfe(){return y$||(y$=1,function(a){var t=Zo&&Zo.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Zo&&Zo.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Qfe(),a)}(Zo)),Zo}var os={},Sm={},Rh={},Om={},b$;function m$(){if(b$)return Om;b$=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.promisifyEventEmitter=void 0;function a(t,u){return new Promise((n,r)=>{t.on("end",()=>n(u)),t.on("error",r)})}return Om.promisifyEventEmitter=a,Om}var _$;function Fh(){if(_$)return Rh;_$=1;var a=Rh&&Rh.__awaiter||function(n,r,e,i){function o(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function l(h){try{f(i.next(h))}catch(p){s(p)}}function d(h){try{f(i.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):o(h.value).then(l,d)}f((i=i.apply(n,r||[])).next())})};Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.stringify=u;const t=m$();function u(n){return a(this,void 0,void 0,function*(){let r="";return n.on("data",e=>{r+=e}),yield(0,t.promisifyEventEmitter)(n),r})}return Rh}var yA={},dR,g$;function Gfe(){if(g$)return dR;g$=1;var a=function(){var t=function(Pe,Be,ke,Je){for(ke=ke||{},Je=Pe.length;Je--;ke[Pe[Je]]=Be);return ke},u=[7,12,13,14,15,16,20,25,115,130],n=[7,13,16,20,25,115,130],r=[7,13,16,115,130],e=[1,25],i=[1,29],o=[1,27],c=[1,28],s=[13,16,115,130],l=[13,16,28,38,40,42,44,46,48,53,56,61,67,85,87,92,93,95,96,102,110,111,115,119,120,126,128,129,130,131,132,133,134,135,136],d=[28,56],f=[1,42],h=[46,48,53,56],p=[1,54],b=[1,60],_=[1,56],y=[1,57],g=[1,58],m=[1,63],v=[1,64],T=[1,65],S=[1,66],x=[1,67],L=[1,68],O=[1,75],w=[28,46,48,53,56],A=[28,42,46,48,53,56],E=[13,16,28,38,40,42,44,46,48,53,56,92,115,119,120,130,131,132,133,134,135,136],R=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,119,120,126,128,129,130,131,132,133,134,135,136],V=[13,16,38,40,44,92,115,119,120,130,131,132,133,134,135,136],$=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,117,118,119,120,126,128,129,130,131,132,133,134,135,136],Q=[13,16,28,56,115,130],ne=[13,16,38,58,87,96,109,115,126,130],ie=[1,116],fe=[1,112],J=[1,108],_e=[1,114],Fe=[1,111],ve=[7,13,16,20,25,44,48,53,56,67,85,87,95,96,115,128,129,130],te=[48,53],Le=[48,53,87,96,126],Ce=[13,16,44,48,53,56,85,87,95,96,115,128,129,130],Ve=[1,126],ge=[13,16,40,44,48,53,56,85,87,95,96,115,128,129,130],we=[1,129],G=[48,53,67,87,96,126],D=[13,16,40,44,48,53,56,67,85,87,95,96,115,128,129,130],j=[1,133],I=[13,16,40,44,48,53,56,67,85,87,95,96,102,115,128,129,130],N=[13,16,40,44,48,53,56,67,85,87,93,95,96,102,110,111,115,128,129,130],B=[1,151],X=[1,153],H=[1,156],K=[1,157],z=[1,158],Z=[1,167],de=[1,175],le=[13,16,44,48,53,56,67,85,87,95,96,115,128,129,130],De=[13,16,44,48,53,56,67,85,87,95,96,115,126,128,129,130],Qe=[13,16,46,92,115,119,120,130,131,132,133,134,135,136],je={trace:function(){},yy:{},symbols_:{error:2,shaclDoc:3,shaclDoc_repetition0:4,shaclDoc_repetition1:5,ttlSection:6,EOF:7,directive:8,baseDecl:9,importsDecl:10,prefixDecl:11,KW_BASE:12,IRIREF:13,KW_IMPORTS:14,KW_PREFIX:15,PNAME_NS:16,nodeShapeIri:17,iri:18,nodeShape:19,KW_SHAPE:20,nodeShape_option0:21,nodeShape_option1:22,nodeShapeBody:23,shapeClass:24,KW_SHAPE_CLASS:25,shapeClass_option0:26,turtleAnnotation:27,";":28,turtleAnnotation2:29,predicate:30,turtleAnnotation2_option0:31,objectList:32,object:33,objectList_repetition0:34,iriOrLiteral:35,blankNodeSection:36,list:37,"(":38,list_repetition0:39,")":40,objectTail:41,",":42,LB:43,"[":44,RB:45,"]":46,LP:47,"%":48,RP:49,pcSection:50,iriHead:51,ttlStatement:52,".":53,ttlSection_repetition0:54,startNodeShape:55,"{":56,endNodeShape:57,"}":58,nodeShapeBody_repetition0:59,targetClass:60,"->":61,targetClass_repetition_plus0:62,constraint:63,constraint_group0:64,constraint_option0:65,orNotComponent:66,"|":67,nodeNot:68,nodeOrEmit:69,nodeOr:70,nodeOr_repetition_plus0:71,nodeValue:72,negation:73,nodeValue_group0:74,"=":75,iriOrLiteralOrArray:76,propertyShape:77,path:78,propertyShape_repetition0:79,propertyOrComponent:80,propertyNot:81,propertyOr:82,propertyOr_repetition_plus0:83,propertyAtom:84,NODEKIND:85,shapeRef:86,PARAM:87,propertyCount:88,propertyMinCount:89,"..":90,propertyMaxCount:91,INTEGER:92,"*":93,shapeRef_group0:94,"@":95,"!":96,pathAlternative:97,additionalAlternative:98,pathSequence:99,pathAlternative_repetition_plus0:100,additionalSequence:101,"/":102,pathEltOrInverse:103,pathSequence_repetition_plus0:104,pathElt:105,pathPrimary:106,pathMod:107,pathInverse:108,"^":109,"?":110,"+":111,iriOrLiteralOrArray_repetition0:112,literal:113,iri_group0:114,a:115,string:116,LANGTAG:117,"^^":118,DECIMAL:119,DOUBLE:120,literal_group0:121,string_group0:122,string_group1:123,shaclDoc_repetition1_group0:124,constraint_group0_repetition_plus0:125,TARGET:126,propertyShape_repetition0_group0:127,ATPNAME_LN:128,ATPNAME_NS:129,PNAME_LN:130,KW_TRUE:131,KW_FALSE:132,STRING_LITERAL1:133,STRING_LITERAL2:134,STRING_LITERAL_LONG1:135,STRING_LITERAL_LONG2:136,$accept:0,$end:1},terminals_:{2:"error",7:"EOF",12:"KW_BASE",13:"IRIREF",14:"KW_IMPORTS",15:"KW_PREFIX",16:"PNAME_NS",20:"KW_SHAPE",25:"KW_SHAPE_CLASS",28:";",38:"(",40:")",42:",",44:"[",46:"]",48:"%",53:".",56:"{",58:"}",61:"->",67:"|",75:"=",85:"NODEKIND",87:"PARAM",90:"..",92:"INTEGER",93:"*",95:"@",96:"!",102:"/",109:"^",110:"?",111:"+",115:"a",117:"LANGTAG",118:"^^",119:"DECIMAL",120:"DOUBLE",126:"TARGET",128:"ATPNAME_LN",129:"ATPNAME_NS",130:"PNAME_LN",131:"KW_TRUE",132:"KW_FALSE",133:"STRING_LITERAL1",134:"STRING_LITERAL2",135:"STRING_LITERAL_LONG1",136:"STRING_LITERAL_LONG2"},productions_:[0,[3,4],[8,1],[8,1],[8,1],[9,2],[10,2],[11,3],[17,1],[19,5],[24,4],[27,2],[29,2],[30,2],[32,2],[33,1],[33,1],[33,1],[37,3],[41,2],[43,1],[45,1],[36,3],[47,1],[49,1],[50,3],[51,1],[52,3],[6,1],[55,1],[57,1],[23,3],[60,2],[63,3],[66,2],[69,1],[70,1],[70,2],[68,1],[68,2],[72,3],[77,2],[80,2],[82,1],[82,2],[81,1],[81,2],[84,1],[84,1],[84,1],[84,3],[84,1],[88,5],[89,1],[91,1],[91,1],[86,1],[86,2],[73,1],[78,1],[98,2],[97,1],[97,2],[101,2],[99,1],[99,2],[105,1],[105,2],[103,1],[103,2],[108,1],[107,1],[107,1],[107,1],[106,1],[106,3],[76,1],[76,3],[35,1],[35,1],[18,1],[18,1],[18,1],[113,1],[113,2],[113,3],[113,1],[113,1],[113,1],[113,1],[116,1],[116,1],[4,0],[4,2],[124,1],[124,1],[5,0],[5,2],[21,0],[21,1],[22,0],[22,1],[26,0],[26,1],[31,0],[31,1],[34,0],[34,2],[39,0],[39,2],[54,0],[54,2],[59,0],[59,2],[62,1],[62,2],[125,1],[125,2],[64,1],[64,1],[65,0],[65,1],[71,1],[71,2],[74,1],[74,1],[127,1],[127,1],[79,0],[79,2],[83,1],[83,2],[94,1],[94,1],[100,1],[100,2],[104,1],[104,2],[112,0],[112,2],[114,1],[114,1],[121,1],[121,1],[122,1],[122,1],[123,1],[123,1]],performAction:function(Be,ke,Je,ct,Ze,Ye,zr){var Xe=Ye.length-1;switch(Ze){case 1:this.$=M(pe.factory.namedNode(qe("")),pe.factory.namedNode(se),pe.factory.namedNode(Ke+"Ontology"));break;case 5:pe.base=pe.factory.namedNode(Ye[Xe].slice(1,-1)),pe.n3Parser._setBase(qe(pe.base.value));break;case 6:this.$=M(pe.base,pe.factory.namedNode(Ke+"imports"),pe.factory.namedNode(Ye[Xe].slice(1,-1)));break;case 7:this.$=pe.prefixes[Ye[Xe-1].substr(0,Ye[Xe-1].length-1)]=qe(Ye[Xe]);break;case 8:pe.nodeShapeStack=!1,M(pe.currentNodeShape=Ye[Xe],pe.factory.namedNode(se),pe.factory.namedNode(Se+"NodeShape"));break;case 10:this.$=M(pe.currentNodeShape,pe.factory.namedNode(se),pe.factory.namedNode(Y+"Class"));break;case 11:this.$=W();break;case 13:this.$=Ye[Xe].forEach(xe=>M(pe.currentNodeShape,Ye[Xe-1],xe));break;case 14:this.$=[Ye[Xe-1],...Ye[Xe]];break;case 18:this.$=Re(Ye[Xe-1],!0);break;case 19:case 34:case 42:case 60:case 63:this.$=Ye[Xe];break;case 20:pe.tempCurrentNodeShape=pe.currentNodeShape,this.$=pe.currentNodeShape=rt();break;case 21:pe.currentNodeShape=pe.tempCurrentNodeShape;break;case 22:case 31:this.$=Ye[Xe-2];break;case 23:pe.tempCurrentNodeShape=pe.currentNodeShape,pe.currentNodeShape=pe.currentPropertyNode;break;case 24:pe.currentNodeShape=pe.tempCurrentNodeShape;break;case 26:pe.currentNodeShape=Ye[Xe];break;case 29:pe.nodeShapeStack?(pe.nodeShapeStack.push(pe.currentNodeShape),M(pe.currentPropertyNode,pe.factory.namedNode(Se+"node"),pe.currentNodeShape=rt())):pe.nodeShapeStack=[],this.$=pe.currentNodeShape;break;case 30:pe.nodeShapeStack.length>0&&(pe.currentNodeShape=pe.nodeShapeStack.pop());break;case 32:this.$=Ye[Xe].forEach(xe=>{M(pe.currentNodeShape,pe.factory.namedNode(Se+"targetClass"),xe)});break;case 35:this.$=M(pe.currentNodeShape,pe.factory.namedNode(Se+Ye[Xe][0]),Ye[Xe][1]);break;case 36:break;case 37:const ue=Re([Ye[Xe-1],...Ye[Xe]].map(xe=>{const nt=rt();return M(nt,pe.factory.namedNode(Se+xe[0]),xe[1]),nt}));this.$=["or",ue];break;case 39:case 46:this.$=C("not",...Ye[Xe]);break;case 40:case 50:this.$=[Ye[Xe-2],Ye[Xe]];break;case 43:this.$=Ye[Xe]&&P(...Ye[Xe]);break;case 44:this.$=P("or",Re([Ye[Xe-1],...Ye[Xe]].map(xe=>{const nt=rt();return M(nt,pe.factory.namedNode(Se+xe[0]),xe[1]),nt})));break;case 47:this.$=[Ee[Ye[Xe].value]?"datatype":"class",Ye[Xe]];break;case 48:this.$=["nodeKind",pe.factory.namedNode(Se+Ye[Xe])];break;case 49:this.$=["node",pe.factory.namedNode(Ye[Xe])];break;case 51:this.$=void 0;break;case 53:this.$=Ye[Xe]>0&&P("minCount",tt(Ye[Xe],q));break;case 54:this.$=P("maxCount",tt(Ye[Xe],q));break;case 56:this.$=Ue(Ye[Xe].slice(1));break;case 57:this.$=qe(Ye[Xe]);break;case 59:M(pe.currentNodeShape,pe.factory.namedNode(Se+"property"),pe.currentPropertyNode=rt()),P("path",Ye[Xe]);break;case 62:const Oe=rt();M(Oe,pe.factory.namedNode(Se+"alternativePath"),Re([Ye[Xe-1],...Ye[Xe]])),this.$=Oe;break;case 65:this.$=Re([Ye[Xe-1],...Ye[Xe]]);break;case 67:M(this.$=rt(),pe.factory.namedNode(Se+Ye[Xe]),Ye[Xe-1]);break;case 69:M(this.$=rt(),pe.factory.namedNode(Se+"inversePath"),Ye[Xe]);break;case 71:this.$="zeroOrOnePath";break;case 72:this.$="zeroOrMorePath";break;case 73:this.$="oneOrMorePath";break;case 75:this.$=Ye[Xe-1];break;case 77:this.$=Re(Ye[Xe-1]);break;case 80:this.$=pe.factory.namedNode(qe(Ye[Xe]));break;case 81:this.$=pe.factory.namedNode(Ue(Ye[Xe]));break;case 82:this.$=W(pe.factory.namedNode(se));break;case 83:this.$=tt(Ye[Xe]);break;case 84:this.$=ut(Ye[Xe-1],Ye[Xe].substr(1).toLowerCase());break;case 85:this.$=tt(Ye[Xe-2],Ye[Xe]);break;case 86:this.$=tt(Ye[Xe],q);break;case 87:this.$=tt(Ye[Xe],k);break;case 88:this.$=tt(Ye[Xe].toLowerCase(),ce);break;case 89:this.$=tt(Ye[Xe].toLowerCase(),be);break;case 90:this.$=ae(Ye[Xe],1);break;case 91:this.$=ae(Ye[Xe],3);break;case 92:case 96:case 106:case 108:case 110:case 112:case 128:case 138:this.$=[];break;case 93:case 97:case 107:case 109:case 111:case 113:case 115:case 117:case 123:case 129:case 131:case 135:case 137:case 139:Ye[Xe-1].push(Ye[Xe]);break;case 114:case 116:case 122:case 130:case 134:case 136:this.$=[Ye[Xe]];break}},table:[t(u,[2,92],{3:1,4:2}),{1:[3]},t(n,[2,96],{5:3,8:4,9:5,10:6,11:7,12:[1,8],14:[1,9],15:[1,10]}),t(r,[2,110],{6:11,124:12,54:13,19:14,24:15,20:[1,16],25:[1,17]}),t(u,[2,93]),t(u,[2,2]),t(u,[2,3]),t(u,[2,4]),{13:[1,18]},{13:[1,19]},{16:[1,20]},{7:[1,21]},t(n,[2,97]),{7:[2,28],13:e,16:i,18:24,51:23,52:22,114:26,115:o,130:c},t(n,[2,94]),t(n,[2,95]),{13:e,16:i,17:30,18:31,114:26,115:o,130:c},{13:e,16:i,17:32,18:31,114:26,115:o,130:c},t(u,[2,5]),t(u,[2,6]),{13:[1,33]},{1:[2,1]},t(r,[2,111]),{13:e,16:i,18:36,29:34,30:35,114:26,115:o,130:c},t(s,[2,26]),t(l,[2,80]),t(l,[2,81]),t(l,[2,82]),t(l,[2,140]),t(l,[2,141]),t(d,[2,98],{21:37,60:38,61:[1,39]}),t([28,56,61],[2,8]),{26:40,27:41,28:f,56:[2,102]},t(u,[2,7]),{53:[1,43]},t(h,[2,104],{31:44,27:45,28:f}),{13:e,16:i,18:51,32:46,33:47,35:48,36:49,37:50,38:p,43:53,44:b,92:_,113:52,114:26,115:o,116:55,119:y,120:g,121:59,122:61,123:62,130:c,131:m,132:v,133:T,134:S,135:x,136:L},{22:69,27:70,28:f,56:[2,100]},t(d,[2,99]),{13:e,16:i,18:72,62:71,114:26,115:o,130:c},{23:73,55:74,56:O},{56:[2,103]},{13:e,16:i,18:36,29:76,30:35,114:26,115:o,130:c},t(r,[2,27]),t(h,[2,12]),t(h,[2,105]),t(w,[2,13]),t(A,[2,106],{34:77}),t(E,[2,15]),t(E,[2,16]),t(E,[2,17]),t(R,[2,78]),t(R,[2,79]),{13:e,16:i,18:36,29:78,30:35,114:26,115:o,130:c},t(V,[2,108],{39:79}),t(R,[2,83],{117:[1,80],118:[1,81]}),t(R,[2,86]),t(R,[2,87]),t(R,[2,88]),t(R,[2,89]),t(s,[2,20]),t($,[2,90]),t($,[2,91]),t(R,[2,142]),t(R,[2,143]),t($,[2,144]),t($,[2,145]),t($,[2,146]),t($,[2,147]),{23:82,55:74,56:O},{56:[2,101]},t(d,[2,32],{114:26,18:83,13:e,16:i,115:o,130:c}),t(Q,[2,114]),t(n,[2,10]),t(ne,[2,112],{59:84}),t(ne,[2,29]),t(h,[2,11]),t(w,[2,14],{41:85,42:[1,86]}),{45:87,46:[1,88]},{13:e,16:i,18:51,33:90,35:48,36:49,37:50,38:p,40:[1,89],43:53,44:b,92:_,113:52,114:26,115:o,116:55,119:y,120:g,121:59,122:61,123:62,130:c,131:m,132:v,133:T,134:S,135:x,136:L},t(R,[2,84]),{13:e,16:i,18:91,114:26,115:o,130:c},t(n,[2,9]),t(Q,[2,115]),{13:e,16:i,18:115,38:ie,57:92,58:[1,94],63:93,64:95,68:102,69:98,70:100,72:104,73:105,74:107,77:97,78:99,87:fe,96:J,97:101,99:103,103:106,105:109,106:113,108:110,109:_e,114:26,115:o,125:96,126:Fe,130:c},t(A,[2,107]),{13:e,16:i,18:51,33:117,35:48,36:49,37:50,38:p,43:53,44:b,92:_,113:52,114:26,115:o,116:55,119:y,120:g,121:59,122:61,123:62,130:c,131:m,132:v,133:T,134:S,135:x,136:L},t(E,[2,22]),t(E,[2,21]),t(E,[2,18]),t(V,[2,109]),t(R,[2,85]),t(ve,[2,31]),t(ne,[2,113]),t(ve,[2,30]),{47:120,48:[1,121],50:119,53:[2,120],65:118},t(te,[2,118],{70:100,68:102,72:104,73:105,74:107,69:122,87:fe,96:J,126:Fe}),t(te,[2,119]),t(Le,[2,116]),t(Ce,[2,128],{79:123}),t(Le,[2,35]),t(Ce,[2,59]),t(Le,[2,36],{71:124,66:125,67:Ve}),t(ge,[2,61],{100:127,98:128,67:we}),t(G,[2,38]),{72:130,74:107,87:fe,126:Fe},t(D,[2,64],{104:131,101:132,102:j}),{75:[1,134]},t([13,16,56,85,87,95,115,126,128,129,130],[2,58]),t(I,[2,68]),{13:e,16:i,18:115,38:ie,105:135,106:113,114:26,115:o,130:c},{75:[2,124]},{75:[2,125]},t(I,[2,66],{107:136,93:[1,138],110:[1,137],111:[1,139]}),t([13,16,38,115,130],[2,70]),t(N,[2,74]),{13:e,16:i,18:115,38:ie,97:140,99:103,103:106,105:109,106:113,108:110,109:_e,114:26,115:o,130:c},t(A,[2,19]),{53:[1,141]},{53:[2,121]},{13:e,16:i,18:36,29:142,30:35,114:26,115:o,130:c},t(s,[2,23]),t(Le,[2,117]),t(te,[2,41],{114:26,55:74,127:143,88:144,82:145,81:147,84:148,73:149,18:150,86:152,23:154,94:155,13:e,16:i,44:[1,146],56:O,85:B,87:X,95:H,96:J,115:o,128:K,129:z,130:c}),t(Le,[2,37],{66:159,67:Ve}),t(G,[2,122]),{68:160,72:104,73:105,74:107,87:fe,96:J,126:Fe},t(ge,[2,62],{98:161,67:we}),t(D,[2,134]),{13:e,16:i,18:115,38:ie,99:162,103:106,105:109,106:113,108:110,109:_e,114:26,115:o,130:c},t(G,[2,39]),t(D,[2,65],{101:163,102:j}),t(I,[2,136]),{13:e,16:i,18:115,38:ie,103:164,105:109,106:113,108:110,109:_e,114:26,115:o,130:c},{13:e,16:i,18:51,35:166,44:Z,76:165,92:_,113:52,114:26,115:o,116:55,119:y,120:g,121:59,122:61,123:62,130:c,131:m,132:v,133:T,134:S,135:x,136:L},t(I,[2,69]),t(I,[2,67]),t(I,[2,71]),t(I,[2,72]),t(I,[2,73]),{40:[1,168]},t(ne,[2,33]),{48:[1,170],49:169},t(Ce,[2,129]),t(Ce,[2,126]),t(Ce,[2,127]),{89:171,92:[1,172]},t(Ce,[2,43],{83:173,80:174,67:de}),t(le,[2,45]),{13:e,16:i,18:150,23:154,55:74,56:O,84:176,85:B,86:152,87:X,94:155,95:H,114:26,115:o,128:K,129:z,130:c},t(le,[2,47]),t(le,[2,48]),t(le,[2,49]),{75:[1,177]},t(le,[2,51]),t(le,[2,56]),{13:[1,178]},t(le,[2,132]),t(le,[2,133]),t(G,[2,123]),t(G,[2,34]),t(D,[2,135]),t(D,[2,60]),t(I,[2,137]),t(I,[2,63]),t(G,[2,40]),t(De,[2,76]),t(Qe,[2,138],{112:179}),t(N,[2,75]),{53:[2,25]},{53:[2,24]},{90:[1,180]},{90:[2,53]},t(Ce,[2,44],{80:181,67:de}),t(le,[2,130]),{13:e,16:i,18:150,23:154,55:74,56:O,73:149,81:182,84:148,85:B,86:152,87:X,94:155,95:H,96:J,114:26,115:o,128:K,129:z,130:c},t(le,[2,46]),{13:e,16:i,18:51,35:166,44:Z,76:183,92:_,113:52,114:26,115:o,116:55,119:y,120:g,121:59,122:61,123:62,130:c,131:m,132:v,133:T,134:S,135:x,136:L},t(le,[2,57]),{13:e,16:i,18:51,35:185,46:[1,184],92:_,113:52,114:26,115:o,116:55,119:y,120:g,121:59,122:61,123:62,130:c,131:m,132:v,133:T,134:S,135:x,136:L},{91:186,92:[1,187],93:[1,188]},t(le,[2,131]),t(le,[2,42]),t(le,[2,50]),t(De,[2,77]),t(Qe,[2,139]),{46:[1,189]},{46:[2,54]},{46:[2,55]},t(Ce,[2,52])],defaultActions:{21:[2,1],41:[2,103],70:[2,101],111:[2,124],112:[2,125],119:[2,121],169:[2,25],170:[2,24],172:[2,53],187:[2,54],188:[2,55]},parseError:function(Be,ke){if(ke.recoverable)this.trace(Be);else{var Je=new Error(Be);throw Je.hash=ke,Je}},parse:function(Be){var ke=this,Je=[0],ct=[null],Ze=[],Ye=this.table,zr="",Xe=0,ue=0,Oe=2,xe=1,nt=Ze.slice.call(arguments,1),it=Object.create(this.lexer),Ot={yy:{}};for(var cr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,cr)&&(Ot.yy[cr]=this.yy[cr]);it.setInput(Be,Ot.yy),Ot.yy.lexer=it,Ot.yy.parser=this,typeof it.yylloc>"u"&&(it.yylloc={});var Jt=it.yylloc;Ze.push(Jt);var Yi=it.options&&it.options.ranges;typeof Ot.yy.parseError=="function"?this.parseError=Ot.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var wn=function(){var dn;return dn=it.lex()||xe,typeof dn!="number"&&(dn=ke.symbols_[dn]||dn),dn},tr,qn,jr,fi,Lr={},jf,kr,Xh,Lf;;){if(qn=Je[Je.length-1],this.defaultActions[qn]?jr=this.defaultActions[qn]:((tr===null||typeof tr>"u")&&(tr=wn()),jr=Ye[qn]&&Ye[qn][tr]),typeof jr>"u"||!jr.length||!jr[0]){var Sn="";Lf=[];for(jf in Ye[qn])this.terminals_[jf]&&jf>Oe&&Lf.push("'"+this.terminals_[jf]+"'");it.showPosition?Sn="Parse error on line "+(Xe+1)+`:
`+it.showPosition()+`
Expecting `+Lf.join(", ")+", got '"+(this.terminals_[tr]||tr)+"'":Sn="Parse error on line "+(Xe+1)+": Unexpected "+(tr==xe?"end of input":"'"+(this.terminals_[tr]||tr)+"'"),this.parseError(Sn,{text:it.match,token:this.terminals_[tr]||tr,line:it.yylineno,loc:Jt,expected:Lf})}if(jr[0]instanceof Array&&jr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+qn+", token: "+tr);switch(jr[0]){case 1:Je.push(tr),ct.push(it.yytext),Ze.push(it.yylloc),Je.push(jr[1]),tr=null,ue=it.yyleng,zr=it.yytext,Xe=it.yylineno,Jt=it.yylloc;break;case 2:if(kr=this.productions_[jr[1]][1],Lr.$=ct[ct.length-kr],Lr._$={first_line:Ze[Ze.length-(kr||1)].first_line,last_line:Ze[Ze.length-1].last_line,first_column:Ze[Ze.length-(kr||1)].first_column,last_column:Ze[Ze.length-1].last_column},Yi&&(Lr._$.range=[Ze[Ze.length-(kr||1)].range[0],Ze[Ze.length-1].range[1]]),fi=this.performAction.apply(Lr,[zr,ue,Xe,Ot.yy,jr[1],ct,Ze].concat(nt)),typeof fi<"u")return fi;kr&&(Je=Je.slice(0,-1*kr*2),ct=ct.slice(0,-1*kr),Ze=Ze.slice(0,-1*kr)),Je.push(this.productions_[jr[1]][0]),ct.push(Lr.$),Ze.push(Lr._$),Xh=Ye[Je[Je.length-2]][Je[Je.length-1]],Je.push(Xh);break;case 3:return!0}}return!0}};const oe="http://www.w3.org/1999/02/22-rdf-syntax-ns#",se=oe+"type",ye=oe+"first",Ie=oe+"rest",U=oe+"nil",F="http://www.w3.org/2001/XMLSchema#",q=F+"integer",k=F+"decimal",ce=F+"double",be=F+"boolean",Se="http://www.w3.org/ns/shacl#",Ke="http://www.w3.org/2002/07/owl#",Y="http://www.w3.org/2000/01/rdf-schema#",Ee={[q]:!0,[k]:!0,[F+"float"]:!0,[ce]:!0,[F+"string"]:!0,[be]:!0,[F+"dateTime"]:!0,[F+"nonPositiveInteger"]:!0,[F+"negativeInteger"]:!0,[F+"long"]:!0,[F+"int"]:!0,[F+"short"]:!0,[F+"byte"]:!0,[F+"nonNegativeInteger"]:!0,[F+"unsignedLong"]:!0,[F+"unsignedShort"]:!0,[F+"unsignedByte"]:!0,[F+"positiveInteger"]:!0,[oe+"langString"]:!0};function Re(Pe,Be=!1){let ke=0,Je=Pe.length;if(Be&&Je===0)return pe.factory.namedNode(U);const ct=head=rt();return Je===0&&M(head,pe.factory.namedNode(Ie),pe.factory.namedNode(U)),Pe.forEach(Ze=>{if(Ze===void 0)throw new Error("b");M(head,pe.factory.namedNode(ye),Ze),M(head,pe.factory.namedNode(Ie),head=++ke<Je?rt():pe.factory.namedNode(U))}),ct}function qe(Pe){return pe.n3Parser._resolveIRI(Pe[0]==="<"?Pe.substring(1,Pe.length-1):Pe)}function Ue(Pe){const Be=Pe.indexOf(":"),ke=Pe.substr(0,Be),Je=pe.prefixes[ke];if(!Je)throw new Error("Unknown prefix: "+ke);return qe(Je+Pe.substr(Be+1))}function tt(Pe,Be){return Be&&Be.termType!=="NamedNode"&&(Be=pe.factory.namedNode(Be)),pe.factory.literal(Pe,Be)}function ut(Pe,Be){return pe.factory.literal(Pe,Be)}function rt(Pe){return pe.factory.blankNode("g_"+lt++)}var lt=0;pe._resetBlanks=function(){lt=0};function ae(Pe,Be){return pe.n3Parser._lexer._unescape(Pe.substring(Be,Pe.length-Be))}function M(Pe,Be,ke){if(!Pe.termType||!Be.termType||Be.value.includes(",")||!ke.termType)throw new Error(`boo ${Pe.value} ${Be.value} ${ke.value}`);pe.onQuad(pe.factory.quad(Pe,Be,ke))}function P(Pe,Be){M(pe.currentPropertyNode,pe.factory.namedNode(Se+Pe),Be)}function C(Pe,Be,ke){const Je=rt();return M(Je,pe.factory.namedNode(Se+Be),ke),[Pe,Je]}function W(Pe){if(!pe.extended)throw new Error("Encountered extended SHACLC syntax; but extended parsing is disabled");return Pe}var me=function(){var Pe={EOF:1,parseError:function(ke,Je){if(this.yy.parser)this.yy.parser.parseError(ke,Je);else throw new Error(ke)},setInput:function(Be,ke){return this.yy=ke||this.yy||{},this._input=Be,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Be=this._input[0];this.yytext+=Be,this.yyleng++,this.offset++,this.match+=Be,this.matched+=Be;var ke=Be.match(/(?:\r\n?|\n).*/g);return ke?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Be},unput:function(Be){var ke=Be.length,Je=Be.split(/(?:\r\n?|\n)/g);this._input=Be+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ke),this.offset-=ke;var ct=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Je.length-1&&(this.yylineno-=Je.length-1);var Ze=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Je?(Je.length===ct.length?this.yylloc.first_column:0)+ct[ct.length-Je.length].length-Je[0].length:this.yylloc.first_column-ke},this.options.ranges&&(this.yylloc.range=[Ze[0],Ze[0]+this.yyleng-ke]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Be){this.unput(this.match.slice(Be))},pastInput:function(){var Be=this.matched.substr(0,this.matched.length-this.match.length);return(Be.length>20?"...":"")+Be.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Be=this.match;return Be.length<20&&(Be+=this._input.substr(0,20-Be.length)),(Be.substr(0,20)+(Be.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Be=this.pastInput(),ke=new Array(Be.length+1).join("-");return Be+this.upcomingInput()+`
`+ke+"^"},test_match:function(Be,ke){var Je,ct,Ze;if(this.options.backtrack_lexer&&(Ze={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ze.yylloc.range=this.yylloc.range.slice(0))),ct=Be[0].match(/(?:\r\n?|\n).*/g),ct&&(this.yylineno+=ct.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ct?ct[ct.length-1].length-ct[ct.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Be[0].length},this.yytext+=Be[0],this.match+=Be[0],this.matches=Be,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Be[0].length),this.matched+=Be[0],Je=this.performAction.call(this,this.yy,this,ke,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Je)return Je;if(this._backtrack){for(var Ye in Ze)this[Ye]=Ze[Ye];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Be,ke,Je,ct;this._more||(this.yytext="",this.match="");for(var Ze=this._currentRules(),Ye=0;Ye<Ze.length;Ye++)if(Je=this._input.match(this.rules[Ze[Ye]]),Je&&(!ke||Je[0].length>ke[0].length)){if(ke=Je,ct=Ye,this.options.backtrack_lexer){if(Be=this.test_match(Je,Ze[Ye]),Be!==!1)return Be;if(this._backtrack){ke=!1;continue}else return!1}else if(!this.options.flex)break}return ke?(Be=this.test_match(ke,Ze[ct]),Be!==!1?Be:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ke=this.next();return ke||this.lex()},begin:function(ke){this.conditionStack.push(ke)},popState:function(){var ke=this.conditionStack.length-1;return ke>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ke){return ke=this.conditionStack.length-1-Math.abs(ke||0),ke>=0?this.conditionStack[ke]:"INITIAL"},pushState:function(ke){this.begin(ke)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(ke,Je,ct,Ze){switch(ct){case 0:break;case 1:return 12;case 2:return 14;case 3:return 15;case 4:return 25;case 5:return 20;case 6:return 131;case 7:return 132;case 8:return 85;case 9:return 126;case 10:return 87;case 11:return"PASS";case 12:return"COMMENT";case 13:return 13;case 14:return 16;case 15:return 130;case 16:return 129;case 17:return 128;case 18:return 117;case 19:return 92;case 20:return 119;case 21:return 120;case 22:return"EXPONENT";case 23:return 133;case 24:return 134;case 25:return 135;case 26:return 136;case 27:return 61;case 28:return 90;case 29:return 58;case 30:return 56;case 31:return 38;case 32:return 40;case 33:return 44;case 34:return 46;case 35:return 110;case 36:return 93;case 37:return 111;case 38:return 67;case 39:return 118;case 40:return 53;case 41:return 96;case 42:return 102;case 43:return 75;case 44:return 95;case 45:return 109;case 46:return 28;case 47:return 42;case 48:return 48;case 49:return 115;case 50:return 7;case 51:console.log(Je.yytext);break}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:IMPORTS)/i,/^(?:PREFIX)/i,/^(?:shapeClass)/i,/^(?:shape)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(BlankNode|IRI|Literal|BlankNodeOrIRI|BlankNodeOrLiteral|IRIOrLiteral\b))/i,/^(?:(targetNode|targetObjectsOf|targetSubjectsOf\b))/i,/^(?:(deactivated|severity|message|class|datatype|nodeKind|minExclusive|minInclusive|maxExclusive|maxInclusive|minLength|maxLength|pattern|flags|languageIn|uniqueLang|equals|disjoint|lessThan|lessThanOrEquals|qualifiedValueShape|qualifiedMinCount|qualifiedMaxCount|qualifiedValueShapesDisjoint|closed|ignoredProperties|hasValue|in))/i,/^(?:([ \t\r\n]+))/i,/^(?:(#[\r\n]*))/i,/^(?:(<([^=<>\"\{\}\|\^`\\\u0000-\u0020]|(\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@(([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(@((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([+-]?[0-9]+))/i,/^(?:([+-]?[0-9]*\.[0-9]+))/i,/^(?:([+-]?([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.?[0-9]+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"\'])))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"\'])))*"""))/i,/^(?:->)/i,/^(?:\.\.)/i,/^(?:\})/i,/^(?:\{)/i,/^(?:\()/i,/^(?:\))/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\?)/i,/^(?:\*)/i,/^(?:\+)/i,/^(?:\|)/i,/^(?:\^\^)/i,/^(?:\.)/i,/^(?:!)/i,/^(?:\/)/i,/^(?:=)/i,/^(?:@)/i,/^(?:\^)/i,/^(?:;)/i,/^(?:,)/i,/^(?:%)/i,/^(?:a)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return Pe}();je.lexer=me;function pe(){this.yy={}}return pe.prototype=je,je.Parser=pe,new pe}();return dR=a,dR}var v$;function zfe(){if(v$)return yA;v$=1;const a=Gfe().Parser,t=Sa;class u{constructor(){}parse(r,{extendedSyntax:e,baseIRI:i}={}){this._parser=new a,this._parser.Parser.factory=t.DataFactory,this._parser.Parser.base=t.DataFactory.namedNode(i||"urn:x-base:default"),this._parser.Parser.extended=e===!0,this._parser.Parser.prefixes={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#",owl:"http://www.w3.org/2002/07/owl#"},this._parser.Parser.currentNodeShape=void 0,this._parser.Parser.currentPropertyNode=void 0,this._parser.Parser.nodeShapeStack=[],this._parser.Parser.tempCurrentNodeShape=void 0,this._parser.Parser.n3Parser=new t.Parser({baseIRI:i||"urn:x-base:default"});const o=[];return this._parser.Parser.onQuad=c=>{o.push(c)},this._parser.parse(r),o.prefixes=this._parser.Parser.prefixes,o}}return yA.Parser=u,yA.parse=function(r,e){return new u().parse(r,e)},yA}var Am={},T$;function kfe(){if(T$)return Am;T$=1,Object.defineProperty(Am,"__esModule",{value:!0}),Am.PrefixWrappingIterator=void 0;const a=gt();let t=class extends a.WrappingIterator{constructor(n){super(n==null?void 0:n.then(r=>(this.prefixes=r.prefixes,r)))}read(){if(this.prefixes){for(const n of Object.entries(this.prefixes))this.emit("prefix",...n);delete this.prefixes}return super.read()}};return Am.PrefixWrappingIterator=t,Am}var w$;function Xfe(){if(w$)return Sm;w$=1,Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.ActorRdfParseShaclc=void 0;const a=Oh(),t=Fh(),u=Mt(),n=zfe(),r=kfe();let e=class extends a.ActorRdfParseFixedMediaTypes{constructor(o){super(o)}async runHandle(o,c,s){const l=new r.PrefixWrappingIterator((0,t.stringify)(o.data).then(f=>{var h;return(0,n.parse)(f,{extendedSyntax:c==="text/shaclc-ext",baseIRI:(h=o.metadata)==null?void 0:h.baseIRI})})),d=new u.Readable({objectMode:!0});return l.on("prefix",(...f)=>d.emit("prefix",...f)),{data:d.wrap(l),metadata:{triples:!0}}}};return Sm.ActorRdfParseShaclc=e,Sm}var S$;function Jfe(){return S$||(S$=1,function(a){var t=os&&os.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=os&&os.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Xfe(),a)}(os)),os}var ss={},Em={},ei={},ti={},Dh={},fR={},Im={},O$;function A$(){return O$||(O$=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.htmlDecodeTree=void 0,Im.htmlDecodeTree=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(a=>a.charCodeAt(0)))),Im}var xm={},E$;function I$(){return E$||(E$=1,Object.defineProperty(xm,"__esModule",{value:!0}),xm.xmlDecodeTree=void 0,xm.xmlDecodeTree=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(a=>a.charCodeAt(0)))),xm}var hR={},x$;function N$(){return x$||(x$=1,function(a){var t;Object.defineProperty(a,"__esModule",{value:!0}),a.fromCodePoint=void 0,a.replaceCodePoint=n,a.decodeCodePoint=r;const u=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);a.fromCodePoint=(t=String.fromCodePoint)!==null&&t!==void 0?t:function(e){let i="";return e>65535&&(e-=65536,i+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),i+=String.fromCharCode(e),i};function n(e){var i;return e>=55296&&e<=57343||e>1114111?65533:(i=u.get(e))!==null&&i!==void 0?i:e}function r(e){return(0,a.fromCodePoint)(n(e))}}(hR)),hR}var R$;function F$(){return R$||(R$=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.fromCodePoint=a.replaceCodePoint=a.decodeCodePoint=a.xmlDecodeTree=a.htmlDecodeTree=a.EntityDecoder=a.DecodingMode=a.BinTrieFlags=void 0,a.determineBranch=b,a.decodeHTML=g,a.decodeHTMLAttribute=m,a.decodeHTMLStrict=v,a.decodeXML=T;const t=A$(),u=I$(),n=N$();var r;(function(O){O[O.NUM=35]="NUM",O[O.SEMI=59]="SEMI",O[O.EQUALS=61]="EQUALS",O[O.ZERO=48]="ZERO",O[O.NINE=57]="NINE",O[O.LOWER_A=97]="LOWER_A",O[O.LOWER_F=102]="LOWER_F",O[O.LOWER_X=120]="LOWER_X",O[O.LOWER_Z=122]="LOWER_Z",O[O.UPPER_A=65]="UPPER_A",O[O.UPPER_F=70]="UPPER_F",O[O.UPPER_Z=90]="UPPER_Z"})(r||(r={}));const e=32;var i;(function(O){O[O.VALUE_LENGTH=49152]="VALUE_LENGTH",O[O.BRANCH_LENGTH=16256]="BRANCH_LENGTH",O[O.JUMP_TABLE=127]="JUMP_TABLE"})(i||(a.BinTrieFlags=i={}));function o(O){return O>=r.ZERO&&O<=r.NINE}function c(O){return O>=r.UPPER_A&&O<=r.UPPER_F||O>=r.LOWER_A&&O<=r.LOWER_F}function s(O){return O>=r.UPPER_A&&O<=r.UPPER_Z||O>=r.LOWER_A&&O<=r.LOWER_Z||o(O)}function l(O){return O===r.EQUALS||s(O)}var d;(function(O){O[O.EntityStart=0]="EntityStart",O[O.NumericStart=1]="NumericStart",O[O.NumericDecimal=2]="NumericDecimal",O[O.NumericHex=3]="NumericHex",O[O.NamedEntity=4]="NamedEntity"})(d||(d={}));var f;(function(O){O[O.Legacy=0]="Legacy",O[O.Strict=1]="Strict",O[O.Attribute=2]="Attribute"})(f||(a.DecodingMode=f={}));class h{constructor(w,A,E){this.decodeTree=w,this.emitCodePoint=A,this.errors=E,this.state=d.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=f.Strict}startEntity(w){this.decodeMode=w,this.state=d.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(w,A){switch(this.state){case d.EntityStart:return w.charCodeAt(A)===r.NUM?(this.state=d.NumericStart,this.consumed+=1,this.stateNumericStart(w,A+1)):(this.state=d.NamedEntity,this.stateNamedEntity(w,A));case d.NumericStart:return this.stateNumericStart(w,A);case d.NumericDecimal:return this.stateNumericDecimal(w,A);case d.NumericHex:return this.stateNumericHex(w,A);case d.NamedEntity:return this.stateNamedEntity(w,A)}}stateNumericStart(w,A){return A>=w.length?-1:(w.charCodeAt(A)|e)===r.LOWER_X?(this.state=d.NumericHex,this.consumed+=1,this.stateNumericHex(w,A+1)):(this.state=d.NumericDecimal,this.stateNumericDecimal(w,A))}addToNumericResult(w,A,E,R){if(A!==E){const V=E-A;this.result=this.result*Math.pow(R,V)+Number.parseInt(w.substr(A,V),R),this.consumed+=V}}stateNumericHex(w,A){const E=A;for(;A<w.length;){const R=w.charCodeAt(A);if(o(R)||c(R))A+=1;else return this.addToNumericResult(w,E,A,16),this.emitNumericEntity(R,3)}return this.addToNumericResult(w,E,A,16),-1}stateNumericDecimal(w,A){const E=A;for(;A<w.length;){const R=w.charCodeAt(A);if(o(R))A+=1;else return this.addToNumericResult(w,E,A,10),this.emitNumericEntity(R,2)}return this.addToNumericResult(w,E,A,10),-1}emitNumericEntity(w,A){var E;if(this.consumed<=A)return(E=this.errors)===null||E===void 0||E.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(w===r.SEMI)this.consumed+=1;else if(this.decodeMode===f.Strict)return 0;return this.emitCodePoint((0,n.replaceCodePoint)(this.result),this.consumed),this.errors&&(w!==r.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(w,A){const{decodeTree:E}=this;let R=E[this.treeIndex],V=(R&i.VALUE_LENGTH)>>14;for(;A<w.length;A++,this.excess++){const $=w.charCodeAt(A);if(this.treeIndex=b(E,R,this.treeIndex+Math.max(1,V),$),this.treeIndex<0)return this.result===0||this.decodeMode===f.Attribute&&(V===0||l($))?0:this.emitNotTerminatedNamedEntity();if(R=E[this.treeIndex],V=(R&i.VALUE_LENGTH)>>14,V!==0){if($===r.SEMI)return this.emitNamedEntityData(this.treeIndex,V,this.consumed+this.excess);this.decodeMode!==f.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var w;const{result:A,decodeTree:E}=this,R=(E[A]&i.VALUE_LENGTH)>>14;return this.emitNamedEntityData(A,R,this.consumed),(w=this.errors)===null||w===void 0||w.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(w,A,E){const{decodeTree:R}=this;return this.emitCodePoint(A===1?R[w]&~i.VALUE_LENGTH:R[w+1],E),A===3&&this.emitCodePoint(R[w+2],E),E}end(){var w;switch(this.state){case d.NamedEntity:return this.result!==0&&(this.decodeMode!==f.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case d.NumericDecimal:return this.emitNumericEntity(0,2);case d.NumericHex:return this.emitNumericEntity(0,3);case d.NumericStart:return(w=this.errors)===null||w===void 0||w.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case d.EntityStart:return 0}}}a.EntityDecoder=h;function p(O){let w="";const A=new h(O,E=>w+=(0,n.fromCodePoint)(E));return function(R,V){let $=0,Q=0;for(;(Q=R.indexOf("&",Q))>=0;){w+=R.slice($,Q),A.startEntity(V);const ie=A.write(R,Q+1);if(ie<0){$=Q+A.end();break}$=Q+ie,Q=ie===0?$+1:$}const ne=w+R.slice($);return w="",ne}}function b(O,w,A,E){const R=(w&i.BRANCH_LENGTH)>>7,V=w&i.JUMP_TABLE;if(R===0)return V!==0&&E===V?A:-1;if(V){const ne=E-V;return ne<0||ne>=R?-1:O[A+ne]-1}let $=A,Q=$+R-1;for(;$<=Q;){const ne=$+Q>>>1,ie=O[ne];if(ie<E)$=ne+1;else if(ie>E)Q=ne-1;else return O[ne+R]}return-1}const _=p(t.htmlDecodeTree),y=p(u.xmlDecodeTree);function g(O,w=f.Legacy){return _(O,w)}function m(O){return _(O,f.Attribute)}function v(O){return _(O,f.Strict)}function T(O){return y(O,f.Strict)}var S=A$();Object.defineProperty(a,"htmlDecodeTree",{enumerable:!0,get:function(){return S.htmlDecodeTree}});var x=I$();Object.defineProperty(a,"xmlDecodeTree",{enumerable:!0,get:function(){return x.xmlDecodeTree}});var L=N$();Object.defineProperty(a,"decodeCodePoint",{enumerable:!0,get:function(){return L.decodeCodePoint}}),Object.defineProperty(a,"replaceCodePoint",{enumerable:!0,get:function(){return L.replaceCodePoint}}),Object.defineProperty(a,"fromCodePoint",{enumerable:!0,get:function(){return L.fromCodePoint}})}(fR)),fR}var D$;function P$(){if(D$)return Dh;D$=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.QuoteType=void 0;const a=F$();var t;(function(s){s[s.Tab=9]="Tab",s[s.NewLine=10]="NewLine",s[s.FormFeed=12]="FormFeed",s[s.CarriageReturn=13]="CarriageReturn",s[s.Space=32]="Space",s[s.ExclamationMark=33]="ExclamationMark",s[s.Number=35]="Number",s[s.Amp=38]="Amp",s[s.SingleQuote=39]="SingleQuote",s[s.DoubleQuote=34]="DoubleQuote",s[s.Dash=45]="Dash",s[s.Slash=47]="Slash",s[s.Zero=48]="Zero",s[s.Nine=57]="Nine",s[s.Semi=59]="Semi",s[s.Lt=60]="Lt",s[s.Eq=61]="Eq",s[s.Gt=62]="Gt",s[s.Questionmark=63]="Questionmark",s[s.UpperA=65]="UpperA",s[s.LowerA=97]="LowerA",s[s.UpperF=70]="UpperF",s[s.LowerF=102]="LowerF",s[s.UpperZ=90]="UpperZ",s[s.LowerZ=122]="LowerZ",s[s.LowerX=120]="LowerX",s[s.OpeningSquareBracket=91]="OpeningSquareBracket"})(t||(t={}));var u;(function(s){s[s.Text=1]="Text",s[s.BeforeTagName=2]="BeforeTagName",s[s.InTagName=3]="InTagName",s[s.InSelfClosingTag=4]="InSelfClosingTag",s[s.BeforeClosingTagName=5]="BeforeClosingTagName",s[s.InClosingTagName=6]="InClosingTagName",s[s.AfterClosingTagName=7]="AfterClosingTagName",s[s.BeforeAttributeName=8]="BeforeAttributeName",s[s.InAttributeName=9]="InAttributeName",s[s.AfterAttributeName=10]="AfterAttributeName",s[s.BeforeAttributeValue=11]="BeforeAttributeValue",s[s.InAttributeValueDq=12]="InAttributeValueDq",s[s.InAttributeValueSq=13]="InAttributeValueSq",s[s.InAttributeValueNq=14]="InAttributeValueNq",s[s.BeforeDeclaration=15]="BeforeDeclaration",s[s.InDeclaration=16]="InDeclaration",s[s.InProcessingInstruction=17]="InProcessingInstruction",s[s.BeforeComment=18]="BeforeComment",s[s.CDATASequence=19]="CDATASequence",s[s.InSpecialComment=20]="InSpecialComment",s[s.InCommentLike=21]="InCommentLike",s[s.BeforeSpecialS=22]="BeforeSpecialS",s[s.BeforeSpecialT=23]="BeforeSpecialT",s[s.SpecialStartSequence=24]="SpecialStartSequence",s[s.InSpecialTag=25]="InSpecialTag",s[s.InEntity=26]="InEntity"})(u||(u={}));function n(s){return s===t.Space||s===t.NewLine||s===t.Tab||s===t.FormFeed||s===t.CarriageReturn}function r(s){return s===t.Slash||s===t.Gt||n(s)}function e(s){return s>=t.LowerA&&s<=t.LowerZ||s>=t.UpperA&&s<=t.UpperZ}var i;(function(s){s[s.NoValue=0]="NoValue",s[s.Unquoted=1]="Unquoted",s[s.Single=2]="Single",s[s.Double=3]="Double"})(i||(Dh.QuoteType=i={}));const o={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};class c{constructor({xmlMode:l=!1,decodeEntities:d=!0},f){this.cbs=f,this.state=u.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=u.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=l,this.decodeEntities=d,this.entityDecoder=new a.EntityDecoder(l?a.xmlDecodeTree:a.htmlDecodeTree,(h,p)=>this.emitCodePoint(h,p))}reset(){this.state=u.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=u.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(l){this.offset+=this.buffer.length,this.buffer=l,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(l){l===t.Lt||!this.decodeEntities&&this.fastForwardTo(t.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=u.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&l===t.Amp&&this.startEntity()}stateSpecialStartSequence(l){const d=this.sequenceIndex===this.currentSequence.length;if(!(d?r(l):(l|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!d){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=u.InTagName,this.stateInTagName(l)}stateInSpecialTag(l){if(this.sequenceIndex===this.currentSequence.length){if(l===t.Gt||n(l)){const d=this.index-this.currentSequence.length;if(this.sectionStart<d){const f=this.index;this.index=d,this.cbs.ontext(this.sectionStart,d),this.index=f}this.isSpecial=!1,this.sectionStart=d+2,this.stateInClosingTagName(l);return}this.sequenceIndex=0}(l|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===o.TitleEnd?this.decodeEntities&&l===t.Amp&&this.startEntity():this.fastForwardTo(t.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(l===t.Lt)}stateCDATASequence(l){l===o.Cdata[this.sequenceIndex]?++this.sequenceIndex===o.Cdata.length&&(this.state=u.InCommentLike,this.currentSequence=o.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=u.InDeclaration,this.stateInDeclaration(l))}fastForwardTo(l){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===l)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(l){l===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=u.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):l!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(l){return this.xmlMode?!r(l):e(l)}startSpecial(l,d){this.isSpecial=!0,this.currentSequence=l,this.sequenceIndex=d,this.state=u.SpecialStartSequence}stateBeforeTagName(l){if(l===t.ExclamationMark)this.state=u.BeforeDeclaration,this.sectionStart=this.index+1;else if(l===t.Questionmark)this.state=u.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(l)){const d=l|32;this.sectionStart=this.index,this.xmlMode?this.state=u.InTagName:d===o.ScriptEnd[2]?this.state=u.BeforeSpecialS:d===o.TitleEnd[2]||d===o.XmpEnd[2]?this.state=u.BeforeSpecialT:this.state=u.InTagName}else l===t.Slash?this.state=u.BeforeClosingTagName:(this.state=u.Text,this.stateText(l))}stateInTagName(l){r(l)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(l))}stateBeforeClosingTagName(l){n(l)||(l===t.Gt?this.state=u.Text:(this.state=this.isTagStartChar(l)?u.InClosingTagName:u.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(l){(l===t.Gt||n(l))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=u.AfterClosingTagName,this.stateAfterClosingTagName(l))}stateAfterClosingTagName(l){(l===t.Gt||this.fastForwardTo(t.Gt))&&(this.state=u.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(l){l===t.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=u.InSpecialTag,this.sequenceIndex=0):this.state=u.Text,this.sectionStart=this.index+1):l===t.Slash?this.state=u.InSelfClosingTag:n(l)||(this.state=u.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(l){l===t.Gt?(this.cbs.onselfclosingtag(this.index),this.state=u.Text,this.sectionStart=this.index+1,this.isSpecial=!1):n(l)||(this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(l))}stateInAttributeName(l){(l===t.Eq||r(l))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=u.AfterAttributeName,this.stateAfterAttributeName(l))}stateAfterAttributeName(l){l===t.Eq?this.state=u.BeforeAttributeValue:l===t.Slash||l===t.Gt?(this.cbs.onattribend(i.NoValue,this.sectionStart),this.sectionStart=-1,this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(l)):n(l)||(this.cbs.onattribend(i.NoValue,this.sectionStart),this.state=u.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(l){l===t.DoubleQuote?(this.state=u.InAttributeValueDq,this.sectionStart=this.index+1):l===t.SingleQuote?(this.state=u.InAttributeValueSq,this.sectionStart=this.index+1):n(l)||(this.sectionStart=this.index,this.state=u.InAttributeValueNq,this.stateInAttributeValueNoQuotes(l))}handleInAttributeValue(l,d){l===d||!this.decodeEntities&&this.fastForwardTo(d)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(d===t.DoubleQuote?i.Double:i.Single,this.index+1),this.state=u.BeforeAttributeName):this.decodeEntities&&l===t.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(l){this.handleInAttributeValue(l,t.DoubleQuote)}stateInAttributeValueSingleQuotes(l){this.handleInAttributeValue(l,t.SingleQuote)}stateInAttributeValueNoQuotes(l){n(l)||l===t.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(i.Unquoted,this.index),this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(l)):this.decodeEntities&&l===t.Amp&&this.startEntity()}stateBeforeDeclaration(l){l===t.OpeningSquareBracket?(this.state=u.CDATASequence,this.sequenceIndex=0):this.state=l===t.Dash?u.BeforeComment:u.InDeclaration}stateInDeclaration(l){(l===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=u.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(l){(l===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=u.Text,this.sectionStart=this.index+1)}stateBeforeComment(l){l===t.Dash?(this.state=u.InCommentLike,this.currentSequence=o.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=u.InDeclaration}stateInSpecialComment(l){(l===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=u.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(l){const d=l|32;d===o.ScriptEnd[3]?this.startSpecial(o.ScriptEnd,4):d===o.StyleEnd[3]?this.startSpecial(o.StyleEnd,4):(this.state=u.InTagName,this.stateInTagName(l))}stateBeforeSpecialT(l){switch(l|32){case o.TitleEnd[3]:{this.startSpecial(o.TitleEnd,4);break}case o.TextareaEnd[3]:{this.startSpecial(o.TextareaEnd,4);break}case o.XmpEnd[3]:{this.startSpecial(o.XmpEnd,4);break}default:this.state=u.InTagName,this.stateInTagName(l)}}startEntity(){this.baseState=this.state,this.state=u.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?a.DecodingMode.Strict:this.baseState===u.Text||this.baseState===u.InSpecialTag?a.DecodingMode.Legacy:a.DecodingMode.Attribute)}stateInEntity(){const l=this.entityDecoder.write(this.buffer,this.index-this.offset);l>=0?(this.state=this.baseState,l===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===u.Text||this.state===u.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===u.InAttributeValueDq||this.state===u.InAttributeValueSq||this.state===u.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const l=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case u.Text:{this.stateText(l);break}case u.SpecialStartSequence:{this.stateSpecialStartSequence(l);break}case u.InSpecialTag:{this.stateInSpecialTag(l);break}case u.CDATASequence:{this.stateCDATASequence(l);break}case u.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(l);break}case u.InAttributeName:{this.stateInAttributeName(l);break}case u.InCommentLike:{this.stateInCommentLike(l);break}case u.InSpecialComment:{this.stateInSpecialComment(l);break}case u.BeforeAttributeName:{this.stateBeforeAttributeName(l);break}case u.InTagName:{this.stateInTagName(l);break}case u.InClosingTagName:{this.stateInClosingTagName(l);break}case u.BeforeTagName:{this.stateBeforeTagName(l);break}case u.AfterAttributeName:{this.stateAfterAttributeName(l);break}case u.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(l);break}case u.BeforeAttributeValue:{this.stateBeforeAttributeValue(l);break}case u.BeforeClosingTagName:{this.stateBeforeClosingTagName(l);break}case u.AfterClosingTagName:{this.stateAfterClosingTagName(l);break}case u.BeforeSpecialS:{this.stateBeforeSpecialS(l);break}case u.BeforeSpecialT:{this.stateBeforeSpecialT(l);break}case u.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(l);break}case u.InSelfClosingTag:{this.stateInSelfClosingTag(l);break}case u.InDeclaration:{this.stateInDeclaration(l);break}case u.BeforeDeclaration:{this.stateBeforeDeclaration(l);break}case u.BeforeComment:{this.stateBeforeComment(l);break}case u.InProcessingInstruction:{this.stateInProcessingInstruction(l);break}case u.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===u.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const l=this.buffer.length+this.offset;this.sectionStart>=l||(this.state===u.InCommentLike?this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,l,0):this.cbs.oncomment(this.sectionStart,l,0):this.state===u.InTagName||this.state===u.BeforeAttributeName||this.state===u.BeforeAttributeValue||this.state===u.AfterAttributeName||this.state===u.InAttributeName||this.state===u.InAttributeValueSq||this.state===u.InAttributeValueDq||this.state===u.InAttributeValueNq||this.state===u.InClosingTagName||this.cbs.ontext(this.sectionStart,l))}emitCodePoint(l,d){this.baseState!==u.Text&&this.baseState!==u.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+d,this.index=this.sectionStart-1,this.cbs.onattribentity(l)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+d,this.index=this.sectionStart-1,this.cbs.ontextentity(l,this.sectionStart))}}return Dh.default=c,Dh}var j$;function L$(){if(j$)return ti;j$=1;var a=ti&&ti.__createBinding||(Object.create?function(_,y,g,m){m===void 0&&(m=g);var v=Object.getOwnPropertyDescriptor(y,g);(!v||("get"in v?!y.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return y[g]}}),Object.defineProperty(_,m,v)}:function(_,y,g,m){m===void 0&&(m=g),_[m]=y[g]}),t=ti&&ti.__setModuleDefault||(Object.create?function(_,y){Object.defineProperty(_,"default",{enumerable:!0,value:y})}:function(_,y){_.default=y}),u=ti&&ti.__importStar||function(){var _=function(y){return _=Object.getOwnPropertyNames||function(g){var m=[];for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(m[m.length]=v);return m},_(y)};return function(y){if(y&&y.__esModule)return y;var g={};if(y!=null)for(var m=_(y),v=0;v<m.length;v++)m[v]!=="default"&&a(g,y,m[v]);return t(g,y),g}}();Object.defineProperty(ti,"__esModule",{value:!0}),ti.Parser=void 0;const n=u(P$()),r=F$(),e=new Set(["input","option","optgroup","select","button","datalist","textarea"]),i=new Set(["p"]),o=new Set(["thead","tbody"]),c=new Set(["dd","dt"]),s=new Set(["rt","rp"]),l=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",i],["h1",i],["h2",i],["h3",i],["h4",i],["h5",i],["h6",i],["select",e],["input",e],["output",e],["button",e],["datalist",e],["textarea",e],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",c],["dt",c],["address",i],["article",i],["aside",i],["blockquote",i],["details",i],["div",i],["dl",i],["fieldset",i],["figcaption",i],["figure",i],["footer",i],["form",i],["header",i],["hr",i],["main",i],["nav",i],["ol",i],["pre",i],["section",i],["table",i],["ul",i],["rt",s],["rp",s],["tbody",o],["tfoot",o]]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),p=/\s|\//;class b{constructor(y,g={}){var m,v,T,S,x,L;this.options=g,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=y??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(m=g.lowerCaseTags)!==null&&m!==void 0?m:this.htmlMode,this.lowerCaseAttributeNames=(v=g.lowerCaseAttributeNames)!==null&&v!==void 0?v:this.htmlMode,this.recognizeSelfClosing=(T=g.recognizeSelfClosing)!==null&&T!==void 0?T:!this.htmlMode,this.tokenizer=new((S=g.Tokenizer)!==null&&S!==void 0?S:n.default)(this.options,this),this.foreignContext=[!this.htmlMode],(L=(x=this.cbs).onparserinit)===null||L===void 0||L.call(x,this)}ontext(y,g){var m,v;const T=this.getSlice(y,g);this.endIndex=g-1,(v=(m=this.cbs).ontext)===null||v===void 0||v.call(m,T),this.startIndex=g}ontextentity(y,g){var m,v;this.endIndex=g-1,(v=(m=this.cbs).ontext)===null||v===void 0||v.call(m,(0,r.fromCodePoint)(y)),this.startIndex=g}isVoidElement(y){return this.htmlMode&&d.has(y)}onopentagname(y,g){this.endIndex=g;let m=this.getSlice(y,g);this.lowerCaseTagNames&&(m=m.toLowerCase()),this.emitOpenTag(m)}emitOpenTag(y){var g,m,v,T;this.openTagStart=this.startIndex,this.tagname=y;const S=this.htmlMode&&l.get(y);if(S)for(;this.stack.length>0&&S.has(this.stack[0]);){const x=this.stack.shift();(m=(g=this.cbs).onclosetag)===null||m===void 0||m.call(g,x,!0)}this.isVoidElement(y)||(this.stack.unshift(y),this.htmlMode&&(f.has(y)?this.foreignContext.unshift(!0):h.has(y)&&this.foreignContext.unshift(!1))),(T=(v=this.cbs).onopentagname)===null||T===void 0||T.call(v,y),this.cbs.onopentag&&(this.attribs={})}endOpenTag(y){var g,m;this.startIndex=this.openTagStart,this.attribs&&((m=(g=this.cbs).onopentag)===null||m===void 0||m.call(g,this.tagname,this.attribs,y),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(y){this.endIndex=y,this.endOpenTag(!1),this.startIndex=y+1}onclosetag(y,g){var m,v,T,S,x,L,O,w;this.endIndex=g;let A=this.getSlice(y,g);if(this.lowerCaseTagNames&&(A=A.toLowerCase()),this.htmlMode&&(f.has(A)||h.has(A))&&this.foreignContext.shift(),this.isVoidElement(A))this.htmlMode&&A==="br"&&((S=(T=this.cbs).onopentagname)===null||S===void 0||S.call(T,"br"),(L=(x=this.cbs).onopentag)===null||L===void 0||L.call(x,"br",{},!0),(w=(O=this.cbs).onclosetag)===null||w===void 0||w.call(O,"br",!1));else{const E=this.stack.indexOf(A);if(E!==-1)for(let R=0;R<=E;R++){const V=this.stack.shift();(v=(m=this.cbs).onclosetag)===null||v===void 0||v.call(m,V,R!==E)}else this.htmlMode&&A==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=g+1}onselfclosingtag(y){this.endIndex=y,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=y+1):this.onopentagend(y)}closeCurrentTag(y){var g,m;const v=this.tagname;this.endOpenTag(y),this.stack[0]===v&&((m=(g=this.cbs).onclosetag)===null||m===void 0||m.call(g,v,!y),this.stack.shift())}onattribname(y,g){this.startIndex=y;const m=this.getSlice(y,g);this.attribname=this.lowerCaseAttributeNames?m.toLowerCase():m}onattribdata(y,g){this.attribvalue+=this.getSlice(y,g)}onattribentity(y){this.attribvalue+=(0,r.fromCodePoint)(y)}onattribend(y,g){var m,v;this.endIndex=g,(v=(m=this.cbs).onattribute)===null||v===void 0||v.call(m,this.attribname,this.attribvalue,y===n.QuoteType.Double?'"':y===n.QuoteType.Single?"'":y===n.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(y){const g=y.search(p);let m=g<0?y:y.substr(0,g);return this.lowerCaseTagNames&&(m=m.toLowerCase()),m}ondeclaration(y,g){this.endIndex=g;const m=this.getSlice(y,g);if(this.cbs.onprocessinginstruction){const v=this.getInstructionName(m);this.cbs.onprocessinginstruction(`!${v}`,`!${m}`)}this.startIndex=g+1}onprocessinginstruction(y,g){this.endIndex=g;const m=this.getSlice(y,g);if(this.cbs.onprocessinginstruction){const v=this.getInstructionName(m);this.cbs.onprocessinginstruction(`?${v}`,`?${m}`)}this.startIndex=g+1}oncomment(y,g,m){var v,T,S,x;this.endIndex=g,(T=(v=this.cbs).oncomment)===null||T===void 0||T.call(v,this.getSlice(y,g-m)),(x=(S=this.cbs).oncommentend)===null||x===void 0||x.call(S),this.startIndex=g+1}oncdata(y,g,m){var v,T,S,x,L,O,w,A,E,R;this.endIndex=g;const V=this.getSlice(y,g-m);!this.htmlMode||this.options.recognizeCDATA?((T=(v=this.cbs).oncdatastart)===null||T===void 0||T.call(v),(x=(S=this.cbs).ontext)===null||x===void 0||x.call(S,V),(O=(L=this.cbs).oncdataend)===null||O===void 0||O.call(L)):((A=(w=this.cbs).oncomment)===null||A===void 0||A.call(w,`[CDATA[${V}]]`),(R=(E=this.cbs).oncommentend)===null||R===void 0||R.call(E)),this.startIndex=g+1}onend(){var y,g;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let m=0;m<this.stack.length;m++)this.cbs.onclosetag(this.stack[m],!0)}(g=(y=this.cbs).onend)===null||g===void 0||g.call(y)}reset(){var y,g,m,v;(g=(y=this.cbs).onreset)===null||g===void 0||g.call(y),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(v=(m=this.cbs).onparserinit)===null||v===void 0||v.call(m,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(y){this.reset(),this.end(y)}getSlice(y,g){for(;y-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let m=this.buffers[0].slice(y-this.bufferOffset,g-this.bufferOffset);for(;g-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),m+=this.buffers[0].slice(0,g-this.bufferOffset);return m}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(y){var g,m;if(this.ended){(m=(g=this.cbs).onerror)===null||m===void 0||m.call(g,new Error(".write() after done!"));return}this.buffers.push(y),this.tokenizer.running&&(this.tokenizer.write(y),this.writeIndex++)}end(y){var g,m;if(this.ended){(m=(g=this.cbs).onerror)===null||m===void 0||m.call(g,new Error(".end() after done!"));return}y&&this.write(y),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(y){this.write(y)}done(y){this.end(y)}}return ti.Parser=b,ti}var M$;function Kfe(){return M$||(M$=1,function(a){var t=ei&&ei.__createBinding||(Object.create?function(g,m,v,T){T===void 0&&(T=v);var S=Object.getOwnPropertyDescriptor(m,v);(!S||("get"in S?!m.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(g,T,S)}:function(g,m,v,T){T===void 0&&(T=v),g[T]=m[v]}),u=ei&&ei.__setModuleDefault||(Object.create?function(g,m){Object.defineProperty(g,"default",{enumerable:!0,value:m})}:function(g,m){g.default=m}),n=ei&&ei.__importStar||function(){var g=function(m){return g=Object.getOwnPropertyNames||function(v){var T=[];for(var S in v)Object.prototype.hasOwnProperty.call(v,S)&&(T[T.length]=S);return T},g(m)};return function(m){if(m&&m.__esModule)return m;var v={};if(m!=null)for(var T=g(m),S=0;S<T.length;S++)T[S]!=="default"&&t(v,m,T[S]);return u(v,m),v}}(),r=ei&&ei.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomUtils=a.getFeed=a.ElementType=a.QuoteType=a.Tokenizer=a.DefaultHandler=a.DomHandler=a.Parser=void 0,a.parseDocument=s,a.parseDOM=l,a.createDocumentStream=d,a.createDomStream=f,a.parseFeed=y;const e=L$();var i=L$();Object.defineProperty(a,"Parser",{enumerable:!0,get:function(){return i.Parser}});const o=jn();var c=jn();Object.defineProperty(a,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(a,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function s(g,m){const v=new o.DomHandler(void 0,m);return new e.Parser(v,m).end(g),v.root}function l(g,m){return s(g,m).children}function d(g,m,v){const T=new o.DomHandler(S=>g(S,T.root),m,v);return new e.Parser(T,m)}function f(g,m,v){const T=new o.DomHandler(g,m,v);return new e.Parser(T,m)}var h=P$();Object.defineProperty(a,"Tokenizer",{enumerable:!0,get:function(){return r(h).default}}),Object.defineProperty(a,"QuoteType",{enumerable:!0,get:function(){return h.QuoteType}}),a.ElementType=n(rs());const p=zi();var b=zi();Object.defineProperty(a,"getFeed",{enumerable:!0,get:function(){return b.getFeed}});const _={xmlMode:!0};function y(g,m=_){return(0,p.getFeed)(l(g,m))}a.DomUtils=n(zi())}(ei)),ei}var C$;function Wfe(){if(C$)return Em;C$=1,Object.defineProperty(Em,"__esModule",{value:!0}),Em.ActorRdfParseHtml=void 0;const a=Oh(),t=Kfe(),u=Mt();class n extends a.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,i,o){var p;const c=new u.Readable({objectMode:!0});c._read=()=>{};let s=0,l=1;function d(b){c.emit("error",b)}function f(){--l===0&&c.push(null)}const h={baseIRI:((p=e.metadata)==null?void 0:p.baseIRI)??"",context:o,emit:b=>{s--,c.push(b)},end:f,error:d,headers:e.headers};try{const b=await Promise.all(this.busRdfParseHtml.publish(h));l+=b.length;const _=[];for(const m of b){const{htmlParseListener:v}=await m.actor.run(h,void 0);_.push(v)}const y=new t.Parser({onclosetag(){try{for(const m of _)m.onTagClose()}catch(m){d(m)}},onend(){try{for(const m of _)m.onEnd()}catch(m){d(m)}f()},onopentag(m,v){try{for(const T of _)T.onTagOpen(m,v)}catch(T){d(T)}},ontext(m){try{for(const v of _)v.onText(m)}catch(v){d(v)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:!1}),g=c._read=m=>{for(s=Math.max(m,s);s>0;){const v=e.data.read();if(v===null){e.data.once("readable",()=>g(0));return}y.write(v.toString())}};e.data.on("error",d).on("end",()=>y.end())}catch(b){setTimeout(()=>{c.emit("error",b)})}return{data:c}}}return Em.ActorRdfParseHtml=n,Em}var q$;function Yfe(){return q$||(q$=1,function(a){var t=ss&&ss.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ss&&ss.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Wfe(),a)}(ss)),ss}var cs={},Nm={},ls={},Rm={},B$;function Zfe(){if(B$)return Rm;B$=1,Object.defineProperty(Rm,"__esModule",{value:!0}),Rm.ActorRdfParseHtml=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return Rm.ActorRdfParseHtml=t,Rm}var $$;function pR(){return $$||($$=1,function(a){var t=ls&&ls.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ls&&ls.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Zfe(),a)}(ls)),ls}var ds={},yR={},V$;function ehe(){return V$||(V$=1,Object.defineProperty(yR,"__esModule",{value:!0})),yR}var Fm={},U$;function Q$(){if(U$)return Fm;U$=1,Object.defineProperty(Fm,"__esModule",{value:!0}),Fm.ItemPropertyHandlerContent=void 0;let a=class{canHandle(u,n){return"content"in n}getObject(u,n,r){return n.createLiteral(u.content,r)}};return Fm.ItemPropertyHandlerContent=a,Fm}var Dm={},Pm={},fs={},jm={},H$;function G$(){if(H$)return jm;H$=1,Object.defineProperty(jm,"__esModule",{value:!0}),jm.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return jm.BlankNode=a,jm}var Lm={},Mm={},z$;function k$(){if(z$)return Mm;z$=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return Mm.DefaultGraph=a,a.INSTANCE=new a,Mm}var Cm={},qm={},X$;function bR(){if(X$)return qm;X$=1,Object.defineProperty(qm,"__esModule",{value:!0}),qm.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return qm.NamedNode=a,qm}var J$;function K$(){if(J$)return Cm;J$=1,Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.Literal=void 0;const a=bR();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Cm.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Cm}var Bm={},W$;function Y$(){if(W$)return Bm;W$=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return Bm.Quad=a,Bm}var $m={},Z$;function eV(){if(Z$)return $m;Z$=1,Object.defineProperty($m,"__esModule",{value:!0}),$m.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return $m.Variable=a,$m}var tV;function the(){if(tV)return Lm;tV=1,Object.defineProperty(Lm,"__esModule",{value:!0}),Lm.DataFactory=void 0;const a=G$(),t=k$(),u=K$(),n=bR(),r=Y$(),e=eV();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Lm.DataFactory=o,Lm}var rV;function rhe(){return rV||(rV=1,function(a){var t=fs&&fs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=fs&&fs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(G$(),a),u(the(),a),u(k$(),a),u(K$(),a),u(bR(),a),u(Y$(),a),u(eV(),a)}(fs)),fs}var nV;function bA(){if(nV)return Pm;nV=1,Object.defineProperty(Pm,"__esModule",{value:!0}),Pm.Util=void 0;const a=rhe(),t=vr();class u{constructor(r,e){this.dataFactory=r||new a.DataFactory,this.baseIRI=e||""}static isValidIri(r){return u.IRI_REGEX.test(r)}createVocabIris(r,e,i){return r.split(/\s+/u).filter(o=>!!o).map(o=>{if(!u.isValidIri(o)){if(!i)return;o=`${e.vocab||`${this.baseIRI}#`}${o}`}return this.dataFactory.namedNode(o)}).filter(o=>!!o)}getVocabularyExpansionType(r,e,i){const o=r.split(/\s+/u);if(o.includes("subPropertyOf")||o.includes("equivalentProperty"))return[this.dataFactory.namedNode(`${u.RDF}type`)];if(e.vocab&&e.vocab in i&&i[e.vocab].properties){let c=[];for(const[s,l]of Object.entries(i[e.vocab].properties))o.includes(s)&&(c=[...Object.values(l).map(d=>this.dataFactory.namedNode(d))]);return c}return[]}createSubject(r){if(!u.isValidIri(r))try{r=(0,t.resolve)(r,this.baseIRI)}catch{return}return this.dataFactory.namedNode(r)}createLiteral(r,e){return this.dataFactory.literal(r,e.language)}deriveVocab(r,e){let i;for(const o in e)if(r.startsWith(o)){i=o,i.endsWith("/")||(i+="#");break}if(!i){const o=r.indexOf("#");o>0?i=r.slice(0,o+1):i=(0,t.resolve)(".",r)}return i}}return Pm.Util=u,u.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",u.XSD="http://www.w3.org/2001/XMLSchema#",u.RDFA="http://www.w3.org/ns/rdfa#",u.IRI_REGEX=/^([A-Za-z][\d+-.A-Za-z]*|_):[^ "<>[\\\]`{|}]*$/u,Pm}var iV;function aV(){if(iV)return Dm;iV=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.ItemPropertyHandlerNumber=void 0;const a=bA();let t=class{constructor(n,r){this.tagName=n,this.attributeName=r}canHandle(n,r){return this.tagName===n&&this.attributeName in r}getObject(n,r,e){const i=n[this.attributeName];let o;return!Number.isNaN(Number.parseInt(i,10))&&!i.includes(".")?o=`${a.Util.XSD}integer`:Number.isNaN(Number.parseFloat(i))||(o=`${a.Util.XSD}double`),r.dataFactory.literal(i,o&&r.dataFactory.namedNode(o))}};return Dm.ItemPropertyHandlerNumber=t,Dm}var Vm={},uV;function oV(){if(uV)return Vm;uV=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.ItemPropertyHandlerTime=void 0;const a=bA();let t=class aae{canHandle(n,r){return n==="time"&&"datetime"in r}getObject(n,r,e){const i=n.datetime;let o;for(const c of aae.TIME_REGEXES)if(c.regex.test(i)){o=r.dataFactory.namedNode(a.Util.XSD+c.type);break}return r.dataFactory.literal(i,o)}};return Vm.ItemPropertyHandlerTime=t,t.TIME_REGEXES=[{regex:/^-?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d)?S)?)?$/u,type:"duration"},{regex:/^\d+-\d\d-\d\dT\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"dateTime"},{regex:/^\d+-\d\d-\d\dZ?$/u,type:"date"},{regex:/^\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"time"},{regex:/^\d+-\d\d$/u,type:"gYearMonth"},{regex:/^\d+$/u,type:"gYear"}],Vm}var Um={},sV;function cV(){if(sV)return Um;sV=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.ItemPropertyHandlerUrl=void 0;const a=vr();let t=class{constructor(n,r){this.tagName=n,this.attributeName=r}canHandle(n,r){return this.tagName===n&&this.attributeName in r}getObject(n,r,e){return r.dataFactory.namedNode((0,a.resolve)(n[this.attributeName],r.baseIRI))}};return Um.ItemPropertyHandlerUrl=t,Um}var mR={},lV;function nhe(){return lV||(lV=1,Object.defineProperty(mR,"__esModule",{value:!0})),mR}var _R={},dV;function ihe(){return dV||(dV=1,Object.defineProperty(_R,"__esModule",{value:!0})),_R}var gR={},fV;function ahe(){return fV||(fV=1,Object.defineProperty(gR,"__esModule",{value:!0})),gR}var Qm={},ri={},ni={},vR={},hV;function pV(){return hV||(hV=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.QuoteType=void 0;var t=Nh(),u;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(u||(u={}));var n;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(n||(n={}));function r(f){return f===u.Space||f===u.NewLine||f===u.Tab||f===u.FormFeed||f===u.CarriageReturn}function e(f){return f===u.Slash||f===u.Gt||r(f)}function i(f){return f>=u.Zero&&f<=u.Nine}function o(f){return f>=u.LowerA&&f<=u.LowerZ||f>=u.UpperA&&f<=u.UpperZ}function c(f){return f>=u.UpperA&&f<=u.UpperF||f>=u.LowerA&&f<=u.LowerF}var s;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(s=a.QuoteType||(a.QuoteType={}));var l={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},d=function(){function f(h,p){var b=h.xmlMode,_=b===void 0?!1:b,y=h.decodeEntities,g=y===void 0?!0:y;this.cbs=p,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=_,this.decodeEntities=g,this.entityTrie=_?t.xmlDecodeTree:t.htmlDecodeTree}return f.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(h){this.offset+=this.buffer.length,this.buffer=h,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(h){h===u.Lt||!this.decodeEntities&&this.fastForwardTo(u.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&h===u.Amp&&(this.state=n.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(h){var p=this.sequenceIndex===this.currentSequence.length,b=p?e(h):(h|32)===this.currentSequence[this.sequenceIndex];if(!b)this.isSpecial=!1;else if(!p){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(h)},f.prototype.stateInSpecialTag=function(h){if(this.sequenceIndex===this.currentSequence.length){if(h===u.Gt||r(h)){var p=this.index-this.currentSequence.length;if(this.sectionStart<p){var b=this.index;this.index=p,this.cbs.ontext(this.sectionStart,p),this.index=b}this.isSpecial=!1,this.sectionStart=p+2,this.stateInClosingTagName(h);return}this.sequenceIndex=0}(h|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===l.TitleEnd?this.decodeEntities&&h===u.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(u.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(h===u.Lt)},f.prototype.stateCDATASequence=function(h){h===l.Cdata[this.sequenceIndex]?++this.sequenceIndex===l.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=l.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(h))},f.prototype.fastForwardTo=function(h){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===h)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(h){h===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):h!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(h){return this.xmlMode?!e(h):o(h)},f.prototype.startSpecial=function(h,p){this.isSpecial=!0,this.currentSequence=h,this.sequenceIndex=p,this.state=n.SpecialStartSequence},f.prototype.stateBeforeTagName=function(h){if(h===u.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(h===u.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(h)){var p=h|32;this.sectionStart=this.index,!this.xmlMode&&p===l.TitleEnd[2]?this.startSpecial(l.TitleEnd,3):this.state=!this.xmlMode&&p===l.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else h===u.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(h))},f.prototype.stateInTagName=function(h){e(h)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(h))},f.prototype.stateBeforeClosingTagName=function(h){r(h)||(h===u.Gt?this.state=n.Text:(this.state=this.isTagStartChar(h)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(h){(h===u.Gt||r(h))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(h))},f.prototype.stateAfterClosingTagName=function(h){(h===u.Gt||this.fastForwardTo(u.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(h){h===u.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):h===u.Slash?this.state=n.InSelfClosingTag:r(h)||(this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(h){h===u.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):r(h)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(h))},f.prototype.stateInAttributeName=function(h){(h===u.Eq||e(h))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(h))},f.prototype.stateAfterAttributeName=function(h){h===u.Eq?this.state=n.BeforeAttributeValue:h===u.Slash||h===u.Gt?(this.cbs.onattribend(s.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(h)):r(h)||(this.cbs.onattribend(s.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(h){h===u.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):h===u.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):r(h)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(h))},f.prototype.handleInAttributeValue=function(h,p){h===p||!this.decodeEntities&&this.fastForwardTo(p)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(p===u.DoubleQuote?s.Double:s.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&h===u.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(h){this.handleInAttributeValue(h,u.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(h){this.handleInAttributeValue(h,u.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(h){r(h)||h===u.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(h)):this.decodeEntities&&h===u.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(h){h===u.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=h===u.Dash?n.BeforeComment:n.InDeclaration},f.prototype.stateInDeclaration=function(h){(h===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(h){(h===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(h){h===u.Dash?(this.state=n.InCommentLike,this.currentSequence=l.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},f.prototype.stateInSpecialComment=function(h){(h===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(h){var p=h|32;p===l.ScriptEnd[3]?this.startSpecial(l.ScriptEnd,4):p===l.StyleEnd[3]?this.startSpecial(l.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(h))},f.prototype.stateBeforeEntity=function(h){this.entityExcess=1,this.entityResult=0,h===u.Number?this.state=n.BeforeNumericEntity:h===u.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(h))},f.prototype.stateInNamedEntity=function(h){if(this.entityExcess+=1,this.trieIndex=(0,t.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,h),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var p=this.trieCurrent&t.BinTrieFlags.VALUE_LENGTH;if(p){var b=(p>>14)-1;if(!this.allowLegacyEntity()&&h!==u.Semi)this.trieIndex+=b;else{var _=this.index-this.entityExcess+1;_>this.sectionStart&&this.emitPartial(this.sectionStart,_),this.entityResult=this.trieIndex,this.trieIndex+=b,this.entityExcess=0,this.sectionStart=this.index+1,b===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var h=(this.entityTrie[this.entityResult]&t.BinTrieFlags.VALUE_LENGTH)>>14;switch(h){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~t.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(h){(h|32)===u.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(h))},f.prototype.emitNumericEntity=function(h){var p=this.index-this.entityExcess-1,b=p+2+ +(this.state===n.InHexEntity);b!==this.index&&(p>this.sectionStart&&this.emitPartial(this.sectionStart,p),this.sectionStart=this.index+Number(h),this.emitCodePoint((0,t.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(h){h===u.Semi?this.emitNumericEntity(!0):i(h)?(this.entityResult=this.entityResult*10+(h-u.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(h){h===u.Semi?this.emitNumericEntity(!0):i(h)?(this.entityResult=this.entityResult*16+(h-u.Zero),this.entityExcess++):c(h)?(this.entityResult=this.entityResult*16+((h|32)-u.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var h=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(h);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(h);break}case n.InSpecialTag:{this.stateInSpecialTag(h);break}case n.CDATASequence:{this.stateCDATASequence(h);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(h);break}case n.InAttributeName:{this.stateInAttributeName(h);break}case n.InCommentLike:{this.stateInCommentLike(h);break}case n.InSpecialComment:{this.stateInSpecialComment(h);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(h);break}case n.InTagName:{this.stateInTagName(h);break}case n.InClosingTagName:{this.stateInClosingTagName(h);break}case n.BeforeTagName:{this.stateBeforeTagName(h);break}case n.AfterAttributeName:{this.stateAfterAttributeName(h);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(h);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(h);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(h);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(h);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(h);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(h);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(h);break}case n.InDeclaration:{this.stateInDeclaration(h);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(h);break}case n.BeforeComment:{this.stateBeforeComment(h);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(h);break}case n.InNamedEntity:{this.stateInNamedEntity(h);break}case n.BeforeEntity:{this.stateBeforeEntity(h);break}case n.InHexEntity:{this.stateInHexEntity(h);break}case n.InNumericEntity:{this.stateInNumericEntity(h);break}default:this.stateBeforeNumericEntity(h)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var h=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,h,0):this.cbs.oncomment(this.sectionStart,h,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,h)},f.prototype.emitPartial=function(h,p){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(h,p):this.cbs.ontext(h,p)},f.prototype.emitCodePoint=function(h){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(h):this.cbs.ontextentity(h)},f}();a.default=d}(vR)),vR}var yV;function bV(){if(yV)return ni;yV=1;var a=ni&&ni.__createBinding||(Object.create?function(_,y,g,m){m===void 0&&(m=g);var v=Object.getOwnPropertyDescriptor(y,g);(!v||("get"in v?!y.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return y[g]}}),Object.defineProperty(_,m,v)}:function(_,y,g,m){m===void 0&&(m=g),_[m]=y[g]}),t=ni&&ni.__setModuleDefault||(Object.create?function(_,y){Object.defineProperty(_,"default",{enumerable:!0,value:y})}:function(_,y){_.default=y}),u=ni&&ni.__importStar||function(_){if(_&&_.__esModule)return _;var y={};if(_!=null)for(var g in _)g!=="default"&&Object.prototype.hasOwnProperty.call(_,g)&&a(y,_,g);return t(y,_),y};Object.defineProperty(ni,"__esModule",{value:!0}),ni.Parser=void 0;var n=u(pV()),r=Nh(),e=new Set(["input","option","optgroup","select","button","datalist","textarea"]),i=new Set(["p"]),o=new Set(["thead","tbody"]),c=new Set(["dd","dt"]),s=new Set(["rt","rp"]),l=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",i],["h1",i],["h2",i],["h3",i],["h4",i],["h5",i],["h6",i],["select",e],["input",e],["output",e],["button",e],["datalist",e],["textarea",e],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",c],["dt",c],["address",i],["article",i],["aside",i],["blockquote",i],["details",i],["div",i],["dl",i],["fieldset",i],["figcaption",i],["figure",i],["footer",i],["form",i],["header",i],["hr",i],["main",i],["nav",i],["ol",i],["pre",i],["section",i],["table",i],["ul",i],["rt",s],["rp",s],["tbody",o],["tfoot",o]]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),p=/\s|\//,b=function(){function _(y,g){g===void 0&&(g={});var m,v,T,S,x;this.options=g,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=y??{},this.lowerCaseTagNames=(m=g.lowerCaseTags)!==null&&m!==void 0?m:!g.xmlMode,this.lowerCaseAttributeNames=(v=g.lowerCaseAttributeNames)!==null&&v!==void 0?v:!g.xmlMode,this.tokenizer=new((T=g.Tokenizer)!==null&&T!==void 0?T:n.default)(this.options,this),(x=(S=this.cbs).onparserinit)===null||x===void 0||x.call(S,this)}return _.prototype.ontext=function(y,g){var m,v,T=this.getSlice(y,g);this.endIndex=g-1,(v=(m=this.cbs).ontext)===null||v===void 0||v.call(m,T),this.startIndex=g},_.prototype.ontextentity=function(y){var g,m,v=this.tokenizer.getSectionStart();this.endIndex=v-1,(m=(g=this.cbs).ontext)===null||m===void 0||m.call(g,(0,r.fromCodePoint)(y)),this.startIndex=v},_.prototype.isVoidElement=function(y){return!this.options.xmlMode&&d.has(y)},_.prototype.onopentagname=function(y,g){this.endIndex=g;var m=this.getSlice(y,g);this.lowerCaseTagNames&&(m=m.toLowerCase()),this.emitOpenTag(m)},_.prototype.emitOpenTag=function(y){var g,m,v,T;this.openTagStart=this.startIndex,this.tagname=y;var S=!this.options.xmlMode&&l.get(y);if(S)for(;this.stack.length>0&&S.has(this.stack[this.stack.length-1]);){var x=this.stack.pop();(m=(g=this.cbs).onclosetag)===null||m===void 0||m.call(g,x,!0)}this.isVoidElement(y)||(this.stack.push(y),f.has(y)?this.foreignContext.push(!0):h.has(y)&&this.foreignContext.push(!1)),(T=(v=this.cbs).onopentagname)===null||T===void 0||T.call(v,y),this.cbs.onopentag&&(this.attribs={})},_.prototype.endOpenTag=function(y){var g,m;this.startIndex=this.openTagStart,this.attribs&&((m=(g=this.cbs).onopentag)===null||m===void 0||m.call(g,this.tagname,this.attribs,y),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},_.prototype.onopentagend=function(y){this.endIndex=y,this.endOpenTag(!1),this.startIndex=y+1},_.prototype.onclosetag=function(y,g){var m,v,T,S,x,L;this.endIndex=g;var O=this.getSlice(y,g);if(this.lowerCaseTagNames&&(O=O.toLowerCase()),(f.has(O)||h.has(O))&&this.foreignContext.pop(),this.isVoidElement(O))!this.options.xmlMode&&O==="br"&&((v=(m=this.cbs).onopentagname)===null||v===void 0||v.call(m,"br"),(S=(T=this.cbs).onopentag)===null||S===void 0||S.call(T,"br",{},!0),(L=(x=this.cbs).onclosetag)===null||L===void 0||L.call(x,"br",!1));else{var w=this.stack.lastIndexOf(O);if(w!==-1)if(this.cbs.onclosetag)for(var A=this.stack.length-w;A--;)this.cbs.onclosetag(this.stack.pop(),A!==0);else this.stack.length=w;else!this.options.xmlMode&&O==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=g+1},_.prototype.onselfclosingtag=function(y){this.endIndex=y,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=y+1):this.onopentagend(y)},_.prototype.closeCurrentTag=function(y){var g,m,v=this.tagname;this.endOpenTag(y),this.stack[this.stack.length-1]===v&&((m=(g=this.cbs).onclosetag)===null||m===void 0||m.call(g,v,!y),this.stack.pop())},_.prototype.onattribname=function(y,g){this.startIndex=y;var m=this.getSlice(y,g);this.attribname=this.lowerCaseAttributeNames?m.toLowerCase():m},_.prototype.onattribdata=function(y,g){this.attribvalue+=this.getSlice(y,g)},_.prototype.onattribentity=function(y){this.attribvalue+=(0,r.fromCodePoint)(y)},_.prototype.onattribend=function(y,g){var m,v;this.endIndex=g,(v=(m=this.cbs).onattribute)===null||v===void 0||v.call(m,this.attribname,this.attribvalue,y===n.QuoteType.Double?'"':y===n.QuoteType.Single?"'":y===n.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},_.prototype.getInstructionName=function(y){var g=y.search(p),m=g<0?y:y.substr(0,g);return this.lowerCaseTagNames&&(m=m.toLowerCase()),m},_.prototype.ondeclaration=function(y,g){this.endIndex=g;var m=this.getSlice(y,g);if(this.cbs.onprocessinginstruction){var v=this.getInstructionName(m);this.cbs.onprocessinginstruction("!".concat(v),"!".concat(m))}this.startIndex=g+1},_.prototype.onprocessinginstruction=function(y,g){this.endIndex=g;var m=this.getSlice(y,g);if(this.cbs.onprocessinginstruction){var v=this.getInstructionName(m);this.cbs.onprocessinginstruction("?".concat(v),"?".concat(m))}this.startIndex=g+1},_.prototype.oncomment=function(y,g,m){var v,T,S,x;this.endIndex=g,(T=(v=this.cbs).oncomment)===null||T===void 0||T.call(v,this.getSlice(y,g-m)),(x=(S=this.cbs).oncommentend)===null||x===void 0||x.call(S),this.startIndex=g+1},_.prototype.oncdata=function(y,g,m){var v,T,S,x,L,O,w,A,E,R;this.endIndex=g;var V=this.getSlice(y,g-m);this.options.xmlMode||this.options.recognizeCDATA?((T=(v=this.cbs).oncdatastart)===null||T===void 0||T.call(v),(x=(S=this.cbs).ontext)===null||x===void 0||x.call(S,V),(O=(L=this.cbs).oncdataend)===null||O===void 0||O.call(L)):((A=(w=this.cbs).oncomment)===null||A===void 0||A.call(w,"[CDATA[".concat(V,"]]")),(R=(E=this.cbs).oncommentend)===null||R===void 0||R.call(E)),this.startIndex=g+1},_.prototype.onend=function(){var y,g;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var m=this.stack.length;m>0;this.cbs.onclosetag(this.stack[--m],!0));}(g=(y=this.cbs).onend)===null||g===void 0||g.call(y)},_.prototype.reset=function(){var y,g,m,v;(g=(y=this.cbs).onreset)===null||g===void 0||g.call(y),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(v=(m=this.cbs).onparserinit)===null||v===void 0||v.call(m,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},_.prototype.parseComplete=function(y){this.reset(),this.end(y)},_.prototype.getSlice=function(y,g){for(;y-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var m=this.buffers[0].slice(y-this.bufferOffset,g-this.bufferOffset);g-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),m+=this.buffers[0].slice(0,g-this.bufferOffset);return m},_.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},_.prototype.write=function(y){var g,m;if(this.ended){(m=(g=this.cbs).onerror)===null||m===void 0||m.call(g,new Error(".write() after done!"));return}this.buffers.push(y),this.tokenizer.running&&(this.tokenizer.write(y),this.writeIndex++)},_.prototype.end=function(y){var g,m;if(this.ended){(m=(g=this.cbs).onerror)===null||m===void 0||m.call(g,new Error(".end() after done!"));return}y&&this.write(y),this.ended=!0,this.tokenizer.end()},_.prototype.pause=function(){this.tokenizer.pause()},_.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},_.prototype.parseChunk=function(y){this.write(y)},_.prototype.done=function(y){this.end(y)},_}();return ni.Parser=b,ni}var mV;function uhe(){return mV||(mV=1,function(a){var t=ri&&ri.__createBinding||(Object.create?function(y,g,m,v){v===void 0&&(v=m);var T=Object.getOwnPropertyDescriptor(g,m);(!T||("get"in T?!g.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return g[m]}}),Object.defineProperty(y,v,T)}:function(y,g,m,v){v===void 0&&(v=m),y[v]=g[m]}),u=ri&&ri.__setModuleDefault||(Object.create?function(y,g){Object.defineProperty(y,"default",{enumerable:!0,value:g})}:function(y,g){y.default=g}),n=ri&&ri.__importStar||function(y){if(y&&y.__esModule)return y;var g={};if(y!=null)for(var m in y)m!=="default"&&Object.prototype.hasOwnProperty.call(y,m)&&t(g,y,m);return u(g,y),g},r=ri&&ri.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomUtils=a.parseFeed=a.getFeed=a.ElementType=a.Tokenizer=a.createDomStream=a.parseDOM=a.parseDocument=a.DefaultHandler=a.DomHandler=a.Parser=void 0;var e=bV(),i=bV();Object.defineProperty(a,"Parser",{enumerable:!0,get:function(){return i.Parser}});var o=jn(),c=jn();Object.defineProperty(a,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(a,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function s(y,g){var m=new o.DomHandler(void 0,g);return new e.Parser(m,g).end(y),m.root}a.parseDocument=s;function l(y,g){return s(y,g).children}a.parseDOM=l;function d(y,g,m){var v=new o.DomHandler(y,g,m);return new e.Parser(v,g)}a.createDomStream=d;var f=pV();Object.defineProperty(a,"Tokenizer",{enumerable:!0,get:function(){return r(f).default}}),a.ElementType=n(rs());var h=zi(),p=zi();Object.defineProperty(a,"getFeed",{enumerable:!0,get:function(){return p.getFeed}});var b={xmlMode:!0};function _(y,g){return g===void 0&&(g=b),(0,h.getFeed)(l(y,g))}a.parseFeed=_,a.DomUtils=n(zi())}(ri)),ri}var ohe={"http://schema.org/":{properties:{additionalType:{subPropertyOf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}}},"http://microformats.org/profile/hcard":{}},_V;function she(){if(_V)return Qm;_V=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.MicrodataRdfParser=void 0;const a=uhe(),t=Mt(),u=Q$(),n=aV(),r=oV(),e=cV(),i=bA(),o=ohe;let c=class FD extends t.Transform{constructor(l){super({readableObjectMode:!0}),this.itemScopeStack=[],this.textBufferStack=[],this.isEmittingReferences=!1,this.pendingItemRefsDomain={},this.pendingItemRefsRangeFinalized={},this.pendingItemRefsRangeCollecting={},l=l||{},this.options=l,this.util=new i.Util(l.dataFactory,l.baseIRI),this.defaultGraph=l.defaultGraph||this.util.dataFactory.defaultGraph(),this.htmlParseListener=l.htmlParseListener,this.vocabRegistry=l.vocabRegistry||o,this.parser=this.initializeParser(!!l.xmlMode)}import(l){const d=new t.PassThrough({readableObjectMode:!0});l.on("error",h=>f.emit("error",h)),l.on("data",h=>d.push(h)),l.on("end",()=>d.push(null));const f=d.pipe(new FD(this.options));return f}_transform(l,d,f){this.parser.write(l.toString()),f()}_flush(l){this.parser.end(),l()}getItemScope(l){let d=this.itemScopeStack.length-(l?2:1);for(;d>0&&!this.itemScopeStack[d];)d--;return this.itemScopeStack[d]}getDepth(){return this.itemScopeStack.length}onTagOpen(l,d){if(!this.isEmittingReferences){if("id"in d){const h=d.id;this.pendingItemRefsRangeCollecting[h]={events:[],counter:0,ids:[]}}for(const h of Object.values(this.pendingItemRefsRangeCollecting))h.counter++,h.events.push({type:"open",name:l,attributes:d})}this.textBufferStack.push(void 0);let f;if("itemscope"in d){let h;if(this.emittingReferencesItemScopeIdGenerator)h=this.emittingReferencesItemScopeIdGenerator();else{h="itemid"in d&&this.util.createSubject(d.itemid)||this.util.dataFactory.blankNode();for(const b of Object.values(this.pendingItemRefsRangeCollecting))b.ids.push(h)}f={subject:h},this.isEmittingReferences&&(f.blockEmission=!0);const p=this.getItemScope();p&&p.vocab&&(f.vocab=p.vocab),this.itemScopeStack.push(f)}else f=this.getItemScope(),this.itemScopeStack.push(void 0);if(f){if("itemtype"in d)for(const h of this.util.createVocabIris(d.itemtype,f,!1))f.vocab||(f.vocab=this.util.deriveVocab(h.value,this.vocabRegistry)),f.blockEmission||this.emitTriple(f.subject,this.util.dataFactory.namedNode(`${i.Util.RDF}type`),h);if("lang"in d&&(f.language=d.lang),"xml:lang"in d&&(f.language=d["xml:lang"]),"itemscope"in d&&!this.isEmittingReferences&&"itemref"in d)for(const h of d.itemref.split(/\s+/u))h in this.pendingItemRefsDomain||(this.pendingItemRefsDomain[h]=[]),this.pendingItemRefsDomain[h].push(f),this.tryToEmitReferences(h,f)}"itemprop"in d&&this.handleItemProperties(d.itemprop,!1,f,l,d),"itemprop-reverse"in d&&this.handleItemProperties(d["itemprop-reverse"],!0,f,l,d)}onText(l){if(!this.isEmittingReferences)for(const d of Object.values(this.pendingItemRefsRangeCollecting))d.events.push({type:"text",data:l});for(const d of this.textBufferStack)d&&d.push(l)}onTagClose(){if(!this.isEmittingReferences)for(const[d,f]of Object.entries(this.pendingItemRefsRangeCollecting))f.counter--,f.events.push({type:"close"}),f.counter===0&&(this.pendingItemRefsRangeFinalized[d]=f,delete this.pendingItemRefsRangeCollecting[d],this.tryToEmitReferences(d));const l=this.getItemScope(!0);if(l){const d=this.getDepth();if(l.predicates&&d in l.predicates)for(const[f,h]of Object.entries(l.predicates[d])){const p=this.util.createLiteral(this.textBufferStack[d].join(""),l);this.emitPredicateTriples(l,h,p,f==="reverse"),delete l.predicates[d][f]}}this.itemScopeStack.pop(),this.textBufferStack.pop()}onEnd(){}initializeParser(l){return new a.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(d){this.emit("error",d)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(d){this.emit("error",d)}},onopentag:(d,f)=>{try{this.onTagOpen(d,f),this.htmlParseListener&&this.htmlParseListener.onTagOpen(d,f)}catch(h){this.emit("error",h)}},ontext:d=>{try{this.onText(d),this.htmlParseListener&&this.htmlParseListener.onText(d)}catch(f){this.emit("error",f)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:l})}handleItemProperties(l,d,f,h,p){const b=this.getItemScope(!0);if(b){const _=this.getDepth(),y=this.util.createVocabIris(l,b,!0);b.predicates||(b.predicates={}),b.predicates[_]||(b.predicates[_]={});const g=d?"reverse":"forward";b.predicates[_][g]=y;for(const m of this.util.getVocabularyExpansionType(l,b,this.vocabRegistry))y.push(m);if(f&&"itemscope"in p)this.emitPredicateTriples(b,y,f.subject,d),delete b.predicates[_][g];else for(const m of FD.ITEM_PROPERTY_HANDLERS)if(m.canHandle(h,p)){const v=m.getObject(p,this.util,b);this.emitPredicateTriples(b,y,v,d),delete b.predicates[_][g]}b.predicates[_][g]&&(this.textBufferStack[_]=[])}}emitPredicateTriples(l,d,f,h){if(!l.blockEmission)for(const p of d)h?f.termType!=="Literal"&&this.emitTriple(f,p,l.subject):this.emitTriple(l.subject,p,f)}emitTriple(l,d,f){this.push(this.util.dataFactory.quad(l,d,f,this.defaultGraph))}tryToEmitReferences(l,d){const f=this.pendingItemRefsRangeFinalized[l];if(f){let h;if(d){h=[d];const p=this.pendingItemRefsDomain[l].indexOf(d);this.pendingItemRefsDomain[l].splice(p,1)}else h=this.pendingItemRefsDomain[l],delete this.pendingItemRefsDomain[l];if(h){const p=this.itemScopeStack,b=this.textBufferStack;this.isEmittingReferences=!0;for(const _ of h){this.itemScopeStack=[_],this.textBufferStack=[void 0];const y=[...f.ids];this.emittingReferencesItemScopeIdGenerator=()=>y.shift();for(const g of f.events)switch(g.type){case"open":this.onTagOpen(g.name,g.attributes);break;case"text":this.onText(g.data);break;case"close":this.onTagClose();break}}this.emittingReferencesItemScopeIdGenerator=void 0,this.itemScopeStack=p,this.textBufferStack=b,this.isEmittingReferences=!1}}}};return Qm.MicrodataRdfParser=c,c.ITEM_PROPERTY_HANDLERS=[new u.ItemPropertyHandlerContent,new e.ItemPropertyHandlerUrl("a","href"),new e.ItemPropertyHandlerUrl("area","href"),new e.ItemPropertyHandlerUrl("audio","src"),new e.ItemPropertyHandlerUrl("embed","src"),new e.ItemPropertyHandlerUrl("iframe","src"),new e.ItemPropertyHandlerUrl("img","src"),new e.ItemPropertyHandlerUrl("link","href"),new e.ItemPropertyHandlerUrl("object","data"),new e.ItemPropertyHandlerUrl("source","src"),new e.ItemPropertyHandlerUrl("track","src"),new e.ItemPropertyHandlerUrl("video","src"),new n.ItemPropertyHandlerNumber("data","value"),new n.ItemPropertyHandlerNumber("meter","value"),new r.ItemPropertyHandlerTime],Qm}var gV;function che(){return gV||(gV=1,function(a){var t=ds&&ds.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ds&&ds.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ehe(),a),u(Q$(),a),u(aV(),a),u(oV(),a),u(cV(),a),u(nhe(),a),u(ihe(),a),u(ahe(),a),u(she(),a),u(bA(),a)}(ds)),ds}var vV;function lhe(){if(vV)return Nm;vV=1,Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.ActorRdfParseHtmlMicrodata=void 0;const a=pR(),t=ze(),u=Te(),n=che();let r=class extends a.ActorRdfParseHtml{constructor(i){super(i)}async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(t.KeysInitQuery.dataFactory),c=i.headers?i.headers.get("content-type"):null,s=c==null?void 0:c.includes("xml"),l=new n.MicrodataRdfParser({dataFactory:o,baseIRI:i.baseIRI,xmlMode:s});l.on("error",i.error),l.on("data",i.emit);const d=l.onEnd;return l.onEnd=()=>{d.call(l),i.end()},{htmlParseListener:l}}};return Nm.ActorRdfParseHtmlMicrodata=r,Nm}var TV;function dhe(){return TV||(TV=1,function(a){var t=cs&&cs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=cs&&cs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(lhe(),a)}(cs)),cs}var hs={},Hm={},wV;function fhe(){if(wV)return Hm;wV=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.ActorRdfParseHtmlRdfa=void 0;const a=pR(),t=ze(),u=Te(),n=h$();let r=class extends a.ActorRdfParseHtml{constructor(i){super(i)}async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(t.KeysInitQuery.dataFactory),c=i.headers?i.headers.get("content-type"):null,s=(i.headers&&i.headers.get("content-language"))??void 0,l=c&&c.includes("xml")?"xhtml":"html",d=new n.RdfaParser({dataFactory:o,baseIRI:i.baseIRI,profile:l,language:s});d.on("error",i.error),d.on("data",i.emit);const f=d.onEnd;return d.onEnd=()=>{f.call(d),i.end()},{htmlParseListener:d}}};return Hm.ActorRdfParseHtmlRdfa=r,Hm}var SV;function hhe(){return SV||(SV=1,function(a){var t=hs&&hs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=hs&&hs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(fhe(),a)}(hs)),hs}var ps={},Gm={},ys={},zm={},OV;function phe(){if(OV)return zm;OV=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.ActorRdfResolveHypermediaLinks=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return zm.ActorRdfResolveHypermediaLinks=t,zm}var AV;function yhe(){return AV||(AV=1,function(a){var t=ys&&ys.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ys&&ys.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(phe(),a)}(ys)),ys}var EV;function bhe(){if(EV)return Gm;EV=1,Object.defineProperty(Gm,"__esModule",{value:!0}),Gm.ActorRdfResolveHypermediaLinksNext=void 0;const a=yhe(),t=Te();let u=class extends a.ActorRdfResolveHypermediaLinks{constructor(r){super(r)}async test(r){return!r.metadata.next||r.metadata.next.length===0?(0,t.failTest)(`Actor ${this.name} requires a 'next' metadata entry.`):(0,t.passTestVoid)()}async run(r){return{links:r.metadata.next.map(e=>({url:e}))}}};return Gm.ActorRdfResolveHypermediaLinksNext=u,Gm}var IV;function mhe(){return IV||(IV=1,function(a){var t=ps&&ps.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ps&&ps.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(bhe(),a)}(ps)),ps}var bs={},km={},ms={},Xm={},xV;function _he(){if(xV)return Xm;xV=1,Object.defineProperty(Xm,"__esModule",{value:!0}),Xm.ActorRdfResolveHypermediaLinksQueue=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return Xm.ActorRdfResolveHypermediaLinksQueue=t,Xm}var TR={},NV;function ghe(){return NV||(NV=1,Object.defineProperty(TR,"__esModule",{value:!0})),TR}var Jm={},RV;function vhe(){if(RV)return Jm;RV=1,Object.defineProperty(Jm,"__esModule",{value:!0}),Jm.LinkQueueWrapper=void 0;let a=class{constructor(u){this.linkQueue=u}push(u,n){return this.linkQueue.push(u,n)}getSize(){return this.linkQueue.getSize()}isEmpty(){return this.linkQueue.isEmpty()}pop(){return this.linkQueue.pop()}peek(){return this.linkQueue.peek()}};return Jm.LinkQueueWrapper=a,Jm}var FV;function The(){return FV||(FV=1,function(a){var t=ms&&ms.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ms&&ms.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(_he(),a),u(ghe(),a),u(vhe(),a)}(ms)),ms}var Km={},DV;function PV(){if(DV)return Km;DV=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.LinkQueueFifo=void 0;let a=class{constructor(){this.links=[]}push(u){return this.links.push(u),!0}getSize(){return this.links.length}isEmpty(){return this.links.length===0}pop(){return this.links.shift()}peek(){return this.links[0]}};return Km.LinkQueueFifo=a,Km}var jV;function whe(){if(jV)return km;jV=1,Object.defineProperty(km,"__esModule",{value:!0}),km.ActorRdfResolveHypermediaLinksQueueFifo=void 0;const a=The(),t=Te(),u=PV();let n=class extends a.ActorRdfResolveHypermediaLinksQueue{constructor(e){super(e)}async test(e){return(0,t.passTestVoid)()}async run(e){return{linkQueue:new u.LinkQueueFifo}}};return km.ActorRdfResolveHypermediaLinksQueueFifo=n,km}var LV;function She(){return LV||(LV=1,function(a){var t=bs&&bs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=bs&&bs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(whe(),a),u(PV(),a)}(bs)),bs}var _s={},Wm={},gs={},Ym={},MV;function Ohe(){if(MV)return Ym;MV=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.ActorRdfSerialize=void 0;const a=vh();let t=class extends a.ActorAbstractMediaTyped{constructor(n){super(n)}};return Ym.ActorRdfSerialize=t,Ym}var Zm={},CV;function Ahe(){if(CV)return Zm;CV=1,Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.ActorRdfSerializeFixedMediaTypes=void 0;const a=vh(),t=Te();let u=class extends a.ActorAbstractMediaTypedFixed{constructor(r){super(r)}async testHandleChecked(){return(0,t.passTestVoid)()}};return Zm.ActorRdfSerializeFixedMediaTypes=u,Zm}var qV;function wR(){return qV||(qV=1,function(a){var t=gs&&gs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=gs&&gs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ohe(),a),u(Ahe(),a)}(gs)),gs}var BV;function Ehe(){if(BV)return Wm;BV=1,Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.ActorRdfSerializeN3=void 0;const a=wR(),t=Sa;let u=class extends a.ActorRdfSerializeFixedMediaTypes{constructor(r){super(r)}async runHandle(r,e){const i=new t.StreamWriter({format:e});let o;return"pipe"in r.quadStream?(r.quadStream.on("error",c=>i.emit("error",c)),o=r.quadStream.pipe(i)):o=i.import(r.quadStream),{data:o,triples:e==="text/turtle"||e==="application/n-triples"||e==="text/n3"}}};return Wm.ActorRdfSerializeN3=u,Wm}var $V;function Ihe(){return $V||($V=1,function(a){var t=_s&&_s.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=_s&&_s.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ehe(),a)}(_s)),_s}var vs={},e_={},Ts={},t_={},ws={},r_={},SR={},VV;function mA(){return VV||(VV=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ERROR_CODES=a.ErrorCoded=void 0;class t extends Error{constructor(n,r){super(n),this.code=r}}a.ErrorCoded=t,function(u){u.COLLIDING_KEYWORDS="colliding keywords",u.CONFLICTING_INDEXES="conflicting indexes",u.CYCLIC_IRI_MAPPING="cyclic IRI mapping",u.INVALID_ID_VALUE="invalid @id value",u.INVALID_INDEX_VALUE="invalid @index value",u.INVALID_NEST_VALUE="invalid @nest value",u.INVALID_PREFIX_VALUE="invalid @prefix value",u.INVALID_PROPAGATE_VALUE="invalid @propagate value",u.INVALID_REVERSE_VALUE="invalid @reverse value",u.INVALID_IMPORT_VALUE="invalid @import value",u.INVALID_VERSION_VALUE="invalid @version value",u.INVALID_BASE_IRI="invalid base IRI",u.INVALID_CONTAINER_MAPPING="invalid container mapping",u.INVALID_CONTEXT_ENTRY="invalid context entry",u.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",u.INVALID_DEFAULT_LANGUAGE="invalid default language",u.INVALID_INCLUDED_VALUE="invalid @included value",u.INVALID_IRI_MAPPING="invalid IRI mapping",u.INVALID_JSON_LITERAL="invalid JSON literal",u.INVALID_KEYWORD_ALIAS="invalid keyword alias",u.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",u.INVALID_LANGUAGE_MAPPING="invalid language mapping",u.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",u.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",u.INVALID_LOCAL_CONTEXT="invalid local context",u.INVALID_REMOTE_CONTEXT="invalid remote context",u.INVALID_REVERSE_PROPERTY="invalid reverse property",u.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",u.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",u.INVALID_SCOPED_CONTEXT="invalid scoped context",u.INVALID_SCRIPT_ELEMENT="invalid script element",u.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",u.INVALID_TERM_DEFINITION="invalid term definition",u.INVALID_TYPE_MAPPING="invalid type mapping",u.INVALID_TYPE_VALUE="invalid type value",u.INVALID_TYPED_VALUE="invalid typed value",u.INVALID_VALUE_OBJECT="invalid value object",u.INVALID_VALUE_OBJECT_VALUE="invalid value object value",u.INVALID_VOCAB_MAPPING="invalid vocab mapping",u.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",u.KEYWORD_REDEFINITION="keyword redefinition",u.LOADING_DOCUMENT_FAILED="loading document failed",u.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",u.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",u.PROCESSING_MODE_CONFLICT="processing mode conflict",u.PROTECTED_TERM_REDEFINITION="protected term redefinition",u.CONTEXT_OVERFLOW="context overflow",u.INVALID_BASE_DIRECTION="invalid base direction",u.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",u.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",u.INVALID_EMBEDDED_NODE="invalid embedded node",u.INVALID_ANNOTATION="invalid annotation"}(a.ERROR_CODES||(a.ERROR_CODES={}))}(SR)),SR}var n_={},UV;function QV(){if(UV)return n_;UV=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.FetchDocumentLoader=void 0;const a=mA(),t=N1(),u=vr();class n{constructor(e){this.fetcher=e}async load(e){const i=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(i.ok&&i.headers){let o=i.headers.get("Content-Type");if(o){const c=o.indexOf(";");c>0&&(o=o.substr(0,c))}if(o==="application/ld+json")return await i.json();if(i.headers.has("Link")){let c;if(i.headers.forEach((s,l)=>{if(l==="link"){const d=(0,t.parse)(s);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+e);c=(0,u.resolve)(f.uri,e)}}}),c)return this.load(c)}throw new a.ErrorCoded(`Unsupported JSON-LD media type ${o}`,a.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(i.statusText||`Status code: ${i.status}`)}}return n_.FetchDocumentLoader=n,n_}var OR={},i_={},HV;function AR(){if(HV)return i_;HV=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.Util=void 0;class a{static isCompactIri(u){return u.indexOf(":")>0&&!(u&&u[0]==="#")}static getPrefix(u,n){if(u&&u[0]==="#")return null;const r=u.indexOf(":");if(r>=0){if(u.length>r+1&&u.charAt(r+1)==="/"&&u.charAt(r+2)==="/")return null;const e=u.substr(0,r);if(e==="_")return null;if(n[e])return e}return null}static getContextValueId(u){if(u===null||typeof u=="string")return u;const n=u["@id"];return n||null}static isSimpleTermDefinitionPrefix(u,n){return!a.isPotentialKeyword(u)&&(n.allowPrefixNonGenDelims||typeof u=="string"&&(u[0]==="_"||a.isPrefixIriEndingWithGenDelim(u)))}static isPotentialKeyword(u){return typeof u=="string"&&a.KEYWORD_REGEX.test(u)}static isPrefixIriEndingWithGenDelim(u){return a.ENDS_WITH_GEN_DELIM.test(u)}static isPrefixValue(u){return u&&(typeof u=="string"||u&&typeof u=="object")}static isValidIri(u){return!!(u&&a.IRI_REGEX.test(u))}static isValidIriWeak(u){return!!u&&u[0]!==":"&&a.IRI_REGEX_WEAK.test(u)}static isValidKeyword(u){return a.VALID_KEYWORDS[u]}static isTermProtected(u,n){const r=u[n];return typeof r!="string"&&r&&r["@protected"]}static hasProtectedTerms(u){for(const n of Object.keys(u))if(a.isTermProtected(u,n))return!0;return!1}static isReservedInternalKeyword(u){return u.startsWith("@__")}static deepEqual(u,n){const r=Object.keys(u),e=Object.keys(n);return r.length!==e.length?!1:r.every(i=>{const o=u[i],c=n[i];return o===c||o!==null&&c!==null&&typeof o=="object"&&typeof c=="object"&&this.deepEqual(o,c)})}}return a.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,a.IRI_REGEX_WEAK=/(?::[^:])|\//,a.KEYWORD_REGEX=/^@[a-z]+$/i,a.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,a.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,a.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,a.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},a.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],a.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],a.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],a.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],a.CONTAINERS_1_0=["@list","@set","@index"],i_.Util=a,i_}var GV;function zV(){return GV||(GV=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.defaultExpandOptions=a.JsonLdContextNormalized=void 0;const t=vr(),u=mA(),n=AR();class r{constructor(i){this.contextRaw=i}getContextRaw(){return this.contextRaw}expandTerm(i,o,c=a.defaultExpandOptions){const s=this.contextRaw[i];if(s===null||s&&s["@id"]===null)return null;let l=!0;if(s&&o){const _=n.Util.getContextValueId(s);if(_&&_!==i)if(typeof _!="string"||!n.Util.isValidIri(_)&&!n.Util.isValidKeyword(_))n.Util.isPotentialKeyword(_)||(l=!1);else return _}const d=n.Util.getPrefix(i,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],b=n.Util.isPotentialKeyword(i);if(d){const _=this.contextRaw[d],y=n.Util.getContextValueId(_);if(y){if(typeof _=="string"||!c.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(y,c))return i}else if(y[0]!=="_"&&!b&&!_["@prefix"]&&!(i in this.contextRaw))return i;return y+i.substr(d.length+1)}}else if(o&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!b&&!n.Util.isCompactIri(i))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,t.resolve)(f,p):"")+i;throw new u.ErrorCoded(`Relative vocab expansion for term '${i}' with vocab '${f}' is not allowed.`,u.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+i;else if(!o&&p&&!b&&!n.Util.isCompactIri(i))return(0,t.resolve)(i,p);if(l)return i;throw new u.ErrorCoded(`Invalid IRI mapping found for context entry '${i}': '${JSON.stringify(s)}'`,u.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(i,o){if(o&&this.contextRaw["@vocab"]&&i.startsWith(this.contextRaw["@vocab"]))return i.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&i.startsWith(this.contextRaw["@base"]))return i.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:i};for(const s in this.contextRaw){const l=this.contextRaw[s];if(l&&!n.Util.isPotentialKeyword(s)){const d=n.Util.getContextValueId(l);if(i.startsWith(d)){const f=i.substr(d.length);if(f)f.length<c.suffix.length&&(c.prefix=s,c.suffix=f);else if(o)return s}}}return c.prefix?c.prefix+":"+c.suffix:i}}a.JsonLdContextNormalized=r,a.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(OR)),OR}var kV;function xhe(){if(kV)return r_;kV=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.ContextParser=void 0;const a=vr(),t=mA(),u=QV(),n=zV(),r=AR();class e{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new u.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,c,s){if(typeof o!="string")throw new t.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,s);if(!r.Util.REGEX_LANGUAGE_TAG.test(o)){if(c)throw new t.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,s);return!1}return!0}static validateDirection(o,c){if(typeof o!="string")throw new t.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,t.ERROR_CODES.INVALID_BASE_DIRECTION);if(!r.Util.REGEX_DIRECTION_TAG.test(o)){if(c)throw new t.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,t.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const c of Object.keys(o)){let s=o[c];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||r.Util.isValidKeyword(s["@reverse"]))throw new t.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);s=o[c]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],r.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return o}expandPrefixedTerms(o,c,s){const l=o.getContextRaw();for(const d of s||Object.keys(l))if(r.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!r.Util.isReservedInternalKeyword(d)){const f=l[d];if(r.Util.isPotentialKeyword(d)&&r.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof l[d]=="object"&&!(l[d]["@protected"]||l[d]["@container"]==="@set")))throw new t.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,t.ERROR_CODES.KEYWORD_REDEFINITION);if(r.Util.ALIAS_RANGE_BLACKLIST.indexOf(r.Util.getContextValueId(f))>=0)throw new t.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,t.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&r.Util.isPotentialKeyword(r.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new t.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);for(;r.Util.isPrefixValue(l[d]);){const h=l[d];let p=!1;if(typeof h=="string")l[d]=o.expandTerm(h,!0),p=p||h!==l[d];else{const b=h["@id"],_=h["@type"],y=!("@prefix"in h)||r.Util.isValidIri(d);if("@id"in h)b!=null&&typeof b=="string"&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":o.expandTerm(b,!0)}),p=p||b!==l[d]["@id"]);else if(!r.Util.isPotentialKeyword(d)&&y){const g=o.expandTerm(d,!0);g!==d&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":g}),p=!0)}if(_&&typeof _=="string"&&_!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&y){let g=o.expandTerm(_,!0);c&&_===g&&(g=o.expandTerm(_,!1)),g!==_&&(p=!0,l[d]=Object.assign(Object.assign({},l[d]),{"@type":g}))}}if(!p)break}}}normalize(o,{processingMode:c,normalizeLanguageTags:s}){if(s||c===1)for(const l of Object.keys(o))if(l==="@language"&&typeof o[l]=="string")o[l]=o[l].toLowerCase();else{const d=o[l];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[l]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const c of Object.keys(o)){const s=o[c];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")o[c]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const l={};for(const d of s["@container"])l[d]=!0;o[c]=Object.assign(Object.assign({},s),{"@container":l})}}}}applyScopedProtected(o,{processingMode:c},s){if(c&&c>=1.1&&o["@protected"]){for(const l of Object.keys(o))if(!r.Util.isReservedInternalKeyword(l)&&!r.Util.isPotentialKeyword(l)&&!r.Util.isTermProtected(o,l)){const d=o[l];d&&typeof d=="object"?"@protected"in o[l]||(o[l]=Object.assign(Object.assign({},o[l]),{"@protected":!0})):(o[l]={"@id":d,"@protected":!0},r.Util.isSimpleTermDefinitionPrefix(d,s)&&(o[l]=Object.assign(Object.assign({},o[l]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,c,s,l){for(const d of l??Object.keys(c))if(r.Util.isTermProtected(o,d)&&(typeof c[d]=="string"?c[d]={"@id":c[d],"@protected":!0}:c[d]=Object.assign(Object.assign({},c[d]),{"@protected":!0}),!r.Util.deepEqual(o[d],c[d])))throw new t.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(r.Util.getContextValueId(o[d]))} to ${JSON.stringify(r.Util.getContextValueId(c[d]))}`,t.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:c}){for(const s of Object.keys(o)){if(r.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new t.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(o[s])}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);const l=o[s],d=typeof l;if(r.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(l!==null&&d!=="string")throw new t.ErrorCoded(`Found an invalid @vocab IRI: ${l}`,t.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(l!==null&&d!=="string")throw new t.ErrorCoded(`Found an invalid @base IRI: ${o[s]}`,t.ERROR_CODES.INVALID_BASE_IRI);break;case"language":l!==null&&e.validateLanguage(l,!0,t.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(l!==null&&d!=="number")throw new t.ErrorCoded(`Found an invalid @version number: ${l}`,t.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":l!==null&&e.validateDirection(l,!0);break;case"propagate":if(c===1)throw new t.ErrorCoded(`Found an illegal @propagate keyword: ${l}`,t.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(l!==null&&d!=="boolean")throw new t.ErrorCoded(`Found an invalid @propagate value: ${l}`,t.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(r.Util.isValidKeyword(s)&&r.Util.isValidKeyword(r.Util.getContextValueId(l)))throw new t.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${r.Util.getContextValueId(l)}'`,t.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(l!==null)switch(d){case"string":if(r.Util.getPrefix(l,o)===s)throw new t.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.CYCLIC_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(l==="@type")throw new t.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${l}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(l)&&l!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new t.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${l}'`,t.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!r.Util.isCompactIri(s)&&!("@id"in l)&&(l["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new t.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(l)){const h=l[f];if(h)switch(f){case"@id":if(r.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new t.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(h==="@type")throw new t.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(h)&&h!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new t.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new t.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.getPrefix(h,o)===s)throw new t.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(l["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new t.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${h}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new t.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!r.Util.isValidIri(h)))throw new t.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${h}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&l["@id"]&&l["@id"]!==h)throw new t.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${h}' and '${l["@id"]}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in l)throw new t.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||r.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new t.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(h)}') in 1.0, must be only one of ${r.Util.CONTAINERS_1_0.join(", ")}`,t.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&l["@reverse"])throw new t.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(r.Util.CONTAINERS.indexOf(p)<0)throw new t.ErrorCoded(`Invalid term @container for '${s}' ('${p}'), must be one of ${r.Util.CONTAINERS.join(", ")}`,t.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":e.validateLanguage(h,!0,t.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":e.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new t.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in l)&&!r.Util.isValidIri(s))throw new t.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!l["@container"]||!l["@container"]["@index"])throw new t.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(r.Util.isPotentialKeyword(h)&&h!=="@nest")throw new t.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new t.ErrorCoded(`Found an invalid term value: '${s}': '${l}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,c,s){return typeof o=="string"||(s&&!("@base"in o)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(o["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!r.Util.isValidIri(o["@base"])&&(o["@base"]=(0,a.resolve)(o["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(o["@base"]=c.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,c){if(!r.Util.isValidIri(o))try{o=(0,a.resolve)(o,c)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,c,s){for(const l of s??Object.keys(o)){const d=o[l];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[l]:Object.assign({},o[l])});delete f[l]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new t.ErrorCoded(f.message,t.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[l]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,c={},s={}){const{baseIRI:l,parentContext:d,external:f,processingMode:h=e.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:b,minimalProcessing:_}=c,y=c.remoteContexts||{};if(Object.keys(y).length>=this.remoteContextsDepthLimit)throw new t.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(y),t.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!b&&d&&r.Util.hasProtectedTerms(d))throw new t.ErrorCoded("Illegal context nullification when terms are protected",t.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof o=="string"){const g=this.normalizeContextIri(o,l),m=this.getOverriddenLoad(g,c);if(m)return new n.JsonLdContextNormalized(m);const v=await this.parse(await this.load(g),Object.assign(Object.assign({},c),{baseIRI:g,external:!0,remoteContexts:Object.assign(Object.assign({},y),{[g]:!0})}));return this.applyBaseEntry(v.getContextRaw(),c,!0),v}else if(Array.isArray(o)){const g=[],m=await Promise.all(o.map((T,S)=>{if(typeof T=="string"){const x=this.normalizeContextIri(T,l);g[S]=x;const L=this.getOverriddenLoad(x,c);return L||this.load(x)}else return T}));if(_)return new n.JsonLdContextNormalized(m);const v=await m.reduce((T,S,x)=>T.then(L=>this.parse(S,Object.assign(Object.assign({},c),{baseIRI:g[x]||c.baseIRI,external:!!g[x]||c.external,parentContext:L.getContextRaw(),remoteContexts:g[x]?Object.assign(Object.assign({},y),{[g[x]]:!0}):y}),{skipValidation:x<m.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(v.getContextRaw(),c,!0),v}else if(typeof o=="object"){if("@context"in o)return await this.parse(o["@context"],c);if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,c,!0),this.containersToHash(o),_)return new n.JsonLdContextNormalized(o);let g={};if("@import"in o)if(h>=1.1){if(typeof o["@import"]!="string")throw new t.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],t.ERROR_CODES.INVALID_IMPORT_VALUE);g=await this.loadImportContext(this.normalizeContextIri(o["@import"],l)),delete o["@import"]}else throw new t.ErrorCoded("Context importing is not supported in JSON-LD 1.0",t.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(g,{processingMode:h},n.defaultExpandOptions);const m=Object.assign(g,o);this.idifyReverseTerms(m),this.normalize(m,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(m,{processingMode:h},n.defaultExpandOptions);const v=Object.keys(m),T=[];if(typeof d=="object")for(const x in d)x in m?T.push(x):m[x]=d[x];await this.parseInnerContexts(m,c,v);const S=new n.JsonLdContextNormalized(m);return(m&&m["@version"]||e.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?m["@vocab"]=d["@vocab"]+o["@vocab"]:(r.Util.isCompactIri(o["@vocab"])||o["@vocab"]in m)&&(m["@vocab"]=S.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,v),!b&&d&&h>=1.1&&this.validateKeywordRedefinitions(d,m,n.defaultExpandOptions,T),this.validateContext&&!s.skipValidation&&this.validate(m,{processingMode:h}),S}else throw new t.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,t.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const c=this.documentCache[o];if(c)return c;let s;try{s=await this.documentLoader.load(o)}catch(l){throw new t.ErrorCoded(`Failed to load remote context ${o}: ${l.message}`,t.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new t.ErrorCoded(`Missing @context in remote context at ${o}`,t.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=s["@context"]}getOverriddenLoad(o,c){if(o in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return o;throw new t.ErrorCoded("Detected a cyclic context inclusion of "+o,t.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let c=await this.load(o);if(typeof c!="object"||Array.isArray(c))throw new t.ErrorCoded("An imported context must be a single object: "+o,t.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new t.ErrorCoded("An imported context can not import another context: "+o,t.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}}return e.DEFAULT_PROCESSING_MODE=1.1,r_.ContextParser=e,r_}var ER={},XV;function Nhe(){return XV||(XV=1,Object.defineProperty(ER,"__esModule",{value:!0})),ER}var IR={},JV;function Rhe(){return JV||(JV=1,Object.defineProperty(IR,"__esModule",{value:!0})),IR}var KV;function WV(){return KV||(KV=1,function(a){var t=ws&&ws.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ws&&ws.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(xhe(),a),u(mA(),a),u(QV(),a),u(Nhe(),a),u(Rhe(),a),u(zV(),a),u(AR(),a)}(ws)),ws}var a_={},YV;function Fhe(){if(YV)return a_;YV=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.SeparatorType=void 0;let a=class{constructor(u){this.label=u}};return a_.SeparatorType=a,a.COMMA=new a(","),a.OBJECT_START=new a("{"),a.OBJECT_END=new a("}"),a.OBJECT_END_COMMA=new a("},"),a.ARRAY_START=new a("["),a.ARRAY_END=new a("]"),a.ARRAY_END_COMMA=new a("],"),a.GRAPH_FIELD_NONCOMPACT=new a('"@graph": ['),a.GRAPH_FIELD_COMPACT=new a('"@graph":['),a.CONTEXT_FIELD=new a('"@context":'),a_}var u_={},ZV;function eU(){if(ZV)return u_;ZV=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.Util=void 0;const a=WV();class t{static termToValue(n,r,e={compactIds:!1,useNativeTypes:!1}){switch(n.termType){case"NamedNode":const i=r.compactIri(n.value,e.vocab);return e.compactIds?i:{"@id":i};case"DefaultGraph":return e.compactIds?n.value:{"@id":n.value};case"BlankNode":const o=`_:${n.value}`;return e.compactIds?o:{"@id":o};case"Literal":if(n.datatype.value===t.RDF_JSON){let l;try{l=JSON.parse(n.value)}catch(d){throw new a.ErrorCoded("Invalid JSON literal: "+d.message,a.ERROR_CODES.INVALID_JSON_LITERAL)}return{"@value":l,"@type":"@json"}}if(e.rdfDirection==="i18n-datatype"&&n.datatype.value.startsWith(t.I18N)){const[l,d]=n.datatype.value.substr(t.I18N.length,n.datatype.value.length).split("_");return Object.assign(Object.assign({"@value":n.value},l?{"@language":l}:{}),d?{"@direction":d}:{})}const c=n.datatype.value===t.XSD_STRING,s={"@value":!c&&e.useNativeTypes?t.stringToNativeType(n.value,n.datatype.value):n.value};return n.language?Object.assign(Object.assign({},s),{"@language":n.language}):!c&&typeof s["@value"]=="string"?Object.assign(Object.assign({},s),{"@type":n.datatype.value}):s}}static stringToNativeType(n,r){if(r.startsWith(t.XSD))switch(r.substr(t.XSD.length)){case"boolean":if(n==="true")return!0;if(n==="false")return!1;throw new Error(`Invalid xsd:boolean value '${n}'`);case"integer":case"number":case"int":case"byte":case"long":const i=parseInt(n,10);if(isNaN(i))throw new Error(`Invalid xsd:integer value '${n}'`);return i;case"float":case"double":const o=parseFloat(n);if(isNaN(o))throw new Error(`Invalid xsd:float value '${n}'`);return o}return n}}return u_.Util=t,t.XSD="http://www.w3.org/2001/XMLSchema#",t.XSD_STRING=t.XSD+"string",t.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",t.RDF_TYPE=t.RDF+"type",t.RDF_JSON=t.RDF+"JSON",t.I18N="https://www.w3.org/ns/i18n#",u_}var tU;function Dhe(){if(tU)return t_;tU=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.JsonLdSerializer=void 0;const a=WV(),t=Fhe(),u=eU(),n=Mt();let r=class uae extends n.Transform{constructor(i={}){super({objectMode:!0}),this.indentation=0,this.options=i,this.options.baseIRI&&!this.options.context&&(this.options.context={"@base":this.options.baseIRI}),this.options.context?(this.originalContext=this.options.context,this.context=new a.ContextParser().parse(this.options.context,{baseIRI:this.options.baseIRI})):this.context=Promise.resolve(new a.JsonLdContextNormalized({}))}import(i){const o=new n.PassThrough({objectMode:!0});i.on("error",s=>c.emit("error",s)),i.on("data",s=>o.push(s)),i.on("end",()=>o.push(null));const c=o.pipe(new uae(this.options));return c}_transform(i,o,c){this.context.then(s=>{this.transformQuad(i,s),c()}).catch(c)}async list(i){const o=await this.context;return{"@list":i.map(c=>u.Util.termToValue(c,o,this.options))}}_flush(i){return this.opened||this.pushDocumentStart(),this.lastPredicate&&this.endPredicate(),this.lastSubject&&this.endSubject(),this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.endGraph(),this.endDocument(),i(null,null)}transformQuad(i,o){this.opened||this.pushDocumentStart();const c=this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.lastGraph.equals(i.subject);if(!c&&(!this.lastGraph||!i.graph.equals(this.lastGraph))){let s=i.graph.termType!=="DefaultGraph"&&this.lastSubject&&this.lastSubject.equals(i.graph);this.lastGraph&&(this.lastGraph.termType!=="DefaultGraph"?(this.endPredicate(),this.endSubject(),this.endGraph(!0),s=!1):s?(this.endPredicate(!0),this.lastSubject=null):(this.endPredicate(),this.endSubject(!0))),i.graph.termType!=="DefaultGraph"&&(s||this.pushId(i.graph,!0,o),this.pushSeparator(this.options.space?t.SeparatorType.GRAPH_FIELD_NONCOMPACT:t.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++),this.lastGraph=i.graph}(!this.lastSubject||!i.subject.equals(this.lastSubject))&&(c?(this.endPredicate(),this.endSubject(),this.indentation--,this.pushSeparator(t.SeparatorType.ARRAY_END_COMMA),this.lastGraph=i.graph):(this.lastSubject&&(this.endPredicate(),this.endSubject(!0)),this.pushId(i.subject,!0,o)),this.lastSubject=i.subject),(!this.lastPredicate||!i.predicate.equals(this.lastPredicate))&&(this.lastPredicate&&this.endPredicate(!0),this.pushPredicate(i.predicate,o)),this.pushObject(i.object,o)}pushDocumentStart(){this.opened=!0,this.originalContext&&!this.options.excludeContext?(this.pushSeparator(t.SeparatorType.OBJECT_START),this.indentation++,this.pushSeparator(t.SeparatorType.CONTEXT_FIELD),this.pushIndented(JSON.stringify(this.originalContext,null,this.options.space)+","),this.pushSeparator(this.options.space?t.SeparatorType.GRAPH_FIELD_NONCOMPACT:t.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++):(this.pushSeparator(t.SeparatorType.ARRAY_START),this.indentation++)}pushId(i,o,c){if(i.termType==="Quad")this.pushNestedQuad(i,!0,c);else{const s=i.termType==="BlankNode"?"_:"+i.value:c.compactIri(i.value,!1);o?this.pushSeparator(t.SeparatorType.OBJECT_START):(this.push(t.SeparatorType.OBJECT_START.label),this.options.space&&this.push(`
`)),this.indentation++,this.pushIndented(this.options.space?`"@id": "${s}",`:`"@id":"${s}",`)}}pushPredicate(i,o){let c=i.value;!this.options.useRdfType&&c===u.Util.RDF_TYPE&&(c="@type",this.objectOptions=Object.assign(Object.assign({},this.options),{compactIds:!0,vocab:!0}));const s=o.compactIri(c,!0);this.pushIndented(this.options.space?`"${s}": [`:`"${s}":[`),this.indentation++,this.lastPredicate=i}pushObject(i,o){if(this.hadObjectForPredicate?this.pushSeparator(t.SeparatorType.COMMA):this.hadObjectForPredicate=!0,i.termType==="Quad"){const s=this.lastSubject,l=this.lastPredicate;this.hadObjectForPredicate=!1,this.pushNestedQuad(i,!1,o),this.endSubject(!1),this.hadObjectForPredicate=!0,this.lastPredicate=l,this.lastSubject=s;return}let c;try{i["@list"]?c=i:c=u.Util.termToValue(i,o,this.objectOptions||this.options)}catch(s){return this.emit("error",s)}this.pushIndented(JSON.stringify(c,null,this.options.space))}pushNestedQuad(i,o,c){this.pushSeparator(t.SeparatorType.OBJECT_START),this.indentation++,this.pushIndented(this.options.space?'"@id": ':'"@id":',!1),i.graph.termType!=="DefaultGraph"&&this.emit("error",new Error(`Found a nested quad with the non-default graph: ${i.graph.value}`)),this.pushId(i.subject,!1,c),this.pushPredicate(i.predicate,c),this.pushObject(i.object,c),this.endPredicate(!1),this.endSubject(o)}endDocument(){this.opened=!1,this.originalContext&&!this.options.excludeContext?(this.indentation--,this.pushSeparator(t.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(t.SeparatorType.OBJECT_END)):(this.indentation--,this.pushSeparator(t.SeparatorType.ARRAY_END))}endPredicate(i){this.indentation--,this.pushSeparator(i?t.SeparatorType.ARRAY_END_COMMA:t.SeparatorType.ARRAY_END),this.hadObjectForPredicate=!1,this.objectOptions=null,this.lastPredicate=null}endSubject(i){this.indentation--,this.pushSeparator(i?t.SeparatorType.OBJECT_END_COMMA:t.SeparatorType.OBJECT_END),this.lastSubject=null}endGraph(i){this.indentation--,this.pushSeparator(t.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(i?t.SeparatorType.OBJECT_END_COMMA:t.SeparatorType.OBJECT_END),this.lastGraph=null}pushSeparator(i){this.pushIndented(i.label)}pushIndented(i,o=!0){const c=this.getIndentPrefix(),s=i.split(`
`).map(l=>c+l).join(`
`);this.push(s),this.options.space&&o&&this.push(`
`)}getIndentPrefix(){return this.options.space?this.options.space.repeat(this.indentation):""}};return t_.JsonLdSerializer=r,t_}var rU;function Phe(){return rU||(rU=1,function(a){var t=Ts&&Ts.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ts&&Ts.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Dhe(),a),u(eU(),a)}(Ts)),Ts}var nU;function jhe(){if(nU)return e_;nU=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.ActorRdfSerializeJsonLd=void 0;const a=wR(),t=Phe();let u=class extends a.ActorRdfSerializeFixedMediaTypes{constructor(r){super(r)}async runHandle(r,e,i){const o=new t.JsonLdSerializer({space:" ".repeat(this.jsonStringifyIndentSpaces)});let c;return"pipe"in r.quadStream?(r.quadStream.on("error",s=>o.emit("error",s)),c=r.quadStream.pipe(o)):c=o.import(r.quadStream),{data:c}}};return e_.ActorRdfSerializeJsonLd=u,e_}var iU;function Lhe(){return iU||(iU=1,function(a){var t=vs&&vs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=vs&&vs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(jhe(),a)}(vs)),vs}var Ss={},o_={},_A={},aU;function Mhe(){if(aU)return _A;aU=1,Object.defineProperty(_A,"__esModule",{value:!0});function a(u,n){return new Promise((r,e)=>{u.on("end",()=>r(n)),u.on("error",e)})}function t(u){const n=[];return a(u.on("data",r=>n.push(r)),n)}return _A.default=t,_A}var ki={},Aa={},s_={},c_={},uU;function Che(){if(uU)return c_;uU=1,Object.defineProperty(c_,"__esModule",{value:!0}),c_.fragment=void 0;function a(n){let r=n;(r.endsWith("/")||r.endsWith("#"))&&(r=r.slice(0,r.length-1));const e=[];r.lastIndexOf("/")>0&&e.push(r.lastIndexOf("/")),r.lastIndexOf("#")>0&&e.push(r.lastIndexOf("#"));const i=Math.max(...e);return r.slice(i+1)}function t(n){var r;const e=(r=n.split(/[^a-z0-9]+/ig).filter(i=>i!=="").map(i=>i[0].toUpperCase()+i.slice(1)).join("").match(/[a-z][a-z0-9]+/ig))===null||r===void 0?void 0:r[0];return typeof e>"u"?void 0:e[0].toLowerCase()+e.slice(1)}function u(n){let r=a(n);return r=r?t(r):void 0,r||"v"}return c_.fragment=u,c_}var Os={},As={},Xi={},gA={exports:{}},oU;function qhe(){return oU||(oU=1,function(a,t){var u=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Nt<"u"&&Nt,n=function(){function e(){this.fetch=!1,this.DOMException=u.DOMException}return e.prototype=u,new e}();(function(e){(function(i){var o=typeof e<"u"&&e||typeof self<"u"&&self||typeof Nt<"u"&&Nt||{},c={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function s($){return $&&DataView.prototype.isPrototypeOf($)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function($){return $&&l.indexOf(Object.prototype.toString.call($))>-1};function f($){if(typeof $!="string"&&($=String($)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test($)||$==="")throw new TypeError('Invalid character in header field name: "'+$+'"');return $.toLowerCase()}function h($){return typeof $!="string"&&($=String($)),$}function p($){var Q={next:function(){var ne=$.shift();return{done:ne===void 0,value:ne}}};return c.iterable&&(Q[Symbol.iterator]=function(){return Q}),Q}function b($){this.map={},$ instanceof b?$.forEach(function(Q,ne){this.append(ne,Q)},this):Array.isArray($)?$.forEach(function(Q){if(Q.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+Q.length);this.append(Q[0],Q[1])},this):$&&Object.getOwnPropertyNames($).forEach(function(Q){this.append(Q,$[Q])},this)}b.prototype.append=function($,Q){$=f($),Q=h(Q);var ne=this.map[$];this.map[$]=ne?ne+", "+Q:Q},b.prototype.delete=function($){delete this.map[f($)]},b.prototype.get=function($){return $=f($),this.has($)?this.map[$]:null},b.prototype.has=function($){return this.map.hasOwnProperty(f($))},b.prototype.set=function($,Q){this.map[f($)]=h(Q)},b.prototype.forEach=function($,Q){for(var ne in this.map)this.map.hasOwnProperty(ne)&&$.call(Q,this.map[ne],ne,this)},b.prototype.keys=function(){var $=[];return this.forEach(function(Q,ne){$.push(ne)}),p($)},b.prototype.values=function(){var $=[];return this.forEach(function(Q){$.push(Q)}),p($)},b.prototype.entries=function(){var $=[];return this.forEach(function(Q,ne){$.push([ne,Q])}),p($)},c.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function _($){if(!$._noBody){if($.bodyUsed)return Promise.reject(new TypeError("Already read"));$.bodyUsed=!0}}function y($){return new Promise(function(Q,ne){$.onload=function(){Q($.result)},$.onerror=function(){ne($.error)}})}function g($){var Q=new FileReader,ne=y(Q);return Q.readAsArrayBuffer($),ne}function m($){var Q=new FileReader,ne=y(Q),ie=/charset=([A-Za-z0-9_-]+)/.exec($.type),fe=ie?ie[1]:"utf-8";return Q.readAsText($,fe),ne}function v($){for(var Q=new Uint8Array($),ne=new Array(Q.length),ie=0;ie<Q.length;ie++)ne[ie]=String.fromCharCode(Q[ie]);return ne.join("")}function T($){if($.slice)return $.slice(0);var Q=new Uint8Array($.byteLength);return Q.set(new Uint8Array($)),Q.buffer}function S(){return this.bodyUsed=!1,this._initBody=function($){this.bodyUsed=this.bodyUsed,this._bodyInit=$,$?typeof $=="string"?this._bodyText=$:c.blob&&Blob.prototype.isPrototypeOf($)?this._bodyBlob=$:c.formData&&FormData.prototype.isPrototypeOf($)?this._bodyFormData=$:c.searchParams&&URLSearchParams.prototype.isPrototypeOf($)?this._bodyText=$.toString():c.arrayBuffer&&c.blob&&s($)?(this._bodyArrayBuffer=T($.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf($)||d($))?this._bodyArrayBuffer=T($):this._bodyText=$=Object.prototype.toString.call($):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof $=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf($)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var $=_(this);if($)return $;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var $=_(this);return $||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(g);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var $=_(this);if($)return $;if(this._bodyBlob)return m(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(v(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function L($){var Q=$.toUpperCase();return x.indexOf(Q)>-1?Q:$}function O($,Q){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');Q=Q||{};var ne=Q.body;if($ instanceof O){if($.bodyUsed)throw new TypeError("Already read");this.url=$.url,this.credentials=$.credentials,Q.headers||(this.headers=new b($.headers)),this.method=$.method,this.mode=$.mode,this.signal=$.signal,!ne&&$._bodyInit!=null&&(ne=$._bodyInit,$.bodyUsed=!0)}else this.url=String($);if(this.credentials=Q.credentials||this.credentials||"same-origin",(Q.headers||!this.headers)&&(this.headers=new b(Q.headers)),this.method=L(Q.method||this.method||"GET"),this.mode=Q.mode||this.mode||null,this.signal=Q.signal||this.signal||function(){if("AbortController"in o){var J=new AbortController;return J.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ne)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(ne),(this.method==="GET"||this.method==="HEAD")&&(Q.cache==="no-store"||Q.cache==="no-cache")){var ie=/([?&])_=[^&]*/;if(ie.test(this.url))this.url=this.url.replace(ie,"$1_="+new Date().getTime());else{var fe=/\?/;this.url+=(fe.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function w($){var Q=new FormData;return $.trim().split("&").forEach(function(ne){if(ne){var ie=ne.split("="),fe=ie.shift().replace(/\+/g," "),J=ie.join("=").replace(/\+/g," ");Q.append(decodeURIComponent(fe),decodeURIComponent(J))}}),Q}function A($){var Q=new b,ne=$.replace(/\r?\n[\t ]+/g," ");return ne.split("\r").map(function(ie){return ie.indexOf(`
`)===0?ie.substr(1,ie.length):ie}).forEach(function(ie){var fe=ie.split(":"),J=fe.shift().trim();if(J){var _e=fe.join(":").trim();try{Q.append(J,_e)}catch(Fe){console.warn("Response "+Fe.message)}}}),Q}S.call(O.prototype);function E($,Q){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(Q||(Q={}),this.type="default",this.status=Q.status===void 0?200:Q.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=Q.statusText===void 0?"":""+Q.statusText,this.headers=new b(Q.headers),this.url=Q.url||"",this._initBody($)}S.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},E.error=function(){var $=new E(null,{status:200,statusText:""});return $.ok=!1,$.status=0,$.type="error",$};var R=[301,302,303,307,308];E.redirect=function($,Q){if(R.indexOf(Q)===-1)throw new RangeError("Invalid status code");return new E(null,{status:Q,headers:{location:$}})},i.DOMException=o.DOMException;try{new i.DOMException}catch{i.DOMException=function(Q,ne){this.message=Q,this.name=ne;var ie=Error(Q);this.stack=ie.stack},i.DOMException.prototype=Object.create(Error.prototype),i.DOMException.prototype.constructor=i.DOMException}function V($,Q){return new Promise(function(ne,ie){var fe=new O($,Q);if(fe.signal&&fe.signal.aborted)return ie(new i.DOMException("Aborted","AbortError"));var J=new XMLHttpRequest;function _e(){J.abort()}J.onload=function(){var te={statusText:J.statusText,headers:A(J.getAllResponseHeaders()||"")};fe.url.indexOf("file://")===0&&(J.status<200||J.status>599)?te.status=200:te.status=J.status,te.url="responseURL"in J?J.responseURL:te.headers.get("X-Request-URL");var Le="response"in J?J.response:J.responseText;setTimeout(function(){ne(new E(Le,te))},0)},J.onerror=function(){setTimeout(function(){ie(new TypeError("Network request failed"))},0)},J.ontimeout=function(){setTimeout(function(){ie(new TypeError("Network request timed out"))},0)},J.onabort=function(){setTimeout(function(){ie(new i.DOMException("Aborted","AbortError"))},0)};function Fe(te){try{return te===""&&o.location.href?o.location.href:te}catch{return te}}if(J.open(fe.method,Fe(fe.url),!0),fe.credentials==="include"?J.withCredentials=!0:fe.credentials==="omit"&&(J.withCredentials=!1),"responseType"in J&&(c.blob?J.responseType="blob":c.arrayBuffer&&(J.responseType="arraybuffer")),Q&&typeof Q.headers=="object"&&!(Q.headers instanceof b||o.Headers&&Q.headers instanceof o.Headers)){var ve=[];Object.getOwnPropertyNames(Q.headers).forEach(function(te){ve.push(f(te)),J.setRequestHeader(te,h(Q.headers[te]))}),fe.headers.forEach(function(te,Le){ve.indexOf(Le)===-1&&J.setRequestHeader(Le,te)})}else fe.headers.forEach(function(te,Le){J.setRequestHeader(Le,te)});fe.signal&&(fe.signal.addEventListener("abort",_e),J.onreadystatechange=function(){J.readyState===4&&fe.signal.removeEventListener("abort",_e)}),J.send(typeof fe._bodyInit>"u"?null:fe._bodyInit)})}return V.polyfill=!0,o.fetch||(o.fetch=V,o.Headers=b,o.Request=O,o.Response=E),i.Headers=b,i.Request=O,i.Response=E,i.fetch=V,Object.defineProperty(i,"__esModule",{value:!0}),i})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var r=u.fetch?u:n;t=r.fetch,t.default=r.fetch,t.fetch=r.fetch,t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response,a.exports=t}(gA,gA.exports)),gA.exports}var sU;function xR(){if(sU)return Xi;sU=1;var a=Xi&&Xi.__awaiter||function(r,e,i,o){function c(s){return s instanceof i?s:new i(function(l){l(s)})}return new(i||(i=Promise))(function(s,l){function d(p){try{h(o.next(p))}catch(b){l(b)}}function f(p){try{h(o.throw(p))}catch(b){l(b)}}function h(p){p.done?s(p.value):c(p.value).then(d,f)}h((o=o.apply(r,e||[])).next())})};Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.fetchContext=Xi.fetchJson=void 0;const t=qhe();function u(r,e){var i;return a(this,void 0,void 0,function*(){return(yield((i=e==null?void 0:e.fetch)!==null&&i!==void 0?i:t.fetch)(r)).json()})}Xi.fetchJson=u;function n(r,e){return a(this,void 0,void 0,function*(){return(yield u(r,e))["@context"]})}return Xi.fetchContext=n,Xi}var cU;function Bhe(){if(cU)return As;cU=1;var a=As&&As.__awaiter||function(n,r,e,i){function o(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function l(h){try{f(i.next(h))}catch(p){s(p)}}function d(h){try{f(i.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):o(h.value).then(l,d)}f((i=i.apply(n,r||[])).next())})};Object.defineProperty(As,"__esModule",{value:!0}),As.lookupUri=void 0;const t=xR();function u(n,r){return a(this,void 0,void 0,function*(){const e=(yield(0,t.fetchContext)(`https://prefix.cc/${n}.file.jsonld`,r))[n];if(typeof e!="string")throw new Error(`Expected uri to be a string, received: ${e} of type ${typeof e}`);return e})}return As.lookupUri=u,As}var Es={},lU;function $he(){if(lU)return Es;lU=1;var a=Es&&Es.__awaiter||function(n,r,e,i){function o(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function l(h){try{f(i.next(h))}catch(p){s(p)}}function d(h){try{f(i.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):o(h.value).then(l,d)}f((i=i.apply(n,r||[])).next())})};Object.defineProperty(Es,"__esModule",{value:!0}),Es.lookupPrefix=void 0;const t=xR();function u(n,r){return a(this,void 0,void 0,function*(){const e=new URL("https://prefix.cc/reverse");e.searchParams.append("uri",n),e.searchParams.append("format","jsonld");const i=Object.keys(yield(0,t.fetchContext)(e,r));if(i.length===0)throw new Error("No prefixes returned");return i[0]})}return Es.lookupPrefix=u,Es}var Is={},dU;function Vhe(){if(dU)return Is;dU=1;var a=Is&&Is.__awaiter||function(n,r,e,i){function o(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function l(h){try{f(i.next(h))}catch(p){s(p)}}function d(h){try{f(i.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):o(h.value).then(l,d)}f((i=i.apply(n,r||[])).next())})};Object.defineProperty(Is,"__esModule",{value:!0}),Is.lookupAllPrefixes=void 0;const t=xR();function u(n){return a(this,void 0,void 0,function*(){return(0,t.fetchContext)("https://prefix.cc/context",n)})}return Is.lookupAllPrefixes=u,Is}var fU;function hU(){return fU||(fU=1,function(a){var t=Os&&Os.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Os&&Os.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Bhe(),a),u($he(),a),u(Vhe(),a)}(Os)),Os}var pU;function Uhe(){return pU||(pU=1,function(a){var t=s_&&s_.__awaiter||function(o,c,s,l){function d(f){return f instanceof s?f:new s(function(h){h(f)})}return new(s||(s=Promise))(function(f,h){function p(y){try{_(l.next(y))}catch(g){h(g)}}function b(y){try{_(l.throw(y))}catch(g){h(g)}}function _(y){y.done?f(y.value):d(y.value).then(p,b)}_((l=l.apply(o,c||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0}),a.lookupAllPrefixes=a.prefixToUri=a.uriToPrefix=void 0;const u=Che(),n=hU();function r(o,c){return t(this,void 0,void 0,function*(){let s;try{s=yield(0,n.lookupPrefix)(o,c)}catch{c!=null&&c.mintOnUnknown&&(s=(0,u.fragment)(o).slice(0,4))}if(typeof s<"u"&&typeof(c==null?void 0:c.existingPrefixes)=="object"&&s in c.existingPrefixes){let l=0;for(;`${s}${l}`in c.existingPrefixes;)l+=1;s=`${s}${l}`}return s})}a.uriToPrefix=r;function e(o,c){return t(this,void 0,void 0,function*(){try{return yield(0,n.lookupUri)(o,c)}catch{return}})}a.prefixToUri=e;var i=hU();Object.defineProperty(a,"lookupAllPrefixes",{enumerable:!0,get:function(){return i.lookupAllPrefixes}})}(s_)),s_}var l_={},yU;function Qhe(){if(yU)return l_;yU=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.getShaclName=void 0;function a(t){if(t.termType!=="NamedNode"||!t.value.startsWith("http://www.w3.org/ns/shacl#"))throw new Error(`Term ${t.value} is not part of the SHACL namespace`);return t.value.slice(27)}return l_.getShaclName=a,l_}var vA={},bU;function Hhe(){return bU||(bU=1,Object.defineProperty(vA,"__esModule",{value:!0}),vA.default={deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,uniqueLang:!0,equals:!0,disjoint:!0,lessThan:!0,lessThanOrEquals:!0,qualifiedValueShape:!0,qualifiedMinCount:!0,qualifiedMaxCount:!0,qualifiedValueShapesDisjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0,node:!0}),vA}var TA={},mU;function Ghe(){return mU||(mU=1,Object.defineProperty(TA,"__esModule",{value:!0}),TA.default={owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"}),TA}var wA={},_U;function zhe(){return _U||(_U=1,Object.defineProperty(wA,"__esModule",{value:!0}),wA.default={targetNode:!0,targetObjectsOf:!0,targetSubjectsOf:!0,deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,equals:!0,disjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0}),wA}var gU;function khe(){if(gU)return Aa;gU=1;var a=Aa&&Aa.__awaiter||function(h,p,b,_){function y(g){return g instanceof b?g:new b(function(m){m(g)})}return new(b||(b=Promise))(function(g,m){function v(x){try{S(_.next(x))}catch(L){m(L)}}function T(x){try{S(_.throw(x))}catch(L){m(L)}}function S(x){x.done?g(x.value):y(x.value).then(v,T)}S((_=_.apply(h,p||[])).next())})},t=Aa&&Aa.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Aa,"__esModule",{value:!0});const u=Sa,n=Uhe(),r=J1(),e=Qhe(),i=t(Hhe()),o=t(Ghe()),c=t(zhe());function s(h){var p;return(p=/^[^]*[#/]/.exec(h))===null||p===void 0?void 0:p[0]}const l={"http://www.w3.org/1999/02/22-rdf-syntax-ns#":"rdf","http://www.w3.org/2000/01/rdf-schema#":"rdfs","http://www.w3.org/ns/shacl#":"sh","http://www.w3.org/2001/XMLSchema#":"xsd"},d={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"};class f{constructor(p,b,_={},y=void 0,g=!0,m=!1,v,T=!1){this.store=p,this.base=y,this.errorOnExtraQuads=g,this.mintUnspecifiedPrefixes=m,this.fetch=v,this.extendedSyntax=T,this.prefixes={},this.prefixRev={};for(const S of Object.keys(_)){const x=_[S],L=typeof x=="string"?x:x.value;!(L in l)&&!(S in d)&&(this.prefixRev[L]=S,this.prefixes[S]=L)}this.writer=b}write(){return a(this,void 0,void 0,function*(){const p=this.store.getQuads(null,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/2002/07/owl#Ontology",null);if(p.length===1&&p[0].subject.termType==="NamedNode"){const _=p[0].subject;this.store.removeQuads(p),_.equals(new u.NamedNode("urn:x-base:default"))||this.writer.add(`BASE ${(0,r.termToString)(_)}`),yield this.writeImports(_)}else throw new Error("Base expected");if(this.mintUnspecifiedPrefixes){const _=new Set;for(const g of[...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)])if(g.termType==="NamedNode"){const m=s(g.value);m&&!(m in this.prefixRev)&&!(m in l)&&_.add(m)}const y=Object.assign(Object.assign({},this.prefixes),d);yield Promise.all([..._].map(g=>(0,n.uriToPrefix)(g,{fetch:this.fetch,mintOnUnknown:!0,existingPrefixes:y}).then(m=>{this.prefixes[m]=g,y[m]=g,this.prefixRev[g]=m})))}const b=new Set([...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)].filter(_=>_.termType==="NamedNode").map(_=>s(_.value)).filter(_=>typeof _=="string"));for(const _ in this.prefixRev)b.has(_)||(delete this.prefixes[this.prefixRev[_]],delete this.prefixRev[_]);if(yield this.writePrefixes(),this.prefixes=Object.assign(Object.assign({},this.prefixes),d),this.prefixRev=Object.assign(Object.assign({},this.prefixRev),l),this.writer.newLine(),yield this.writeShapes(),this.extendedSyntax){const _=this.store.getSubjects(null,null,null);_.length>0&&this.writer.newLine(1);for(const y of _)this.writer.add(yield this.termToString(y,!0,!0)),this.writer.add(" "),this.writer.indent(),yield this.writeTurtlePredicates(y),this.writer.deindent();_.length>0&&(this.writer.add(" ."),this.writer.newLine())}if(this.errorOnExtraQuads&&this.store.size>0)throw new Error(`Dataset contains quads that cannot be written in SHACLC [
${new u.Writer({prefixes:this.prefixes}).quadsToString(this.store.getQuads(null,null,null,null))}]`);this.writer.end()})}writeImports(p){return a(this,void 0,void 0,function*(){const b=this.store.getObjectsOnce(p,new u.NamedNode("http://www.w3.org/2002/07/owl#imports"),null);if(b.length>0)for(const _ of b)this.writer.add(`IMPORTS <${_.value}>`,!0)})}writePrefixes(){return a(this,void 0,void 0,function*(){const p=Object.keys(this.prefixes).filter(b=>!(b in o.default)).sort();if(p.length>0)for(const b of p)this.writer.add(`PREFIX ${b}: <${this.prefixes[b]}>`,!0)})}termToString(p,b=!1,_=!1){return a(this,void 0,void 0,function*(){try{if(b)throw new Error("Shacl name disabled");return(0,e.getShaclName)(p)}catch{}if(p.termType==="NamedNode"){const y=s(p.value);return y&&y in this.prefixRev&&y in this.prefixRev?`${this.prefixRev[y]}:${p.value.slice(y.length)}`:(0,r.termToString)(p)}if(p.termType==="Literal")return p.datatypeString==="http://www.w3.org/2001/XMLSchema#integer"||p.datatypeString==="http://www.w3.org/2001/XMLSchema#boolean"?p.value:(0,r.termToString)(p);throw p.termType==="BlankNode"&&_&&(0,r.termToString)(p),new Error(`Invalid term type for extra statement ${p.value} (${p.termType})`)})}writeShapes(){return a(this,void 0,void 0,function*(){for(const p of this.store.getSubjectsOnce(new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new u.NamedNode("http://www.w3.org/ns/shacl#NodeShape"),null)){this.store.getQuadsOnce(p,new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new u.NamedNode("http://www.w3.org/2000/01/rdf-schema#Class"),null).length>0?this.writer.add("shapeClass "):this.writer.add("shape "),this.writer.add(yield this.termToString(p)),this.writer.add(" ");const b=this.store.getObjectsOnce(p,new u.NamedNode("http://www.w3.org/ns/shacl#targetClass"),null);if(b.length>0){this.writer.add("-> ");for(const y of b)y.termType==="NamedNode"?this.writer.add(yield this.termToString(y)):(this.writer.add("!"),this.writer.add(yield this.termToString(this.singleObject(y,new u.NamedNode("http://www.w3.org/ns/shacl#not"),!0)))),this.writer.add(" ")}const _=this.store.getPredicates(p,null,null).filter(y=>[new u.NamedNode("http://www.w3.org/ns/shacl#targetClass"),new u.NamedNode("http://www.w3.org/ns/shacl#property"),new u.NamedNode("http://www.w3.org/ns/shacl#or"),...Object.keys(c.default).map(g=>new u.NamedNode("http://www.w3.org/ns/shacl#"+g))].every(g=>!y.equals(g)));_.length>0&&(this.writer.add(";"),this.writer.indent(),this.writer.newLine(1)),this.extendedSyntax&&(yield this.writeGivenTurtlePredicates(p,_)),_.length>0&&(this.writer.add(" "),this.writer.deindent()),yield this.writeShapeBody(p,!1)}})}getSingleProperty(p,b){let _=[p];try{let y=(0,e.getShaclName)(p.predicate),g="pred";if(y==="not"){const m=this.store.getQuadsOnce(p.object,null,null,null);if(_=_.concat(m),m.length!==1)throw new Error("Can only handle having one predicate of 'not'");[p]=m,y=(0,e.getShaclName)(p.predicate),g="not"}if(!(y in b))throw new Error(`${y} is not allowed`);return{name:y,type:g,object:p.object}}catch{this.store.addQuads(_)}}singleLayerPropertiesList(p,b){const _=[];for(const y of this.store.getQuadsOnce(p,null,null,null)){const g=this.getSingleProperty(y,b);g&&_.push(g)}return _}expectOneProperty(p,b){const _=this.store.getQuadsOnce(p,null,null,null);if(_.length===1){const y=this.getSingleProperty(_[0],b);if(y)return y}this.store.addQuads(_)}orProperties(p,b){const _=[];for(const y of this.store.getQuadsOnce(p,new u.NamedNode("http://www.w3.org/ns/shacl#or"),null,null)){const g=[];for(const m of this.getList(y.object)){const v=this.expectOneProperty(m,b);if(!v)throw this.store.addQuad(y),new Error("Each entry of the 'or' statement must declare exactly one property");g.push(v)}_.push(g)}return _}getList(p){let b=p;const _=[];for(;!b.equals(new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));)_.push(this.singleObject(b,new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),!0)),b=this.singleObject(b,new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),!0);return _}writeIriLiteralOrArray(p){return a(this,void 0,void 0,function*(){if(p.termType==="BlankNode"){this.writer.add("[");let b=!0;for(const _ of this.getList(p))b?b=!1:this.writer.add(" "),this.writer.add(yield this.termToString(_));this.writer.add("]")}else this.writer.add(yield this.termToString(p))})}singleObject(p,b,_){var y;return(y=this.singleQuad(p,b,_))===null||y===void 0?void 0:y.object}singleQuad(p,b,_=!1){const y=this.store.getQuadsOnce(p,b,null,null);if(_&&y.length!==1)throw this.store.addQuads(y),new Error(`The subject and predicate ${p==null?void 0:p.value} ${b==null?void 0:b.value} must have exactly one object. Instead has ${y.length}`);if(y.length>1)throw this.store.addQuads(y),new Error(`The subject and predicate ${p==null?void 0:p.value} ${b==null?void 0:b.value} can have at most one object. Instead has ${y.length}`);return y.length===1?y[0]:void 0}writeAssigment({name:p,type:b,object:_}){return a(this,void 0,void 0,function*(){b==="not"&&this.writer.add("!"),this.writer.add(p),this.writer.add("="),yield this.writeIriLiteralOrArray(_)})}writeAtom({name:p,type:b,object:_}){return a(this,void 0,void 0,function*(){switch(b==="not"&&this.writer.add("!"),p){case"node":{if(_.termType==="NamedNode")this.writer.add(`@${yield this.termToString(_)}`);else if(_.termType==="BlankNode")yield this.writeShapeBody(_);else throw new Error("Invalid nested shape, must be blank node or IRI");return}case"nodeKind":{this.writer.add((0,e.getShaclName)(_));return}case"class":{this.writer.add(yield this.termToString(_));return}case"datatype":{this.writer.add(yield this.termToString(_));return}default:this.writer.add(p),this.writer.add("="),yield this.writeIriLiteralOrArray(_)}})}writeAssigments(p,b=" ",_=!0,y){return a(this,void 0,void 0,function*(){for(const g of p)_?_=!1:this.writer.add(b),y?yield this.writeAtom(g):yield this.writeAssigment(g)})}writeParams(p,b=!0,_,y=!1,g=!1){return a(this,void 0,void 0,function*(){const m=this.orProperties(p,_),v=this.singleLayerPropertiesList(p,_);g&&(m.length>0||v.length>0)&&this.writer.newLine(1);for(const T of m)b?b=!1:this.writer.add(" "),yield this.writeAssigments(T,"|",!0,y);yield this.writeAssigments(v," ",b,y),g&&(m.length>0||v.length>0)&&this.writer.add(" .")})}writeShapeBody(p,b=!0){return a(this,void 0,void 0,function*(){this.writer.add("{").indent();const _=this.store.getObjectsOnce(p,new u.NamedNode("http://www.w3.org/ns/shacl#property"),null);yield this.writeParams(p,!0,c.default,!1,!0);for(const y of _)this.writer.newLine(1),yield this.writeProperty(y);this.writer.deindent().newLine(1),b?this.writer.add("} ."):this.writer.add("}").newLine(1)})}writeProperty(p){return a(this,void 0,void 0,function*(){yield this.writePath(this.singleObject(p,new u.NamedNode("http://www.w3.org/ns/shacl#path"),!0));const b=this.singleObject(p,new u.NamedNode("http://www.w3.org/ns/shacl#minCount")),_=this.singleObject(p,new u.NamedNode("http://www.w3.org/ns/shacl#maxCount")),y=this.singleObject(p,new u.NamedNode("http://www.w3.org/ns/shacl#nodeKind")),g=this.singleObject(p,new u.NamedNode("http://www.w3.org/ns/shacl#class")),m=this.singleObject(p,new u.NamedNode("http://www.w3.org/ns/shacl#datatype")),v=this.store.getObjectsOnce(p,new u.NamedNode("http://www.w3.org/ns/shacl#node"),null);if(y&&(this.writer.add(" "),this.writer.add((0,e.getShaclName)(y))),g&&(this.writer.add(" "),this.writer.add(yield this.termToString(g))),m&&(this.writer.add(" "),this.writer.add(yield this.termToString(m))),b!==void 0||_!==void 0){if(this.writer.add(" ["),b){if(b.termType!=="Literal"||b.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid min value, must me an integer literal");this.writer.add(b.value)}else this.writer.add("0");if(this.writer.add(".."),_){if(_.termType!=="Literal"||_.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid max value, must me an integer literal");this.store.removeMatches(p,new u.NamedNode("http://www.w3.org/ns/shacl#maxCount"),void 0,void 0),this.writer.add(_.value)}else this.writer.add("*");this.writer.add("]")}yield this.writeParams(p,!1,i.default,!0);const T=[];for(const S of v)if(S.termType==="NamedNode")this.writer.add(" "),this.writer.add(`@${yield this.termToString(S)}`);else if(S.termType==="BlankNode")T.push(S);else throw new Error("Invalid nested shape, must be blank node or IRI");for(const S of T)this.writer.add(" "),yield this.writeShapeBody(S);this.extendedSyntax&&this.store.getQuads(p,null,null,null).length>0&&(this.writer.add(" %"),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(p),this.writer.deindent(),this.writer.newLine(1),this.writer.add("%")),T.length===0&&this.writer.add(" .")})}writeTurtlePredicates(p){return a(this,void 0,void 0,function*(){return this.writeGivenTurtlePredicates(p,this.store.getPredicates(p,null,null))})}writeGivenTurtlePredicates(p,b){return a(this,void 0,void 0,function*(){let _=!1;if(b.some(y=>y.equals(u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")))){const y=this.store.getObjectsOnce(p,u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),null);y.length>0&&(_=!0,this.writer.add("a "),yield this.writeTurtleObjects(y))}for(const y of b)y.equals(u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))||(_?(this.writer.add(" ;"),this.writer.newLine(1)):_=!0,this.writer.add(yield this.termToString(y,!0)),this.writer.add(" "),yield this.writeTurtleObjects(this.store.getObjectsOnce(p,y,null)))})}writeTurtleObjects(p){return a(this,void 0,void 0,function*(){const b=[],_=[];for(const g of p)g.termType==="BlankNode"&&[...this.store.match(null,null,g),...this.store.match(null,g,null)].length===0?b.push(g):_.push(g);this.writer.add((yield Promise.all(_.map(g=>this.termToString(g,!0,!0)))).join(", "));let y=_.length>0;if(b.length>0)for(const g of b)y?this.writer.add(", "):y=!0,(yield this.writeList(g))||(this.writer.add("["),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(g),this.writer.deindent(),this.writer.newLine(1),this.writer.add("]"))})}writeList(p){return a(this,void 0,void 0,function*(){let b=p;const _=[],y=[];for(;!b.equals(u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));){const m=this.store.getQuadsOnce(b,u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),null,null),v=this.store.getQuadsOnce(b,u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),null,null);if(y.push(...m,...v),m.length!==1||v.length!==1||this.store.getQuads(b,null,null,null).length!==0)return this.store.addQuads(y),!1;_.push(m[0].object),b=v[0].object}let g=!1;this.writer.add("(");for(const m of _)g?this.writer.add(" "):g=!0,yield this.writeTurtleObjects([m]);return this.writer.add(")"),!0})}writePath(p,b=!1){return a(this,void 0,void 0,function*(){if(p.termType==="NamedNode")this.writer.add(yield this.termToString(p));else if(p.termType==="BlankNode"){const _=this.store.getQuadsOnce(p,null,null,null);if(_.length===1){const{predicate:y,object:g}=_[0];switch(y.value){case"http://www.w3.org/ns/shacl#inversePath":this.writer.add("^"),yield this.writePath(g,!0);return;case"http://www.w3.org/ns/shacl#alternativePath":{const m=this.getList(g);if(m.length===0)throw new Error("Invalid Alternative Path - no options");if(m.length===1)yield this.writePath(m[0]);else{b&&this.writer.add("(");let v=!0;for(const T of m)v?v=!1:this.writer.add("|"),yield this.writePath(T,!0);b&&this.writer.add(")")}return}case"http://www.w3.org/ns/shacl#zeroOrMorePath":yield this.writePath(g,!0),this.writer.add("*");return;case"http://www.w3.org/ns/shacl#oneOrMorePath":yield this.writePath(g,!0),this.writer.add("+");return;case"http://www.w3.org/ns/shacl#zeroOrOnePath":yield this.writePath(g,!0),this.writer.add("?");return;default:throw new Error(`Invalid path type ${p.value}`)}}else{this.store.addQuads(_);const y=this.getList(p);if(y.length===0)throw new Error("Invalid Path");{b&&this.writer.add("(");let g=!0;for(const m of y)g?g=!1:this.writer.add("/"),yield this.writePath(m,!0);b&&this.writer.add(")")}}}else throw new Error("Path should be named node or blank node")})}}return Aa.default=f,Aa}var SA={},vU;function Xhe(){if(vU)return SA;vU=1,Object.defineProperty(SA,"__esModule",{value:!0});class a{constructor(u){this.indents=0,this.write=u.write,this.end=u.end}indent(){return this.indents+=1,this}deindent(){if(this.indents<1)throw new Error(`Trying to deindent when indent is only ${this.indents}`);return this.indents-=1,this}add(u,n=!1){return this.write(n?`
${"	".repeat(this.indents)}${u}`:u,"utf-8"),this}newLine(u=2){return this.write(`
`.repeat(u)+"	".repeat(this.indents),"utf-8"),this}}return SA.default=a,SA}var OA={},TU;function Jhe(){if(TU)return OA;TU=1,Object.defineProperty(OA,"__esModule",{value:!0});const a=Sa;class t extends a.Store{getQuadsOnce(n,r,e,i){const o=this.getQuads(n,r,e,i);return this.removeQuads(o),o}getSubjectsOnce(n,r,e){return this.getQuadsOnce(null,n,r,e).map(i=>i.subject)}getObjectsOnce(n,r,e){return this.getQuadsOnce(n,r,null,e).map(i=>i.object)}}return OA.default=t,OA}var wU;function Khe(){if(wU)return ki;wU=1;var a=ki&&ki.__awaiter||function(o,c,s,l){function d(f){return f instanceof s?f:new s(function(h){h(f)})}return new(s||(s=Promise))(function(f,h){function p(y){try{_(l.next(y))}catch(g){h(g)}}function b(y){try{_(l.throw(y))}catch(g){h(g)}}function _(y){y.done?f(y.value):d(y.value).then(p,b)}_((l=l.apply(o,c||[])).next())})},t=ki&&ki.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ki,"__esModule",{value:!0}),ki.write=void 0;const u=Sa,n=t(khe()),r=t(Xhe()),e=t(Jhe());function i(o,c){return a(this,void 0,void 0,function*(){return new Promise((s,l)=>a(this,void 0,void 0,function*(){try{let d="";const f=new e.default(o),h=f.getGraphs(null,null,null);if(h.length>1)throw new Error("More than one graph found - can serialize in the default graph");if(h.length===1&&!h[0].equals(u.DataFactory.defaultGraph()))throw new Error(`Expected all triples to be in the default graph, instead triples were in ${h[0].value}`);const p=new r.default({write:_=>{d+=_},end:()=>{let _=f.getQuads(null,null,null,null);_.length===0&&(_=void 0),s({text:d,extraQuads:_})}});yield new n.default(f,p,c==null?void 0:c.prefixes,void 0,(c==null?void 0:c.errorOnUnused)!==!1,c==null?void 0:c.mintPrefixes,c==null?void 0:c.fetch,c==null?void 0:c.extendedSyntax).write()}catch(d){l(d)}}))})}return ki.write=i,ki}var SU;function Whe(){if(SU)return o_;SU=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.ActorRdfSerializeShaclc=void 0;const a=wR(),t=Mhe(),u=Mt(),n=Khe();let r=class extends a.ActorRdfSerializeFixedMediaTypes{constructor(i){super(i)}async runHandle(i,o){const c=new u.Readable;c._read=()=>{};try{const s={};i.quadStream.on("prefix",(d,f)=>{s[d]=f});const{text:l}=await(0,n.write)(await(0,t.default)(i.quadStream),{errorOnUnused:!0,extendedSyntax:o==="text/shaclc-ext",prefixes:s});c.push(l),c.push(null)}catch(s){c._read=()=>{c.emit("error",s)}}return{data:c,triples:!0}}};return o_.ActorRdfSerializeShaclc=r,o_}var OU;function Yhe(){return OU||(OU=1,function(a){var t=Ss&&Ss.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ss&&Ss.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Whe(),a)}(Ss)),Ss}var xs={},d_={},Ns={},f_={},AU;function EU(){if(AU)return f_;AU=1,Object.defineProperty(f_,"__esModule",{value:!0}),f_.ActorRdfUpdateQuads=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return f_.ActorRdfUpdateQuads=t,f_}var Ji={},IU;function Zhe(){if(IU)return Ji;IU=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.ActorRdfUpdateQuadsDestination=Ji.deskolemize=Ji.deskolemizeStream=void 0;const a=f8(),t=ze(),u=Te(),n=EU();function r(o,c,s){return c==null?void 0:c.map(l=>(0,a.deskolemizeQuad)(o,l,s))}Ji.deskolemizeStream=r;function e(o){var d;const c=o.context.getSafe(t.KeysInitQuery.dataFactory),s=o.context.get(t.KeysRdfUpdateQuads.destination),l=(d=o.context.get(t.KeysQuerySourceIdentify.sourceIds))==null?void 0:d.get(s);return l?{...o,quadStreamInsert:r(c,o.quadStreamInsert,l),quadStreamDelete:r(c,o.quadStreamDelete,l)}:o}Ji.deskolemize=e;let i=class extends n.ActorRdfUpdateQuads{async test(c){return(0,u.passTestVoid)()}async run(c){const s=await this.getDestination(c.context);return await this.getOutput(s,e(c))}async getOutput(c,s){return{execute:async()=>{await c.update({insert:s.quadStreamInsert,delete:s.quadStreamDelete}),await(s.deleteGraphs?c.deleteGraphs(s.deleteGraphs.graphs,s.deleteGraphs.requireExistence,s.deleteGraphs.dropGraphs):Promise.resolve()),await(s.createGraphs?c.createGraphs(s.createGraphs.graphs,s.createGraphs.requireNonExistence):Promise.resolve())}}}};return Ji.ActorRdfUpdateQuadsDestination=i,Ji}var NR={},xU;function epe(){return xU||(xU=1,Object.defineProperty(NR,"__esModule",{value:!0})),NR}var rn={},NU;function tpe(){if(NU)return rn;NU=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.getContextDestinationUrl=rn.getContextDestination=rn.getDataDestinationContext=rn.getDataDestinationValue=rn.getDataDestinationType=rn.isDataDestinationRawType=void 0;const a=ze();function t(o){return typeof o=="string"||"remove"in o}rn.isDataDestinationRawType=t;function u(o){return typeof o=="string"?"":"remove"in o?"rdfjsStore":o.type}rn.getDataDestinationType=u;function n(o){return t(o)?o:o.value}rn.getDataDestinationValue=n;function r(o,c){return typeof o=="string"||"remove"in o||!o.context?c:c.merge(o.context)}rn.getDataDestinationContext=r;function e(o){return o.get(a.KeysRdfUpdateQuads.destination)}rn.getContextDestination=e;function i(o){if(o){let c=n(o);if(typeof c=="string"){const s=c.indexOf("#");return s>=0&&(c=c.slice(0,s)),c}}}return rn.getContextDestinationUrl=i,rn}var RU;function RR(){return RU||(RU=1,function(a){var t=Ns&&Ns.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ns&&Ns.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(EU(),a),u(Zhe(),a),u(epe(),a),u(tpe(),a)}(Ns)),Ns}var h_={},FU;function rpe(){if(FU)return h_;FU=1,Object.defineProperty(h_,"__esModule",{value:!0}),h_.RdfJsQuadDestination=void 0;const a=m$(),t=ir();let u=class{constructor(r,e){this.dataFactory=r,this.store=e}async update(r){r.delete&&await(0,a.promisifyEventEmitter)(this.store.remove(r.delete)),r.insert&&await(0,a.promisifyEventEmitter)(this.store.import(r.insert))}async deleteGraphs(r,e,i){switch(r){case"ALL":await(0,a.promisifyEventEmitter)(this.store.deleteGraph(this.dataFactory.defaultGraph()));case"NAMED":const o=this.store.match(),c={};o.on("data",s=>{s.graph.termType!=="DefaultGraph"&&(c[(0,t.termToString)(s.graph)]=!0)}),await(0,a.promisifyEventEmitter)(o),await Promise.all(Object.keys(c).map(s=>(0,a.promisifyEventEmitter)(this.store.deleteGraph((0,t.stringToTerm)(s,this.dataFactory)))));break;default:for(const s of Array.isArray(r)?r:[r])await(0,a.promisifyEventEmitter)(this.store.deleteGraph(s))}}async createGraphs(r,e){if(e)for(const i of r){const o=this.store.match(void 0,void 0,void 0,i);await new Promise((c,s)=>{o.once("data",()=>{s(new Error(`Unable to create graph ${i.value} as it already exists`))}),o.on("end",c),o.on("error",s)})}}};return h_.RdfJsQuadDestination=u,h_}var DU;function npe(){if(DU)return d_;DU=1,Object.defineProperty(d_,"__esModule",{value:!0}),d_.ActorRdfUpdateQuadsRdfJsStore=void 0;const a=RR(),t=ze(),u=Te(),n=rpe();let r=class extends a.ActorRdfUpdateQuadsDestination{constructor(i){super(i)}async test(i){var c;const o=(0,a.getContextDestination)(i.context);return!o||typeof o=="string"||!("remove"in o)&&"value"in o&&!((c=o.value)!=null&&c.remove)?(0,u.failTest)(`${this.name} received an invalid rdfjsStore.`):(0,u.passTestVoid)()}async getDestination(i){const o=(0,a.getContextDestination)(i);return new n.RdfJsQuadDestination(i.getSafe(t.KeysInitQuery.dataFactory),"remove"in o?o:o.value)}};return d_.ActorRdfUpdateQuadsRdfJsStore=r,d_}var PU;function ipe(){return PU||(PU=1,function(a){var t=xs&&xs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=xs&&xs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(npe(),a)}(xs)),xs}var Rs={},p_={},y_={},jU;function ape(){if(jU)return y_;jU=1,Object.defineProperty(y_,"__esModule",{value:!0}),y_.ExpressionFunctionBnode=void 0;const a=Ne(),t=ze(),u=Nx(),n=Ae();let r=class DD extends a.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.BNODE,apply:async i=>{const{args:o,mapping:c,exprEval:s}=i,l=o.length===1?await s.evaluatorExpressionEvaluation(o[0],c):void 0;let d;if(l){const h=DD.bnodeTree.search([l],s.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider),s.context.getSafe(t.KeysInitQuery.functionArgumentsCache));if(!h)throw new n.InvalidArgumentTypes(o,n.SparqlOperator.BNODE);d=h(s)([l]).str()}const f=new u.BlankNodeBindingsScoped(d??`BNODE_${DD.bnodeCounter++}`);return new n.BlankNode(f)}})}checkArity(i){return i.length===0||i.length===1}};return y_.ExpressionFunctionBnode=r,r.bnodeTree=(0,n.declare)(n.SparqlOperator.BNODE).onString1(()=>e=>e).collect(),r.bnodeCounter=0,y_}var LU;function upe(){if(LU)return p_;LU=1,Object.defineProperty(p_,"__esModule",{value:!0}),p_.ActorFunctionFactoryExpressionBnode=void 0;const a=Ne(),t=Ae(),u=ape();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.BNODE],termFunction:!1})}async run(e){return new u.ExpressionFunctionBnode}};return p_.ActorFunctionFactoryExpressionBnode=n,p_}var MU;function ope(){return MU||(MU=1,function(a){var t=Rs&&Rs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Rs&&Rs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(upe(),a)}(Rs)),Rs}var Fs={},b_={},m_={},CU;function spe(){if(CU)return m_;CU=1,Object.defineProperty(m_,"__esModule",{value:!0}),m_.ExpressionFunctionBound=void 0;const a=Ne(),t=ze(),u=_a(),n=Ae();let r=class extends a.ExpressionFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.BOUND,apply:async({args:i,mapping:o,exprEval:c})=>{const s=i[0];if(s.expressionType!==u.ExpressionType.Variable)throw new n.InvalidArgumentTypes(i,n.SparqlOperator.BOUND);const l=o.has((0,n.expressionToVar)(c.context.getSafe(t.KeysInitQuery.dataFactory),s));return(0,n.bool)(l)}})}};return m_.ExpressionFunctionBound=r,m_}var qU;function cpe(){if(qU)return b_;qU=1,Object.defineProperty(b_,"__esModule",{value:!0}),b_.ActorFunctionFactoryExpressionBound=void 0;const a=Ne(),t=Ae(),u=spe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.BOUND],termFunction:!1})}async run(e){return new u.ExpressionFunctionBound}};return b_.ActorFunctionFactoryExpressionBound=n,b_}var BU;function lpe(){return BU||(BU=1,function(a){var t=Fs&&Fs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Fs&&Fs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(cpe(),a)}(Fs)),Fs}var Ds={},__={},g_={},$U;function dpe(){if($U)return g_;$U=1,Object.defineProperty(g_,"__esModule",{value:!0}),g_.ExpressionFunctionCoalesce=void 0;const a=Ne(),t=Ae();let u=class extends a.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:t.SparqlOperator.COALESCE,apply:async({args:r,mapping:e,exprEval:i})=>{const o=[];for(const c of r)try{return await i.evaluatorExpressionEvaluation(c,e)}catch(s){o.push(s)}throw new t.CoalesceError(o)}})}};return g_.ExpressionFunctionCoalesce=u,g_}var VU;function fpe(){if(VU)return __;VU=1,Object.defineProperty(__,"__esModule",{value:!0}),__.ActorFunctionFactoryExpressionCoalesce=void 0;const a=Ne(),t=Ae(),u=dpe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.COALESCE],termFunction:!1})}async run(e){return new u.ExpressionFunctionCoalesce}};return __.ActorFunctionFactoryExpressionCoalesce=n,__}var UU;function hpe(){return UU||(UU=1,function(a){var t=Ds&&Ds.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ds&&Ds.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(fpe(),a)}(Ds)),Ds}var Ps={},v_={},T_={},QU;function ppe(){if(QU)return T_;QU=1,Object.defineProperty(T_,"__esModule",{value:!0}),T_.ExpressionFunctionConcat=void 0;const a=Ne(),t=ze(),u=Ae();let n=class PD extends a.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:u.SparqlOperator.CONCAT,apply:async e=>{const{args:i,mapping:o,exprEval:c}=e,s=i.map(async p=>c.evaluatorExpressionEvaluation(p,o)).map(async p=>{const b=PD.concatTree.search([await p],c.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider),c.context.getSafe(t.KeysInitQuery.functionArgumentsCache));if(!b)throw new u.InvalidArgumentTypes(i,u.SparqlOperator.CONCAT);return b(c)([await p])}),l=await Promise.all(s),f=l.map(p=>p.typedValue).join(""),h=PD.langAllEqual(l)?l[0].language:void 0;return h?(0,u.langString)(f,h):(0,u.string)(f)}})}static langAllEqual(e){return e.length>0&&e.every(i=>i.language===e[0].language)}};return T_.ExpressionFunctionConcat=n,n.concatTree=(0,u.declare)(u.SparqlOperator.CONCAT).onStringly1(()=>r=>r).collect(),T_}var HU;function ype(){if(HU)return v_;HU=1,Object.defineProperty(v_,"__esModule",{value:!0}),v_.ActorFunctionFactoryExpressionConcat=void 0;const a=Ne(),t=Ae(),u=ppe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.CONCAT],termFunction:!1})}async run(e){return new u.ExpressionFunctionConcat}};return v_.ActorFunctionFactoryExpressionConcat=n,v_}var GU;function bpe(){return GU||(GU=1,function(a){var t=Ps&&Ps.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ps&&Ps.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ype(),a)}(Ps)),Ps}var js={},w_={},Ls={},S_={},zU;function kU(){if(zU)return S_;zU=1,Object.defineProperty(S_,"__esModule",{value:!0}),S_.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return S_.BlankNode=a,S_}var O_={},A_={},XU;function JU(){if(XU)return A_;XU=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return A_.DefaultGraph=a,a.INSTANCE=new a,A_}var E_={},I_={},KU;function FR(){if(KU)return I_;KU=1,Object.defineProperty(I_,"__esModule",{value:!0}),I_.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return I_.NamedNode=a,I_}var WU;function YU(){if(WU)return E_;WU=1,Object.defineProperty(E_,"__esModule",{value:!0}),E_.Literal=void 0;const a=FR();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return E_.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),E_}var x_={},ZU;function eQ(){if(ZU)return x_;ZU=1,Object.defineProperty(x_,"__esModule",{value:!0}),x_.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return x_.Quad=a,x_}var N_={},tQ;function rQ(){if(tQ)return N_;tQ=1,Object.defineProperty(N_,"__esModule",{value:!0}),N_.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return N_.Variable=a,N_}var nQ;function mpe(){if(nQ)return O_;nQ=1,Object.defineProperty(O_,"__esModule",{value:!0}),O_.DataFactory=void 0;const a=kU(),t=JU(),u=YU(),n=FR(),r=eQ(),e=rQ();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return O_.DataFactory=o,O_}var iQ;function _pe(){return iQ||(iQ=1,function(a){var t=Ls&&Ls.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ls&&Ls.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(kU(),a),u(mpe(),a),u(JU(),a),u(YU(),a),u(FR(),a),u(eQ(),a),u(rQ(),a)}(Ls)),Ls}var R_={},aQ;function gpe(){if(aQ)return R_;aQ=1,Object.defineProperty(R_,"__esModule",{value:!0}),R_.NamedExtension=void 0;const a=TL(),t=ze(),u=Ae();let n=class extends a.ExpressionFunctionBase{constructor({operator:e,functionDefinition:i}){super({arity:Number.POSITIVE_INFINITY,operator:e,apply:async({args:o,exprEval:c,mapping:s})=>{const l=await Promise.all(o.map(d=>c.evaluatorExpressionEvaluation(d,s)));try{return new u.TermTransformer(c.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider)).transformRDFTermUnsafe(await i(l.map(d=>d.toRDF(c.context.getSafe(t.KeysInitQuery.dataFactory)))))}catch(d){throw new u.ExtensionFunctionError(this.operator,d)}}})}};return R_.NamedExtension=n,R_}var uQ;function vpe(){if(uQ)return w_;uQ=1,Object.defineProperty(w_,"__esModule",{value:!0}),w_.ActorFunctionFactoryExpressionExtensions=void 0;const a=Ne(),t=ze(),u=Te(),n=_pe(),r=gpe();let e=class extends a.ActorFunctionFactory{constructor(o){super(o)}async test({context:o,functionName:c}){return await o.getSafe(t.KeysExpressionEvaluator.extensionFunctionCreator)(new n.DataFactory().namedNode(c))?(0,u.passTestVoid)():(0,u.failTest)(`Actor ${this.name} can only provide non-termExpression implementations for functions that are provided through config entries like: ${t.KeysInitQuery.extensionFunctionCreator.name} or ${t.KeysInitQuery.extensionFunctions.name}`)}async run({context:o,functionName:c}){const l=await o.getSafe(t.KeysExpressionEvaluator.extensionFunctionCreator)(new n.DataFactory().namedNode(c));return new r.NamedExtension({operator:c,functionDefinition:l})}};return w_.ActorFunctionFactoryExpressionExtensions=e,w_}var oQ;function Tpe(){return oQ||(oQ=1,function(a){var t=js&&js.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=js&&js.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(vpe(),a)}(js)),js}var Ms={},F_={},D_={},sQ;function wpe(){if(sQ)return D_;sQ=1,Object.defineProperty(D_,"__esModule",{value:!0}),D_.ExpressionFunctionIf=void 0;const a=Ne(),t=Ae();let u=class extends a.ExpressionFunctionBase{constructor(){super({arity:3,operator:t.SparqlOperator.IF,apply:async({args:r,mapping:e,exprEval:i})=>(await i.evaluatorExpressionEvaluation(r[0],e)).coerceEBV()?i.evaluatorExpressionEvaluation(r[1],e):i.evaluatorExpressionEvaluation(r[2],e)})}};return D_.ExpressionFunctionIf=u,D_}var cQ;function Spe(){if(cQ)return F_;cQ=1,Object.defineProperty(F_,"__esModule",{value:!0}),F_.ActorFunctionFactoryExpressionIf=void 0;const a=Ne(),t=Ae(),u=wpe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IF],termFunction:!1})}async run(e){return new u.ExpressionFunctionIf}};return F_.ActorFunctionFactoryExpressionIf=n,F_}var lQ;function Ope(){return lQ||(lQ=1,function(a){var t=Ms&&Ms.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ms&&Ms.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Spe(),a)}(Ms)),Ms}var Cs={},P_={},j_={},dQ;function Ape(){if(dQ)return j_;dQ=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.ExpressionFunctionLogicalAnd=void 0;const a=Ne(),t=Ae();let u=class extends a.ExpressionFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.LOGICAL_AND,apply:async({args:r,mapping:e,exprEval:i})=>{const[o,c]=r;try{if(!(await i.evaluatorExpressionEvaluation(o,e)).coerceEBV())return(0,t.bool)(!1);const f=(await i.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,t.bool)(f)}catch(s){if((await i.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,t.bool)(!1)}}})}};return j_.ExpressionFunctionLogicalAnd=u,j_}var fQ;function Epe(){if(fQ)return P_;fQ=1,Object.defineProperty(P_,"__esModule",{value:!0}),P_.ActorFunctionFactoryExpressionLogicalAnd=void 0;const a=Ne(),t=Ae(),u=Ape();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LOGICAL_AND],termFunction:!1})}async run(e){return new u.ExpressionFunctionLogicalAnd}};return P_.ActorFunctionFactoryExpressionLogicalAnd=n,P_}var hQ;function Ipe(){return hQ||(hQ=1,function(a){var t=Cs&&Cs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Cs&&Cs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Epe(),a)}(Cs)),Cs}var qs={},L_={},M_={},pQ;function xpe(){if(pQ)return M_;pQ=1,Object.defineProperty(M_,"__esModule",{value:!0}),M_.ExpressionFunctionLogicalOr=void 0;const a=Ne(),t=Ae();let u=class extends a.ExpressionFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.LOGICAL_OR,apply:async({args:r,mapping:e,exprEval:i})=>{const[o,c]=r;try{if((await i.evaluatorExpressionEvaluation(o,e)).coerceEBV())return(0,t.bool)(!0);const f=(await i.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,t.bool)(f)}catch(s){if(!(await i.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,t.bool)(!0)}}})}};return M_.ExpressionFunctionLogicalOr=u,M_}var yQ;function Npe(){if(yQ)return L_;yQ=1,Object.defineProperty(L_,"__esModule",{value:!0}),L_.ActorFunctionFactoryExpressionLogicalOr=void 0;const a=Ne(),t=Ae(),u=xpe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LOGICAL_OR],termFunction:!1})}async run(e){return new u.ExpressionFunctionLogicalOr}};return L_.ActorFunctionFactoryExpressionLogicalOr=n,L_}var bQ;function Rpe(){return bQ||(bQ=1,function(a){var t=qs&&qs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=qs&&qs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Npe(),a)}(qs)),qs}var Bs={},C_={},q_={},mQ;function Fpe(){if(mQ)return q_;mQ=1,Object.defineProperty(q_,"__esModule",{value:!0}),q_.ExpressionFunctionSameTerm=void 0;const a=Ne(),t=ze(),u=Ae();let n=class extends a.ExpressionFunctionBase{constructor(){super({arity:2,operator:u.SparqlOperator.SAME_TERM,apply:async({args:e,mapping:i,exprEval:o})=>{const c=o.context.getSafe(t.KeysInitQuery.dataFactory),[s,l]=e.map(h=>o.evaluatorExpressionEvaluation(h,i)),[d,f]=await Promise.all([s,l]);return(0,u.bool)(d.toRDF(c).equals(f.toRDF(c)))}})}};return q_.ExpressionFunctionSameTerm=n,q_}var _Q;function Dpe(){if(_Q)return C_;_Q=1,Object.defineProperty(C_,"__esModule",{value:!0}),C_.ActorFunctionFactoryExpressionSameTerm=void 0;const a=Ne(),t=Ae(),u=Fpe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SAME_TERM],termFunction:!1})}async run(e){return new u.ExpressionFunctionSameTerm}};return C_.ActorFunctionFactoryExpressionSameTerm=n,C_}var gQ;function Ppe(){return gQ||(gQ=1,function(a){var t=Bs&&Bs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Bs&&Bs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Dpe(),a)}(Bs)),Bs}var $s={},B_={},$_={},vQ;function jpe(){if(vQ)return $_;vQ=1,Object.defineProperty($_,"__esModule",{value:!0}),$_.TermFunctionAbs=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.ABS,overloads:(0,t.declare)(t.SparqlOperator.ABS).numericConverter(()=>r=>Math.abs(r)).collect()})}};return $_.TermFunctionAbs=u,$_}var TQ;function Lpe(){if(TQ)return B_;TQ=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.ActorFunctionFactoryTermAbs=void 0;const a=Ne(),t=Ae(),u=jpe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ABS],termFunction:!0})}async run(e){return new u.TermFunctionAbs}};return B_.ActorFunctionFactoryTermAbs=n,B_}var wQ;function Mpe(){return wQ||(wQ=1,function(a){var t=$s&&$s.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=$s&&$s.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Lpe(),a)}($s)),$s}var Vs={},V_={},U_={},AA={exports:{}},Cpe=AA.exports,SQ;function EA(){return SQ||(SQ=1,function(a){(function(t){var u,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,e=Math.floor,i="[BigNumber Error] ",o=i+"Number primitive has more than 15 significant digits: ",c=1e14,s=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function p(S){var x,L,O,w=te.prototype={constructor:te,toString:null,valueOf:null},A=new te(1),E=20,R=4,V=-7,$=21,Q=-1e7,ne=1e7,ie=!1,fe=1,J=0,_e={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Fe="0123456789abcdefghijklmnopqrstuvwxyz",ve=!0;function te(G,D){var j,I,N,B,X,H,K,z,Z=this;if(!(Z instanceof te))return new te(G,D);if(D==null){if(G&&G._isBigNumber===!0){Z.s=G.s,!G.c||G.e>ne?Z.c=Z.e=null:G.e<Q?Z.c=[Z.e=0]:(Z.e=G.e,Z.c=G.c.slice());return}if((H=typeof G=="number")&&G*0==0){if(Z.s=1/G<0?(G=-G,-1):1,G===~~G){for(B=0,X=G;X>=10;X/=10,B++);B>ne?Z.c=Z.e=null:(Z.e=B,Z.c=[G]);return}z=String(G)}else{if(!n.test(z=String(G)))return O(Z,z,H);Z.s=z.charCodeAt(0)==45?(z=z.slice(1),-1):1}(B=z.indexOf("."))>-1&&(z=z.replace(".","")),(X=z.search(/e/i))>0?(B<0&&(B=X),B+=+z.slice(X+1),z=z.substring(0,X)):B<0&&(B=z.length)}else{if(g(D,2,Fe.length,"Base"),D==10&&ve)return Z=new te(G),ge(Z,E+Z.e+1,R);if(z=String(G),H=typeof G=="number"){if(G*0!=0)return O(Z,z,H,D);if(Z.s=1/G<0?(z=z.slice(1),-1):1,te.DEBUG&&z.replace(/^0\.0*|\./,"").length>15)throw Error(o+G)}else Z.s=z.charCodeAt(0)===45?(z=z.slice(1),-1):1;for(j=Fe.slice(0,D),B=X=0,K=z.length;X<K;X++)if(j.indexOf(I=z.charAt(X))<0){if(I=="."){if(X>B){B=K;continue}}else if(!N&&(z==z.toUpperCase()&&(z=z.toLowerCase())||z==z.toLowerCase()&&(z=z.toUpperCase()))){N=!0,X=-1,B=0;continue}return O(Z,String(G),H,D)}H=!1,z=L(z,D,10,Z.s),(B=z.indexOf("."))>-1?z=z.replace(".",""):B=z.length}for(X=0;z.charCodeAt(X)===48;X++);for(K=z.length;z.charCodeAt(--K)===48;);if(z=z.slice(X,++K)){if(K-=X,H&&te.DEBUG&&K>15&&(G>l||G!==e(G)))throw Error(o+Z.s*G);if((B=B-X-1)>ne)Z.c=Z.e=null;else if(B<Q)Z.c=[Z.e=0];else{if(Z.e=B,Z.c=[],X=(B+1)%s,B<0&&(X+=s),X<K){for(X&&Z.c.push(+z.slice(0,X)),K-=s;X<K;)Z.c.push(+z.slice(X,X+=s));X=s-(z=z.slice(X)).length}else X-=K;for(;X--;z+="0");Z.c.push(+z)}}else Z.c=[Z.e=0]}te.clone=p,te.ROUND_UP=0,te.ROUND_DOWN=1,te.ROUND_CEIL=2,te.ROUND_FLOOR=3,te.ROUND_HALF_UP=4,te.ROUND_HALF_DOWN=5,te.ROUND_HALF_EVEN=6,te.ROUND_HALF_CEIL=7,te.ROUND_HALF_FLOOR=8,te.EUCLID=9,te.config=te.set=function(G){var D,j;if(G!=null)if(typeof G=="object"){if(G.hasOwnProperty(D="DECIMAL_PLACES")&&(j=G[D],g(j,0,h,D),E=j),G.hasOwnProperty(D="ROUNDING_MODE")&&(j=G[D],g(j,0,8,D),R=j),G.hasOwnProperty(D="EXPONENTIAL_AT")&&(j=G[D],j&&j.pop?(g(j[0],-h,0,D),g(j[1],0,h,D),V=j[0],$=j[1]):(g(j,-h,h,D),V=-($=j<0?-j:j))),G.hasOwnProperty(D="RANGE"))if(j=G[D],j&&j.pop)g(j[0],-h,-1,D),g(j[1],1,h,D),Q=j[0],ne=j[1];else if(g(j,-h,h,D),j)Q=-(ne=j<0?-j:j);else throw Error(i+D+" cannot be zero: "+j);if(G.hasOwnProperty(D="CRYPTO"))if(j=G[D],j===!!j)if(j)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ie=j;else throw ie=!j,Error(i+"crypto unavailable");else ie=j;else throw Error(i+D+" not true or false: "+j);if(G.hasOwnProperty(D="MODULO_MODE")&&(j=G[D],g(j,0,9,D),fe=j),G.hasOwnProperty(D="POW_PRECISION")&&(j=G[D],g(j,0,h,D),J=j),G.hasOwnProperty(D="FORMAT"))if(j=G[D],typeof j=="object")_e=j;else throw Error(i+D+" not an object: "+j);if(G.hasOwnProperty(D="ALPHABET"))if(j=G[D],typeof j=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(j))ve=j.slice(0,10)=="0123456789",Fe=j;else throw Error(i+D+" invalid: "+j)}else throw Error(i+"Object expected: "+G);return{DECIMAL_PLACES:E,ROUNDING_MODE:R,EXPONENTIAL_AT:[V,$],RANGE:[Q,ne],CRYPTO:ie,MODULO_MODE:fe,POW_PRECISION:J,FORMAT:_e,ALPHABET:Fe}},te.isBigNumber=function(G){if(!G||G._isBigNumber!==!0)return!1;if(!te.DEBUG)return!0;var D,j,I=G.c,N=G.e,B=G.s;e:if({}.toString.call(I)=="[object Array]"){if((B===1||B===-1)&&N>=-h&&N<=h&&N===e(N)){if(I[0]===0){if(N===0&&I.length===1)return!0;break e}if(D=(N+1)%s,D<1&&(D+=s),String(I[0]).length==D){for(D=0;D<I.length;D++)if(j=I[D],j<0||j>=c||j!==e(j))break e;if(j!==0)return!0}}}else if(I===null&&N===null&&(B===null||B===1||B===-1))return!0;throw Error(i+"Invalid BigNumber: "+G)},te.maximum=te.max=function(){return Ce(arguments,-1)},te.minimum=te.min=function(){return Ce(arguments,1)},te.random=function(){var G=9007199254740992,D=Math.random()*G&2097151?function(){return e(Math.random()*G)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(j){var I,N,B,X,H,K=0,z=[],Z=new te(A);if(j==null?j=E:g(j,0,h),X=r(j/s),ie)if(crypto.getRandomValues){for(I=crypto.getRandomValues(new Uint32Array(X*=2));K<X;)H=I[K]*131072+(I[K+1]>>>11),H>=9e15?(N=crypto.getRandomValues(new Uint32Array(2)),I[K]=N[0],I[K+1]=N[1]):(z.push(H%1e14),K+=2);K=X/2}else if(crypto.randomBytes){for(I=crypto.randomBytes(X*=7);K<X;)H=(I[K]&31)*281474976710656+I[K+1]*1099511627776+I[K+2]*4294967296+I[K+3]*16777216+(I[K+4]<<16)+(I[K+5]<<8)+I[K+6],H>=9e15?crypto.randomBytes(7).copy(I,K):(z.push(H%1e14),K+=7);K=X/7}else throw ie=!1,Error(i+"crypto unavailable");if(!ie)for(;K<X;)H=D(),H<9e15&&(z[K++]=H%1e14);for(X=z[--K],j%=s,X&&j&&(H=d[s-j],z[K]=e(X/H)*H);z[K]===0;z.pop(),K--);if(K<0)z=[B=0];else{for(B=-1;z[0]===0;z.splice(0,1),B-=s);for(K=1,H=z[0];H>=10;H/=10,K++);K<s&&(B-=s-K)}return Z.e=B,Z.c=z,Z}}(),te.sum=function(){for(var G=1,D=arguments,j=new te(D[0]);G<D.length;)j=j.plus(D[G++]);return j},L=function(){var G="0123456789";function D(j,I,N,B){for(var X,H=[0],K,z=0,Z=j.length;z<Z;){for(K=H.length;K--;H[K]*=I);for(H[0]+=B.indexOf(j.charAt(z++)),X=0;X<H.length;X++)H[X]>N-1&&(H[X+1]==null&&(H[X+1]=0),H[X+1]+=H[X]/N|0,H[X]%=N)}return H.reverse()}return function(j,I,N,B,X){var H,K,z,Z,de,le,De,Qe,je=j.indexOf("."),oe=E,se=R;for(je>=0&&(Z=J,J=0,j=j.replace(".",""),Qe=new te(I),le=Qe.pow(j.length-je),J=Z,Qe.c=D(T(_(le.c),le.e,"0"),10,N,G),Qe.e=Qe.c.length),De=D(j,I,N,X?(H=Fe,G):(H=G,Fe)),z=Z=De.length;De[--Z]==0;De.pop());if(!De[0])return H.charAt(0);if(je<0?--z:(le.c=De,le.e=z,le.s=B,le=x(le,Qe,oe,se,N),De=le.c,de=le.r,z=le.e),K=z+oe+1,je=De[K],Z=N/2,de=de||K<0||De[K+1]!=null,de=se<4?(je!=null||de)&&(se==0||se==(le.s<0?3:2)):je>Z||je==Z&&(se==4||de||se==6&&De[K-1]&1||se==(le.s<0?8:7)),K<1||!De[0])j=de?T(H.charAt(1),-oe,H.charAt(0)):H.charAt(0);else{if(De.length=K,de)for(--N;++De[--K]>N;)De[K]=0,K||(++z,De=[1].concat(De));for(Z=De.length;!De[--Z];);for(je=0,j="";je<=Z;j+=H.charAt(De[je++]));j=T(j,z,H.charAt(0))}return j}}(),x=function(){function G(I,N,B){var X,H,K,z,Z=0,de=I.length,le=N%f,De=N/f|0;for(I=I.slice();de--;)K=I[de]%f,z=I[de]/f|0,X=De*K+z*le,H=le*K+X%f*f+Z,Z=(H/B|0)+(X/f|0)+De*z,I[de]=H%B;return Z&&(I=[Z].concat(I)),I}function D(I,N,B,X){var H,K;if(B!=X)K=B>X?1:-1;else for(H=K=0;H<B;H++)if(I[H]!=N[H]){K=I[H]>N[H]?1:-1;break}return K}function j(I,N,B,X){for(var H=0;B--;)I[B]-=H,H=I[B]<N[B]?1:0,I[B]=H*X+I[B]-N[B];for(;!I[0]&&I.length>1;I.splice(0,1));}return function(I,N,B,X,H){var K,z,Z,de,le,De,Qe,je,oe,se,ye,Ie,U,F,q,k,ce,be=I.s==N.s?1:-1,Se=I.c,Ke=N.c;if(!Se||!Se[0]||!Ke||!Ke[0])return new te(!I.s||!N.s||(Se?Ke&&Se[0]==Ke[0]:!Ke)?NaN:Se&&Se[0]==0||!Ke?be*0:be/0);for(je=new te(be),oe=je.c=[],z=I.e-N.e,be=B+z+1,H||(H=c,z=b(I.e/s)-b(N.e/s),be=be/s|0),Z=0;Ke[Z]==(Se[Z]||0);Z++);if(Ke[Z]>(Se[Z]||0)&&z--,be<0)oe.push(1),de=!0;else{for(F=Se.length,k=Ke.length,Z=0,be+=2,le=e(H/(Ke[0]+1)),le>1&&(Ke=G(Ke,le,H),Se=G(Se,le,H),k=Ke.length,F=Se.length),U=k,se=Se.slice(0,k),ye=se.length;ye<k;se[ye++]=0);ce=Ke.slice(),ce=[0].concat(ce),q=Ke[0],Ke[1]>=H/2&&q++;do{if(le=0,K=D(Ke,se,k,ye),K<0){if(Ie=se[0],k!=ye&&(Ie=Ie*H+(se[1]||0)),le=e(Ie/q),le>1)for(le>=H&&(le=H-1),De=G(Ke,le,H),Qe=De.length,ye=se.length;D(De,se,Qe,ye)==1;)le--,j(De,k<Qe?ce:Ke,Qe,H),Qe=De.length,K=1;else le==0&&(K=le=1),De=Ke.slice(),Qe=De.length;if(Qe<ye&&(De=[0].concat(De)),j(se,De,ye,H),ye=se.length,K==-1)for(;D(Ke,se,k,ye)<1;)le++,j(se,k<ye?ce:Ke,ye,H),ye=se.length}else K===0&&(le++,se=[0]);oe[Z++]=le,se[0]?se[ye++]=Se[U]||0:(se=[Se[U]],ye=1)}while((U++<F||se[0]!=null)&&be--);de=se[0]!=null,oe[0]||oe.splice(0,1)}if(H==c){for(Z=1,be=oe[0];be>=10;be/=10,Z++);ge(je,B+(je.e=Z+z*s-1)+1,X,de)}else je.e=z,je.r=+de;return je}}();function Le(G,D,j,I){var N,B,X,H,K;if(j==null?j=R:g(j,0,8),!G.c)return G.toString();if(N=G.c[0],X=G.e,D==null)K=_(G.c),K=I==1||I==2&&(X<=V||X>=$)?v(K,X):T(K,X,"0");else if(G=ge(new te(G),D,j),B=G.e,K=_(G.c),H=K.length,I==1||I==2&&(D<=B||B<=V)){for(;H<D;K+="0",H++);K=v(K,B)}else if(D-=X,K=T(K,B,"0"),B+1>H){if(--D>0)for(K+=".";D--;K+="0");}else if(D+=B-H,D>0)for(B+1==H&&(K+=".");D--;K+="0");return G.s<0&&N?"-"+K:K}function Ce(G,D){for(var j,I,N=1,B=new te(G[0]);N<G.length;N++)I=new te(G[N]),(!I.s||(j=y(B,I))===D||j===0&&B.s===D)&&(B=I);return B}function Ve(G,D,j){for(var I=1,N=D.length;!D[--N];D.pop());for(N=D[0];N>=10;N/=10,I++);return(j=I+j*s-1)>ne?G.c=G.e=null:j<Q?G.c=[G.e=0]:(G.e=j,G.c=D),G}O=function(){var G=/^(-?)0([xbo])(?=\w[\w.]*$)/i,D=/^([^.]+)\.$/,j=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(B,X,H,K){var z,Z=H?X:X.replace(N,"");if(I.test(Z))B.s=isNaN(Z)?null:Z<0?-1:1;else{if(!H&&(Z=Z.replace(G,function(de,le,De){return z=(De=De.toLowerCase())=="x"?16:De=="b"?2:8,!K||K==z?le:de}),K&&(z=K,Z=Z.replace(D,"$1").replace(j,"0.$1")),X!=Z))return new te(Z,z);if(te.DEBUG)throw Error(i+"Not a"+(K?" base "+K:"")+" number: "+X);B.s=null}B.c=B.e=null}}();function ge(G,D,j,I){var N,B,X,H,K,z,Z,de=G.c,le=d;if(de){e:{for(N=1,H=de[0];H>=10;H/=10,N++);if(B=D-N,B<0)B+=s,X=D,K=de[z=0],Z=e(K/le[N-X-1]%10);else if(z=r((B+1)/s),z>=de.length)if(I){for(;de.length<=z;de.push(0));K=Z=0,N=1,B%=s,X=B-s+1}else break e;else{for(K=H=de[z],N=1;H>=10;H/=10,N++);B%=s,X=B-s+N,Z=X<0?0:e(K/le[N-X-1]%10)}if(I=I||D<0||de[z+1]!=null||(X<0?K:K%le[N-X-1]),I=j<4?(Z||I)&&(j==0||j==(G.s<0?3:2)):Z>5||Z==5&&(j==4||I||j==6&&(B>0?X>0?K/le[N-X]:0:de[z-1])%10&1||j==(G.s<0?8:7)),D<1||!de[0])return de.length=0,I?(D-=G.e+1,de[0]=le[(s-D%s)%s],G.e=-D||0):de[0]=G.e=0,G;if(B==0?(de.length=z,H=1,z--):(de.length=z+1,H=le[s-B],de[z]=X>0?e(K/le[N-X]%le[X])*H:0),I)for(;;)if(z==0){for(B=1,X=de[0];X>=10;X/=10,B++);for(X=de[0]+=H,H=1;X>=10;X/=10,H++);B!=H&&(G.e++,de[0]==c&&(de[0]=1));break}else{if(de[z]+=H,de[z]!=c)break;de[z--]=0,H=1}for(B=de.length;de[--B]===0;de.pop());}G.e>ne?G.c=G.e=null:G.e<Q&&(G.c=[G.e=0])}return G}function we(G){var D,j=G.e;return j===null?G.toString():(D=_(G.c),D=j<=V||j>=$?v(D,j):T(D,j,"0"),G.s<0?"-"+D:D)}return w.absoluteValue=w.abs=function(){var G=new te(this);return G.s<0&&(G.s=1),G},w.comparedTo=function(G,D){return y(this,new te(G,D))},w.decimalPlaces=w.dp=function(G,D){var j,I,N,B=this;if(G!=null)return g(G,0,h),D==null?D=R:g(D,0,8),ge(new te(B),G+B.e+1,D);if(!(j=B.c))return null;if(I=((N=j.length-1)-b(this.e/s))*s,N=j[N])for(;N%10==0;N/=10,I--);return I<0&&(I=0),I},w.dividedBy=w.div=function(G,D){return x(this,new te(G,D),E,R)},w.dividedToIntegerBy=w.idiv=function(G,D){return x(this,new te(G,D),0,1)},w.exponentiatedBy=w.pow=function(G,D){var j,I,N,B,X,H,K,z,Z,de=this;if(G=new te(G),G.c&&!G.isInteger())throw Error(i+"Exponent not an integer: "+we(G));if(D!=null&&(D=new te(D)),H=G.e>14,!de.c||!de.c[0]||de.c[0]==1&&!de.e&&de.c.length==1||!G.c||!G.c[0])return Z=new te(Math.pow(+we(de),H?G.s*(2-m(G)):+we(G))),D?Z.mod(D):Z;if(K=G.s<0,D){if(D.c?!D.c[0]:!D.s)return new te(NaN);I=!K&&de.isInteger()&&D.isInteger(),I&&(de=de.mod(D))}else{if(G.e>9&&(de.e>0||de.e<-1||(de.e==0?de.c[0]>1||H&&de.c[1]>=24e7:de.c[0]<8e13||H&&de.c[0]<=9999975e7)))return B=de.s<0&&m(G)?-0:0,de.e>-1&&(B=1/B),new te(K?1/B:B);J&&(B=r(J/s+2))}for(H?(j=new te(.5),K&&(G.s=1),z=m(G)):(N=Math.abs(+we(G)),z=N%2),Z=new te(A);;){if(z){if(Z=Z.times(de),!Z.c)break;B?Z.c.length>B&&(Z.c.length=B):I&&(Z=Z.mod(D))}if(N){if(N=e(N/2),N===0)break;z=N%2}else if(G=G.times(j),ge(G,G.e+1,1),G.e>14)z=m(G);else{if(N=+we(G),N===0)break;z=N%2}de=de.times(de),B?de.c&&de.c.length>B&&(de.c.length=B):I&&(de=de.mod(D))}return I?Z:(K&&(Z=A.div(Z)),D?Z.mod(D):B?ge(Z,J,R,X):Z)},w.integerValue=function(G){var D=new te(this);return G==null?G=R:g(G,0,8),ge(D,D.e+1,G)},w.isEqualTo=w.eq=function(G,D){return y(this,new te(G,D))===0},w.isFinite=function(){return!!this.c},w.isGreaterThan=w.gt=function(G,D){return y(this,new te(G,D))>0},w.isGreaterThanOrEqualTo=w.gte=function(G,D){return(D=y(this,new te(G,D)))===1||D===0},w.isInteger=function(){return!!this.c&&b(this.e/s)>this.c.length-2},w.isLessThan=w.lt=function(G,D){return y(this,new te(G,D))<0},w.isLessThanOrEqualTo=w.lte=function(G,D){return(D=y(this,new te(G,D)))===-1||D===0},w.isNaN=function(){return!this.s},w.isNegative=function(){return this.s<0},w.isPositive=function(){return this.s>0},w.isZero=function(){return!!this.c&&this.c[0]==0},w.minus=function(G,D){var j,I,N,B,X=this,H=X.s;if(G=new te(G,D),D=G.s,!H||!D)return new te(NaN);if(H!=D)return G.s=-D,X.plus(G);var K=X.e/s,z=G.e/s,Z=X.c,de=G.c;if(!K||!z){if(!Z||!de)return Z?(G.s=-D,G):new te(de?X:NaN);if(!Z[0]||!de[0])return de[0]?(G.s=-D,G):new te(Z[0]?X:R==3?-0:0)}if(K=b(K),z=b(z),Z=Z.slice(),H=K-z){for((B=H<0)?(H=-H,N=Z):(z=K,N=de),N.reverse(),D=H;D--;N.push(0));N.reverse()}else for(I=(B=(H=Z.length)<(D=de.length))?H:D,H=D=0;D<I;D++)if(Z[D]!=de[D]){B=Z[D]<de[D];break}if(B&&(N=Z,Z=de,de=N,G.s=-G.s),D=(I=de.length)-(j=Z.length),D>0)for(;D--;Z[j++]=0);for(D=c-1;I>H;){if(Z[--I]<de[I]){for(j=I;j&&!Z[--j];Z[j]=D);--Z[j],Z[I]+=c}Z[I]-=de[I]}for(;Z[0]==0;Z.splice(0,1),--z);return Z[0]?Ve(G,Z,z):(G.s=R==3?-1:1,G.c=[G.e=0],G)},w.modulo=w.mod=function(G,D){var j,I,N=this;return G=new te(G,D),!N.c||!G.s||G.c&&!G.c[0]?new te(NaN):!G.c||N.c&&!N.c[0]?new te(N):(fe==9?(I=G.s,G.s=1,j=x(N,G,0,3),G.s=I,j.s*=I):j=x(N,G,0,fe),G=N.minus(j.times(G)),!G.c[0]&&fe==1&&(G.s=N.s),G)},w.multipliedBy=w.times=function(G,D){var j,I,N,B,X,H,K,z,Z,de,le,De,Qe,je,oe,se=this,ye=se.c,Ie=(G=new te(G,D)).c;if(!ye||!Ie||!ye[0]||!Ie[0])return!se.s||!G.s||ye&&!ye[0]&&!Ie||Ie&&!Ie[0]&&!ye?G.c=G.e=G.s=null:(G.s*=se.s,!ye||!Ie?G.c=G.e=null:(G.c=[0],G.e=0)),G;for(I=b(se.e/s)+b(G.e/s),G.s*=se.s,K=ye.length,de=Ie.length,K<de&&(Qe=ye,ye=Ie,Ie=Qe,N=K,K=de,de=N),N=K+de,Qe=[];N--;Qe.push(0));for(je=c,oe=f,N=de;--N>=0;){for(j=0,le=Ie[N]%oe,De=Ie[N]/oe|0,X=K,B=N+X;B>N;)z=ye[--X]%oe,Z=ye[X]/oe|0,H=De*z+Z*le,z=le*z+H%oe*oe+Qe[B]+j,j=(z/je|0)+(H/oe|0)+De*Z,Qe[B--]=z%je;Qe[B]=j}return j?++I:Qe.splice(0,1),Ve(G,Qe,I)},w.negated=function(){var G=new te(this);return G.s=-G.s||null,G},w.plus=function(G,D){var j,I=this,N=I.s;if(G=new te(G,D),D=G.s,!N||!D)return new te(NaN);if(N!=D)return G.s=-D,I.minus(G);var B=I.e/s,X=G.e/s,H=I.c,K=G.c;if(!B||!X){if(!H||!K)return new te(N/0);if(!H[0]||!K[0])return K[0]?G:new te(H[0]?I:N*0)}if(B=b(B),X=b(X),H=H.slice(),N=B-X){for(N>0?(X=B,j=K):(N=-N,j=H),j.reverse();N--;j.push(0));j.reverse()}for(N=H.length,D=K.length,N-D<0&&(j=K,K=H,H=j,D=N),N=0;D;)N=(H[--D]=H[D]+K[D]+N)/c|0,H[D]=c===H[D]?0:H[D]%c;return N&&(H=[N].concat(H),++X),Ve(G,H,X)},w.precision=w.sd=function(G,D){var j,I,N,B=this;if(G!=null&&G!==!!G)return g(G,1,h),D==null?D=R:g(D,0,8),ge(new te(B),G,D);if(!(j=B.c))return null;if(N=j.length-1,I=N*s+1,N=j[N]){for(;N%10==0;N/=10,I--);for(N=j[0];N>=10;N/=10,I++);}return G&&B.e+1>I&&(I=B.e+1),I},w.shiftedBy=function(G){return g(G,-l,l),this.times("1e"+G)},w.squareRoot=w.sqrt=function(){var G,D,j,I,N,B=this,X=B.c,H=B.s,K=B.e,z=E+4,Z=new te("0.5");if(H!==1||!X||!X[0])return new te(!H||H<0&&(!X||X[0])?NaN:X?B:1/0);if(H=Math.sqrt(+we(B)),H==0||H==1/0?(D=_(X),(D.length+K)%2==0&&(D+="0"),H=Math.sqrt(+D),K=b((K+1)/2)-(K<0||K%2),H==1/0?D="5e"+K:(D=H.toExponential(),D=D.slice(0,D.indexOf("e")+1)+K),j=new te(D)):j=new te(H+""),j.c[0]){for(K=j.e,H=K+z,H<3&&(H=0);;)if(N=j,j=Z.times(N.plus(x(B,N,z,1))),_(N.c).slice(0,H)===(D=_(j.c)).slice(0,H))if(j.e<K&&--H,D=D.slice(H-3,H+1),D=="9999"||!I&&D=="4999"){if(!I&&(ge(N,N.e+E+2,0),N.times(N).eq(B))){j=N;break}z+=4,H+=4,I=1}else{(!+D||!+D.slice(1)&&D.charAt(0)=="5")&&(ge(j,j.e+E+2,1),G=!j.times(j).eq(B));break}}return ge(j,j.e+E+1,R,G)},w.toExponential=function(G,D){return G!=null&&(g(G,0,h),G++),Le(this,G,D,1)},w.toFixed=function(G,D){return G!=null&&(g(G,0,h),G=G+this.e+1),Le(this,G,D)},w.toFormat=function(G,D,j){var I,N=this;if(j==null)G!=null&&D&&typeof D=="object"?(j=D,D=null):G&&typeof G=="object"?(j=G,G=D=null):j=_e;else if(typeof j!="object")throw Error(i+"Argument not an object: "+j);if(I=N.toFixed(G,D),N.c){var B,X=I.split("."),H=+j.groupSize,K=+j.secondaryGroupSize,z=j.groupSeparator||"",Z=X[0],de=X[1],le=N.s<0,De=le?Z.slice(1):Z,Qe=De.length;if(K&&(B=H,H=K,K=B,Qe-=B),H>0&&Qe>0){for(B=Qe%H||H,Z=De.substr(0,B);B<Qe;B+=H)Z+=z+De.substr(B,H);K>0&&(Z+=z+De.slice(B)),le&&(Z="-"+Z)}I=de?Z+(j.decimalSeparator||"")+((K=+j.fractionGroupSize)?de.replace(new RegExp("\\d{"+K+"}\\B","g"),"$&"+(j.fractionGroupSeparator||"")):de):Z}return(j.prefix||"")+I+(j.suffix||"")},w.toFraction=function(G){var D,j,I,N,B,X,H,K,z,Z,de,le,De=this,Qe=De.c;if(G!=null&&(H=new te(G),!H.isInteger()&&(H.c||H.s!==1)||H.lt(A)))throw Error(i+"Argument "+(H.isInteger()?"out of range: ":"not an integer: ")+we(H));if(!Qe)return new te(De);for(D=new te(A),z=j=new te(A),I=K=new te(A),le=_(Qe),B=D.e=le.length-De.e-1,D.c[0]=d[(X=B%s)<0?s+X:X],G=!G||H.comparedTo(D)>0?B>0?D:z:H,X=ne,ne=1/0,H=new te(le),K.c[0]=0;Z=x(H,D,0,1),N=j.plus(Z.times(I)),N.comparedTo(G)!=1;)j=I,I=N,z=K.plus(Z.times(N=z)),K=N,D=H.minus(Z.times(N=D)),H=N;return N=x(G.minus(j),I,0,1),K=K.plus(N.times(z)),j=j.plus(N.times(I)),K.s=z.s=De.s,B=B*2,de=x(z,I,B,R).minus(De).abs().comparedTo(x(K,j,B,R).minus(De).abs())<1?[z,I]:[K,j],ne=X,de},w.toNumber=function(){return+we(this)},w.toPrecision=function(G,D){return G!=null&&g(G,1,h),Le(this,G,D,2)},w.toString=function(G){var D,j=this,I=j.s,N=j.e;return N===null?I?(D="Infinity",I<0&&(D="-"+D)):D="NaN":(G==null?D=N<=V||N>=$?v(_(j.c),N):T(_(j.c),N,"0"):G===10&&ve?(j=ge(new te(j),E+N+1,R),D=T(_(j.c),j.e,"0")):(g(G,2,Fe.length,"Base"),D=L(T(_(j.c),N,"0"),10,G,I,!0)),I<0&&j.c[0]&&(D="-"+D)),D},w.valueOf=w.toJSON=function(){return we(this)},w._isBigNumber=!0,S!=null&&te.set(S),te}function b(S){var x=S|0;return S>0||S===x?x:x-1}function _(S){for(var x,L,O=1,w=S.length,A=S[0]+"";O<w;){for(x=S[O++]+"",L=s-x.length;L--;x="0"+x);A+=x}for(w=A.length;A.charCodeAt(--w)===48;);return A.slice(0,w+1||1)}function y(S,x){var L,O,w=S.c,A=x.c,E=S.s,R=x.s,V=S.e,$=x.e;if(!E||!R)return null;if(L=w&&!w[0],O=A&&!A[0],L||O)return L?O?0:-R:E;if(E!=R)return E;if(L=E<0,O=V==$,!w||!A)return O?0:!w^L?1:-1;if(!O)return V>$^L?1:-1;for(R=(V=w.length)<($=A.length)?V:$,E=0;E<R;E++)if(w[E]!=A[E])return w[E]>A[E]^L?1:-1;return V==$?0:V>$^L?1:-1}function g(S,x,L,O){if(S<x||S>L||S!==e(S))throw Error(i+(O||"Argument")+(typeof S=="number"?S<x||S>L?" out of range: ":" not an integer: ":" not a primitive number: ")+String(S))}function m(S){var x=S.c.length-1;return b(S.e/s)==x&&S.c[x]%2!=0}function v(S,x){return(S.length>1?S.charAt(0)+"."+S.slice(1):S)+(x<0?"e":"e+")+x}function T(S,x,L){var O,w;if(x<0){for(w=L+".";++x;w+=L);S=w+S}else if(O=S.length,++x>O){for(w=L,x-=O;--x;w+=L);S+=w}else x<O&&(S=S.slice(0,x)+"."+S.slice(x));return S}u=p(),u.default=u.BigNumber=u,a.exports?a.exports=u:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=u)})(Cpe)}(AA)),AA.exports}var OQ;function qpe(){if(OQ)return U_;OQ=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.TermFunctionAddition=void 0;const a=Ne(),t=Ae(),u=EA();let n=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.ADDITION,overloads:(0,t.declare)(t.SparqlOperator.ADDITION).arithmetic(()=>(e,i)=>new u.BigNumber(e).plus(i).toNumber()).set([t.TypeURL.XSD_DATE_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,i])=>new t.DateTimeLiteral((0,t.addDurationToDateTime)(e.typedValue,(0,t.defaultedDurationRepresentation)(i.typedValue)))).copy({from:[t.TypeURL.XSD_DATE_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],to:[t.TypeURL.XSD_DATE_TIME,t.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([t.TypeURL.XSD_DATE,t.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,i])=>new t.DateLiteral((0,t.addDurationToDateTime)((0,t.defaultedDateTimeRepresentation)(e.typedValue),(0,t.defaultedDurationRepresentation)(i.typedValue)))).copy({from:[t.TypeURL.XSD_DATE,t.TypeURL.XSD_DAY_TIME_DURATION],to:[t.TypeURL.XSD_DATE,t.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([t.TypeURL.XSD_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,i])=>new t.TimeLiteral((0,t.addDurationToDateTime)((0,t.defaultedDateTimeRepresentation)(e.typedValue),(0,t.defaultedDurationRepresentation)(i.typedValue)))).copy({from:[t.TypeURL.XSD_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],to:[t.TypeURL.XSD_TIME,t.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()})}};return U_.TermFunctionAddition=n,U_}var AQ;function Bpe(){if(AQ)return V_;AQ=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.ActorFunctionFactoryTermAddition=void 0;const a=Ne(),t=Ae(),u=qpe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ADDITION],termFunction:!0})}async run(e){return new u.TermFunctionAddition}};return V_.ActorFunctionFactoryTermAddition=n,V_}var EQ;function $pe(){return EQ||(EQ=1,function(a){var t=Vs&&Vs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Vs&&Vs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Bpe(),a)}(Vs)),Vs}var Us={},Q_={},H_={},IQ;function Vpe(){if(IQ)return H_;IQ=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.TermFunctionCeil=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.CEIL,overloads:(0,t.declare)(t.SparqlOperator.CEIL).numericConverter(()=>r=>Math.ceil(r)).collect()})}};return H_.TermFunctionCeil=u,H_}var xQ;function Upe(){if(xQ)return Q_;xQ=1,Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.ActorFunctionFactoryTermCeil=void 0;const a=Ne(),t=Ae(),u=Vpe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.CEIL],termFunction:!0})}async run(e){return new u.TermFunctionCeil}};return Q_.ActorFunctionFactoryTermCeil=n,Q_}var NQ;function Qpe(){return NQ||(NQ=1,function(a){var t=Us&&Us.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Us&&Us.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Upe(),a)}(Us)),Us}var Qs={},G_={},z_={},RQ;function Hpe(){if(RQ)return z_;RQ=1,Object.defineProperty(z_,"__esModule",{value:!0}),z_.TermFunctionContains=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.CONTAINS,overloads:(0,t.declare)(t.SparqlOperator.CONTAINS).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.bool)(r.includes(e))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(r,e)=>{if(r.language!==e.language)throw new t.IncompatibleLanguageOperation(r,e);return(0,t.bool)(r.typedValue.includes(e.typedValue))}).collect()})}};return z_.TermFunctionContains=u,z_}var FQ;function Gpe(){if(FQ)return G_;FQ=1,Object.defineProperty(G_,"__esModule",{value:!0}),G_.ActorFunctionFactoryTermContains=void 0;const a=Ne(),t=Ae(),u=Hpe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.CONTAINS],termFunction:!0})}async run(e){return new u.TermFunctionContains}};return G_.ActorFunctionFactoryTermContains=n,G_}var DQ;function zpe(){return DQ||(DQ=1,function(a){var t=Qs&&Qs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Qs&&Qs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Gpe(),a)}(Qs)),Qs}var Hs={},k_={},X_={},PQ;function kpe(){if(PQ)return X_;PQ=1,Object.defineProperty(X_,"__esModule",{value:!0}),X_.TermFunctionDatatype=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.DATATYPE,overloads:(0,t.declare)(t.SparqlOperator.DATATYPE).onLiteral1(()=>r=>new t.NamedNode(r.dataType)).collect()})}};return X_.TermFunctionDatatype=u,X_}var jQ;function Xpe(){if(jQ)return k_;jQ=1,Object.defineProperty(k_,"__esModule",{value:!0}),k_.ActorFunctionFactoryTermDatatype=void 0;const a=Ne(),t=Ae(),u=kpe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.DATATYPE],termFunction:!0})}async run(e){return new u.TermFunctionDatatype}};return k_.ActorFunctionFactoryTermDatatype=n,k_}var LQ;function Jpe(){return LQ||(LQ=1,function(a){var t=Hs&&Hs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Hs&&Hs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Xpe(),a)}(Hs)),Hs}var Gs={},J_={},K_={},MQ;function Kpe(){if(MQ)return K_;MQ=1,Object.defineProperty(K_,"__esModule",{value:!0}),K_.TermFunctionDay=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.DAY,overloads:(0,t.declare)(t.SparqlOperator.DAY).onDateTime1(()=>r=>(0,t.integer)(r.typedValue.day)).set([t.TypeURL.XSD_DATE],()=>([r])=>(0,t.integer)(r.typedValue.day)).collect()})}};return K_.TermFunctionDay=u,K_}var CQ;function Wpe(){if(CQ)return J_;CQ=1,Object.defineProperty(J_,"__esModule",{value:!0}),J_.ActorFunctionFactoryTermDay=void 0;const a=Ne(),t=Ae(),u=Kpe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.DAY],termFunction:!0})}async run(e){return new u.TermFunctionDay}};return J_.ActorFunctionFactoryTermDay=n,J_}var qQ;function Ype(){return qQ||(qQ=1,function(a){var t=Gs&&Gs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Gs&&Gs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Wpe(),a)}(Gs)),Gs}var zs={},W_={},Y_={},BQ;function Zpe(){if(BQ)return Y_;BQ=1,Object.defineProperty(Y_,"__esModule",{value:!0}),Y_.TermFunctionDivision=void 0;const a=Ne(),t=Ae(),u=EA();let n=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.DIVISION,overloads:(0,t.declare)(t.SparqlOperator.DIVISION).arithmetic(()=>(e,i)=>new u.BigNumber(e).div(i).toNumber()).onBinaryTyped([t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],()=>(e,i)=>{if(i===0)throw new t.ExpressionError("Integer division by 0");return(0,t.decimal)(new u.BigNumber(e).div(i).toNumber())}).collect()})}};return Y_.TermFunctionDivision=n,Y_}var $Q;function e0e(){if($Q)return W_;$Q=1,Object.defineProperty(W_,"__esModule",{value:!0}),W_.ActorFunctionFactoryTermDivision=void 0;const a=Ne(),t=Ae(),u=Zpe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.DIVISION],termFunction:!0})}async run(e){return new u.TermFunctionDivision}};return W_.ActorFunctionFactoryTermDivision=n,W_}var VQ;function t0e(){return VQ||(VQ=1,function(a){var t=zs&&zs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=zs&&zs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(e0e(),a)}(zs)),zs}var ks={},Z_={},eg={},UQ;function r0e(){if(UQ)return eg;UQ=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.TermFunctionEncodeForUri=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.ENCODE_FOR_URI,overloads:(0,t.declare)(t.SparqlOperator.ENCODE_FOR_URI).onStringly1Typed(()=>r=>(0,t.string)(encodeURI(r))).collect()})}};return eg.TermFunctionEncodeForUri=u,eg}var QQ;function n0e(){if(QQ)return Z_;QQ=1,Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.ActorFunctionFactoryTermEncodeForUri=void 0;const a=Ne(),t=Ae(),u=r0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ENCODE_FOR_URI],termFunction:!0})}async run(e){return new u.TermFunctionEncodeForUri}};return Z_.ActorFunctionFactoryTermEncodeForUri=n,Z_}var HQ;function i0e(){return HQ||(HQ=1,function(a){var t=ks&&ks.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ks&&ks.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(n0e(),a)}(ks)),ks}var Xs={},tg={},rg={},GQ;function a0e(){if(GQ)return rg;GQ=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.TermFunctionEquality=void 0;const a=Ne(),t=ze(),u=Ae();let n=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:u.SparqlOperator.EQUAL,overloads:(0,u.declare)(u.SparqlOperator.EQUAL).numberTest(()=>(e,i)=>e===i).stringTest(()=>(e,i)=>e.localeCompare(i)===0).set([u.TypeURL.RDF_LANG_STRING,u.TypeURL.RDF_LANG_STRING],()=>([e,i])=>(0,u.bool)(e.str()===i.str()&&e.language===i.language)).set([u.TypeAlias.SPARQL_STRINGLY,u.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,u.bool)(!1)).booleanTest(()=>(e,i)=>e===i).dateTimeTest(e=>(i,o)=>(0,u.toUTCDate)(i,e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,u.toUTCDate)(o,e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DATE_TIME],to:[u.TypeURL.XSD_DATE,u.TypeURL.XSD_DATE]}).set(["quad","quad"],e=>([i,o])=>(0,u.bool)(this.applyOnTerms([i.subject,o.subject],e).coerceEBV()&&this.applyOnTerms([i.predicate,o.predicate],e).coerceEBV()&&this.applyOnTerms([i.object,o.object],e).coerceEBV()&&this.applyOnTerms([i.graph,o.graph],e).coerceEBV()),!1).set(["term","term"],e=>([i,o])=>{const c=i.toRDF(e.context.getSafe(t.KeysInitQuery.dataFactory)),s=o.toRDF(e.context.getSafe(t.KeysInitQuery.dataFactory)),l=c.equals(s);if(!l&&c.termType==="Literal"&&s.termType==="Literal")throw new u.RDFEqualTypeError([i,o]);return(0,u.bool)(l)},!1).set([u.TypeURL.XSD_DURATION,u.TypeURL.XSD_DURATION],()=>([e,i])=>(0,u.bool)((0,u.yearMonthDurationsToMonths)((0,u.defaultedYearMonthDurationRepresentation)(e.typedValue))===(0,u.yearMonthDurationsToMonths)((0,u.defaultedYearMonthDurationRepresentation)(i.typedValue))&&(0,u.dayTimeDurationsToSeconds)((0,u.defaultedDayTimeDurationRepresentation)(e.typedValue))===(0,u.dayTimeDurationsToSeconds)((0,u.defaultedDayTimeDurationRepresentation)(i.typedValue)))).set([u.TypeURL.XSD_TIME,u.TypeURL.XSD_TIME],e=>([i,o])=>(0,u.bool)((0,u.toUTCDate)((0,u.defaultedDateTimeRepresentation)(i.typedValue),e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,u.toUTCDate)((0,u.defaultedDateTimeRepresentation)(o.typedValue),e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime())).collect()})}};return rg.TermFunctionEquality=n,rg}var zQ;function u0e(){if(zQ)return tg;zQ=1,Object.defineProperty(tg,"__esModule",{value:!0}),tg.ActorFunctionFactoryTermEquality=void 0;const a=Ne(),t=Ae(),u=a0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.EQUAL],termFunction:!0})}async run(e){return new u.TermFunctionEquality}};return tg.ActorFunctionFactoryTermEquality=n,tg}var kQ;function o0e(){return kQ||(kQ=1,function(a){var t=Xs&&Xs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Xs&&Xs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(u0e(),a)}(Xs)),Xs}var Js={},ng={},ig={},XQ;function s0e(){if(XQ)return ig;XQ=1,Object.defineProperty(ig,"__esModule",{value:!0}),ig.TermFunctionFloor=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.FLOOR,overloads:(0,t.declare)(t.SparqlOperator.FLOOR).numericConverter(()=>r=>Math.floor(r)).collect()})}};return ig.TermFunctionFloor=u,ig}var JQ;function c0e(){if(JQ)return ng;JQ=1,Object.defineProperty(ng,"__esModule",{value:!0}),ng.ActorFunctionFactoryTermFloor=void 0;const a=Ne(),t=Ae(),u=s0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.FLOOR],termFunction:!0})}async run(e){return new u.TermFunctionFloor}};return ng.ActorFunctionFactoryTermFloor=n,ng}var KQ;function l0e(){return KQ||(KQ=1,function(a){var t=Js&&Js.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Js&&Js.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(c0e(),a)}(Js)),Js}var Ks={},ag={},ug={},WQ;function d0e(){if(WQ)return ug;WQ=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.TermFunctionHours=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.HOURS,overloads:(0,t.declare)(t.SparqlOperator.HOURS).onDateTime1(()=>r=>(0,t.integer)(r.typedValue.hours)).set([t.TypeURL.XSD_TIME],()=>([r])=>(0,t.integer)(r.typedValue.hours)).collect()})}};return ug.TermFunctionHours=u,ug}var YQ;function f0e(){if(YQ)return ag;YQ=1,Object.defineProperty(ag,"__esModule",{value:!0}),ag.ActorFunctionFactoryTermHours=void 0;const a=Ne(),t=Ae(),u=d0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.HOURS],termFunction:!0})}async run(e){return new u.TermFunctionHours}};return ag.ActorFunctionFactoryTermHours=n,ag}var ZQ;function h0e(){return ZQ||(ZQ=1,function(a){var t=Ks&&Ks.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ks&&Ks.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(f0e(),a)}(Ks)),Ks}var Ws={},og={},sg={},eH;function p0e(){if(eH)return sg;eH=1,Object.defineProperty(sg,"__esModule",{value:!0}),sg.TermFunctionIri=void 0;const a=Ne(),t=ze(),u=Ae(),n=vr();let r=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:u.SparqlOperator.IRI,overloads:(0,u.declare)(u.SparqlOperator.IRI).set(["namedNode"],i=>o=>{const c=o[0],s=(0,n.resolve)(c.str(),i.context.get(t.KeysInitQuery.baseIRI)??"");return new u.NamedNode(s)}).onString1(i=>o=>{const c=(0,n.resolve)(o.str(),i.context.get(t.KeysInitQuery.baseIRI)??"");return new u.NamedNode(c)}).collect()})}};return sg.TermFunctionIri=r,sg}var tH;function y0e(){if(tH)return og;tH=1,Object.defineProperty(og,"__esModule",{value:!0}),og.ActorFunctionFactoryTermIri=void 0;const a=Ne(),t=Ae(),u=p0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IRI,t.SparqlOperator.URI],termFunction:!0})}async run(e){return new u.TermFunctionIri}};return og.ActorFunctionFactoryTermIri=n,og}var rH;function b0e(){return rH||(rH=1,function(a){var t=Ws&&Ws.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ws&&Ws.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(y0e(),a)}(Ws)),Ws}var Ys={},cg={},lg={},nH;function m0e(){if(nH)return lg;nH=1,Object.defineProperty(lg,"__esModule",{value:!0}),lg.TermFunctionIsBlank=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_BLANK,overloads:(0,t.declare)(t.SparqlOperator.IS_BLANK).onTerm1(()=>r=>(0,t.bool)(r.termType==="blankNode")).collect()})}};return lg.TermFunctionIsBlank=u,lg}var iH;function _0e(){if(iH)return cg;iH=1,Object.defineProperty(cg,"__esModule",{value:!0}),cg.ActorFunctionFactoryTermIsBlank=void 0;const a=Ne(),t=Ae(),u=m0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_BLANK],termFunction:!0})}async run(e){return new u.TermFunctionIsBlank}};return cg.ActorFunctionFactoryTermIsBlank=n,cg}var aH;function g0e(){return aH||(aH=1,function(a){var t=Ys&&Ys.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ys&&Ys.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(_0e(),a)}(Ys)),Ys}var Zs={},dg={},fg={},uH;function v0e(){if(uH)return fg;uH=1,Object.defineProperty(fg,"__esModule",{value:!0}),fg.TermFunctionIsIri=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_IRI,overloads:(0,t.declare)(t.SparqlOperator.IS_IRI).onTerm1(()=>r=>(0,t.bool)(r.termType==="namedNode")).collect()})}};return fg.TermFunctionIsIri=u,fg}var oH;function T0e(){if(oH)return dg;oH=1,Object.defineProperty(dg,"__esModule",{value:!0}),dg.ActorFunctionFactoryTermIsIri=void 0;const a=Ne(),t=Ae(),u=v0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_IRI,t.SparqlOperator.IS_URI],termFunction:!0})}async run(e){return new u.TermFunctionIsIri}};return dg.ActorFunctionFactoryTermIsIri=n,dg}var sH;function w0e(){return sH||(sH=1,function(a){var t=Zs&&Zs.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Zs&&Zs.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(T0e(),a)}(Zs)),Zs}var ec={},hg={},pg={},cH;function S0e(){if(cH)return pg;cH=1,Object.defineProperty(pg,"__esModule",{value:!0}),pg.TermFunctionIsLiteral=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_LITERAL,overloads:(0,t.declare)(t.SparqlOperator.IS_LITERAL).onTerm1(()=>r=>(0,t.bool)(r.termType==="literal")).collect()})}};return pg.TermFunctionIsLiteral=u,pg}var lH;function O0e(){if(lH)return hg;lH=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.ActorFunctionFactoryTermIsLiteral=void 0;const a=Ne(),t=Ae(),u=S0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_LITERAL],termFunction:!0})}async run(e){return new u.TermFunctionIsLiteral}};return hg.ActorFunctionFactoryTermIsLiteral=n,hg}var dH;function A0e(){return dH||(dH=1,function(a){var t=ec&&ec.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ec&&ec.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(O0e(),a)}(ec)),ec}var tc={},yg={},bg={},fH;function E0e(){if(fH)return bg;fH=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.TermFunctionIsNumeric=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_NUMERIC,overloads:(0,t.declare)(t.SparqlOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,t.bool)(!0)).onTerm1(()=>()=>(0,t.bool)(!1)).collect()})}};return bg.TermFunctionIsNumeric=u,bg}var hH;function I0e(){if(hH)return yg;hH=1,Object.defineProperty(yg,"__esModule",{value:!0}),yg.ActorFunctionFactoryTermIsNumeric=void 0;const a=Ne(),t=Ae(),u=E0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_NUMERIC],termFunction:!0})}async run(e){return new u.TermFunctionIsNumeric}};return yg.ActorFunctionFactoryTermIsNumeric=n,yg}var pH;function x0e(){return pH||(pH=1,function(a){var t=tc&&tc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=tc&&tc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(I0e(),a)}(tc)),tc}var rc={},mg={},_g={},yH;function N0e(){if(yH)return _g;yH=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.TermFunctionIsTriple=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_TRIPLE,overloads:(0,t.declare)(t.SparqlOperator.IS_TRIPLE).onTerm1(()=>r=>(0,t.bool)(r.termType==="quad")).collect()})}};return _g.TermFunctionIsTriple=u,_g}var bH;function R0e(){if(bH)return mg;bH=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.ActorFunctionFactoryTermIsTriple=void 0;const a=Ne(),t=Ae(),u=N0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_TRIPLE],termFunction:!0})}async run(e){return new u.TermFunctionIsTriple}};return mg.ActorFunctionFactoryTermIsTriple=n,mg}var mH;function F0e(){return mH||(mH=1,function(a){var t=rc&&rc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=rc&&rc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(R0e(),a)}(rc)),rc}var nc={},gg={},vg={},_H;function D0e(){if(_H)return vg;_H=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.TermFunctionLang=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.LANG,overloads:(0,t.declare)(t.SparqlOperator.LANG).onLiteral1(()=>r=>(0,t.string)(r.language??"")).collect()})}};return vg.TermFunctionLang=u,vg}var gH;function P0e(){if(gH)return gg;gH=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.ActorFunctionFactoryTermLang=void 0;const a=Ne(),t=Ae(),u=D0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LANG],termFunction:!0})}async run(e){return new u.TermFunctionLang}};return gg.ActorFunctionFactoryTermLang=n,gg}var vH;function j0e(){return vH||(vH=1,function(a){var t=nc&&nc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=nc&&nc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(P0e(),a)}(nc)),nc}var ic={},Tg={},wg={},TH;function L0e(){if(TH)return wg;TH=1,Object.defineProperty(wg,"__esModule",{value:!0}),wg.TermFunctionLangmatches=void 0;const a=Ne(),t=Ae();let u=class ap extends a.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.LANG_MATCHES,overloads:(0,t.declare)(t.SparqlOperator.LANG_MATCHES).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.bool)(ap.langMatches(r,e))).collect()})}static langMatches(r,e){const i=r.split("-"),o=e.split("-");if(!ap.matchLangTag(o[0],i[0])&&!ap.isWildCard(i[0]))return!1;let c=1,s=1;for(;s<o.length;){if(ap.isWildCard(o[s])){s++;continue}if(c===i.length)return!1;if(ap.matchLangTag(o[s],i[c])){c++,s++;continue}if(i[c].length===1)return!1;c++}return!0}static isWildCard(r){return r==="*"}static matchLangTag(r,e){return new RegExp(`/${r}/`,"iu").test(`/${e}/`)}};return wg.TermFunctionLangmatches=u,wg}var wH;function M0e(){if(wH)return Tg;wH=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.ActorFunctionFactoryTermLangmatches=void 0;const a=Ne(),t=Ae(),u=L0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LANG_MATCHES],termFunction:!0})}async run(e){return new u.TermFunctionLangmatches}};return Tg.ActorFunctionFactoryTermLangmatches=n,Tg}var SH;function C0e(){return SH||(SH=1,function(a){var t=ic&&ic.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ic&&ic.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(M0e(),a)}(ic)),ic}var ac={},Sg={},Og={},OH;function q0e(){if(OH)return Og;OH=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.TermFunctionLcase=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.LCASE,overloads:(0,t.declare)(t.SparqlOperator.LCASE).onString1Typed(()=>r=>(0,t.string)(r.toLowerCase())).onLangString1(()=>r=>(0,t.langString)(r.typedValue.toLowerCase(),r.language)).collect()})}};return Og.TermFunctionLcase=u,Og}var AH;function B0e(){if(AH)return Sg;AH=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.ActorFunctionFactoryTermLcase=void 0;const a=Ne(),t=Ae(),u=q0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LCASE],termFunction:!0})}async run(e){return new u.TermFunctionLcase}};return Sg.ActorFunctionFactoryTermLcase=n,Sg}var EH;function $0e(){return EH||(EH=1,function(a){var t=ac&&ac.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ac&&ac.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(B0e(),a)}(ac)),ac}var uc={},Ag={},Eg={},DR={exports:{}},IH;function V0e(){return IH||(IH=1,function(a,t){(function(u){a.exports=u()})(function(u){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(y,g){var m=y[0],v=y[1],T=y[2],S=y[3];m+=(v&T|~v&S)+g[0]-680876936|0,m=(m<<7|m>>>25)+v|0,S+=(m&v|~m&T)+g[1]-389564586|0,S=(S<<12|S>>>20)+m|0,T+=(S&m|~S&v)+g[2]+606105819|0,T=(T<<17|T>>>15)+S|0,v+=(T&S|~T&m)+g[3]-1044525330|0,v=(v<<22|v>>>10)+T|0,m+=(v&T|~v&S)+g[4]-176418897|0,m=(m<<7|m>>>25)+v|0,S+=(m&v|~m&T)+g[5]+1200080426|0,S=(S<<12|S>>>20)+m|0,T+=(S&m|~S&v)+g[6]-1473231341|0,T=(T<<17|T>>>15)+S|0,v+=(T&S|~T&m)+g[7]-45705983|0,v=(v<<22|v>>>10)+T|0,m+=(v&T|~v&S)+g[8]+1770035416|0,m=(m<<7|m>>>25)+v|0,S+=(m&v|~m&T)+g[9]-1958414417|0,S=(S<<12|S>>>20)+m|0,T+=(S&m|~S&v)+g[10]-42063|0,T=(T<<17|T>>>15)+S|0,v+=(T&S|~T&m)+g[11]-1990404162|0,v=(v<<22|v>>>10)+T|0,m+=(v&T|~v&S)+g[12]+1804603682|0,m=(m<<7|m>>>25)+v|0,S+=(m&v|~m&T)+g[13]-40341101|0,S=(S<<12|S>>>20)+m|0,T+=(S&m|~S&v)+g[14]-1502002290|0,T=(T<<17|T>>>15)+S|0,v+=(T&S|~T&m)+g[15]+1236535329|0,v=(v<<22|v>>>10)+T|0,m+=(v&S|T&~S)+g[1]-165796510|0,m=(m<<5|m>>>27)+v|0,S+=(m&T|v&~T)+g[6]-1069501632|0,S=(S<<9|S>>>23)+m|0,T+=(S&v|m&~v)+g[11]+643717713|0,T=(T<<14|T>>>18)+S|0,v+=(T&m|S&~m)+g[0]-373897302|0,v=(v<<20|v>>>12)+T|0,m+=(v&S|T&~S)+g[5]-701558691|0,m=(m<<5|m>>>27)+v|0,S+=(m&T|v&~T)+g[10]+38016083|0,S=(S<<9|S>>>23)+m|0,T+=(S&v|m&~v)+g[15]-660478335|0,T=(T<<14|T>>>18)+S|0,v+=(T&m|S&~m)+g[4]-405537848|0,v=(v<<20|v>>>12)+T|0,m+=(v&S|T&~S)+g[9]+568446438|0,m=(m<<5|m>>>27)+v|0,S+=(m&T|v&~T)+g[14]-1019803690|0,S=(S<<9|S>>>23)+m|0,T+=(S&v|m&~v)+g[3]-187363961|0,T=(T<<14|T>>>18)+S|0,v+=(T&m|S&~m)+g[8]+1163531501|0,v=(v<<20|v>>>12)+T|0,m+=(v&S|T&~S)+g[13]-1444681467|0,m=(m<<5|m>>>27)+v|0,S+=(m&T|v&~T)+g[2]-51403784|0,S=(S<<9|S>>>23)+m|0,T+=(S&v|m&~v)+g[7]+1735328473|0,T=(T<<14|T>>>18)+S|0,v+=(T&m|S&~m)+g[12]-1926607734|0,v=(v<<20|v>>>12)+T|0,m+=(v^T^S)+g[5]-378558|0,m=(m<<4|m>>>28)+v|0,S+=(m^v^T)+g[8]-2022574463|0,S=(S<<11|S>>>21)+m|0,T+=(S^m^v)+g[11]+1839030562|0,T=(T<<16|T>>>16)+S|0,v+=(T^S^m)+g[14]-35309556|0,v=(v<<23|v>>>9)+T|0,m+=(v^T^S)+g[1]-1530992060|0,m=(m<<4|m>>>28)+v|0,S+=(m^v^T)+g[4]+1272893353|0,S=(S<<11|S>>>21)+m|0,T+=(S^m^v)+g[7]-155497632|0,T=(T<<16|T>>>16)+S|0,v+=(T^S^m)+g[10]-1094730640|0,v=(v<<23|v>>>9)+T|0,m+=(v^T^S)+g[13]+681279174|0,m=(m<<4|m>>>28)+v|0,S+=(m^v^T)+g[0]-358537222|0,S=(S<<11|S>>>21)+m|0,T+=(S^m^v)+g[3]-722521979|0,T=(T<<16|T>>>16)+S|0,v+=(T^S^m)+g[6]+76029189|0,v=(v<<23|v>>>9)+T|0,m+=(v^T^S)+g[9]-640364487|0,m=(m<<4|m>>>28)+v|0,S+=(m^v^T)+g[12]-421815835|0,S=(S<<11|S>>>21)+m|0,T+=(S^m^v)+g[15]+530742520|0,T=(T<<16|T>>>16)+S|0,v+=(T^S^m)+g[2]-995338651|0,v=(v<<23|v>>>9)+T|0,m+=(T^(v|~S))+g[0]-198630844|0,m=(m<<6|m>>>26)+v|0,S+=(v^(m|~T))+g[7]+1126891415|0,S=(S<<10|S>>>22)+m|0,T+=(m^(S|~v))+g[14]-1416354905|0,T=(T<<15|T>>>17)+S|0,v+=(S^(T|~m))+g[5]-57434055|0,v=(v<<21|v>>>11)+T|0,m+=(T^(v|~S))+g[12]+1700485571|0,m=(m<<6|m>>>26)+v|0,S+=(v^(m|~T))+g[3]-1894986606|0,S=(S<<10|S>>>22)+m|0,T+=(m^(S|~v))+g[10]-1051523|0,T=(T<<15|T>>>17)+S|0,v+=(S^(T|~m))+g[1]-2054922799|0,v=(v<<21|v>>>11)+T|0,m+=(T^(v|~S))+g[8]+1873313359|0,m=(m<<6|m>>>26)+v|0,S+=(v^(m|~T))+g[15]-30611744|0,S=(S<<10|S>>>22)+m|0,T+=(m^(S|~v))+g[6]-1560198380|0,T=(T<<15|T>>>17)+S|0,v+=(S^(T|~m))+g[13]+1309151649|0,v=(v<<21|v>>>11)+T|0,m+=(T^(v|~S))+g[4]-145523070|0,m=(m<<6|m>>>26)+v|0,S+=(v^(m|~T))+g[11]-1120210379|0,S=(S<<10|S>>>22)+m|0,T+=(m^(S|~v))+g[2]+718787259|0,T=(T<<15|T>>>17)+S|0,v+=(S^(T|~m))+g[9]-343485551|0,v=(v<<21|v>>>11)+T|0,y[0]=m+y[0]|0,y[1]=v+y[1]|0,y[2]=T+y[2]|0,y[3]=S+y[3]|0}function e(y){var g=[],m;for(m=0;m<64;m+=4)g[m>>2]=y.charCodeAt(m)+(y.charCodeAt(m+1)<<8)+(y.charCodeAt(m+2)<<16)+(y.charCodeAt(m+3)<<24);return g}function i(y){var g=[],m;for(m=0;m<64;m+=4)g[m>>2]=y[m]+(y[m+1]<<8)+(y[m+2]<<16)+(y[m+3]<<24);return g}function o(y){var g=y.length,m=[1732584193,-271733879,-1732584194,271733878],v,T,S,x,L,O;for(v=64;v<=g;v+=64)r(m,e(y.substring(v-64,v)));for(y=y.substring(v-64),T=y.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=0;v<T;v+=1)S[v>>2]|=y.charCodeAt(v)<<(v%4<<3);if(S[v>>2]|=128<<(v%4<<3),v>55)for(r(m,S),v=0;v<16;v+=1)S[v]=0;return x=g*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(x[2],16),O=parseInt(x[1],16)||0,S[14]=L,S[15]=O,r(m,S),m}function c(y){var g=y.length,m=[1732584193,-271733879,-1732584194,271733878],v,T,S,x,L,O;for(v=64;v<=g;v+=64)r(m,i(y.subarray(v-64,v)));for(y=v-64<g?y.subarray(v-64):new Uint8Array(0),T=y.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=0;v<T;v+=1)S[v>>2]|=y[v]<<(v%4<<3);if(S[v>>2]|=128<<(v%4<<3),v>55)for(r(m,S),v=0;v<16;v+=1)S[v]=0;return x=g*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(x[2],16),O=parseInt(x[1],16)||0,S[14]=L,S[15]=O,r(m,S),m}function s(y){var g="",m;for(m=0;m<4;m+=1)g+=n[y>>m*8+4&15]+n[y>>m*8&15];return g}function l(y){var g;for(g=0;g<y.length;g+=1)y[g]=s(y[g]);return y.join("")}l(o("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function y(g,m){return g=g|0||0,g<0?Math.max(g+m,0):Math.min(g,m)}ArrayBuffer.prototype.slice=function(g,m){var v=this.byteLength,T=y(g,v),S=v,x,L,O,w;return m!==u&&(S=y(m,v)),T>S?new ArrayBuffer(0):(x=S-T,L=new ArrayBuffer(x),O=new Uint8Array(L),w=new Uint8Array(this,T,x),O.set(w),L)}}();function d(y){return/[\u0080-\uFFFF]/.test(y)&&(y=unescape(encodeURIComponent(y))),y}function f(y,g){var m=y.length,v=new ArrayBuffer(m),T=new Uint8Array(v),S;for(S=0;S<m;S+=1)T[S]=y.charCodeAt(S);return g?T:v}function h(y){return String.fromCharCode.apply(null,new Uint8Array(y))}function p(y,g,m){var v=new Uint8Array(y.byteLength+g.byteLength);return v.set(new Uint8Array(y)),v.set(new Uint8Array(g),y.byteLength),v}function b(y){var g=[],m=y.length,v;for(v=0;v<m-1;v+=2)g.push(parseInt(y.substr(v,2),16));return String.fromCharCode.apply(String,g)}function _(){this.reset()}return _.prototype.append=function(y){return this.appendBinary(d(y)),this},_.prototype.appendBinary=function(y){this._buff+=y,this._length+=y.length;var g=this._buff.length,m;for(m=64;m<=g;m+=64)r(this._hash,e(this._buff.substring(m-64,m)));return this._buff=this._buff.substring(m-64),this},_.prototype.end=function(y){var g=this._buff,m=g.length,v,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S;for(v=0;v<m;v+=1)T[v>>2]|=g.charCodeAt(v)<<(v%4<<3);return this._finish(T,m),S=l(this._hash),y&&(S=b(S)),this.reset(),S},_.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},_.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},_.prototype.setState=function(y){return this._buff=y.buff,this._length=y.length,this._hash=y.hash,this},_.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},_.prototype._finish=function(y,g){var m=g,v,T,S;if(y[m>>2]|=128<<(m%4<<3),m>55)for(r(this._hash,y),m=0;m<16;m+=1)y[m]=0;v=this._length*8,v=v.toString(16).match(/(.*?)(.{0,8})$/),T=parseInt(v[2],16),S=parseInt(v[1],16)||0,y[14]=T,y[15]=S,r(this._hash,y)},_.hash=function(y,g){return _.hashBinary(d(y),g)},_.hashBinary=function(y,g){var m=o(y),v=l(m);return g?b(v):v},_.ArrayBuffer=function(){this.reset()},_.ArrayBuffer.prototype.append=function(y){var g=p(this._buff.buffer,y),m=g.length,v;for(this._length+=y.byteLength,v=64;v<=m;v+=64)r(this._hash,i(g.subarray(v-64,v)));return this._buff=v-64<m?new Uint8Array(g.buffer.slice(v-64)):new Uint8Array(0),this},_.ArrayBuffer.prototype.end=function(y){var g=this._buff,m=g.length,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T,S;for(T=0;T<m;T+=1)v[T>>2]|=g[T]<<(T%4<<3);return this._finish(v,m),S=l(this._hash),y&&(S=b(S)),this.reset(),S},_.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},_.ArrayBuffer.prototype.getState=function(){var y=_.prototype.getState.call(this);return y.buff=h(y.buff),y},_.ArrayBuffer.prototype.setState=function(y){return y.buff=f(y.buff,!0),_.prototype.setState.call(this,y)},_.ArrayBuffer.prototype.destroy=_.prototype.destroy,_.ArrayBuffer.prototype._finish=_.prototype._finish,_.ArrayBuffer.hash=function(y,g){var m=c(new Uint8Array(y)),v=l(m);return g?b(v):v},_})}(DR)),DR.exports}var xH;function U0e(){if(xH)return Eg;xH=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.TermFunctionMd5=void 0;const a=Ne(),t=Ae(),u=V0e();let n=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.MD5,overloads:(0,t.declare)(t.SparqlOperator.MD5).onString1Typed(()=>e=>(0,t.string)((0,u.hash)(e))).collect()})}};return Eg.TermFunctionMd5=n,Eg}var NH;function Q0e(){if(NH)return Ag;NH=1,Object.defineProperty(Ag,"__esModule",{value:!0}),Ag.ActorFunctionFactoryTermMd5=void 0;const a=Ne(),t=Ae(),u=U0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MD5],termFunction:!0})}async run(e){return new u.TermFunctionMd5}};return Ag.ActorFunctionFactoryTermMd5=n,Ag}var RH;function H0e(){return RH||(RH=1,function(a){var t=uc&&uc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=uc&&uc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Q0e(),a)}(uc)),uc}var oc={},Ig={},xg={},FH;function G0e(){if(FH)return xg;FH=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.TermFunctionMinutes=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.MINUTES,overloads:(0,t.declare)(t.SparqlOperator.MINUTES).onDateTime1(()=>r=>(0,t.integer)(r.typedValue.minutes)).set([t.TypeURL.XSD_TIME],()=>([r])=>(0,t.integer)(r.typedValue.minutes)).collect()})}};return xg.TermFunctionMinutes=u,xg}var DH;function z0e(){if(DH)return Ig;DH=1,Object.defineProperty(Ig,"__esModule",{value:!0}),Ig.ActorFunctionFactoryTermMinutes=void 0;const a=Ne(),t=Ae(),u=G0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MINUTES],termFunction:!0})}async run(e){return new u.TermFunctionMinutes}};return Ig.ActorFunctionFactoryTermMinutes=n,Ig}var PH;function k0e(){return PH||(PH=1,function(a){var t=oc&&oc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=oc&&oc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(z0e(),a)}(oc)),oc}var sc={},Ng={},Rg={},jH;function X0e(){if(jH)return Rg;jH=1,Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.TermFunctionMonth=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.MONTH,overloads:(0,t.declare)(t.SparqlOperator.MONTH).onDateTime1(()=>r=>(0,t.integer)(r.typedValue.month)).set([t.TypeURL.XSD_DATE],()=>([r])=>(0,t.integer)(r.typedValue.month)).collect()})}};return Rg.TermFunctionMonth=u,Rg}var LH;function J0e(){if(LH)return Ng;LH=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.ActorFunctionFactoryTermMonth=void 0;const a=Ne(),t=Ae(),u=X0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MONTH],termFunction:!0})}async run(e){return new u.TermFunctionMonth}};return Ng.ActorFunctionFactoryTermMonth=n,Ng}var MH;function K0e(){return MH||(MH=1,function(a){var t=sc&&sc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=sc&&sc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(J0e(),a)}(sc)),sc}var cc={},Fg={},Dg={},CH;function W0e(){if(CH)return Dg;CH=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.TermFunctionMultiplication=void 0;const a=Ne(),t=Ae(),u=EA();let n=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.MULTIPLICATION,overloads:(0,t.declare)(t.SparqlOperator.MULTIPLICATION).arithmetic(()=>(e,i)=>new u.BigNumber(e).times(i).toNumber()).collect()})}};return Dg.TermFunctionMultiplication=n,Dg}var qH;function Y0e(){if(qH)return Fg;qH=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.ActorFunctionFactoryTermMultiplication=void 0;const a=Ne(),t=Ae(),u=W0e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MULTIPLICATION],termFunction:!0})}async run(e){return new u.TermFunctionMultiplication}};return Fg.ActorFunctionFactoryTermMultiplication=n,Fg}var BH;function Z0e(){return BH||(BH=1,function(a){var t=cc&&cc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=cc&&cc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Y0e(),a)}(cc)),cc}var lc={},Pg={},jg={},$H;function eye(){if($H)return jg;$H=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.TermFunctionNot=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.NOT,overloads:(0,t.declare)(t.SparqlOperator.NOT).onTerm1(()=>r=>(0,t.bool)(!r.coerceEBV())).collect()})}};return jg.TermFunctionNot=u,jg}var VH;function tye(){if(VH)return Pg;VH=1,Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.ActorFunctionFactoryTermNot=void 0;const a=Ne(),t=Ae(),u=eye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOT],termFunction:!0})}async run(e){return new u.TermFunctionNot}};return Pg.ActorFunctionFactoryTermNot=n,Pg}var UH;function rye(){return UH||(UH=1,function(a){var t=lc&&lc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=lc&&lc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(tye(),a)}(lc)),lc}var dc={},Lg={},Mg={},QH;function nye(){if(QH)return Mg;QH=1,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.TermFunctionNow=void 0;const a=Ne(),t=ze(),u=Ae();let n=class extends a.TermFunctionBase{constructor(){super({arity:0,operator:u.SparqlOperator.NOW,overloads:(0,u.declare)(u.SparqlOperator.NOW).set([],e=>()=>new u.DateTimeLiteral((0,u.toDateTimeRepresentation)({date:e.context.getSafe(t.KeysInitQuery.queryTimestamp),timeZone:e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)}))).collect()})}};return Mg.TermFunctionNow=n,Mg}var HH;function iye(){if(HH)return Lg;HH=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.ActorFunctionFactoryTermNow=void 0;const a=Ne(),t=Ae(),u=nye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOW],termFunction:!0})}async run(e){return new u.TermFunctionNow}};return Lg.ActorFunctionFactoryTermNow=n,Lg}var GH;function aye(){return GH||(GH=1,function(a){var t=dc&&dc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=dc&&dc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(iye(),a)}(dc)),dc}var fc={},Cg={},qg={},zH;function uye(){if(zH)return qg;zH=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.TermFunctionObject=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.OBJECT,overloads:(0,t.declare)(t.SparqlOperator.OBJECT).onQuad1(()=>r=>r.object).collect()})}};return qg.TermFunctionObject=u,qg}var kH;function oye(){if(kH)return Cg;kH=1,Object.defineProperty(Cg,"__esModule",{value:!0}),Cg.ActorFunctionFactoryTermObject=void 0;const a=Ne(),t=Ae(),u=uye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.OBJECT],termFunction:!0})}async run(e){return new u.TermFunctionObject}};return Cg.ActorFunctionFactoryTermObject=n,Cg}var XH;function sye(){return XH||(XH=1,function(a){var t=fc&&fc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=fc&&fc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(oye(),a)}(fc)),fc}var hc={},Bg={},$g={},JH;function cye(){if(JH)return $g;JH=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.TermFunctionPredicate=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.PREDICATE,overloads:(0,t.declare)(t.SparqlOperator.PREDICATE).onQuad1(()=>r=>r.predicate).collect()})}};return $g.TermFunctionPredicate=u,$g}var KH;function lye(){if(KH)return Bg;KH=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.ActorFunctionFactoryTermPredicate=void 0;const a=Ne(),t=Ae(),u=cye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.PREDICATE],termFunction:!0})}async run(e){return new u.TermFunctionPredicate}};return Bg.ActorFunctionFactoryTermPredicate=n,Bg}var WH;function dye(){return WH||(WH=1,function(a){var t=hc&&hc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=hc&&hc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(lye(),a)}(hc)),hc}var pc={},Vg={},Ug={},YH;function fye(){if(YH)return Ug;YH=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.TermFunctionRand=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:0,operator:t.SparqlOperator.RAND,overloads:(0,t.declare)(t.SparqlOperator.RAND).set([],()=>()=>(0,t.double)(Math.random())).collect()})}};return Ug.TermFunctionRand=u,Ug}var ZH;function hye(){if(ZH)return Vg;ZH=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.ActorFunctionFactoryTermRand=void 0;const a=Ne(),t=Ae(),u=fye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.RAND],termFunction:!0})}async run(e){return new u.TermFunctionRand}};return Vg.ActorFunctionFactoryTermRand=n,Vg}var eG;function pye(){return eG||(eG=1,function(a){var t=pc&&pc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=pc&&pc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(hye(),a)}(pc)),pc}var yc={},Qg={},Hg={},tG;function rG(){if(tG)return Hg;tG=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.TermFunctionRegex=void 0;const a=Ne(),t=Ae();let u=class Va extends a.TermFunctionBase{constructor(){super({arity:[2,3],operator:t.SparqlOperator.REGEX,overloads:(0,t.declare)(t.SparqlOperator.REGEX).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],Va.regex2).onTernaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],Va.regex3).collect()})}static regex2(){return(r,e)=>(0,t.bool)(Va.matches(r,e))}static regex3(){return(r,e,i)=>(0,t.bool)(Va.matches(r,e,i))}static matches(r,e,i=""){return i=Va.cleanFlags(i),i.includes("x")&&(e=Va.flagX(e)),i.includes("q")&&(e=Va.flagQ(e)),new RegExp(e,i.replaceAll(/[qx]/gu,"")).test(r)}static cleanFlags(r){if(!/^[imsxq]*$/u.test(r))throw new Error("Invalid flags");const e=[...r].find((i,o,c)=>c.indexOf(i)!==o);if(e)throw new Error(`Duplicate flag: ${e}`);return r!=null&&r.includes("q")&&(r=r.replaceAll(/[msx]/gu,"")),`${r}u`}static flagX(r){if(!r)return r;let e=r[0];for(;["	",`
`,"\r"," "].includes(e);)r=r.slice(1),e=r[0];let i=e==="[";for(let o=1;o<r.length;o++){const c=r[o];["	",`
`,"\r"," "].includes(c)&&!i?(r=r.slice(0,o)+r.slice(o+1),o--):c==="["&&e!=="\\"?i=!0:c==="]"&&e!=="\\"&&(i=!1),e=c}return r}static flagQ(r){return r.replaceAll(/([?+*.{}()[\]\\|])/gu,"\\$1").replaceAll(/^\^/gu,"\\^").replaceAll(/\$$/gu,"\\$")}};return Hg.TermFunctionRegex=u,Hg}var nG;function yye(){if(nG)return Qg;nG=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.ActorFunctionFactoryTermRegex=void 0;const a=Ne(),t=Ae(),u=rG();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.REGEX],termFunction:!0})}async run(e){return new u.TermFunctionRegex}};return Qg.ActorFunctionFactoryTermRegex=n,Qg}var iG;function aG(){return iG||(iG=1,function(a){var t=yc&&yc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=yc&&yc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(yye(),a),u(rG(),a)}(yc)),yc}var bc={},Gg={},zg={},uG;function bye(){if(uG)return zg;uG=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.TermFunctionReplace=void 0;const a=aG(),t=Ne(),u=Ae();let n=class uO extends t.TermFunctionBase{constructor(){super({arity:[3,4],operator:u.SparqlOperator.REPLACE,overloads:(0,u.declare)(u.SparqlOperator.REPLACE).onTernaryTyped([u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING],()=>(e,i,o)=>(0,u.string)(uO.replace(e,i,o))).set([u.TypeURL.RDF_LANG_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING],()=>([e,i,o])=>{const c=uO.replace(e.typedValue,i.typedValue,o.typedValue);return(0,u.langString)(c,e.language)}).onQuaternaryTyped([u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING],()=>(e,i,o,c)=>(0,u.string)(uO.replace(e,i,o,c))).set([u.TypeURL.RDF_LANG_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING],()=>([e,i,o,c])=>{const s=uO.replace(e.typedValue,i.typedValue,o.typedValue,c.typedValue);return(0,u.langString)(s,e.language)}).collect()})}static replace(e,i,o,c=""){return c=a.TermFunctionRegex.cleanFlags(c),c.includes("x")&&(i=a.TermFunctionRegex.flagX(i)),c.includes("q")?i=a.TermFunctionRegex.flagQ(i):o=o.replaceAll("$0",()=>"$&"),c=`${c.replaceAll(/[qx]/gu,"")}g`,e.replaceAll(new RegExp(i,c),o)}};return zg.TermFunctionReplace=n,zg}var oG;function mye(){if(oG)return Gg;oG=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.ActorFunctionFactoryTermReplace=void 0;const a=Ne(),t=Ae(),u=bye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.REPLACE],termFunction:!0})}async run(e){return new u.TermFunctionReplace}};return Gg.ActorFunctionFactoryTermReplace=n,Gg}var sG;function _ye(){return sG||(sG=1,function(a){var t=bc&&bc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=bc&&bc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(mye(),a)}(bc)),bc}var mc={},kg={},Xg={},cG;function gye(){if(cG)return Xg;cG=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.TermFunctionRound=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.ROUND,overloads:(0,t.declare)(t.SparqlOperator.ROUND).numericConverter(()=>r=>Math.round(r)).collect()})}};return Xg.TermFunctionRound=u,Xg}var lG;function vye(){if(lG)return kg;lG=1,Object.defineProperty(kg,"__esModule",{value:!0}),kg.ActorFunctionFactoryTermRound=void 0;const a=Ne(),t=Ae(),u=gye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ROUND],termFunction:!0})}async run(e){return new u.TermFunctionRound}};return kg.ActorFunctionFactoryTermRound=n,kg}var dG;function Tye(){return dG||(dG=1,function(a){var t=mc&&mc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=mc&&mc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(vye(),a)}(mc)),mc}var _c={},Jg={},Kg={},fG;function wye(){if(fG)return Kg;fG=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.TermFunctionSeconds=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SECONDS,overloads:(0,t.declare)(t.SparqlOperator.SECONDS).onDateTime1(()=>r=>(0,t.decimal)(r.typedValue.seconds)).set([t.TypeURL.XSD_TIME],()=>([r])=>(0,t.integer)(r.typedValue.seconds)).collect()})}};return Kg.TermFunctionSeconds=u,Kg}var hG;function Sye(){if(hG)return Jg;hG=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.ActorFunctionFactoryTermSeconds=void 0;const a=Ne(),t=Ae(),u=wye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SECONDS],termFunction:!0})}async run(e){return new u.TermFunctionSeconds}};return Jg.ActorFunctionFactoryTermSeconds=n,Jg}var pG;function Oye(){return pG||(pG=1,function(a){var t=_c&&_c.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=_c&&_c.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Sye(),a)}(_c)),_c}var gc={},Wg={},Yg={},yG;function Aye(){if(yG)return Yg;yG=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.TermFunctionSha1=void 0;const a=Ne(),t=Ae(),u=I0();let n=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA1,overloads:(0,t.declare)(t.SparqlOperator.SHA1).onString1Typed(()=>e=>(0,t.string)((0,u.sha1)().update(e).digest("hex"))).collect()})}};return Yg.TermFunctionSha1=n,Yg}var bG;function Eye(){if(bG)return Wg;bG=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.ActorFunctionFactoryTermSha1=void 0;const a=Ne(),t=Ae(),u=Aye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA1],termFunction:!0})}async run(e){return new u.TermFunctionSha1}};return Wg.ActorFunctionFactoryTermSha1=n,Wg}var mG;function Iye(){return mG||(mG=1,function(a){var t=gc&&gc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=gc&&gc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Eye(),a)}(gc)),gc}var vc={},Zg={},ev={},_G;function xye(){if(_G)return ev;_G=1,Object.defineProperty(ev,"__esModule",{value:!0}),ev.TermFunctionSha256=void 0;const a=Ne(),t=Ae(),u=I0();let n=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA256,overloads:(0,t.declare)(t.SparqlOperator.SHA256).onString1Typed(()=>e=>(0,t.string)((0,u.sha256)().update(e).digest("hex"))).collect()})}};return ev.TermFunctionSha256=n,ev}var gG;function Nye(){if(gG)return Zg;gG=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.ActorFunctionFactoryTermSha256=void 0;const a=Ne(),t=Ae(),u=xye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA256],termFunction:!0})}async run(e){return new u.TermFunctionSha256}};return Zg.ActorFunctionFactoryTermSha256=n,Zg}var vG;function Rye(){return vG||(vG=1,function(a){var t=vc&&vc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=vc&&vc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Nye(),a)}(vc)),vc}var Tc={},tv={},rv={},TG;function Fye(){if(TG)return rv;TG=1,Object.defineProperty(rv,"__esModule",{value:!0}),rv.TermFunctionSha384=void 0;const a=Ne(),t=Ae(),u=I0();let n=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA384,overloads:(0,t.declare)(t.SparqlOperator.SHA384).onString1Typed(()=>e=>(0,t.string)((0,u.sha384)().update(e).digest("hex"))).collect()})}};return rv.TermFunctionSha384=n,rv}var wG;function Dye(){if(wG)return tv;wG=1,Object.defineProperty(tv,"__esModule",{value:!0}),tv.ActorFunctionFactoryTermSha384=void 0;const a=Ne(),t=Ae(),u=Fye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA384],termFunction:!0})}async run(e){return new u.TermFunctionSha384}};return tv.ActorFunctionFactoryTermSha384=n,tv}var SG;function Pye(){return SG||(SG=1,function(a){var t=Tc&&Tc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Tc&&Tc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Dye(),a)}(Tc)),Tc}var wc={},nv={},iv={},OG;function jye(){if(OG)return iv;OG=1,Object.defineProperty(iv,"__esModule",{value:!0}),iv.TermFunctionSha512=void 0;const a=Ne(),t=Ae(),u=I0();let n=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA512,overloads:(0,t.declare)(t.SparqlOperator.SHA512).onString1Typed(()=>e=>(0,t.string)((0,u.sha512)().update(e).digest("hex"))).collect()})}};return iv.TermFunctionSha512=n,iv}var AG;function Lye(){if(AG)return nv;AG=1,Object.defineProperty(nv,"__esModule",{value:!0}),nv.ActorFunctionFactoryTermSha512=void 0;const a=Ne(),t=Ae(),u=jye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA512],termFunction:!0})}async run(e){return new u.TermFunctionSha512}};return nv.ActorFunctionFactoryTermSha512=n,nv}var EG;function Mye(){return EG||(EG=1,function(a){var t=wc&&wc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=wc&&wc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Lye(),a)}(wc)),wc}var Sc={},av={},uv={},IG;function Cye(){if(IG)return uv;IG=1,Object.defineProperty(uv,"__esModule",{value:!0}),uv.TermFunctionStrAfter=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRAFTER,overloads:(0,t.declare)(t.SparqlOperator.STRAFTER).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.string)(r.slice(r.indexOf(e)).slice(e.length))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>{const[i,o]=[r.typedValue,e.typedValue],c=i.slice(i.indexOf(o)).slice(o.length);return c||!o?(0,t.langString)(c,r.language):(0,t.string)(c)}).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(r,e)=>{if(r.language!==e.language)throw new t.IncompatibleLanguageOperation(r,e);const[i,o]=[r.typedValue,e.typedValue],c=i.slice(i.indexOf(o)).slice(o.length);return c||!o?(0,t.langString)(c,r.language):(0,t.string)(c)}).collect()})}};return uv.TermFunctionStrAfter=u,uv}var xG;function qye(){if(xG)return av;xG=1,Object.defineProperty(av,"__esModule",{value:!0}),av.ActorFunctionFactoryTermStrAfter=void 0;const a=Ne(),t=Ae(),u=Cye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRAFTER],termFunction:!0})}async run(e){return new u.TermFunctionStrAfter}};return av.ActorFunctionFactoryTermStrAfter=n,av}var NG;function Bye(){return NG||(NG=1,function(a){var t=Sc&&Sc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Sc&&Sc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(qye(),a)}(Sc)),Sc}var Oc={},ov={},sv={},RG;function $ye(){if(RG)return sv;RG=1,Object.defineProperty(sv,"__esModule",{value:!0}),sv.TermFunctionStrBefore=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRBEFORE,overloads:(0,t.declare)(t.SparqlOperator.STRBEFORE).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.string)(r.slice(0,Math.max(0,r.indexOf(e))))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>{const[i,o]=[r.typedValue,e.typedValue],c=r.typedValue.slice(0,Math.max(0,i.indexOf(o)));return c||!o?(0,t.langString)(c,r.language):(0,t.string)(c)}).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(r,e)=>{if(r.language!==e.language)throw new t.IncompatibleLanguageOperation(r,e);const[i,o]=[r.typedValue,e.typedValue],c=r.typedValue.slice(0,Math.max(0,i.indexOf(o)));return c||!o?(0,t.langString)(c,r.language):(0,t.string)(c)}).collect()})}};return sv.TermFunctionStrBefore=u,sv}var FG;function Vye(){if(FG)return ov;FG=1,Object.defineProperty(ov,"__esModule",{value:!0}),ov.ActorFunctionFactoryTermStrBefore=void 0;const a=Ne(),t=Ae(),u=$ye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRBEFORE],termFunction:!0})}async run(e){return new u.TermFunctionStrBefore}};return ov.ActorFunctionFactoryTermStrBefore=n,ov}var DG;function Uye(){return DG||(DG=1,function(a){var t=Oc&&Oc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Oc&&Oc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Vye(),a)}(Oc)),Oc}var Ac={},cv={},lv={},PG;function Qye(){if(PG)return lv;PG=1,Object.defineProperty(lv,"__esModule",{value:!0}),lv.TermFunctionStrDt=void 0;const a=Ne(),t=ze(),u=Ae();let n=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:u.SparqlOperator.STRDT,overloads:(0,u.declare)(u.SparqlOperator.STRDT).set([u.TypeURL.XSD_STRING,"namedNode"],e=>([i,o])=>{const c=e.context.getSafe(t.KeysInitQuery.dataFactory),s=c.literal(i.typedValue,c.namedNode(o.value));return new u.TermTransformer(e.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider)).transformLiteral(s)}).collect()})}};return lv.TermFunctionStrDt=n,lv}var jG;function Hye(){if(jG)return cv;jG=1,Object.defineProperty(cv,"__esModule",{value:!0}),cv.ActorFunctionFactoryTermStrDt=void 0;const a=Ne(),t=Ae(),u=Qye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRDT],termFunction:!0})}async run(e){return new u.TermFunctionStrDt}};return cv.ActorFunctionFactoryTermStrDt=n,cv}var LG;function Gye(){return LG||(LG=1,function(a){var t=Ac&&Ac.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ac&&Ac.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Hye(),a)}(Ac)),Ac}var Ec={},dv={},fv={},MG;function zye(){if(MG)return fv;MG=1,Object.defineProperty(fv,"__esModule",{value:!0}),fv.TermFunctionStrEnds=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRENDS,overloads:(0,t.declare)(t.SparqlOperator.STRENDS).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.bool)(r.endsWith(e))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(r,e)=>{if(r.language!==e.language)throw new t.IncompatibleLanguageOperation(r,e);return(0,t.bool)(r.typedValue.endsWith(e.typedValue))}).collect()})}};return fv.TermFunctionStrEnds=u,fv}var CG;function kye(){if(CG)return dv;CG=1,Object.defineProperty(dv,"__esModule",{value:!0}),dv.ActorFunctionFactoryTermStrEnds=void 0;const a=Ne(),t=Ae(),u=zye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRENDS],termFunction:!0})}async run(e){return new u.TermFunctionStrEnds}};return dv.ActorFunctionFactoryTermStrEnds=n,dv}var qG;function Xye(){return qG||(qG=1,function(a){var t=Ec&&Ec.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ec&&Ec.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(kye(),a)}(Ec)),Ec}var Ic={},hv={},pv={},BG;function Jye(){if(BG)return pv;BG=1,Object.defineProperty(pv,"__esModule",{value:!0}),pv.TermFunctionStrLang=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRLANG,overloads:(0,t.declare)(t.SparqlOperator.STRLANG).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>new t.LangStringLiteral(r,e.toLowerCase())).collect()})}};return pv.TermFunctionStrLang=u,pv}var $G;function Kye(){if($G)return hv;$G=1,Object.defineProperty(hv,"__esModule",{value:!0}),hv.ActorFunctionFactoryTermStrLang=void 0;const a=Ne(),t=Ae(),u=Jye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRLANG],termFunction:!0})}async run(e){return new u.TermFunctionStrLang}};return hv.ActorFunctionFactoryTermStrLang=n,hv}var VG;function Wye(){return VG||(VG=1,function(a){var t=Ic&&Ic.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ic&&Ic.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Kye(),a)}(Ic)),Ic}var xc={},yv={},bv={},UG;function Yye(){if(UG)return bv;UG=1,Object.defineProperty(bv,"__esModule",{value:!0}),bv.TermFunctionStrLen=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.STRLEN,overloads:(0,t.declare)(t.SparqlOperator.STRLEN).onStringly1(()=>r=>(0,t.integer)([...r.typedValue].length)).collect()})}};return bv.TermFunctionStrLen=u,bv}var QG;function Zye(){if(QG)return yv;QG=1,Object.defineProperty(yv,"__esModule",{value:!0}),yv.ActorFunctionFactoryTermStrLen=void 0;const a=Ne(),t=Ae(),u=Yye();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRLEN],termFunction:!0})}async run(e){return new u.TermFunctionStrLen}};return yv.ActorFunctionFactoryTermStrLen=n,yv}var HG;function e1e(){return HG||(HG=1,function(a){var t=xc&&xc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=xc&&xc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Zye(),a)}(xc)),xc}var Nc={},mv={},_v={},GG;function t1e(){if(GG)return _v;GG=1,Object.defineProperty(_v,"__esModule",{value:!0}),_v.TermFunctionStrStarts=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRSTARTS,overloads:(0,t.declare)(t.SparqlOperator.STRSTARTS).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.bool)(r.startsWith(e))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(r,e)=>{if(r.language!==e.language)throw new t.IncompatibleLanguageOperation(r,e);return(0,t.bool)(r.typedValue.startsWith(e.typedValue))}).collect()})}};return _v.TermFunctionStrStarts=u,_v}var zG;function r1e(){if(zG)return mv;zG=1,Object.defineProperty(mv,"__esModule",{value:!0}),mv.ActorFunctionFactoryTermStrStarts=void 0;const a=Ne(),t=Ae(),u=t1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRSTARTS],termFunction:!0})}async run(e){return new u.TermFunctionStrStarts}};return mv.ActorFunctionFactoryTermStrStarts=n,mv}var kG;function n1e(){return kG||(kG=1,function(a){var t=Nc&&Nc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Nc&&Nc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(r1e(),a)}(Nc)),Nc}var Rc={},gv={},vv={},PR={},IA={},XG;function i1e(){return XG||(XG=1,Object.defineProperty(IA,"__esModule",{value:!0}),IA.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),IA}var xA={},JG;function a1e(){return JG||(JG=1,Object.defineProperty(xA,"__esModule",{value:!0}),xA.default="00000000-0000-0000-0000-000000000000"),xA}var NA={},RA={},FA={},KG;function u1e(){return KG||(KG=1,Object.defineProperty(FA,"__esModule",{value:!0}),FA.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),FA}var WG;function DA(){if(WG)return RA;WG=1,Object.defineProperty(RA,"__esModule",{value:!0});const a=u1e();function t(u){return typeof u=="string"&&a.default.test(u)}return RA.default=t,RA}var YG;function PA(){if(YG)return NA;YG=1,Object.defineProperty(NA,"__esModule",{value:!0});const a=DA();function t(u){if(!(0,a.default)(u))throw TypeError("Invalid UUID");let n;return Uint8Array.of((n=parseInt(u.slice(0,8),16))>>>24,n>>>16&255,n>>>8&255,n&255,(n=parseInt(u.slice(9,13),16))>>>8,n&255,(n=parseInt(u.slice(14,18),16))>>>8,n&255,(n=parseInt(u.slice(19,23),16))>>>8,n&255,(n=parseInt(u.slice(24,36),16))/1099511627776&255,n/4294967296&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255)}return NA.default=t,NA}var Ph={},ZG;function Ea(){if(ZG)return Ph;ZG=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.unsafeStringify=void 0;const a=DA(),t=[];for(let r=0;r<256;++r)t.push((r+256).toString(16).slice(1));function u(r,e=0){return(t[r[e+0]]+t[r[e+1]]+t[r[e+2]]+t[r[e+3]]+"-"+t[r[e+4]]+t[r[e+5]]+"-"+t[r[e+6]]+t[r[e+7]]+"-"+t[r[e+8]]+t[r[e+9]]+"-"+t[r[e+10]]+t[r[e+11]]+t[r[e+12]]+t[r[e+13]]+t[r[e+14]]+t[r[e+15]]).toLowerCase()}Ph.unsafeStringify=u;function n(r,e=0){const i=u(r,e);if(!(0,a.default)(i))throw TypeError("Stringified UUID is invalid");return i}return Ph.default=n,Ph}var jh={},jA={},ez;function jR(){if(ez)return jA;ez=1,Object.defineProperty(jA,"__esModule",{value:!0});let a;const t=new Uint8Array(16);function u(){if(!a){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a=crypto.getRandomValues.bind(crypto)}return a(t)}return jA.default=u,jA}var tz;function rz(){if(tz)return jh;tz=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.updateV1State=void 0;const a=jR(),t=Ea(),u={};function n(i,o,c){var d;let s;const l=(i==null?void 0:i._v6)??!1;if(i){const f=Object.keys(i);f.length===1&&f[0]==="_v6"&&(i=void 0)}if(i)s=e(i.random??((d=i.rng)==null?void 0:d.call(i))??(0,a.default)(),i.msecs,i.nsecs,i.clockseq,i.node,o,c);else{const f=Date.now(),h=(0,a.default)();r(u,f,h),s=e(h,u.msecs,u.nsecs,l?void 0:u.clockseq,l?void 0:u.node,o,c)}return o??(0,t.unsafeStringify)(s)}function r(i,o,c){return i.msecs??(i.msecs=-1/0),i.nsecs??(i.nsecs=0),o===i.msecs?(i.nsecs++,i.nsecs>=1e4&&(i.node=void 0,i.nsecs=0)):o>i.msecs?i.nsecs=0:o<i.msecs&&(i.node=void 0),i.node||(i.node=c.slice(10,16),i.node[0]|=1,i.clockseq=(c[8]<<8|c[9])&16383),i.msecs=o,i}jh.updateV1State=r;function e(i,o,c,s,l,d,f=0){if(i.length<16)throw new Error("Random bytes length must be >= 16");if(!d)d=new Uint8Array(16),f=0;else if(f<0||f+16>d.length)throw new RangeError(`UUID byte range ${f}:${f+15} is out of buffer bounds`);o??(o=Date.now()),c??(c=0),s??(s=(i[8]<<8|i[9])&16383),l??(l=i.slice(10,16)),o+=122192928e5;const h=((o&268435455)*1e4+c)%4294967296;d[f++]=h>>>24&255,d[f++]=h>>>16&255,d[f++]=h>>>8&255,d[f++]=h&255;const p=o/4294967296*1e4&268435455;d[f++]=p>>>8&255,d[f++]=p&255,d[f++]=p>>>24&15|16,d[f++]=p>>>16&255,d[f++]=s>>>8|128,d[f++]=s&255;for(let b=0;b<6;++b)d[f++]=l[b];return d}return jh.default=n,jh}var LA={},nz;function iz(){if(nz)return LA;nz=1,Object.defineProperty(LA,"__esModule",{value:!0});const a=PA(),t=Ea();function u(r){const e=typeof r=="string"?(0,a.default)(r):r,i=n(e);return typeof r=="string"?(0,t.unsafeStringify)(i):i}LA.default=u;function n(r){return Uint8Array.of((r[6]&15)<<4|r[7]>>4&15,(r[7]&15)<<4|(r[4]&240)>>4,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,(r[1]&15)<<4|(r[2]&240)>>4,96|r[2]&15,r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}return LA}var LR={},MA={},az;function o1e(){if(az)return MA;az=1,Object.defineProperty(MA,"__esModule",{value:!0});function a(f){const h=r(f),p=n(h,f.length*8);return t(p)}function t(f){const h=new Uint8Array(f.length*4);for(let p=0;p<f.length*4;p++)h[p]=f[p>>2]>>>p%4*8&255;return h}function u(f){return(f+64>>>9<<4)+14+1}function n(f,h){const p=new Uint32Array(u(h)).fill(0);p.set(f),p[h>>5]|=128<<h%32,p[p.length-1]=h,f=p;let b=1732584193,_=-271733879,y=-1732584194,g=271733878;for(let m=0;m<f.length;m+=16){const v=b,T=_,S=y,x=g;b=c(b,_,y,g,f[m],7,-680876936),g=c(g,b,_,y,f[m+1],12,-389564586),y=c(y,g,b,_,f[m+2],17,606105819),_=c(_,y,g,b,f[m+3],22,-1044525330),b=c(b,_,y,g,f[m+4],7,-176418897),g=c(g,b,_,y,f[m+5],12,1200080426),y=c(y,g,b,_,f[m+6],17,-1473231341),_=c(_,y,g,b,f[m+7],22,-45705983),b=c(b,_,y,g,f[m+8],7,1770035416),g=c(g,b,_,y,f[m+9],12,-1958414417),y=c(y,g,b,_,f[m+10],17,-42063),_=c(_,y,g,b,f[m+11],22,-1990404162),b=c(b,_,y,g,f[m+12],7,1804603682),g=c(g,b,_,y,f[m+13],12,-40341101),y=c(y,g,b,_,f[m+14],17,-1502002290),_=c(_,y,g,b,f[m+15],22,1236535329),b=s(b,_,y,g,f[m+1],5,-165796510),g=s(g,b,_,y,f[m+6],9,-1069501632),y=s(y,g,b,_,f[m+11],14,643717713),_=s(_,y,g,b,f[m],20,-373897302),b=s(b,_,y,g,f[m+5],5,-701558691),g=s(g,b,_,y,f[m+10],9,38016083),y=s(y,g,b,_,f[m+15],14,-660478335),_=s(_,y,g,b,f[m+4],20,-405537848),b=s(b,_,y,g,f[m+9],5,568446438),g=s(g,b,_,y,f[m+14],9,-1019803690),y=s(y,g,b,_,f[m+3],14,-187363961),_=s(_,y,g,b,f[m+8],20,1163531501),b=s(b,_,y,g,f[m+13],5,-1444681467),g=s(g,b,_,y,f[m+2],9,-51403784),y=s(y,g,b,_,f[m+7],14,1735328473),_=s(_,y,g,b,f[m+12],20,-1926607734),b=l(b,_,y,g,f[m+5],4,-378558),g=l(g,b,_,y,f[m+8],11,-2022574463),y=l(y,g,b,_,f[m+11],16,1839030562),_=l(_,y,g,b,f[m+14],23,-35309556),b=l(b,_,y,g,f[m+1],4,-1530992060),g=l(g,b,_,y,f[m+4],11,1272893353),y=l(y,g,b,_,f[m+7],16,-155497632),_=l(_,y,g,b,f[m+10],23,-1094730640),b=l(b,_,y,g,f[m+13],4,681279174),g=l(g,b,_,y,f[m],11,-358537222),y=l(y,g,b,_,f[m+3],16,-722521979),_=l(_,y,g,b,f[m+6],23,76029189),b=l(b,_,y,g,f[m+9],4,-640364487),g=l(g,b,_,y,f[m+12],11,-421815835),y=l(y,g,b,_,f[m+15],16,530742520),_=l(_,y,g,b,f[m+2],23,-995338651),b=d(b,_,y,g,f[m],6,-198630844),g=d(g,b,_,y,f[m+7],10,1126891415),y=d(y,g,b,_,f[m+14],15,-1416354905),_=d(_,y,g,b,f[m+5],21,-57434055),b=d(b,_,y,g,f[m+12],6,1700485571),g=d(g,b,_,y,f[m+3],10,-1894986606),y=d(y,g,b,_,f[m+10],15,-1051523),_=d(_,y,g,b,f[m+1],21,-2054922799),b=d(b,_,y,g,f[m+8],6,1873313359),g=d(g,b,_,y,f[m+15],10,-30611744),y=d(y,g,b,_,f[m+6],15,-1560198380),_=d(_,y,g,b,f[m+13],21,1309151649),b=d(b,_,y,g,f[m+4],6,-145523070),g=d(g,b,_,y,f[m+11],10,-1120210379),y=d(y,g,b,_,f[m+2],15,718787259),_=d(_,y,g,b,f[m+9],21,-343485551),b=e(b,v),_=e(_,T),y=e(y,S),g=e(g,x)}return Uint32Array.of(b,_,y,g)}function r(f){if(f.length===0)return new Uint32Array;const h=new Uint32Array(u(f.length*8)).fill(0);for(let p=0;p<f.length;p++)h[p>>2]|=(f[p]&255)<<p%4*8;return h}function e(f,h){const p=(f&65535)+(h&65535);return(f>>16)+(h>>16)+(p>>16)<<16|p&65535}function i(f,h){return f<<h|f>>>32-h}function o(f,h,p,b,_,y){return e(i(e(e(h,f),e(b,y)),_),p)}function c(f,h,p,b,_,y,g){return o(h&p|~h&b,f,h,_,y,g)}function s(f,h,p,b,_,y,g){return o(h&b|p&~b,f,h,_,y,g)}function l(f,h,p,b,_,y,g){return o(h^p^b,f,h,_,y,g)}function d(f,h,p,b,_,y,g){return o(p^(h|~b),f,h,_,y,g)}return MA.default=a,MA}var Ei={},uz;function CA(){if(uz)return Ei;uz=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.URL=Ei.DNS=Ei.stringToBytes=void 0;const a=PA(),t=Ea();function u(r){r=unescape(encodeURIComponent(r));const e=new Uint8Array(r.length);for(let i=0;i<r.length;++i)e[i]=r.charCodeAt(i);return e}Ei.stringToBytes=u,Ei.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ei.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function n(r,e,i,o,c,s){const l=typeof i=="string"?u(i):i,d=typeof o=="string"?(0,a.default)(o):o;if(typeof o=="string"&&(o=(0,a.default)(o)),(o==null?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+l.length);if(f.set(d),f.set(l,d.length),f=e(f),f[6]=f[6]&15|r,f[8]=f[8]&63|128,c){s=s||0;for(let h=0;h<16;++h)c[s+h]=f[h];return c}return(0,t.unsafeStringify)(f)}return Ei.default=n,Ei}var oz;function s1e(){return oz||(oz=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.URL=a.DNS=void 0;const t=o1e(),u=CA();var n=CA();Object.defineProperty(a,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(a,"URL",{enumerable:!0,get:function(){return n.URL}});function r(e,i,o,c){return(0,u.default)(48,t.default,e,i,o,c)}r.DNS=u.DNS,r.URL=u.URL,a.default=r}(LR)),LR}var qA={},BA={},sz;function c1e(){if(sz)return BA;sz=1,Object.defineProperty(BA,"__esModule",{value:!0});const a=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return BA.default={randomUUID:a},BA}var cz;function l1e(){if(cz)return qA;cz=1,Object.defineProperty(qA,"__esModule",{value:!0});const a=c1e(),t=jR(),u=Ea();function n(r,e,i){var c;if(a.default.randomUUID&&!e&&!r)return a.default.randomUUID();r=r||{};const o=r.random??((c=r.rng)==null?void 0:c.call(r))??(0,t.default)();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){if(i=i||0,i<0||i+16>e.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);for(let s=0;s<16;++s)e[i+s]=o[s];return e}return(0,u.unsafeStringify)(o)}return qA.default=n,qA}var MR={},$A={},lz;function d1e(){if(lz)return $A;lz=1,Object.defineProperty($A,"__esModule",{value:!0});function a(n,r,e,i){switch(n){case 0:return r&e^~r&i;case 1:return r^e^i;case 2:return r&e^r&i^e&i;case 3:return r^e^i}}function t(n,r){return n<<r|n>>>32-r}function u(n){const r=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520],i=new Uint8Array(n.length+1);i.set(n),i[n.length]=128,n=i;const o=n.length/4+2,c=Math.ceil(o/16),s=new Array(c);for(let l=0;l<c;++l){const d=new Uint32Array(16);for(let f=0;f<16;++f)d[f]=n[l*64+f*4]<<24|n[l*64+f*4+1]<<16|n[l*64+f*4+2]<<8|n[l*64+f*4+3];s[l]=d}s[c-1][14]=(n.length-1)*8/Math.pow(2,32),s[c-1][14]=Math.floor(s[c-1][14]),s[c-1][15]=(n.length-1)*8&4294967295;for(let l=0;l<c;++l){const d=new Uint32Array(80);for(let y=0;y<16;++y)d[y]=s[l][y];for(let y=16;y<80;++y)d[y]=t(d[y-3]^d[y-8]^d[y-14]^d[y-16],1);let f=e[0],h=e[1],p=e[2],b=e[3],_=e[4];for(let y=0;y<80;++y){const g=Math.floor(y/20),m=t(f,5)+a(g,h,p,b)+_+r[g]+d[y]>>>0;_=b,b=p,p=t(h,30)>>>0,h=f,f=m}e[0]=e[0]+f>>>0,e[1]=e[1]+h>>>0,e[2]=e[2]+p>>>0,e[3]=e[3]+b>>>0,e[4]=e[4]+_>>>0}return Uint8Array.of(e[0]>>24,e[0]>>16,e[0]>>8,e[0],e[1]>>24,e[1]>>16,e[1]>>8,e[1],e[2]>>24,e[2]>>16,e[2]>>8,e[2],e[3]>>24,e[3]>>16,e[3]>>8,e[3],e[4]>>24,e[4]>>16,e[4]>>8,e[4])}return $A.default=u,$A}var dz;function f1e(){return dz||(dz=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.URL=a.DNS=void 0;const t=d1e(),u=CA();var n=CA();Object.defineProperty(a,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(a,"URL",{enumerable:!0,get:function(){return n.URL}});function r(e,i,o,c){return(0,u.default)(80,t.default,e,i,o,c)}r.DNS=u.DNS,r.URL=u.URL,a.default=r}(MR)),MR}var VA={},fz;function h1e(){if(fz)return VA;fz=1,Object.defineProperty(VA,"__esModule",{value:!0});const a=Ea(),t=rz(),u=iz();function n(r,e,i){r??(r={}),i??(i=0);let o=(0,t.default)({...r,_v6:!0},new Uint8Array(16));if(o=(0,u.default)(o),e){for(let c=0;c<16;c++)e[i+c]=o[c];return e}return(0,a.unsafeStringify)(o)}return VA.default=n,VA}var UA={},hz;function p1e(){if(hz)return UA;hz=1,Object.defineProperty(UA,"__esModule",{value:!0});const a=PA(),t=Ea();function u(r){const e=typeof r=="string"?(0,a.default)(r):r,i=n(e);return typeof r=="string"?(0,t.unsafeStringify)(i):i}UA.default=u;function n(r){return Uint8Array.of((r[3]&15)<<4|r[4]>>4&15,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|r[6]&15,r[7],(r[1]&15)<<4|(r[2]&240)>>4,(r[2]&15)<<4|(r[3]&240)>>4,16|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}return UA}var Lh={},pz;function y1e(){if(pz)return Lh;pz=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.updateV7State=void 0;const a=jR(),t=Ea(),u={};function n(i,o,c){var l;let s;if(i)s=e(i.random??((l=i.rng)==null?void 0:l.call(i))??(0,a.default)(),i.msecs,i.seq,o,c);else{const d=Date.now(),f=(0,a.default)();r(u,d,f),s=e(f,u.msecs,u.seq,o,c)}return o??(0,t.unsafeStringify)(s)}function r(i,o,c){return i.msecs??(i.msecs=-1/0),i.seq??(i.seq=0),o>i.msecs?(i.seq=c[6]<<23|c[7]<<16|c[8]<<8|c[9],i.msecs=o):(i.seq=i.seq+1|0,i.seq===0&&i.msecs++),i}Lh.updateV7State=r;function e(i,o,c,s,l=0){if(i.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),l=0;else if(l<0||l+16>s.length)throw new RangeError(`UUID byte range ${l}:${l+15} is out of buffer bounds`);return o??(o=Date.now()),c??(c=i[6]*127<<24|i[7]<<16|i[8]<<8|i[9]),s[l++]=o/1099511627776&255,s[l++]=o/4294967296&255,s[l++]=o/16777216&255,s[l++]=o/65536&255,s[l++]=o/256&255,s[l++]=o&255,s[l++]=112|c>>>28&15,s[l++]=c>>>20&255,s[l++]=128|c>>>14&63,s[l++]=c>>>6&255,s[l++]=c<<2&255|i[10]&3,s[l++]=i[11],s[l++]=i[12],s[l++]=i[13],s[l++]=i[14],s[l++]=i[15],s}return Lh.default=n,Lh}var QA={},yz;function b1e(){if(yz)return QA;yz=1,Object.defineProperty(QA,"__esModule",{value:!0});const a=DA();function t(u){if(!(0,a.default)(u))throw TypeError("Invalid UUID");return parseInt(u.slice(14,15),16)}return QA.default=t,QA}var bz;function mz(){return bz||(bz=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.version=a.validate=a.v7=a.v6ToV1=a.v6=a.v5=a.v4=a.v3=a.v1ToV6=a.v1=a.stringify=a.parse=a.NIL=a.MAX=void 0;var t=i1e();Object.defineProperty(a,"MAX",{enumerable:!0,get:function(){return t.default}});var u=a1e();Object.defineProperty(a,"NIL",{enumerable:!0,get:function(){return u.default}});var n=PA();Object.defineProperty(a,"parse",{enumerable:!0,get:function(){return n.default}});var r=Ea();Object.defineProperty(a,"stringify",{enumerable:!0,get:function(){return r.default}});var e=rz();Object.defineProperty(a,"v1",{enumerable:!0,get:function(){return e.default}});var i=iz();Object.defineProperty(a,"v1ToV6",{enumerable:!0,get:function(){return i.default}});var o=s1e();Object.defineProperty(a,"v3",{enumerable:!0,get:function(){return o.default}});var c=l1e();Object.defineProperty(a,"v4",{enumerable:!0,get:function(){return c.default}});var s=f1e();Object.defineProperty(a,"v5",{enumerable:!0,get:function(){return s.default}});var l=h1e();Object.defineProperty(a,"v6",{enumerable:!0,get:function(){return l.default}});var d=p1e();Object.defineProperty(a,"v6ToV1",{enumerable:!0,get:function(){return d.default}});var f=y1e();Object.defineProperty(a,"v7",{enumerable:!0,get:function(){return f.default}});var h=DA();Object.defineProperty(a,"validate",{enumerable:!0,get:function(){return h.default}});var p=b1e();Object.defineProperty(a,"version",{enumerable:!0,get:function(){return p.default}})}(PR)),PR}var _z;function m1e(){if(_z)return vv;_z=1,Object.defineProperty(vv,"__esModule",{value:!0}),vv.TermFunctionStrUuid=void 0;const a=Ne(),t=Ae(),u=mz();let n=class extends a.TermFunctionBase{constructor(){super({arity:0,operator:t.SparqlOperator.STRUUID,overloads:(0,t.declare)(t.SparqlOperator.STRUUID).set([],()=>()=>(0,t.string)(u.v4())).collect()})}};return vv.TermFunctionStrUuid=n,vv}var gz;function _1e(){if(gz)return gv;gz=1,Object.defineProperty(gv,"__esModule",{value:!0}),gv.ActorFunctionFactoryTermStrUuid=void 0;const a=Ne(),t=Ae(),u=m1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRUUID],termFunction:!0})}async run(e){return new u.TermFunctionStrUuid}};return gv.ActorFunctionFactoryTermStrUuid=n,gv}var vz;function g1e(){return vz||(vz=1,function(a){var t=Rc&&Rc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Rc&&Rc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(_1e(),a)}(Rc)),Rc}var Fc={},Tv={},wv={},Tz;function v1e(){if(Tz)return wv;Tz=1,Object.defineProperty(wv,"__esModule",{value:!0}),wv.TermFunctionStr=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.STR,overloads:(0,t.declare)(t.SparqlOperator.STR).onTerm1(()=>r=>(0,t.string)(r.str())).collect()})}};return wv.TermFunctionStr=u,wv}var wz;function T1e(){if(wz)return Tv;wz=1,Object.defineProperty(Tv,"__esModule",{value:!0}),Tv.ActorFunctionFactoryTermStr=void 0;const a=Ne(),t=Ae(),u=v1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STR],termFunction:!0})}async run(e){return new u.TermFunctionStr}};return Tv.ActorFunctionFactoryTermStr=n,Tv}var Sz;function w1e(){return Sz||(Sz=1,function(a){var t=Fc&&Fc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Fc&&Fc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(T1e(),a)}(Fc)),Fc}var Dc={},Sv={},Ov={},Oz;function S1e(){if(Oz)return Ov;Oz=1,Object.defineProperty(Ov,"__esModule",{value:!0}),Ov.TermFunctionSubStr=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:[2,3],operator:t.SparqlOperator.SUBSTR,overloads:(0,t.declare)(t.SparqlOperator.SUBSTR).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_INTEGER],()=>(r,e)=>(0,t.string)([...r].slice(e-1).join(""))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_INTEGER],()=>(r,e)=>{const i=[...r.typedValue].slice(e.typedValue-1).join("");return(0,t.langString)(i,r.language)}).onTernaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],()=>(r,e,i)=>(0,t.string)([...r].slice(e-1,i+e-1).join(""))).onTernary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],()=>(r,e,i)=>{const o=[...r.typedValue].slice(e.typedValue-1,i.typedValue+e.typedValue-1).join("");return(0,t.langString)(o,r.language)}).collect()})}};return Ov.TermFunctionSubStr=u,Ov}var Az;function O1e(){if(Az)return Sv;Az=1,Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.ActorFunctionFactoryTermSubStr=void 0;const a=Ne(),t=Ae(),u=S1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SUBSTR],termFunction:!0})}async run(e){return new u.TermFunctionSubStr}};return Sv.ActorFunctionFactoryTermSubStr=n,Sv}var Ez;function A1e(){return Ez||(Ez=1,function(a){var t=Dc&&Dc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Dc&&Dc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(O1e(),a)}(Dc)),Dc}var Pc={},Av={},Ev={},Iz;function E1e(){if(Iz)return Ev;Iz=1,Object.defineProperty(Ev,"__esModule",{value:!0}),Ev.TermFunctionSubject=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SUBJECT,overloads:(0,t.declare)(t.SparqlOperator.SUBJECT).onQuad1(()=>r=>r.subject).collect()})}};return Ev.TermFunctionSubject=u,Ev}var xz;function I1e(){if(xz)return Av;xz=1,Object.defineProperty(Av,"__esModule",{value:!0}),Av.ActorFunctionFactoryTermSubject=void 0;const a=Ne(),t=Ae(),u=E1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SUBJECT],termFunction:!0})}async run(e){return new u.TermFunctionSubject}};return Av.ActorFunctionFactoryTermSubject=n,Av}var Nz;function x1e(){return Nz||(Nz=1,function(a){var t=Pc&&Pc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Pc&&Pc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(I1e(),a)}(Pc)),Pc}var jc={},Iv={},xv={},Rz;function N1e(){if(Rz)return xv;Rz=1,Object.defineProperty(xv,"__esModule",{value:!0}),xv.TermFunctionSubtraction=void 0;const a=Ne(),t=ze(),u=Ae(),n=EA();let r=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:u.SparqlOperator.SUBTRACTION,overloads:(0,u.declare)(u.SparqlOperator.SUBTRACTION).arithmetic(()=>(i,o)=>new n.BigNumber(i).minus(o).toNumber()).set([u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DATE_TIME],i=>([o,c])=>new u.DayTimeDurationLiteral((0,u.elapsedDuration)(o.typedValue,c.typedValue,i.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)))).copy({from:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DATE_TIME],to:[u.TypeURL.XSD_DATE,u.TypeURL.XSD_DATE]}).copy({from:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DATE_TIME],to:[u.TypeURL.XSD_TIME,u.TypeURL.XSD_TIME]}).set([u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DAY_TIME_DURATION],()=>([i,o])=>new u.DateTimeLiteral((0,u.addDurationToDateTime)(i.typedValue,(0,u.defaultedDurationRepresentation)((0,u.negateDuration)(o.typedValue))))).copy({from:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DAY_TIME_DURATION],to:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([u.TypeURL.XSD_DATE,u.TypeURL.XSD_DAY_TIME_DURATION],()=>([i,o])=>new u.DateLiteral((0,u.addDurationToDateTime)((0,u.defaultedDateTimeRepresentation)(i.typedValue),(0,u.defaultedDurationRepresentation)((0,u.negateDuration)(o.typedValue))))).copy({from:[u.TypeURL.XSD_DATE,u.TypeURL.XSD_DAY_TIME_DURATION],to:[u.TypeURL.XSD_DATE,u.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([u.TypeURL.XSD_TIME,u.TypeURL.XSD_DAY_TIME_DURATION],()=>([i,o])=>new u.TimeLiteral((0,u.addDurationToDateTime)((0,u.defaultedDateTimeRepresentation)(i.typedValue),(0,u.defaultedDurationRepresentation)((0,u.negateDuration)(o.typedValue))))).collect()})}};return xv.TermFunctionSubtraction=r,xv}var Fz;function R1e(){if(Fz)return Iv;Fz=1,Object.defineProperty(Iv,"__esModule",{value:!0}),Iv.ActorFunctionFactoryTermSubtraction=void 0;const a=Ne(),t=Ae(),u=N1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SUBTRACTION],termFunction:!0})}async run(e){return new u.TermFunctionSubtraction}};return Iv.ActorFunctionFactoryTermSubtraction=n,Iv}var Dz;function F1e(){return Dz||(Dz=1,function(a){var t=jc&&jc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=jc&&jc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(R1e(),a)}(jc)),jc}var Lc={},Nv={},Rv={},Pz;function D1e(){if(Pz)return Rv;Pz=1,Object.defineProperty(Rv,"__esModule",{value:!0}),Rv.TermFunctionTimezone=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.TIMEZONE,overloads:(0,t.declare)(t.SparqlOperator.TIMEZONE).onDateTime1(()=>r=>{const e={hours:r.typedValue.zoneHours,minutes:r.typedValue.zoneMinutes};if(e.hours===void 0&&e.minutes===void 0)throw new t.InvalidTimezoneCall(r.str());return new t.DayTimeDurationLiteral(e)}).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_DATE]}).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_TIME]}).collect()})}};return Rv.TermFunctionTimezone=u,Rv}var jz;function P1e(){if(jz)return Nv;jz=1,Object.defineProperty(Nv,"__esModule",{value:!0}),Nv.ActorFunctionFactoryTermTimezone=void 0;const a=Ne(),t=Ae(),u=D1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.TIMEZONE],termFunction:!0})}async run(e){return new u.TermFunctionTimezone}};return Nv.ActorFunctionFactoryTermTimezone=n,Nv}var Lz;function j1e(){return Lz||(Lz=1,function(a){var t=Lc&&Lc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Lc&&Lc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(P1e(),a)}(Lc)),Lc}var Mc={},Fv={},Dv={},Mz;function L1e(){if(Mz)return Dv;Mz=1,Object.defineProperty(Dv,"__esModule",{value:!0}),Dv.TermFunctionTriple=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:3,operator:t.SparqlOperator.TRIPLE,overloads:(0,t.declare)(t.SparqlOperator.TRIPLE).onTerm3(r=>(...e)=>new t.Quad(e[0],e[1],e[2],new t.DefaultGraph)).collect()})}};return Dv.TermFunctionTriple=u,Dv}var Cz;function M1e(){if(Cz)return Fv;Cz=1,Object.defineProperty(Fv,"__esModule",{value:!0}),Fv.ActorFunctionFactoryTermTriple=void 0;const a=Ne(),t=Ae(),u=L1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.TRIPLE],termFunction:!0})}async run(e){return new u.TermFunctionTriple}};return Fv.ActorFunctionFactoryTermTriple=n,Fv}var qz;function C1e(){return qz||(qz=1,function(a){var t=Mc&&Mc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Mc&&Mc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(M1e(),a)}(Mc)),Mc}var Cc={},Pv={},jv={},Bz;function q1e(){if(Bz)return jv;Bz=1,Object.defineProperty(jv,"__esModule",{value:!0}),jv.TermFunctionTz=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.TZ,overloads:(0,t.declare)(t.SparqlOperator.TZ).onDateTime1(()=>r=>(0,t.string)((0,t.extractRawTimeZone)(r.str()))).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_DATE]}).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_TIME]}).collect()})}};return jv.TermFunctionTz=u,jv}var $z;function B1e(){if($z)return Pv;$z=1,Object.defineProperty(Pv,"__esModule",{value:!0}),Pv.ActorFunctionFactoryTermTz=void 0;const a=Ne(),t=Ae(),u=q1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.TZ],termFunction:!0})}async run(e){return new u.TermFunctionTz}};return Pv.ActorFunctionFactoryTermTz=n,Pv}var Vz;function $1e(){return Vz||(Vz=1,function(a){var t=Cc&&Cc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Cc&&Cc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(B1e(),a)}(Cc)),Cc}var qc={},Lv={},Mv={},Uz;function V1e(){if(Uz)return Mv;Uz=1,Object.defineProperty(Mv,"__esModule",{value:!0}),Mv.TermFunctionUcase=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.UCASE,overloads:(0,t.declare)(t.SparqlOperator.UCASE).onString1Typed(()=>r=>(0,t.string)(r.toUpperCase())).onLangString1(()=>r=>(0,t.langString)(r.typedValue.toUpperCase(),r.language)).collect()})}};return Mv.TermFunctionUcase=u,Mv}var Qz;function U1e(){if(Qz)return Lv;Qz=1,Object.defineProperty(Lv,"__esModule",{value:!0}),Lv.ActorFunctionFactoryTermUcase=void 0;const a=Ne(),t=Ae(),u=V1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UCASE],termFunction:!0})}async run(e){return new u.TermFunctionUcase}};return Lv.ActorFunctionFactoryTermUcase=n,Lv}var Hz;function Q1e(){return Hz||(Hz=1,function(a){var t=qc&&qc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=qc&&qc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(U1e(),a)}(qc)),qc}var Bc={},Cv={},qv={},Gz;function H1e(){if(Gz)return qv;Gz=1,Object.defineProperty(qv,"__esModule",{value:!0}),qv.TermFunctionUnaryMinus=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.UMINUS,overloads:(0,t.declare)(t.SparqlOperator.UMINUS).numericConverter(()=>r=>-r).collect()})}};return qv.TermFunctionUnaryMinus=u,qv}var zz;function G1e(){if(zz)return Cv;zz=1,Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.ActorFunctionFactoryTermUnaryMinus=void 0;const a=Ne(),t=Ae(),u=H1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UMINUS],termFunction:!0})}async run(e){return new u.TermFunctionUnaryMinus}};return Cv.ActorFunctionFactoryTermUnaryMinus=n,Cv}var kz;function z1e(){return kz||(kz=1,function(a){var t=Bc&&Bc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Bc&&Bc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(G1e(),a)}(Bc)),Bc}var $c={},Bv={},$v={},Xz;function k1e(){if(Xz)return $v;Xz=1,Object.defineProperty($v,"__esModule",{value:!0}),$v.TermFunctionUnaryPlus=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.UPLUS,overloads:(0,t.declare)(t.SparqlOperator.UPLUS).numericConverter(()=>r=>r).collect()})}};return $v.TermFunctionUnaryPlus=u,$v}var Jz;function X1e(){if(Jz)return Bv;Jz=1,Object.defineProperty(Bv,"__esModule",{value:!0}),Bv.ActorFunctionFactoryTermUnaryPlus=void 0;const a=Ne(),t=Ae(),u=k1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UPLUS],termFunction:!0})}async run(e){return new u.TermFunctionUnaryPlus}};return Bv.ActorFunctionFactoryTermUnaryPlus=n,Bv}var Kz;function J1e(){return Kz||(Kz=1,function(a){var t=$c&&$c.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=$c&&$c.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(X1e(),a)}($c)),$c}var Vc={},Vv={},Uv={},Wz;function K1e(){if(Wz)return Uv;Wz=1,Object.defineProperty(Uv,"__esModule",{value:!0}),Uv.TermFunctionUuid=void 0;const a=Ne(),t=Ae(),u=mz();let n=class extends a.TermFunctionBase{constructor(){super({arity:0,operator:t.SparqlOperator.UUID,overloads:(0,t.declare)(t.SparqlOperator.UUID).set([],()=>()=>new t.NamedNode(`urn:uuid:${u.v4()}`)).collect()})}};return Uv.TermFunctionUuid=n,Uv}var Yz;function W1e(){if(Yz)return Vv;Yz=1,Object.defineProperty(Vv,"__esModule",{value:!0}),Vv.ActorFunctionFactoryTermUuid=void 0;const a=Ne(),t=Ae(),u=K1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UUID],termFunction:!0})}async run(e){return new u.TermFunctionUuid}};return Vv.ActorFunctionFactoryTermUuid=n,Vv}var Zz;function Y1e(){return Zz||(Zz=1,function(a){var t=Vc&&Vc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Vc&&Vc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(W1e(),a)}(Vc)),Vc}var Uc={},Qv={},Hv={},ek;function Z1e(){if(ek)return Hv;ek=1,Object.defineProperty(Hv,"__esModule",{value:!0}),Hv.TermFunctionXsdToBoolean=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_BOOLEAN,overloads:(0,t.declare)(t.TypeURL.XSD_BOOLEAN).onNumeric1(()=>r=>(0,t.bool)(r.coerceEBV()),!0).onUnary(t.TypeURL.XSD_BOOLEAN,()=>r=>(0,t.bool)(r.coerceEBV()),!0).onUnary(t.TypeURL.XSD_STRING,()=>r=>{switch(r.str()){case"true":return(0,t.bool)(!0);case"false":return(0,t.bool)(!1);case"1":return(0,t.bool)(!0);case"0":return(0,t.bool)(!1);default:throw new t.CastError(r,t.TypeURL.XSD_BOOLEAN)}},!1).collect()})}};return Hv.TermFunctionXsdToBoolean=u,Hv}var tk;function ebe(){if(tk)return Qv;tk=1,Object.defineProperty(Qv,"__esModule",{value:!0}),Qv.ActorFunctionFactoryTermXsdToBoolean=void 0;const a=Ne(),t=Ae(),u=Z1e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_BOOLEAN],termFunction:!0})}async run(e){return new u.TermFunctionXsdToBoolean}};return Qv.ActorFunctionFactoryTermXsdToBoolean=n,Qv}var rk;function tbe(){return rk||(rk=1,function(a){var t=Uc&&Uc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Uc&&Uc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ebe(),a)}(Uc)),Uc}var Qc={},Gv={},zv={},nk;function rbe(){if(nk)return zv;nk=1,Object.defineProperty(zv,"__esModule",{value:!0}),zv.TermFunctionXsdToDate=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DATE,overloads:(0,t.declare)(t.TypeURL.XSD_DATE).onUnary(t.TypeURL.XSD_DATE,()=>r=>new t.DateLiteral(r.typedValue,r.strValue)).onUnary(t.TypeURL.XSD_DATE_TIME,()=>r=>new t.DateLiteral(r.typedValue)).onStringly1(()=>r=>new t.DateLiteral((0,t.parseDate)(r.str()))).collect()})}};return zv.TermFunctionXsdToDate=u,zv}var ik;function nbe(){if(ik)return Gv;ik=1,Object.defineProperty(Gv,"__esModule",{value:!0}),Gv.ActorFunctionFactoryTermXsdToDate=void 0;const a=Ne(),t=Ae(),u=rbe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DATE],termFunction:!0})}async run(e){return new u.TermFunctionXsdToDate}};return Gv.ActorFunctionFactoryTermXsdToDate=n,Gv}var ak;function ibe(){return ak||(ak=1,function(a){var t=Qc&&Qc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Qc&&Qc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(nbe(),a)}(Qc)),Qc}var Hc={},kv={},Xv={},uk;function abe(){if(uk)return Xv;uk=1,Object.defineProperty(Xv,"__esModule",{value:!0}),Xv.TermFunctionXsdToDatetime=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DATE_TIME,overloads:(0,t.declare)(t.TypeURL.XSD_DATE_TIME).onUnary(t.TypeURL.XSD_DATE_TIME,()=>r=>r).onUnary(t.TypeURL.XSD_STRING,()=>r=>(0,t.dateTime)((0,t.parseDateTime)(r.str()),r.str()),!1).onUnary(t.TypeURL.XSD_DATE,()=>r=>new t.DateTimeLiteral({...r.typedValue,hours:0,minutes:0,seconds:0})).collect()})}};return Xv.TermFunctionXsdToDatetime=u,Xv}var ok;function ube(){if(ok)return kv;ok=1,Object.defineProperty(kv,"__esModule",{value:!0}),kv.ActorFunctionFactoryTermXsdToDatetime=void 0;const a=Ne(),t=Ae(),u=abe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DATE_TIME],termFunction:!0})}async run(e){return new u.TermFunctionXsdToDatetime}};return kv.ActorFunctionFactoryTermXsdToDatetime=n,kv}var sk;function obe(){return sk||(sk=1,function(a){var t=Hc&&Hc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Hc&&Hc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ube(),a)}(Hc)),Hc}var Gc={},Jv={},Kv={},ck;function sbe(){if(ck)return Kv;ck=1,Object.defineProperty(Kv,"__esModule",{value:!0}),Kv.TermFunctionXsdToDayTimeDuration=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,t.declare)(t.TypeURL.XSD_DAY_TIME_DURATION).onUnary(t.TypeURL.XSD_DURATION,()=>r=>new t.DayTimeDurationLiteral((0,t.trimToDayTimeDuration)(r.typedValue))).onStringly1(()=>r=>new t.DayTimeDurationLiteral((0,t.parseDayTimeDuration)(r.str()))).collect()})}};return Kv.TermFunctionXsdToDayTimeDuration=u,Kv}var lk;function cbe(){if(lk)return Jv;lk=1,Object.defineProperty(Jv,"__esModule",{value:!0}),Jv.ActorFunctionFactoryTermXsdToDayTimeDuration=void 0;const a=Ne(),t=Ae(),u=sbe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DAY_TIME_DURATION],termFunction:!0})}async run(e){return new u.TermFunctionXsdToDayTimeDuration}};return Jv.ActorFunctionFactoryTermXsdToDayTimeDuration=n,Jv}var dk;function lbe(){return dk||(dk=1,function(a){var t=Gc&&Gc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Gc&&Gc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(cbe(),a)}(Gc)),Gc}var zc={},Wv={},Yv={},fk;function dbe(){if(fk)return Yv;fk=1,Object.defineProperty(Yv,"__esModule",{value:!0}),Yv.TermFunctionXsdToDecimal=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DECIMAL,overloads:(0,t.declare)(t.TypeURL.XSD_DECIMAL).onNumeric1(()=>r=>{const e=(0,t.parseXSDDecimal)(r.str());if(e===void 0)throw new t.CastError(r,t.TypeURL.XSD_DECIMAL);return(0,t.decimal)(e)}).onString1(()=>r=>{const e=r.str(),i=/^([+-])?(\d+(\.\d+)?)$/u.test(e)?(0,t.parseXSDDecimal)(e):void 0;if(i===void 0)throw new t.CastError(r,t.TypeURL.XSD_DECIMAL);return(0,t.decimal)(i)},!1).onBoolean1Typed(()=>r=>(0,t.decimal)(r?1:0)).collect()})}};return Yv.TermFunctionXsdToDecimal=u,Yv}var hk;function fbe(){if(hk)return Wv;hk=1,Object.defineProperty(Wv,"__esModule",{value:!0}),Wv.ActorFunctionFactoryTermXsdToDecimal=void 0;const a=Ne(),t=Ae(),u=dbe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DECIMAL],termFunction:!0})}async run(e){return new u.TermFunctionXsdToDecimal}};return Wv.ActorFunctionFactoryTermXsdToDecimal=n,Wv}var pk;function hbe(){return pk||(pk=1,function(a){var t=zc&&zc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=zc&&zc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(fbe(),a)}(zc)),zc}var kc={},Zv={},eT={},yk;function pbe(){if(yk)return eT;yk=1,Object.defineProperty(eT,"__esModule",{value:!0}),eT.TermFunctionXsdToDouble=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DOUBLE,overloads:(0,t.declare)(t.TypeURL.XSD_DOUBLE).onNumeric1(()=>r=>(0,t.double)(r.typedValue)).onBoolean1Typed(()=>r=>(0,t.double)(r?1:0)).onUnary(t.TypeURL.XSD_STRING,()=>r=>{const e=(0,t.parseXSDFloat)(r.str());if(e===void 0)throw new t.CastError(r,t.TypeURL.XSD_DOUBLE);return(0,t.double)(e)},!1).collect()})}};return eT.TermFunctionXsdToDouble=u,eT}var bk;function ybe(){if(bk)return Zv;bk=1,Object.defineProperty(Zv,"__esModule",{value:!0}),Zv.ActorFunctionFactoryTermXsdToDouble=void 0;const a=Ne(),t=Ae(),u=pbe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DOUBLE],termFunction:!0})}async run(e){return new u.TermFunctionXsdToDouble}};return Zv.ActorFunctionFactoryTermXsdToDouble=n,Zv}var mk;function bbe(){return mk||(mk=1,function(a){var t=kc&&kc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=kc&&kc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ybe(),a)}(kc)),kc}var Xc={},tT={},rT={},_k;function mbe(){if(_k)return rT;_k=1,Object.defineProperty(rT,"__esModule",{value:!0}),rT.TermFunctionXsdToDuration=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,t.declare)(t.TypeURL.XSD_DURATION).onUnary(t.TypeURL.XSD_DURATION,()=>r=>new t.DurationLiteral(r.typedValue,r.strValue)).onStringly1(()=>r=>new t.DurationLiteral((0,t.parseDuration)(r.str()))).collect()})}};return rT.TermFunctionXsdToDuration=u,rT}var gk;function _be(){if(gk)return tT;gk=1,Object.defineProperty(tT,"__esModule",{value:!0}),tT.ActorFunctionFactoryTermXsdToDuration=void 0;const a=Ne(),t=Ae(),u=mbe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DURATION],termFunction:!0})}async run(e){return new u.TermFunctionXsdToDuration}};return tT.ActorFunctionFactoryTermXsdToDuration=n,tT}var vk;function gbe(){return vk||(vk=1,function(a){var t=Xc&&Xc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Xc&&Xc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(_be(),a)}(Xc)),Xc}var Jc={},nT={},iT={},Tk;function vbe(){if(Tk)return iT;Tk=1,Object.defineProperty(iT,"__esModule",{value:!0}),iT.TermFunctionXsdToFloat=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_FLOAT,overloads:(0,t.declare)(t.TypeURL.XSD_FLOAT).onNumeric1(()=>r=>(0,t.float)(r.typedValue)).onBoolean1Typed(()=>r=>(0,t.float)(r?1:0)).onUnary(t.TypeURL.XSD_STRING,()=>r=>{const e=(0,t.parseXSDFloat)(r.str());if(e===void 0)throw new t.CastError(r,t.TypeURL.XSD_FLOAT);return(0,t.float)(e)},!1).collect()})}};return iT.TermFunctionXsdToFloat=u,iT}var wk;function Tbe(){if(wk)return nT;wk=1,Object.defineProperty(nT,"__esModule",{value:!0}),nT.ActorFunctionFactoryTermXsdToFloat=void 0;const a=Ne(),t=Ae(),u=vbe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_FLOAT],termFunction:!0})}async run(e){return new u.TermFunctionXsdToFloat}};return nT.ActorFunctionFactoryTermXsdToFloat=n,nT}var Sk;function wbe(){return Sk||(Sk=1,function(a){var t=Jc&&Jc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Jc&&Jc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Tbe(),a)}(Jc)),Jc}var Kc={},aT={},uT={},Ok;function Sbe(){if(Ok)return uT;Ok=1,Object.defineProperty(uT,"__esModule",{value:!0}),uT.TermFunctionXsdToInteger=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_INTEGER,overloads:(0,t.declare)(t.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>r=>(0,t.integer)(r?1:0)).onNumeric1(()=>r=>{if(!Number.isFinite(r.typedValue))throw new t.CastError(r,t.TypeURL.XSD_INTEGER);return(0,t.integer)(Math.trunc(r.typedValue))}).onString1(()=>r=>{const e=r.str(),i=/^\d+$/u.test(e)?Number.parseInt(e,10):void 0;if(i===void 0)throw new t.CastError(r,t.TypeURL.XSD_INTEGER);return(0,t.integer)(i)}).collect()})}};return uT.TermFunctionXsdToInteger=u,uT}var Ak;function Obe(){if(Ak)return aT;Ak=1,Object.defineProperty(aT,"__esModule",{value:!0}),aT.ActorFunctionFactoryTermXsdToInteger=void 0;const a=Ne(),t=Ae(),u=Sbe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_INTEGER],termFunction:!0})}async run(e){return new u.TermFunctionXsdToInteger}};return aT.ActorFunctionFactoryTermXsdToInteger=n,aT}var Ek;function Abe(){return Ek||(Ek=1,function(a){var t=Kc&&Kc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Kc&&Kc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Obe(),a)}(Kc)),Kc}var Wc={},oT={},sT={},Ik;function Ebe(){if(Ik)return sT;Ik=1,Object.defineProperty(sT,"__esModule",{value:!0}),sT.TermFunctionXsdToString=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_STRING,overloads:(0,t.declare)(t.TypeURL.XSD_STRING).onNumeric1(()=>r=>(0,t.string)((0,t.float)(r.typedValue).str())).onBoolean1Typed(()=>r=>(0,t.string)((0,t.bool)(r).str())).onTerm1(()=>r=>(0,t.string)(r.str())).collect()})}};return sT.TermFunctionXsdToString=u,sT}var xk;function Ibe(){if(xk)return oT;xk=1,Object.defineProperty(oT,"__esModule",{value:!0}),oT.ActorFunctionFactoryTermXsdToString=void 0;const a=Ne(),t=Ae(),u=Ebe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_STRING],termFunction:!0})}async run(e){return new u.TermFunctionXsdToString}};return oT.ActorFunctionFactoryTermXsdToString=n,oT}var Nk;function xbe(){return Nk||(Nk=1,function(a){var t=Wc&&Wc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Wc&&Wc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ibe(),a)}(Wc)),Wc}var Yc={},cT={},lT={},Rk;function Nbe(){if(Rk)return lT;Rk=1,Object.defineProperty(lT,"__esModule",{value:!0}),lT.TermFunctionXsdToTime=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_TIME,overloads:(0,t.declare)(t.TypeURL.XSD_TIME).onUnary(t.TypeURL.XSD_TIME,()=>r=>new t.TimeLiteral(r.typedValue,r.strValue)).onUnary(t.TypeURL.XSD_DATE_TIME,()=>r=>new t.TimeLiteral(r.typedValue)).onStringly1(()=>r=>new t.TimeLiteral((0,t.parseTime)(r.str()))).collect()})}};return lT.TermFunctionXsdToTime=u,lT}var Fk;function Rbe(){if(Fk)return cT;Fk=1,Object.defineProperty(cT,"__esModule",{value:!0}),cT.ActorFunctionFactoryTermXsdToTime=void 0;const a=Ne(),t=Ae(),u=Nbe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_TIME],termFunction:!0})}async run(e){return new u.TermFunctionXsdToTime}};return cT.ActorFunctionFactoryTermXsdToTime=n,cT}var Dk;function Fbe(){return Dk||(Dk=1,function(a){var t=Yc&&Yc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Yc&&Yc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Rbe(),a)}(Yc)),Yc}var Zc={},dT={},fT={},Pk;function Dbe(){if(Pk)return fT;Pk=1,Object.defineProperty(fT,"__esModule",{value:!0}),fT.TermFunctionXsdToYearMonthDuration=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_YEAR_MONTH_DURATION,overloads:(0,t.declare)(t.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(t.TypeURL.XSD_DURATION,()=>r=>new t.YearMonthDurationLiteral((0,t.trimToYearMonthDuration)(r.typedValue))).onStringly1(()=>r=>new t.YearMonthDurationLiteral((0,t.parseYearMonthDuration)(r.str()))).collect()})}};return fT.TermFunctionXsdToYearMonthDuration=u,fT}var jk;function Pbe(){if(jk)return dT;jk=1,Object.defineProperty(dT,"__esModule",{value:!0}),dT.ActorFunctionFactoryTermXsdToYearMonthDuration=void 0;const a=Ne(),t=Ae(),u=Dbe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_YEAR_MONTH_DURATION],termFunction:!0})}async run(e){return new u.TermFunctionXsdToYearMonthDuration}};return dT.ActorFunctionFactoryTermXsdToYearMonthDuration=n,dT}var Lk;function jbe(){return Lk||(Lk=1,function(a){var t=Zc&&Zc.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Zc&&Zc.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Pbe(),a)}(Zc)),Zc}var el={},hT={},pT={},Mk;function Lbe(){if(Mk)return pT;Mk=1,Object.defineProperty(pT,"__esModule",{value:!0}),pT.TermFunctionYear=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.YEAR,overloads:(0,t.declare)(t.SparqlOperator.YEAR).onDateTime1(()=>r=>(0,t.integer)(r.typedValue.year)).set([t.TypeURL.XSD_DATE],()=>([r])=>(0,t.integer)(r.typedValue.year)).collect()})}};return pT.TermFunctionYear=u,pT}var Ck;function Mbe(){if(Ck)return hT;Ck=1,Object.defineProperty(hT,"__esModule",{value:!0}),hT.ActorFunctionFactoryTermYear=void 0;const a=Ne(),t=Ae(),u=Lbe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.YEAR],termFunction:!0})}async run(e){return new u.TermFunctionYear}};return hT.ActorFunctionFactoryTermYear=n,hT}var qk;function Cbe(){return qk||(qk=1,function(a){var t=el&&el.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=el&&el.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Mbe(),a)}(el)),el}var tl={},yT={},rl={},bT={},CR={},nl={},Bk;function qbe(){if(Bk)return nl;Bk=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.readableFromWeb=nl.ReadableFromWeb=void 0;const a=Mt();let t=class extends a.Readable{constructor(r,e){super(e),this.reader=r.getReader(),this.readerClosed=!1,this.reader.closed.then(()=>{this.readerClosed=!0}).catch(i=>{this.readerClosed=!0,this.destroy(i)})}_read(){this.reader.read().then(r=>this.push(r.done?null:r.value)).catch(r=>this.destroy(r))}destroy(r){return this.readerClosed||this.reader.cancel(r).then().catch(()=>{}),super.destroy(r)}};nl.ReadableFromWeb=t;function u(n,r){return new t(n,r)}return nl.readableFromWeb=u,nl}var $k;function Vk(){return $k||($k=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.readableFromWeb=void 0;var t=qbe();Object.defineProperty(a,"readableFromWeb",{enumerable:!0,get:function(){return t.readableFromWeb}})}(CR)),CR}var qR,Uk;function Qk(){if(Uk)return qR;Uk=1;const a=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";return a.writable=t=>a(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object",a.readable=t=>a(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object",a.duplex=t=>a.writable(t)&&a.readable(t),a.transform=t=>a.duplex(t)&&typeof t._transform=="function",qR=a,qR}var BR={exports:{}},Hk;function Bbe(){return Hk||(Hk=1,function(a){a.exports=t,a.exports.WEBSTREAM_SUPPORT=typeof ReadableStream<"u";function t(u){if(!a.exports.WEBSTREAM_SUPPORT)throw new Error("No web ReadableStream support");var n=!1,r={};function e(c){r.data=l,r.end=l,r.end=d,r.close=d,r.error=d;for(var s in r)u.on(s,r[s]);u.pause();function l(f){n||(c.enqueue(f),u.pause())}function d(f){if(!n){n=!0;for(var h in r)u.removeListener(h,r[h]);f?c.error(f):c.close()}}}function i(){n||u.resume()}function o(){n=!0;for(var c in r)u.removeListener(c,r[c]);u.push(null),u.pause(),u.destroy?u.destroy():u.close&&u.close()}return new ReadableStream({start:e,pull:i,cancel:o})}}(BR)),BR.exports}var Gk;function zk(){if(Gk)return bT;Gk=1,Object.defineProperty(bT,"__esModule",{value:!0}),bT.ActorHttp=void 0;const a=Te(),t=Vk(),u=Qk(),n=Bbe();let r=class oae extends a.Actor{constructor(i){super(i)}static toNodeReadable(i){return u(i)||i===null?i:(0,t.readableFromWeb)(i)}static toWebReadableStream(i){return n(i)}static headersToHash(i){const o={};return i.forEach((c,s)=>{o[s]=c}),o}static getInputUrl(i){return new URL(i instanceof Request?i.url:i)}static createUserAgent(i,o){if(!oae.isBrowser()){const c=[`Comunica/${o.split(".")[0]}.0`,`${i}/${o}`];return typeof globalThis.navigator=="object"&&typeof globalThis.navigator.userAgent=="string"?c.push(globalThis.navigator.userAgent):typeof globalThis.process=="object"&&typeof globalThis.process.versions=="object"&&typeof globalThis.process.versions.node=="string"&&c.push(`Node.js/${globalThis.process.versions.node.split(".")[0]}`),typeof globalThis.process=="object"&&typeof globalThis.process.platform=="string"&&typeof globalThis.process.arch=="string"&&c.splice(1,0,`(${globalThis.process.platform}; ${globalThis.process.arch})`),c.join(" ")}}static isBrowser(){return typeof globalThis.window=="object"&&typeof globalThis.window.document=="object"||typeof globalThis.importScripts=="function"}};return bT.ActorHttp=r,bT}var mT={},kk;function $be(){if(kk)return mT;kk=1,Object.defineProperty(mT,"__esModule",{value:!0}),mT.validateAndCloseHttpResponse=void 0;const a=Fh(),t=zk();async function u(n,r){var e;if(r.status>=400){let i="empty response";if(r.body){const o=t.ActorHttp.toNodeReadable(r.body);i=await(0,a.stringify)(o)}throw new Error(`Could not update ${n} (HTTP status ${r.status}):
${i}`)}await((e=r.body)==null?void 0:e.cancel())}return mT.validateAndCloseHttpResponse=u,mT}var Xk;function Ki(){return Xk||(Xk=1,function(a){var t=rl&&rl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=rl&&rl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(zk(),a),u($be(),a)}(rl)),rl}var Vbe={version:"4.2.0"},_T={},Jk;function Ube(){if(Jk)return _T;Jk=1,Object.defineProperty(_T,"__esModule",{value:!0}),_T.FetchInitPreprocessor=void 0;class a{async handle(u){if(u.body&&typeof u.body!="string"&&"getReader"in u.body){const n=u.body.getReader(),r=[];for(;;){const{done:e,value:i}=await n.read();if(e)break;r.push(i)}u.body=r.join("")}return{...u,keepalive:!u.body}}}return _T.FetchInitPreprocessor=a,_T}var Kk;function Qbe(){if(Kk)return yT;Kk=1,Object.defineProperty(yT,"__esModule",{value:!0}),yT.ActorHttpFetch=void 0;const a=Ki(),t=ze(),u=Te(),n=Vbe,r=Ube();let e=class jD extends a.ActorHttp{constructor(o){super(o),this.fetchInitPreprocessor=new r.FetchInitPreprocessor(o.agentOptions)}async test(o){return(0,u.passTest)({time:Number.POSITIVE_INFINITY})}async run(o){const c=this.prepareRequestHeaders(o),s={method:"GET",...o.init,headers:c};this.logInfo(o.context,`Requesting ${a.ActorHttp.getInputUrl(o.input).href}`,()=>({headers:a.ActorHttp.headersToHash(c),method:s.method})),o.context.has(t.KeysHttp.fetch)&&(s.headers=a.ActorHttp.headersToHash(c)),o.context.get(t.KeysHttp.includeCredentials)&&(s.credentials="include");const l=o.context.get(t.KeysHttp.httpTimeout),d=o.context.get(t.KeysHttp.httpBodyTimeout),f=o.context.get(t.KeysHttp.fetch)??fetch,h=await this.fetchInitPreprocessor.handle(s);let p,b;if(l){const y=new AbortController;h.signal=y.signal,p=()=>y.abort(new Error(`Fetch timed out for ${a.ActorHttp.getInputUrl(o.input).href} after ${l} ms`)),b=setTimeout(()=>p(),l)}const _=await f(o.input,h);return l&&(!d||!_.body)&&clearTimeout(b),_}prepareRequestHeaders(o){var l;const c=new Headers((l=o.init)==null?void 0:l.headers);a.ActorHttp.isBrowser()?c.delete("user-agent"):c.has("user-agent")||c.set("user-agent",jD.userAgent);const s=o.context.get(t.KeysHttp.auth);return s&&c.set("Authorization",`Basic ${jD.stringToBase64(s)}`),c}static stringToBase64(o){const c=new TextEncoder().encode(o),s=Array.from(c,l=>String.fromCodePoint(l)).join("");return btoa(s)}};return yT.ActorHttpFetch=e,e.userAgent=a.ActorHttp.createUserAgent("ActorHttpFetch",n.version),yT}var Wk;function Hbe(){return Wk||(Wk=1,function(a){var t=tl&&tl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=tl&&tl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Qbe(),a)}(tl)),tl}var il={},gT={},Yk;function Gbe(){if(Yk)return gT;Yk=1,Object.defineProperty(gT,"__esModule",{value:!0}),gT.ActorQueryOperationSource=void 0;const a=Qt(),t=ze(),u=Te(),n=Er(),r=wt(),e=ht();let i=class extends a.ActorQueryOperation{constructor(c){super(c)}async test(c){return(0,r.getOperationSource)(c.operation)?(0,u.passTest)({httpRequests:1}):(0,u.failTest)(`Actor ${this.name} requires an operation with source annotation.`)}async run(c){const s=c.context.get(t.KeysInitQuery.physicalQueryPlanLogger);s&&(s.logOperation(c.operation.type,void 0,c.operation,c.context.get(t.KeysInitQuery.physicalQueryPlanNode),this.name,{}),c.context=c.context.set(t.KeysInitQuery.physicalQueryPlanNode,c.operation));const l=(0,r.getOperationSource)(c.operation),d=l.context?c.context.merge(l.context):c.context;let f=!1;if(e.Util.recurseOperation(c.operation,{construct(){return f=!0,!1}}),f){const b=l.source.queryQuads(c.operation,d),_=(0,n.getMetadataQuads)(b);return{type:"quads",quadStream:b,metadata:_}}switch(c.operation.type){case e.Algebra.types.ASK:return{type:"boolean",execute:()=>l.source.queryBoolean(c.operation,d)};case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return{type:"void",execute:()=>l.source.queryVoid(c.operation,d)}}const h=l.source.queryBindings(c.operation,d),p=(0,n.getMetadataBindings)(h);return{type:"bindings",bindingsStream:h,metadata:p}}};return gT.ActorQueryOperationSource=i,gT}var Zk;function zbe(){return Zk||(Zk=1,function(a){var t=il&&il.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=il&&il.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Gbe(),a)}(il)),il}var al={},vT={},eX;function kbe(){if(eX)return vT;eX=1,Object.defineProperty(vT,"__esModule",{value:!0}),vT.MediatorJoinCoefficientsFixed=void 0;const a=ze(),t=Te();let u=class extends t.Mediator{constructor(r){super(r)}async mediateWith(r,e){var b;const i=[],o=e.map(({reply:_})=>_),c=(await Promise.all(o)).map(_=>{if(_.isFailed()){i.push(_.getFailMessage());return}return{value:_.get(),sideData:_.getSideData()}});let s=c.map(_=>{if(_)return _.value.iterations*this.cpuWeight+_.value.persistedItems*this.memoryWeight+_.value.blockingItems*this.timeWeight+_.value.requestTime*this.ioWeight});const l=Math.max(...s.filter(_=>_!==void 0)),d=r.context.get(a.KeysQueryOperation.limitIndicator);d&&(s=s.map((_,y)=>{var g,m;return _!==void 0&&((g=c[y])==null?void 0:g.value).blockingItems>0&&((m=c[y])==null?void 0:m.value).iterations>d?_+l:_}));let f=-1,h=Number.POSITIVE_INFINITY;for(const[_,y]of s.entries())y!==void 0&&(f===-1||y<h)&&(f=_,h=y);if(f<0)return(0,t.failTest)(this.constructFailureMessage(r,i));const p=e[f].actor;return p.includeInLogs&&((b=t.Actor.getContextLogger(r.context))==null||b.debug(`Determined physical join operator '${p.logicalType}-${p.physicalName}'`,{entries:r.entries.length,variables:await Promise.all(r.entries.map(async _=>(await _.output.metadata()).variables.map(y=>y.variable.value))),costs:Object.fromEntries(s.map((_,y)=>[`${e[y].actor.logicalType}-${e[y].actor.physicalName}`,_]).filter(_=>_[1]!==void 0)),coefficients:Object.fromEntries(c.map((_,y)=>[`${e[y].actor.logicalType}-${e[y].actor.physicalName}`,_==null?void 0:_.value]).filter(_=>_[1]!==void 0))})),(0,t.passTestWithSideData)(p,c[f].sideData)}};return vT.MediatorJoinCoefficientsFixed=u,vT}var tX;function Xbe(){return tX||(tX=1,function(a){var t=al&&al.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=al&&al.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(kbe(),a)}(al)),al}var ul={},TT={},rX;function nX(){if(rX)return TT;rX=1,Object.defineProperty(TT,"__esModule",{value:!0}),TT.ActorHttpInvalidate=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return TT.ActorHttpInvalidate=t,TT}var wT={},iX;function Jbe(){if(iX)return wT;iX=1,Object.defineProperty(wT,"__esModule",{value:!0}),wT.ActorHttpInvalidateListenable=void 0;const a=Te(),t=nX();let u=class extends t.ActorHttpInvalidate{constructor(r){super(r),this.invalidateListeners=[],this.invalidateListeners=[]}addInvalidateListener(r){this.invalidateListeners.push(r)}async test(r){return(0,a.passTestVoid)()}async run(r){for(const e of this.invalidateListeners)e(r);return{}}};return wT.ActorHttpInvalidateListenable=u,wT}var aX;function Mh(){return aX||(aX=1,function(a){var t=ul&&ul.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ul&&ul.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(nX(),a),u(Jbe(),a)}(ul)),ul}var ol={},ST={},uX;function Kbe(){if(uX)return ST;uX=1,Object.defineProperty(ST,"__esModule",{value:!0}),ST.MediatorAll=void 0;const a=Te();let t=class extends a.Mediator{constructor(n){super(n)}async mediate(n){const r=[];let e;try{e=this.publish(n)}catch{e=[]}for(const o of e){const c=await o.reply;c.isPassed()&&r.push({actor:o.actor,sideData:c.getSideData()})}return(await Promise.all(r.map(o=>o.actor.runObservable(n,o.sideData))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}};return ST.MediatorAll=t,ST}var oX;function Wbe(){return oX||(oX=1,function(a){var t=ol&&ol.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ol&&ol.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Kbe(),a)}(ol)),ol}var sl={},OT={},sX;function Ybe(){if(sX)return OT;sX=1,Object.defineProperty(OT,"__esModule",{value:!0}),OT.ActorRdfJoinEntriesSortSelectivity=void 0;const a=Sq(),t=Te();let u=class extends a.ActorRdfJoinEntriesSort{constructor(r){super(r)}async test(r){return(0,t.passTest)({accuracy:.501})}async run(r){const e=[...r.entries],i=[];for(;e.length>0;){let o=Number.MAX_VALUE,c=-1;for(const[s,l]of e.entries()){const{selectivity:d}=await this.mediatorJoinSelectivity.mediate({entries:[l,...i],context:r.context});d<o&&(o=d,c=s)}i.push(e[c]),e.splice(c,1)}return{entries:i}}};return OT.ActorRdfJoinEntriesSortSelectivity=u,OT}var cX;function Zbe(){return cX||(cX=1,function(a){var t=sl&&sl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=sl&&sl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ybe(),a)}(sl)),sl}var cl={},AT={},ll={},ET={},dl={},IT={},lX;function eme(){if(lX)return IT;lX=1,Object.defineProperty(IT,"__esModule",{value:!0}),IT.ChunkedIterator=void 0;const a=gt();let t=class extends a.TransformIterator{constructor(n,r,e){super(n,e),this.chunk=[],this.blockSize=r}consumeChunkAsIterator(){const n=new a.ArrayIterator(this.chunk,{autoStart:!1});return this.chunk=[],n}_transform(n,r,e){this.chunk.push(n),this.chunk.length>=this.blockSize&&e(this.consumeChunkAsIterator()),r()}_flush(n){this.chunk.length>0&&this._push(this.consumeChunkAsIterator()),super._flush(n)}};return IT.ChunkedIterator=t,IT}var xT={},dX;function tme(){if(dX)return xT;dX=1,Object.defineProperty(xT,"__esModule",{value:!0}),xT.ClosableIterator=void 0;const a=gt();let t=class extends a.AsyncIterator{constructor(i,o){super(),this.onClose=o.onClose,this._source=i,this._source[a.DESTINATION]=this,this._source.on("end",r),this._source.on("error",n),this._source.on("readable",u),this.readable=this._source.readable}read(){const i=this._source.read();return i||(this.readable=!1,this._source.done&&this.close()),i}_end(i){this.onClose(),this._source.removeListener("end",r),this._source.removeListener("error",n),this._source.removeListener("readable",u),delete this._source[a.DESTINATION],this._source.destroy(),super._end(i)}};xT.ClosableIterator=t;function u(){this[a.DESTINATION].readable=!0}function n(e){this[a.DESTINATION].emit("error",e)}function r(){this[a.DESTINATION].close()}return xT}var NT={},fX;function rme(){if(fX)return NT;fX=1,Object.defineProperty(NT,"__esModule",{value:!0}),NT.ClosableTransformIterator=void 0;const a=gt();let t=class extends a.TransformIterator{constructor(n,r){super(n,r),this.onClose=r.onClose}_end(n){this.onClose(),super._end(n)}};return NT.ClosableTransformIterator=t,NT}var RT={},hX;function nme(){if(hX)return RT;hX=1,Object.defineProperty(RT,"__esModule",{value:!0}),RT.instrumentIterator=void 0;function a(u){const n={count:0,timeSelf:0,timeLife:0};return t(u,n,!0),new Promise(r=>{u.on("end",()=>{r(n)})})}RT.instrumentIterator=a;function t(u,n,r){if(!("_profileInstrumented"in u)){if(u._profileInstrumented=!0,"_read"in u){const e=u._read;u._read=(i,o)=>{const c=performance.now();e.call(u,i,()=>{n.timeSelf+=performance.now()-c,o()})}}if("read"in u){const e=u.read;u.read=()=>{const i=performance.now(),o=e.call(u);return r&&o&&n.count++,n.timeSelf+=performance.now()-i,o}}if(r){const e=performance.now();u.on("end",()=>{n.timeLife=performance.now()-e})}"_source"in u&&t(u._source,n,!1)}}return RT}var pX;function Ia(){return pX||(pX=1,function(a){var t=dl&&dl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=dl&&dl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(eme(),a),u(tme(),a),u(rme(),a),u(nme(),a)}(dl)),dl}var yX;function ime(){if(yX)return ET;yX=1,Object.defineProperty(ET,"__esModule",{value:!0}),ET.ActorRdfJoin=void 0;const a=ze(),t=Te(),u=Ia(),n=Er();let r=class Ua extends t.Actor{constructor(i,o){super(i),this.includeInLogs=!0,this.logicalType=o.logicalType,this.physicalName=o.physicalName,this.limitEntries=o.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=o.limitEntriesMin??!1,this.canHandleUndefs=o.canHandleUndefs??!1,this.isLeaf=o.isLeaf??!0,this.requiresVariableOverlap=o.requiresVariableOverlap??!1}static overlappingVariables(i){const o={};for(const c of i)for(const s of c.variables){o[s.variable.value]||(o[s.variable.value]={variable:s.variable,canBeUndef:s.canBeUndef,occurrences:0});const l=o[s.variable.value];l.canBeUndef=l.canBeUndef||s.canBeUndef,l.occurrences++}return Object.values(o).filter(c=>c.occurrences===i.length).map(c=>({variable:c.variable,canBeUndef:c.canBeUndef}))}static joinVariables(i,o,c=!1){const s={};let l=!0;for(const d of o){for(const f of d.variables)s[f.variable.value]=s[f.variable.value]||f.canBeUndef||!l&&c&&!(f.variable.value in s);l=!1}return Object.entries(s).map(([d,f])=>({variable:i.variable(d),canBeUndef:f}))}static joinBindings(...i){if(i.length===0)return null;if(i.length===1)return i[0];let o=i[0];for(const c of i.slice(1)){const s=o.merge(c);if(!s)return null;o=s}return o}static getCardinality(i){return i.cardinality}static async getMetadatas(i){return await Promise.all(i.map(o=>o.output.metadata()))}static async getEntriesWithMetadatas(i){const o=await Ua.getMetadatas(i);return i.map((c,s)=>({...c,metadata:o[s]}))}static getRequestInitialTimes(i){return i.map(o=>o.pageSize?0:o.requestTime??0)}static getRequestItemTimes(i){return i.map(o=>o.pageSize?(o.requestTime??0)/o.pageSize:0)}constructState(i){const o=new n.MetadataValidationState,c=()=>o.invalidate();for(const s of i)s.state.addInvalidateListener(c);return o}async constructResultMetadata(i,o,c,s={},l=!1){let d;if(s.cardinality)d=s.cardinality;else{let f=!1;d=o.reduce((h,p)=>{const b=Ua.getCardinality(p);return b.value===0&&(f=!0),{type:b.type==="estimate"?"estimate":h.type,value:h.value*(l?Math.max(1,b.value):b.value)}},{type:"exact",value:1}),(!f||l)&&(d.value*=(await this.mediatorJoinSelectivity.mediate({entries:i,context:c})).selectivity,d.value===0&&(d.value=Number.MIN_VALUE))}return{state:this.constructState(o),...s,cardinality:{type:d.type,value:d.value},variables:Ua.joinVariables(c.getSafe(a.KeysInitQuery.dataFactory),o,l)}}static async sortJoinEntries(i,o,c){if(o.some(f=>f.metadata.variables.some(h=>h.canBeUndef)))return(0,t.passTest)(o);const l={};for(const f of o)for(const h of f.metadata.variables){let p=l[h.variable.value];p||(p=0),l[h.variable.value]=++p}const d=[];for(const[f,h]of Object.entries(l))h>=2&&d.push(f);return d.length===0?(0,t.failTest)("Bind join can only join entries with at least one common variable"):(0,t.passTest)((await i.mediate({entries:o,context:c})).entries)}async test(i){if(i.type!==this.logicalType)return(0,t.failTest)(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${i.type}' was given.`);if(i.entries.length<=1)return(0,t.failTest)(`${this.name} requires at least two join entries.`);if(this.limitEntriesMin?i.entries.length<this.limitEntries:i.entries.length>this.limitEntries)return(0,t.failTest)(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${i.entries.length}.`);for(const s of i.entries)if(s.output.type!=="bindings")return(0,t.failTest)(`Invalid type of a join entry: Expected 'bindings' but got '${s.output.type}'`);const o=await Ua.getMetadatas(i.entries);let c;return!this.canHandleUndefs&&(c=Ua.overlappingVariables(o),c.some(s=>s.canBeUndef))?(0,t.failTest)(`Actor ${this.name} can not join streams containing undefs`):this.requiresVariableOverlap&&(c??Ua.overlappingVariables(o)).length===0?(0,t.failTest)(`Actor ${this.name} can only join entries with at least one common variable`):await this.getJoinCoefficients(i,{metadatas:o})}async run(i,o){let c;i.context.has(a.KeysInitQuery.physicalQueryPlanLogger)&&(c=i.context.get(a.KeysInitQuery.physicalQueryPlanNode),i.context=i.context.set(a.KeysInitQuery.physicalQueryPlanNode,i));const s=i.context.get(a.KeysInitQuery.physicalQueryPlanLogger);let l;this.includeInLogs&&s&&(l={},s.stashChildren(c,h=>h.logicalOperator.startsWith("join")),s.logOperation(`join-${this.logicalType}`,this.physicalName,i,c,this.name,l));const{result:d,physicalPlanMetadata:f}=await this.getOutput(i,o);if(l){(0,u.instrumentIterator)(d.bindingsStream).then(p=>{s.appendMetadata(i,{cardinalityReal:p.count,timeSelf:p.timeSelf,timeLife:p.timeLife})}),Object.assign(l,f);const h=o.metadatas.map(Ua.getCardinality);if(l.cardinalities=h,l.joinCoefficients=(await this.getJoinCoefficients(i,o)).getOrThrow(),this.isLeaf)for(let p=0;p<i.entries.length;p++){const b=i.entries[p];s.unstashChild(b.operation,i),s.appendMetadata(b.operation,{cardinality:h[p]})}}return d.metadata=(0,n.cachifyMetadata)(d.metadata),d}};return ET.ActorRdfJoin=r,ET}var bX;function nn(){return bX||(bX=1,function(a){var t=ll&&ll.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ll&&ll.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ime(),a)}(ll)),ll}var mX;function ame(){if(mX)return AT;mX=1,Object.defineProperty(AT,"__esModule",{value:!0}),AT.ActorRdfJoinSingle=void 0;const a=nn(),t=Te();let u=class extends a.ActorRdfJoin{constructor(r){super(r,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(r){return r.entries.length!==1?(0,t.failTest)(`Actor ${this.name} can only join a single entry`):await this.getJoinCoefficients(r,void 0)}async getOutput(r){return{result:r.entries[0].output}}async getJoinCoefficients(r,e){return(0,t.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},e)}};return AT.ActorRdfJoinSingle=u,AT}var _X;function ume(){return _X||(_X=1,function(a){var t=cl&&cl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=cl&&cl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ame(),a)}(cl)),cl}var fl={},FT={},gX;function ome(){if(gX)return FT;gX=1,Object.defineProperty(FT,"__esModule",{value:!0}),FT.ActorRdfJoinMultiEmpty=void 0;const a=nn(),t=ze(),u=Te(),n=Er(),r=gt();let e=class extends a.ActorRdfJoin{constructor(o){super(o,{logicalType:"inner",physicalName:"multi-empty",canHandleUndefs:!0})}async test(o){return(await a.ActorRdfJoin.getMetadatas(o.entries)).every(c=>a.ActorRdfJoin.getCardinality(c).value>0)?(0,u.failTest)(`Actor ${this.name} can only join entries where at least one is empty`):super.test(o)}async getOutput(o){for(const s of o.entries)s.output.bindingsStream.close();const c=o.context.getSafe(t.KeysInitQuery.dataFactory);return{result:{bindingsStream:new r.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:a.ActorRdfJoin.joinVariables(c,await a.ActorRdfJoin.getMetadatas(o.entries))}),type:"bindings"}}}async getJoinCoefficients(o,c){return(0,u.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},c)}};return FT.ActorRdfJoinMultiEmpty=e,FT}var vX;function sme(){return vX||(vX=1,function(a){var t=fl&&fl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=fl&&fl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ome(),a)}(fl)),fl}var hl={},DT={},pl={},PT={},TX;function cme(){if(TX)return PT;TX=1,Object.defineProperty(PT,"__esModule",{value:!0}),PT.BindingsIndexDef=void 0;let a=class{constructor(u,n){this.keys=u.map(r=>r.variable),this.hashFn=n,this.index={}}put(u,n){return this.index[this.hashFn(u,this.keys)]=n}get(u){const n=this.getFirst(u);return n?[n]:[]}getFirst(u){return this.index[this.hashFn(u,this.keys)]}values(){return Object.values(this.index)}};return PT.BindingsIndexDef=a,PT}var jT={},wX;function lme(){if(wX)return jT;wX=1,Object.defineProperty(jT,"__esModule",{value:!0}),jT.BindingsIndexUndef=void 0;let a=class{constructor(u,n,r){this.data={},this.keys=u.map(e=>e.variable),this.hashFn=n,this.allowDisjointDomains=r&&this.keys.length>0}put(u,n){if(this.allowDisjointDomains||this.isBindingsValid(u)){let r=this.data;for(let e=0;e<this.keys.length;e++){const i=this.keys[e],o=this.hashFn(u.get(i));let c=r[o];c||(c=r[o]=e===this.keys.length-1?n:{}),r=c}}return n}isBindingsValid(u){let n=!1;for(const r of this.keys)if(u.has(r)){n=!0;break}return n}get(u){return this.allowDisjointDomains||this.isBindingsValid(u)?this.getRecursive(u,this.keys,[this.data]):[]}getRecursive(u,n,r){if(n.length===0)return r;let e;[e,...n]=n;const i=[];for(const o of r){const c=this.hashFn(u==null?void 0:u.get(e));if(c){const s=[o[c],o[""]].filter(Boolean);if(s.length===0)continue;i.push(this.getRecursive(u,n,s))}else{const s=Object.values(o);if(s.length===0)continue;i.push(this.getRecursive(u,n,s))}}return i.flat()}getFirst(u,n=!0){if(this.allowDisjointDomains||this.isBindingsValid(u))return this.getRecursiveFirst(u,this.keys,[this.data],n)}getRecursiveFirst(u,n,r,e){if(n.length===0)return r[0];let i;[i,...n]=n;for(const o of r){const c=this.hashFn(u.get(i));if(c||!e){const s=[o[c],o[""]].filter(Boolean);if(s.length===0)continue;const l=this.getRecursiveFirst(u,n,s,e);if(l)return l}else{const s=Object.values(o);if(s.length===0)continue;const l=this.getRecursiveFirst(u,n,s,e);if(l)return l}}}values(){return this.keys.length===0?[]:this.getRecursive(void 0,this.keys,[this.data])}};return jT.BindingsIndexUndef=a,jT}var $R={},SX;function dme(){return SX||(SX=1,Object.defineProperty($R,"__esModule",{value:!0})),$R}var OX;function VR(){return OX||(OX=1,function(a){var t=pl&&pl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=pl&&pl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(cme(),a),u(lme(),a),u(dme(),a)}(pl)),pl}var UR,AX;function fme(){if(AX)return UR;AX=1;let a=gt(),t=a.MultiTransformIterator,u=a.SimpleTransformIterator;class n extends t{constructor(e,i,o,c){super(e,c),this.funRight=i,this.funJoin=o}_createTransformer(e){return new u(this.funRight(e),{transform:(i,o,c)=>{let s=this.funJoin(e,i);s!==null&&c(s),o()}})}}return UR=n,UR}var QR,EX;function hme(){if(EX)return QR;EX=1;let a=gt().AsyncIterator;class t extends a{constructor(n,r,e,i){super(),this.addedDataListener=!1,this.left=n,this.right=r,this.funHash=e,this.funJoin=i,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",c=>this.destroy(c)),this.right.on("error",c=>this.destroy(c)),this.readable=!1,this.left.on("end",o.bind(this));function o(){this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",c=>{c==="data"&&this._addDataListenerIfNeeded()}),this.left.readable&&this._addDataListenerIfNeeded(),this.left.on("readable",()=>this._addDataListenerIfNeeded())}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this._addDataListenerIfNeeded();;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let r=this.matches[this.matchIdx++],e=this.funJoin(r,this.match);if(e!==null)return e}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let n=this.funHash(this.match);this.matches=this.leftMap.get(n)||[],this.matchIdx=0}}_addDataListenerIfNeeded(){this.addedDataListener||(this.addedDataListener=!0,this._addDataListener())}_addDataListener(){this.left.on("data",n.bind(this));function n(r){let e=this.funHash(r),i=this.leftMap.get(e);i||(i=[],this.leftMap.set(e,i)),i.push(r)}}}return QR=t,QR}var HR,IX;function pme(){if(IX)return HR;IX=1;const{MultiTransformIterator:a,SimpleTransformIterator:t,scheduleTask:u}=gt();class n extends a{constructor(e,i,o,c){super(e,c),this.right=i,this.funJoin=o,this.on("end",()=>this.right.close())}_end(){super._end(),u(()=>this.right.destroy())}_createTransformer(e){return new t(this.right.clone(),{transform:(i,o,c)=>{let s=this.funJoin(e,i);s!==null&&c(s),o()}})}}return HR=n,HR}var GR,xX;function yme(){if(xX)return GR;xX=1;let a=gt().AsyncIterator;class t extends a{constructor(n,r,e,i){super(),this.left=n,this.right=r,this.funHash=e,this.funJoin=i,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",o=>this.destroy(o)),this.right.on("error",o=>this.destroy(o)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let e=this.matches[this.matchIdx++],i=this.usedLeft?this.funJoin(this.match,e):this.funJoin(e,this.match);if(i!==null)return i}this.hasResults()||this._end();let n=null;for(let e=0;e<2&&(n=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,n===null);++e);if(this.done||n===null)return this.readable=!1,null;let r=this.funHash(n);if(this.usedLeft&&this.right.done)this.leftMap=null;else if(this.left.done)this.rightMap=null;else{let e=this.usedLeft?this.leftMap:this.rightMap;e.has(r)||e.set(r,[]);let i=e.get(r);i||(i=[],e.set(r,i)),i.push(n)}this.match=n,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(r)||[],this.matchIdx=0}}}return GR=t,GR}var zR,NX;function bme(){if(NX)return zR;NX=1;let a=gt().AsyncIterator;class t extends a{constructor(n){super(),Array.isArray(n)||(n=Array.prototype.slice.call(arguments)),this.streams=n;for(let r of n)r.on("readable",()=>this.emit("readable")),r.on("end",()=>this._removeStream(r));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(n){let r=this.streams.indexOf(n);r<0||(this.streams.splice(r,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let n of this.streams)n.close()}read(){for(let n=0;n<this.streams.length;++n){this.idx=(this.idx+1)%this.streams.length;let r=this.streams[this.idx].read();if(r!==null)return r}return null}}return zR=t,zR}var kR,RX;function HA(){if(RX)return kR;RX=1;const a=fme(),t=hme(),u=pme(),n=yme(),r=bme();return kR={DynamicNestedLoopJoin:a,HashJoin:t,NestedLoopJoin:u,SymmetricHashJoin:n,MergeStream:r},kR}var FX;function mme(){if(FX)return DT;FX=1,Object.defineProperty(DT,"__esModule",{value:!0}),DT.ActorRdfJoinHash=void 0;const a=nn(),t=Te(),u=VR(),n=Ia(),r=gt(),e=HA(),i=ir();let o=class extends a.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}`,limitEntries:2,requiresVariableOverlap:!0,canHandleUndefs:s.canHandleUndefs})}async getOutput(s,l){const d=l.metadatas;let f;const h=a.ActorRdfJoin.overlappingVariables(d);if(this.canHandleUndefs){const p=l.entriesSorted[0].output,b=l.entriesSorted[1].output;f=new n.ClosableTransformIterator(async()=>{const _=new u.BindingsIndexUndef(h,y=>y&&y.termType!=="Variable"?(0,i.termToString)(y):"",!0);return await new Promise(y=>{p.bindingsStream.on("data",g=>{(_.getFirst(g,!1)??_.put(g,[])).push(g)}),p.bindingsStream.on("end",y),p.bindingsStream.on("error",g=>{f.emit("error",g)})}),new r.MultiTransformIterator(b.bindingsStream,{multiTransform:y=>new r.ArrayIterator(_.get(y).flat().map(g=>a.ActorRdfJoin.joinBindings(y,g)).filter(g=>g!==null),{autoStart:!1}),autoStart:!1})},{autoStart:!1,onClose(){p.bindingsStream.destroy(),b.bindingsStream.destroy()}})}else{const{hashFunction:p}=await this.mediatorHashBindings.mediate({context:s.context}),b=h.map(_=>_.variable);f=new e.HashJoin(l.entriesSorted[0].output.bindingsStream,l.entriesSorted[1].output.bindingsStream,_=>p(_,b),a.ActorRdfJoin.joinBindings)}return{result:{type:"bindings",bindingsStream:f,metadata:async()=>await this.constructResultMetadata(l.entriesSorted,d,s.context)}}}async getJoinCoefficients(s,l){let d=s.entries;l.metadatas[1].cardinality.value<l.metadatas[0].cardinality.value&&(l.metadatas=[l.metadatas[1],l.metadatas[0]],d=[s.entries[1],s.entries[0]]);const{metadatas:f}=l,h=a.ActorRdfJoin.getRequestInitialTimes(f),p=a.ActorRdfJoin.getRequestItemTimes(f);let b=f[0].cardinality.value+f[1].cardinality.value;return this.canHandleUndefs||(b*=.8),(0,t.passTestWithSideData)({iterations:b,persistedItems:f[0].cardinality.value,blockingItems:f[0].cardinality.value,requestTime:h[0]+f[0].cardinality.value*p[0]+h[1]+f[1].cardinality.value*p[1]},{...l,entriesSorted:d})}};return DT.ActorRdfJoinHash=o,DT}var DX;function PX(){return DX||(DX=1,function(a){var t=hl&&hl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=hl&&hl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(mme(),a)}(hl)),hl}var yl={},LT={},jX;function _me(){if(jX)return LT;jX=1,Object.defineProperty(LT,"__esModule",{value:!0}),LT.ActorRdfJoinSymmetricHash=void 0;const a=nn(),t=Te(),u=HA();let n=class extends a.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2,requiresVariableOverlap:!0})}async getOutput(e){const i=await a.ActorRdfJoin.getMetadatas(e.entries),o=a.ActorRdfJoin.overlappingVariables(i),{hashFunction:c}=await this.mediatorHashBindings.mediate({context:e.context}),s=o.map(d=>d.variable);return{result:{type:"bindings",bindingsStream:new u.SymmetricHashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,d=>c(d,s),a.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,i,e.context)}}}async getJoinCoefficients(e,i){const{metadatas:o}=i,c=a.ActorRdfJoin.getRequestInitialTimes(o),s=a.ActorRdfJoin.getRequestItemTimes(o);return(0,t.passTestWithSideData)({iterations:o[0].cardinality.value+o[1].cardinality.value,persistedItems:o[0].cardinality.value+o[1].cardinality.value,blockingItems:0,requestTime:c[0]+o[0].cardinality.value*s[0]+c[1]+o[1].cardinality.value*s[1]},i)}};return LT.ActorRdfJoinSymmetricHash=n,LT}var LX;function gme(){return LX||(LX=1,function(a){var t=yl&&yl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=yl&&yl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(_me(),a)}(yl)),yl}var bl={},MT={},MX;function vme(){if(MX)return MT;MX=1,Object.defineProperty(MT,"__esModule",{value:!0}),MT.ActorRdfJoinNestedLoop=void 0;const a=nn(),t=Te(),u=HA();let n=class extends a.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new u.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,a.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await a.ActorRdfJoin.getMetadatas(e.entries),e.context)}}}async getJoinCoefficients(e,i){const{metadatas:o}=i,c=a.ActorRdfJoin.getRequestInitialTimes(o),s=a.ActorRdfJoin.getRequestItemTimes(o);return(0,t.passTestWithSideData)({iterations:o[0].cardinality.value*o[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+o[0].cardinality.value*s[0]+c[1]+o[1].cardinality.value*s[1]},i)}};return MT.ActorRdfJoinNestedLoop=n,MT}var CX;function Tme(){return CX||(CX=1,function(a){var t=bl&&bl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=bl&&bl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(vme(),a)}(bl)),bl}var ml={},CT={},_l={},qT={},gl={},qX;function BX(){if(qX)return gl;qX=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.bindingsToCompactString=gl.bindingsToString=void 0;const a=ir();function t(n){const r={};for(const e of n.keys())r[e.value]=(0,a.termToString)(n.get(e));return JSON.stringify(r,null,"  ")}gl.bindingsToString=t;function u(n,r){return r.map(e=>{const i=n.get(e);return i?(0,a.termToString)(i):""}).join("")}return gl.bindingsToCompactString=u,gl}var $X;function VX(){if($X)return qT;$X=1,Object.defineProperty(qT,"__esModule",{value:!0}),qT.Bindings=void 0;const a=Te(),t=FI,u=BX();let n=class Xr{constructor(e,i,o){this.type="bindings",this.dataFactory=e,this.entries=i,this.contextHolder=o}has(e){return this.entries.has(typeof e=="string"?e:e.value)}get(e){return this.entries.get(typeof e=="string"?e:e.value)}set(e,i){return new Xr(this.dataFactory,this.entries.set(typeof e=="string"?e:e.value,i),this.contextHolder)}delete(e){return new Xr(this.dataFactory,this.entries.delete(typeof e=="string"?e:e.value),this.contextHolder)}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),e=>this.dataFactory.variable(e))}values(){return this.iteratorToIterable(this.entries.values())}forEach(e){for(const[i,o]of this.entries.entries())e(o,this.dataFactory.variable(i))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([e,i])=>[this.dataFactory.variable(e),i])[Symbol.iterator]()}equals(e){var i;if(!e)return!1;if(this===e)return!0;if(this.size!==e.size)return!1;for(const o of this.keys())if(!((i=this.get(o))!=null&&i.equals(e.get(o))))return!1;return!0}filter(e){return new Xr(this.dataFactory,(0,t.Map)(this.entries.filter((i,o)=>e(i,this.dataFactory.variable(o)))),this.contextHolder)}map(e){return new Xr(this.dataFactory,(0,t.Map)(this.entries.map((i,o)=>e(i,this.dataFactory.variable(o)))),this.contextHolder)}merge(e){if(this.size<e.size&&e instanceof Xr)return e.merge(this);let i=this.entries;if(e instanceof Xr)for(const[o,c]of e.entries){const s=this.entries.get(o);if(s&&!s.equals(c))return;i=i.set(o,c)}else for(const[o,c]of e){const s=this.entries.get(o.value);if(s&&!s.equals(c))return;i=i.set(o.value,c)}return this.createBindingsWithContexts(i,e)}mergeWith(e,i){if(this.size<i.size&&i instanceof Xr)return i.mergeWith(e,this);let o=this.entries;if(i instanceof Xr)for(const[c,s]of i.entries){const l=this.entries.get(c);let d;l&&!l.equals(s)?d=e(l,s,this.dataFactory.variable(c)):d=s,o=o.set(c,d)}else for(const[c,s]of i){const l=this.entries.get(c.value);let d;l&&!l.equals(s)?d=e(l,s,c):d=s,o=o.set(c.value,d)}return this.createBindingsWithContexts(o,i)}createBindingsWithContexts(e,i){if(this.contextHolder&&this.contextHolder.context){let o=this.contextHolder.context;return"contextHolder"in i&&i.contextHolder&&i.contextHolder.context&&(o=Xr.mergeContext(this.contextHolder.contextMergeHandlers,o,i.contextHolder.context)),new Xr(this.dataFactory,e,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:o})}return new Xr(this.dataFactory,e,i.contextHolder)}static mergeContext(e,i,o){const c=[...i.keys(),...o.keys()],s={},l={},d=new Set(o.keys().map(h=>h.name)),f=i.keys().filter(h=>d.has(h.name));for(const h of c){if(l[h.name]===1)continue;l[h.name]=1;const p=f.some(b=>b.name===h.name);if(e[h.name]&&p){s[h.name]=e[h.name].run(i.get(h),o.get(h));continue}if(!(!e[h.name]&&p)){if(!i.get(h)){s[h.name]=o.get(h);continue}o.get(h)||(s[h.name]=i.get(h))}}return new a.ActionContext(s)}setContextEntry(e,i){return this.setContextEntryRaw(e,i)}setContextEntryRaw(e,i){var o;return this.contextHolder&&this.contextHolder.context?new Xr(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context.set(e,i)}):new Xr(this.dataFactory,this.entries,{contextMergeHandlers:((o=this.contextHolder)==null?void 0:o.contextMergeHandlers)??{},context:new a.ActionContext().set(e,i)})}deleteContextEntry(e){return this.deleteContextEntryRaw(e)}deleteContextEntryRaw(e){var i;return this.contextHolder?new Xr(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:(i=this.contextHolder.context)==null?void 0:i.delete(e)}):new Xr(this.dataFactory,this.entries)}getContext(){var e;return(e=this.contextHolder)==null?void 0:e.context}getContextEntry(e){var i;return(i=this.getContext())==null?void 0:i.get(e)}toString(){return(0,u.bindingsToString)(this)}*mapIterable(e,i){for(const o of e)yield i(o)}iteratorToIterable(e){return{[Symbol.iterator]:()=>e}}};return qT.Bindings=n,qT}var BT={},UX;function wme(){if(UX)return BT;UX=1,Object.defineProperty(BT,"__esModule",{value:!0}),BT.BindingsFactory=void 0;const a=FI,t=VX();let u=class sae{constructor(r,e){this.dataFactory=r,this.contextMergeHandlers=e}static async create(r,e,i){return new sae(i,(await r.mediate({context:e})).mergeHandlers)}bindings(r=[]){return new t.Bindings(this.dataFactory,(0,a.Map)(r.map(([e,i])=>[e.value,i])),this.contextMergeHandlers?{contextMergeHandlers:this.contextMergeHandlers}:void 0)}fromBindings(r){return this.bindings([...r])}fromRecord(r){return this.bindings(Object.entries(r).map(([e,i])=>[this.dataFactory.variable(e),i]))}};return BT.BindingsFactory=u,BT}var QX;function Xt(){return QX||(QX=1,function(a){var t=_l&&_l.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=_l&&_l.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(VX(),a),u(wme(),a),u(BX(),a)}(_l)),_l}var HX;function Sme(){if(HX)return CT;HX=1,Object.defineProperty(CT,"__esModule",{value:!0}),CT.ActorRdfJoinOptionalHash=void 0;const a=nn(),t=Te(),u=Xt(),n=VR(),r=Ia(),e=gt(),i=ir();let o=class LD extends a.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}-${s.blocking?"blocking":"nonblocking"}`,limitEntries:2,canHandleUndefs:s.canHandleUndefs,requiresVariableOverlap:!0})}static constructIndex(s,l){return s?new n.BindingsIndexUndef(l,d=>d&&d.termType!=="Variable"?(0,i.termToString)(d):"",!0):new n.BindingsIndexDef(l,u.bindingsToCompactString)}async getOutput(s){const l=s.entries[1].output,d=s.entries[0].output,f=await a.ActorRdfJoin.getMetadatas(s.entries),h=a.ActorRdfJoin.overlappingVariables(f);let p;return this.blocking?p=new r.ClosableTransformIterator(async()=>{const b=LD.constructIndex(this.canHandleUndefs,h);return await new Promise(_=>{l.bindingsStream.on("data",y=>{(b.getFirst(y,!0)??b.put(y,[])).push(y)}),l.bindingsStream.on("end",_),l.bindingsStream.on("error",y=>{p.emit("error",y)})}),new e.MultiTransformIterator(d.bindingsStream,{multiTransform:_=>new e.ArrayIterator(b.get(_).flat().map(y=>a.ActorRdfJoin.joinBindings(_,y)).filter(y=>y!==null),{autoStart:!1}),optional:!0,autoStart:!1})},{autoStart:!1,onClose(){l.bindingsStream.destroy(),d.bindingsStream.destroy()}}):p=new r.ClosableTransformIterator(async()=>{const b=LD.constructIndex(this.canHandleUndefs,h);let _=!0;return l.bindingsStream.on("data",y=>{(b.getFirst(y,!0)??b.put(y,new e.BufferedIterator({autoStart:!1})))._push(y)}),l.bindingsStream.on("end",()=>{for(const y of b.values())y.close();_=!1}),l.bindingsStream.on("error",y=>{p.emit("error",y)}),new e.MultiTransformIterator(d.bindingsStream,{multiTransform:y=>{let g=b.get(y);return g.length===0&&(_?g=[b.put(y,new e.BufferedIterator({autoStart:!1}))]:g=[]),new e.UnionIterator(g.map(v=>v.clone()),{autoStart:!1}).map(v=>a.ActorRdfJoin.joinBindings(y,v))},optional:!0,autoStart:!1})},{autoStart:!1,onClose(){l.bindingsStream.destroy(),d.bindingsStream.destroy()}}),{result:{type:"bindings",bindingsStream:p,metadata:async()=>await this.constructResultMetadata(s.entries,f,s.context,{},!0)}}}async getJoinCoefficients(s,l){const{metadatas:d}=l,f=a.ActorRdfJoin.getRequestInitialTimes(d),h=a.ActorRdfJoin.getRequestItemTimes(d);let p=d[0].cardinality.value+d[1].cardinality.value;return this.canHandleUndefs||(p*=.8),this.blocking&&(p*=.9),(0,t.passTestWithSideData)({iterations:p,persistedItems:d[0].cardinality.value,blockingItems:this.blocking?d[0].cardinality.value:0,requestTime:f[0]+d[0].cardinality.value*h[0]+f[1]+d[1].cardinality.value*h[1]},l)}};return CT.ActorRdfJoinOptionalHash=o,CT}var GX;function GA(){return GX||(GX=1,function(a){var t=ml&&ml.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ml&&ml.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Sme(),a)}(ml)),ml}var vl={},$T={},zX;function Ome(){if(zX)return $T;zX=1,Object.defineProperty($T,"__esModule",{value:!0}),$T.ActorRdfJoinOptionalNestedLoop=void 0;const a=nn(),t=Te(),u=HA();let n=class extends a.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new u.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,a.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await a.ActorRdfJoin.getMetadatas(e.entries),e.context,{},!0)}}}async getJoinCoefficients(e,i){const{metadatas:o}=i,c=a.ActorRdfJoin.getRequestInitialTimes(o),s=a.ActorRdfJoin.getRequestItemTimes(o);return(0,t.passTestWithSideData)({iterations:o[0].cardinality.value*o[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+o[0].cardinality.value*s[0]+c[1]+o[1].cardinality.value*s[1]},i)}};return $T.ActorRdfJoinOptionalNestedLoop=n,$T}var kX;function Ame(){return kX||(kX=1,function(a){var t=vl&&vl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=vl&&vl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ome(),a)}(vl)),vl}var Tl={},VT={},XX;function Eme(){if(XX)return VT;XX=1,Object.defineProperty(VT,"__esModule",{value:!0}),VT.ActorRdfJoinMinusHash=void 0;const a=nn(),t=Te(),u=Xt(),n=VR(),r=Ia(),e=ir();let i=class cae extends a.ActorRdfJoin{constructor(c){super(c,{logicalType:"minus",physicalName:`hash-${c.canHandleUndefs?"undef":"def"}`,limitEntries:2,canHandleUndefs:c.canHandleUndefs})}static constructIndex(c,s){return c?new n.BindingsIndexUndef(s,l=>l&&l.termType!=="Variable"?(0,e.termToString)(l):"",!1):new n.BindingsIndexDef(s,u.bindingsToCompactString)}async getOutput(c){const s=c.entries[1].output,l=c.entries[0].output,d=await a.ActorRdfJoin.getMetadatas(c.entries),f=a.ActorRdfJoin.overlappingVariables(d);if(f.length===0)return s.bindingsStream.destroy(),{result:l};const h=new r.ClosableTransformIterator(async()=>{const p=cae.constructIndex(this.canHandleUndefs,f);return await new Promise(b=>{s.bindingsStream.on("data",_=>p.put(_,!0)),s.bindingsStream.on("end",b),s.bindingsStream.on("error",_=>h.emit("error",_))}),l.bindingsStream.filter(b=>!p.getFirst(b,!0))},{autoStart:!1,onClose(){s.bindingsStream.destroy(),l.bindingsStream.destroy()}});return{result:{type:"bindings",bindingsStream:h,metadata:l.metadata}}}async getJoinCoefficients(c,s){const{metadatas:l}=s,d=a.ActorRdfJoin.getRequestInitialTimes(l),f=a.ActorRdfJoin.getRequestItemTimes(l);let h=l[0].cardinality.value+l[1].cardinality.value;return this.canHandleUndefs||(h*=.8),(0,t.passTestWithSideData)({iterations:h,persistedItems:l[0].cardinality.value,blockingItems:l[0].cardinality.value,requestTime:d[0]+l[0].cardinality.value*f[0]+d[1]+l[1].cardinality.value*f[1]},s)}};return VT.ActorRdfJoinMinusHash=i,VT}var JX;function KX(){return JX||(JX=1,function(a){var t=Tl&&Tl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Tl&&Tl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Eme(),a)}(Tl)),Tl}var wl={},UT={},Sl={},QT={},WX;function Ime(){if(WX)return QT;WX=1,Object.defineProperty(QT,"__esModule",{value:!0}),QT.ActorDereferenceRdf=void 0;const a=MN();let t=class extends a.ActorDereferenceParse{constructor(n){super(n)}};return QT.ActorDereferenceRdf=t,QT}var YX;function xme(){return YX||(YX=1,function(a){var t=Sl&&Sl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Sl&&Sl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ime(),a)}(Sl)),Sl}var ZX;function Nme(){if(ZX)return UT;ZX=1,Object.defineProperty(UT,"__esModule",{value:!0}),UT.ActorDereferenceRdfParse=void 0;const a=xme();let t=class extends a.ActorDereferenceRdf{constructor(n){super(n)}async getMetadata(n){return{baseIRI:n.url}}};return UT.ActorDereferenceRdfParse=t,UT}var eJ;function Rme(){return eJ||(eJ=1,function(a){var t=wl&&wl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=wl&&wl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Nme(),a)}(wl)),wl}var Ol={},HT={},GT={},tJ;function Fme(){if(tJ)return GT;tJ=1,Object.defineProperty(GT,"__esModule",{value:!0}),GT.HtmlScriptListener=void 0;const a=ze(),t=Mt(),u=vr();let n=class oO{constructor(e,i,o,c,s,l,d,f){this.textChunksJsonLd=[],this.endBarrier=1,this.passedScripts=0,this.isFinalJsonLdProcessing=!1,this.mediatorRdfParseHandle=e,this.cbQuad=i,this.cbError=o,this.cbEnd=c,this.supportedTypes=s,this.context=l.set(a.KeysRdfParseHtmlScript.processingHtmlScript,!0),this.baseIRI=d,this.headers=f,this.onlyFirstScript=l.get(a.KeysRdfParseHtmlScript.extractAllScripts)===!1;const h=this.baseIRI.indexOf("#");this.targetScriptId=h>0?this.baseIRI.slice(h+1,this.baseIRI.length):null}static newErrorCoded(e,i){const o=new Error(e);return o.code=i,o}onEnd(){--this.endBarrier===0&&(this.textChunksJsonLd.length>0?(this.handleMediaType="application/ld+json",this.textChunks=this.textChunksJsonLd,this.textChunks.push("]"),this.textChunksJsonLd=[],this.isFinalJsonLdProcessing=!0,this.endBarrier++,this.onTagClose()):(this.passedScripts===0&&this.targetScriptId&&this.cbError(oO.newErrorCoded(`Failed to find targeted script id "${this.targetScriptId}"`,"loading document failed")),this.cbEnd()),this.isFinalJsonLdProcessing=!1)}onTagClose(){if(this.handleMediaType)if(this.requiresCustomJsonLdHandling(this.handleMediaType)&&!this.isFinalJsonLdProcessing)this.handleMediaType=void 0,this.textChunks=void 0,this.onEnd();else{const e=new t.Readable({objectMode:!0});e._read=()=>{};const i=this.textChunks,o={context:this.context,handle:{metadata:{baseIRI:this.baseIRI},data:e,headers:this.headers,context:this.context},handleMediaType:this.handleMediaType};this.mediatorRdfParseHandle.mediate(o).then(({handle:c})=>{c.data.on("error",s=>this.cbError(oO.newErrorCoded(s.message,"invalid script element"))).on("data",this.cbQuad).on("end",()=>this.onEnd());for(const s of i)e.push(s);e.push(null)}).catch(c=>{this.targetScriptId?this.cbError(oO.newErrorCoded(c.message,"loading document failed")):this.onEnd()}),this.handleMediaType=void 0,this.textChunks=void 0}}onTagOpen(e,i){e==="base"&&i.href&&(this.baseIRI=(0,u.resolve)(i.href,this.baseIRI)),e==="script"&&(!this.targetScriptId||i.id===this.targetScriptId)?this.supportedTypes[i.type]?this.onlyFirstScript&&this.passedScripts>0?this.handleMediaType=void 0:(this.passedScripts++,this.handleMediaType=i.type,this.endBarrier++,this.requiresCustomJsonLdHandling(this.handleMediaType)?(this.textChunks=this.textChunksJsonLd,this.textChunks.push(this.textChunks.length===0?"[":",")):this.textChunks=[]):this.targetScriptId&&this.cbError(oO.newErrorCoded(`Targeted script "${this.targetScriptId}" does not have a supported type`,"loading document failed")):this.handleMediaType=void 0}onText(e){this.handleMediaType&&this.textChunks.push(e)}requiresCustomJsonLdHandling(e){return!this.onlyFirstScript&&!this.targetScriptId&&e==="application/ld+json"}};return GT.HtmlScriptListener=n,GT}var rJ;function Dme(){if(rJ)return HT;rJ=1,Object.defineProperty(HT,"__esModule",{value:!0}),HT.ActorRdfParseHtmlScript=void 0;const a=pR(),t=Te(),u=Fme();let n=class extends a.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return(0,t.passTestVoid)()}async run(e){const i=(await this.mediatorRdfParseMediatypes.mediate({context:e.context,mediaTypes:!0})).mediaTypes;return{htmlParseListener:new u.HtmlScriptListener(this.mediatorRdfParseHandle,e.emit,e.error,e.end,i,e.context,e.baseIRI,e.headers)}}};return HT.ActorRdfParseHtmlScript=n,HT}var nJ;function Pme(){return nJ||(nJ=1,function(a){var t=Ol&&Ol.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ol&&Ol.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Dme(),a)}(Ol)),Ol}var Al={},zT={},iJ;function jme(){if(iJ)return zT;iJ=1,Object.defineProperty(zT,"__esModule",{value:!0}),zT.ActorQueryResultSerializeRdf=void 0;const a=Si(),t=Te();let u=class extends a.ActorQueryResultSerialize{constructor(r){super(r)}async testHandle(r,e,i){if(r.type!=="quads")return(0,t.failTest)(`Actor ${this.name} can only handle quad streams`);const{mediaTypes:o}=await this.mediatorMediaTypeCombiner.mediate({context:i,mediaTypes:!0});return e in o?(0,t.passTestVoid)():(0,t.failTest)(`Actor ${this.name} can not handle media type ${e}. All available types: ${Object.keys(o)}`)}async runHandle(r,e,i){return(await this.mediatorRdfSerialize.mediate({context:i,handle:{context:i,quadStream:r.quadStream},handleMediaType:e})).handle}async testMediaType(r){return(0,t.passTestVoid)()}async getMediaTypes(r){return(await this.mediatorMediaTypeCombiner.mediate({context:r,mediaTypes:!0})).mediaTypes}async testMediaTypeFormats(r){return(0,t.passTestVoid)()}async getMediaTypeFormats(r){return(await this.mediatorMediaTypeFormatCombiner.mediate({context:r,mediaTypeFormats:!0})).mediaTypeFormats}};return zT.ActorQueryResultSerializeRdf=u,zT}var aJ;function Lme(){return aJ||(aJ=1,function(a){var t=Al&&Al.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Al&&Al.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(jme(),a)}(Al)),Al}var El={},kT={},Il={},XT={},uJ;function Mme(){if(uJ)return XT;uJ=1,Object.defineProperty(XT,"__esModule",{value:!0}),XT.ActorBindingsAggregatorFactory=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n),this.mediatorExpressionEvaluatorFactory=n.mediatorExpressionEvaluatorFactory}};return XT.ActorBindingsAggregatorFactory=t,XT}var JT={},oJ;function Cme(){if(oJ)return JT;oJ=1,Object.defineProperty(JT,"__esModule",{value:!0}),JT.AggregateEvaluator=void 0;const a=ze(),t=Ae(),u=ir();let n=class{constructor(e,i,o=!1){this.evaluator=e,this.distinct=i,this.throwError=o,this.errorOccurred=!1,this.errorOccurred=!1,this.superTypeProvider=e.context.getSafe(a.KeysExpressionEvaluator.superTypeProvider),this.termTransformer=new t.TermTransformer(this.superTypeProvider),this.variableValues=new Set}emptyValueTerm(){}emptyValue(){const e=this.emptyValueTerm();if(e===void 0&&this.throwError)throw new t.EmptyAggregateError;return e}async putBindings(e){if(!this.errorOccurred)try{const i=await this.evaluator.evaluate(e);if(!i||this.errorOccurred)return;(!this.distinct||!this.variableValues.has(u.termToString(i)))&&(this.putTerm(i),this.distinct&&this.variableValues.add(u.termToString(i)))}catch(i){this.safeThrow(i)}}async result(){if(!this.errorOccurred)return this.termResult()}safeThrow(e){if(this.throwError)throw e;this.errorOccurred=!0}termToNumericOrError(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a numeric literal`);if(!t.isSubTypeOf(e.datatype.value,t.TypeAlias.SPARQL_NUMERIC,this.superTypeProvider))throw new Error(`Term datatype ${e.datatype.value} with value ${e.value} has type ${e.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(e)}};return JT.AggregateEvaluator=n,JT}var sJ;function Qr(){return sJ||(sJ=1,function(a){var t=Il&&Il.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Il&&Il.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Mme(),a),u(Cme(),a)}(Il)),Il}var KT={},cJ;function lJ(){if(cJ)return KT;cJ=1,Object.defineProperty(KT,"__esModule",{value:!0}),KT.GroupConcatAggregator=void 0;const a=Qr(),t=Ae();let u=class extends a.AggregateEvaluator{constructor(r,e,i,o,c){super(r,e,c),this.dataFactory=i,this.state=void 0,this.lastLanguageValid=!0,this.lastLanguage=void 0,this.separator=o??" "}emptyValueTerm(){return t.typedLiteral("",t.TypeURL.XSD_STRING)}putTerm(r){this.state===void 0?(this.state=r.value,r.termType==="Literal"&&(this.lastLanguage=r.language)):(this.state+=this.separator+r.value,this.lastLanguageValid&&r.termType==="Literal"&&this.lastLanguage!==r.language&&(this.lastLanguageValid=!1,this.lastLanguage=void 0))}termResult(){return this.state===void 0?this.emptyValue():this.lastLanguageValid&&this.lastLanguage?t.langString(this.state,this.lastLanguage).toRDF(this.dataFactory):t.typedLiteral(this.state,t.TypeURL.XSD_STRING)}};return KT.GroupConcatAggregator=u,KT}var dJ;function qme(){if(dJ)return kT;dJ=1,Object.defineProperty(kT,"__esModule",{value:!0}),kT.ActorBindingsAggregatorFactoryGroupConcat=void 0;const a=Qr(),t=ze(),u=Te(),n=lJ();let r=class extends a.ActorBindingsAggregatorFactory{constructor(i){super(i)}async test(i){return i.expr.aggregator!=="group_concat"?(0,u.failTest)("This actor only supports the 'group_concat' aggregator."):(0,u.passTestVoid)()}async run({context:i,expr:o}){return new n.GroupConcatAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:i}),o.distinct,i.getSafe(t.KeysInitQuery.dataFactory),o.separator)}};return kT.ActorBindingsAggregatorFactoryGroupConcat=r,kT}var fJ;function Bme(){return fJ||(fJ=1,function(a){var t=El&&El.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=El&&El.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(qme(),a),u(lJ(),a)}(El)),El}var xl={},WT={},YT={},hJ;function pJ(){if(hJ)return YT;hJ=1,Object.defineProperty(YT,"__esModule",{value:!0}),YT.CountAggregator=void 0;const a=Qr(),t=Ae();let u=class extends a.AggregateEvaluator{constructor(r,e,i){super(r,e,i),this.state=void 0}emptyValueTerm(){return(0,t.typedLiteral)("0",t.TypeURL.XSD_INTEGER)}putTerm(r){this.state===void 0&&(this.state=0),this.state++}termResult(){return this.state===void 0?this.emptyValue():(0,t.typedLiteral)(String(this.state),t.TypeURL.XSD_INTEGER)}};return YT.CountAggregator=u,YT}var yJ;function $me(){if(yJ)return WT;yJ=1,Object.defineProperty(WT,"__esModule",{value:!0}),WT.ActorBindingsAggregatorFactoryCount=void 0;const a=Qr(),t=Te(),u=ht(),n=pJ();let r=class extends a.ActorBindingsAggregatorFactory{constructor(i){super(i)}async test(i){return i.expr.aggregator!=="count"||i.expr.expression.expressionType===u.Algebra.expressionTypes.WILDCARD?(0,t.failTest)("This actor only supports the 'count' aggregator without wildcard."):(0,t.passTestVoid)()}async run({context:i,expr:o}){return new n.CountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:i}),o.distinct)}};return WT.ActorBindingsAggregatorFactoryCount=r,WT}var bJ;function Vme(){return bJ||(bJ=1,function(a){var t=xl&&xl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=xl&&xl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u($me(),a),u(pJ(),a)}(xl)),xl}var Nl={},ZT={},e2={},mJ;function _J(){if(mJ)return e2;mJ=1,Object.defineProperty(e2,"__esModule",{value:!0}),e2.SampleAggregator=void 0;const a=Qr();let t=class extends a.AggregateEvaluator{constructor(n,r,e){super(n,r,e),this.state=void 0}putTerm(n){this.state===void 0&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return e2.SampleAggregator=t,e2}var gJ;function Ume(){if(gJ)return ZT;gJ=1,Object.defineProperty(ZT,"__esModule",{value:!0}),ZT.ActorBindingsAggregatorFactorySample=void 0;const a=Qr(),t=Te(),u=_J();let n=class extends a.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="sample"?(0,t.failTest)("This actor only supports the 'sample' aggregator."):(0,t.passTestVoid)()}async run({context:e,expr:i}){return new u.SampleAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:i.expression,context:e}),i.distinct)}};return ZT.ActorBindingsAggregatorFactorySample=n,ZT}var vJ;function Qme(){return vJ||(vJ=1,function(a){var t=Nl&&Nl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Nl&&Nl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ume(),a),u(_J(),a)}(Nl)),Nl}var Rl={},t2={},r2={},TJ;function wJ(){if(TJ)return r2;TJ=1,Object.defineProperty(r2,"__esModule",{value:!0}),r2.WildcardCountAggregator=void 0;const a=Qr(),t=Ae(),u=ir();let n=class extends a.AggregateEvaluator{constructor(e,i,o){super(e,i,o),this.bindingValues=new Map,this.state=void 0}putTerm(e){}async putBindings(e){this.handleDistinct(e)||(this.state===void 0&&(this.state=0),this.state+=1)}emptyValueTerm(){return(0,t.typedLiteral)("0",t.TypeURL.XSD_INTEGER)}termResult(){return this.state===void 0?this.emptyValue():(0,t.typedLiteral)(String(this.state),t.TypeURL.XSD_INTEGER)}handleDistinct(e){if(this.distinct){const i=[...e];i.sort((d,f)=>d[0].value.localeCompare(f[0].value));const o=i.map(([d])=>d.value).join(","),c=i.map(([,d])=>u.termToString(d)).join(","),s=this.bindingValues.get(o),l=s!==void 0&&s.has(c);return s||this.bindingValues.set(o,new Set),this.bindingValues.get(o).add(c),l}return!1}};return r2.WildcardCountAggregator=n,r2}var SJ;function Hme(){if(SJ)return t2;SJ=1,Object.defineProperty(t2,"__esModule",{value:!0}),t2.ActorBindingsAggregatorFactoryWildcardCount=void 0;const a=Qr(),t=Te(),u=wJ();let n=class extends a.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="count"||e.expr.expression.expressionType!=="wildcard"?(0,t.failTest)("This actor only supports the 'count' aggregator with wildcard."):(0,t.passTestVoid)()}async run({context:e,expr:i}){return new u.WildcardCountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:i.expression,context:e}),i.distinct)}};return t2.ActorBindingsAggregatorFactoryWildcardCount=n,t2}var OJ;function Gme(){return OJ||(OJ=1,function(a){var t=Rl&&Rl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Rl&&Rl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Hme(),a),u(wJ(),a)}(Rl)),Rl}var Fl={},n2={},i2={},AJ;function EJ(){if(AJ)return i2;AJ=1,Object.defineProperty(i2,"__esModule",{value:!0}),i2.AverageAggregator=void 0;const a=Qr(),t=Ae();let u=class extends a.AggregateEvaluator{constructor(r,e,i,o,c,s){super(r,e,s),this.dataFactory=i,this.additionFunction=o,this.divisionFunction=c,this.state=void 0}emptyValueTerm(){return t.typedLiteral("0",t.TypeURL.XSD_INTEGER)}putTerm(r){if(this.state===void 0){const e=this.termToNumericOrError(r);this.state={sum:e,count:1}}else{const e=this.termToNumericOrError(r);this.state.sum=this.additionFunction.applyOnTerms([this.state.sum,e],this.evaluator),this.state.count++}}termResult(){if(this.state===void 0)return this.emptyValue();const r=new t.IntegerLiteral(this.state.count);return this.divisionFunction.applyOnTerms([this.state.sum,r],this.evaluator).toRDF(this.dataFactory)}};return i2.AverageAggregator=u,i2}var IJ;function zme(){if(IJ)return n2;IJ=1,Object.defineProperty(n2,"__esModule",{value:!0}),n2.ActorBindingsAggregatorFactoryAverage=void 0;const a=Qr(),t=ze(),u=Te(),n=Ae(),r=EJ();let e=class extends a.ActorBindingsAggregatorFactory{constructor(o){super(o),this.mediatorFunctionFactory=o.mediatorFunctionFactory}async test(o){return o.expr.aggregator!=="avg"?(0,u.failTest)("This actor only supports the 'avg' aggregator."):(0,u.passTestVoid)()}async run({context:o,expr:c}){return new r.AverageAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:c.expression,context:o}),c.distinct,o.getSafe(t.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:o,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.DIVISION,context:o,requireTermExpression:!0}))}};return n2.ActorBindingsAggregatorFactoryAverage=e,n2}var xJ;function kme(){return xJ||(xJ=1,function(a){var t=Fl&&Fl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Fl&&Fl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(zme(),a),u(EJ(),a)}(Fl)),Fl}var Dl={},a2={},u2={},NJ;function RJ(){if(NJ)return u2;NJ=1,Object.defineProperty(u2,"__esModule",{value:!0}),u2.SumAggregator=void 0;const a=Qr(),t=Ae();let u=class extends a.AggregateEvaluator{constructor(r,e,i,o,c){super(r,e,c),this.dataFactory=i,this.additionFunction=o,this.state=void 0}emptyValueTerm(){return(0,t.typedLiteral)("0",t.TypeURL.XSD_INTEGER)}putTerm(r){if(this.state===void 0)this.state=this.termToNumericOrError(r);else{const e=this.termToNumericOrError(r);this.state=this.additionFunction.applyOnTerms([this.state,e],this.evaluator)}}termResult(){return this.state===void 0?this.emptyValue():this.state.toRDF(this.dataFactory)}};return u2.SumAggregator=u,u2}var FJ;function Xme(){if(FJ)return a2;FJ=1,Object.defineProperty(a2,"__esModule",{value:!0}),a2.ActorBindingsAggregatorFactorySum=void 0;const a=Qr(),t=ze(),u=Te(),n=Ae(),r=RJ();let e=class extends a.ActorBindingsAggregatorFactory{constructor(o){super(o),this.mediatorFunctionFactory=o.mediatorFunctionFactory}async test(o){return o.expr.aggregator!=="sum"?(0,u.failTest)("This actor only supports the 'sum' aggregator."):(0,u.passTestVoid)()}async run({expr:o,context:c}){return new r.SumAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:c}),o.distinct,c.getSafe(t.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:c,requireTermExpression:!0}))}};return a2.ActorBindingsAggregatorFactorySum=e,a2}var DJ;function Jme(){return DJ||(DJ=1,function(a){var t=Dl&&Dl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Dl&&Dl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Xme(),a),u(RJ(),a)}(Dl)),Dl}var Pl={},o2={},s2={},PJ;function Kme(){if(PJ)return s2;PJ=1,Object.defineProperty(s2,"__esModule",{value:!0}),s2.ExpressionFunctionIn=void 0;const a=Ne(),t=Ae();let u=class extends a.ExpressionFunctionBase{constructor(r){super({arity:Number.POSITIVE_INFINITY,operator:t.SparqlOperator.IN,apply:async e=>{const{args:i,mapping:o,exprEval:c}=e,[s,...l]=i,d=await c.evaluatorExpressionEvaluation(s,o);return await this.inRecursive(d,{...e,args:l},[])}}),this.equalityFunction=r}checkArity(r){return r.length>0}async inRecursive(r,e,i){const{args:o,mapping:c,exprEval:s}=e;if(o.length===0)return i.every(d=>!d)?(0,t.bool)(!1):Promise.reject(new t.InError(i));try{const l=o.shift(),d=await s.evaluatorExpressionEvaluation(l,c);return this.equalityFunction.applyOnTerms([r,d],s).typedValue?(0,t.bool)(!0):this.inRecursive(r,e,[...i,!1])}catch(l){return this.inRecursive(r,e,[...i,l])}}};return s2.ExpressionFunctionIn=u,s2}var jJ;function Wme(){if(jJ)return o2;jJ=1,Object.defineProperty(o2,"__esModule",{value:!0}),o2.ActorFunctionFactoryExpressionIn=void 0;const a=Ne(),t=Ae(),u=Kme();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const i=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new u.ExpressionFunctionIn(i)}};return o2.ActorFunctionFactoryExpressionIn=n,o2}var LJ;function Yme(){return LJ||(LJ=1,function(a){var t=Pl&&Pl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Pl&&Pl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Wme(),a)}(Pl)),Pl}var jl={},c2={},l2={},MJ;function Zme(){if(MJ)return l2;MJ=1,Object.defineProperty(l2,"__esModule",{value:!0}),l2.ExpressionFunctionNotIn=void 0;const a=Ne(),t=Ae();let u=class extends a.ExpressionFunctionBase{constructor(r){super({arity:Number.POSITIVE_INFINITY,operator:t.SparqlOperator.NOT_IN,apply:async e=>{const i=await this.inFunction.apply(e);return(0,t.bool)(!i.typedValue)}}),this.inFunction=r}checkArity(r){return r.length>0}};return l2.ExpressionFunctionNotIn=u,l2}var CJ;function e_e(){if(CJ)return c2;CJ=1,Object.defineProperty(c2,"__esModule",{value:!0}),c2.ActorFunctionFactoryExpressionNotIn=void 0;const a=Ne(),t=Ae(),u=Zme();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOT_IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const i=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.IN,context:e.context,arguments:e.arguments});return new u.ExpressionFunctionNotIn(i)}};return c2.ActorFunctionFactoryExpressionNotIn=n,c2}var qJ;function t_e(){return qJ||(qJ=1,function(a){var t=jl&&jl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=jl&&jl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(e_e(),a)}(jl)),jl}var Ll={},d2={},f2={},BJ;function r_e(){if(BJ)return f2;BJ=1,Object.defineProperty(f2,"__esModule",{value:!0}),f2.TermFunctionGreaterThanEqual=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(r){super({arity:2,operator:t.SparqlOperator.GTE,overloads:(0,t.declare)(t.SparqlOperator.GTE).set(["term","term"],e=>([i,o])=>this.lessThanEqualFunction.applyOnTerms([o,i],e)).collect()}),this.lessThanEqualFunction=r}};return f2.TermFunctionGreaterThanEqual=u,f2}var $J;function n_e(){if($J)return d2;$J=1,Object.defineProperty(d2,"__esModule",{value:!0}),d2.ActorFunctionFactoryTermGreaterThanEqual=void 0;const a=Ne(),t=Ae(),u=r_e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.GTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const i=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.LTE,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new u.TermFunctionGreaterThanEqual(i)}};return d2.ActorFunctionFactoryTermGreaterThanEqual=n,d2}var VJ;function i_e(){return VJ||(VJ=1,function(a){var t=Ll&&Ll.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ll&&Ll.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(n_e(),a)}(Ll)),Ll}var Ml={},h2={},p2={},UJ;function a_e(){if(UJ)return p2;UJ=1,Object.defineProperty(p2,"__esModule",{value:!0}),p2.TermFunctionGreaterThan=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(r){super({arity:2,operator:t.SparqlOperator.GT,overloads:(0,t.declare)(t.SparqlOperator.GT).set(["term","term"],e=>([i,o])=>this.lessThanFunction.applyOnTerms([o,i],e)).collect()}),this.lessThanFunction=r}};return p2.TermFunctionGreaterThan=u,p2}var QJ;function u_e(){if(QJ)return h2;QJ=1,Object.defineProperty(h2,"__esModule",{value:!0}),h2.ActorFunctionFactoryTermGreaterThan=void 0;const a=Ne(),t=Ae(),u=a_e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.GT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const i=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new u.TermFunctionGreaterThan(i)}};return h2.ActorFunctionFactoryTermGreaterThan=n,h2}var HJ;function o_e(){return HJ||(HJ=1,function(a){var t=Ml&&Ml.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ml&&Ml.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(u_e(),a)}(Ml)),Ml}var Cl={},y2={},b2={},GJ;function s_e(){if(GJ)return b2;GJ=1,Object.defineProperty(b2,"__esModule",{value:!0}),b2.TermFunctionInequality=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(r){super({arity:2,operator:t.SparqlOperator.NOT_EQUAL,overloads:(0,t.declare)(t.SparqlOperator.NOT_EQUAL).set(["term","term"],e=>([i,o])=>(0,t.bool)(!this.equalityFunction.applyOnTerms([i,o],e).typedValue)).collect()}),this.equalityFunction=r}};return b2.TermFunctionInequality=u,b2}var zJ;function c_e(){if(zJ)return y2;zJ=1,Object.defineProperty(y2,"__esModule",{value:!0}),y2.ActorFunctionFactoryTermInequality=void 0;const a=Ne(),t=Ae(),u=s_e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOT_EQUAL],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const i=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new u.TermFunctionInequality(i)}};return y2.ActorFunctionFactoryTermInequality=n,y2}var kJ;function l_e(){return kJ||(kJ=1,function(a){var t=Cl&&Cl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Cl&&Cl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(c_e(),a)}(Cl)),Cl}var ql={},m2={},_2={},XJ;function d_e(){if(XJ)return _2;XJ=1,Object.defineProperty(_2,"__esModule",{value:!0}),_2.TermFunctionLesserThanEqual=void 0;const a=Ne(),t=Ae();let u=class extends a.TermFunctionBase{constructor(r,e){super({arity:2,operator:t.SparqlOperator.LTE,overloads:(0,t.declare)(t.SparqlOperator.LTE).set(["term","term"],i=>([o,c])=>(0,t.bool)(this.lessThanFunction.applyOnTerms([o,c],i).typedValue||this.equalityFunction.applyOnTerms([o,c],i).typedValue)).collect()}),this.equalityFunction=r,this.lessThanFunction=e}};return _2.TermFunctionLesserThanEqual=u,_2}var JJ;function f_e(){if(JJ)return m2;JJ=1,Object.defineProperty(m2,"__esModule",{value:!0}),m2.ActorFunctionFactoryTermLesserThanEqual=void 0;const a=Ne(),t=Ae(),u=d_e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const i=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments}),o=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new u.TermFunctionLesserThanEqual(i,o)}};return m2.ActorFunctionFactoryTermLesserThanEqual=n,m2}var KJ;function h_e(){return KJ||(KJ=1,function(a){var t=ql&&ql.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ql&&ql.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(f_e(),a)}(ql)),ql}var Bl={},g2={},v2={},WJ;function p_e(){if(WJ)return v2;WJ=1,Object.defineProperty(v2,"__esModule",{value:!0}),v2.TermFunctionLesserThan=void 0;const a=Ne(),t=ze(),u=Ae();let n=class extends a.TermFunctionBase{constructor(e){super({arity:2,operator:u.SparqlOperator.LT,overloads:(0,u.declare)(u.SparqlOperator.LT).numberTest(()=>(i,o)=>i<o).stringTest(()=>(i,o)=>i.localeCompare(o)===-1).booleanTest(()=>(i,o)=>i<o).dateTimeTest(i=>(o,c)=>(0,u.toUTCDate)(o,i.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,u.toUTCDate)(c,i.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DATE_TIME],to:[u.TypeURL.XSD_DATE,u.TypeURL.XSD_DATE]}).set([u.TypeURL.XSD_YEAR_MONTH_DURATION,u.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([i,o])=>(0,u.bool)((0,u.yearMonthDurationsToMonths)((0,u.defaultedYearMonthDurationRepresentation)(i.typedValue))<(0,u.yearMonthDurationsToMonths)((0,u.defaultedYearMonthDurationRepresentation)(o.typedValue)))).set([u.TypeURL.XSD_DAY_TIME_DURATION,u.TypeURL.XSD_DAY_TIME_DURATION],()=>([i,o])=>(0,u.bool)((0,u.dayTimeDurationsToSeconds)((0,u.defaultedDayTimeDurationRepresentation)(i.typedValue))<(0,u.dayTimeDurationsToSeconds)((0,u.defaultedDayTimeDurationRepresentation)(o.typedValue)))).set([u.TypeURL.XSD_TIME,u.TypeURL.XSD_TIME],i=>([o,c])=>(0,u.bool)((0,u.toUTCDate)((0,u.defaultedDateTimeRepresentation)(o.typedValue),i.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,u.toUTCDate)((0,u.defaultedDateTimeRepresentation)(c.typedValue),i.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime())).set(["quad","quad"],i=>([o,c])=>{const s=this.quadComponentTest(o.subject,c.subject,i);if(s!==void 0)return(0,u.bool)(s);const l=this.quadComponentTest(o.predicate,c.predicate,i);if(l!==void 0)return(0,u.bool)(l);const d=this.quadComponentTest(o.object,c.object,i);return d!==void 0?(0,u.bool)(d):(0,u.bool)(this.quadComponentTest(o.graph,c.graph,i)??!1)},!1).collect()}),this.equalityFunction=e}quadComponentTest(e,i,o){return this.equalityFunction.applyOnTerms([e,i],o).typedValue?void 0:this.applyOnTerms([e,i],o).typedValue}};return v2.TermFunctionLesserThan=n,v2}var YJ;function y_e(){if(YJ)return g2;YJ=1,Object.defineProperty(g2,"__esModule",{value:!0}),g2.ActorFunctionFactoryTermLesserThan=void 0;const a=Ne(),t=Ae(),u=p_e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const i=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new u.TermFunctionLesserThan(i)}};return g2.ActorFunctionFactoryTermLesserThan=n,g2}var ZJ;function b_e(){return ZJ||(ZJ=1,function(a){var t=Bl&&Bl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Bl&&Bl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(y_e(),a)}(Bl)),Bl}var $l={},T2={},eK;function m_e(){if(eK)return T2;eK=1,Object.defineProperty(T2,"__esModule",{value:!0}),T2.ActorHttpWayback=void 0;const a=Ki(),t=ze(),u=Te(),n=Fh(),r="http://wayback.archive-it.org/";function e(c){const s=new Request(c.input,c.init);return{input:new Request(new URL(`/${s.url}`,r),s)}}function i(c){const s=c.get(t.KeysHttpProxy.httpProxyHandler);return s?l=>s.getProxy(e(l)):l=>Promise.resolve(e(l))}let o=class extends a.ActorHttp{constructor(s){super(s)}async test(s){return(0,u.passTestVoid)()}async run(s){let l=await this.mediatorHttp.mediate(s);if(l.status===404&&s.context.get(t.KeysHttpWayback.recoverBrokenLinks)){let d=await this.mediatorHttp.mediate({...s,context:s.context.set(t.KeysHttpWayback.recoverBrokenLinks,!1).set(t.KeysHttpProxy.httpProxyHandler,{getProxy:i(s.context)})});d.status===200&&([l,d]=[d,l]);const{body:f}=d;f&&("cancel"in f&&typeof f.cancel=="function"?await f.cancel():"destroy"in f&&typeof f.destroy=="function"?f.destroy():await(0,n.stringify)(a.ActorHttp.toNodeReadable(f)))}return l}};return T2.ActorHttpWayback=o,T2}var tK;function __e(){return tK||(tK=1,function(a){var t=$l&&$l.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=$l&&$l.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(m_e(),a)}($l)),$l}var Vl={},w2={},Ul={},S2={},Ql={},O2={},XR={},rK;function A2(){return rK||(rK=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ERROR_CODES=a.ErrorCoded=void 0;class t extends Error{constructor(n,r){super(n),this.code=r}}a.ErrorCoded=t,function(u){u.COLLIDING_KEYWORDS="colliding keywords",u.CONFLICTING_INDEXES="conflicting indexes",u.CYCLIC_IRI_MAPPING="cyclic IRI mapping",u.INVALID_ID_VALUE="invalid @id value",u.INVALID_INDEX_VALUE="invalid @index value",u.INVALID_NEST_VALUE="invalid @nest value",u.INVALID_PREFIX_VALUE="invalid @prefix value",u.INVALID_PROPAGATE_VALUE="invalid @propagate value",u.INVALID_REVERSE_VALUE="invalid @reverse value",u.INVALID_IMPORT_VALUE="invalid @import value",u.INVALID_VERSION_VALUE="invalid @version value",u.INVALID_BASE_IRI="invalid base IRI",u.INVALID_CONTAINER_MAPPING="invalid container mapping",u.INVALID_CONTEXT_ENTRY="invalid context entry",u.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",u.INVALID_DEFAULT_LANGUAGE="invalid default language",u.INVALID_INCLUDED_VALUE="invalid @included value",u.INVALID_IRI_MAPPING="invalid IRI mapping",u.INVALID_JSON_LITERAL="invalid JSON literal",u.INVALID_KEYWORD_ALIAS="invalid keyword alias",u.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",u.INVALID_LANGUAGE_MAPPING="invalid language mapping",u.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",u.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",u.INVALID_LOCAL_CONTEXT="invalid local context",u.INVALID_REMOTE_CONTEXT="invalid remote context",u.INVALID_REVERSE_PROPERTY="invalid reverse property",u.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",u.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",u.INVALID_SCOPED_CONTEXT="invalid scoped context",u.INVALID_SCRIPT_ELEMENT="invalid script element",u.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",u.INVALID_TERM_DEFINITION="invalid term definition",u.INVALID_TYPE_MAPPING="invalid type mapping",u.INVALID_TYPE_VALUE="invalid type value",u.INVALID_TYPED_VALUE="invalid typed value",u.INVALID_VALUE_OBJECT="invalid value object",u.INVALID_VALUE_OBJECT_VALUE="invalid value object value",u.INVALID_VOCAB_MAPPING="invalid vocab mapping",u.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",u.KEYWORD_REDEFINITION="keyword redefinition",u.LOADING_DOCUMENT_FAILED="loading document failed",u.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",u.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",u.PROCESSING_MODE_CONFLICT="processing mode conflict",u.PROTECTED_TERM_REDEFINITION="protected term redefinition",u.CONTEXT_OVERFLOW="context overflow",u.INVALID_BASE_DIRECTION="invalid base direction",u.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",u.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",u.INVALID_EMBEDDED_NODE="invalid embedded node",u.INVALID_ANNOTATION="invalid annotation"}(a.ERROR_CODES||(a.ERROR_CODES={}))}(XR)),XR}var E2={},nK;function iK(){if(nK)return E2;nK=1,Object.defineProperty(E2,"__esModule",{value:!0}),E2.FetchDocumentLoader=void 0;const a=A2(),t=N1(),u=vr();class n{constructor(e){this.fetcher=e}async load(e){const i=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(i.ok&&i.headers){let o=i.headers.get("Content-Type");if(o){const c=o.indexOf(";");c>0&&(o=o.substr(0,c))}if(o==="application/ld+json")return await i.json();if(i.headers.has("Link")){let c;if(i.headers.forEach((s,l)=>{if(l==="link"){const d=(0,t.parse)(s);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+e);c=(0,u.resolve)(f.uri,e)}}}),c)return this.load(c)}throw new a.ErrorCoded(`Unsupported JSON-LD media type ${o}`,a.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(i.statusText||`Status code: ${i.status}`)}}return E2.FetchDocumentLoader=n,E2}var JR={},I2={},aK;function KR(){if(aK)return I2;aK=1,Object.defineProperty(I2,"__esModule",{value:!0}),I2.Util=void 0;class a{static isCompactIri(u){return u.indexOf(":")>0&&!(u&&u[0]==="#")}static getPrefix(u,n){if(u&&u[0]==="#")return null;const r=u.indexOf(":");if(r>=0){if(u.length>r+1&&u.charAt(r+1)==="/"&&u.charAt(r+2)==="/")return null;const e=u.substr(0,r);if(e==="_")return null;if(n[e])return e}return null}static getContextValueId(u){if(u===null||typeof u=="string")return u;const n=u["@id"];return n||null}static isSimpleTermDefinitionPrefix(u,n){return!a.isPotentialKeyword(u)&&(n.allowPrefixNonGenDelims||typeof u=="string"&&(u[0]==="_"||a.isPrefixIriEndingWithGenDelim(u)))}static isPotentialKeyword(u){return typeof u=="string"&&a.KEYWORD_REGEX.test(u)}static isPrefixIriEndingWithGenDelim(u){return a.ENDS_WITH_GEN_DELIM.test(u)}static isPrefixValue(u){return u&&(typeof u=="string"||u&&typeof u=="object")}static isValidIri(u){return!!(u&&a.IRI_REGEX.test(u))}static isValidIriWeak(u){return!!u&&u[0]!==":"&&a.IRI_REGEX_WEAK.test(u)}static isValidKeyword(u){return a.VALID_KEYWORDS[u]}static isTermProtected(u,n){const r=u[n];return typeof r!="string"&&r&&r["@protected"]}static hasProtectedTerms(u){for(const n of Object.keys(u))if(a.isTermProtected(u,n))return!0;return!1}static isReservedInternalKeyword(u){return u.startsWith("@__")}static deepEqual(u,n){const r=Object.keys(u),e=Object.keys(n);return r.length!==e.length?!1:r.every(i=>{const o=u[i],c=n[i];return o===c||o!==null&&c!==null&&typeof o=="object"&&typeof c=="object"&&this.deepEqual(o,c)})}}return a.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,a.IRI_REGEX_WEAK=/(?::[^:])|\//,a.KEYWORD_REGEX=/^@[a-z]+$/i,a.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,a.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,a.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,a.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},a.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],a.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],a.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],a.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],a.CONTAINERS_1_0=["@list","@set","@index"],I2.Util=a,I2}var uK;function oK(){return uK||(uK=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.defaultExpandOptions=a.JsonLdContextNormalized=void 0;const t=vr(),u=A2(),n=KR();class r{constructor(i){this.contextRaw=i}getContextRaw(){return this.contextRaw}expandTerm(i,o,c=a.defaultExpandOptions){const s=this.contextRaw[i];if(s===null||s&&s["@id"]===null)return null;let l=!0;if(s&&o){const _=n.Util.getContextValueId(s);if(_&&_!==i)if(typeof _!="string"||!n.Util.isValidIri(_)&&!n.Util.isValidKeyword(_))n.Util.isPotentialKeyword(_)||(l=!1);else return _}const d=n.Util.getPrefix(i,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],b=n.Util.isPotentialKeyword(i);if(d){const _=this.contextRaw[d],y=n.Util.getContextValueId(_);if(y){if(typeof _=="string"||!c.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(y,c))return i}else if(y[0]!=="_"&&!b&&!_["@prefix"]&&!(i in this.contextRaw))return i;return y+i.substr(d.length+1)}}else if(o&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!b&&!n.Util.isCompactIri(i))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,t.resolve)(f,p):"")+i;throw new u.ErrorCoded(`Relative vocab expansion for term '${i}' with vocab '${f}' is not allowed.`,u.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+i;else if(!o&&p&&!b&&!n.Util.isCompactIri(i))return(0,t.resolve)(i,p);if(l)return i;throw new u.ErrorCoded(`Invalid IRI mapping found for context entry '${i}': '${JSON.stringify(s)}'`,u.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(i,o){if(o&&this.contextRaw["@vocab"]&&i.startsWith(this.contextRaw["@vocab"]))return i.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&i.startsWith(this.contextRaw["@base"]))return i.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:i};for(const s in this.contextRaw){const l=this.contextRaw[s];if(l&&!n.Util.isPotentialKeyword(s)){const d=n.Util.getContextValueId(l);if(i.startsWith(d)){const f=i.substr(d.length);if(f)f.length<c.suffix.length&&(c.prefix=s,c.suffix=f);else if(o)return s}}}return c.prefix?c.prefix+":"+c.suffix:i}}a.JsonLdContextNormalized=r,a.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(JR)),JR}var sK;function g_e(){if(sK)return O2;sK=1,Object.defineProperty(O2,"__esModule",{value:!0}),O2.ContextParser=void 0;const a=vr(),t=A2(),u=iK(),n=oK(),r=KR();class e{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new u.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,c,s){if(typeof o!="string")throw new t.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,s);if(!r.Util.REGEX_LANGUAGE_TAG.test(o)){if(c)throw new t.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,s);return!1}return!0}static validateDirection(o,c){if(typeof o!="string")throw new t.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,t.ERROR_CODES.INVALID_BASE_DIRECTION);if(!r.Util.REGEX_DIRECTION_TAG.test(o)){if(c)throw new t.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,t.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const c of Object.keys(o)){let s=o[c];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||r.Util.isValidKeyword(s["@reverse"]))throw new t.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);s=o[c]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],r.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return o}expandPrefixedTerms(o,c,s){const l=o.getContextRaw();for(const d of s||Object.keys(l))if(r.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!r.Util.isReservedInternalKeyword(d)){const f=l[d];if(r.Util.isPotentialKeyword(d)&&r.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof l[d]=="object"&&!(l[d]["@protected"]||l[d]["@container"]==="@set")))throw new t.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,t.ERROR_CODES.KEYWORD_REDEFINITION);if(r.Util.ALIAS_RANGE_BLACKLIST.indexOf(r.Util.getContextValueId(f))>=0)throw new t.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,t.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&r.Util.isPotentialKeyword(r.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new t.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);for(;r.Util.isPrefixValue(l[d]);){const h=l[d];let p=!1;if(typeof h=="string")l[d]=o.expandTerm(h,!0),p=p||h!==l[d];else{const b=h["@id"],_=h["@type"],y=!("@prefix"in h)||r.Util.isValidIri(d);if("@id"in h)b!=null&&typeof b=="string"&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":o.expandTerm(b,!0)}),p=p||b!==l[d]["@id"]);else if(!r.Util.isPotentialKeyword(d)&&y){const g=o.expandTerm(d,!0);g!==d&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":g}),p=!0)}if(_&&typeof _=="string"&&_!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&y){let g=o.expandTerm(_,!0);c&&_===g&&(g=o.expandTerm(_,!1)),g!==_&&(p=!0,l[d]=Object.assign(Object.assign({},l[d]),{"@type":g}))}}if(!p)break}}}normalize(o,{processingMode:c,normalizeLanguageTags:s}){if(s||c===1)for(const l of Object.keys(o))if(l==="@language"&&typeof o[l]=="string")o[l]=o[l].toLowerCase();else{const d=o[l];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[l]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const c of Object.keys(o)){const s=o[c];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")o[c]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const l={};for(const d of s["@container"])l[d]=!0;o[c]=Object.assign(Object.assign({},s),{"@container":l})}}}}applyScopedProtected(o,{processingMode:c},s){if(c&&c>=1.1&&o["@protected"]){for(const l of Object.keys(o))if(!r.Util.isReservedInternalKeyword(l)&&!r.Util.isPotentialKeyword(l)&&!r.Util.isTermProtected(o,l)){const d=o[l];d&&typeof d=="object"?"@protected"in o[l]||(o[l]=Object.assign(Object.assign({},o[l]),{"@protected":!0})):(o[l]={"@id":d,"@protected":!0},r.Util.isSimpleTermDefinitionPrefix(d,s)&&(o[l]=Object.assign(Object.assign({},o[l]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,c,s,l){for(const d of l??Object.keys(c))if(r.Util.isTermProtected(o,d)&&(typeof c[d]=="string"?c[d]={"@id":c[d],"@protected":!0}:c[d]=Object.assign(Object.assign({},c[d]),{"@protected":!0}),!r.Util.deepEqual(o[d],c[d])))throw new t.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(r.Util.getContextValueId(o[d]))} to ${JSON.stringify(r.Util.getContextValueId(c[d]))}`,t.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:c}){for(const s of Object.keys(o)){if(r.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new t.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(o[s])}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);const l=o[s],d=typeof l;if(r.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(l!==null&&d!=="string")throw new t.ErrorCoded(`Found an invalid @vocab IRI: ${l}`,t.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(l!==null&&d!=="string")throw new t.ErrorCoded(`Found an invalid @base IRI: ${o[s]}`,t.ERROR_CODES.INVALID_BASE_IRI);break;case"language":l!==null&&e.validateLanguage(l,!0,t.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(l!==null&&d!=="number")throw new t.ErrorCoded(`Found an invalid @version number: ${l}`,t.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":l!==null&&e.validateDirection(l,!0);break;case"propagate":if(c===1)throw new t.ErrorCoded(`Found an illegal @propagate keyword: ${l}`,t.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(l!==null&&d!=="boolean")throw new t.ErrorCoded(`Found an invalid @propagate value: ${l}`,t.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(r.Util.isValidKeyword(s)&&r.Util.isValidKeyword(r.Util.getContextValueId(l)))throw new t.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${r.Util.getContextValueId(l)}'`,t.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(l!==null)switch(d){case"string":if(r.Util.getPrefix(l,o)===s)throw new t.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.CYCLIC_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(l==="@type")throw new t.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${l}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(l)&&l!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new t.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${l}'`,t.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!r.Util.isCompactIri(s)&&!("@id"in l)&&(l["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new t.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(l)){const h=l[f];if(h)switch(f){case"@id":if(r.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new t.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(h==="@type")throw new t.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(h)&&h!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new t.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new t.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.getPrefix(h,o)===s)throw new t.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(l["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new t.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${h}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new t.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!r.Util.isValidIri(h)))throw new t.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${h}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&l["@id"]&&l["@id"]!==h)throw new t.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${h}' and '${l["@id"]}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in l)throw new t.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||r.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new t.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(h)}') in 1.0, must be only one of ${r.Util.CONTAINERS_1_0.join(", ")}`,t.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&l["@reverse"])throw new t.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(r.Util.CONTAINERS.indexOf(p)<0)throw new t.ErrorCoded(`Invalid term @container for '${s}' ('${p}'), must be one of ${r.Util.CONTAINERS.join(", ")}`,t.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":e.validateLanguage(h,!0,t.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":e.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new t.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in l)&&!r.Util.isValidIri(s))throw new t.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!l["@container"]||!l["@container"]["@index"])throw new t.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(r.Util.isPotentialKeyword(h)&&h!=="@nest")throw new t.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new t.ErrorCoded(`Found an invalid term value: '${s}': '${l}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,c,s){return typeof o=="string"||(s&&!("@base"in o)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(o["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!r.Util.isValidIri(o["@base"])&&(o["@base"]=(0,a.resolve)(o["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(o["@base"]=c.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,c){if(!r.Util.isValidIri(o))try{o=(0,a.resolve)(o,c)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,c,s){for(const l of s??Object.keys(o)){const d=o[l];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[l]:Object.assign({},o[l])});delete f[l]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new t.ErrorCoded(f.message,t.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[l]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,c={},s={}){const{baseIRI:l,parentContext:d,external:f,processingMode:h=e.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:b,minimalProcessing:_}=c,y=c.remoteContexts||{};if(Object.keys(y).length>=this.remoteContextsDepthLimit)throw new t.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(y),t.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!b&&d&&r.Util.hasProtectedTerms(d))throw new t.ErrorCoded("Illegal context nullification when terms are protected",t.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof o=="string"){const g=this.normalizeContextIri(o,l),m=this.getOverriddenLoad(g,c);if(m)return new n.JsonLdContextNormalized(m);const v=await this.parse(await this.load(g),Object.assign(Object.assign({},c),{baseIRI:g,external:!0,remoteContexts:Object.assign(Object.assign({},y),{[g]:!0})}));return this.applyBaseEntry(v.getContextRaw(),c,!0),v}else if(Array.isArray(o)){const g=[],m=await Promise.all(o.map((T,S)=>{if(typeof T=="string"){const x=this.normalizeContextIri(T,l);g[S]=x;const L=this.getOverriddenLoad(x,c);return L||this.load(x)}else return T}));if(_)return new n.JsonLdContextNormalized(m);const v=await m.reduce((T,S,x)=>T.then(L=>this.parse(S,Object.assign(Object.assign({},c),{baseIRI:g[x]||c.baseIRI,external:!!g[x]||c.external,parentContext:L.getContextRaw(),remoteContexts:g[x]?Object.assign(Object.assign({},y),{[g[x]]:!0}):y}),{skipValidation:x<m.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(v.getContextRaw(),c,!0),v}else if(typeof o=="object"){if("@context"in o)return await this.parse(o["@context"],c);if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,c,!0),this.containersToHash(o),_)return new n.JsonLdContextNormalized(o);let g={};if("@import"in o)if(h>=1.1){if(typeof o["@import"]!="string")throw new t.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],t.ERROR_CODES.INVALID_IMPORT_VALUE);g=await this.loadImportContext(this.normalizeContextIri(o["@import"],l)),delete o["@import"]}else throw new t.ErrorCoded("Context importing is not supported in JSON-LD 1.0",t.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(g,{processingMode:h},n.defaultExpandOptions);const m=Object.assign(g,o);this.idifyReverseTerms(m),this.normalize(m,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(m,{processingMode:h},n.defaultExpandOptions);const v=Object.keys(m),T=[];if(typeof d=="object")for(const x in d)x in m?T.push(x):m[x]=d[x];await this.parseInnerContexts(m,c,v);const S=new n.JsonLdContextNormalized(m);return(m&&m["@version"]||e.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?m["@vocab"]=d["@vocab"]+o["@vocab"]:(r.Util.isCompactIri(o["@vocab"])||o["@vocab"]in m)&&(m["@vocab"]=S.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,v),!b&&d&&h>=1.1&&this.validateKeywordRedefinitions(d,m,n.defaultExpandOptions,T),this.validateContext&&!s.skipValidation&&this.validate(m,{processingMode:h}),S}else throw new t.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,t.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const c=this.documentCache[o];if(c)return c;let s;try{s=await this.documentLoader.load(o)}catch(l){throw new t.ErrorCoded(`Failed to load remote context ${o}: ${l.message}`,t.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new t.ErrorCoded(`Missing @context in remote context at ${o}`,t.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=s["@context"]}getOverriddenLoad(o,c){if(o in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return o;throw new t.ErrorCoded("Detected a cyclic context inclusion of "+o,t.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let c=await this.load(o);if(typeof c!="object"||Array.isArray(c))throw new t.ErrorCoded("An imported context must be a single object: "+o,t.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new t.ErrorCoded("An imported context can not import another context: "+o,t.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}}return e.DEFAULT_PROCESSING_MODE=1.1,O2.ContextParser=e,O2}var WR={},cK;function v_e(){return cK||(cK=1,Object.defineProperty(WR,"__esModule",{value:!0})),WR}var YR={},lK;function T_e(){return lK||(lK=1,Object.defineProperty(YR,"__esModule",{value:!0})),YR}var dK;function cn(){return dK||(dK=1,function(a){var t=Ql&&Ql.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ql&&Ql.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(g_e(),a),u(A2(),a),u(iK(),a),u(v_e(),a),u(T_e(),a),u(oK(),a),u(KR(),a)}(Ql)),Ql}var x2={},N2={},Hl={},R2={},fK;function hK(){if(fK)return R2;fK=1,Object.defineProperty(R2,"__esModule",{value:!0}),R2.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return R2.BlankNode=a,R2}var F2={},D2={},pK;function yK(){if(pK)return D2;pK=1,Object.defineProperty(D2,"__esModule",{value:!0}),D2.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return D2.DefaultGraph=a,a.INSTANCE=new a,D2}var P2={},j2={},bK;function ZR(){if(bK)return j2;bK=1,Object.defineProperty(j2,"__esModule",{value:!0}),j2.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return j2.NamedNode=a,j2}var mK;function _K(){if(mK)return P2;mK=1,Object.defineProperty(P2,"__esModule",{value:!0}),P2.Literal=void 0;const a=ZR();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return P2.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),P2}var L2={},gK;function vK(){if(gK)return L2;gK=1,Object.defineProperty(L2,"__esModule",{value:!0}),L2.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return L2.Quad=a,L2}var M2={},TK;function wK(){if(TK)return M2;TK=1,Object.defineProperty(M2,"__esModule",{value:!0}),M2.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return M2.Variable=a,M2}var SK;function w_e(){if(SK)return F2;SK=1,Object.defineProperty(F2,"__esModule",{value:!0}),F2.DataFactory=void 0;const a=hK(),t=yK(),u=_K(),n=ZR(),r=vK(),e=wK();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return F2.DataFactory=o,F2}var OK;function S_e(){return OK||(OK=1,function(a){var t=Hl&&Hl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Hl&&Hl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(hK(),a),u(w_e(),a),u(yK(),a),u(_K(),a),u(ZR(),a),u(vK(),a),u(wK(),a)}(Hl)),Hl}var C2={},q2={},AK;function O_e(){if(AK)return q2;AK=1,Object.defineProperty(q2,"__esModule",{value:!0}),q2.ContainerHandlerIdentifier=void 0;let a=class{canCombineWithGraph(){return!0}async handle(u,n,r,e,i,o){let c;if(n.emittedStack[o+1]&&n.idStack[o+1])c=n.idStack[o+1][0];else{const d=await r.getContainerKey(e[o],e,o)!==null?await r.resourceToTerm(await n.getContext(e),e[o]):r.dataFactory.blankNode();if(!d){n.emittedStack[o]=!1;return}c=d,n.idStack[o+1]=[c]}let s=n.idStack[o];s||(s=n.idStack[o]=[]),s.some(l=>l.equals(c))||s.push(c),await n.handlePendingContainerFlushBuffers()||(n.emittedStack[o]=!1)}};return q2.ContainerHandlerIdentifier=a,q2}var B2={},$2={},EK;function zA(){if(EK)return $2;EK=1,Object.defineProperty($2,"__esModule",{value:!0}),$2.EntryHandlerPredicate=void 0;const a=cn(),t=Gl();let u=class lae{static async handlePredicateObject(r,e,i,o,c,s,l,d,f){const h=await e.getPropertiesDepth(i,o),p=await e.getDepthOffsetGraph(o,i),b=o-p,_=r.idStack[h];if(_&&!f)for(const y of _)if(p>=0){const m=r.idStack[b-1];if(m)for(const v of m)e.emitQuadChecked(o,y,c,s,v,l,d);else l?(e.validateReverseSubject(s),r.getUnidentifiedGraphBufferSafe(b-1).push({subject:s,predicate:c,object:y,isEmbedded:d})):r.getUnidentifiedGraphBufferSafe(b-1).push({subject:y,predicate:c,object:s,isEmbedded:d})}else{const m=await e.getGraphContainerValue(i,h);e.emitQuadChecked(o,y,c,s,m,l,d)}else if(l&&e.validateReverseSubject(s),f){if(r.rdfstar){r.idStack[o]&&r.emitError(new a.ErrorCoded(`Found an illegal @id inside an annotation: ${r.idStack[o][0].value}`,a.ERROR_CODES.INVALID_ANNOTATION));for(let m=0;m<o;m++)await e.unaliasKeyword(i[m],i,m)==="@id"&&r.emitError(new a.ErrorCoded("Found an illegal annotation inside an embedded node",a.ERROR_CODES.INVALID_ANNOTATION));const y=r.getAnnotationsBufferSafe(h),g={predicate:c,object:s,reverse:l,nestedAnnotations:[],depth:h};y.push(g);for(let m=y.length-2;m>=0;m--){const v=y[m];v.depth>h&&(g.nestedAnnotations.push(v),y.splice(m,1))}}}else r.getUnidentifiedValueBufferSafe(h).push({predicate:c,object:s,reverse:l,isEmbedded:d})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(r,e,i,o,c){const s=i[o];if(s){const l=await r.getContext(i);if(!r.jsonLiteralStack[o]&&await e.predicateToTerm(l,i[o]))return t.Util.getContextValueType(l,s)==="@json"&&(r.jsonLiteralStack[o+1]=!0),!0}return!1}async test(r,e,i,o,c){return o[c]}async handle(r,e,i,o,c,s,l){const d=o[s],f=await r.getContext(o),h=await e.predicateToTerm(f,i);if(h){const p=await e.valueToTerm(f,i,c,s,o);if(p.length)for(let b of p){let _=await e.unaliasKeywordParent(o,s);const y=t.Util.isPropertyReverse(f,d,_);let g=0;for(;_==="@reverse"||typeof _=="number";)typeof _=="number"?g++:s--,_=await e.unaliasKeywordParent(o,s-g);const m=t.Util.isPropertyInEmbeddedNode(_);e.validateReverseInEmbeddedNode(i,y,m);const v=t.Util.isPropertyInAnnotationObject(_);if(c){const T="@list"in t.Util.getContextValueContainer(f,i);if(T||c["@list"]){if((T&&!Array.isArray(c)&&!c["@list"]||c["@list"]&&!Array.isArray(c["@list"]))&&b!==e.rdfNil){const S=e.dataFactory.blankNode();r.emitQuad(s,e.dataFactory.quad(S,e.rdfRest,e.rdfNil,e.getDefaultGraph())),r.emitQuad(s,e.dataFactory.quad(S,e.rdfFirst,b,e.getDefaultGraph())),b=S}if(y&&!r.allowSubjectList)throw new a.ErrorCoded(`Found illegal list value in subject position at ${i}`,a.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await lae.handlePredicateObject(r,e,o,s,h,b,y,m,v)}}}};return $2.EntryHandlerPredicate=u,$2}var IK;function A_e(){if(IK)return B2;IK=1,Object.defineProperty(B2,"__esModule",{value:!0}),B2.ContainerHandlerIndex=void 0;const a=cn(),t=zA(),u=Gl();let n=class{canCombineWithGraph(){return!0}async handle(e,i,o,c,s,l){if(!Array.isArray(s)){const d="@graph"in e,f=await i.getContext(c),h=c[l-1],p=u.Util.getContextValueIndex(f,h);if(p){if(a.Util.isPotentialKeyword(p))throw new a.ErrorCoded(`Keywords can not be used as @index value, got: ${p}`,a.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof p!="string")throw new a.ErrorCoded(`@index values must be strings, got: ${p}`,a.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof s!="object"){if(u.Util.getContextValueType(f,h)!=="@id")throw new a.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${s}`,a.ERROR_CODES.INVALID_VALUE_OBJECT);const y=o.resourceToTerm(f,s);y&&(i.idStack[l+1]=[y])}const _=o.createVocabOrBaseTerm(f,p);if(_){const y=await o.valueToTerm(f,p,await o.getContainerKey(c[l],c,l),l,c);if(d){const g=await o.getGraphContainerValue(c,l+1);for(const m of y)i.emitQuad(l,o.dataFactory.quad(g,_,m,o.getDefaultGraph()))}else for(const g of y)await t.EntryHandlerPredicate.handlePredicateObject(i,o,c,l+1,_,g,!1,!1,!1)}}const b=d?2:1;await i.newOnValueJob(c.slice(0,c.length-b),s,l-b,!0),await i.handlePendingContainerFlushBuffers()}i.emittedStack[l]=!1}};return B2.ContainerHandlerIndex=n,B2}var V2={},xK;function E_e(){if(xK)return V2;xK=1,Object.defineProperty(V2,"__esModule",{value:!0}),V2.ContainerHandlerLanguage=void 0;const a=cn();let t=class{canCombineWithGraph(){return!1}async handle(n,r,e,i,o,c){const s=await e.getContainerKey(i[c],i,c);if(Array.isArray(o))o=o.map(l=>({"@value":l,"@language":s}));else{if(typeof o!="string")throw new a.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(o)}', but expected string`,a.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);o={"@value":o,"@language":s}}await r.newOnValueJob(i.slice(0,i.length-1),o,c-1,!0),r.emittedStack[c]=!1}};return V2.ContainerHandlerLanguage=t,V2}var U2={},NK;function I_e(){if(NK)return U2;NK=1,Object.defineProperty(U2,"__esModule",{value:!0}),U2.ContainerHandlerType=void 0;const a=zA(),t=Gl();let u=class{canCombineWithGraph(){return!1}async handle(r,e,i,o,c,s){if(!Array.isArray(c)){if(typeof c=="string"){const f=await e.getContext(o),p=t.Util.getContextValueType(f,o[s-1])==="@vocab"?await i.createVocabOrBaseTerm(f,c):await i.resourceToTerm(f,c);if(p){const b={"@id":p.termType==="NamedNode"?p.value:c};await e.newOnValueJob(o.slice(0,o.length-1),b,s-1,!0),e.idStack[s+1]=[p]}}else{const f=!!e.idStack[s+1];f||delete e.idStack[s],await e.newOnValueJob(o.slice(0,o.length-1),c,s-1,!0),f||(e.idStack[s+1]=e.idStack[s])}const l=await i.getContainerKey(o[s],o,s),d=l!==null?i.createVocabOrBaseTerm(await e.getContext(o),l):null;d&&await a.EntryHandlerPredicate.handlePredicateObject(e,i,o,s+1,i.rdfType,d,!1,!1,!1),await e.handlePendingContainerFlushBuffers()}e.emittedStack[s]=!1}};return U2.ContainerHandlerType=u,U2}var RK;function FK(){if(RK)return C2;RK=1,Object.defineProperty(C2,"__esModule",{value:!0}),C2.EntryHandlerContainer=void 0;const a=O_e(),t=A_e(),u=E_e(),n=I_e(),r=Gl();let e=class Qa{static isSimpleGraphContainer(o){return"@graph"in o&&("@set"in o&&Object.keys(o).length===2||Object.keys(o).length===1)}static isComplexGraphContainer(o){return"@graph"in o&&("@set"in o&&Object.keys(o).length>2||!("@set"in o)&&Object.keys(o).length>1)}static getContainerGraphIndex(o,c,s){let l=Qa.isSimpleGraphContainer(o),d="";for(let f=c;f<s.length;f++)(!l||typeof s[f]=="number")&&(d+=":"+s[f]),!l&&typeof s[f]!="number"&&(l=!0);return d}static async getContainerHandler(o,c,s){const l={containers:{"@set":!0},depth:s,fallback:!0};let d=!1;const f=await o.getContext(c,2);for(let h=s-1;h>=0;h--)if(typeof c[h]!="number"){const p=r.Util.getContextValue(f,"@container",c[h],!1);if(p&&Qa.isSimpleGraphContainer(p))return{containers:p,depth:h+1,fallback:!1};const b=r.Util.getContextValue(f,"@container",c[h-1],!1);if(b){const _="@graph"in b;for(const y in Qa.CONTAINER_HANDLERS)if(b[y])return _?Qa.CONTAINER_HANDLERS[y].canCombineWithGraph()?{containers:b,depth:h,fallback:!1}:l:d?l:{containers:b,depth:h,fallback:!1};return l}else{if(d)return l;d=!0}}return l}static async isBufferableContainerHandler(o,c,s){const l=await Qa.getContainerHandler(o,c,s);return!l.fallback&&!("@graph"in l.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(o,c,s,l,d){return!!await this.test(o,c,null,s,l)}async test(o,c,s,l,d){const f=r.Util.getContextValueContainer(await o.getContext(l,2),l[d-1]);for(const h in Qa.CONTAINER_HANDLERS)if(f[h])return{containers:f,handler:Qa.CONTAINER_HANDLERS[h]};return null}async handle(o,c,s,l,d,f,h){return h.handler.handle(h.containers,o,c,l,d,f)}};return e.CONTAINER_HANDLERS={"@id":new a.ContainerHandlerIdentifier,"@index":new t.ContainerHandlerIndex,"@language":new u.ContainerHandlerLanguage,"@type":new n.ContainerHandlerType},C2.EntryHandlerContainer=e,C2}var eF,DK;function x_e(){return DK||(DK=1,eF=function a(t){return t===null||typeof t!="object"||t.toJSON!=null?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((u,n,r)=>{const e=r===0?"":",",i=n===void 0||typeof n=="symbol"?null:n;return u+e+a(i)},"")+"]":"{"+Object.keys(t).sort().reduce((u,n,r)=>{if(t[n]===void 0||typeof t[n]=="symbol")return u;const e=u.length===0?"":",";return u+e+a(n)+":"+a(t[n])},"")+"}"}),eF}var PK;function Gl(){if(PK)return N2;PK=1,Object.defineProperty(N2,"__esModule",{value:!0}),N2.Util=void 0;const a=cn(),t=S_e(),u=FK(),n=x_e();class r{constructor(i){this.parsingContext=i.parsingContext,this.dataFactory=i.dataFactory||new t.DataFactory,this.rdfFirst=this.dataFactory.namedNode(r.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(r.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(r.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(r.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(r.RDF+"JSON")}static getContextValue(i,o,c,s){const l=i.getContextRaw()[c];if(!l)return s;const d=l[o];return d===void 0?s:d}static getContextValueContainer(i,o){return r.getContextValue(i,"@container",o,{"@set":!0})}static getContextValueType(i,o){const c=r.getContextValue(i,"@type",o,null);return c==="@none"?null:c}static getContextValueLanguage(i,o){return r.getContextValue(i,"@language",o,i.getContextRaw()["@language"]||null)}static getContextValueDirection(i,o){return r.getContextValue(i,"@direction",o,i.getContextRaw()["@direction"]||null)}static isContextValueReverse(i,o){return!!r.getContextValue(i,"@reverse",o,null)}static getContextValueIndex(i,o){return r.getContextValue(i,"@index",o,i.getContextRaw()["@index"]||null)}static isPropertyReverse(i,o,c){return c==="@reverse"!==r.isContextValueReverse(i,o)}static isPropertyInEmbeddedNode(i){return i==="@id"}static isPropertyInAnnotationObject(i){return i==="@annotation"}static isValidIri(i){return i!==null&&a.Util.isValidIri(i)}static isPrefixArray(i,o){if(i.length>o.length)return!1;for(let c=0;c<i.length;c++)if(i[c]!==o[c])return!1;return!0}async validateValueIndexes(i){if(this.parsingContext.validateValueIndexes){const o={};for(const c of i)if(c&&typeof c=="object"){const s=c["@id"],l=c["@index"];if(s&&l){const d=o[s];if(d&&d!==l)throw new a.ErrorCoded(`Conflicting @index value for ${s}`,a.ERROR_CODES.CONFLICTING_INDEXES);o[s]=l}}}}async valueToTerm(i,o,c,s,l){if(r.getContextValueType(i,o)==="@json")return[this.dataFactory.literal(this.valueToJsonString(c),this.rdfJson)];const d=typeof c;switch(d){case"object":if(c==null)return[];if(Array.isArray(c))return"@list"in r.getContextValueContainer(i,o)?c.length===0?[this.rdfNil]:this.parsingContext.idStack[s+1]||[]:(await this.validateValueIndexes(c),[]);if(i=await this.getContextSelfOrPropertyScoped(i,o),"@context"in c&&(i=await this.parsingContext.parseContext(c["@context"],(await this.parsingContext.getContext(l,0)).getContextRaw())),c=await this.unaliasKeywords(c,l,s,i),"@value"in c){let f,h,p,b,_;for(o in c){const y=c[o];switch(o){case"@value":f=y;break;case"@language":h=y;break;case"@direction":p=y;break;case"@type":b=y;break;case"@index":_=y;break;case"@annotation":break;default:throw new a.ErrorCoded(`Unknown value entry '${o}' in @value: ${JSON.stringify(c)}`,a.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(b,l,s,!0,i)==="@json")return[this.dataFactory.literal(this.valueToJsonString(f),this.rdfJson)];if(f===null)return[];if(typeof f=="object")throw new a.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(f)}'`,a.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&_&&typeof _!="string")throw new a.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(_)}'`,a.ERROR_CODES.INVALID_INDEX_VALUE);if(h){if(typeof f!="string")throw new a.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`,a.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!a.ContextParser.validateLanguage(h,this.parsingContext.strictValues,a.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(h=h.toLowerCase())}if(p){if(typeof f!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`);if(!a.ContextParser.validateDirection(p,this.parsingContext.strictValues))return[]}if(h&&p&&this.parsingContext.rdfDirection){if(b)throw new a.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,a.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(s,f,h,p))}else if(h){if(b)throw new a.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(c)}'`,a.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(f,h)]}else if(p&&this.parsingContext.rdfDirection){if(b)throw new a.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,a.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(s,f,h,p))}else if(b){if(typeof b!="string")throw new a.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(b)}'`,a.ERROR_CODES.INVALID_TYPED_VALUE);const y=this.createVocabOrBaseTerm(i,b);if(!y)throw new a.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(b)}'`,a.ERROR_CODES.INVALID_TYPED_VALUE);if(y.termType!=="NamedNode")throw new a.ErrorCoded(`Illegal value type (${y.termType}): ${b}`,a.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(f,y)]}return await this.valueToTerm(new a.JsonLdContextNormalized({}),o,f,s,l)}else if("@set"in c){if(Object.keys(c).length>1)throw new a.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${o}'`,a.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in c){if(Object.keys(c).length>1)throw new a.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${o}'`,a.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const f=c["@list"];return Array.isArray(f)?f.length===0?[this.rdfNil]:this.parsingContext.idStack[s+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(l),o,f,s-1,l.slice(0,-1))}else{if("@reverse"in c&&typeof c["@reverse"]=="boolean")return[];if("@graph"in r.getContextValueContainer(await this.parsingContext.getContext(l),o)){const f=this.parsingContext.graphContainerTermStack[s+1];return f?Object.values(f):[this.dataFactory.blankNode()]}else if("@id"in c){if(Object.keys(c).length>1&&(i=await this.parsingContext.getContext(l,0)),"@context"in c&&(i=await this.parsingContext.parseContext(c["@context"],i.getContextRaw())),c["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(i,c["@id"]));{const f=c["@id"];let h;if(typeof f=="object")if(this.parsingContext.rdfstar)h=this.parsingContext.idStack[s+1][0];else throw new a.ErrorCoded(`Found illegal @id '${c}'`,a.ERROR_CODES.INVALID_ID_VALUE);else h=this.resourceToTerm(i,f);return this.nullableTermToArray(h)}}else return this.parsingContext.emittedStack[s+1]||c&&typeof c=="object"&&Object.keys(c).length===0?this.parsingContext.idStack[s+1]||(this.parsingContext.idStack[s+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(i,o),o,c,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(i,o),o,(!!c).toString(),this.dataFactory.namedNode(r.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(i,o),o,c,this.dataFactory.namedNode(c%1===0&&c<1e21?r.XSD_INTEGER:r.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${d}`)),[]}}async getContextSelfOrPropertyScoped(i,o){const c=i.getContextRaw()[o];return c&&typeof c=="object"&&"@context"in c&&(i=await this.parsingContext.parseContext(c,i.getContextRaw(),!0)),i}nullableTermToArray(i){return i?[i]:[]}predicateToTerm(i,o){const c=i.expandTerm(o,!0,this.parsingContext.getExpandOptions());if(!c)return null;if(c[0]==="_"&&c[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(c.substr(2)):null;if(r.isValidIri(c))return this.dataFactory.namedNode(c);if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new a.ErrorCoded(`Invalid predicate IRI: ${c}`,a.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(i,o){if(o.startsWith("_:"))return this.dataFactory.blankNode(o.substr(2));const c=i.expandTerm(o,!1,this.parsingContext.getExpandOptions());if(!r.isValidIri(c))if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${c}`));else return null;return this.dataFactory.namedNode(c)}createVocabOrBaseTerm(i,o){if(o.startsWith("_:"))return this.dataFactory.blankNode(o.substr(2));const c=this.parsingContext.getExpandOptions();let s=i.expandTerm(o,!0,c);if(s===o&&(s=i.expandTerm(o,!1,c)),!r.isValidIri(s))if(s&&this.parsingContext.strictValues&&!s.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${s}`));else return null;return this.dataFactory.namedNode(s)}intToString(i,o){return typeof i=="number"?Number.isFinite(i)?i%1===0&&(!o||o.value!==r.XSD_DOUBLE)?Number(i).toString():i.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):i>0?"INF":"-INF":i}stringValueToTerm(i,o,c,s,l){const d=r.getContextValueType(o,c);if(d)if(d==="@id"){if(!l)return this.resourceToTerm(o,this.intToString(s,l))}else if(d==="@vocab"){if(!l)return this.createVocabOrBaseTerm(o,this.intToString(s,l))}else l=this.dataFactory.namedNode(d);if(!l){const f=r.getContextValueLanguage(o,c),h=r.getContextValueDirection(o,c);return h&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(i,this.intToString(s,l),f,h):this.dataFactory.literal(this.intToString(s,l),f)}return this.dataFactory.literal(this.intToString(s,l),l)}createLanguageDirectionLiteral(i,o,c,s){if(this.parsingContext.rdfDirection==="i18n-datatype")return c||(c=""),this.dataFactory.literal(o,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${c}_${s}`));{const l=this.dataFactory.blankNode(),d=this.getDefaultGraph();return this.parsingContext.emitQuad(i,this.dataFactory.quad(l,this.dataFactory.namedNode(r.RDF+"value"),this.dataFactory.literal(o),d)),c&&this.parsingContext.emitQuad(i,this.dataFactory.quad(l,this.dataFactory.namedNode(r.RDF+"language"),this.dataFactory.literal(c),d)),this.parsingContext.emitQuad(i,this.dataFactory.quad(l,this.dataFactory.namedNode(r.RDF+"direction"),this.dataFactory.literal(s),d)),l}}valueToJsonString(i){return n(i)}async unaliasKeyword(i,o,c,s,l){if(Number.isInteger(i))return i;if(!s){const d=this.parsingContext.unaliasedKeywordCacheStack[c];if(d)return d}if(!a.Util.isPotentialKeyword(i)){l=l||await this.parsingContext.getContext(o);let d=l.getContextRaw()[i];d&&typeof d=="object"&&(d=d["@id"]),a.Util.isValidKeyword(d)&&(i=d)}return s?i:this.parsingContext.unaliasedKeywordCacheStack[c]=i}async unaliasKeywordParent(i,o){return await this.unaliasKeyword(o>0&&i[o-1],i,o-1)}async unaliasKeywords(i,o,c,s){const l={};for(const d in i)l[await this.unaliasKeyword(d,o,c+1,!0,s)]=i[d];return l}async isLiteral(i,o){for(let c=o;c>=0;c--){if(await this.unaliasKeyword(i[c],i,c)==="@annotation")return!1;if(this.parsingContext.literalStack[c]||this.parsingContext.jsonLiteralStack[c])return!0}return!1}async getDepthOffsetGraph(i,o){for(let c=i-1;c>0;c--)if(await this.unaliasKeyword(o[c],o,c)==="@graph"){const s=(await u.EntryHandlerContainer.getContainerHandler(this.parsingContext,o,c)).containers;return u.EntryHandlerContainer.isComplexGraphContainer(s)?-1:i-c-1}return-1}validateReverseSubject(i){if(i.termType==="Literal")throw new a.ErrorCoded(`Found illegal literal in subject position: ${i.value}`,a.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(i,o){let c=this.getDefaultGraph();const{containers:s,depth:l}=await u.EntryHandlerContainer.getContainerHandler(this.parsingContext,i,o);if("@graph"in s){const d=u.EntryHandlerContainer.getContainerGraphIndex(s,l,i),f=this.parsingContext.graphContainerTermStack[l];if(c=f?f[d]:null,!c){let h=null;if("@id"in s){const p=await this.getContainerKey(i[l],i,l);p!==null&&(h=await this.resourceToTerm(await this.parsingContext.getContext(i),p))}h||(h=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[l]||(this.parsingContext.graphContainerTermStack[l]={}),c=this.parsingContext.graphContainerTermStack[l][d]=h}}return c}async getPropertiesDepth(i,o){let c=o;for(let s=o-1;s>0;s--)if(typeof i[s]!="number"){const l=await this.unaliasKeyword(i[s],i,s);if(l==="@reverse")return s;if(l==="@nest")c=s;else return c}return c}async getContainerKey(i,o,c){const s=await this.unaliasKeyword(i,o,c);return s==="@none"?null:s}validateReverseInEmbeddedNode(i,o,c){if(c&&o&&!this.parsingContext.rdfstarReverseInEmbedded)throw new a.ErrorCoded(`Illegal reverse property in embedded node in ${i}`,a.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(i,o,c,s,l,d,f){let h;if(d?(this.validateReverseSubject(s),h=this.dataFactory.quad(s,c,o,l)):h=this.dataFactory.quad(o,c,s,l),f){if(h.graph.termType!=="DefaultGraph"&&(h=this.dataFactory.quad(h.subject,h.predicate,h.object)),this.parsingContext.idStack[i-1])throw new a.ErrorCoded("Illegal multiple properties in an embedded node",a.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[i-1]=[h]}else this.parsingContext.emitQuad(i,h);const p=this.parsingContext.annotationsBuffer[i];if(p){for(const b of p)this.emitAnnotation(i,h,b);delete this.parsingContext.annotationsBuffer[i]}}emitAnnotation(i,o,c){let s;c.reverse?(this.validateReverseSubject(c.object),s=this.dataFactory.quad(c.object,c.predicate,o)):s=this.dataFactory.quad(o,c.predicate,c.object),this.parsingContext.emitQuad(i,s);for(const l of c.nestedAnnotations)this.emitAnnotation(i,s,l)}}return r.XSD="http://www.w3.org/2001/XMLSchema#",r.XSD_BOOLEAN=r.XSD+"boolean",r.XSD_INTEGER=r.XSD+"integer",r.XSD_DOUBLE=r.XSD+"double",r.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",N2.Util=r,N2}var jK;function N_e(){if(jK)return x2;jK=1,Object.defineProperty(x2,"__esModule",{value:!0}),x2.EntryHandlerArrayValue=void 0;const a=Gl(),t=cn();let u=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(r,e,i,o,c){return this.test(r,e,null,i,o)}async test(r,e,i,o,c){return typeof o[c]=="number"}async handle(r,e,i,o,c,s){let l=await e.unaliasKeywordParent(o,s);if(l==="@list"){let d=null,f=0;for(let h=s-2;h>0;h--){const p=o[h];if(typeof p=="string"||typeof p=="number"){f=h,d=p;break}}if(d!==null){const h=await e.valueToTerm(await r.getContext(o),d,c,s,o);for(const p of h)await this.handleListElement(r,e,p,c,s,o.slice(0,f),f);h.length===0&&await this.handleListElement(r,e,null,c,s,o.slice(0,f),f)}}else if(l==="@set")await r.newOnValueJob(o.slice(0,-2),c,s-2,!1);else if(l!==void 0&&l!=="@type"){for(let f=s-1;f>0;f--)if(typeof o[f]!="number"){l=await e.unaliasKeyword(o[f],o,f);break}const d=await r.getContext(o.slice(0,-1));if("@list"in a.Util.getContextValueContainer(d,l)){r.emittedStack[s+1]=!0;const f=await e.valueToTerm(await r.getContext(o),l,c,s,o);for(const h of f)await this.handleListElement(r,e,h,c,s,o.slice(0,-1),s-1);f.length===0&&await this.handleListElement(r,e,null,c,s,o.slice(0,-1),s-1)}else r.shiftStack(s,1),await r.newOnValueJob(o.slice(0,-1),c,s-1,!1),r.contextTree.removeContext(o.slice(0,-1))}}async handleListElement(r,e,i,o,c,s,l){let d=r.listPointerStack[c];if(o!==null&&(await e.unaliasKeywords(o,s,c))["@value"]!==null){if(!d||!d.value){const f=e.dataFactory.blankNode();d={value:f,listRootDepth:l,listId:f}}else{const f=e.dataFactory.blankNode();r.emitQuad(c,e.dataFactory.quad(d.value,e.rdfRest,f,e.getDefaultGraph())),d.value=f}i&&r.emitQuad(c,e.dataFactory.quad(d.value,e.rdfFirst,i,e.getDefaultGraph()))}else d||(d={listRootDepth:l,listId:e.rdfNil});r.listPointerStack[c]=d,r.rdfstar&&r.annotationsBuffer[c]&&r.emitError(new t.ErrorCoded("Found an illegal annotation inside a list",t.ERROR_CODES.INVALID_ANNOTATION))}};return x2.EntryHandlerArrayValue=u,x2}var Q2={},LK;function R_e(){if(LK)return Q2;LK=1,Object.defineProperty(Q2,"__esModule",{value:!0}),Q2.EntryHandlerInvalidFallback=void 0;let a=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(u,n,r,e,i){return!1}async test(u,n,r,e,i){return!0}async handle(u,n,r,e,i,o){u.emittedStack[o]=!1}};return Q2.EntryHandlerInvalidFallback=a,Q2}var H2={},G2={},MK;function xa(){if(MK)return G2;MK=1,Object.defineProperty(G2,"__esModule",{value:!0}),G2.EntryHandlerKeyword=void 0;let a=class{constructor(u){this.keyword=u}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(u,n,r,e,i){return!1}async test(u,n,r,e,i){return r===this.keyword}};return G2.EntryHandlerKeyword=a,G2}var CK;function F_e(){if(CK)return H2;CK=1,Object.defineProperty(H2,"__esModule",{value:!0}),H2.EntryHandlerKeywordContext=void 0;const a=cn(),t=xa();let u=class extends t.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(r,e,i,o,c,s){r.streamingProfile&&(r.processingStack[s]||r.processingType[s]||r.idStack[s]!==void 0)&&r.emitError(new a.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",a.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const l=r.getContext(o),d=r.parseContext(c,(await l).getContextRaw());r.contextTree.setContext(o.slice(0,-1),d),r.emitContext(c),await r.validateContext(await d)}};return H2.EntryHandlerKeywordContext=u,H2}var z2={},qK;function D_e(){if(qK)return z2;qK=1,Object.defineProperty(z2,"__esModule",{value:!0}),z2.EntryHandlerKeywordGraph=void 0;const a=xa();let t=class extends a.EntryHandlerKeyword{constructor(){super("@graph")}async handle(n,r,e,i,o,c){n.graphStack[c+1]=!0}};return z2.EntryHandlerKeywordGraph=t,z2}var k2={},BK;function P_e(){if(BK)return k2;BK=1,Object.defineProperty(k2,"__esModule",{value:!0}),k2.EntryHandlerKeywordId=void 0;const a=cn(),t=xa();let u=class extends t.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(r,e,i,o,c,s){if(typeof c!="string"){if(r.rdfstar&&typeof c=="object"){const d=Object.keys(c);d.length===1&&d[0]==="@id"&&r.emitError(new a.ErrorCoded(`Invalid embedded node without property with @id ${c["@id"]}`,a.ERROR_CODES.INVALID_EMBEDDED_NODE))}else r.emitError(new a.ErrorCoded(`Found illegal @id '${c}'`,a.ERROR_CODES.INVALID_ID_VALUE));return}const l=await e.getPropertiesDepth(o,s);if(r.idStack[l]!==void 0&&(r.idStack[l][0].listHead?r.emitError(new a.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${o[s-1]}'`,a.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):r.emitError(new a.ErrorCoded(`Found duplicate @ids '${r.idStack[l][0].value}' and '${c}'`,a.ERROR_CODES.COLLIDING_KEYWORDS))),r.rdfstar&&r.annotationsBuffer[s])for(const d of r.annotationsBuffer[s])d.depth===s&&r.emitError(new a.ErrorCoded(`Found an illegal @id inside an annotation: ${c}`,a.ERROR_CODES.INVALID_ANNOTATION));r.idStack[l]=e.nullableTermToArray(await e.resourceToTerm(await r.getContext(o),c))}};return k2.EntryHandlerKeywordId=u,k2}var X2={},$K;function j_e(){if($K)return X2;$K=1,Object.defineProperty(X2,"__esModule",{value:!0}),X2.EntryHandlerKeywordIncluded=void 0;const a=cn(),t=xa();let u=class extends t.EntryHandlerKeyword{constructor(){super("@included")}async handle(r,e,i,o,c,s){typeof c!="object"&&r.emitError(new a.ErrorCoded(`Found illegal @included '${c}'`,a.ERROR_CODES.INVALID_INCLUDED_VALUE));const l=await e.unaliasKeywords(c,o,s,await r.getContext(o));"@value"in l&&r.emitError(new a.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(c)}'`,a.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in l&&r.emitError(new a.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(c)}'`,a.ERROR_CODES.INVALID_INCLUDED_VALUE)),r.emittedStack[s]=!1}};return X2.EntryHandlerKeywordIncluded=u,X2}var J2={},VK;function L_e(){if(VK)return J2;VK=1,Object.defineProperty(J2,"__esModule",{value:!0}),J2.EntryHandlerKeywordNest=void 0;const a=cn(),t=xa();let u=class extends t.EntryHandlerKeyword{constructor(){super("@nest")}async handle(r,e,i,o,c,s){typeof c!="object"&&r.emitError(new a.ErrorCoded(`Found invalid @nest entry for '${i}': '${c}'`,a.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await e.unaliasKeywords(c,o,s,await r.getContext(o))&&r.emitError(new a.ErrorCoded(`Found an invalid @value node for '${i}'`,a.ERROR_CODES.INVALID_NEST_VALUE)),r.emittedStack[s]=!1}};return J2.EntryHandlerKeywordNest=u,J2}var K2={},UK;function M_e(){if(UK)return K2;UK=1,Object.defineProperty(K2,"__esModule",{value:!0}),K2.EntryHandlerKeywordType=void 0;const a=cn(),t=Gl(),u=zA(),n=xa();let r=class extends n.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(i,o,c,s,l,d){const f=s[d],h=await i.getContext(s),p=o.rdfType,b=await o.unaliasKeywordParent(s,d),_=t.Util.isPropertyReverse(h,f,b),y=t.Util.isPropertyInEmbeddedNode(b);o.validateReverseInEmbeddedNode(c,_,y);const g=t.Util.isPropertyInAnnotationObject(b),m=Array.isArray(l)?l:[l];for(const S of m){typeof S!="string"&&i.emitError(new a.ErrorCoded(`Found illegal @type '${S}'`,a.ERROR_CODES.INVALID_TYPE_VALUE));const x=o.createVocabOrBaseTerm(h,S);x&&await u.EntryHandlerPredicate.handlePredicateObject(i,o,s,d,p,x,_,y,g)}let v=Promise.resolve(h),T=!1;for(const S of m.sort()){const x=t.Util.getContextValue(h,"@context",S,null);x&&(T=!0,v=v.then(L=>i.parseContext(x,L.getContextRaw())))}i.streamingProfile&&(T||!i.streamingProfileAllowOutOfOrderPlainType)&&(i.processingStack[d]||i.idStack[d])&&i.emitError(new a.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",a.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),T&&(v=v.then(S=>S.getContextRaw()["@propagate"]!==!0?new a.JsonLdContextNormalized(Object.assign(Object.assign({},S.getContextRaw()),{"@propagate":!1,"@__propagateFallback":h.getContextRaw()})):S),i.contextTree.setContext(s.slice(0,s.length-1),v)),i.processingType[d]=!0}};return K2.EntryHandlerKeywordType=r,K2}var W2={},QK;function C_e(){if(QK)return W2;QK=1,Object.defineProperty(W2,"__esModule",{value:!0}),W2.EntryHandlerKeywordUnknownFallback=void 0;const a=cn();let t=class dae{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(n,r,e,i,o){const c=await r.unaliasKeyword(e[i],e,i);return a.Util.isPotentialKeyword(c)?!(!o&&c==="@list"):!1}async test(n,r,e,i,o){return a.Util.isPotentialKeyword(e)}async handle(n,r,e,i,o,c){const s=dae.VALID_KEYWORDS_TYPES[e];s!==void 0?s&&typeof o!==s.type&&n.emitError(new a.ErrorCoded(`Invalid value type for '${e}' with value '${o}'`,s.errorCode)):n.strictValues&&n.emitError(new Error(`Unknown keyword '${e}' with value '${o}'`)),n.emittedStack[c]=!1}};return t.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:a.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:a.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null},W2.EntryHandlerKeywordUnknownFallback=t,W2}var Y2={},HK;function q_e(){if(HK)return Y2;HK=1,Object.defineProperty(Y2,"__esModule",{value:!0}),Y2.EntryHandlerKeywordValue=void 0;const a=xa();let t=class extends a.EntryHandlerKeyword{constructor(){super("@value")}async validate(n,r,e,i,o){const c=e[i];return c&&!n.literalStack[i]&&await this.test(n,r,c,e,i)&&(n.literalStack[i]=!0),super.validate(n,r,e,i,o)}async test(n,r,e,i,o){return await r.unaliasKeyword(i[o],i.slice(0,i.length-1),o-1,!0)==="@value"}async handle(n,r,e,i,o,c){n.literalStack[c]=!0,delete n.unidentifiedValuesBuffer[c],delete n.unidentifiedGraphsBuffer[c],n.emittedStack[c]=!1}};return Y2.EntryHandlerKeywordValue=t,Y2}var Z2={},ew={},GK;function B_e(){if(GK)return ew;GK=1,Object.defineProperty(ew,"__esModule",{value:!0}),ew.ContextTree=void 0;let a=class fae{constructor(){this.subTrees={}}getContext(u){if(u.length>0){const[n,...r]=u,e=this.subTrees[n];if(e){const i=e.getContext(r);if(i)return i.then(({context:o,depth:c})=>({context:o,depth:c+1}))}}return this.context?this.context.then(n=>({context:n,depth:0})):null}setContext(u,n){if(u.length===0)this.context=n;else{const[r,...e]=u;let i=this.subTrees[r];i||(i=this.subTrees[r]=new fae),i.setContext(e,n)}}removeContext(u){this.setContext(u,null)}};return ew.ContextTree=a,ew}var zK;function $_e(){if(zK)return Z2;zK=1,Object.defineProperty(Z2,"__esModule",{value:!0}),Z2.ParsingContext=void 0;const a=cn(),t=A2(),u=B_e(),n=JK();let r=class hae{constructor(i){this.contextParser=new a.ContextParser({documentLoader:i.documentLoader,skipValidation:i.skipContextValidation}),this.streamingProfile=!!i.streamingProfile,this.baseIRI=i.baseIRI,this.produceGeneralizedRdf=!!i.produceGeneralizedRdf,this.allowSubjectList=!!i.allowSubjectList,this.processingMode=i.processingMode||n.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!i.strictValues,this.validateValueIndexes=!!i.validateValueIndexes,this.defaultGraph=i.defaultGraph,this.rdfDirection=i.rdfDirection,this.normalizeLanguageTags=i.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=i.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=i.rdfstar!==!1,this.rdfstarReverseInEmbedded=i.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new u.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=i.parser,i.context?(this.rootContext=this.parseContext(i.context),this.rootContext.then(o=>this.validateContext(o))):this.rootContext=Promise.resolve(new a.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(i,o,c){return this.contextParser.parse(i,{baseIRI:this.baseIRI,ignoreProtection:c,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:o,processingMode:this.activeProcessingMode})}validateContext(i){const o=i.getContextRaw()["@version"];if(o){if(this.activeProcessingMode&&o>this.activeProcessingMode)throw new t.ErrorCoded(`Unsupported JSON-LD version '${o}' under active processing mode ${this.activeProcessingMode}.`,t.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&o<this.activeProcessingMode)throw new t.ErrorCoded(`Invalid JSON-LD version ${o} under active processing mode ${this.activeProcessingMode}.`,t.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=o}}async getContext(i,o=1){const c=i;for(;typeof i[i.length-1]=="number";)i=i.slice(0,i.length-1);o&&(i=i.slice(0,-o));const s=await this.getContextPropagationAware(i);let d=s.context.getContextRaw();for(let f=s.depth;f<c.length-o;f++){const h=c[f],p=d[h];if(p&&typeof p=="object"&&"@context"in p){const b=(await this.parseContext(p,d,!0)).getContextRaw(),_=!(h in b)||b[h]["@context"]["@propagate"];(_!==!1||f===c.length-1-o)&&(d=Object.assign({},b),delete d["@propagate"],d[h]=Object.assign({},d[h]),"@id"in p&&(d[h]["@id"]=p["@id"]),delete d[h]["@context"],_!==!1&&this.contextTree.setContext(c.slice(0,f+o),Promise.resolve(new a.JsonLdContextNormalized(d))))}}return new a.JsonLdContextNormalized(d)}async getContextPropagationAware(i){const o=i.length;let c=null,s;do{s=!1,c&&"@__propagateFallback"in c.context.getContextRaw()?c.context=new a.JsonLdContextNormalized(c.context.getContextRaw()["@__propagateFallback"]):(c&&(i=i.slice(0,c.depth-1)),c=await this.contextTree.getContext(i)||{context:await this.rootContext,depth:0});const l=i[i.length-1];if(l in c.context.getContextRaw()){const d=c.context.getContextRaw()[l];d&&typeof d=="object"&&"@context"in d&&(s=!0)}}while(c.depth>0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==o&&!s);return c.depth===0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==o&&(c.context=new a.JsonLdContextNormalized({})),c}async newOnValueJob(i,o,c,s){await this.parser.newOnValueJob(i,o,c,s)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const i of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(i.depth,i.keys),this.parser.flushStacks(i.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(i,o){i===1&&(this.topLevelProperties=!0),this.parser.push(o)}emitError(i){this.parser.emit("error",i)}emitContext(i){this.parser.emit("context",i)}getUnidentifiedValueBufferSafe(i){let o=this.unidentifiedValuesBuffer[i];return o||(o=[],this.unidentifiedValuesBuffer[i]=o),o}getUnidentifiedGraphBufferSafe(i){let o=this.unidentifiedGraphsBuffer[i];return o||(o=[],this.unidentifiedGraphsBuffer[i]=o),o}getAnnotationsBufferSafe(i){let o=this.annotationsBuffer[i];return o||(o=[],this.annotationsBuffer[i]=o),o}getExpandOptions(){return hae.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(i,o){const c=this.idStack[i+o];if(c&&(this.idStack[i]=c,this.emittedStack[i]=!0,delete this.idStack[i+o]),this.pendingContainerFlushBuffers.length)for(const s of this.pendingContainerFlushBuffers)s.depth>=i+o&&(s.depth-=o,s.keys.splice(i,o));this.unidentifiedValuesBuffer[i+o]&&(this.unidentifiedValuesBuffer[i]=this.unidentifiedValuesBuffer[i+o],delete this.unidentifiedValuesBuffer[i+o]),this.annotationsBuffer[i+o-1]&&(this.annotationsBuffer[i-1]||(this.annotationsBuffer[i-1]=[]),this.annotationsBuffer[i-1]=[...this.annotationsBuffer[i-1],...this.annotationsBuffer[i+o-1]],delete this.annotationsBuffer[i+o-1])}};return r.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},Z2.ParsingContext=r,Z2}var tw={},kK;function V_e(){if(kK)return tw;kK=1,Object.defineProperty(tw,"__esModule",{value:!0}),tw.EntryHandlerKeywordAnnotation=void 0;const a=xa(),t=cn();let u=class extends a.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(r,e,i,o,c,s){(typeof c=="string"||typeof c=="object"&&c["@value"])&&r.emitError(new t.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(c)}`,t.ERROR_CODES.INVALID_ANNOTATION))}};return tw.EntryHandlerKeywordAnnotation=u,tw}var XK;function JK(){if(XK)return S2;XK=1,Object.defineProperty(S2,"__esModule",{value:!0}),S2.JsonLdParser=void 0;const a=rq(),t=cn(),u=Mt(),n=N_e(),r=FK(),e=R_e(),i=zA(),o=F_e(),c=D_e(),s=P_e(),l=j_e(),d=L_e(),f=M_e(),h=C_e(),p=q_e(),b=$_e(),_=Gl(),y=N1(),g=V_e();let m=class up extends u.Transform{constructor(T){super({readableObjectMode:!0}),T=T||{},this.options=T,this.parsingContext=new b.ParsingContext(Object.assign({parser:this},T)),this.util=new _.Util({dataFactory:T.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new a,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(T,S,x,L){let O,w=["application/activity+json"];if(L&&L.wellKnownMediaTypes&&(w=L.wellKnownMediaTypes),S!=="application/ld+json"&&!w.includes(S)){if(S!=="application/json"&&!S.endsWith("+json"))throw new t.ErrorCoded(`Unsupported JSON-LD media type ${S}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(x&&x.has("Link")&&x.forEach((E,R)=>{if(R==="link"){const V=(0,y.parse)(E);for(const $ of V.get("rel","http://www.w3.org/ns/json-ld#context")){if(O)throw new t.ErrorCoded("Multiple JSON-LD context link headers were found on "+T,t.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);O=$.uri}}}),!O&&!(L!=null&&L.ignoreMissingContextLinkHeader))throw new t.ErrorCoded(`Missing context link header for media type ${S} on ${T}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let A;if(x&&x.has("Content-Type")){const E=x.get("Content-Type"),R=/; *profile=([^"]*)/.exec(E);R&&R[1]==="http://www.w3.org/ns/json-ld#streaming"&&(A=!0)}return new up(Object.assign({baseIRI:T,context:O,streamingProfile:A},L||{}))}import(T){if("pipe"in T){T.on("error",x=>S.emit("error",x));const S=T.pipe(new up(this.options));return S}else{const S=new u.PassThrough({readableObjectMode:!0});T.on("error",L=>x.emit("error",L)),T.on("data",L=>S.push(L)),T.on("end",()=>S.push(null));const x=S.pipe(new up(this.options));return x}}_transform(T,S,x){this.jsonParser.write(T),this.lastOnValueJob.then(()=>x(),L=>x(L))}async newOnValueJob(T,S,x,L){let O=!0;if(L&&x<this.lastDepth){const V=this.parsingContext.listPointerStack[this.lastDepth];V&&(V.value&&this.push(this.util.dataFactory.quad(V.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),V.listId.listHead=!0,this.parsingContext.idStack[V.listRootDepth+1]=[V.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await r.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),O=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const w=await this.util.unaliasKeyword(T[x],T,x),A=await this.util.unaliasKeywordParent(T,x);this.parsingContext.emittedStack[x]=!0;let E=!0;t.Util.isValidKeyword(w)&&A==="@reverse"&&w!=="@context"&&this.emit("error",new t.ErrorCoded(`Found the @id '${S}' inside an @reverse property`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let R=!1;this.parsingContext.validationStack.length>1&&(R=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let V=Math.max(1,this.parsingContext.validationStack.length-1);V<T.length-1;V++){const $=this.parsingContext.validationStack[V]||(this.parsingContext.validationStack[V]=await this.validateKey(T.slice(0,V+1),V,R));if($.valid)!R&&$.property&&(R=!0);else{this.parsingContext.emittedStack[x]=!1,E=!1;break}}if(await this.util.isLiteral(T,x)&&(E=!1),E)for(const V of up.ENTRY_HANDLERS){const $=await V.test(this.parsingContext,this.util,w,T,x);if($){await V.handle(this.parsingContext,this.util,w,T,S,x,$),V.isStackProcessor()&&(this.parsingContext.processingStack[x]=!0);break}}x===0&&Array.isArray(S)&&await this.util.validateValueIndexes(S),O&&x<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=x,this.lastKeys=T,this.parsingContext.unaliasedKeywordCacheStack.splice(x-1)}flushStacks(T){this.parsingContext.processingStack.splice(T,1),this.parsingContext.processingType.splice(T,1),this.parsingContext.emittedStack.splice(T,1),this.parsingContext.idStack.splice(T,1),this.parsingContext.graphStack.splice(T+1,1),this.parsingContext.graphContainerTermStack.splice(T,1),this.parsingContext.jsonLiteralStack.splice(T,1),this.parsingContext.validationStack.splice(T-1,2),this.parsingContext.literalStack.splice(T,this.parsingContext.literalStack.length-T),this.parsingContext.annotationsBuffer.splice(T,1)}async flushBuffer(T,S){let x=this.parsingContext.idStack[T];!!x||(x=this.parsingContext.idStack[T]=[this.util.dataFactory.blankNode()]);const O=this.parsingContext.unidentifiedValuesBuffer[T];if(O){for(const E of x){const R=await this.util.getDepthOffsetGraph(T,S),V=this.parsingContext.graphStack[T]||R>=0?this.parsingContext.idStack[T-R-1]:[await this.util.getGraphContainerValue(S,T)];if(V)for(const $ of V){this.parsingContext.emittedStack[T]=!0;for(const Q of O)this.util.emitQuadChecked(T,E,Q.predicate,Q.object,$,Q.reverse,Q.isEmbedded)}else{const $=this.parsingContext.getUnidentifiedGraphBufferSafe(T-await this.util.getDepthOffsetGraph(T,S)-1);for(const Q of O)Q.reverse?$.push({object:E,predicate:Q.predicate,subject:Q.object,isEmbedded:Q.isEmbedded}):$.push({object:Q.object,predicate:Q.predicate,subject:E,isEmbedded:Q.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(T,1),this.parsingContext.literalStack.splice(T,1),this.parsingContext.jsonLiteralStack.splice(T,1)}const w=this.parsingContext.unidentifiedGraphsBuffer[T];if(w){for(const E of x){const R=T===1&&E.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():E;this.parsingContext.emittedStack[T]=!0;for(const V of w)this.parsingContext.emitQuad(T,this.util.dataFactory.quad(V.subject,V.predicate,V.object,R))}this.parsingContext.unidentifiedGraphsBuffer.splice(T,1)}const A=this.parsingContext.annotationsBuffer[T];if(A){A.length>0&&T===1&&this.parsingContext.emitError(new t.ErrorCoded("Annotations can not be made on top-level nodes",t.ERROR_CODES.INVALID_ANNOTATION));const E=this.parsingContext.getAnnotationsBufferSafe(T-1);for(const R of A)E.push(R);delete this.parsingContext.annotationsBuffer[T]}}async validateKey(T,S,x){for(const L of up.ENTRY_HANDLERS)if(await L.validate(this.parsingContext,this.util,T,S,x))return{valid:!0,property:x||L.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=T=>{const S=this.jsonParser.stack.length,x=new Array(S+1).fill(0).map((L,O)=>O===S?this.jsonParser.key:this.jsonParser.stack[O].key);if(!this.isParsingContextInner(S)){const L=()=>this.newOnValueJob(x,T,S,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(x.slice(0,-1)))if(x[S]==="@context"){let O=this.contextJobs[S];O||(O=this.contextJobs[S]=[]),O.push(L)}else this.contextAwaitingJobs.push({job:L,keys:x,depth:S});else this.lastOnValueJob=this.lastOnValueJob.then(L);!this.parsingContext.streamingProfile&&S===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=T=>{this.emit("error",T)}}isParsingContextInner(T){for(let S=T;S>0;S--)if(this.jsonParser.stack[S-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const S of this.contextJobs)if(S)for(const x of S)await x();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const T=[];for(const S of this.contextAwaitingJobs)await this.util.unaliasKeyword(S.keys[S.depth],S.keys,S.depth,!0)==="@type"||typeof S.keys[S.depth]=="number"&&await this.util.unaliasKeyword(S.keys[S.depth-1],S.keys,S.depth-1,!0)==="@type"?this.typeJobs.push({job:S.job,keys:S.keys.slice(0,S.keys.length-1)}):T.push(S);for(const S of T){if(this.typeJobs.length>0){const x=[],L=[];for(let A=0;A<this.typeJobs.length;A++){const E=this.typeJobs[A];_.Util.isPrefixArray(E.keys,S.keys)&&(x.push(E),L.push(A))}const O=x.sort((A,E)=>A.keys.length-E.keys.length);for(const A of O)await A.job();const w=L.sort().reverse();for(const A of w)this.typeJobs.splice(A,1)}await S.job()}}};return m.DEFAULT_PROCESSING_MODE="1.1",m.ENTRY_HANDLERS=[new n.EntryHandlerArrayValue,new o.EntryHandlerKeywordContext,new s.EntryHandlerKeywordId,new l.EntryHandlerKeywordIncluded,new c.EntryHandlerKeywordGraph,new d.EntryHandlerKeywordNest,new f.EntryHandlerKeywordType,new p.EntryHandlerKeywordValue,new g.EntryHandlerKeywordAnnotation,new r.EntryHandlerContainer,new h.EntryHandlerKeywordUnknownFallback,new i.EntryHandlerPredicate,new e.EntryHandlerInvalidFallback],S2.JsonLdParser=m,S2}var KK;function U_e(){return KK||(KK=1,function(a){var t=Ul&&Ul.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ul&&Ul.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(JK(),a)}(Ul)),Ul}var rw={},zl={},nw={},tF={},WK;function YK(){return WK||(WK=1,function(){(function(a){(function(t){var u=typeof globalThis<"u"&&globalThis||typeof a<"u"&&a||typeof Nt<"u"&&Nt||{},n={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function r(w){return w&&DataView.prototype.isPrototypeOf(w)}if(n.arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(w){return w&&e.indexOf(Object.prototype.toString.call(w))>-1};function o(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function c(w){return typeof w!="string"&&(w=String(w)),w}function s(w){var A={next:function(){var E=w.shift();return{done:E===void 0,value:E}}};return n.iterable&&(A[Symbol.iterator]=function(){return A}),A}function l(w){this.map={},w instanceof l?w.forEach(function(A,E){this.append(E,A)},this):Array.isArray(w)?w.forEach(function(A){if(A.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+A.length);this.append(A[0],A[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(A){this.append(A,w[A])},this)}l.prototype.append=function(w,A){w=o(w),A=c(A);var E=this.map[w];this.map[w]=E?E+", "+A:A},l.prototype.delete=function(w){delete this.map[o(w)]},l.prototype.get=function(w){return w=o(w),this.has(w)?this.map[w]:null},l.prototype.has=function(w){return this.map.hasOwnProperty(o(w))},l.prototype.set=function(w,A){this.map[o(w)]=c(A)},l.prototype.forEach=function(w,A){for(var E in this.map)this.map.hasOwnProperty(E)&&w.call(A,this.map[E],E,this)},l.prototype.keys=function(){var w=[];return this.forEach(function(A,E){w.push(E)}),s(w)},l.prototype.values=function(){var w=[];return this.forEach(function(A){w.push(A)}),s(w)},l.prototype.entries=function(){var w=[];return this.forEach(function(A,E){w.push([E,A])}),s(w)},n.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);function d(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function f(w){return new Promise(function(A,E){w.onload=function(){A(w.result)},w.onerror=function(){E(w.error)}})}function h(w){var A=new FileReader,E=f(A);return A.readAsArrayBuffer(w),E}function p(w){var A=new FileReader,E=f(A),R=/charset=([A-Za-z0-9_-]+)/.exec(w.type),V=R?R[1]:"utf-8";return A.readAsText(w,V),E}function b(w){for(var A=new Uint8Array(w),E=new Array(A.length),R=0;R<A.length;R++)E[R]=String.fromCharCode(A[R]);return E.join("")}function _(w){if(w.slice)return w.slice(0);var A=new Uint8Array(w.byteLength);return A.set(new Uint8Array(w)),A.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:n.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:n.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():n.arrayBuffer&&n.blob&&r(w)?(this._bodyArrayBuffer=_(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||i(w))?this._bodyArrayBuffer=_(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var w=d(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=d(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(n.blob)return this.blob().then(h);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=d(this);if(w)return w;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(b(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var g=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function m(w){var A=w.toUpperCase();return g.indexOf(A)>-1?A:w}function v(w,A){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');A=A||{};var E=A.body;if(w instanceof v){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,A.headers||(this.headers=new l(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!E&&w._bodyInit!=null&&(E=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new l(A.headers)),this.method=m(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal||function(){if("AbortController"in u){var $=new AbortController;return $.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&E)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(E),(this.method==="GET"||this.method==="HEAD")&&(A.cache==="no-store"||A.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var V=/\?/;this.url+=(V.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})};function T(w){var A=new FormData;return w.trim().split("&").forEach(function(E){if(E){var R=E.split("="),V=R.shift().replace(/\+/g," "),$=R.join("=").replace(/\+/g," ");A.append(decodeURIComponent(V),decodeURIComponent($))}}),A}function S(w){var A=new l,E=w.replace(/\r?\n[\t ]+/g," ");return E.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var V=R.split(":"),$=V.shift().trim();if($){var Q=V.join(":").trim();try{A.append($,Q)}catch(ne){console.warn("Response "+ne.message)}}}),A}y.call(v.prototype);function x(w,A){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=A.statusText===void 0?"":""+A.statusText,this.headers=new l(A.headers),this.url=A.url||"",this._initBody(w)}y.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},x.error=function(){var w=new x(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var L=[301,302,303,307,308];x.redirect=function(w,A){if(L.indexOf(A)===-1)throw new RangeError("Invalid status code");return new x(null,{status:A,headers:{location:w}})},t.DOMException=u.DOMException;try{new t.DOMException}catch{t.DOMException=function(A,E){this.message=A,this.name=E;var R=Error(A);this.stack=R.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function O(w,A){return new Promise(function(E,R){var V=new v(w,A);if(V.signal&&V.signal.aborted)return R(new t.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function Q(){$.abort()}$.onload=function(){var fe={statusText:$.statusText,headers:S($.getAllResponseHeaders()||"")};V.url.indexOf("file://")===0&&($.status<200||$.status>599)?fe.status=200:fe.status=$.status,fe.url="responseURL"in $?$.responseURL:fe.headers.get("X-Request-URL");var J="response"in $?$.response:$.responseText;setTimeout(function(){E(new x(J,fe))},0)},$.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},$.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},$.onabort=function(){setTimeout(function(){R(new t.DOMException("Aborted","AbortError"))},0)};function ne(fe){try{return fe===""&&u.location.href?u.location.href:fe}catch{return fe}}if($.open(V.method,ne(V.url),!0),V.credentials==="include"?$.withCredentials=!0:V.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&(n.blob?$.responseType="blob":n.arrayBuffer&&($.responseType="arraybuffer")),A&&typeof A.headers=="object"&&!(A.headers instanceof l||u.Headers&&A.headers instanceof u.Headers)){var ie=[];Object.getOwnPropertyNames(A.headers).forEach(function(fe){ie.push(o(fe)),$.setRequestHeader(fe,c(A.headers[fe]))}),V.headers.forEach(function(fe,J){ie.indexOf(J)===-1&&$.setRequestHeader(J,fe)})}else V.headers.forEach(function(fe,J){$.setRequestHeader(J,fe)});V.signal&&(V.signal.addEventListener("abort",Q),$.onreadystatechange=function(){$.readyState===4&&V.signal.removeEventListener("abort",Q)}),$.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return O.polyfill=!0,u.fetch||(u.fetch=O,u.Headers=l,u.Request=v,u.Response=x),t.Headers=l,t.Request=v,t.Response=x,t.fetch=O,Object.defineProperty(t,"__esModule",{value:!0}),t})({})})(typeof self<"u"?self:tF)}()),tF}var rF={},ZK;function kA(){return ZK||(ZK=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ERROR_CODES=a.ErrorCoded=void 0;class t extends Error{constructor(n,r){super(n),this.code=r}}a.ErrorCoded=t,function(u){u.COLLIDING_KEYWORDS="colliding keywords",u.CONFLICTING_INDEXES="conflicting indexes",u.CYCLIC_IRI_MAPPING="cyclic IRI mapping",u.INVALID_ID_VALUE="invalid @id value",u.INVALID_INDEX_VALUE="invalid @index value",u.INVALID_NEST_VALUE="invalid @nest value",u.INVALID_PREFIX_VALUE="invalid @prefix value",u.INVALID_PROPAGATE_VALUE="invalid @propagate value",u.INVALID_REVERSE_VALUE="invalid @reverse value",u.INVALID_IMPORT_VALUE="invalid @import value",u.INVALID_VERSION_VALUE="invalid @version value",u.INVALID_BASE_IRI="invalid base IRI",u.INVALID_CONTAINER_MAPPING="invalid container mapping",u.INVALID_CONTEXT_ENTRY="invalid context entry",u.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",u.INVALID_DEFAULT_LANGUAGE="invalid default language",u.INVALID_INCLUDED_VALUE="invalid @included value",u.INVALID_IRI_MAPPING="invalid IRI mapping",u.INVALID_JSON_LITERAL="invalid JSON literal",u.INVALID_KEYWORD_ALIAS="invalid keyword alias",u.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",u.INVALID_LANGUAGE_MAPPING="invalid language mapping",u.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",u.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",u.INVALID_LOCAL_CONTEXT="invalid local context",u.INVALID_REMOTE_CONTEXT="invalid remote context",u.INVALID_REVERSE_PROPERTY="invalid reverse property",u.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",u.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",u.INVALID_SCOPED_CONTEXT="invalid scoped context",u.INVALID_SCRIPT_ELEMENT="invalid script element",u.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",u.INVALID_TERM_DEFINITION="invalid term definition",u.INVALID_TYPE_MAPPING="invalid type mapping",u.INVALID_TYPE_VALUE="invalid type value",u.INVALID_TYPED_VALUE="invalid typed value",u.INVALID_VALUE_OBJECT="invalid value object",u.INVALID_VALUE_OBJECT_VALUE="invalid value object value",u.INVALID_VOCAB_MAPPING="invalid vocab mapping",u.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",u.KEYWORD_REDEFINITION="keyword redefinition",u.LOADING_DOCUMENT_FAILED="loading document failed",u.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",u.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",u.PROCESSING_MODE_CONFLICT="processing mode conflict",u.PROTECTED_TERM_REDEFINITION="protected term redefinition",u.CONTEXT_OVERFLOW="context overflow",u.INVALID_BASE_DIRECTION="invalid base direction",u.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",u.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",u.INVALID_EMBEDDED_NODE="invalid embedded node",u.INVALID_ANNOTATION="invalid annotation"}(a.ERROR_CODES||(a.ERROR_CODES={}))}(rF)),rF}var iw={},eW;function tW(){if(eW)return iw;eW=1,Object.defineProperty(iw,"__esModule",{value:!0}),iw.FetchDocumentLoader=void 0,YK();const a=kA(),t=N1(),u=vr();let n=class{constructor(e){this.fetcher=e}async load(e){const i=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(i.ok&&i.headers){let o=i.headers.get("Content-Type");if(o){const c=o.indexOf(";");c>0&&(o=o.substr(0,c))}if(o==="application/ld+json")return await i.json();if(i.headers.has("Link")){let c;if(i.headers.forEach((s,l)=>{if(l==="link"){const d=(0,t.parse)(s);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+e);c=(0,u.resolve)(f.uri,e)}}}),c)return this.load(c)}throw new a.ErrorCoded(`Unsupported JSON-LD media type ${o}`,a.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(i.statusText||`Status code: ${i.status}`)}};return iw.FetchDocumentLoader=n,iw}var nF={},aw={},rW;function iF(){if(rW)return aw;rW=1,Object.defineProperty(aw,"__esModule",{value:!0}),aw.Util=void 0;let a=class ua{static isCompactIri(u){return u.indexOf(":")>0&&!(u&&u[0]==="#")}static getPrefix(u,n){if(u&&u[0]==="#")return null;const r=u.indexOf(":");if(r>=0){if(u.length>r+1&&u.charAt(r+1)==="/"&&u.charAt(r+2)==="/")return null;const e=u.substr(0,r);if(e==="_")return null;if(n[e])return e}return null}static getContextValueId(u){if(u===null||typeof u=="string")return u;const n=u["@id"];return n||null}static isSimpleTermDefinitionPrefix(u,n){return!ua.isPotentialKeyword(u)&&(n.allowPrefixNonGenDelims||typeof u=="string"&&(u[0]==="_"||ua.isPrefixIriEndingWithGenDelim(u)))}static isPotentialKeyword(u){return typeof u=="string"&&ua.KEYWORD_REGEX.test(u)}static isPrefixIriEndingWithGenDelim(u){return ua.ENDS_WITH_GEN_DELIM.test(u)}static isPrefixValue(u){return u&&(typeof u=="string"||u&&typeof u=="object")}static isValidIri(u){return!!(u&&ua.IRI_REGEX.test(u))}static isValidIriWeak(u){return!!u&&u[0]!==":"&&ua.IRI_REGEX_WEAK.test(u)}static isValidKeyword(u){return ua.VALID_KEYWORDS[u]}static isTermProtected(u,n){const r=u[n];return typeof r!="string"&&r&&r["@protected"]}static hasProtectedTerms(u){for(const n of Object.keys(u))if(ua.isTermProtected(u,n))return!0;return!1}static isReservedInternalKeyword(u){return u.startsWith("@__")}static deepEqual(u,n){const r=Object.keys(u),e=Object.keys(n);return r.length!==e.length?!1:r.every(i=>{const o=u[i],c=n[i];return o===c||o!==null&&c!==null&&typeof o=="object"&&typeof c=="object"&&this.deepEqual(o,c)})}};return a.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,a.IRI_REGEX_WEAK=/(?::[^:])|\//,a.KEYWORD_REGEX=/^@[a-z]+$/i,a.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,a.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,a.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,a.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},a.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],a.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],a.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],a.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],a.CONTAINERS_1_0=["@list","@set","@index"],aw.Util=a,aw}var nW;function iW(){return nW||(nW=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.defaultExpandOptions=a.JsonLdContextNormalized=void 0;const t=vr(),u=kA(),n=iF();class r{constructor(i){this.contextRaw=i}getContextRaw(){return this.contextRaw}expandTerm(i,o,c=a.defaultExpandOptions){const s=this.contextRaw[i];if(s===null||s&&s["@id"]===null)return null;let l=!0;if(s&&o){const _=n.Util.getContextValueId(s);if(_&&_!==i)if(typeof _!="string"||!n.Util.isValidIri(_)&&!n.Util.isValidKeyword(_))n.Util.isPotentialKeyword(_)||(l=!1);else return _}const d=n.Util.getPrefix(i,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],b=n.Util.isPotentialKeyword(i);if(d){const _=this.contextRaw[d],y=n.Util.getContextValueId(_);if(y){if(typeof _=="string"||!c.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(y,c))return i}else if(y[0]!=="_"&&!b&&!_["@prefix"]&&!(i in this.contextRaw))return i;return y+i.substr(d.length+1)}}else if(o&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!b&&!n.Util.isCompactIri(i))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,t.resolve)(f,p):"")+i;throw new u.ErrorCoded(`Relative vocab expansion for term '${i}' with vocab '${f}' is not allowed.`,u.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+i;else if(!o&&p&&!b&&!n.Util.isCompactIri(i))return(0,t.resolve)(i,p);if(l)return i;throw new u.ErrorCoded(`Invalid IRI mapping found for context entry '${i}': '${JSON.stringify(s)}'`,u.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(i,o){if(o&&this.contextRaw["@vocab"]&&i.startsWith(this.contextRaw["@vocab"]))return i.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&i.startsWith(this.contextRaw["@base"]))return i.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:i};for(const s in this.contextRaw){const l=this.contextRaw[s];if(l&&!n.Util.isPotentialKeyword(s)){const d=n.Util.getContextValueId(l);if(i.startsWith(d)){const f=i.substr(d.length);if(f)f.length<c.suffix.length&&(c.prefix=s,c.suffix=f);else if(o)return s}}}return c.prefix?c.prefix+":"+c.suffix:i}}a.JsonLdContextNormalized=r,a.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}(nF)),nF}var aW;function Q_e(){if(aW)return nw;aW=1,Object.defineProperty(nw,"__esModule",{value:!0}),nw.ContextParser=void 0,YK();const a=vr(),t=kA(),u=tW(),n=iW(),r=iF();let e=class zf{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new u.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,c,s){if(typeof o!="string")throw new t.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,s);if(!r.Util.REGEX_LANGUAGE_TAG.test(o)){if(c)throw new t.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,s);return!1}return!0}static validateDirection(o,c){if(typeof o!="string")throw new t.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,t.ERROR_CODES.INVALID_BASE_DIRECTION);if(!r.Util.REGEX_DIRECTION_TAG.test(o)){if(c)throw new t.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,t.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const c of Object.keys(o)){let s=o[c];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||r.Util.isValidKeyword(s["@reverse"]))throw new t.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);s=o[c]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],r.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return o}expandPrefixedTerms(o,c,s){const l=o.getContextRaw();for(const d of s||Object.keys(l))if(r.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!r.Util.isReservedInternalKeyword(d)){const f=l[d];if(r.Util.isPotentialKeyword(d)&&r.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof l[d]=="object"&&!(l[d]["@protected"]||l[d]["@container"]==="@set")))throw new t.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,t.ERROR_CODES.KEYWORD_REDEFINITION);if(r.Util.ALIAS_RANGE_BLACKLIST.indexOf(r.Util.getContextValueId(f))>=0)throw new t.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,t.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&r.Util.isPotentialKeyword(r.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new t.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);for(;r.Util.isPrefixValue(l[d]);){const h=l[d];let p=!1;if(typeof h=="string")l[d]=o.expandTerm(h,!0),p=p||h!==l[d];else{const b=h["@id"],_=h["@type"],y=!("@prefix"in h)||r.Util.isValidIri(d);if("@id"in h)b!=null&&typeof b=="string"&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":o.expandTerm(b,!0)}),p=p||b!==l[d]["@id"]);else if(!r.Util.isPotentialKeyword(d)&&y){const g=o.expandTerm(d,!0);g!==d&&(l[d]=Object.assign(Object.assign({},l[d]),{"@id":g}),p=!0)}if(_&&typeof _=="string"&&_!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&y){let g=o.expandTerm(_,!0);c&&_===g&&(g=o.expandTerm(_,!1)),g!==_&&(p=!0,l[d]=Object.assign(Object.assign({},l[d]),{"@type":g}))}}if(!p)break}}}normalize(o,{processingMode:c,normalizeLanguageTags:s}){if(s||c===1)for(const l of Object.keys(o))if(l==="@language"&&typeof o[l]=="string")o[l]=o[l].toLowerCase();else{const d=o[l];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[l]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const c of Object.keys(o)){const s=o[c];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")o[c]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const l={};for(const d of s["@container"])l[d]=!0;o[c]=Object.assign(Object.assign({},s),{"@container":l})}}}}applyScopedProtected(o,{processingMode:c},s){if(c&&c>=1.1&&o["@protected"]){for(const l of Object.keys(o))if(!r.Util.isReservedInternalKeyword(l)&&!r.Util.isPotentialKeyword(l)&&!r.Util.isTermProtected(o,l)){const d=o[l];d&&typeof d=="object"?"@protected"in o[l]||(o[l]=Object.assign(Object.assign({},o[l]),{"@protected":!0})):(o[l]={"@id":d,"@protected":!0},r.Util.isSimpleTermDefinitionPrefix(d,s)&&(o[l]=Object.assign(Object.assign({},o[l]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,c,s,l){for(const d of l??Object.keys(c))if(r.Util.isTermProtected(o,d)&&(typeof c[d]=="string"?c[d]={"@id":c[d],"@protected":!0}:c[d]=Object.assign(Object.assign({},c[d]),{"@protected":!0}),!r.Util.deepEqual(o[d],c[d])))throw new t.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(r.Util.getContextValueId(o[d]))} to ${JSON.stringify(r.Util.getContextValueId(c[d]))}`,t.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:c}){for(const s of Object.keys(o)){if(r.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new t.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(o[s])}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);const l=o[s],d=typeof l;if(r.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(l!==null&&d!=="string")throw new t.ErrorCoded(`Found an invalid @vocab IRI: ${l}`,t.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(l!==null&&d!=="string")throw new t.ErrorCoded(`Found an invalid @base IRI: ${o[s]}`,t.ERROR_CODES.INVALID_BASE_IRI);break;case"language":l!==null&&zf.validateLanguage(l,!0,t.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(l!==null&&d!=="number")throw new t.ErrorCoded(`Found an invalid @version number: ${l}`,t.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":l!==null&&zf.validateDirection(l,!0);break;case"propagate":if(c===1)throw new t.ErrorCoded(`Found an illegal @propagate keyword: ${l}`,t.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(l!==null&&d!=="boolean")throw new t.ErrorCoded(`Found an invalid @propagate value: ${l}`,t.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(r.Util.isValidKeyword(s)&&r.Util.isValidKeyword(r.Util.getContextValueId(l)))throw new t.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${r.Util.getContextValueId(l)}'`,t.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(l!==null)switch(d){case"string":if(r.Util.getPrefix(l,o)===s)throw new t.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.CYCLIC_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(l==="@type")throw new t.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${l}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(l)&&l!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new t.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${l}'`,t.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!r.Util.isCompactIri(s)&&!("@id"in l)&&(l["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new t.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(l)){const h=l[f];if(h)switch(f){case"@id":if(r.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new t.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(h==="@type")throw new t.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(h)&&h!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new t.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new t.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.getPrefix(h,o)===s)throw new t.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(l["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new t.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${h}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new t.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!r.Util.isValidIri(h)))throw new t.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${h}'`,t.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&l["@id"]&&l["@id"]!==h)throw new t.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${h}' and '${l["@id"]}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in l)throw new t.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||r.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new t.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(h)}') in 1.0, must be only one of ${r.Util.CONTAINERS_1_0.join(", ")}`,t.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&l["@reverse"])throw new t.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(r.Util.CONTAINERS.indexOf(p)<0)throw new t.ErrorCoded(`Invalid term @container for '${s}' ('${p}'), must be one of ${r.Util.CONTAINERS.join(", ")}`,t.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":zf.validateLanguage(h,!0,t.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":zf.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new t.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in l)&&!r.Util.isValidIri(s))throw new t.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!l["@container"]||!l["@container"]["@index"])throw new t.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(r.Util.isPotentialKeyword(h)&&h!=="@nest")throw new t.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(l)}'`,t.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new t.ErrorCoded(`Found an invalid term value: '${s}': '${l}'`,t.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,c,s){return typeof o=="string"||(s&&!("@base"in o)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(o["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!r.Util.isValidIri(o["@base"])&&(o["@base"]=(0,a.resolve)(o["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(o["@base"]=c.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,c){if(!r.Util.isValidIri(o))try{o=(0,a.resolve)(o,c)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,c,s){for(const l of s??Object.keys(o)){const d=o[l];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[l]:Object.assign({},o[l])});delete f[l]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new t.ErrorCoded(f.message,t.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[l]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,c={},s={}){const{baseIRI:l,parentContext:d,external:f,processingMode:h=zf.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:b,minimalProcessing:_}=c,y=c.remoteContexts||{};if(Object.keys(y).length>=this.remoteContextsDepthLimit)throw new t.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(y),t.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!b&&d&&r.Util.hasProtectedTerms(d))throw new t.ErrorCoded("Illegal context nullification when terms are protected",t.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof o=="string"){const g=this.normalizeContextIri(o,l),m=this.getOverriddenLoad(g,c);if(m)return new n.JsonLdContextNormalized(m);const v=await this.parse(await this.load(g),Object.assign(Object.assign({},c),{baseIRI:g,external:!0,remoteContexts:Object.assign(Object.assign({},y),{[g]:!0})}));return this.applyBaseEntry(v.getContextRaw(),c,!0),v}else if(Array.isArray(o)){const g=[],m=await Promise.all(o.map((T,S)=>{if(typeof T=="string"){const x=this.normalizeContextIri(T,l);g[S]=x;const L=this.getOverriddenLoad(x,c);return L||this.load(x)}else return T}));if(_)return new n.JsonLdContextNormalized(m);const v=await m.reduce((T,S,x)=>T.then(L=>this.parse(S,Object.assign(Object.assign({},c),{baseIRI:g[x]||c.baseIRI,external:!!g[x]||c.external,parentContext:L.getContextRaw(),remoteContexts:g[x]?Object.assign(Object.assign({},y),{[g[x]]:!0}):y}),{skipValidation:x<m.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(v.getContextRaw(),c,!0),v}else if(typeof o=="object"){if("@context"in o)return await this.parse(o["@context"],c);if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,c,!0),this.containersToHash(o),_)return new n.JsonLdContextNormalized(o);let g={};if("@import"in o)if(h>=1.1){if(typeof o["@import"]!="string")throw new t.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],t.ERROR_CODES.INVALID_IMPORT_VALUE);g=await this.loadImportContext(this.normalizeContextIri(o["@import"],l)),delete o["@import"]}else throw new t.ErrorCoded("Context importing is not supported in JSON-LD 1.0",t.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(g,{processingMode:h},n.defaultExpandOptions);const m=Object.assign(g,o);this.idifyReverseTerms(m),this.normalize(m,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(m,{processingMode:h},n.defaultExpandOptions);const v=Object.keys(m),T=[];if(typeof d=="object")for(const x in d)x in m?T.push(x):m[x]=d[x];await this.parseInnerContexts(m,c,v);const S=new n.JsonLdContextNormalized(m);return(m&&m["@version"]||zf.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?m["@vocab"]=d["@vocab"]+o["@vocab"]:(r.Util.isCompactIri(o["@vocab"])||o["@vocab"]in m)&&(m["@vocab"]=S.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,v),!b&&d&&h>=1.1&&this.validateKeywordRedefinitions(d,m,n.defaultExpandOptions,T),this.validateContext&&!s.skipValidation&&this.validate(m,{processingMode:h}),S}else throw new t.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,t.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const c=this.documentCache[o];if(c)return c;let s;try{s=await this.documentLoader.load(o)}catch(l){throw new t.ErrorCoded(`Failed to load remote context ${o}: ${l.message}`,t.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new t.ErrorCoded(`Missing @context in remote context at ${o}`,t.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=s["@context"]}getOverriddenLoad(o,c){if(o in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return o;throw new t.ErrorCoded("Detected a cyclic context inclusion of "+o,t.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let c=await this.load(o);if(typeof c!="object"||Array.isArray(c))throw new t.ErrorCoded("An imported context must be a single object: "+o,t.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new t.ErrorCoded("An imported context can not import another context: "+o,t.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}};return e.DEFAULT_PROCESSING_MODE=1.1,nw.ContextParser=e,nw}var aF={},uW;function H_e(){return uW||(uW=1,Object.defineProperty(aF,"__esModule",{value:!0})),aF}var uF={},oW;function G_e(){return oW||(oW=1,Object.defineProperty(uF,"__esModule",{value:!0})),uF}var sW;function z_e(){return sW||(sW=1,function(a){var t=zl&&zl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=zl&&zl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Q_e(),a),u(kA(),a),u(tW(),a),u(H_e(),a),u(G_e(),a),u(iW(),a),u(iF(),a)}(zl)),zl}var cW;function lW(){if(cW)return rw;cW=1,Object.defineProperty(rw,"__esModule",{value:!0}),rw.DocumentLoaderMediated=void 0;const a=Ki(),t=Fh(),u=z_e();let n=class pae extends u.FetchDocumentLoader{constructor(e,i){super(pae.createFetcher(e,i)),this.mediatorHttp=e,this.context=i}static createFetcher(e,i){return async(o,c)=>{const s=await e.mediate({input:o,init:c,context:i});return s.json=async()=>JSON.parse(await(0,t.stringify)(a.ActorHttp.toNodeReadable(s.body))),s}}};return rw.DocumentLoaderMediated=n,rw}var dW;function k_e(){if(dW)return w2;dW=1,Object.defineProperty(w2,"__esModule",{value:!0}),w2.ActorRdfParseJsonLd=void 0;const a=Oh(),t=ze(),u=Te(),n=U_e(),r=lW();let e=class extends a.ActorRdfParseFixedMediaTypes{constructor(o){super(o)}async testHandle(o,c,s){return s.has(t.KeysRdfParseHtmlScript.processingHtmlScript)&&c!=="application/ld+json"?(0,u.failTest)("JSON-LD in script tags can only have media type 'application/ld+json'"):!c||!(c in this.mediaTypePriorities||c.endsWith("+json"))?(0,u.failTest)(`Unrecognized media type: ${c}`):await this.testHandleChecked(o)}async runHandle(o,c,s){var h;const l=o.context.getSafe(t.KeysInitQuery.dataFactory);return{data:n.JsonLdParser.fromHttpResponse(((h=o.metadata)==null?void 0:h.baseIRI)??"",c,o.headers,{dataFactory:l,documentLoader:s.get(t.KeysRdfParseJsonLd.documentLoader)??new r.DocumentLoaderMediated(this.mediatorHttp,s),strictValues:s.get(t.KeysRdfParseJsonLd.strictValues),...s.get(t.KeysRdfParseJsonLd.parserOptions)}).import(o.data)}}};return w2.ActorRdfParseJsonLd=e,w2}var fW;function X_e(){return fW||(fW=1,function(a){var t=Vl&&Vl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Vl&&Vl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(k_e(),a),u(lW(),a)}(Vl)),Vl}var kl={},uw={},Xl={},ow={},hW;function J_e(){if(hW)return ow;hW=1,Object.defineProperty(ow,"__esModule",{value:!0}),ow.ActorRdfUpdateHypermedia=void 0;const a=Te();let t=class extends a.Actor{constructor(n,r){super(n),this.destinationType=r}async test(n){return n.forceDestinationType&&this.destinationType!==n.forceDestinationType?(0,a.failTest)(`Actor ${this.name} is not able to handle destination type ${n.forceDestinationType}.`):this.testMetadata(n)}};return ow.ActorRdfUpdateHypermedia=t,ow}var pW;function oF(){return pW||(pW=1,function(a){var t=Xl&&Xl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Xl&&Xl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(J_e(),a)}(Xl)),Xl}var sw={},yW;function bW(){if(yW)return sw;yW=1,Object.defineProperty(sw,"__esModule",{value:!0}),sw.QuadDestinationPatchSparqlUpdate=void 0;const a=Ki(),t=gt(),u=J1(),n=Mt();let r=class{constructor(i,o,c){this.url=i,this.context=o,this.mediatorHttp=c}async update(i){const o=this.createCombinedQuadsQuery(i.insert,i.delete);await this.wrapSparqlUpdateRequest(o)}createCombinedQuadsQuery(i,o){return new t.ArrayIterator([],{autoStart:!1}).append(this.createQuadsQuery("DELETE",o)).append(o&&i?[` ;
`]:[]).append(this.createQuadsQuery("INSERT",i))}createQuadsQuery(i,o){return o?o.map(c=>{let s=`${(0,u.termToString)(c.subject)} ${(0,u.termToString)(c.predicate)} ${(0,u.termToString)(c.object)} .`;return c.graph.termType==="DefaultGraph"?s=`  ${s}
`:s=`  GRAPH ${(0,u.termToString)(c.graph)} { ${s} }
`,s}).prepend([`${i} DATA {
`]).append(["}"]):new t.ArrayIterator([],{autoStart:!1})}async wrapSparqlUpdateRequest(i){const o=new n.Readable;o.wrap(i);const c=new Headers({"content-type":"application/sparql-update"}),s=await this.mediatorHttp.mediate({context:this.context,init:{headers:c,method:"PATCH",body:a.ActorHttp.toWebReadableStream(o)},input:this.url});await(0,a.validateAndCloseHttpResponse)(this.url,s)}async deleteGraphs(i,o,c){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}async createGraphs(i,o){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}};return sw.QuadDestinationPatchSparqlUpdate=r,sw}var mW;function K_e(){if(mW)return uw;mW=1,Object.defineProperty(uw,"__esModule",{value:!0}),uw.ActorRdfUpdateHypermediaPatchSparqlUpdate=void 0;const a=oF(),t=Te(),u=bW();let n=class extends a.ActorRdfUpdateHypermedia{constructor(e){super(e,"patchSparqlUpdate")}async testMetadata(e){return!e.forceDestinationType&&!e.metadata.patchSparqlUpdate?(0,t.failTest)(`Actor ${this.name} could not detect a destination with 'application/sparql-update' as 'Accept-Patch' header.`):!e.forceDestinationType&&!e.exists?(0,t.failTest)(`Actor ${this.name} can only patch a destination that already exists.`):(0,t.passTestVoid)()}async run(e){return this.logInfo(e.context,`Identified as patchSparqlUpdate destination: ${e.url}`),{destination:new u.QuadDestinationPatchSparqlUpdate(e.url,e.context,this.mediatorHttp)}}};return uw.ActorRdfUpdateHypermediaPatchSparqlUpdate=n,uw}var _W;function W_e(){return _W||(_W=1,function(a){var t=kl&&kl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=kl&&kl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(K_e(),a),u(bW(),a)}(kl)),kl}var Jl={},cw={},lw={},gW;function vW(){if(gW)return lw;gW=1,Object.defineProperty(lw,"__esModule",{value:!0}),lw.QuadDestinationPutLdp=void 0;const a=Ki();let t=class{constructor(n,r,e,i,o,c){this.url=n,this.context=r,this.mediaTypes=e,this.mediatorHttp=i,this.mediatorRdfSerializeMediatypes=o,this.mediatorRdfSerialize=c}async update(n){if(n.delete)throw new Error("Put-based LDP destinations don't support deletions");n.insert&&await this.wrapRdfUpdateRequest("INSERT",n.insert)}async wrapRdfUpdateRequest(n,r){const{mediaTypes:e}=await this.mediatorRdfSerializeMediatypes.mediate({context:this.context,mediaTypes:!0}),i=this.mediaTypes.filter(d=>d in e),o=i.length>0?i[0]:Object.keys(e).sort((d,f)=>e[f]-e[d])[0],{handle:{data:c}}=await this.mediatorRdfSerialize.mediate({context:this.context,handle:{quadStream:r,context:this.context},handleMediaType:o}),s=new Headers({"content-type":o}),l=await this.mediatorHttp.mediate({context:this.context,init:{headers:s,method:"PUT",body:a.ActorHttp.toWebReadableStream(c)},input:this.url});await(0,a.validateAndCloseHttpResponse)(this.url,l)}async deleteGraphs(n,r,e){throw new Error("Put-based LDP destinations don't support named graphs")}async createGraphs(n,r){throw new Error("Put-based LDP destinations don't support named graphs")}};return lw.QuadDestinationPutLdp=t,lw}var TW;function Y_e(){if(TW)return cw;TW=1,Object.defineProperty(cw,"__esModule",{value:!0}),cw.ActorRdfUpdateHypermediaPutLdp=void 0;const a=oF(),t=Te(),u=vW();let n=class extends a.ActorRdfUpdateHypermedia{constructor(e){super(e,"putLdp")}async testMetadata(e){if(!e.forceDestinationType){if(!e.metadata.allowHttpMethods||!e.metadata.allowHttpMethods.includes("PUT"))return(0,t.failTest)(`Actor ${this.name} could not detect a destination with 'Allow: PUT' header.`);if(e.exists)return(0,t.failTest)(`Actor ${this.name} can only put on a destination that does not already exists.`)}return(0,t.passTestVoid)()}async run(e){return this.logInfo(e.context,`Identified as putLdp destination: ${e.url}`),{destination:new u.QuadDestinationPutLdp(e.url,e.context,e.metadata.putAccepted||[],this.mediatorHttp,this.mediatorRdfSerializeMediatypes,this.mediatorRdfSerialize)}}};return cw.ActorRdfUpdateHypermediaPutLdp=n,cw}var wW;function Z_e(){return wW||(wW=1,function(a){var t=Jl&&Jl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Jl&&Jl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Y_e(),a),u(vW(),a)}(Jl)),Jl}var Kl={},dw={},fw={},Wl={},Yl={},Zl={},hw={},ed={},pw={},SW;function OW(){if(SW)return pw;SW=1,Object.defineProperty(pw,"__esModule",{value:!0}),pw.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return pw.BlankNode=a,pw}var yw={},bw={},AW;function EW(){if(AW)return bw;AW=1,Object.defineProperty(bw,"__esModule",{value:!0}),bw.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return bw.DefaultGraph=a,a.INSTANCE=new a,bw}var mw={},_w={},IW;function sF(){if(IW)return _w;IW=1,Object.defineProperty(_w,"__esModule",{value:!0}),_w.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return _w.NamedNode=a,_w}var xW;function NW(){if(xW)return mw;xW=1,Object.defineProperty(mw,"__esModule",{value:!0}),mw.Literal=void 0;const a=sF();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return mw.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),mw}var gw={},RW;function FW(){if(RW)return gw;RW=1,Object.defineProperty(gw,"__esModule",{value:!0}),gw.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return gw.Quad=a,gw}var vw={},DW;function PW(){if(DW)return vw;DW=1,Object.defineProperty(vw,"__esModule",{value:!0}),vw.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return vw.Variable=a,vw}var jW;function ege(){if(jW)return yw;jW=1,Object.defineProperty(yw,"__esModule",{value:!0}),yw.DataFactory=void 0;const a=OW(),t=EW(),u=NW(),n=sF(),r=FW(),e=PW();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return yw.DataFactory=o,yw}var LW;function tge(){return LW||(LW=1,function(a){var t=ed&&ed.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ed&&ed.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(OW(),a),u(ege(),a),u(EW(),a),u(NW(),a),u(sF(),a),u(FW(),a),u(PW(),a)}(ed)),ed}var MW;function rge(){if(MW)return hw;MW=1,Object.defineProperty(hw,"__esModule",{value:!0}),hw.SparqlXmlParser=void 0;const a=tge(),t=k7(),u=Mt();let n=class{constructor(e){e=e||{},this.dataFactory=e.dataFactory||new a.DataFactory,this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark}parseXmlResultsStream(e){const i=m=>g.emit("error",m);e.on("error",i);const o=new t.SaxesParser,c=[];let s=!1,l=!1;const d=[];let f={},h="",p="",b,_="",y=[];o.on("error",i),o.on("opentag",m=>{m.name==="variable"&&this.stackEquals(c,["sparql","head"])?d.push(this.dataFactory.variable(m.attributes.name)):m.name==="results"&&this.stackEquals(c,["sparql"])?l=!0:m.name==="result"&&this.stackEquals(c,["sparql","results"])?f={}:m.name==="binding"&&this.stackEquals(c,["sparql","results","result"])?(h=m.attributes.name||"",p="",b="",_="",y=[]):m.name==="triple"&&this.stackBeginsWith(c,["sparql","results","result"])?y.push({components:{}}):c[c.length-1]==="triple"&&this.stackBeginsWith(c,["sparql","results","result","binding"])?(p="",b="",_="",["subject","predicate","object"].includes(m.name)?y[y.length-1].currentComponent=m.name:i(new Error(`Illegal quoted triple component '${m.name}' found on line ${o.line+1}`))):this.stackBeginsWith(c,["sparql","results","result","binding"])&&(p=m.name,"xml:lang"in m.attributes?b=m.attributes["xml:lang"]:"datatype"in m.attributes?b=this.dataFactory.namedNode(m.attributes.datatype):b=void 0),c.push(m.name)}),o.on("closetag",m=>{if(this.stackEquals(c,["sparql","head"])&&(g.emit("variables",d),s=!0),this.stackEquals(c,["sparql","results","result"])&&g.push(f),this.stackBeginsWith(c,["sparql","results","result","binding"])){let v;if(!h&&p)i(new Error(`Terms should have a name on line ${o.line+1}`));else if(p==="uri")v=this.dataFactory.namedNode(_);else if(p==="bnode")v=this.dataFactory.blankNode(_);else if(p==="literal")v=this.dataFactory.literal(_,b);else if(c[c.length-1]==="triple"){const T=y.pop();T&&T.components.subject&&T.components.predicate&&T.components.object?v=this.dataFactory.quad(T.components.subject,T.components.predicate,T.components.object):i(new Error(`Incomplete quoted triple on line ${o.line+1}`))}else p&&i(new Error(`Invalid term type '${p}' on line ${o.line+1}`));if(v)if(y.length>0){const T=y[y.length-1];T.components[T.currentComponent]&&i(new Error(`The ${T.currentComponent} in a quoted triple on line ${o.line+1} was already defined before`)),T.components[T.currentComponent]=v}else{const T=this.prefixVariableQuestionMark?"?"+h:h;f[T]=v}p=void 0}c.pop()}),o.on("text",m=>{this.stackBeginsWith(c,["sparql","results","result","binding"])&&c[c.length-1]===p&&(_=m)});const g=e.on("end",m=>{l?s||g.emit("variables",[]):g.emit("error",new Error("No valid SPARQL query results were found."))}).pipe(new u.Transform({objectMode:!0,transform(m,v,T){o.write(m),T()}}));return g}parseXmlBooleanStream(e){return new Promise((i,o)=>{const c=new t.SaxesParser,s=[];c.on("error",o),c.on("opentag",l=>{s.push(l.name)}),c.on("closetag",l=>{s.pop()}),c.on("text",l=>{this.stackEquals(s,["sparql","boolean"])&&i(l==="true")}),e.on("error",o).on("data",l=>c.write(l)).on("end",()=>o(new Error("No valid ASK response was found.")))})}stackEquals(e,i){return e.length===i.length&&e.every((o,c)=>i[c]===o)}stackBeginsWith(e,i){return e.length>=i.length&&i.every((o,c)=>e[c]===o)}};return hw.SparqlXmlParser=n,hw}var CW;function nge(){return CW||(CW=1,function(a){var t=Zl&&Zl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Zl&&Zl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(rge(),a)}(Zl)),Zl}var cF={exports:{}},qW;function ige(){return qW||(qW=1,function(a){(function(){var t;typeof window=="object"&&window?t=window:t=Nt,a.exports?a.exports=t.Promise?t.Promise:e:t.Promise||(t.Promise=e);var u=t.setImmediate||function(f){setTimeout(f,1)};function n(f,h){return function(){f.apply(h,arguments)}}var r=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function e(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof f!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],d(f,n(o,this),n(c,this))}function i(f){var h=this;if(this._state===null){this._deferreds.push(f);return}u(function(){var p=h._state?f.onFulfilled:f.onRejected;if(p===null){(h._state?f.resolve:f.reject)(h._value);return}var b;try{b=p(h._value)}catch(_){f.reject(_);return}f.resolve(b)})}function o(f){try{if(f===this)throw new TypeError("A promise cannot be resolved with itself.");if(f&&(typeof f=="object"||typeof f=="function")){var h=f.then;if(typeof h=="function"){d(n(h,f),n(o,this),n(c,this));return}}this._state=!0,this._value=f,s.call(this)}catch(p){c.call(this,p)}}function c(f){this._state=!1,this._value=f,s.call(this)}function s(){for(var f=0,h=this._deferreds.length;f<h;f++)i.call(this,this._deferreds[f]);this._deferreds=null}function l(f,h,p,b){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof h=="function"?h:null,this.resolve=p,this.reject=b}function d(f,h,p){var b=!1;try{f(function(_){b||(b=!0,h(_))},function(_){b||(b=!0,p(_))})}catch(_){if(b)return;b=!0,p(_)}}e.prototype.catch=function(f){return this.then(null,f)},e.prototype.then=function(f,h){var p=this;return new e(function(b,_){i.call(p,new l(f,h,b,_))})},e.all=function(){var f=Array.prototype.slice.call(arguments.length===1&&r(arguments[0])?arguments[0]:arguments);return new e(function(h,p){if(f.length===0)return h([]);var b=f.length;function _(g,m){try{if(m&&(typeof m=="object"||typeof m=="function")){var v=m.then;if(typeof v=="function"){v.call(m,function(T){_(g,T)},p);return}}f[g]=m,--b===0&&h(f)}catch(T){p(T)}}for(var y=0;y<f.length;y++)_(y,f[y])})},e.resolve=function(f){return f&&typeof f=="object"&&f.constructor===e?f:new e(function(h){h(f)})},e.reject=function(f){return new e(function(h,p){p(f)})},e.race=function(f){return new e(function(h,p){for(var b=0,_=f.length;b<_;b++)f[b].then(h,p)})}})()}(cF)),cF.exports}var lF,BW;function age(){if(BW)return lF;BW=1;var a=ige();return lF=function(t,u,n){typeof u=="function"&&(n=u,u=null);var r="",e=new a(function(i,o){t.on("data",function(c){r+=typeof u=="string"?c.toString(u):c.toString()}),t.on("end",function(){i(r)}),t.on("error",o)});return n&&e.then(function(i){n(null,i)},n),e},lF}var $W;function uge(){if($W)return Yl;$W=1;var a=Yl&&Yl.__awaiter||function(s,l,d,f){function h(p){return p instanceof d?p:new d(function(b){b(p)})}return new(d||(d=Promise))(function(p,b){function _(m){try{g(f.next(m))}catch(v){b(v)}}function y(m){try{g(f.throw(m))}catch(v){b(v)}}function g(m){m.done?p(m.value):h(m.value).then(_,y)}g((f=f.apply(s,l||[])).next())})};Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.SparqlEndpointFetcher=void 0;const t=Qk(),u=Sa,n=Vk(),r=m0(),e=aq(),i=nge(),o=age();let c=class op{constructor(l){var d,f,h;this.method=(d=l==null?void 0:l.method)!==null&&d!==void 0?d:"POST",this.timeout=l==null?void 0:l.timeout,this.additionalUrlParams=(f=l==null?void 0:l.additionalUrlParams)!==null&&f!==void 0?f:new URLSearchParams,this.defaultHeaders=(h=l==null?void 0:l.defaultHeaders)!==null&&h!==void 0?h:new Headers,this.fetchCb=l==null?void 0:l.fetch,this.sparqlJsonParser=new e.SparqlJsonParser(l),this.sparqlXmlParser=new i.SparqlXmlParser(l),this.sparqlParsers={[op.CONTENTTYPE_SPARQL_JSON]:{parseBooleanStream:p=>this.sparqlJsonParser.parseJsonBooleanStream(p),parseResultsStream:p=>this.sparqlJsonParser.parseJsonResultsStream(p)},[op.CONTENTTYPE_SPARQL_XML]:{parseBooleanStream:p=>this.sparqlXmlParser.parseXmlBooleanStream(p),parseResultsStream:p=>this.sparqlXmlParser.parseXmlResultsStream(p)}}}getQueryType(l){const d=new r.Parser({sparqlStar:!0}).parse(l);return d.type==="query"?d.queryType==="DESCRIBE"?"CONSTRUCT":d.queryType:"UNKNOWN"}getUpdateTypes(l){const d=new r.Parser({sparqlStar:!0}).parse(l);if(d.type==="update"){const f={};for(const h of d.updates)"type"in h?f[h.type]=!0:f[h.updateType]=!0;return f}return"UNKNOWN"}fetchBindings(l,d){return a(this,void 0,void 0,function*(){const[f,h]=yield this.fetchRawStream(l,d,op.CONTENTTYPE_SPARQL),p=this.sparqlParsers[f];if(!p)throw new Error(`Unknown SPARQL results content type: ${f}`);return p.parseResultsStream(h)})}fetchAsk(l,d){return a(this,void 0,void 0,function*(){const[f,h]=yield this.fetchRawStream(l,d,op.CONTENTTYPE_SPARQL),p=this.sparqlParsers[f];if(!p)throw new Error(`Unknown SPARQL results content type: ${f}`);return p.parseBooleanStream(h)})}fetchTriples(l,d){return a(this,void 0,void 0,function*(){const[f,h]=yield this.fetchRawStream(l,d,op.CONTENTTYPE_TURTLE);return h.pipe(new u.StreamParser({format:f}))})}fetchUpdate(l,d){return a(this,void 0,void 0,function*(){const f=new AbortController,h={};this.defaultHeaders.forEach((b,_)=>{h[_]=b});const p={method:"POST",headers:Object.assign(Object.assign({},h),{"content-type":"application/sparql-update"}),body:d,signal:f.signal};yield this.handleFetchCall(l,p,{ignoreBody:!0}),f.abort()})}fetchRawStream(l,d,f){return a(this,void 0,void 0,function*(){let h=this.method==="POST"?l:`${l}?query=${encodeURIComponent(d)}`,p;const b=new Headers(this.defaultHeaders);if(b.append("Accept",f),this.method==="POST"){b.append("Content-Type","application/x-www-form-urlencoded"),p=new URLSearchParams,p.set("query",d);for(const[_,y]of this.additionalUrlParams.entries())p.set(_,y);b.append("Content-Length",p.toString().length.toString())}else this.additionalUrlParams.toString().length>0&&(h+=`&${this.additionalUrlParams.toString()}`);return this.handleFetchCall(h,{headers:b,method:this.method,body:p})})}handleFetchCall(l,d,f){return a(this,void 0,void 0,function*(){var h,p,b;let _,y;if(this.timeout){const v=new AbortController;d.signal=v.signal,_=setTimeout(()=>v.abort(),this.timeout)}const g=yield((h=this.fetchCb)!==null&&h!==void 0?h:fetch)(l,d);if(clearTimeout(_),!(f!=null&&f.ignoreBody)&&g.body&&(y=t(g.body)?g.body:(0,n.readableFromWeb)(g.body)),!g.ok||!y&&!(f!=null&&f.ignoreBody)){const v=l.split("?").at(0),T=y?yield o(y):"empty response";throw new Error(`Invalid SPARQL endpoint response from ${v} (HTTP status ${g.status}):
${T}`)}return[(b=(p=g.headers.get("Content-Type"))===null||p===void 0?void 0:p.split(";").at(0))!==null&&b!==void 0?b:"",y]})}};return Yl.SparqlEndpointFetcher=c,c.CONTENTTYPE_SPARQL_JSON="application/sparql-results+json",c.CONTENTTYPE_SPARQL_XML="application/sparql-results+xml",c.CONTENTTYPE_TURTLE="text/turtle",c.CONTENTTYPE_SPARQL=`${c.CONTENTTYPE_SPARQL_JSON};q=1.0,${c.CONTENTTYPE_SPARQL_XML};q=0.7`,Yl}var VW;function UW(){return VW||(VW=1,function(a){var t=Wl&&Wl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Wl&&Wl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(uge(),a)}(Wl)),Wl}var QW;function HW(){if(QW)return fw;QW=1,Object.defineProperty(fw,"__esModule",{value:!0}),fw.QuadDestinationSparql=void 0;const a=Fh(),t=gt(),u=UW(),n=J1();let r=class{constructor(i,o,c,s){this.url=i,this.context=o,this.mediatorHttp=c,this.endpointFetcher=new u.SparqlEndpointFetcher({fetch:(l,d)=>this.mediatorHttp.mediate({input:l,init:d,context:this.context}),prefixVariableQuestionMark:!0,dataFactory:s})}async update(i){const o=this.createCombinedQuadsQuery(i.insert,i.delete);await this.wrapSparqlUpdateRequest(o)}createCombinedQuadsQuery(i,o){return new t.ArrayIterator([],{autoStart:!1}).append(this.createQuadsQuery("DELETE",o)).append(o&&i?[` ;
`]:[]).append(this.createQuadsQuery("INSERT",i))}createQuadsQuery(i,o){return o?o.map(c=>{let s=`${(0,n.termToString)(c.subject)} ${(0,n.termToString)(c.predicate)} ${(0,n.termToString)(c.object)} .`;return c.graph.termType==="DefaultGraph"?s=`  ${s}
`:s=`  GRAPH ${(0,n.termToString)(c.graph)} { ${s} }
`,s}).prepend([`${i} DATA {
`]).append(["}"]):new t.ArrayIterator([],{autoStart:!1})}async wrapSparqlUpdateRequest(i){const o=await(0,a.stringify)(i);await this.endpointFetcher.fetchUpdate(this.url,o)}async deleteGraphs(i,o,c){const s=Array.isArray(i)?i:[i],l=[];for(const d of s){let f;typeof d=="string"?f=d:d.termType==="DefaultGraph"?f="DEFAULT":f=`GRAPH <${d.value}>`,l.push(`${c?"DROP":"CLEAR"} ${o?"":"SILENT "}${f}`)}await this.endpointFetcher.fetchUpdate(this.url,l.join("; "))}async createGraphs(i,o){const c=[];for(const s of i)c.push(`CREATE${o?"":" SILENT"} GRAPH <${s.value}>`);await this.endpointFetcher.fetchUpdate(this.url,c.join("; "))}};return fw.QuadDestinationSparql=r,fw}var GW;function oge(){if(GW)return dw;GW=1,Object.defineProperty(dw,"__esModule",{value:!0}),dw.ActorRdfUpdateHypermediaSparql=void 0;const a=oF(),t=ze(),u=Te(),n=HW();let r=class extends a.ActorRdfUpdateHypermedia{constructor(i){super(i,"sparql")}async testMetadata(i){return!i.forceDestinationType&&!i.metadata.sparqlService&&!(this.checkUrlSuffixSparql&&(i.url.endsWith("/sparql")||i.url.endsWith("/sparql/")))&&!(this.checkUrlSuffixUpdate&&(i.url.endsWith("/update")||i.url.endsWith("/update/")))?(0,u.failTest)(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql or /update.`):(0,u.passTestVoid)()}async run(i){this.logInfo(i.context,`Identified as sparql destination: ${i.url}`);const o=i.context.getSafe(t.KeysInitQuery.dataFactory);return{destination:new n.QuadDestinationSparql(i.metadata.sparqlService||i.url,i.context,this.mediatorHttp,o)}}};return dw.ActorRdfUpdateHypermediaSparql=r,dw}var zW;function sge(){return zW||(zW=1,function(a){var t=Kl&&Kl.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Kl&&Kl.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(oge(),a),u(HW(),a)}(Kl)),Kl}var td={},Tw={},kW;function cge(){if(kW)return Tw;kW=1,Object.defineProperty(Tw,"__esModule",{value:!0}),Tw.ActorQueryOperationAsk=void 0;const a=Qt(),t=Te(),u=wt();let n=class extends a.ActorQueryOperationTypedMediated{constructor(e){super(e,"ask")}async testOperation(e,i){return(0,t.passTestVoid)()}async runOperation(e,i){const o=await this.mediatorQueryOperation.mediate({operation:e.input,context:i}),{bindingsStream:c}=(0,u.getSafeBindings)(o);return{type:"boolean",execute:async()=>(await c.take(1).toArray()).length===1}}};return Tw.ActorQueryOperationAsk=n,Tw}var XW;function lge(){return XW||(XW=1,function(a){var t=td&&td.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=td&&td.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(cge(),a)}(td)),td}var rd={},ww={},JW;function dge(){if(JW)return ww;JW=1,Object.defineProperty(ww,"__esModule",{value:!0}),ww.ActorQueryOperationBgpJoin=void 0;const a=Qt(),t=ze(),u=Te(),n=ht();let r=class extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"bgp")}async testOperation(i,o){return(0,u.passTestVoid)()}async runOperation(i,o){const c=o.getSafe(t.KeysInitQuery.dataFactory),s=new n.Factory(c);return this.mediatorQueryOperation.mediate({operation:s.createJoin(i.patterns),context:o})}};return ww.ActorQueryOperationBgpJoin=r,ww}var KW;function fge(){return KW||(KW=1,function(a){var t=rd&&rd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=rd&&rd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(dge(),a)}(rd)),rd}var nd={},Sw={},Ow={},WW;function YW(){if(WW)return Ow;WW=1,Object.defineProperty(Ow,"__esModule",{value:!0}),Ow.BindingsToQuadsIterator=void 0;const a=gt(),t=Fn();let u=class sO extends a.MultiTransformIterator{constructor(r,e,i){super(i,{autoStart:!1}),this.dataFactory=r,this.template=e,this.blankNodeCounter=0}static bindTerm(r,e){return e.termType==="Variable"?r.get(e):e}static bindQuad(r,e){try{return(0,t.mapTermsNested)(e,i=>{const o=sO.bindTerm(r,i);if(!o)throw new Error("Unbound term");return o})}catch{}}static localizeBlankNode(r,e,i){return i.termType==="BlankNode"?r.blankNode(`${i.value}${e}`):i}static localizeQuad(r,e,i){return(0,t.mapTermsNested)(i,o=>sO.localizeBlankNode(r,e,o))}bindTemplate(r,e,i){return e.map(sO.localizeQuad.bind(null,this.dataFactory,i)).map(c=>sO.bindQuad.bind(null,r)(c)).filter(Boolean)}_createTransformer(r){return new a.ArrayIterator(this.bindTemplate(r,this.template,this.blankNodeCounter++),{autoStart:!1})}};return Ow.BindingsToQuadsIterator=u,Ow}var ZW;function hge(){if(ZW)return Sw;ZW=1,Object.defineProperty(Sw,"__esModule",{value:!0}),Sw.ActorQueryOperationConstruct=void 0;const a=Qt(),t=ze(),u=Te(),n=wt(),r=Fn(),e=ht(),i=YW();let o=class yae extends a.ActorQueryOperationTypedMediated{constructor(s){super(s,"construct")}static getVariables(s){return(0,r.uniqTerms)([].concat.apply([],s.map(l=>(0,r.getVariables)((0,r.getTermsNested)(l)))))}async testOperation(s,l){return(0,u.passTestVoid)()}async runOperation(s,l){const d=l.getSafe(t.KeysInitQuery.dataFactory),f=yae.getVariables(s.template),h={type:e.Algebra.types.PROJECT,input:s.input,variables:f},p=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:h,context:l})),b=new i.BindingsToQuadsIterator(d,s.template,p.bindingsStream);return{metadata:()=>p.metadata().then(y=>({...y,order:void 0,cardinality:{type:y.cardinality.type,value:y.cardinality.value*s.template.length},availableOrders:void 0})),quadStream:b,type:"quads"}}};return Sw.ActorQueryOperationConstruct=o,Sw}var eY;function tY(){return eY||(eY=1,function(a){var t=nd&&nd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=nd&&nd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(hge(),a),u(YW(),a)}(nd)),nd}var id={},Aw={},dF={},ii={},ad={},Ew={},rY;function nY(){if(rY)return Ew;rY=1,Object.defineProperty(Ew,"__esModule",{value:!0}),Ew.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return Ew.BlankNode=a,Ew}var Iw={},xw={},iY;function aY(){if(iY)return xw;iY=1,Object.defineProperty(xw,"__esModule",{value:!0}),xw.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return xw.DefaultGraph=a,a.INSTANCE=new a,xw}var Nw={},Rw={},uY;function fF(){if(uY)return Rw;uY=1,Object.defineProperty(Rw,"__esModule",{value:!0}),Rw.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return Rw.NamedNode=a,Rw}var oY;function sY(){if(oY)return Nw;oY=1,Object.defineProperty(Nw,"__esModule",{value:!0}),Nw.Literal=void 0;const a=fF();class t{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING,this.direction=""):r?"termType"in r?(this.language="",this.datatype=r,this.direction=""):(this.language=r.language,this.datatype=r.direction?t.RDF_DIRECTIONAL_LANGUAGE_STRING:t.RDF_LANGUAGE_STRING,this.direction=r.direction||""):(this.language="",this.datatype=t.XSD_STRING,this.direction="")}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&(n.direction===this.direction||!n.direction&&this.direction==="")&&this.datatype.equals(n.datatype)}}return Nw.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.RDF_DIRECTIONAL_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Nw}var Fw={},cY;function lY(){if(cY)return Fw;cY=1,Object.defineProperty(Fw,"__esModule",{value:!0}),Fw.Quad=void 0;class a{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return Fw.Quad=a,Fw}var Dw={},dY;function fY(){if(dY)return Dw;dY=1,Object.defineProperty(Dw,"__esModule",{value:!0}),Dw.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return Dw.Variable=a,Dw}var hY;function pge(){if(hY)return Iw;hY=1,Object.defineProperty(Iw,"__esModule",{value:!0}),Iw.DataFactory=void 0;const a=nY(),t=aY(),u=sY(),n=fF(),r=lY(),e=fY();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Iw.DataFactory=o,Iw}var pY;function ln(){return pY||(pY=1,function(a){var t=ad&&ad.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ad&&ad.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(nY(),a),u(pge(),a),u(aY(),a),u(sY(),a),u(fF(),a),u(lY(),a),u(fY(),a)}(ad)),ad}var yY;function yge(){if(yY)return ii;yY=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.termToString=u,ii.getLiteralValue=n,ii.getLiteralType=r,ii.getLiteralLanguage=e,ii.getLiteralDirection=i,ii.stringToTerm=o,ii.quadToStringQuad=c,ii.stringQuadToQuad=s;const a=ln(),t=new a.DataFactory;function u(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const d=l;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${u(l.subject)} ${u(l.predicate)} ${u(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+u(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function n(l){const d=/^"([^]*)"/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]}function r(l){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function i(l){const d=l.indexOf("--",l.lastIndexOf('"'));if(d>=0){const f=l.slice(d+2,l.length);if(f==="ltr"||f==="rtl")return f;throw new Error(l+" is not a literal with a valid direction")}return""}function o(l,d){if(d=d||t,!l||!l.length)return d.defaultGraph();switch(l[0]){case"_":return d.blankNode(l.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(l.substr(1));case'"':const f=e(l),h=i(l),p=d.namedNode(r(l));return d.literal(n(l),f?{language:f,direction:h}:p);case"<":default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const b=l.slice(2,-2).trim();let _=[],y=0,g=0,m=!1;for(let v=0;v<b.length;v++){const T=b[v];if(T==="<"&&y++,T===">"){if(y===0)throw new Error("Found closing tag without opening tag in "+l);y--}if(T==='"'){let S=!1,x=v;for(;x-- >0&&b[x]==="\\";)S=!S;S||(m=!m)}if(T===" "&&!m&&y===0){for(_.push(b.slice(g,v));b[v+1]===" ";)v+=1;g=v+1}}if(y!==0)throw new Error("Found opening tag without closing tag in "+l);if(_.push(b.slice(g,b.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+l);return _=_.map(v=>v.startsWith("<")&&!v.includes(" ")?v.slice(1,-1):v),d.quad(o(_[0]),o(_[1]),o(_[2]),_[3]?o(_[3]):void 0)}return d.namedNode(l)}}function c(l){return{subject:u(l.subject),predicate:u(l.predicate),object:u(l.object),graph:u(l.graph)}}function s(l,d){return d=d||t,d.quad(o(l.subject,d),o(l.predicate,d),o(l.object,d),o(l.graph,d))}return ii}var bY;function bge(){return bY||(bY=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralDirection=a.getLiteralLanguage=void 0;const t=yge();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralDirection",{enumerable:!0,get:function(){return t.getLiteralDirection}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return t.termToString}})}(dF)),dF}var mY;function mge(){if(mY)return Aw;mY=1,Object.defineProperty(Aw,"__esModule",{value:!0}),Aw.ActorQueryOperationDistinctIdentity=void 0;const a=Qt(),t=Te(),u=wt(),n=bge();let r=class extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"distinct")}async testOperation(i,o){return(0,t.passTestVoid)()}async runOperation(i,o){const c=await this.mediatorQueryOperation.mediate({operation:i.input,context:o});if(c.type==="quads"){const f=(0,u.getSafeQuads)(c);return{type:"quads",quadStream:f.quadStream.filter(await this.newIdentityFilterQuads()),metadata:f.metadata}}const s=(0,u.getSafeBindings)(c),l=(await s.metadata()).variables.map(f=>f.variable);return{type:"bindings",bindingsStream:s.bindingsStream.filter(await this.newIdentityFilter(l)),metadata:s.metadata}}async newIdentityFilter(i){const o={};return c=>{const s=i.map(l=>n.termToString(c.get(l))).join("-");return!(s in o)&&(o[s]=!0)}}async newIdentityFilterQuads(){const i={};return o=>{const c=Object.values(n.quadToStringQuad(o)).join(" ");return!(c in i)&&(i[c]=!0)}}};return Aw.ActorQueryOperationDistinctIdentity=r,Aw}var _Y;function _ge(){return _Y||(_Y=1,function(a){var t=id&&id.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=id&&id.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(mge(),a)}(id)),id}var ud={},Pw={},gY;function gge(){if(gY)return Pw;gY=1,Object.defineProperty(Pw,"__esModule",{value:!0}),Pw.ActorQueryOperationExtend=void 0;const a=Qt(),t=Te(),u=Xt(),n=Ae(),r=wt();let e=class extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"extend"),this.mediatorExpressionEvaluatorFactory=o.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,t.passTestVoid)()}async runOperation(o,c){const{expression:s,input:l,variable:d}=o,f=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:l,context:c}));if((await f.metadata()).variables.some(_=>_.variable.equals(d)))throw new Error(`Illegal binding to variable '${d.value}' that has already been bound`);const h=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:s,context:c}),p=async(_,y,g)=>{try{const m=await h.evaluate(_),v=_.set(d,m);g(v)}catch(m){(0,n.isExpressionError)(m)?(g(_),this.logWarn(c,`Expression error for extend operation (${m.message})with bindings '${(0,u.bindingsToString)(_)}'`)):b.emit("error",m)}y()},b=f.bindingsStream.transform({autoStart:!1,transform:p});return{type:"bindings",bindingsStream:b,async metadata(){const _=await f.metadata();return{..._,variables:[..._.variables,{variable:d,canBeUndef:!1}]}}}}};return Pw.ActorQueryOperationExtend=e,Pw}var vY;function vge(){return vY||(vY=1,function(a){var t=ud&&ud.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ud&&ud.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(gge(),a)}(ud)),ud}var od={},jw={},TY;function Tge(){if(TY)return jw;TY=1,Object.defineProperty(jw,"__esModule",{value:!0}),jw.ActorQueryOperationFilter=void 0;const a=Qt(),t=Te(),u=Xt(),n=Ae(),r=wt();let e=class extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"filter"),this.mediatorExpressionEvaluatorFactory=o.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,t.passTestVoid)()}async runOperation(o,c){const s=await this.mediatorQueryOperation.mediate({operation:o.input,context:c}),l=(0,r.getSafeBindings)(s);(0,r.validateQueryOutput)(l,"bindings");const d=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:c}),f=async(p,b,_)=>{try{await d.evaluateAsEBV(p)&&_(p)}catch(y){(0,n.isExpressionError)(y)?this.logWarn(c,"Error occurred while filtering.",()=>({error:y,bindings:(0,u.bindingsToString)(p)})):h.emit("error",y)}b()},h=l.bindingsStream.transform({transform:f,autoStart:!1});return{type:"bindings",bindingsStream:h,metadata:l.metadata}}};return jw.ActorQueryOperationFilter=e,jw}var wY;function wge(){return wY||(wY=1,function(a){var t=od&&od.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=od&&od.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Tge(),a)}(od)),od}var sd={},Lw={},SY;function Sge(){if(SY)return Lw;SY=1,Object.defineProperty(Lw,"__esModule",{value:!0}),Lw.ActorQueryOperationFromQuad=void 0;const a=Qt(),t=ze(),u=Te(),n=ht();let r=class Bn extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"from")}static copyOperation(i,o){const c={};for(const s of Object.keys(i))Array.isArray(i[s])&&s!=="template"?s==="variables"?c[s]=i[s]:c[s]=i[s].map(o):Bn.ALGEBRA_TYPES.includes(i[s].type)?c[s]=o(i[s]):c[s]=i[s];return c}static applyOperationDefaultGraph(i,o,c){if(o.type==="bgp"&&o.patterns.length>0||o.type==="path"||o.type==="pattern"){if(o.type==="bgp")return Bn.joinOperations(i,o.patterns.map(l=>{if(l.graph.termType!=="DefaultGraph")return i.createBgp([l]);const d=c.map(f=>i.createBgp([Object.assign(i.createPattern(l.subject,l.predicate,l.object,f),{metadata:l.metadata})]));return Bn.unionOperations(i,d)}));if(o.graph.termType!=="DefaultGraph")return o;const s=c.map(l=>o.type==="path"?i.createPath(o.subject,o.predicate,o.object,l):Object.assign(i.createPattern(o.subject,o.predicate,o.object,l),{metadata:o.metadata}));return Bn.unionOperations(i,s)}return Bn.copyOperation(o,s=>this.applyOperationDefaultGraph(i,s,c))}static applyOperationNamedGraph(i,o,c,s){if(o.type==="bgp"&&o.patterns.length>0||o.type==="path"||o.type==="pattern"){const l=o.type==="bgp"?o.patterns[0].graph:o.graph;if(l.termType==="DefaultGraph")return{type:n.Algebra.types.BGP,patterns:[]};if(l.termType==="Variable"){if(c.length===1){const f=c[0],h={};h[`?${l.value}`]=f;const p=i.createValues([l],[h]);let b;return o.type==="bgp"?b=i.createBgp(o.patterns.map(_=>i.createPattern(_.subject,_.predicate,_.object,f))):o.type==="path"?b=i.createPath(o.subject,o.predicate,o.object,f):b=i.createPattern(o.subject,o.predicate,o.object,f),i.createJoin([p,b])}return Bn.unionOperations(i,c.map(f=>Bn.applyOperationNamedGraph(i,o,[f],s)))}return[...c,...s].some(f=>f.equals(l))?o:{type:n.Algebra.types.BGP,patterns:[]}}return Bn.copyOperation(o,l=>this.applyOperationNamedGraph(i,l,c,s))}static joinOperations(i,o){if(o.length===1)return o[0];if(o.length>1)return i.createJoin(o);throw new Error("A join can only be applied on at least one operation")}static unionOperations(i,o){if(o.length===1)return o[0];if(o.length>1)return i.createUnion(o);throw new Error("A union can only be applied on at least one operation")}static createOperation(i,o){let c=o.input;return o.default.length>0&&(c=Bn.applyOperationDefaultGraph(i,c,o.default)),(o.named.length>0||o.default.length>0)&&(c=Bn.applyOperationNamedGraph(i,c,o.named,o.default)),c}async testOperation(i,o){return(0,u.passTestVoid)()}async runOperation(i,o){const c=o.getSafe(t.KeysInitQuery.dataFactory),s=new n.Factory(c),l=Bn.createOperation(s,i);return this.mediatorQueryOperation.mediate({operation:l,context:o})}};return Lw.ActorQueryOperationFromQuad=r,r.ALGEBRA_TYPES=Object.keys(n.Algebra.types).map(e=>n.Algebra.types[e]),Lw}var OY;function Oge(){return OY||(OY=1,function(a){var t=sd&&sd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=sd&&sd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Sge(),a)}(sd)),sd}var cd={},Mw={},AY;function Age(){if(AY)return Mw;AY=1,Object.defineProperty(Mw,"__esModule",{value:!0}),Mw.ActorQueryOperationProject=void 0;const a=Qt(),t=ze(),u=Te(),n=Nx(),r=wt();let e=class extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"project")}async testOperation(o,c){return(0,u.passTestVoid)()}async runOperation(o,c){const s=c.getSafe(t.KeysInitQuery.dataFactory),l=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:o.input,context:c})),d=await l.metadata(),f=Object.fromEntries(d.variables.map(m=>[m.variable.value,m])),h=o.variables.map(m=>({variable:m,canBeUndef:!1})),p=Object.fromEntries(h.map(m=>[m.variable.value,m])),b=d.variables.filter(m=>!(m.variable.value in p)),_=h.map(m=>({variable:m.variable,canBeUndef:!(m.variable.value in f)||f[m.variable.value].canBeUndef}));let y=b.length===0?l.bindingsStream:l.bindingsStream.map(m=>{for(const v of b)m=m.delete(v.variable);return m}),g=0;return y=y.map(m=>{g++;const v=new Map;return m.map(T=>{if(T instanceof n.BlankNodeBindingsScoped){let S=v.get(T.value);return S||(S=s.blankNode(`${T.value}${g}`),v.set(T.value,S)),S}return T})}),{type:"bindings",bindingsStream:y,metadata:async()=>({...d,variables:_})}}};return Mw.ActorQueryOperationProject=e,Mw}var EY;function Ege(){return EY||(EY=1,function(a){var t=cd&&cd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=cd&&cd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Age(),a)}(cd)),cd}var ld={},Cw={},IY;function Ige(){if(IY)return Cw;IY=1,Object.defineProperty(Cw,"__esModule",{value:!0}),Cw.ActorQueryOperationReducedHash=void 0;const a=Qt(),t=Te(),u=wt(),n=bh();let r=class extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"reduced")}async testOperation(i,o){return(0,t.passTestVoid)()}async runOperation(i,o){const c=(0,u.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:i.input,context:o})),s=(await c.metadata()).variables.map(d=>d.variable);return{type:"bindings",bindingsStream:c.bindingsStream.filter(await this.newHashFilter(o,s)),metadata:c.metadata}}async newHashFilter(i,o){const{hashFunction:c}=await this.mediatorHashBindings.mediate({context:i}),s=new n.LRUCache({max:this.cacheSize});return l=>{const d=c(l,o);return s.has(d)?!1:(s.set(d,!0),!0)}}};return Cw.ActorQueryOperationReducedHash=r,Cw}var xY;function xge(){return xY||(xY=1,function(a){var t=ld&&ld.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ld&&ld.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ige(),a)}(ld)),ld}var dd={},qw={},NY;function Nge(){if(NY)return qw;NY=1,Object.defineProperty(qw,"__esModule",{value:!0}),qw.ActorQueryOperationSlice=void 0;const a=Qt(),t=ze(),u=Te();let n=class extends a.ActorQueryOperationTypedMediated{constructor(e){super(e,"slice")}async testOperation(e,i){return(0,u.passTestVoid)()}async runOperation(e,i){e.length&&(i=i.set(t.KeysQueryOperation.limitIndicator,e.length));const o=await this.mediatorQueryOperation.mediate({operation:e.input,context:i});return o.type==="bindings"?{type:"bindings",bindingsStream:this.sliceStream(o.bindingsStream,e),metadata:this.sliceMetadata(o,e)}:o.type==="quads"?{type:"quads",quadStream:this.sliceStream(o.quadStream,e),metadata:this.sliceMetadata(o,e)}:o}sliceStream(e,i){const o=!!i.length||i.length===0,{start:c}=i,s=o?i.start+i.length-1:Number.POSITIVE_INFINITY;return e.transform({offset:c,limit:Math.max(s-c+1,0),autoStart:!1})}sliceMetadata(e,i){const o=!!i.length||i.length===0;return()=>e.metadata().then(c=>{const s={...c.cardinality};return Number.isFinite(s.value)&&(s.value=Math.max(0,s.value-i.start),o&&(s.value=Math.min(s.value,i.length))),{...c,cardinality:s}})}};return qw.ActorQueryOperationSlice=n,qw}var RY;function Rge(){return RY||(RY=1,function(a){var t=dd&&dd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=dd&&dd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Nge(),a)}(dd)),dd}var fd={},Bw={},FY;function Fge(){if(FY)return Bw;FY=1,Object.defineProperty(Bw,"__esModule",{value:!0}),Bw.ActorQueryOperationUnion=void 0;const a=Qt(),t=Te(),u=Er(),n=wt(),r=gt();let e=class jE extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"union")}static unionVariables(o){const c={};for(const s of o)for(const l of s){c[l.variable.value]||(c[l.variable.value]={variable:l.variable,canBeUndef:l.canBeUndef,occurrences:0});const d=c[l.variable.value];d.canBeUndef=d.canBeUndef||l.canBeUndef,d.occurrences++}return Object.values(c).map(s=>s.occurrences===o.length?{variable:s.variable,canBeUndef:s.canBeUndef}:{variable:s.variable,canBeUndef:!0})}static async unionMetadata(o,c,s,l){let d=(await l.mediate({mode:"initialize",context:s})).metadata;for(const h of o)d={...h,...(await l.mediate({mode:"append",accumulatedMetadata:d,appendingMetadata:h,context:s})).metadata};d.state=new u.MetadataValidationState;const f=()=>d.state.invalidate();for(const h of o)h.state.addInvalidateListener(f);if(c){const h=o.map(p=>p.variables);d.variables=jE.unionVariables(h)}return d}async testOperation(o,c){return(0,t.passTestVoid)()}async runOperation(o,c){const s=await Promise.all(o.input.map(d=>this.mediatorQueryOperation.mediate({operation:d,context:c})));let l;for(const d of s)if(l===void 0)l=d.type;else if(l!==d.type)throw new Error(`Unable to union ${l} and ${d.type}`);if(l==="bindings"||o.input.length===0){const d=s.map(n.getSafeBindings);return{type:"bindings",bindingsStream:new r.UnionIterator(d.map(p=>p.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(d.map(p=>p.metadata())).then(p=>jE.unionMetadata(p,!0,c,this.mediatorRdfMetadataAccumulate))}}if(l==="quads"){const d=s.map(n.getSafeQuads);return{type:"quads",quadStream:new r.UnionIterator(d.map(p=>p.quadStream),{autoStart:!1}),metadata:()=>Promise.all(d.map(p=>p.metadata())).then(p=>jE.unionMetadata(p,!1,c,this.mediatorRdfMetadataAccumulate))}}throw new Error(`Unable to union ${l}`)}};return Bw.ActorQueryOperationUnion=e,Bw}var DY;function PY(){return DY||(DY=1,function(a){var t=fd&&fd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=fd&&fd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Fge(),a)}(fd)),fd}var hd={},$w={},pd={},Vw={},Uw={},jY;function LY(){if(jY)return Uw;jY=1,Object.defineProperty(Uw,"__esModule",{value:!0}),Uw.PathVariableObjectIterator=void 0;const a=wt(),t=gt(),u=ir();let n=class extends t.BufferedIterator{constructor(e,i,o,c,s,l,d,f=16){super({autoStart:!1}),this.algebraFactory=e,this.subject=i,this.predicate=o,this.graph=c,this.context=s,this.mediatorQueryOperation=l,this.maxRunningOperations=f,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this.started=!1,this._push(this.subject,d)}getProperty(e,i){return!this.started&&e==="metadata"&&this.startNextOperation(!1).catch(o=>this.emit("error",o)),super.getProperty(e,i)}_end(e){for(const i of this.runningOperations)i.destroy();super._end(e)}_push(e,i=!0){let o;if(i&&(o=(0,u.termToString)(e),this.termHashes.has(o)))return!1;const c=this.algebraFactory.dataFactory.variable("b");return this.pendingOperations.push({variable:c,operation:this.algebraFactory.createPath(e,this.predicate,c,this.graph)}),o&&(this.termHashes.set(o,e),super._push(e)),!0}async startNextOperation(e){this.started=!0;const i=this.pendingOperations.pop(),o=(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:i.operation,context:this.context})),c=o.bindingsStream.map(s=>s.get(i.variable));c.done||(this.runningOperations.push(c),c.on("error",s=>this.destroy(s)),c.on("readable",()=>{e&&this._fillBufferAsync(),this.readable=!0}),c.on("end",()=>{this.runningOperations.splice(this.runningOperations.indexOf(c),1),e&&this._fillBufferAsync(),this.readable=!0})),this.getProperty("metadata")||this.setProperty("metadata",o.metadata)}_read(e,i){const o=this;(async function(){for(;o.runningOperations.length<o.maxRunningOperations&&o.pendingOperations.length!==0;)await o.startNextOperation(!0);let c=0,s,l=!0;for(;!l||c!==(c=e);){l=!0;for(let d=0;d<o.runningOperations.length&&e>0;d++)(s=o.runningOperations[d].read())!==null&&(o._push(s)?e--:l=!1)}o.closeIfNeeded()})().then(()=>{i()},c=>this.destroy(c))}closeIfNeeded(){this.runningOperations.length===0&&this.pendingOperations.length===0&&this.close()}};return Uw.PathVariableObjectIterator=n,Uw}var MY;function Dge(){if(MY)return Vw;MY=1,Object.defineProperty(Vw,"__esModule",{value:!0}),Vw.ActorAbstractPath=void 0;const a=Qt(),t=ze(),u=Te(),n=wt(),r=gt(),e=ir(),i=ht(),o=LY();let c=class extends a.ActorQueryOperationTypedMediated{constructor(l,d){super(l,"path"),this.predicateType=d}async testOperation(l,d){return l.predicate.type!==this.predicateType?(0,u.failTest)(`This Actor only supports ${this.predicateType} Path operations.`):(0,u.passTestVoid)()}generateVariable(l,d,f){return f?d&&(d.subject.value===f||d.object.value===f)?this.generateVariable(l,d,`${f}b`):l.variable(f):this.generateVariable(l,d,"b")}async isPathArbitraryLengthDistinct(l,d,f){return d.get(t.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(d=d.set(t.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:d,operation:void 0}):(d=d.set(t.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:d,operation:(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:l.createDistinct(f),context:d}))})}async predicateStarGraphVariable(l,d,f,h,p,b,_){const y=this.getPathSources(f),g=this.generateVariable(b.dataFactory,b.createPath(l,f,d,h)),m=b.createUnion([this.assignPatternSources(b,b.createPattern(l,g,d,h),y),this.assignPatternSources(b,b.createPattern(d,g,l,h),y)]),v=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:p,operation:m})),T=new Set;return{bindingsStream:new r.MultiTransformIterator(v.bindingsStream,{multiTransform:x=>{const L=x.get(h);return T.has(L.value)?new r.EmptyIterator:(T.add(L.value),new r.TransformIterator(async()=>{const O=new r.BufferedIterator;return await this.getObjectsPredicateStar(b,l,f,L,p,{},O,{count:0}),O.map(w=>_.bindings([[d,w],[h,L]]))},{maxBufferSize:128}))},autoStart:!1}),metadata:v.metadata}}async getObjectsPredicateStarEval(l,d,f,h,p,b,_,y){if(h.termType==="Variable")return this.predicateStarGraphVariable(l,f,d,h,p,_,y);const g=new o.PathVariableObjectIterator(_,l,d,h,p,this.mediatorQueryOperation,b);return{bindingsStream:g.map(v=>y.bindings([[f,v]])),async metadata(){const v=await new Promise(T=>{g.getProperty("metadata",S=>T(S()))});return v.cardinality.value++,v}}}async getObjectsPredicateStar(l,d,f,h,p,b,_,y){const g=(0,e.termToString)(d);if(b[g])return;_._push(d),b[g]=d,y.count++;const m=this.generateVariable(l.dataFactory),v=l.createPath(d,f,m,h),T=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:v,context:p}));return T.bindingsStream.on("data",async S=>{const x=S.get(m);await this.getObjectsPredicateStar(l,x,f,h,p,b,_,y)}),T.bindingsStream.on("end",()=>{--y.count===0&&_.close()}),T.metadata}async getSubjectAndObjectBindingsPredicateStar(l,d,f,h,p,b,_,y,g,m,v,T,S){const x=(0,e.termToString)(h)+(0,e.termToString)(b);if(g[x])return;if(v.count++,g[x]=!0,m._push(S.bindings([[l,f],[d,h]])),x in y){const O=await y[x];for(const w of O)await this.getSubjectAndObjectBindingsPredicateStar(l,d,f,w,p,b,_,y,g,m,v,T,S);--v.count===0&&m.close();return}const L=new Promise(async(O,w)=>{const A=[],E=this.generateVariable(T.dataFactory),R=T.createPath(h,p,E,b),V=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:R,context:_}));V.bindingsStream.on("data",async $=>{const Q=$.get(E);A.push(Q),await this.getSubjectAndObjectBindingsPredicateStar(l,d,f,Q,p,b,_,y,g,m,v,T,S)}),V.bindingsStream.on("error",w),V.bindingsStream.on("end",()=>{--v.count===0&&m.close(),O(A)})});y[x]=L}getPathSources(l){switch(l.type){case i.Algebra.types.ALT:case i.Algebra.types.SEQ:return l.input.flatMap(d=>this.getPathSources(d));case i.Algebra.types.INV:case i.Algebra.types.ONE_OR_MORE_PATH:case i.Algebra.types.ZERO_OR_MORE_PATH:case i.Algebra.types.ZERO_OR_ONE_PATH:return this.getPathSources(l.path);case i.Algebra.types.LINK:case i.Algebra.types.NPS:{const d=(0,n.getOperationSource)(l);if(!d)throw new Error("Could not find a required source on a link path operation");return[d]}}}assignPatternSources(l,d,f){if(f.length===0)throw new Error("Attempted to assign zero sources to a pattern during property path handling");return f.length===1?(0,n.assignOperationSource)(d,f[0]):l.createUnion(f.map(h=>(0,n.assignOperationSource)(d,h)),!0)}};return Vw.ActorAbstractPath=c,Vw}var CY;function Na(){return CY||(CY=1,function(a){var t=pd&&pd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=pd&&pd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Dge(),a),u(LY(),a)}(pd)),pd}var qY;function Pge(){if(qY)return $w;qY=1,Object.defineProperty($w,"__esModule",{value:!0}),$w.ActorQueryOperationPathAlt=void 0;const a=Na(),t=PY(),u=ze(),n=wt(),r=gt(),e=ht();let i=class extends a.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ALT)}async runOperation(c,s){const l=s.getSafe(u.KeysInitQuery.dataFactory),d=new e.Factory(l),f=c.predicate,h=(await Promise.all(f.input.map(_=>this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(c.subject,_,c.object,c.graph)})))).map(n.getSafeBindings);return{type:"bindings",bindingsStream:new r.UnionIterator(h.map(_=>_.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(h.map(_=>_.metadata())).then(_=>t.ActorQueryOperationUnion.unionMetadata(_,!0,s,this.mediatorRdfMetadataAccumulate))}}};return $w.ActorQueryOperationPathAlt=i,$w}var BY;function jge(){return BY||(BY=1,function(a){var t=hd&&hd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=hd&&hd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Pge(),a)}(hd)),hd}var yd={},Qw={},$Y;function Lge(){if($Y)return Qw;$Y=1,Object.defineProperty(Qw,"__esModule",{value:!0}),Qw.ActorQueryOperationPathInv=void 0;const a=Na(),t=ze(),u=ht();let n=class extends a.ActorAbstractPath{constructor(e){super(e,u.Algebra.types.INV)}async runOperation(e,i){const o=i.getSafe(t.KeysInitQuery.dataFactory),c=new u.Factory(o),s=e.predicate,l=c.createPath(e.object,s.path,e.subject,e.graph);return this.mediatorQueryOperation.mediate({operation:l,context:i})}};return Qw.ActorQueryOperationPathInv=n,Qw}var VY;function Mge(){return VY||(VY=1,function(a){var t=yd&&yd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=yd&&yd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Lge(),a)}(yd)),yd}var bd={},Hw={},UY;function Cge(){if(UY)return Hw;UY=1,Object.defineProperty(Hw,"__esModule",{value:!0}),Hw.ActorQueryOperationPathLink=void 0;const a=Na(),t=ze(),u=ht();let n=class extends a.ActorAbstractPath{constructor(e){super(e,u.Algebra.types.LINK)}async runOperation(e,i){const o=i.getSafe(t.KeysInitQuery.dataFactory),c=new u.Factory(o),s=e.predicate,l=Object.assign(c.createPattern(e.subject,s.iri,e.object,e.graph),{metadata:s.metadata});return this.mediatorQueryOperation.mediate({operation:l,context:i})}};return Hw.ActorQueryOperationPathLink=n,Hw}var QY;function qge(){return QY||(QY=1,function(a){var t=bd&&bd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=bd&&bd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Cge(),a)}(bd)),bd}var md={},Gw={},HY;function Bge(){if(HY)return Gw;HY=1,Object.defineProperty(Gw,"__esModule",{value:!0}),Gw.ActorQueryOperationPathNps=void 0;const a=Na(),t=ze(),u=wt(),n=ht();let r=class extends a.ActorAbstractPath{constructor(i){super(i,n.Algebra.types.NPS)}async runOperation(i,o){const c=o.getSafe(t.KeysInitQuery.dataFactory),s=new n.Factory(c),l=i.predicate,d=this.generateVariable(c,i),f=Object.assign(s.createPattern(i.subject,d,i.object,i.graph),{metadata:l.metadata}),h=(0,u.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:f,context:o}));return{type:"bindings",bindingsStream:h.bindingsStream.map(b=>l.iris.some(_=>_.equals(b.get(d)))?null:b.delete(d)),metadata:h.metadata}}};return Gw.ActorQueryOperationPathNps=r,Gw}var GY;function $ge(){return GY||(GY=1,function(a){var t=md&&md.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=md&&md.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Bge(),a)}(md)),md}var _d={},zw={},zY;function Vge(){if(zY)return zw;zY=1,Object.defineProperty(zw,"__esModule",{value:!0}),zw.ActorQueryOperationClear=void 0;const a=Qt(),t=ze(),u=wt();let n=class extends a.ActorQueryOperationTypedMediated{constructor(e){super(e,"clear")}async testOperation(e,i){return(0,u.testReadOnly)(i)}async runOperation(e,i){const o=i.getSafe(t.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=o.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!1},context:i});return{type:"void",execute:s}}};return zw.ActorQueryOperationClear=n,zw}var kY;function Uge(){return kY||(kY=1,function(a){var t=_d&&_d.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=_d&&_d.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Vge(),a)}(_d)),_d}var gd={},kw={},XY;function Qge(){if(XY)return kw;XY=1,Object.defineProperty(kw,"__esModule",{value:!0}),kw.ActorQueryOperationUpdateCompositeUpdate=void 0;const a=Qt(),t=wt();let u=class extends a.ActorQueryOperationTypedMediated{constructor(r){super(r,"compositeupdate")}async testOperation(r,e){return(0,t.testReadOnly)(e)}async runOperation(r,e){return{type:"void",execute:()=>(async()=>{for(const o of r.updates)await(0,t.getSafeVoid)(await this.mediatorQueryOperation.mediate({operation:o,context:e})).execute()})()}}};return kw.ActorQueryOperationUpdateCompositeUpdate=u,kw}var JY;function Hge(){return JY||(JY=1,function(a){var t=gd&&gd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=gd&&gd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Qge(),a)}(gd)),gd}var vd={},Xw={},KY;function Gge(){if(KY)return Xw;KY=1,Object.defineProperty(Xw,"__esModule",{value:!0}),Xw.ActorQueryOperationCreate=void 0;const a=Qt(),t=wt();let u=class extends a.ActorQueryOperationTypedMediated{constructor(r){super(r,"create")}async testOperation(r,e){return(0,t.testReadOnly)(e)}async runOperation(r,e){const{execute:i}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[r.source],requireNonExistence:!r.silent},context:e});return{type:"void",execute:i}}};return Xw.ActorQueryOperationCreate=u,Xw}var WY;function zge(){return WY||(WY=1,function(a){var t=vd&&vd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=vd&&vd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Gge(),a)}(vd)),vd}var Td={},Jw={},YY;function kge(){if(YY)return Jw;YY=1,Object.defineProperty(Jw,"__esModule",{value:!0}),Jw.ActorQueryOperationDrop=void 0;const a=Qt(),t=ze(),u=wt();let n=class extends a.ActorQueryOperationTypedMediated{constructor(e){super(e,"drop")}async testOperation(e,i){return(0,u.testReadOnly)(i)}async runOperation(e,i){const o=i.getSafe(t.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=o.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!0},context:i});return{type:"void",execute:s}}};return Jw.ActorQueryOperationDrop=n,Jw}var ZY;function Xge(){return ZY||(ZY=1,function(a){var t=Td&&Td.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Td&&Td.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(kge(),a)}(Td)),Td}var wd={},Kw={},eZ;function Jge(){if(eZ)return Kw;eZ=1,Object.defineProperty(Kw,"__esModule",{value:!0}),Kw.ActorQueryOperationLoad=void 0;const a=Qt(),t=ze(),u=wt(),n=ht();let r=class extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"load")}async testOperation(i,o){return(0,u.testReadOnly)(o)}async runOperation(i,o){const c=o.getSafe(t.KeysInitQuery.dataFactory),s=new n.Factory(c);let l=o;i.silent&&(l=l.set(t.KeysInitQuery.lenient,!0));const{querySource:d}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:i.source.value},context:l});let h=(0,u.getSafeQuads)(await this.mediatorQueryOperation.mediate({operation:s.createConstruct((0,u.assignOperationSource)(s.createPattern(c.variable("s"),c.variable("p"),c.variable("o")),d),[s.createPattern(c.variable("s"),c.variable("p"),c.variable("o"))]),context:l})).quadStream;i.destination&&(h=h.map(b=>c.quad(b.subject,b.predicate,b.object,i.destination)));const{execute:p}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,context:o});return{type:"void",execute:p}}};return Kw.ActorQueryOperationLoad=r,Kw}var tZ;function Kge(){return tZ||(tZ=1,function(a){var t=wd&&wd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=wd&&wd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Jge(),a)}(wd)),wd}var Sd={},Ww={},Od={},Yw={},rZ;function nZ(){if(rZ)return Yw;rZ=1,Object.defineProperty(Yw,"__esModule",{value:!0}),Yw.BlankNode=void 0;let a=class{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}};return Yw.BlankNode=a,Yw}var Zw={},e3={},iZ;function aZ(){if(iZ)return e3;iZ=1,Object.defineProperty(e3,"__esModule",{value:!0}),e3.DefaultGraph=void 0;let a=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}};return e3.DefaultGraph=a,a.INSTANCE=new a,e3}var t3={},r3={},uZ;function hF(){if(uZ)return r3;uZ=1,Object.defineProperty(r3,"__esModule",{value:!0}),r3.NamedNode=void 0;let a=class{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}};return r3.NamedNode=a,r3}var oZ;function sZ(){if(oZ)return t3;oZ=1,Object.defineProperty(t3,"__esModule",{value:!0}),t3.Literal=void 0;const a=hF();let t=class MD{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=MD.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=MD.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}};return t3.Literal=t,t.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),t3}var n3={},cZ;function lZ(){if(cZ)return n3;cZ=1,Object.defineProperty(n3,"__esModule",{value:!0}),n3.Quad=void 0;let a=class{constructor(u,n,r,e){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=e}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}};return n3.Quad=a,n3}var i3={},dZ;function fZ(){if(dZ)return i3;dZ=1,Object.defineProperty(i3,"__esModule",{value:!0}),i3.Variable=void 0;let a=class{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}};return i3.Variable=a,i3}var hZ;function Wge(){if(hZ)return Zw;hZ=1,Object.defineProperty(Zw,"__esModule",{value:!0}),Zw.DataFactory=void 0;const a=nZ(),t=aZ(),u=sZ(),n=hF(),r=lZ(),e=fZ();let i=0,o=class{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new u.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,d,f){return new r.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}};return Zw.DataFactory=o,Zw}var pZ;function Yge(){return pZ||(pZ=1,function(a){var t=Od&&Od.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Od&&Od.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(nZ(),a),u(Wge(),a),u(aZ(),a),u(sZ(),a),u(hF(),a),u(lZ(),a),u(fZ(),a)}(Od)),Od}var yZ;function Zge(){if(yZ)return Ww;yZ=1,Object.defineProperty(Ww,"__esModule",{value:!0}),Ww.ActorQueryOperationJoin=void 0;const a=Qt(),t=nn(),u=Te(),n=Er(),r=wt(),e=gt(),i=Yge();let o=class extends a.ActorQueryOperationTypedMediated{constructor(s){super(s,"join")}async testOperation(s,l){return(0,u.passTestVoid)()}async runOperation(s,l){const d=(await Promise.all(s.input.map(async f=>({output:await this.mediatorQueryOperation.mediate({operation:f,context:l}),operation:f})))).map(({output:f,operation:h})=>({output:(0,r.getSafeBindings)(f),operation:h}));if((await Promise.all(d.map(f=>f.output.metadata()))).some(f=>f.cardinality.value===0&&f.cardinality.type==="exact")){for(const f of d)f.output.bindingsStream.close();return{bindingsStream:new e.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:t.ActorRdfJoin.joinVariables(new i.DataFactory,await t.ActorRdfJoin.getMetadatas(d))}),type:"bindings"}}return this.mediatorJoin.mediate({type:"inner",entries:d,context:l})}};return Ww.ActorQueryOperationJoin=o,Ww}var bZ;function eve(){return bZ||(bZ=1,function(a){var t=Sd&&Sd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Sd&&Sd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Zge(),a)}(Sd)),Sd}var Ad={},a3={},mZ;function tve(){if(mZ)return a3;mZ=1,Object.defineProperty(a3,"__esModule",{value:!0}),a3.ActorQueryOperationLeftJoin=void 0;const a=Qt(),t=Te(),u=Xt(),n=Ae(),r=wt();let e=class extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"leftjoin"),this.mediatorExpressionEvaluatorFactory=o.mediatorExpressionEvaluatorFactory}async testOperation(o,c){return(0,t.passTestVoid)()}async runOperation(o,c){const s=(await Promise.all(o.input.map(async d=>({output:await this.mediatorQueryOperation.mediate({operation:d,context:c}),operation:d})))).map(({output:d,operation:f})=>({output:(0,r.getSafeBindings)(d),operation:f})),l=await this.mediatorJoin.mediate({type:"optional",entries:s,context:c});if(o.expression){const f=(await s[1].output.metadata()).variables,h=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:c}),p=l.bindingsStream.transform({autoStart:!1,transform:async(b,_,y)=>{if(!f.every(g=>b.has(g.variable.value)))return y(b),_();try{await h.evaluateAsEBV(b)&&y(b)}catch(g){(0,n.isExpressionError)(g)?this.logWarn(c,"Error occurred while filtering.",()=>({error:g,bindings:(0,u.bindingsToString)(b)})):p.emit("error",g)}_()}});l.bindingsStream=p}return l}};return a3.ActorQueryOperationLeftJoin=e,a3}var _Z;function rve(){return _Z||(_Z=1,function(a){var t=Ad&&Ad.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ad&&Ad.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(tve(),a)}(Ad)),Ad}var Ed={},u3={},gZ;function nve(){if(gZ)return u3;gZ=1,Object.defineProperty(u3,"__esModule",{value:!0}),u3.ActorQueryOperationMinus=void 0;const a=Qt(),t=Te(),u=wt();let n=class extends a.ActorQueryOperationTypedMediated{constructor(e){super(e,"minus")}async testOperation(e,i){return(0,t.passTestVoid)()}async runOperation(e,i){const o=(await Promise.all(e.input.map(async c=>({output:await this.mediatorQueryOperation.mediate({operation:c,context:i}),operation:c})))).map(({output:c,operation:s})=>({output:(0,u.getSafeBindings)(c),operation:s}));return this.mediatorJoin.mediate({type:"minus",entries:o,context:i})}};return u3.ActorQueryOperationMinus=n,u3}var vZ;function ive(){return vZ||(vZ=1,function(a){var t=Ed&&Ed.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ed&&Ed.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(nve(),a)}(Ed)),Ed}var Id={},o3={},TZ;function ave(){if(TZ)return o3;TZ=1,Object.defineProperty(o3,"__esModule",{value:!0}),o3.ActorQueryOperationPathSeq=void 0;const a=Na(),t=ze(),u=wt(),n=ht();let r=class extends a.ActorAbstractPath{constructor(i){super(i,n.Algebra.types.SEQ)}async runOperation(i,o){const c=o.getSafe(t.KeysInitQuery.dataFactory),s=new n.Factory(c),l=i.predicate;let d=i.subject;const f=[],h=await Promise.all(l.input.map((_,y)=>{const g=y===l.input.length-1?i.object:this.generateVariable(c,i,`b${y}`),m=s.createPath(d,_,g,i.graph),v=this.mediatorQueryOperation.mediate({context:o,operation:m});return d=g,y<l.input.length-1&&f.push(g),{output:v,operation:m}}).map(async({output:_,operation:y})=>({output:(0,u.getSafeBindings)(await _),operation:y}))),p=(0,u.getSafeBindings)(await this.mediatorJoin.mediate({type:"inner",entries:h,context:o}));return{type:"bindings",bindingsStream:p.bindingsStream.transform({transform(_,y,g){for(const m of f)_=_.delete(m);g(_),y()}}),async metadata(){const _=await p.metadata(),y=_.variables.filter(g=>!f.some(m=>m.value===g.variable.value));return{..._,variables:y}}}}};return o3.ActorQueryOperationPathSeq=r,o3}var wZ;function uve(){return wZ||(wZ=1,function(a){var t=Id&&Id.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Id&&Id.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ave(),a)}(Id)),Id}var xd={},s3={},SZ;function ove(){if(SZ)return s3;SZ=1,Object.defineProperty(s3,"__esModule",{value:!0}),s3.ActorRdfJoinMultiSmallest=void 0;const a=nn(),t=ze(),u=Te(),n=wt(),r=ht();let e=class extends a.ActorRdfJoin{constructor(o){super(o,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0,isLeaf:!1})}async sortJoinEntries(o,c){return(await this.mediatorJoinEntriesSort.mediate({entries:o,context:c})).entries}async getOutput(o,c){const s=o.context.getSafe(t.KeysInitQuery.dataFactory),l=new r.Factory(s),d=c.sortedEntries,f=d[0],h=d[1];d.splice(0,2);const p={output:(0,n.getSafeBindings)(await this.mediatorJoin.mediate({type:o.type,entries:[f,h],context:o.context})),operation:l.createJoin([f.operation,h.operation],!1)};return d.push(p),{result:await this.mediatorJoin.mediate({type:o.type,entries:d,context:o.context})}}async getJoinCoefficients(o,c){let{metadatas:s}=c;s=[...s];const l=await this.sortJoinEntries(o.entries.map((h,p)=>({...h,metadata:s[p]})),o.context);s=l.map(h=>h.metadata);const d=a.ActorRdfJoin.getRequestInitialTimes(s),f=a.ActorRdfJoin.getRequestItemTimes(s);return(0,u.passTestWithSideData)({iterations:s[0].cardinality.value*s[1].cardinality.value*s.slice(2).reduce((h,p)=>h*p.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:d[0]+s[0].cardinality.value*f[0]+d[1]+s[1].cardinality.value*f[1]+s.slice(2).reduce((h,p,b)=>h+d.slice(2)[b]+p.cardinality.value*f.slice(2)[b],0)},{...c,sortedEntries:l})}};return s3.ActorRdfJoinMultiSmallest=e,s3}var OZ;function sve(){return OZ||(OZ=1,function(a){var t=xd&&xd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=xd&&xd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ove(),a)}(xd)),xd}var Nd={},c3={},l3={},AZ;function EZ(){if(AZ)return l3;AZ=1,Object.defineProperty(l3,"__esModule",{value:!0}),l3.MaxAggregator=void 0;const a=Qr();let t=class extends a.AggregateEvaluator{constructor(n,r,e,i){super(n,r,i),this.orderByEvaluator=e,this.state=void 0}putTerm(n){if(n.termType!=="Literal")throw new Error(`Term with value ${n.value} has type ${n.termType} and is not a literal`);this.state===void 0?this.state=n:this.orderByEvaluator.orderTypes(this.state,n)===-1&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return l3.MaxAggregator=t,l3}var IZ;function cve(){if(IZ)return c3;IZ=1,Object.defineProperty(c3,"__esModule",{value:!0}),c3.ActorBindingsAggregatorFactoryMax=void 0;const a=Qr(),t=Te(),u=EZ();let n=class extends a.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="max"?(0,t.failTest)("This actor only supports the 'max' aggregator."):(0,t.passTestVoid)()}async run({expr:e,context:i}){return new u.MaxAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:e.expression,context:i}),e.distinct,await this.mediatorTermComparatorFactory.mediate({context:i}))}};return c3.ActorBindingsAggregatorFactoryMax=n,c3}var xZ;function lve(){return xZ||(xZ=1,function(a){var t=Nd&&Nd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Nd&&Nd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(cve(),a),u(EZ(),a)}(Nd)),Nd}var Rd={},d3={},f3={},NZ;function RZ(){if(NZ)return f3;NZ=1,Object.defineProperty(f3,"__esModule",{value:!0}),f3.MinAggregator=void 0;const a=Qr();let t=class extends a.AggregateEvaluator{constructor(n,r,e,i){super(n,r,i),this.orderByEvaluator=e,this.state=void 0}putTerm(n){if(n.termType!=="Literal")throw new Error(`Term with value ${n.value} has type ${n.termType} and is not a literal`);this.state===void 0?this.state=n:this.orderByEvaluator.orderTypes(this.state,n)===1&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return f3.MinAggregator=t,f3}var FZ;function dve(){if(FZ)return d3;FZ=1,Object.defineProperty(d3,"__esModule",{value:!0}),d3.ActorBindingsAggregatorFactoryMin=void 0;const a=Qr(),t=Te(),u=RZ();let n=class extends a.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="min"?(0,t.failTest)("This actor only supports the 'min' aggregator."):(0,t.passTestVoid)()}async run({context:e,expr:i}){return new u.MinAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:i.expression,context:e}),i.distinct,await this.mediatorTermComparatorFactory.mediate({context:e}))}};return d3.ActorBindingsAggregatorFactoryMin=n,d3}var DZ;function fve(){return DZ||(DZ=1,function(a){var t=Rd&&Rd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Rd&&Rd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(dve(),a),u(RZ(),a)}(Rd)),Rd}var Fd={},h3={},p3={},PZ;function hve(){if(PZ)return p3;PZ=1,Object.defineProperty(p3,"__esModule",{value:!0}),p3.SortIterator=void 0;const a=gt();let t=class extends a.TransformIterator{constructor(n,r,e){super(n,e);const i=e&&e.window;this.windowLength=Number.isFinite(i)&&i>0?i:Number.POSITIVE_INFINITY,this.sort=r,this.sorted=[]}_read(n,r){let e,{length:i}=this.sorted;for(;i!==this.windowLength&&(e=this.source.read(),e!==null);){let o=0,c=i-1,s,l;for(;o<=c;)s=Math.trunc((o+c)/2),l=this.sort(e,this.sorted[s]),l<0?o=s+1:l>0?c=s-1:(o=s,c=-1);this.sorted.splice(o,0,e),i++}i===this.windowLength&&this._push(this.sorted.pop()),r()}_flush(n){let{length:r}=this.sorted;for(;r--;)this._push(this.sorted.pop());n()}};return p3.SortIterator=t,p3}var jZ;function pve(){if(jZ)return h3;jZ=1,Object.defineProperty(h3,"__esModule",{value:!0}),h3.ActorQueryOperationOrderBy=void 0;const a=Qt(),t=Te(),u=Ae(),n=wt(),r=ht(),e=hve();let i=class extends a.ActorQueryOperationTypedMediated{constructor(c){super(c,"orderby"),this.window=c.window??Number.POSITIVE_INFINITY,this.mediatorExpressionEvaluatorFactory=c.mediatorExpressionEvaluatorFactory,this.mediatorTermComparatorFactory=c.mediatorTermComparatorFactory}async testOperation(){return(0,t.passTestVoid)()}async runOperation(c,s){const l=await this.mediatorQueryOperation.mediate({operation:c.input,context:s}),d=(0,n.getSafeBindings)(l),f={window:this.window};let{bindingsStream:h}=d;const p=await this.mediatorTermComparatorFactory.mediate({context:s});for(let b=c.expressions.length-1;b>=0;b--){let _=c.expressions[b];const y=this.isAscending(_);_=this.extractSortExpression(_);const g=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:_,context:s}),m=async(S,x,L)=>{try{const O=await g.evaluate(S);L({bindings:S,result:O})}catch(O){(0,u.isExpressionError)(O)||h.emit("error",O),L({bindings:S,result:void 0})}x()},v=h.transform({transform:m});h=new e.SortIterator(v,(S,x)=>{let L=p.orderTypes(S.result,x.result);return y||(L*=-1),L},f).map(({bindings:S})=>S)}return{type:"bindings",bindingsStream:h,metadata:d.metadata}}extractSortExpression(c){const{expressionType:s,operator:l}=c;return s!==r.Algebra.expressionTypes.OPERATOR?c:l==="desc"?c.args[0]:c}isAscending(c){const{expressionType:s,operator:l}=c;return s!==r.Algebra.expressionTypes.OPERATOR?!0:l!=="desc"}};return h3.ActorQueryOperationOrderBy=i,h3}var LZ;function yve(){return LZ||(LZ=1,function(a){var t=Fd&&Fd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Fd&&Fd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(pve(),a)}(Fd)),Fd}var Dd={},y3={},MZ;function bve(){if(MZ)return y3;MZ=1,Object.defineProperty(y3,"__esModule",{value:!0}),y3.ActorOptimizeQueryOperationFilterPushdown=void 0;const a=Dn(),t=ze(),u=Te(),n=wt(),r=Fn(),e=ht();let i=class extends a.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,u.passTestVoid)()}async run(c){const s=c.context.getSafe(t.KeysInitQuery.dataFactory),l=new e.Factory(s);let d=c.operation;const f=this;this.splitConjunctive&&(d=e.Util.mapOperation(d,{filter(y,g){return y.expression.expressionType===e.Algebra.expressionTypes.OPERATOR&&y.expression.operator==="&&"?(f.logDebug(c.context,`Split conjunctive filter into ${y.expression.args.length} nested filters`),{recurse:!0,result:y.expression.args.reduce((m,v)=>g.createFilter(m,v),y.input)}):{recurse:!0,result:y}}},l));const h=this.getSources(d),p=new Map(await Promise.all(h.map(async y=>[y,await y.source.getSelectorShape(c.context)])));let b=!0,_=0;for(;b&&_<this.maxIterations;)b=!1,d=e.Util.mapOperation(d,{filter(y,g){if(!f.shouldAttemptPushDown(y,h,p))return{recurse:!0,result:y};const m=f.getExpressionVariables(y.expression),[v,T]=f.filterPushdown(y.expression,m,y.input,g,c.context);return v&&(b=!0),{recurse:!0,result:T}}}),_++;return _>1&&f.logDebug(c.context,`Pushed down filters in ${_} iterations`),this.mergeConjunctive&&(d=e.Util.mapOperation(d,{filter(y,g){if(y.input.type===e.Algebra.types.FILTER){const{nestedExpressions:m,input:v}=f.getNestedFilterExpressions(y);return f.logDebug(c.context,`Merge ${m.length} nested filters into conjunctive filter`),{recurse:!0,result:g.createFilter(v,m.slice(1).reduce((T,S)=>g.createOperatorExpression("&&",[T,S]),m[0]))}}return{recurse:!0,result:y}}})),{operation:d,context:c.context}}shouldAttemptPushDown(c,s,l){if(this.aggressivePushdown)return!0;const d=c.expression;return!!(d.expressionType===e.Algebra.expressionTypes.OPERATOR&&d.operator==="="&&(d.args[0].expressionType==="term"&&d.args[0].term.termType!=="Variable"&&d.args[1].expressionType==="term"&&d.args[1].term.termType==="Variable"||d.args[0].expressionType==="term"&&d.args[0].term.termType==="Variable"&&d.args[1].expressionType==="term"&&d.args[1].term.termType!=="Variable")||s.some(f=>(0,n.doesShapeAcceptOperation)(l.get(f),c)))}getSources(c){const s=new Set,l=d=>{const f=(0,n.getOperationSource)(d);return f&&s.add(f),!1};return e.Util.recurseOperation(c,{[e.Algebra.types.PATTERN]:l,[e.Algebra.types.LINK]:l,[e.Algebra.types.NPS]:l,[e.Algebra.types.SERVICE]:l}),[...s]}getExpressionVariables(c){switch(c.expressionType){case e.Algebra.expressionTypes.AGGREGATE:case e.Algebra.expressionTypes.WILDCARD:throw new Error(`Getting expression variables is not supported for ${c.expressionType}`);case e.Algebra.expressionTypes.EXISTENCE:return e.Util.inScopeVariables(c.input);case e.Algebra.expressionTypes.NAMED:return[];case e.Algebra.expressionTypes.OPERATOR:return(0,r.uniqTerms)(c.args.flatMap(s=>this.getExpressionVariables(s)));case e.Algebra.expressionTypes.TERM:return c.term.termType==="Variable"?[c.term]:[]}}getOverlappingOperations(c,s){const l=[],d=[],f=[];for(const h of c.input){const p=e.Util.inScopeVariables(h);this.variablesSubSetOf(s,p)?l.push(h):this.variablesIntersect(s,p)?d.push(h):f.push(h)}return{fullyOverlapping:l,partiallyOverlapping:d,notOverlapping:f}}filterPushdown(c,s,l,d,f){if(this.isExpressionFalse(c))return[!0,d.createUnion([])];if(c.type===e.Algebra.types.EXPRESSION&&c.expressionType===e.Algebra.expressionTypes.EXISTENCE)return[!1,d.createFilter(l,c)];switch(l.type){case e.Algebra.types.EXTEND:return this.variablesIntersect([l.variable],s)?[!1,d.createFilter(l,c)]:[!0,d.createExtend(this.filterPushdown(c,s,l.input,d,f)[1],l.variable,l.expression)];case e.Algebra.types.FILTER:{const[h,p]=this.filterPushdown(c,s,l.input,d,f);return[h,d.createFilter(p,l.expression)]}case e.Algebra.types.JOIN:{if(l.input.length===0)return[!1,d.createFilter(l,c)];const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:b}=this.getOverlappingOperations(l,s),_=[];let y=!1;return h.length>0&&(y=!0,_.push(d.createJoin(h.map(g=>this.filterPushdown(c,s,g,d,f)[1])))),p.length>0&&_.push(d.createFilter(d.createJoin(p,!1),c)),b.length>0&&_.push(...b),_.length>1&&(y=!0),y&&this.logDebug(f,`Push down filter across join entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${b.length} not overlapping`),[y,_.length===1?_[0]:d.createJoin(_)]}case e.Algebra.types.NOP:return[!0,l];case e.Algebra.types.PROJECT:return this.variablesIntersect(l.variables,s)?[!0,d.createProject(this.filterPushdown(c,s,l.input,d,f)[1],l.variables)]:[!0,l];case e.Algebra.types.UNION:{const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:b}=this.getOverlappingOperations(l,s),_=[];let y=!1;return h.length>0&&(y=!0,_.push(d.createUnion(h.map(g=>this.filterPushdown(c,s,g,d,f)[1])))),p.length>0&&_.push(d.createFilter(d.createUnion(p,!1),c)),b.length>0&&_.push(...b),_.length>1&&(y=!0),y&&this.logDebug(f,`Push down filter across union entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${b.length} not overlapping`),[y,_.length===1?_[0]:d.createUnion(_)]}case e.Algebra.types.VALUES:return this.variablesIntersect(l.variables,s)?[!1,d.createFilter(l,c)]:[!0,l];case e.Algebra.types.LEFT_JOIN:{if(this.pushIntoLeftJoins){const h=e.Util.inScopeVariables(l.input[1]);if(!this.variablesIntersect(s,h))return this.logDebug(f,"Push down filter into left join"),[!0,d.createLeftJoin(this.filterPushdown(c,s,l.input[0],d,f)[1],l.input[1],l.expression)]}return[!1,d.createFilter(l,c)]}case e.Algebra.types.PATTERN:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h){let p=!1;const b=l.metadata;if(l=(0,r.mapTermsNested)(l,_=>_.equals(h.variable)?(p=!0,h.term):_),l.type=e.Algebra.types.PATTERN,l.metadata=b,p)return this.logDebug(f,`Push down filter into pattern for ?${h.variable.value}`),[!0,d.createJoin([l,d.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,d.createFilter(l,c)]}case e.Algebra.types.PATH:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h&&(l.subject.equals(h.variable)||l.object.equals(h.variable))){this.logDebug(f,`Push down filter into path for ?${h.variable.value}`);const p=l.metadata;return l=d.createPath(l.subject.equals(h.variable)?h.term:l.subject,l.predicate,l.object.equals(h.variable)?h.term:l.object),l.metadata=p,[!0,d.createJoin([l,d.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,d.createFilter(l,c)]}case e.Algebra.types.MINUS:case e.Algebra.types.ALT:case e.Algebra.types.ASK:case e.Algebra.types.BGP:case e.Algebra.types.CONSTRUCT:case e.Algebra.types.DESCRIBE:case e.Algebra.types.DISTINCT:case e.Algebra.types.EXPRESSION:case e.Algebra.types.FROM:case e.Algebra.types.GRAPH:case e.Algebra.types.GROUP:case e.Algebra.types.INV:case e.Algebra.types.LINK:case e.Algebra.types.NPS:case e.Algebra.types.ONE_OR_MORE_PATH:case e.Algebra.types.ORDER_BY:case e.Algebra.types.REDUCED:case e.Algebra.types.SEQ:case e.Algebra.types.SERVICE:case e.Algebra.types.SLICE:case e.Algebra.types.ZERO_OR_MORE_PATH:case e.Algebra.types.ZERO_OR_ONE_PATH:case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return[!1,d.createFilter(l,c)]}}getEqualityExpressionPushableIntoPattern(c){if(c.expressionType===e.Algebra.expressionTypes.OPERATOR&&c.operator==="="){if(c.args[0].expressionType==="term"&&c.args[0].term.termType!=="Variable"&&(c.args[0].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[0].term))&&c.args[1].expressionType==="term"&&c.args[1].term.termType==="Variable")return{variable:c.args[1].term,term:c.args[0].term};if(c.args[0].expressionType==="term"&&c.args[0].term.termType==="Variable"&&c.args[1].expressionType==="term"&&c.args[1].term.termType!=="Variable"&&(c.args[1].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[1].term)))return{variable:c.args[0].term,term:c.args[1].term}}}isLiteralWithCanonicalLexicalForm(c){if(c.termType==="Literal")switch(c.datatype.value){case"http://www.w3.org/2001/XMLSchema#string":case"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":case"http://www.w3.org/2001/XMLSchema#normalizedString":case"http://www.w3.org/2001/XMLSchema#anyURI":case"http://www.w3.org/2001/XMLSchema#base64Binary":case"http://www.w3.org/2001/XMLSchema#language":case"http://www.w3.org/2001/XMLSchema#Name":case"http://www.w3.org/2001/XMLSchema#NCName":case"http://www.w3.org/2001/XMLSchema#NMTOKEN":case"http://www.w3.org/2001/XMLSchema#token":case"http://www.w3.org/2001/XMLSchema#hexBinary":return!0}return!1}variablesIntersect(c,s){return c.some(l=>s.some(d=>l.equals(d)))}variablesSubSetOf(c,s){return c.length<=s.length&&c.every(l=>s.some(d=>l.equals(d)))}isExpressionFalse(c){return c.term&&c.term.termType==="Literal"&&c.term.value==="false"}getNestedFilterExpressions(c){if(c.input.type===e.Algebra.types.FILTER){const s=this.getNestedFilterExpressions(c.input);return{nestedExpressions:[c.expression,...s.nestedExpressions],input:s.input}}return{nestedExpressions:[c.expression],input:c.input}}};return y3.ActorOptimizeQueryOperationFilterPushdown=i,y3}var CZ;function mve(){return CZ||(CZ=1,function(a){var t=Dd&&Dd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Dd&&Dd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(bve(),a)}(Dd)),Dd}var Pd={},b3={},jd={},qZ;function BZ(){if(qZ)return jd;qZ=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.ActorDereferenceHttpBase=jd.mediaTypesToAcceptString=void 0;const a=MN(),t=Ki(),u=Te(),n=Fh(),r=vr(),e=/^[^ ;]*/u;function i(c,s){const l="*/*;q=0.1",d=[],f=Object.entries(c).map(([p,b])=>({mediaType:p,priority:b})).sort((p,b)=>b.priority===p.priority?p.mediaType.localeCompare(b.mediaType):b.priority-p.priority);let h=f.length-1;for(const{mediaType:p,priority:b}of f){const _=p+(b===1?"":`;q=${b.toFixed(3).replace(/0*$/u,"")}`);if(h+_.length>s){for(;h+l.length>s;){const y=d.pop()??"";h-=y.length+1}d.push(l);break}d.push(_),h+=_.length}return d.length===0?"*/*":d.join(",")}jd.mediaTypesToAcceptString=i;let o=class extends a.ActorDereference{constructor(s){super(s)}async test({url:s}){return/^https?:/u.test(s)?(0,u.passTestVoid)():(0,u.failTest)(`Cannot retrieve ${s} because it is not an HTTP(S) URL.`)}async run(s){var y,g;let l=!0;const d=new Headers(s.headers);d.append("Accept",i(await((y=s.mediaTypes)==null?void 0:y.call(s))??{},this.getMaxAcceptHeaderLength()));let f;const h=Date.now();try{f=await this.mediatorHttp.mediate({context:s.context,init:{headers:d,method:s.method},input:s.url})}catch(m){return this.handleDereferenceErrors(s,m)}const p=(0,r.resolve)(f.url,s.url),b=Date.now()-h;if(f.status!==200){l=!1;const m=f.body?await(0,n.stringify)(t.ActorHttp.toNodeReadable(f.body)):"empty response";if(!s.acceptErrors){const v=new Error(`Could not retrieve ${s.url} (HTTP status ${f.status}):
${m}`);return this.handleDereferenceErrors(s,v,f.headers,b)}}const _=(g=e.exec(f.headers.get("content-type")??""))==null?void 0:g[0];return{url:p,data:l?t.ActorHttp.toNodeReadable(f.body):(0,a.emptyReadable)(),exists:l,requestTime:b,headers:f.headers,mediaType:_==="text/plain"?void 0:_}}};return jd.ActorDereferenceHttpBase=o,jd}var $Z;function _ve(){if($Z)return b3;$Z=1,Object.defineProperty(b3,"__esModule",{value:!0}),b3.ActorDereferenceHttp=void 0;const a=BZ();class t extends a.ActorDereferenceHttpBase{getMaxAcceptHeaderLength(){return this.maxAcceptHeaderLengthBrowser}}return b3.ActorDereferenceHttp=t,b3}var VZ;function gve(){return VZ||(VZ=1,function(a){var t=Pd&&Pd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Pd&&Pd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(_ve(),a),u(BZ(),a)}(Pd)),Pd}var Ld={},m3={},UZ;function vve(){if(UZ)return m3;UZ=1,Object.defineProperty(m3,"__esModule",{value:!0}),m3.ActorHttpProxy=void 0;const a=Ki(),t=ze(),u=Te();let n=class extends a.ActorHttp{constructor(e){super(e)}async test(e){const i=e.context.get(t.KeysHttpProxy.httpProxyHandler);return i?await i.getProxy(e)?(0,u.passTest)({time:Number.POSITIVE_INFINITY}):(0,u.failTest)(`Actor ${this.name} could not determine a proxy for the given request.`):(0,u.failTest)(`Actor ${this.name} could not find a proxy handler in the context.`)}async run(e){const i=typeof e.input=="string"?e.input:e.input.url,o=e.context.get(t.KeysHttpProxy.httpProxyHandler),c=await this.mediatorHttp.mediate({...await o.getProxy(e),context:e.context.delete(t.KeysHttpProxy.httpProxyHandler)});return Object.defineProperty(c,"url",{configurable:!0,enumerable:!0,get:()=>c.headers.get("x-final-url")??i}),c}};return m3.ActorHttpProxy=n,m3}var _3={},QZ;function Tve(){if(QZ)return _3;QZ=1,Object.defineProperty(_3,"__esModule",{value:!0}),_3.ProxyHandlerStatic=void 0;let a=class{constructor(u){this.prefixUrl=u}async getProxy(u){return{init:u.init,input:this.modifyInput(u.input)}}modifyInput(u){return typeof u=="string"?this.prefixUrl+u:new Request(this.prefixUrl+u.url,u)}};return _3.ProxyHandlerStatic=a,_3}var HZ;function wve(){return HZ||(HZ=1,function(a){var t=Ld&&Ld.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ld&&Ld.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(vve(),a),u(Tve(),a)}(Ld)),Ld}var Md={},g3={},GZ;function Sve(){if(GZ)return g3;GZ=1,Object.defineProperty(g3,"__esModule",{value:!0}),g3.ActorContextPreprocessQuerySourceIdentify=void 0;const a=W0(),t=ze(),u=Te(),n=bh();let r=class extends a.ActorContextPreprocess{constructor(i){super(i),this.cache=this.cacheSize?new n.LRUCache({max:this.cacheSize}):void 0;const o=this.cache;o&&this.httpInvalidator.addInvalidateListener(({url:c})=>c?o.delete(c):o.clear())}async test(i){return(0,u.passTestVoid)()}async run(i){let o=i.context;if(o.has(t.KeysInitQuery.querySourcesUnidentified)){const c=i.context.get(t.KeysInitQuery.querySourcesUnidentified),s=await Promise.all(c.map(f=>this.expandSource(f))),l=await Promise.all(s.map(async f=>this.identifySource(f,i.context))),d=i.context.get(t.KeysStatistics.dereferencedLinks);if(d)for(const f of l)d.updateStatistic({url:f.source.referenceValue,metadata:{seed:!0}},f.source);o=i.context.delete(t.KeysInitQuery.querySourcesUnidentified).set(t.KeysQueryOperation.querySources,l)}return{context:o}}async expandSource(i){return typeof i=="string"||"match"in i?{value:i}:{...i,context:(await this.mediatorContextPreprocess.mediate({context:u.ActionContext.ensureActionContext(i.context??{})})).context}}identifySource(i,o){let c;return typeof i.value=="string"&&this.cache&&(c=this.cache.get(i.value)),c||(c=this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:i,context:o}).then(({querySource:s})=>s),typeof i.value=="string"&&this.cache&&this.cache.set(i.value,c)),c}};return g3.ActorContextPreprocessQuerySourceIdentify=r,g3}var zZ;function Ove(){return zZ||(zZ=1,function(a){var t=Md&&Md.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Md&&Md.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Sve(),a)}(Md)),Md}var Cd={},v3={},kZ;function Ave(){if(kZ)return v3;kZ=1,Object.defineProperty(v3,"__esModule",{value:!0}),v3.ActorRdfUpdateQuadsHypermedia=void 0;const a=RR(),t=Te(),u=bh();let n=class extends a.ActorRdfUpdateQuadsDestination{constructor(e){super(e),this.cache=this.cacheSize?new u.LRUCache({max:this.cacheSize}):void 0;const i=this.cache;i&&this.httpInvalidator.addInvalidateListener(({url:o})=>o?i.delete(o):i.clear())}async test(e){return(0,a.getContextDestinationUrl)((0,a.getContextDestination)(e.context))?(0,t.passTestVoid)():(0,t.failTest)(`Actor ${this.name} can only update quads against a single destination URL.`)}getDestination(e){const i=(0,a.getContextDestination)(e);let o=(0,a.getContextDestinationUrl)(i);if(this.cache&&this.cache.has(o))return this.cache.get(o);const c=(async()=>{var f;let s,l;try{const h=await this.mediatorDereferenceRdf.mediate({context:e,url:o,acceptErrors:!0});l=h.exists,o=h.url;const p=await this.mediatorMetadata.mediate({context:e,url:o,quads:h.data,triples:(f=h.metadata)==null?void 0:f.triples});s=(await this.mediatorMetadataExtract.mediate({context:e,url:o,metadata:p.metadata,headers:h.headers,requestTime:h.requestTime})).metadata}catch{s={},l=!1}const{destination:d}=await this.mediatorRdfUpdateHypermedia.mediate({context:e,url:o,metadata:s,exists:l,forceDestinationType:(0,a.getDataDestinationType)(i)});return d})();return this.cache&&this.cache.set(o,c),c}};return v3.ActorRdfUpdateQuadsHypermedia=n,v3}var XZ;function Eve(){return XZ||(XZ=1,function(a){var t=Cd&&Cd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Cd&&Cd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ave(),a)}(Cd)),Cd}var qd={},T3={},JZ;function Ive(){if(JZ)return T3;JZ=1,Object.defineProperty(T3,"__esModule",{value:!0}),T3.ActionObserverHttp=void 0;const a=Te();class t extends a.ActionObserver{constructor(n){super(n),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(n,r,e){this.observedActors.includes(n.name)&&this.requests++}}return T3.ActionObserverHttp=t,T3}var w3={},KZ;function xve(){if(KZ)return w3;KZ=1,Object.defineProperty(w3,"__esModule",{value:!0}),w3.ActorQueryResultSerializeSparqlJson=void 0;const a=Si(),t=Te(),u=gt(),n=Mt();let r=class cO extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(i){super(i)}static bindingToJsonBindings(i){if(i.termType==="Literal"){const o=i,c={value:o.value,type:"literal"},{language:s,datatype:l}=o;return s?c["xml:lang"]=s:l&&l.value!=="http://www.w3.org/2001/XMLSchema#string"&&(c.datatype=l.value),c}return i.termType==="BlankNode"?{value:i.value,type:"bnode"}:i.termType==="Quad"?{value:{subject:cO.bindingToJsonBindings(i.subject),predicate:cO.bindingToJsonBindings(i.predicate),object:cO.bindingToJsonBindings(i.object)},type:"triple"}:{value:i.value,type:"uri"}}async testHandleChecked(i,o){return["bindings","boolean"].includes(i.type)?(0,t.passTestVoid)():(0,t.failTest)("This actor can only handle bindings streams or booleans.")}async runHandle(i,o,c){const s=new n.Readable,l={};if(i.type==="bindings"){const d=await i.metadata();d.variables.length>0&&(l.vars=d.variables.map(f=>f.variable.value))}if(s.push(`{"head": ${JSON.stringify(l)},
`),i.type==="bindings"){const d=i.bindingsStream;s.push(`"results": { "bindings": [
`);let f=!0;function*h(p){yield p()}s.wrap((0,u.wrap)(d).map(p=>{const b=`${f?"":`,
`}${JSON.stringify(Object.fromEntries([...p].map(([_,y])=>[_.value,cO.bindingToJsonBindings(y)])))}`;return f=!1,b}).append((0,u.wrap)(h(()=>`
]}${this.emitMetadata?`,
"metadata": { "httpRequests": ${this.httpObserver.requests} }`:""}}
`))))}else s.wrap((0,u.wrap)(i.execute().then(d=>[`"boolean":${d}
}
`])));return{data:s}}};return w3.ActorQueryResultSerializeSparqlJson=r,w3}var WZ;function YZ(){return WZ||(WZ=1,function(a){var t=qd&&qd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=qd&&qd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ive(),a),u(xve(),a)}(qd)),qd}var Bd={},S3={},ZZ;function Nve(){if(ZZ)return S3;ZZ=1,Object.defineProperty(S3,"__esModule",{value:!0}),S3.ActionObserverHttp=void 0;const a=Te();let t=class extends a.ActionObserver{constructor(n){super(n),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(n,r,e){this.observedActors.includes(n.name)&&this.requests++}};return S3.ActionObserverHttp=t,S3}var O3={},eee;function Rve(){if(eee)return O3;eee=1,Object.defineProperty(O3,"__esModule",{value:!0}),O3.ActorQueryResultSerializeStats=void 0;const a=Si(),t=ze(),u=Te(),n=gt(),r=Mt();let e=class extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}async testHandleChecked(o,c){return["bindings","quads"].includes(o.type)?(0,u.passTestVoid)():(0,u.failTest)("This actor can only handle bindings streams or quad streams.")}pushHeader(o){const c=["Result","Delay (ms)","HTTP requests"].join(",");o.push(`${c}
`)}createStat(o,c){return`${[c,this.delay(o),this.httpObserver.requests].join(",")}
`}createSpecialLine(o,c){return`${[o,this.delay(c),this.httpObserver.requests].join(",")}
`}async runHandle(o,c,s){const l=new r.Readable,d=o.type==="bindings"?o.bindingsStream:o.quadStream,f=o.context.getSafe(t.KeysInitQuery.queryTimestampHighResolution);let h=1;function*p(_){yield _()}const b=(0,n.wrap)(d).map(()=>this.createStat(f,h++)).prepend([this.createSpecialLine("PLANNING",f)]).append((0,n.wrap)(p(()=>this.createSpecialLine("TOTAL",f))));return this.pushHeader(l),l.wrap(b),{data:l}}now(){return performance.now()}delay(o){return this.now()-o}};return O3.ActorQueryResultSerializeStats=e,O3}var tee;function ree(){return tee||(tee=1,function(a){var t=Bd&&Bd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Bd&&Bd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Nve(),a),u(Rve(),a)}(Bd)),Bd}var $d={},A3={},Vd={},E3={},nee;function Fve(){if(nee)return E3;nee=1,Object.defineProperty(E3,"__esModule",{value:!0}),E3.ActorQuerySourceIdentifyHypermedia=void 0;const a=Te();class t extends a.Actor{constructor(n,r){super(n),this.sourceType=r}async test(n){return n.forceSourceType&&this.sourceType!==n.forceSourceType?(0,a.failTest)(`Actor ${this.name} is not able to handle source type ${n.forceSourceType}.`):this.testMetadata(n)}}return E3.ActorQuerySourceIdentifyHypermedia=t,E3}var iee;function pF(){return iee||(iee=1,function(a){var t=Vd&&Vd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Vd&&Vd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Fve(),a)}(Vd)),Vd}var I3={},Ud={},x3={},aee;function Dve(){if(aee)return x3;aee=1,Object.defineProperty(x3,"__esModule",{value:!0}),x3.ActorQuerySourceIdentify=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return x3.ActorQuerySourceIdentify=t,x3}var Ar={},uee;function Pve(){if(uee)return Ar;uee=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.filterMatchingQuotedQuads=Ar.quadsOrderToBindingsOrder=Ar.quadsMetadataToBindingsMetadata=Ar.setMetadata=Ar.getDuplicateElementLinks=Ar.getVariables=Ar.isTermVariable=Ar.quadsToBindings=void 0;const a=Ia(),t=Er(),u=ir(),n=Fn(),r=fj();function e(h,p,b,_,y){const g=o(p),m=p.graph.termType==="Variable"&&!y,v=c(p),T=(0,n.reduceTermsNested)(p,(L,O,w)=>(O.termType==="Variable"&&(L[w.join("_")]=O.value),L),{});let S=h;m&&(S=S.filter(L=>L.graph.termType!=="DefaultGraph")),v&&(S=S.filter(L=>{for(const O in v){const w=O.split("_"),A=(0,n.getValueNestedPath)(L,w);for(const E of v[O])if(!A.equals((0,n.getValueNestedPath)(L,E)))return!1}return!0}));const x=new a.ClosableIterator(S.map(L=>_.bindings(Object.keys(T).map(O=>{const w=O.split("_"),A=T[O],E=(0,n.getValueNestedPath)(L,w);return[b.variable(A),E]}))),{onClose:()=>h.destroy()});return s(b,x,h,T,g,m||!!v),x}Ar.quadsToBindings=e;function i(h){return h.termType==="Variable"}Ar.isTermVariable=i;function o(h){return(0,n.uniqTerms)((0,n.getTermsNested)(h).filter(i))}Ar.getVariables=o;function c(h){const p={};let b=!1;if((0,n.forEachTermsNested)(h,(y,g)=>{if(y.termType==="Variable"){const m=(0,u.termToString)(y),v=(p[m]||(p[m]=[])).push(g);b=b||v>1}}),!b)return;const _={};for(const y in p){const g=p[y],m=g.slice(1);m.length>0&&(_[g[0].join("_")]=m)}return _}Ar.getDuplicateElementLinks=c;function s(h,p,b,_,y,g){const m=T=>{g&&(T.cardinality.type="estimate"),p.setProperty("metadata",l(h,(0,t.validateMetadataQuads)(T),_,y)),T.state&&T.state.addInvalidateListener(()=>{s(h,p,b,_,y,g)})},v=b.getProperty("metadata");v?m(v):b.getProperty("metadata",m)}Ar.setMetadata=s;function l(h,p,b,_){return{...p,order:p.order?d(h,p.order,b):void 0,availableOrders:p.availableOrders?p.availableOrders.map(y=>({cost:y.cost,terms:d(h,y.terms,b)})):void 0,variables:_.map(y=>({variable:y,canBeUndef:!1}))}}Ar.quadsMetadataToBindingsMetadata=l;function d(h,p,b){const _={};return p.map(y=>{const g=b[y.term];if(g&&!_[g])return _[g]=!0,{term:h.variable(g),direction:y.direction}}).filter(Boolean)}Ar.quadsOrderToBindingsOrder=d;function f(h,p){return(0,n.someTerms)(h,b=>b.termType==="Quad")&&(p=p.filter(b=>(0,r.matchPatternMappings)(b,h))),p}return Ar.filterMatchingQuotedQuads=f,Ar}var oee;function N3(){return oee||(oee=1,function(a){var t=Ud&&Ud.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ud&&Ud.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Dve(),a),u(Pve(),a)}(Ud)),Ud}var see;function cee(){if(see)return I3;see=1,Object.defineProperty(I3,"__esModule",{value:!0}),I3.QuerySourceQpf=void 0;const a=N3(),t=ze(),u=Er(),n=gt(),r=ir(),e=J1(),i=Fn();let o=class{constructor(l,d,f,h,p,b,_,y,g,m,v,T,S,x){if(this.referenceValue=v,this.mediatorMetadata=l,this.mediatorMetadataExtract=d,this.mediatorDereferenceRdf=f,this.dataFactory=h,this.algebraFactory=p,this.bindingsFactory=b,this.subjectUri=_,this.predicateUri=y,this.objectUri=g,this.graphUri=m,this.url=v,this.bindingsRestricted=S,this.cachedQuads={},this.searchForm=this.getSearchForm(T),this.defaultGraph=T.defaultGraph?this.dataFactory.namedNode(T.defaultGraph):void 0,x){let L=(0,n.wrap)(x);this.defaultGraph&&(L=this.reverseMapQuadsToDefaultGraph(L)),T={...T,state:new u.MetadataValidationState},L.setProperty("metadata",T),this.cacheQuads(L,this.dataFactory.variable(""),this.dataFactory.variable(""),this.dataFactory.variable(""),this.dataFactory.variable(""))}this.selectorShape=this.bindingsRestricted?{type:"operation",operation:{operationType:"pattern",pattern:this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")],filterBindings:!0}:{type:"operation",operation:{operationType:"pattern",pattern:this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")]}}async getSelectorShape(){return this.selectorShape}queryBindings(l,d,f){if(l.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${l.type}' to QuerySourceQpf`);const h=!!d.get(t.KeysQueryOperation.unionDefaultGraph);let p=this.match(l.subject,l.predicate,l.object,l.graph,h,d,f);return p=(0,a.filterMatchingQuotedQuads)(l,p),(0,a.quadsToBindings)(p,l,this.dataFactory,this.bindingsFactory,h)}getSearchForm(l){if(!l.searchForms||!l.searchForms.values)return;const{searchForms:d}=l;for(const f of d.values)if(this.graphUri&&this.subjectUri in f.mappings&&this.predicateUri in f.mappings&&this.objectUri in f.mappings&&this.graphUri in f.mappings&&Object.keys(f.mappings).length===4||this.subjectUri in f.mappings&&this.predicateUri in f.mappings&&this.objectUri in f.mappings&&Object.keys(f.mappings).length===3)return f}createFragmentUri(l,d,f,h,p){const b={},_=[{uri:this.subjectUri,term:d},{uri:this.predicateUri,term:f},{uri:this.objectUri,term:h},{uri:this.graphUri,term:p}];for(const y of _)y.uri&&(this.bindingsRestricted||y.term.termType!=="Variable"&&(y.term.termType!=="Quad"||(0,i.everyTermsNested)(y.term,g=>g.termType!=="Variable")))&&(b[y.uri]=(0,r.termToString)(y.term));return l.getUri(b)}match(l,d,f,h,p,b,_){let y=!1;if(h.termType==="DefaultGraph")if(this.defaultGraph)y=!0,h=this.defaultGraph;else if(Object.keys(this.searchForm.mappings).length===4&&!this.defaultGraph)if(p)h=this.dataFactory.variable("g");else{const T=new n.ArrayIterator([],{autoStart:!1});return T.setProperty("metadata",{state:new u.MetadataValidationState,requestTime:0,cardinality:{type:"exact",value:0},first:null,next:null,last:null}),T}else Object.keys(this.searchForm.mappings).length===3&&(h=this.dataFactory.variable("g"));if(!(_!=null&&_.filterBindings)){const T=this.getCachedQuads(l,d,f,h);if(T)return T}const g=this;let m;const v=async function(){var O;let T=g.createFragmentUri(g.searchForm,l,d,f,h);_!=null&&_.filterBindings&&(T=await g.getBindingsRestrictedLink(l,d,f,h,T,_.filterBindings));const S=await g.mediatorDereferenceRdf.mediate({context:b,url:T});T=S.url;const x=await g.mediatorMetadata.mediate({context:b,url:T,quads:S.data,triples:(O=S.metadata)==null?void 0:O.triples}),{metadata:L}=await g.mediatorMetadataExtract.mediate({context:b,url:T,metadata:x.metadata,requestTime:S.requestTime});return m.setProperty("metadata",{...L,state:new u.MetadataValidationState,subsetOf:g.url}),x.data}();return m=new n.TransformIterator(async()=>{const T=await v,S=this.dataFactory.defaultGraph();let x=(0,n.wrap)(T).transform({filter(L){return(0,i.matchPattern)(L,l,d,f,h)?!0:y&&(0,i.matchPattern)(L,l,d,f,S)}});return(y||h.termType==="Variable")&&(x=this.reverseMapQuadsToDefaultGraph(x)),x},{autoStart:!1}),_!=null&&_.filterBindings?m:(this.cacheQuads(m,l,d,f,h),this.getCachedQuads(l,d,f,h))}async getBindingsRestrictedLink(l,d,f,h,p,b){const _=[];for(const g of await b.bindings.toArray()){const m=["("];for(const v of b.metadata.variables){const T=g.get(v.variable);m.push(T?(0,e.termToString)(T):"UNDEF"),m.push(" ")}m.push(")"),_.push(m.join(""))}_.length===0&&_.push("(<ex:comunica:unknown>)");const y=encodeURIComponent(`(${b.metadata.variables.map(g=>`?${g.variable.value}`).join(" ")}) { ${_.join(" ")} }`);return`${p}&values=${y}`}reverseMapQuadsToDefaultGraph(l){const d=this.dataFactory.defaultGraph();return l.map(f=>(0,i.mapTerms)(f,(h,p)=>p==="graph"&&h.equals(this.defaultGraph)?d:h))}getPatternId(l,d,f,h){return JSON.stringify({s:l.termType==="Variable"?"":c(l),p:d.termType==="Variable"?"":c(d),o:f.termType==="Variable"?"":c(f),g:h.termType==="Variable"?"":c(h)})}cacheQuads(l,d,f,h,p){const b=this.getPatternId(d,f,h,p);this.cachedQuads[b]=l.clone()}getCachedQuads(l,d,f,h){const p=this.getPatternId(l,d,f,h),b=this.cachedQuads[p];if(b)return b.clone()}queryQuads(l,d){throw new Error("queryQuads is not implemented in QuerySourceQpf")}queryBoolean(l,d){throw new Error("queryBoolean is not implemented in QuerySourceQpf")}queryVoid(l,d){throw new Error("queryVoid is not implemented in QuerySourceQpf")}};I3.QuerySourceQpf=o;function c(s){return s.termType==="DefaultGraph"?"|":(0,r.termToString)(s)}return I3}var lee;function jve(){if(lee)return A3;lee=1,Object.defineProperty(A3,"__esModule",{value:!0}),A3.ActorQuerySourceIdentifyHypermediaQpf=void 0;const a=pF(),t=ze(),u=Te(),n=Xt(),r=ht(),e=cee();let i=class extends a.ActorQuerySourceIdentifyHypermedia{constructor(c){super(c,"qpf")}async test(c){return c.forceSourceType&&c.forceSourceType!=="qpf"&&c.forceSourceType!=="brtpf"?(0,u.failTest)(`Actor ${this.name} is not able to handle source type ${c.forceSourceType}.`):this.testMetadata(c)}async testMetadata(c){const{searchForm:s}=await this.createSource(c.url,c.metadata,c.context,c.forceSourceType==="brtpf");return s?c.handledDatasets&&c.handledDatasets[s.dataset]?(0,u.failTest)(`Actor ${this.name} can only be applied for the first page of a QPF dataset.`):(0,u.passTest)({filterFactor:1}):(0,u.failTest)("Illegal state: found no TPF/QPF search form anymore in metadata.")}async run(c){this.logInfo(c.context,`Identified as qpf source: ${c.url}`);const s=await this.createSource(c.url,c.metadata,c.context,c.forceSourceType==="brtpf",c.quads);return{source:s,dataset:s.searchForm.dataset}}async createSource(c,s,l,d,f){const h=l.getSafe(t.KeysInitQuery.dataFactory),p=new r.Factory(h);return new e.QuerySourceQpf(this.mediatorMetadata,this.mediatorMetadataExtract,this.mediatorDereferenceRdf,h,p,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,l,h),this.subjectUri,this.predicateUri,this.objectUri,this.graphUri,c,s,d,f)}};return A3.ActorQuerySourceIdentifyHypermediaQpf=i,A3}var dee;function Lve(){return dee||(dee=1,function(a){var t=$d&&$d.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=$d&&$d.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(jve(),a),u(cee(),a)}($d)),$d}var Qd={},R3={},F3={},fee;function hee(){if(fee)return F3;fee=1,Object.defineProperty(F3,"__esModule",{value:!0}),F3.QuerySourceSparql=void 0;const a=ze(),t=Te(),u=Er(),n=wt(),r=gt(),e=UW(),i=bh(),o=Fn(),c=ht();let s=class $n{constructor(d,f,h,p,b,_,y,g,m,v,T,S,x,L,O){this.referenceValue=d,this.url=d,this.context=f,this.mediatorHttp=h,this.bindMethod=p,this.dataFactory=b,this.algebraFactory=_,this.bindingsFactory=y,this.endpointFetcher=new e.SparqlEndpointFetcher({method:g?"GET":"POST",fetch:(w,A)=>this.mediatorHttp.mediate({input:w,init:A,context:this.lastSourceContext}),prefixVariableQuestionMark:!0,dataFactory:b}),this.cache=m>0?new i.LRUCache({max:m}):void 0,this.countTimeout=v,this.cardinalityCountQueries=T,this.cardinalityEstimateConstruction=S,this.defaultGraph=x,this.unionDefaultGraph=L??!1,this.datasets=O}async getSelectorShape(){return $n.SELECTOR_SHAPE}queryBindings(d,f,h){let p;h!=null&&h.joinBindings?p=$n.addBindingsToOperation(this.algebraFactory,this.bindMethod,d,h.joinBindings):p=Promise.resolve(d);const b=new r.TransformIterator(async()=>{const _=await p,y=c.Util.inScopeVariables(_),g=f.get(a.KeysInitQuery.queryString),m=f.getSafe(a.KeysInitQuery.queryFormat),v=!(h!=null&&h.joinBindings)&&g&&m.language==="sparql"?g:$n.operationToSelectQuery(this.algebraFactory,_,y),T=$n.getOperationUndefs(_);return this.queryBindingsRemote(this.url,v,y,f,T)},{autoStart:!1});return this.attachMetadata(b,f,p),b}queryQuads(d,f){this.lastSourceContext=this.context.merge(f);const h=this.endpointFetcher.fetchTriples(this.url,f.get(a.KeysInitQuery.queryString)??$n.operationToQuery(d));this.lastSourceContext=void 0;const p=(0,r.wrap)(h,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY});return this.attachMetadata(p,f,Promise.resolve(d.input)),p}queryBoolean(d,f){this.lastSourceContext=this.context.merge(f);const h=this.endpointFetcher.fetchAsk(this.url,f.get(a.KeysInitQuery.queryString)??$n.operationToQuery(d));return this.lastSourceContext=void 0,h}queryVoid(d,f){this.lastSourceContext=this.context.merge(f);const h=this.endpointFetcher.fetchUpdate(this.url,f.get(a.KeysInitQuery.queryString)??$n.operationToQuery(d));return this.lastSourceContext=void 0,h}attachMetadata(d,f,h){let p=[];new Promise(async(b,_)=>{var y,g;try{const m=await h,v=c.Util.inScopeVariables(m),T=this.operationToNormalizedCountQuery(m),S=$n.getOperationUndefs(m);p=v.map(A=>({variable:A,canBeUndef:S.some(E=>E.equals(A))}));const x=(y=this.cache)==null?void 0:y.get(T);if(x)return b(x);if(this.cardinalityEstimateConstruction){const A=await this.estimateOperationCardinality(m);if(Number.isFinite(A.value))return(g=this.cache)==null||g.set(T,A),b(A)}if(!this.cardinalityCountQueries)return b({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url});const L=setTimeout(()=>b({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url}),this.countTimeout),O=this.dataFactory.variable("count"),w=await this.queryBindingsRemote(this.url,T,[O],f,[]);w.on("data",A=>{var V;clearTimeout(L);const E=A.get(O),R={type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url};if(E){const $=Number.parseInt(E.value,10);Number.isNaN($)||(R.type="exact",R.value=$,(V=this.cache)==null||V.set(T,R))}return b(R)}),w.on("error",()=>{clearTimeout(L),b({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url})}),w.on("end",()=>{clearTimeout(L),b({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url})})}catch(m){return _(m)}}).then(b=>{d.setProperty("metadata",{state:new u.MetadataValidationState,cardinality:b,variables:p})}).catch(()=>d.setProperty("metadata",{state:new u.MetadataValidationState,cardinality:{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url},variables:p}))}operationToNormalizedCountQuery(d){const f=d.type===c.Algebra.types.PATTERN?this.algebraFactory.createPattern(d.subject.termType==="Variable"?this.dataFactory.variable("s"):d.subject,d.predicate.termType==="Variable"?this.dataFactory.variable("p"):d.predicate,d.object.termType==="Variable"?this.dataFactory.variable("o"):d.object):d;return $n.operationToCountQuery(this.dataFactory,this.algebraFactory,f)}async estimateOperationCardinality(d){const f={getCardinality:h=>{var _;const p=this.operationToNormalizedCountQuery(h),b=(_=this.cache)==null?void 0:_.get(p);if(b)return b;if(this.datasets){const y=this.datasets.filter(m=>this.unionDefaultGraph||this.defaultGraph&&m.uri.endsWith(this.defaultGraph)).map(m=>(0,n.estimateCardinality)(h,m));return{type:y.some(m=>m.type==="estimate")?"estimate":"exact",value:y.length>0?y.reduce((m,v)=>m+v.value,0):0,dataset:this.url}}},source:this.url,uri:this.url};return(0,n.estimateCardinality)(d,f)}static async addBindingsToOperation(d,f,h,p){const b=await p.bindings.toArray();switch(f){case"values":return d.createJoin([d.createValues(p.metadata.variables.map(_=>_.variable),b.map(_=>Object.fromEntries([..._].map(([y,g])=>[`?${y.value}`,g])))),h],!1);case"union":throw new Error('Not implemented yet: "union" case');case"filter":throw new Error('Not implemented yet: "filter" case')}}static operationToSelectQuery(d,f,h){return $n.operationToQuery(d.createProject(f,h))}static operationToCountQuery(d,f,h){return $n.operationToQuery(f.createProject(f.createExtend(f.createGroup(h,[],[f.createBoundAggregate(d.variable("var0"),"count",f.createWildcardExpression(),!1)]),d.variable("count"),f.createTermExpression(d.variable("var0"))),[d.variable("count")]))}static operationToQuery(d){return(0,c.toSparql)(d,{sparqlStar:!0})}static getOperationUndefs(d){const f=[];return c.Util.recurseOperation(d,{leftjoin(h){const p=c.Util.inScopeVariables(h.input[0]),b=c.Util.inScopeVariables(h.input[1]);for(const _ of b)p.some(y=>y.equals(_))||f.push(_);return!1},values(h){for(const p of h.variables)h.bindings.some(b=>!(`?${p.value}`in b))&&f.push(p);return!1},union(h){const p=h.input.map(c.Util.inScopeVariables);for(const b of(0,o.uniqTerms)(p.flat()))p.every(_=>_.some(y=>y.equals(b)))||f.push(b);return!0}}),(0,o.uniqTerms)(f)}async queryBindingsRemote(d,f,h,p,b){const _=new Set;for(const g of b)_.add(g.value);this.lastSourceContext=this.context.merge(p);const y=await this.endpointFetcher.fetchBindings(d,f);return this.lastSourceContext=void 0,(0,r.wrap)(y,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY}).map(g=>this.bindingsFactory.bindings(h.map(m=>{var T;const v=g[`?${m.value}`];return!_.has(m.value)&&!v&&((T=t.Actor.getContextLogger(this.context))==null||T.warn(`The endpoint ${d} failed to provide a binding for ${m.value}.`)),[m,v]}).filter(([m,v])=>!!v)))}toString(){return`QuerySourceSparql(${this.url})`}};return F3.QuerySourceSparql=s,s.SELECTOR_SHAPE={type:"disjunction",children:[{type:"operation",operation:{operationType:"wildcard"},joinBindings:!0}]},F3}var pee;function Mve(){if(pee)return R3;pee=1,Object.defineProperty(R3,"__esModule",{value:!0}),R3.ActorQuerySourceIdentifyHypermediaSparql=void 0;const a=pF(),t=ze(),u=Te(),n=Xt(),r=ht(),e=hee();let i=class extends a.ActorQuerySourceIdentifyHypermedia{constructor(c){super(c,"sparql")}async testMetadata(c){return!c.forceSourceType&&!this.forceSourceType&&!c.metadata.sparqlService&&!(this.checkUrlSuffix&&(c.url.endsWith("/sparql")||c.url.endsWith("/sparql/")))?(0,u.failTest)(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql.`):(0,u.passTest)({filterFactor:1})}async run(c){var h;this.logInfo(c.context,`Identified ${c.url} as sparql source with service URL: ${c.metadata.sparqlService||c.url}`);const s=c.context.getSafe(t.KeysInitQuery.dataFactory),l=new r.Factory(s),d=((h=c.context.get(t.KeysQueryOperation.querySources))==null?void 0:h.length)===1;return{source:new e.QuerySourceSparql(c.forceSourceType??this.forceSourceType?c.url:c.metadata.sparqlService||c.url,c.context,this.mediatorHttp,this.bindMethod,s,l,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s),this.forceHttpGet,this.cacheSize,this.countTimeout,this.cardinalityCountQueries&&!d,this.cardinalityEstimateConstruction,c.metadata.defaultGraph,c.metadata.unionDefaultGraph,c.metadata.datasets)}}};return R3.ActorQuerySourceIdentifyHypermediaSparql=i,R3}var yee;function Cve(){return yee||(yee=1,function(a){var t=Qd&&Qd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Qd&&Qd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Mve(),a),u(hee(),a)}(Qd)),Qd}var Hd={},D3={},Gd={},P3={},j3={},bee;function mee(){if(bee)return j3;bee=1,Object.defineProperty(j3,"__esModule",{value:!0}),j3.QuerySourceRdfJs=void 0;const a=N3(),t=ze(),u=Er(),n=gt(),r=Fn(),e=ht();let i=class fn{constructor(c,s,l){this.source=c,this.referenceValue=c,this.dataFactory=s,this.bindingsFactory=l;const d=new e.Factory(this.dataFactory);this.selectorShape={type:"operation",operation:{operationType:"pattern",pattern:d.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o")]},this.dummyDefaultGraph=this.dataFactory.variable("__comunica:defaultGraph")}static nullifyVariables(c,s){return!c||c.termType==="Variable"||!s&&c.termType==="Quad"&&(0,r.someTermsNested)(c,l=>l.termType==="Variable")?void 0:c}static hasDuplicateVariables(c){const s=(0,r.filterTermsNested)(c,l=>l.termType==="Variable");return s.length>1&&(0,r.uniqTerms)(s).length<s.length}async getSelectorShape(){return this.selectorShape}queryBindings(c,s){var p;if(c.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${c.type}' to QuerySourceRdfJs`);const l=!!s.get(t.KeysQueryOperation.unionDefaultGraph);if(c.graph.termType==="DefaultGraph"&&l&&(c.graph=this.dummyDefaultGraph),this.source.matchBindings){const b=this.source.matchBindings(this.bindingsFactory,c.subject,c.predicate,c.object,c.graph);let _=b instanceof n.AsyncIterator?b:(0,n.wrap)(b,{autoStart:!1}),y=!1;if(c.graph.termType==="Variable"&&!l){y=!0;const g=c.graph;_=_.filter(m=>m.get(g).termType!=="DefaultGraph")}if(c.graph.equals(this.dummyDefaultGraph)&&(_=_.map(g=>g.delete(this.dummyDefaultGraph)),c.graph=this.dataFactory.defaultGraph()),!_.getProperty("metadata")){const g=(0,a.getVariables)(c).map(m=>({variable:m,canBeUndef:!1}));this.setMetadata(_,c,s,y,{variables:g}).catch(m=>_.destroy(m))}return _}const d=!!((p=this.source.features)!=null&&p.quotedTripleFiltering),f=this.source.match(fn.nullifyVariables(c.subject,d),fn.nullifyVariables(c.predicate,d),fn.nullifyVariables(c.object,d),fn.nullifyVariables(c.graph,d));let h=f instanceof n.AsyncIterator?f:(0,n.wrap)(f,{autoStart:!1});return d||(h=(0,a.filterMatchingQuotedQuads)(c,h)),h.getProperty("metadata")||this.setMetadata(h,c,s).catch(b=>h.destroy(b)),c.graph.equals(this.dummyDefaultGraph)&&(c.graph=this.dataFactory.defaultGraph()),(0,a.quadsToBindings)(h,c,this.dataFactory,this.bindingsFactory,!!s.get(t.KeysQueryOperation.unionDefaultGraph))}async setMetadata(c,s,l,d=!1,f={}){var y;const h=!!((y=this.source.features)!=null&&y.quotedTripleFiltering),p=!!l.get(t.KeysQueryOperation.unionDefaultGraph);s.graph.termType==="DefaultGraph"&&p&&(s.graph=this.dummyDefaultGraph);let b;if(this.source.countQuads)b=await this.source.countQuads(fn.nullifyVariables(s.subject,h),fn.nullifyVariables(s.predicate,h),fn.nullifyVariables(s.object,h),fn.nullifyVariables(s.graph,h));else{let g=0;b=await new Promise((m,v)=>{const T=this.source.match(fn.nullifyVariables(s.subject,h),fn.nullifyVariables(s.predicate,h),fn.nullifyVariables(s.object,h),fn.nullifyVariables(s.graph,h));T.on("error",v),T.on("end",()=>m(g)),T.on("data",()=>g++)})}const _=!h&&(0,r.someTerms)(s,g=>g.termType==="Quad")||fn.hasDuplicateVariables(s);c.setProperty("metadata",{state:new u.MetadataValidationState,cardinality:{type:_||d?"estimate":"exact",value:b},requestTime:0,...f})}queryQuads(c,s){throw new Error("queryQuads is not implemented in QuerySourceRdfJs")}queryBoolean(c,s){throw new Error("queryBoolean is not implemented in QuerySourceRdfJs")}queryVoid(c,s){throw new Error("queryVoid is not implemented in QuerySourceRdfJs")}toString(){return`QuerySourceRdfJs(${this.source.constructor.name})`}};return j3.QuerySourceRdfJs=i,j3}var _ee;function qve(){if(_ee)return P3;_ee=1,Object.defineProperty(P3,"__esModule",{value:!0}),P3.ActorQuerySourceIdentifyRdfJs=void 0;const a=N3(),t=ze(),u=Te(),n=Xt(),r=mee();let e=class extends a.ActorQuerySourceIdentify{constructor(o){super(o)}async test(o){const c=o.querySourceUnidentified;return c.type!==void 0&&c.type!=="rdfjs"?(0,u.failTest)(`${this.name} requires a single query source with rdfjs type to be present in the context.`):typeof c.value=="string"||!("match"in c.value)?(0,u.failTest)(`${this.name} received an invalid rdfjs query source.`):(0,u.passTestVoid)()}async run(o){const c=o.context.getSafe(t.KeysInitQuery.dataFactory);return{querySource:{source:new r.QuerySourceRdfJs(o.querySourceUnidentified.value,c,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,o.context,c)),context:o.querySourceUnidentified.context??new u.ActionContext}}}};return P3.ActorQuerySourceIdentifyRdfJs=e,P3}var yF={},gee;function Bve(){return gee||(gee=1,Object.defineProperty(yF,"__esModule",{value:!0})),yF}var vee;function bF(){return vee||(vee=1,function(a){var t=Gd&&Gd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Gd&&Gd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(qve(),a),u(Bve(),a),u(mee(),a)}(Gd)),Gd}var XA={},zd={},L3={},M3={},kd={},Ct={},Tee;function $ve(){if(Tee)return Ct;Tee=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.TRIPLE_TERM_NAMES=Ct.QUAD_TERM_NAMES=void 0,Ct.getTerms=u,Ct.getTermsNested=n,Ct.getNamedTerms=r,Ct.collectNamedTerms=e,Ct.forEachTerms=i,Ct.forEachTermsNested=o,Ct.filterTerms=c,Ct.filterTermsNested=s,Ct.filterQuadTermNames=l,Ct.filterQuadTermNamesNested=d,Ct.mapTerms=f,Ct.mapTermsNested=h,Ct.reduceTerms=p,Ct.reduceTermsNested=b,Ct.everyTerms=_,Ct.everyTermsNested=y,Ct.someTerms=g,Ct.someTermsNested=m,Ct.getValueNestedPath=v,Ct.matchTerm=T,Ct.matchPattern=S,Ct.matchPatternComplete=x,Ct.matchPatternMappings=L;const a=ln(),t=new a.DataFactory;Ct.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Ct.TRIPLE_TERM_NAMES=["subject","predicate","object"];function u(O,w){return w&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function n(O,w){const A=[];for(const E of u(O,w))E.termType==="Quad"?n(E,w).forEach(R=>A.push(R)):A.push(E);return A}function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function e(O,w,A){const E={};return O.forEach(R=>E[R.key]=R.value),w&&(E.subject=E.subject||w("subject"),E.predicate=E.predicate||w("predicate"),E.object=E.object||w("object"),E.graph=E.graph||w("graph")),(A||t).quad(E.subject,E.predicate,E.object,E.graph)}function i(O,w){w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph")}function o(O,w,A=[]){O.subject.termType==="Quad"?o(O.subject,w,[...A,"subject"]):w(O.subject,[...A,"subject"]),O.predicate.termType==="Quad"?o(O.predicate,w,[...A,"predicate"]):w(O.predicate,[...A,"predicate"]),O.object.termType==="Quad"?o(O.object,w,[...A,"object"]):w(O.object,[...A,"object"]),O.graph.termType==="Quad"?o(O.graph,w,[...A,"graph"]):w(O.graph,[...A,"graph"])}function c(O,w){const A=[];return w(O.subject,"subject")&&A.push(O.subject),w(O.predicate,"predicate")&&A.push(O.predicate),w(O.object,"object")&&A.push(O.object),w(O.graph,"graph")&&A.push(O.graph),A}function s(O,w,A=[]){let E=[];return O.subject.termType==="Quad"?E=[...E,...s(O.subject,w,[...A,"subject"])]:w(O.subject,[...A,"subject"])&&E.push(O.subject),O.predicate.termType==="Quad"?E=[...E,...s(O.predicate,w,[...A,"predicate"])]:w(O.predicate,[...A,"predicate"])&&E.push(O.predicate),O.object.termType==="Quad"?E=[...E,...s(O.object,w,[...A,"object"])]:w(O.object,[...A,"object"])&&E.push(O.object),O.graph.termType==="Quad"?E=[...E,...s(O.graph,w,[...A,"graph"])]:w(O.graph,[...A,"graph"])&&E.push(O.graph),E}function l(O,w){const A=[];return w(O.subject,"subject")&&A.push("subject"),w(O.predicate,"predicate")&&A.push("predicate"),w(O.object,"object")&&A.push("object"),w(O.graph,"graph")&&A.push("graph"),A}function d(O,w,A=[]){let E=[];const R=[...A,"subject"];O.subject.termType==="Quad"?E=[...E,...d(O.subject,w,R)]:w(O.subject,R)&&E.push(R);const V=[...A,"predicate"];O.predicate.termType==="Quad"?E=[...E,...d(O.predicate,w,V)]:w(O.predicate,V)&&E.push(V);const $=[...A,"object"];O.object.termType==="Quad"?E=[...E,...d(O.object,w,$)]:w(O.object,$)&&E.push($);const Q=[...A,"graph"];return O.graph.termType==="Quad"?E=[...E,...d(O.graph,w,Q)]:w(O.graph,Q)&&E.push(Q),E}function f(O,w,A){return(A||t).quad(w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph"))}function h(O,w,A,E=[]){return(A||t).quad(O.subject.termType==="Quad"?h(O.subject,w,A,[...E,"subject"]):w(O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,w,A,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?h(O.object,w,A,[...E,"object"]):w(O.object,[...E,"object"]),O.graph.termType==="Quad"?h(O.graph,w,A,[...E,"graph"]):w(O.graph,[...E,"graph"]))}function p(O,w,A){let E=A;return E=w(E,O.subject,"subject"),E=w(E,O.predicate,"predicate"),E=w(E,O.object,"object"),w(E,O.graph,"graph")}function b(O,w,A,E=[]){let R=A;return O.subject.termType==="Quad"?R=b(O.subject,w,R,[...E,"subject"]):R=w(R,O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?R=b(O.predicate,w,R,[...E,"predicate"]):R=w(R,O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?R=b(O.object,w,R,[...E,"object"]):R=w(R,O.object,[...E,"object"]),O.graph.termType==="Quad"?R=b(O.graph,w,R,[...E,"graph"]):R=w(R,O.graph,[...E,"graph"]),R}function _(O,w){return w(O.subject,"subject")&&w(O.predicate,"predicate")&&w(O.object,"object")&&w(O.graph,"graph")}function y(O,w,A=[]){return(O.subject.termType==="Quad"?y(O.subject,w,[...A,"subject"]):w(O.subject,[...A,"subject"]))&&(O.predicate.termType==="Quad"?y(O.predicate,w,[...A,"predicate"]):w(O.predicate,[...A,"predicate"]))&&(O.object.termType==="Quad"?y(O.object,w,[...A,"object"]):w(O.object,[...A,"object"]))&&(O.graph.termType==="Quad"?y(O.graph,w,[...A,"graph"]):w(O.graph,[...A,"graph"]))}function g(O,w){return w(O.subject,"subject")||w(O.predicate,"predicate")||w(O.object,"object")||w(O.graph,"graph")}function m(O,w,A=[]){return(O.subject.termType==="Quad"?m(O.subject,w,[...A,"subject"]):w(O.subject,[...A,"subject"]))||(O.predicate.termType==="Quad"?m(O.predicate,w,[...A,"predicate"]):w(O.predicate,[...A,"predicate"]))||(O.object.termType==="Quad"?m(O.object,w,[...A,"object"]):w(O.object,[...A,"object"]))||(O.graph.termType==="Quad"?m(O.graph,w,[...A,"graph"]):w(O.graph,[...A,"graph"]))}function v(O,w){if(w.length===0)return O;if(O.termType==="Quad")return v(O[w[0]],w.slice(1));throw new Error(`Tried to get ${w[0]} from term of type ${O.termType}`)}function T(O,w){return!w||w.termType==="Variable"||w.termType==="Quad"&&O.termType==="Quad"&&x(O,w)||w.equals(O)}function S(O,w,A,E,R){return T(O.subject,w)&&T(O.predicate,A)&&T(O.object,E)&&T(O.graph,R)}function x(O,w){return S(O,w.subject,w.predicate,w.object,w.graph)}function L(O,w,A={}){const E={};function R(V,$){return _(V,(Q,ne)=>{var ie,fe;const J=$[ne];switch(Q.termType){case"Variable":return A.skipVarMapping&&J.termType==="Variable"||((fe=(ie=E[Q.value])===null||ie===void 0?void 0:ie.equals(J))!==null&&fe!==void 0?fe:(E[Q.value]=J,!0));case"Quad":return J.termType==="Quad"&&R(Q,J);default:return Q.equals(J)}})}return R(w,O)&&(A.returnMappings?E:!0)}return Ct}var gn={},mF={},ai={},wee;function Vve(){if(wee)return ai;wee=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.termToString=u,ai.getLiteralValue=n,ai.getLiteralType=r,ai.getLiteralLanguage=e,ai.getLiteralDirection=i,ai.stringToTerm=o,ai.quadToStringQuad=c,ai.stringQuadToQuad=s;const a=ln(),t=new a.DataFactory;function u(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const d=l;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${u(l.subject)} ${u(l.predicate)} ${u(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+u(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function n(l){const d=/^"([^]*)"/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]}function r(l){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function i(l){const d=l.indexOf("--",l.lastIndexOf('"'));if(d>=0){const f=l.slice(d+2,l.length);if(f==="ltr"||f==="rtl")return f;throw new Error(l+" is not a literal with a valid direction")}return""}function o(l,d){if(d=d||t,!l||!l.length)return d.defaultGraph();switch(l[0]){case"_":return d.blankNode(l.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(l.substr(1));case'"':const f=e(l),h=i(l),p=d.namedNode(r(l));return d.literal(n(l),f?{language:f,direction:h}:p);case"<":default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const b=l.slice(2,-2).trim();let _=[],y=0,g=0,m=!1;for(let v=0;v<b.length;v++){const T=b[v];if(T==="<"&&y++,T===">"){if(y===0)throw new Error("Found closing tag without opening tag in "+l);y--}if(T==='"'){let S=!1,x=v;for(;x-- >0&&b[x]==="\\";)S=!S;S||(m=!m)}if(T===" "&&!m&&y===0){for(_.push(b.slice(g,v));b[v+1]===" ";)v+=1;g=v+1}}if(y!==0)throw new Error("Found opening tag without closing tag in "+l);if(_.push(b.slice(g,b.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+l);return _=_.map(v=>v.startsWith("<")&&!v.includes(" ")?v.slice(1,-1):v),d.quad(o(_[0]),o(_[1]),o(_[2]),_[3]?o(_[3]):void 0)}return d.namedNode(l)}}function c(l){return{subject:u(l.subject),predicate:u(l.predicate),object:u(l.object),graph:u(l.graph)}}function s(l,d){return d=d||t,d.quad(o(l.subject,d),o(l.predicate,d),o(l.object,d),o(l.graph,d))}return ai}var See;function C3(){return See||(See=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralDirection=a.getLiteralLanguage=void 0;const t=Vve();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralDirection",{enumerable:!0,get:function(){return t.getLiteralDirection}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return t.termToString}})}(mF)),mF}var Oee;function Uve(){if(Oee)return gn;Oee=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.TERM_TYPES=void 0,gn.uniqTerms=t,gn.getTermsOfType=u,gn.getNamedNodes=n,gn.getBlankNodes=r,gn.getLiterals=e,gn.getVariables=i,gn.getDefaultGraphs=o,gn.getQuads=c;const a=C3();gn.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function t(s){const l={};return s.filter(d=>{const f=(0,a.termToString)(d);return!(f in l)&&(l[f]=!0)})}function u(s,l){return s.filter(d=>d.termType===l)}function n(s){return u(s,"NamedNode")}function r(s){return u(s,"BlankNode")}function e(s){return u(s,"Literal")}function i(s){return u(s,"Variable")}function o(s){return u(s,"DefaultGraph")}function c(s){return u(s,"Quad")}return gn}var Aee;function JA(){return Aee||(Aee=1,function(a){var t=kd&&kd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=kd&&kd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u($ve(),a),u(Uve(),a)}(kd)),kd}var q3={},Eee;function Iee(){if(Eee)return q3;Eee=1,Object.defineProperty(q3,"__esModule",{value:!0}),q3.TermDictionaryNumberRecordFullTerms=void 0;const a=ln(),t=C3();let u=class{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const e=(0,t.termToString)(r);let i=this.dictionary[e];return i===void 0&&(i=this.lastId++,this.dictionary[e]=i,this.reverseDictionary[i]=r),i}encodeOptional(r){const e=(0,t.termToString)(r);return this.dictionary[e]}decode(r){const e=this.reverseDictionary[r];if(e===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return e}*encodings(){for(const r of Object.keys(this.reverseDictionary))yield Number.parseInt(r,10)}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}};return q3.TermDictionaryNumberRecordFullTerms=u,q3}var B3={},$3={},_F={},xee;function Ii(){return xee||(xee=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.QUAD_TERM_NAMES_INVERSE=void 0,a.getBestIndex=u,a.getComponentOrderScore=n,a.orderQuadComponents=r,a.encodeOptionalTerms=e,a.quadToPattern=i,a.quadHasVariables=o,a.arePatternsQuoted=c;const t=JA();a.QUAD_TERM_NAMES_INVERSE=Object.fromEntries(t.QUAD_TERM_NAMES.map((s,l)=>[s,l]));function u(s,l){if(s.length===1||l.every(h=>h!==void 0))return 0;const d=[];for(let h=0;h<t.QUAD_TERM_NAMES.length;h++)l[h]&&d.push(t.QUAD_TERM_NAMES[h]);return s.map((h,p)=>({score:n(h,d),index:p})).sort((h,p)=>p.score-h.score)[0].index}function n(s,l){return s.map((d,f)=>l.includes(d)?s.length-f:0).reduce((d,f)=>d+f,0)}function r(s,l){return s.map(d=>{const f=a.QUAD_TERM_NAMES_INVERSE[d];return l[f]})}function e(s,l){const d=s.map(f=>{if(f){if(f.termType==="Quad"&&o(f))return;const h=l.encodeOptional(f);return h===void 0?"none":h}return f});if(!d.includes("none"))return d}function i(s,l,d,f,h){let p=!1;return[[s||void 0,l||void 0,d||void 0,f||void 0].map(_=>{if(_){if(_.termType==="Variable")return;if(_.termType==="Quad"){if(h)return _;p=!0;return}}return _}),p]}function o(s){for(const l of t.QUAD_TERM_NAMES){const d=s[l];if(d.termType==="Variable"||d.termType==="Quad"&&o(d))return!0}return!1}function c(s){return s.map(l=>(l==null?void 0:l.termType)==="Quad"&&o(l))}}(_F)),_F}var Nee;function gF(){if(Nee)return $3;Nee=1,Object.defineProperty($3,"__esModule",{value:!0}),$3.RdfStoreIndexNestedMap=void 0;const a=Ii();let t=class{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedMap=new Map}set(n,r){const e=this.nestedMap;let i=e.get(n[0]);i||(i=new Map,e.set(n[0],i));let o=i.get(n[1]);o||(o=new Map,i.set(n[1],o));let c=o.get(n[2]);c||(c=new Map,o.set(n[2],c));const s=c.has(n[3]);return s||c.set(n[3],r),!s}remove(n){const r=this.nestedMap,e=r.get(n[0]);if(!e)return!1;const i=e.get(n[1]);if(!i)return!1;const o=i.get(n[2]);if(!o)return!1;const c=o.delete(n[3]);return c&&o.size===0&&(i.delete(n[2]),i.size===0&&(e.delete(n[1]),e.size===0&&r.delete(n[0]))),c}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){const r=this.nestedMap.get(n[0]);if(!r)return;const e=r.get(n[1]);if(!e)return;const i=e.get(n[2]);if(i)return i.get(n[3])}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!r)return;const[e,i,o,c]=r,[s,l,d,f]=n;let h,p,b,_,y,g,m;const v=this.nestedMap,T=e!==void 0?v.has(e)?[e]:[]:v.keys();for(const S of T){y=v.get(S),h=s||this.dictionary.decode(S);const x=i!==void 0?y.has(i)?[i]:[]:y.keys();for(const L of x){g=y.get(L),p=l||this.dictionary.decode(L);const O=o!==void 0?g.has(o)?[o]:[]:g.keys();for(const w of O){m=g.get(w),b=d||this.dictionary.decode(w);const A=c!==void 0?m.has(c)?[c]:[]:m.keys();for(const E of A)_=f||this.dictionary.decode(E),yield[h,p,b,_]}}}}*findEncoded(n,r){const[e,i,o,c]=n;let s,l,d;const f=this.nestedMap,h=e!==void 0?f.has(e)?[e]:[]:f.keys();for(const p of h){s=f.get(p);const b=i!==void 0?s.has(i)?[i]:[]:s.keys();for(const _ of b){l=s.get(_);const y=o!==void 0?l.has(o)?[o]:[]:l.keys();for(const g of y){d=l.get(g);const m=c!==void 0?d.has(c)?[c]:[]:d.keys();for(const v of m)yield[p,_,g,v]}}}}count(n){let r=0;const e=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!e)return 0;const i=e[0],o=e[1],c=e[2],s=e[3];let l,d,f;const h=this.nestedMap,p=i!==void 0?h.has(i)?[i]:[]:h.keys();for(const b of p){l=h.get(b);const _=o!==void 0?l.has(o)?[o]:[]:l.keys();for(const y of _){d=l.get(y);const g=c!==void 0?d.has(c)?[c]:[]:d.keys();for(const m of g)f=d.get(m),s!==void 0?f.has(s)&&r++:r+=f.size}}return r}};return $3.RdfStoreIndexNestedMap=t,$3}var Ree;function Fee(){if(Ree)return B3;Ree=1,Object.defineProperty(B3,"__esModule",{value:!0}),B3.TermDictionaryQuotedIndexed=void 0;const a=ln(),t=gF(),u=Ii();let n=class oa{constructor(e,i=new a.DataFactory){this.quotedTriplesDictionary=[],this.features={quotedTriples:!0},this.plainTermDictionary=e;const o={indexCombinations:[],indexConstructor:void 0,dictionary:this,dataFactory:i};this.quotedTriplesReverseDictionaries=[new t.RdfStoreIndexNestedMap(o),new t.RdfStoreIndexNestedMap(o),new t.RdfStoreIndexNestedMap(o)],this.dataFactory=i}encode(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!1):this.plainTermDictionary.encode(e)}encodeQuotedTriple(e,i){if(e.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const o=(0,u.encodeOptionalTerms)([e.subject,e.predicate,e.object,e.graph],this),c=o&&o.every(f=>f!==void 0)?this.quotedTriplesReverseDictionaries[0].getEncoded(o):void 0;if(c!==void 0||i)return c===void 0?void 0:oa.BITMASK|c;const s=[this.encode(e.subject),this.encode(e.predicate),this.encode(e.object)],l=this.quotedTriplesDictionary.length+1;this.quotedTriplesDictionary.push(s);const d=this.encode(this.dataFactory.defaultGraph());return this.quotedTriplesReverseDictionaries[0].set([s[0],s[1],s[2],d],l),this.quotedTriplesReverseDictionaries[1].set([s[1],s[2],s[0],d],l),this.quotedTriplesReverseDictionaries[2].set([s[2],s[0],s[1],d],l),oa.BITMASK|l}encodeOptional(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!0):this.plainTermDictionary.encodeOptional(e)}decode(e){if(oa.BITMASK&e){const i=(~oa.BITMASK&e)-1;if(i>=this.quotedTriplesDictionary.length)throw new Error(`The value ${e} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[i];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.keys())yield oa.BITMASK|1+e}*findQuotedTriples(e){for(const i of this.findQuotedTriplesEncoded(e))yield this.decode(i)}*findQuotedTriplesEncoded(e){const[i,o]=(0,u.quadToPattern)(e.subject,e.predicate,e.object,e.graph,!0);for(const c of this.patternToIterable(i[0]))for(const s of this.patternToIterable(i[1]))for(const l of this.patternToIterable(i[2]))for(const d of this.patternToIterable(i[3]))if(c&&s||!s&&!l){const f=[c,s,l,d];for(const h of this.quotedTriplesReverseDictionaries[0].findEncoded(f,i))yield oa.BITMASK|this.quotedTriplesReverseDictionaries[0].getEncoded(h)}else if(!c&&s){const f=[s,l,c,d];for(const h of this.quotedTriplesReverseDictionaries[1].findEncoded(f,i))yield oa.BITMASK|this.quotedTriplesReverseDictionaries[1].getEncoded(h)}else{const f=[l,c,s,d];for(const h of this.quotedTriplesReverseDictionaries[2].findEncoded(f,i))yield oa.BITMASK|this.quotedTriplesReverseDictionaries[2].getEncoded(h)}}*patternToIterable(e){if((e==null?void 0:e.termType)==="Quad"){yield*this.findQuotedTriplesEncoded(e);return}if(e===void 0){yield void 0;return}const i=this.encodeOptional(e);i!==void 0&&(yield i)}};return B3.TermDictionaryQuotedIndexed=n,n.BITMASK=1<<31,B3}var V3={},Dee;function Pee(){if(Dee)return V3;Dee=1,Object.defineProperty(V3,"__esModule",{value:!0}),V3.RdfStoreIndexNestedMapQuoted=void 0;const a=Ii(),t=gF();let u=class extends t.RdfStoreIndexNestedMap{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(r,e){for(const i of this.dictionary.findQuotedTriplesEncoded(e))r.has(i)&&(yield i)}*find(r){const e=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!e)return;const[i,o,c,s]=e,[l,d,f,h]=r,[p,b,_,y]=(0,a.arePatternsQuoted)(r);let g,m,v,T,S,x,L;const O=this.nestedMap,w=l!==void 0?p?this.getQuotedPatternKeys(O,l):O.has(i)?[i]:[]:O.keys();for(const A of w){S=O.get(A),g=!p&&l?l:this.dictionary.decode(A);const E=d!==void 0?b?this.getQuotedPatternKeys(S,d):S.has(o)?[o]:[]:S.keys();for(const R of E){x=S.get(R),m=!b&&d?d:this.dictionary.decode(R);const V=f!==void 0?_?this.getQuotedPatternKeys(x,f):x.has(c)?[c]:[]:x.keys();for(const $ of V){L=x.get($),v=!_&&f?f:this.dictionary.decode($);const Q=h!==void 0?y?this.getQuotedPatternKeys(L,h):L.has(s)?[s]:[]:L.keys();for(const ne of Q)T=!y&&h?h:this.dictionary.decode(ne),yield[g,m,v,T]}}}}*findEncoded(r,e){const[i,o,c,s]=r,[l,d,f,h]=e,[p,b,_,y]=(0,a.arePatternsQuoted)(e);let g,m,v;const T=this.nestedMap,S=l!==void 0?p?this.getQuotedPatternKeys(T,l):T.has(i)?[i]:[]:T.keys();for(const x of S){g=T.get(x);const L=d!==void 0?b?this.getQuotedPatternKeys(g,d):g.has(o)?[o]:[]:g.keys();for(const O of L){m=g.get(O);const w=f!==void 0?_?this.getQuotedPatternKeys(m,f):m.has(c)?[c]:[]:m.keys();for(const A of w){v=m.get(A);const E=h!==void 0?y?this.getQuotedPatternKeys(v,h):v.has(s)?[s]:[]:v.keys();for(const R of E)yield[Number.parseInt(x,10),Number.parseInt(O,10),Number.parseInt(A,10),Number.parseInt(R,10)]}}}}count(r){let e=0;const i=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!i)return 0;const[o,c,s,l]=i,[d,f,h,p]=r,[b,_,y,g]=(0,a.arePatternsQuoted)(r);let m,v,T;const S=this.nestedMap,x=d!==void 0?b?this.getQuotedPatternKeys(S,d):S.has(o)?[o]:[]:S.keys();for(const L of x){m=S.get(L);const O=f!==void 0?_?this.getQuotedPatternKeys(m,f):m.has(c)?[c]:[]:m.keys();for(const w of O){v=m.get(w);const A=h!==void 0?y?this.getQuotedPatternKeys(v,h):v.has(s)?[s]:[]:v.keys();for(const E of A)T=v.get(E),p!==void 0?g?e+=[...this.getQuotedPatternKeys(T,p)].length:T.has(l)&&e++:e+=T.size}}return e}};return V3.RdfStoreIndexNestedMapQuoted=u,V3}var jee;function Lee(){if(jee)return M3;jee=1,Object.defineProperty(M3,"__esModule",{value:!0}),M3.RdfStore=void 0;const a=gt(),t=ln(),u=JA(),n=Cee(),r=Iee(),e=Fee(),i=Pee(),o=Ii();let c=class lO{constructor(l){this.features={quotedTripleFiltering:!0},this._size=0,this.options=l,this.dataFactory=l.dataFactory,this.dictionary=l.dictionary,this.indexesWrapped=lO.constructIndexesWrapped(l),this.indexesWrappedComponentOrders=this.indexesWrapped.map(d=>d.componentOrder)}static createDefault(){return new lO({indexCombinations:lO.DEFAULT_INDEX_COMBINATIONS,indexConstructor:l=>new i.RdfStoreIndexNestedMapQuoted(l),dictionary:new e.TermDictionaryQuotedIndexed(new r.TermDictionaryNumberRecordFullTerms),dataFactory:new t.DataFactory})}static constructIndexesWrapped(l){const d=[];if(l.indexCombinations.length===0)throw new Error("At least one index combination is required");for(const f of l.indexCombinations){if(!lO.isCombinationValid(f))throw new Error(`Invalid index combination: ${f}`);d.push({index:l.indexConstructor(l),componentOrder:f,componentOrderInverse:Object.fromEntries(f.map((h,p)=>[h,p]))})}return d}static isCombinationValid(l){for(const d of u.QUAD_TERM_NAMES)if(!l.includes(d))return!1;return l.length===4}get size(){return this._size}addQuad(l){const d=[this.dictionary.encode(l.subject),this.dictionary.encode(l.predicate),this.dictionary.encode(l.object),this.dictionary.encode(l.graph)];let f=!1;for(const h of this.indexesWrapped)f=h.index.set((0,o.orderQuadComponents)(h.componentOrder,d),!0);return f?(this._size++,!0):!1}removeQuad(l){const d=[this.dictionary.encodeOptional(l.subject),this.dictionary.encodeOptional(l.predicate),this.dictionary.encodeOptional(l.object),this.dictionary.encodeOptional(l.graph)];if(d.includes(void 0))return!1;let f=!1;for(const h of this.indexesWrapped)if(f=h.index.remove((0,o.orderQuadComponents)(h.componentOrder,d)),!f)break;return f?(this._size--,!0):!1}remove(l){return l.on("data",d=>this.removeQuad(d)),l}removeMatches(l,d,f,h){return this.remove(this.match(l,d,f,h))}deleteGraph(l){return typeof l=="string"&&(l=this.dataFactory.namedNode(l)),this.removeMatches(void 0,void 0,void 0,l)}import(l){return l.on("data",d=>this.addQuad(d)),l}*readQuads(l,d,f,h){const p=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(m=>m.index.features.quotedTripleFiltering),[b,_]=(0,o.quadToPattern)(l,d,f,h,p),y=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,b)],g=(0,o.orderQuadComponents)(y.componentOrder,b);for(const m of y.index.find(g)){const v=this.dataFactory.quad(m[y.componentOrderInverse.subject],m[y.componentOrderInverse.predicate],m[y.componentOrderInverse.object],m[y.componentOrderInverse.graph]);_?(0,u.matchPattern)(v,l,d,f,h)&&(yield v):yield v}}getQuads(l,d,f,h){return[...this.readQuads(l,d,f,h)]}match(l,d,f,h){return(0,a.wrap)(this.readQuads(l,d,f,h))}*readBindings(l,d,f,h,p){const b=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(O=>O.index.features.quotedTripleFiltering),[_,y]=(0,o.quadToPattern)(d,f,h,p,b),g=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,_)],m=(0,o.orderQuadComponents)(g.componentOrder,_),v=(0,o.encodeOptionalTerms)(m,this.dictionary);if(!v)return;const T=(0,o.orderQuadComponents)(g.componentOrder,[d,f,h,p]),S=[];for(let O=0;O<T.length;O++)(T[O].termType==="Variable"||T[O].termType==="Quad")&&S.push(O);let x=!1;const L=T.map((O,w)=>{const A=[];for(let E=w+1;E<T.length;E++)O.equals(T[E])&&(A.push(E),x=!0);return A});for(const O of g.index.findEncoded(v,m)){let w=!1,A=!1;const E=[];for(const R of S){if(x){const $=L[R];if($){for(const Q of $)if(O[R]!==O[Q]){w=!0;break}}if(w)break}const V=this.dictionary.decode(O[R]);if(T[R].termType==="Quad"){if(V.termType==="Quad"){const $=(0,u.matchPatternMappings)(V,T[R],{returnMappings:!0});if($){A=!0;for(const[Q,ne]of Object.entries($)){const ie=this.dataFactory.variable(Q);if(E.some(fe=>fe[0].equals(ie)&&!fe[1].equals(ne))){w=!0;break}E.push([ie,ne])}continue}}w=!0;break}if(A&&E.some($=>$[0].equals(T[R])&&!$[1].equals(V))){w=!0;break}E.push([T[R],V])}w||(yield l.bindings(E))}}getBindings(l,d,f,h,p){return[...this.readBindings(l,d,f,h,p)]}matchBindings(l,d,f,h,p){return(0,a.wrap)(this.readBindings(l,d,f,h,p))}countQuads(l,d,f,h){const p=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(g=>g.index.features.quotedTripleFiltering),[b]=(0,o.quadToPattern)(l,d,f,h,p);if(b.every(g=>g===void 0))return this.size;const _=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,b)],y=(0,o.orderQuadComponents)(_.componentOrder,b);return _.index.count(y)}asDataset(){return new n.DatasetCoreWrapper(this)}};return M3.RdfStore=c,c.DEFAULT_INDEX_COMBINATIONS=[["graph","subject","predicate","object"],["graph","predicate","object","subject"],["graph","object","subject","predicate"]],M3}var Mee;function Cee(){if(Mee)return L3;Mee=1,Object.defineProperty(L3,"__esModule",{value:!0}),L3.DatasetCoreWrapper=void 0;const a=Lee();let t=class bae{constructor(n){this.store=n}get size(){return this.store.size}add(n){return this.store.addQuad(n),this}delete(n){return this.store.removeQuad(n),this}has(n){for(const r of this.store.readQuads(n.subject,n.predicate,n.object,n.graph))return!0;return!1}match(n,r,e,i){const o=new a.RdfStore(this.store.options);for(const c of this.store.readQuads(n,r,e,i))o.addQuad(c);return new bae(o)}[Symbol.iterator](){return this.store.readQuads()}};return L3.DatasetCoreWrapper=t,L3}var vF={},qee;function Qve(){return qee||(qee=1,Object.defineProperty(vF,"__esModule",{value:!0})),vF}var U3={},Bee;function Hve(){if(Bee)return U3;Bee=1,Object.defineProperty(U3,"__esModule",{value:!0}),U3.TermDictionaryNumberMap=void 0;const a=ln(),t=C3();let u=class{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary=new Map,this.reverseDictionary=new Map,this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const e=(0,t.termToString)(r);let i=this.dictionary.get(e);return i===void 0&&(i=this.lastId++,this.dictionary.set(e,i),this.reverseDictionary.set(i,e)),i}encodeOptional(r){const e=(0,t.termToString)(r);return this.dictionary.get(e)}decode(r){const e=this.reverseDictionary.get(r);if(e===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return(0,t.stringToTerm)(e,this.dataFactory)}encodings(){return this.reverseDictionary.keys()}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}};return U3.TermDictionaryNumberMap=u,U3}var Q3={},$ee;function Gve(){if($ee)return Q3;$ee=1,Object.defineProperty(Q3,"__esModule",{value:!0}),Q3.TermDictionaryNumberRecord=void 0;const a=ln(),t=C3();let u=class{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const e=(0,t.termToString)(r);let i=this.dictionary[e];return i===void 0&&(i=this.lastId++,this.dictionary[e]=i,this.reverseDictionary[i]=e),i}encodeOptional(r){const e=(0,t.termToString)(r);return this.dictionary[e]}decode(r){const e=this.reverseDictionary[r];if(e===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return(0,t.stringToTerm)(e,this.dataFactory)}*encodings(){for(const r of Object.keys(this.reverseDictionary))yield Number.parseInt(r,10)}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}};return Q3.TermDictionaryNumberRecord=u,Q3}var H3={},Vee;function zve(){if(Vee)return H3;Vee=1,Object.defineProperty(H3,"__esModule",{value:!0}),H3.TermDictionaryQuoted=void 0;const a=ln(),t=JA();let u=class kf{constructor(r,e,i=new a.DataFactory){this.features={quotedTriples:!0},this.plainTermDictionary=r,this.quotedTriplesDictionary=e,this.dataFactory=i}encode(r){return r.termType==="Quad"?kf.BITMASK|1+this.quotedTriplesDictionary.encode(r):this.plainTermDictionary.encode(r)}encodeOptional(r){if(r.termType==="Quad"){const e=this.quotedTriplesDictionary.encodeOptional(r);return e===void 0?e:kf.BITMASK|1+e}return this.plainTermDictionary.encodeOptional(r)}decode(r){if(kf.BITMASK&r){const e=(~kf.BITMASK&r)-1;return this.quotedTriplesDictionary.decode(e)}return this.plainTermDictionary.decode(r)}*encodings(){for(const r of this.plainTermDictionary.encodings())yield r;for(const r of this.quotedTriplesDictionary.encodings())yield kf.BITMASK|1+r}*findQuotedTriples(r){for(const e of this.findQuotedTriplesEncoded(r))yield this.decode(e)}*findQuotedTriplesEncoded(r){for(let e of this.quotedTriplesDictionary.encodings()){e=kf.BITMASK|1+e;const i=this.decode(e);(0,t.matchPattern)(i,r.subject,r.predicate,r.object,r.graph)&&(yield e)}}};return H3.TermDictionaryQuoted=u,u.BITMASK=1<<31,H3}var G3={},Uee;function kve(){if(Uee)return G3;Uee=1,Object.defineProperty(G3,"__esModule",{value:!0}),G3.TermDictionaryQuotedReferential=void 0;const a=ln(),t=JA(),u=Ii();let n=class sa{constructor(e,i=new a.DataFactory){this.quotedTriplesDictionary=[],this.quotedTriplesReverseDictionary={},this.features={quotedTriples:!0},this.plainTermDictionary=e,this.dataFactory=i}encode(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!1):this.plainTermDictionary.encode(e)}encodeQuotedTriple(e,i){var d;if(e.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const o=(d=(0,u.encodeOptionalTerms)([e.subject,e.predicate,e.object,void 0],this))==null?void 0:d.slice(0,3),c=o&&o.every(f=>f!==void 0)?this.quotedTriplesReverseDictionary[o.join(sa.SEPARATOR)]:void 0;if(c!==void 0||i)return c===void 0?void 0:sa.BITMASK|c;const s=[this.encode(e.subject),this.encode(e.predicate),this.encode(e.object)],l=this.quotedTriplesDictionary.length+1;return this.quotedTriplesDictionary.push(s),this.quotedTriplesReverseDictionary[s.join(sa.SEPARATOR)]=l,sa.BITMASK|l}encodeOptional(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!0):this.plainTermDictionary.encodeOptional(e)}decode(e){if(sa.BITMASK&e){const i=(~sa.BITMASK&e)-1;if(i>=this.quotedTriplesDictionary.length)throw new Error(`The value ${e} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[i];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.keys())yield sa.BITMASK|1+e}*findQuotedTriples(e){for(const i of this.findQuotedTriplesEncoded(e))yield this.decode(i)}*findQuotedTriplesEncoded(e){for(let i of this.quotedTriplesDictionary.keys()){i=sa.BITMASK|1+i;const o=this.decode(i);(0,t.matchPattern)(o,e.subject,e.predicate,e.object,e.graph)&&(yield i)}}};return G3.TermDictionaryQuotedReferential=n,n.BITMASK=1<<31,n.SEPARATOR="_",G3}var z3={},Qee;function Xve(){if(Qee)return z3;Qee=1,Object.defineProperty(z3,"__esModule",{value:!0}),z3.TermDictionarySymbol=void 0;const a=ln(),t=C3();let u=class{constructor(r=new a.DataFactory){this.features={quotedTriples:!1},this.dataFactory=r}encode(r){return Symbol.for(`rdf::${(0,t.termToString)(r)}`)}encodeOptional(r){return this.encode(r)}decode(r){const e=Symbol.keyFor(r);if(e===void 0)throw new Error(`The value ${String(r)} is not present in this dictionary`);return(0,t.stringToTerm)(e.slice(5),this.dataFactory)}encodings(){throw new Error("encodings is not supported")}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}};return z3.TermDictionarySymbol=u,z3}var TF={},Hee;function Jve(){return Hee||(Hee=1,Object.defineProperty(TF,"__esModule",{value:!0})),TF}var k3={},Gee;function zee(){if(Gee)return k3;Gee=1,Object.defineProperty(k3,"__esModule",{value:!0}),k3.RdfStoreIndexNestedMapRecursive=void 0;const a=Ii();let t=class{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedMap=new Map}set(n,r){let e=this.nestedMap,i=!1;for(const[o,c]of n.entries()){const s=e;let l=s.get(c);l?o===n.length-1&&(i=!0):(l=o===n.length-1?r:new Map,s.set(c,l)),e=l}return!i}remove(n){const r=this.nestedMap,e=r.get(n[0]);if(!e)return!1;const i=e.get(n[1]);if(!i)return!1;const o=i.get(n[2]);if(!o)return!1;const c=o.delete(n[3]);return c&&o.size===0&&(i.delete(n[2]),i.size===0&&(e.delete(n[1]),e.size===0&&r.delete(n[0]))),c}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){const r=this.nestedMap.get(n[0]);if(!r)return;const e=r.get(n[1]);if(!e)return;const i=e.get(n[2]);if(i)return i.get(n[3])}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(r)for(const e of this.findEncoded(r,n))yield[r[0]!==void 0?n[0]:this.dictionary.decode(e[0]),r[1]!==void 0?n[1]:this.dictionary.decode(e[1]),r[2]!==void 0?n[2]:this.dictionary.decode(e[2]),r[3]!==void 0?n[3]:this.dictionary.decode(e[3])]}*findEncoded(n,r){return yield*this.findEncodedInner(0,n,r,this.nestedMap,[])}*findEncodedInner(n,r,e,i,o){if(n===r.length)yield[...o];else{const c=r[n];if(e[n]){const l=c;if(l!==void 0){const d=i.get(l);d&&(o[n]=c,yield*this.findEncodedInner(n+1,r,e,d,o))}}else for(const[l,d]of i.entries())o[n]=l,yield*this.findEncodedInner(n+1,r,e,d,o)}}count(n){return this.countInner(0,n,this.nestedMap)}countInner(n,r,e){const i=r[n];let o=0;if(i){const c=this.dictionary.encodeOptional(i);if(c!==void 0){if(n===r.length-1)return e.has(c)?1:0;const s=e.get(c);s&&(o+=this.countInner(n+1,r,s))}}else{if(n===r.length-1)return e.size;for(const c of e.values())o+=this.countInner(n+1,r,c)}return o}};return k3.RdfStoreIndexNestedMapRecursive=t,k3}var X3={},kee;function Kve(){if(kee)return X3;kee=1,Object.defineProperty(X3,"__esModule",{value:!0}),X3.RdfStoreIndexNestedMapRecursiveQuoted=void 0;const a=Ii(),t=zee();let u=class extends t.RdfStoreIndexNestedMapRecursive{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*findEncoded(r,e){return yield*this.findEncodedInnerQuoted(0,r,e,(0,a.arePatternsQuoted)(e),this.nestedMap,[])}*findEncodedInnerQuoted(r,e,i,o,c,s){if(r===e.length)yield[...s];else{const l=e[r],d=i[r];if(d)if(o[r]){const f=this.dictionary.findQuotedTriplesEncoded(d);for(const h of f){const p=c.get(h);p&&(s[r]=h,yield*this.findEncodedInnerQuoted(r+1,e,i,o,p,s))}}else{const f=l;if(f!==void 0){const h=c.get(f);h&&(s[r]=l,yield*this.findEncodedInnerQuoted(r+1,e,i,o,h,s))}}else for(const[f,h]of c.entries())s[r]=f,yield*this.findEncodedInnerQuoted(r+1,e,i,o,h,s)}}countInner(r,e,i){const o=e[r];let c=0;if(o)if(o.termType==="Quad"&&(0,a.quadHasVariables)(o)){const s=this.dictionary.findQuotedTriplesEncoded(o);for(const l of s)if(r===e.length-1)i.has(l)&&c++;else{const d=i.get(l);d&&(c+=this.countInner(r+1,e,d))}}else{const s=this.dictionary.encodeOptional(o);if(s!==void 0){if(r===e.length-1)return i.has(s)?1:0;const l=i.get(s);l&&(c+=this.countInner(r+1,e,l))}}else{if(r===e.length-1)return i.size;for(const s of i.values())c+=this.countInner(r+1,e,s)}return c}};return X3.RdfStoreIndexNestedMapRecursiveQuoted=u,X3}var J3={},Xee;function Jee(){if(Xee)return J3;Xee=1,Object.defineProperty(J3,"__esModule",{value:!0}),J3.RdfStoreIndexNestedRecord=void 0;const a=Ii();let t=class{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedRecords={}}set(n,r){const e=this.nestedRecords,i=e[n[0]]||(e[n[0]]={}),o=i[n[1]]||(i[n[1]]={}),c=o[n[2]]||(o[n[2]]={});return c[n[3]]?!1:(c[n[3]]=r,!0)}remove(n){const r=this.nestedRecords,e=r[n[0]];if(!e)return!1;const i=e[n[1]];if(!i)return!1;const o=i[n[2]];return!o||!o[n[3]]?!1:(delete o[n[3]],Object.keys(o).length===0&&(delete i[n[2]],Object.keys(i).length===0&&(delete e[n[1]],Object.keys(e).length===0&&delete r[n[0]])),!0)}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){var r,e,i;return(i=(e=(r=this.nestedRecords[n[0]])==null?void 0:r[n[1]])==null?void 0:e[n[2]])==null?void 0:i[n[3]]}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!r)return;const[e,i,o,c]=r,[s,l,d,f]=n;let h,p,b,_,y,g,m;const v=this.nestedRecords,T=e!==void 0?e in v?[e]:[]:Object.keys(v);for(const S of T){y=v[S],h=s||this.dictionary.decode(Number.parseInt(S,10));const x=i!==void 0?i in y?[i]:[]:Object.keys(y);for(const L of x){g=y[L],p=l||this.dictionary.decode(Number.parseInt(L,10));const O=o!==void 0?o in g?[o]:[]:Object.keys(g);for(const w of O){m=g[w],b=d||this.dictionary.decode(Number.parseInt(w,10));const A=c!==void 0?c in m?[c]:[]:Object.keys(m);for(const E of A)_=f||this.dictionary.decode(Number.parseInt(E,10)),yield[h,p,b,_]}}}}*findEncoded(n,r){const[e,i,o,c]=n;let s,l,d;const f=this.nestedRecords,h=e!==void 0?e in f?[e]:[]:Object.keys(f);for(const p of h){s=f[p];const b=i!==void 0?i in s?[i]:[]:Object.keys(s);for(const _ of b){l=s[_];const y=o!==void 0?o in l?[o]:[]:Object.keys(l);for(const g of y){d=l[g];const m=c!==void 0?c in d?[c]:[]:Object.keys(d);for(const v of m)yield[Number.parseInt(p,10),Number.parseInt(_,10),Number.parseInt(g,10),Number.parseInt(v,10)]}}}}count(n){let r=0;const e=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!e)return 0;const i=e[0],o=e[1],c=e[2],s=e[3];let l,d,f;const h=this.nestedRecords,p=i!==void 0?i in h?[i]:[]:Object.keys(h);for(const b of p){l=h[b];const _=o!==void 0?o in l?[o]:[]:Object.keys(l);for(const y of _){d=l[y];const g=c!==void 0?c in d?[c]:[]:Object.keys(d);for(const m of g)f=d[m],s!==void 0?s in f&&r++:r+=Object.keys(f).length}}return r}};return J3.RdfStoreIndexNestedRecord=t,J3}var K3={},Kee;function Wve(){if(Kee)return K3;Kee=1,Object.defineProperty(K3,"__esModule",{value:!0}),K3.RdfStoreIndexNestedRecordQuoted=void 0;const a=Ii(),t=Jee();let u=class extends t.RdfStoreIndexNestedRecord{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(r,e){for(const i of this.dictionary.findQuotedTriplesEncoded(e))i in r&&(yield i)}*find(r){const e=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!e)return;const[i,o,c,s]=e,[l,d,f,h]=r,[p,b,_,y]=(0,a.arePatternsQuoted)(r);let g,m,v,T,S,x,L;const O=this.nestedRecords,w=l!==void 0?p?this.getQuotedPatternKeys(O,l):i in O?[i]:[]:Object.keys(O);for(const A of w){S=O[A],g=!p&&l?l:this.dictionary.decode(Number.parseInt(A,10));const E=d!==void 0?b?this.getQuotedPatternKeys(S,d):o in S?[o]:[]:Object.keys(S);for(const R of E){x=S[R],m=!b&&d?d:this.dictionary.decode(Number.parseInt(R,10));const V=f!==void 0?_?this.getQuotedPatternKeys(x,f):c in x?[c]:[]:Object.keys(x);for(const $ of V){L=x[$],v=!_&&f?f:this.dictionary.decode(Number.parseInt($,10));const Q=h!==void 0?y?this.getQuotedPatternKeys(L,h):s in L?[s]:[]:Object.keys(L);for(const ne of Q)T=!y&&h?h:this.dictionary.decode(Number.parseInt(ne,10)),yield[g,m,v,T]}}}}*findEncoded(r,e){const[i,o,c,s]=r,[l,d,f,h]=e,[p,b,_,y]=(0,a.arePatternsQuoted)(e);let g,m,v;const T=this.nestedRecords,S=l!==void 0?p?this.getQuotedPatternKeys(T,l):i in T?[i]:[]:Object.keys(T);for(const x of S){g=T[x];const L=d!==void 0?b?this.getQuotedPatternKeys(g,d):o in g?[o]:[]:Object.keys(g);for(const O of L){m=g[O];const w=f!==void 0?_?this.getQuotedPatternKeys(m,f):c in m?[c]:[]:Object.keys(m);for(const A of w){v=m[A];const E=h!==void 0?y?this.getQuotedPatternKeys(v,h):s in v?[s]:[]:Object.keys(v);for(const R of E)yield[Number.parseInt(x,10),Number.parseInt(O,10),Number.parseInt(A,10),Number.parseInt(R,10)]}}}}count(r){let e=0;const i=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!i)return 0;const[o,c,s,l]=i,[d,f,h,p]=r,[b,_,y,g]=(0,a.arePatternsQuoted)(r);let m,v,T;const S=this.nestedRecords,x=d!==void 0?b?this.getQuotedPatternKeys(S,d):o in S?[o]:[]:Object.keys(S);for(const L of x){m=S[L];const O=f!==void 0?_?this.getQuotedPatternKeys(m,f):c in m?[c]:[]:Object.keys(m);for(const w of O){v=m[w];const A=h!==void 0?y?this.getQuotedPatternKeys(v,h):s in v?[s]:[]:Object.keys(v);for(const E of A)T=v[E],p!==void 0?g?e+=[...this.getQuotedPatternKeys(T,p)].length:l in T&&e++:e+=Object.keys(T).length}}return e}};return K3.RdfStoreIndexNestedRecordQuoted=u,K3}var wF={},Wee;function Yve(){return Wee||(Wee=1,Object.defineProperty(wF,"__esModule",{value:!0})),wF}var SF={},Yee;function Zve(){return Yee||(Yee=1,Object.defineProperty(SF,"__esModule",{value:!0})),SF}var Zee;function eTe(){return Zee||(Zee=1,function(a){var t=zd&&zd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=zd&&zd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Cee(),a),u(Qve(),a),u(Hve(),a),u(Gve(),a),u(Iee(),a),u(zve(),a),u(Fee(),a),u(kve(),a),u(Xve(),a),u(Jve(),a),u(gF(),a),u(Pee(),a),u(zee(),a),u(Kve(),a),u(Jee(),a),u(Wve(),a),u(Yve(),a),u(Ii(),a),u(Zve(),a),u(Lee(),a)}(zd)),zd}var ete;function tte(){if(ete)return XA;ete=1,Object.defineProperty(XA,"__esModule",{value:!0}),XA.storeStream=t;const a=eTe();function t(u){const n=a.RdfStore.createDefault();return new Promise((r,e)=>n.import(u).on("error",e).once("end",()=>r(n)))}return XA}var rte;function tTe(){if(rte)return D3;rte=1,Object.defineProperty(D3,"__esModule",{value:!0}),D3.ActorQuerySourceIdentifyHypermediaNone=void 0;const a=bF(),t=pF(),u=ze(),n=Te(),r=Xt(),e=tte();let i=class extends t.ActorQuerySourceIdentifyHypermedia{constructor(c){super(c,"file")}async testMetadata(c){return(0,n.passTest)({filterFactor:0})}async run(c){this.logInfo(c.context,`Identified as file source: ${c.url}`);const s=c.context.getSafe(u.KeysInitQuery.dataFactory),l=new a.QuerySourceRdfJs(await(0,e.storeStream)(c.quads),s,await r.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s));return l.toString=()=>`QuerySourceRdfJs(${c.url})`,l.referenceValue=c.url,{source:l}}};return D3.ActorQuerySourceIdentifyHypermediaNone=i,D3}var nte;function rTe(){return nte||(nte=1,function(a){var t=Hd&&Hd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Hd&&Hd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(tTe(),a)}(Hd)),Hd}var Xd={},W3={},Jd={},Y3={},ite;function nTe(){if(ite)return Y3;ite=1,Object.defineProperty(Y3,"__esModule",{value:!0}),Y3.ActorExpressionEvaluatorFactory=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n),this.mediatorQueryOperation=n.mediatorQueryOperation,this.mediatorFunctionFactory=n.mediatorFunctionFactory,this.mediatorMergeBindingsContext=n.mediatorMergeBindingsContext}};return Y3.ActorExpressionEvaluatorFactory=t,Y3}var ate;function iTe(){return ate||(ate=1,function(a){var t=Jd&&Jd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Jd&&Jd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(nTe(),a)}(Jd)),Jd}var Z3={},ute;function ote(){if(ute)return Z3;ute=1,Object.defineProperty(Z3,"__esModule",{value:!0}),Z3.AlgebraTransformer=void 0;const a=ze(),t=Ae(),u=ht();let n=class LE extends t.TermTransformer{constructor(e,i){super(e.getSafe(a.KeysExpressionEvaluator.superTypeProvider)),this.context=e,this.mediatorFunctionFactory=i}async transformAlgebra(e){const i=u.Algebra.expressionTypes;switch(e.expressionType){case i.TERM:return this.transformTerm(e);case i.OPERATOR:return await this.transformOperator(e);case i.NAMED:return await this.transformNamed(e);case i.EXISTENCE:return LE.transformExistence(e);case i.AGGREGATE:return LE.transformAggregate(e);case i.WILDCARD:return LE.transformWildcard(e)}}static transformWildcard(e){return new t.NamedNode(e.wildcard.value)}async getOperator(e,i){const o=await this.mediatorFunctionFactory.mediate({functionName:e,arguments:i.args,context:this.context}),c=await Promise.all(i.args.map(s=>this.transformAlgebra(s)));if(!o.checkArity(c))throw new t.InvalidArity(c,e);return new t.Operator(e,c,o.apply)}async transformOperator(e){return this.getOperator(e.operator.toLowerCase(),e)}async transformNamed(e){return this.getOperator(e.name.value,e)}static transformAggregate(e){const i=e.aggregator;return new t.Aggregate(i,e)}static transformExistence(e){return new t.Existence(e)}};return Z3.AlgebraTransformer=n,Z3}var eS={},tS={},ste;function cte(){if(ste)return tS;ste=1,Object.defineProperty(tS,"__esModule",{value:!0}),tS.InternalEvaluator=void 0;const a=ze(),t=_a(),u=Ae(),n=wt(),r=ht(),e=ote();let i=class{constructor(c,s,l,d){this.context=c,this.mediatorQueryOperation=l,this.bindingsFactory=d,this.subEvaluators={[t.ExpressionType.Term]:(f,h)=>this.term(f),[t.ExpressionType.Variable]:(f,h)=>this.variable(f,h),[t.ExpressionType.Operator]:(f,h)=>this.evalFunction(f,h),[t.ExpressionType.Existence]:(f,h)=>this.evalExistence(f,h),[t.ExpressionType.Aggregate]:(f,h)=>this.evalAggregate()},this.transformer=new e.AlgebraTransformer(c,s)}async evaluatorExpressionEvaluation(c,s){return this.subEvaluators[c.expressionType].bind(this)(c,s)}term(c){return c}variable(c,s){const l=s.get(u.expressionToVar(this.context.getSafe(a.KeysInitQuery.dataFactory),c));if(!l)throw new u.UnboundVariableError(c.name,s);return this.transformer.transformRDFTermUnsafe(l)}async evalFunction(c,s){return c.apply({args:c.args,mapping:s,exprEval:this})}async evalExistence(c,s){const l=this.context.getSafe(a.KeysInitQuery.dataFactory),d=new r.Factory(l),f=(0,n.materializeOperation)(c.expression.input,s,d,this.bindingsFactory),h=await this.mediatorQueryOperation.mediate({operation:f,context:this.context}),p=(0,n.getSafeBindings)(h);return await new Promise((b,_)=>{p.bindingsStream.on("end",()=>{b(!1)}),p.bindingsStream.on("error",_),p.bindingsStream.on("data",()=>{p.bindingsStream.close(),b(!0)})}).then(b=>c.expression.not?!b:b).then(b=>new u.BooleanLiteral(b))}evalAggregate(){throw new u.NoAggregator}};return tS.InternalEvaluator=i,tS}var lte;function aTe(){if(lte)return eS;lte=1,Object.defineProperty(eS,"__esModule",{value:!0}),eS.ExpressionEvaluator=void 0;const a=ze(),t=cte();let u=class{constructor(r,e,i,o,c){this.context=r,this.expr=e,this.mediatorFunctionFactory=i,this.mediatorQueryOperation=o,this.bindingsFactory=c,this.internalEvaluator=new t.InternalEvaluator(r,i,o,c)}async evaluate(r){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,r)).toRDF(this.context.getSafe(a.KeysInitQuery.dataFactory))}async evaluateAsEBV(r){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,r)).coerceEBV()}evaluateAsEvaluatorExpression(r){return this.evaluatorExpressionEvaluation(this.expr,r)}evaluatorExpressionEvaluation(r,e){return this.internalEvaluator.evaluatorExpressionEvaluation(r,e)}};return eS.ExpressionEvaluator=u,eS}var dte;function uTe(){if(dte)return W3;dte=1,Object.defineProperty(W3,"__esModule",{value:!0}),W3.ActorExpressionEvaluatorFactoryDefault=void 0;const a=iTe(),t=ze(),u=Te(),n=Xt(),r=Ae(),e=ote(),i=aTe();let o=class extends a.ActorExpressionEvaluatorFactory{constructor(s){super(s)}async test(s){return(0,u.passTestVoid)()}async run(s){const l=(0,r.prepareEvaluatorActionContext)(s.context);return new i.ExpressionEvaluator(l,await new e.AlgebraTransformer(l,this.mediatorFunctionFactory).transformAlgebra(s.algExpr),this.mediatorFunctionFactory,this.mediatorQueryOperation,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,s.context.getSafe(t.KeysInitQuery.dataFactory)))}};return W3.ActorExpressionEvaluatorFactoryDefault=o,W3}var fte;function oTe(){return fte||(fte=1,function(a){var t=Xd&&Xd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Xd&&Xd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(uTe(),a)}(Xd)),Xd}var Kd={},rS={},nS={},hte;function sTe(){if(hte)return nS;hte=1,Object.defineProperty(nS,"__esModule",{value:!0}),nS.GroupsState=void 0;const a=ze(),t=Xt();let u=class{constructor(r,e,i,o,c){this.pattern=r,this.mediatorBindingsAggregatorFactory=e,this.context=i,this.bindingsFactory=o,this.variables=c,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(s=>s.value)),this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(r){const e=this.resultCheck();if(e)return e;this.waitCounter++;const i=r.filter((l,d)=>this.groupVariables.has(d.value)),o=this.hashBindings(i);let c=this.groupsInitializer.get(o),s;if(c){const l=c;s=(async()=>{const d=await l;await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;await d.aggregators[h].putBindings(r)}))})().then(async()=>{await this.subtractWaitCounterAndCollect()})}else c=(async()=>{const l={};await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;l[h]=await this.mediatorBindingsAggregatorFactory.mediate({expr:f,context:this.context}),await l[h].putBindings(r)}));const d={aggregators:l,bindings:i};return this.groups.set(o,d),await this.subtractWaitCounterAndCollect(),d})(),this.groupsInitializer.set(o,c),s=c;return s}async subtractWaitCounterAndCollect(){--this.waitCounter===0&&await this.handleResultCollection()}async handleResultCollection(){const r=this.context.getSafe(a.KeysInitQuery.dataFactory);let e=await Promise.all([...this.groups].map(async([i,o])=>{const{bindings:c,aggregators:s}=o;let l=c;for(const d in s){const f=await s[d].result();f&&(l=l.set(r.variable(d),f))}return l}));if(e.length===0&&this.groupVariables.size===0){const i=[];await Promise.all(this.pattern.aggregates.map(async o=>{const c=o.variable,l=await(await this.mediatorBindingsAggregatorFactory.mediate({expr:o,context:this.context})).result();l!==void 0&&i.push([c,l])})),e=[this.bindingsFactory.bindings(i)]}this.waitResolver(e)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}async collectResults(){const r=this.resultCheck();if(r)return r;this.resultHasBeenCalled=!0;const e=new Promise(i=>{this.waitResolver=i});return await this.subtractWaitCounterAndCollect(),e}hashBindings(r){return(0,t.bindingsToCompactString)(r,this.variables)}};return nS.GroupsState=u,nS}var pte;function cTe(){if(pte)return rS;pte=1,Object.defineProperty(rS,"__esModule",{value:!0}),rS.ActorQueryOperationGroup=void 0;const a=Qt(),t=ze(),u=Te(),n=Xt(),r=wt(),e=gt(),i=sTe();let o=class extends a.ActorQueryOperationTypedMediated{constructor(s){super(s,"group"),this.mediatorBindingsAggregatorFactory=s.mediatorBindingsAggregatorFactory}async testOperation(){return(0,u.passTestVoid)()}async runOperation(s,l){const d=l.getSafe(t.KeysInitQuery.dataFactory),f=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,l,d),{input:h,aggregates:p}=s,b=await this.mediatorQueryOperation.mediate({operation:h,context:l}),_=(0,r.getSafeBindings)(b),y=[...s.variables,...p.map(v=>v.variable)].map(v=>({variable:v,canBeUndef:!1})),g=(await _.metadata()).variables.map(v=>v.variable);return{type:"bindings",bindingsStream:new e.TransformIterator(()=>new Promise((v,T)=>{const S=new i.GroupsState(s,this.mediatorBindingsAggregatorFactory,l,f,g);_.bindingsStream.on("end",async()=>{try{const x=new e.ArrayIterator(await S.collectResults(),{autoStart:!1});v(x)}catch(x){T(x)}}),_.bindingsStream.on("error",T),_.bindingsStream.on("data",x=>{S.consumeBindings(x).catch(T)})}),{autoStart:!1}),metadata:async()=>({...await _.metadata(),variables:y})}}};return rS.ActorQueryOperationGroup=o,rS}var yte;function lTe(){return yte||(yte=1,function(a){var t=Kd&&Kd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Kd&&Kd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(cTe(),a)}(Kd)),Kd}var Wd={},iS={},bte;function dTe(){if(bte)return iS;bte=1,Object.defineProperty(iS,"__esModule",{value:!0}),iS.ActorQueryOperationNop=void 0;const a=Qt(),t=ze(),u=Te(),n=Xt(),r=Er(),e=gt();let i=class extends a.ActorQueryOperationTypedMediated{constructor(c){super(c,"nop")}async testOperation(c,s){return(0,u.passTestVoid)()}async runOperation(c,s){const l=s.getSafe(t.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l);return{bindingsStream:new e.SingletonIterator(d.bindings()),metadata:()=>Promise.resolve({state:new r.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}};return iS.ActorQueryOperationNop=i,iS}var mte;function fTe(){return mte||(mte=1,function(a){var t=Wd&&Wd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Wd&&Wd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(dTe(),a)}(Wd)),Wd}var Yd={},aS={},_te;function hTe(){if(_te)return aS;_te=1,Object.defineProperty(aS,"__esModule",{value:!0}),aS.ActorQueryOperationService=void 0;const a=Qt(),t=ze(),u=Te(),n=Xt(),r=Er(),e=wt(),i=gt();let o=class extends a.ActorQueryOperationTypedMediated{constructor(s){super(s,"service")}async testOperation(s,l){return s.name.termType!=="NamedNode"?(0,u.failTest)(`${this.name} can only query services by IRI, while a ${s.name.termType} was given.`):(0,u.passTestVoid)()}async runOperation(s,l){const{querySource:d}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:s.name.value,type:this.forceSparqlEndpoint?"sparql":void 0},context:l});let f;try{f=(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:(0,e.assignOperationSource)(s.input,d),context:l}))}catch(h){if(s.silent){const p=l.getSafe(t.KeysInitQuery.dataFactory),b=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,l,p);f={bindingsStream:new i.SingletonIterator(b.bindings()),type:"bindings",metadata:async()=>({state:new r.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})},this.logWarn(l,`An error occurred when executing a SERVICE clause: ${h.message}`)}else throw h}return f}};return aS.ActorQueryOperationService=o,aS}var gte;function pTe(){return gte||(gte=1,function(a){var t=Yd&&Yd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Yd&&Yd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(hTe(),a)}(Yd)),Yd}var Zd={},uS={},vte;function yTe(){if(vte)return uS;vte=1,Object.defineProperty(uS,"__esModule",{value:!0}),uS.ActorQueryOperationValues=void 0;const a=Qt(),t=ze(),u=Te(),n=Xt(),r=Er(),e=gt();let i=class extends a.ActorQueryOperationTyped{constructor(c){super(c,"values")}async testOperation(c,s){return(0,u.passTestVoid)()}async runOperation(c,s){const l=s.getSafe(t.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l);return{type:"bindings",bindingsStream:new e.ArrayIterator(c.bindings.map(p=>d.bindings(Object.entries(p).map(([b,_])=>[l.variable(b.slice(1)),_])))),metadata:()=>Promise.resolve({state:new r.MetadataValidationState,cardinality:{type:"exact",value:c.bindings.length},variables:c.variables.map(p=>({variable:p,canBeUndef:c.bindings.some(b=>!(`?${p.value}`in b))}))})}}};return uS.ActorQueryOperationValues=i,uS}var Tte;function bTe(){return Tte||(Tte=1,function(a){var t=Zd&&Zd.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Zd&&Zd.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(yTe(),a)}(Zd)),Zd}var ef={},oS={},wte;function mTe(){if(wte)return oS;wte=1,Object.defineProperty(oS,"__esModule",{value:!0}),oS.ActorQueryOperationPathOneOrMore=void 0;const a=Na(),t=ze(),u=Xt(),n=wt(),r=gt(),e=ht();let i=class extends a.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(c,s){const l=s.getSafe(t.KeysInitQuery.dataFactory),d=new e.Factory(l),f=await u.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l),h=await this.isPathArbitraryLengthDistinct(d,s,c);if(h.operation)return h.operation;s=h.context;const p=c.predicate;if(c.subject.termType!=="Variable"&&c.object.termType==="Variable"){const g=c.object,m=await this.getObjectsPredicateStarEval(c.subject,p.path,g,c.graph,s,!1,d,f),v=(c.graph.termType==="Variable"?[g,c.graph]:[g]).map(T=>({variable:T,canBeUndef:!1}));return{type:"bindings",bindingsStream:m.bindingsStream,metadata:async()=>({...await m.metadata(),variables:v})}}if(c.subject.termType==="Variable"&&c.object.termType==="Variable"){const g=d.createDistinct(d.createPath(c.subject,c.predicate.path,c.object,c.graph)),m=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:g})),v=c.subject,T=c.object,S={},x=new r.MultiTransformIterator(m.bindingsStream,{multiTransform:O=>{const w=O.get(v),A=O.get(T),E=c.graph.termType==="Variable"?O.get(c.graph):c.graph;return new r.TransformIterator(async()=>{const R=new r.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(v,T,w,A,p.path,E,s,S,{},R,{count:0},d,f),R.map(V=>(c.graph.termType==="Variable"&&(V=V.set(c.graph,E)),V))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),L=(c.graph.termType==="Variable"?[v,T,c.graph]:[v,T]).map(O=>({variable:O,canBeUndef:!1}));return{type:"bindings",bindingsStream:x,metadata:async()=>({...await m.metadata(),variables:L})}}if(c.subject.termType==="Variable"&&c.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(c.object,d.createOneOrMorePath(d.createInv(p.path)),c.subject,c.graph)});const b=this.generateVariable(l),_=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(c.subject,p,b,c.graph)}));return{type:"bindings",bindingsStream:_.bindingsStream.map(g=>c.object.equals(g.get(b))?c.graph.termType==="Variable"?f.bindings([[c.graph,g.get(c.graph)]]):f.bindings():null),metadata:async()=>({...await _.metadata(),variables:(c.graph.termType==="Variable"?[c.graph]:[]).map(g=>({variable:g,canBeUndef:!1}))})}}};return oS.ActorQueryOperationPathOneOrMore=i,oS}var Ste;function _Te(){return Ste||(Ste=1,function(a){var t=ef&&ef.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ef&&ef.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(mTe(),a)}(ef)),ef}var tf={},sS={},Ote;function gTe(){if(Ote)return sS;Ote=1,Object.defineProperty(sS,"__esModule",{value:!0}),sS.ActorQueryOperationPathZeroOrMore=void 0;const a=Na(),t=ze(),u=Xt(),n=wt(),r=gt(),e=ir(),i=ht();let o=class extends a.ActorAbstractPath{constructor(s){super(s,i.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(s,l){const d=l.getSafe(t.KeysInitQuery.dataFactory),f=new i.Factory(d),h=await u.BindingsFactory.create(this.mediatorMergeBindingsContext,l,d),p=await this.isPathArbitraryLengthDistinct(f,l,s);if(p.operation)return p.operation;l=p.context;const b=s.predicate,_=this.getPathSources(b),y=s.subject.termType==="Variable",g=s.object.termType==="Variable";if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const L=this.generateVariable(d,s),O=this.assignPatternSources(f,f.createPattern(s.subject,L,s.object,s.graph),_),w=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:O})),A=s.subject,E=s.object,R=new Set,V={},$=new r.MultiTransformIterator(w.bindingsStream,{multiTransform:ne=>{const ie=ne.get(A),fe=ne.get(E),J=s.graph.termType==="Variable"?ne.get(s.graph):s.graph,_e=(0,e.termToString)(ie)+(0,e.termToString)(J),Fe=(0,e.termToString)(fe)+(0,e.termToString)(J);return new r.TransformIterator(async()=>{if(R.has(_e)&&R.has(Fe))return new r.EmptyIterator;const ve=new r.BufferedIterator,te={count:0};return R.has(_e)||(R.add(_e),await this.getSubjectAndObjectBindingsPredicateStar(A,E,ie,ie,b.path,J,l,V,{},ve,te,f,h)),R.has(Fe)||(R.add(Fe),await this.getSubjectAndObjectBindingsPredicateStar(A,E,fe,fe,b.path,J,l,V,{},ve,te,f,h)),ve.map(Le=>(s.graph.termType==="Variable"&&(Le=Le.set(s.graph,J)),Le))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),Q=(s.graph.termType==="Variable"?[A,s.object,s.graph]:[A,s.object]).map(ne=>({variable:ne,canBeUndef:!1}));return{type:"bindings",bindingsStream:$,metadata:async()=>({...await w.metadata(),variables:Q})}}if(!y&&!g){const L=this.generateVariable(d),O=await this.getObjectsPredicateStarEval(s.subject,b.path,L,s.graph,l,!0,f,h);return{type:"bindings",bindingsStream:O.bindingsStream.map(A=>s.object.equals(A.get(L))?s.graph.termType==="Variable"?h.bindings([[s.graph,A.get(s.graph)]]):h.bindings():null),metadata:async()=>({...await O.metadata(),variables:(s.graph.termType==="Variable"?[s.graph]:[]).map(A=>({variable:A,canBeUndef:!1}))})}}const m=y?s.object:s.subject,v=y?s.subject:s.object,T=y?f.createInv(b.path):b.path,S=await this.getObjectsPredicateStarEval(m,T,v,s.graph,l,!0,f,h),x=(s.graph.termType==="Variable"?[v,s.graph]:[v]).map(L=>({variable:L,canBeUndef:!1}));return{type:"bindings",bindingsStream:S.bindingsStream,metadata:async()=>({...await S.metadata(),variables:x})}}};return sS.ActorQueryOperationPathZeroOrMore=o,sS}var Ate;function vTe(){return Ate||(Ate=1,function(a){var t=tf&&tf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=tf&&tf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(gTe(),a)}(tf)),tf}var rf={},cS={},Ete;function TTe(){if(Ete)return cS;Ete=1,Object.defineProperty(cS,"__esModule",{value:!0}),cS.ActorQueryOperationPathZeroOrOne=void 0;const a=Na(),t=ze(),u=Xt(),n=Er(),r=wt(),e=gt(),i=ht();let o=class extends a.ActorAbstractPath{constructor(s){super(s,i.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(s,l){const d=l.getSafe(t.KeysInitQuery.dataFactory),f=new i.Factory(d),h=await u.BindingsFactory.create(this.mediatorMergeBindingsContext,l,d),p=s.predicate,b=this.getPathSources(p),_=[];if(s.subject.termType!=="Variable"&&s.object.termType!=="Variable"&&s.subject.equals(s.object))return{type:"bindings",bindingsStream:new e.SingletonIterator(h.bindings()),metadata:()=>Promise.resolve({state:new n.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})};const y=await this.isPathArbitraryLengthDistinct(f,l,s);if(y.operation)return y.operation;l=y.context;const g=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:f.createPath(s.subject,p.path,s.object,s.graph)}));let m;if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const T=this.generateVariable(d,s),S=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:f.createFilter(this.assignPatternSources(f,f.createPattern(s.subject,T,s.object,s.graph),b),f.createOperatorExpression("=",[f.createTermExpression(s.subject),f.createTermExpression(s.object)]))})).bindingsStream.map(x=>x.delete(T));m=new e.UnionIterator([S,g.bindingsStream],{autoStart:!1})}else s.subject.termType==="Variable"&&_.push(h.bindings([[s.subject,s.object]])),s.object.termType==="Variable"&&_.push(h.bindings([[s.object,s.subject]])),m=g.bindingsStream.prepend(_);return{type:"bindings",bindingsStream:m,metadata:async()=>{const T=await g.metadata();return{...T,cardinality:{...T.cardinality,value:T.cardinality.value+1}}}}}};return cS.ActorQueryOperationPathZeroOrOne=o,cS}var Ite;function wTe(){return Ite||(Ite=1,function(a){var t=rf&&rf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=rf&&rf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(TTe(),a)}(rf)),rf}var nf={},lS={},xte;function STe(){if(xte)return lS;xte=1,Object.defineProperty(lS,"__esModule",{value:!0}),lS.ActorQueryOperationUpdateDeleteInsert=void 0;const a=tY(),t=Qt(),u=ze(),n=Xt(),r=wt(),e=gt();let i=class extends t.ActorQueryOperationTypedMediated{constructor(c){super(c,"deleteinsert"),this.blankNodeCounter=0}async testOperation(c,s){return(0,r.testReadOnly)(s)}async runOperation(c,s){const l=s.getSafe(u.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l),f=c.where?(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c.where,context:s})).bindingsStream:new e.ArrayIterator([d.bindings()],{autoStart:!1});let h,p;c.insert&&(h=new a.BindingsToQuadsIterator(l,c.insert.map(a.BindingsToQuadsIterator.localizeQuad.bind(null,l,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++),c.delete&&(p=new a.BindingsToQuadsIterator(l,c.delete.map(a.BindingsToQuadsIterator.localizeQuad.bind(null,l,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++);const{execute:b}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,quadStreamDelete:p,context:s});return{type:"void",execute:b}}};return lS.ActorQueryOperationUpdateDeleteInsert=i,lS}var Nte;function OTe(){return Nte||(Nte=1,function(a){var t=nf&&nf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=nf&&nf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(STe(),a)}(nf)),nf}var af={},dS={},uf={},fS={},Rte;function ATe(){if(Rte)return fS;Rte=1,Object.defineProperty(fS,"__esModule",{value:!0}),fS.ActorQueryProcess=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n)}};return fS.ActorQueryProcess=t,fS}var Fte;function KA(){return Fte||(Fte=1,function(a){var t=uf&&uf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=uf&&uf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ATe(),a)}(uf)),uf}var Dte;function ETe(){if(Dte)return dS;Dte=1,Object.defineProperty(dS,"__esModule",{value:!0}),dS.ActorQueryProcessSequential=void 0;const a=KA(),t=ze(),u=Te(),n=Xt(),r=wt(),e=ht();let i=class extends a.ActorQueryProcess{constructor(c){super(c)}async test(c){return c.context.get(t.KeysInitQuery.explain)??c.context.get(new u.ActionContextKey("explain"))?(0,u.failTest)(`${this.name} is not able to explain queries.`):(0,u.passTestVoid)()}async run(c){let{operation:s,context:l}=await this.parse(c.query,c.context);return{operation:s,context:l}=await this.optimize(s,l),{result:await this.evaluate(s,l)}}async parse(c,s){s=(await this.mediatorContextPreprocess.mediate({context:s,initialize:!0})).context;let l;if(typeof c=="string"){s=s.set(t.KeysInitQuery.queryString,c);const d=s.get(t.KeysInitQuery.baseIRI),f=s.get(t.KeysInitQuery.queryFormat),h=await this.mediatorQueryParse.mediate({context:s,query:c,queryFormat:f,baseIRI:d});l=h.operation,h.baseIRI&&(s=s.set(t.KeysInitQuery.baseIRI,h.baseIRI))}else l=c;if(s.has(t.KeysInitQuery.initialBindings)){const d=s.getSafe(t.KeysInitQuery.dataFactory),f=new e.Factory(d),h=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d);l=(0,r.materializeOperation)(l,s.get(t.KeysInitQuery.initialBindings),f,h,{strictTargetVariables:!0}),s=s.delete(t.KeysInitQuery.queryString)}return{operation:l,context:s}}async optimize(c,s){return s=s.set(t.KeysInitQuery.query,c),{operation:c,context:s}=await this.mediatorOptimizeQueryOperation.mediate({context:s,operation:c}),s=s.set(t.KeysInitQuery.query,c),{operation:c,context:s}}async evaluate(c,s){const l=await this.mediatorQueryOperation.mediate({context:s,operation:c});return l.context=s,l}};return dS.ActorQueryProcessSequential=i,dS}var Pte;function ITe(){return Pte||(Pte=1,function(a){var t=af&&af.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=af&&af.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ETe(),a)}(af)),af}var of={},hS={},pS={},yS={},bS={},jte;function xTe(){if(jte)return bS;jte=1,Object.defineProperty(bS,"__esModule",{value:!0}),bS.LinkedRdfSourcesAsyncRdfIterator=void 0;const a=ze(),t=Er(),u=gt();let n=class extends u.BufferedIterator{constructor(e,i,o,c,s,l,d,f){if(super({autoStart:!1,...f}),this.started=!1,this.currentIterators=[],this.iteratorsPendingCreation=0,this.iteratorsPendingTermination=0,this.accumulatedMetadata=Promise.resolve(void 0),this._reading=!1,this.cacheSize=e,this.operation=i,this.queryBindingsOptions=o,this.context=c,this.firstUrl=s,this.maxIterators=l,this.sourceStateGetter=d,this.maxIterators<=0)throw new Error(`LinkedRdfSourcesAsyncRdfIterator.maxIterators must be larger than zero, but got ${this.maxIterators}`)}kickstart(){this.started||this._fillBufferAsync()}getProperty(e,i){return e==="metadata"&&!this.started&&(this.preflightMetadata||(this.preflightMetadata=new Promise((o,c)=>{this.sourceStateGetter({url:this.firstUrl},{}).then(s=>{const l=s.source.queryBindings(this.operation,this.context);l.getProperty("metadata",d=>{d.state=new t.MetadataValidationState,l.destroy(),this.accumulateMetadata(s.metadata,d).then(f=>{const h={...s.metadata,...d,...f};o(h)}).catch(()=>{o({...s.metadata,state:new t.MetadataValidationState})})})}).catch(c)})),this.preflightMetadata.then(o=>this.setProperty("metadata",o)).catch(o=>this.emit("error",o))),super.getProperty(e,i)}_end(e){for(const i of this.currentIterators)i.destroy();super._end(e)}_read(e,i){if(this.started){for(const o of this.currentIterators){for(;e>0;){const c=o.read();if(c===null)break;e--,this._push(c)}if(e<=0)break}e>=0&&this.canStartNewIterator()?this.sourceStateGetter({url:this.firstUrl},{}).then(o=>{this.startIteratorsForNextUrls(o.handledDatasets,!1),i()}):i()}else this.started=!0,this.sourceStateGetter({url:this.firstUrl},{}).then(o=>{this.startIterator(o),i()}).catch(o=>setTimeout(()=>this.destroy(o)))}canStartNewIterator(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination<this.maxIterators&&(!this.canStartNewIteratorConsiderReadable()||!this.readable)}canStartNewIteratorConsiderReadable(){return!0}areIteratorsRunning(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination>0}startIterator(e){try{const i=e.source.queryBindings(this.operation,this.context,this.queryBindingsOptions);this.currentIterators.push(i);let o=!1,c=!1;i._destination=this,i.on("error",s=>this.destroy(s)),i.on("readable",()=>this._fillBuffer()),i.on("end",()=>{this.currentIterators.splice(this.currentIterators.indexOf(i),1),o=!0,c||this.iteratorsPendingTermination++,c&&this.startIteratorsForNextUrls(e.handledDatasets,!0)}),i.getProperty("metadata",s=>{this.accumulatedMetadata=this.accumulatedMetadata.then(l=>(async()=>(l||(l=e.metadata),this.accumulateMetadata(l,s)))().then(d=>{const f={...e.metadata,...s,...d};return f.state=new t.MetadataValidationState,this.updateMetadata(f),this.preflightMetadata&&this.preflightMetadata.then(h=>h.state.invalidate()).catch(()=>{}),this.getSourceLinks(f,e).then(h=>Promise.all(h)).then(async h=>{const p=await this.getLinkQueue();for(const b of h)p.push(b,e.link);c=!0,o&&this.iteratorsPendingTermination--,this.startIteratorsForNextUrls(e.handledDatasets,!0)}).catch(h=>this.destroy(h)),f})).catch(l=>(this.destroy(l),{}))})}catch(i){this.destroy(i)}}updateMetadata(e){const i=this.getProperty("metadata");this.setProperty("metadata",e),i==null||i.state.invalidate()}isRunning(){return!this.done}startIteratorsForNextUrls(e,i){this.getLinkQueue().then(o=>{for(;this.canStartNewIterator()&&this.isRunning();){const c=o.pop();if(c)this.iteratorsPendingCreation++,this.sourceStateGetter(c,e).then(s=>{const l=this.context.get(a.KeysStatistics.dereferencedLinks);l&&l.updateStatistic({url:s.link.url,metadata:{...s.metadata,...s.link.metadata}},s.source),this.iteratorsPendingCreation--,this.startIterator(s)}).catch(s=>this.emit("error",s));else break}i&&this.isCloseable(o,!0)&&this.close()}).catch(o=>this.destroy(o))}isCloseable(e,i){return e.isEmpty()&&!this.areIteratorsRunning()}};return bS.LinkedRdfSourcesAsyncRdfIterator=n,bS}var Lte;function NTe(){if(Lte)return yS;Lte=1,Object.defineProperty(yS,"__esModule",{value:!0}),yS.MediatedLinkedRdfSourcesAsyncRdfIterator=void 0;const a=ze(),t=xTe();let u=class extends t.LinkedRdfSourcesAsyncRdfIterator{constructor(r,e,i,o,c,s,l,d,f,h,p,b,_,y){super(r,e,i,o,s,l,d,f?{maxBufferSize:Number.POSITIVE_INFINITY}:void 0),this.wasForcefullyClosed=!1,this.forceSourceType=c,this.mediatorMetadataAccumulate=h,this.mediatorRdfResolveHypermediaLinks=p,this.mediatorRdfResolveHypermediaLinksQueue=b,this.handledUrls={[s]:!0},this.aggregatedStore=f,this.dataFactory=_,this.algebraFactory=y}close(){if(!this.aggregatedStore){super.close();return}this.getLinkQueue().then(r=>{this.isCloseable(r,!1)?(this.aggregatedStore&&setTimeout(()=>this.aggregatedStore.end()),super.close()):this.wasForcefullyClosed=!0}).catch(r=>super.destroy(r))}destroy(r){if(!this.aggregatedStore){super.destroy(r);return}this.getLinkQueue().then(e=>{r??this.isCloseable(e,!1)?(this.aggregatedStore&&setTimeout(()=>this.aggregatedStore.end()),super.destroy(r)):this.wasForcefullyClosed=!0}).catch(e=>super.destroy(e))}isCloseable(r,e){return(e?r.isEmpty():this.wasForcefullyClosed||r.isEmpty())&&!this.areIteratorsRunning()}canStartNewIterator(){return!this.wasForcefullyClosed&&this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||super.canStartNewIterator()}canStartNewIteratorConsiderReadable(){return!this.aggregatedStore}isRunning(){return this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||!this.done}getLinkQueue(){return this.linkQueue||(this.linkQueue=this.mediatorRdfResolveHypermediaLinksQueue.mediate({firstUrl:this.firstUrl,context:this.context}).then(r=>r.linkQueue)),this.linkQueue}async getSourceLinks(r,e){try{const{links:i}=await this.mediatorRdfResolveHypermediaLinks.mediate({context:this.context,metadata:r}),o=this.context.get(a.KeysStatistics.discoveredLinks);if(o)for(const c of i)o.updateStatistic({url:c.url,metadata:{...c.metadata}},e.link);return i.filter(c=>this.handledUrls[c.url]?!1:(this.handledUrls[c.url]=!0,!0))}catch{return[]}}startIterator(r){var e;if(this.aggregatedStore&&!this.aggregatedStore.containedSources.has(r.link.url)){(e=this.aggregatedStore)==null||e.containedSources.add(r.link.url);const i=r.source.queryBindings(this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")),this.context.set(a.KeysQueryOperation.unionDefaultGraph,!0)).map(o=>this.dataFactory.quad(o.get("s"),o.get("p"),o.get("o"),o.get("g")));this.aggregatedStore.import(i).on("end",()=>{super.startIterator(r)})}else super.startIterator(r)}async accumulateMetadata(r,e){return(await this.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:r,appendingMetadata:e,context:this.context})).metadata}updateMetadata(r){var e;super.updateMetadata(r),(e=this.aggregatedStore)==null||e.setBaseMetadata(r,!0)}};return yS.MediatedLinkedRdfSourcesAsyncRdfIterator=u,yS}var mS={},sf={},_S={},OF={},ui={},Mte;function RTe(){if(Mte)return ui;Mte=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.termToString=u,ui.getLiteralValue=n,ui.getLiteralType=r,ui.getLiteralLanguage=e,ui.getLiteralDirection=i,ui.stringToTerm=o,ui.quadToStringQuad=c,ui.stringQuadToQuad=s;const a=ln(),t=new a.DataFactory;function u(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const d=l;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${u(l.subject)} ${u(l.predicate)} ${u(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+u(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function n(l){const d=/^"([^]*)"/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]}function r(l){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function i(l){const d=l.indexOf("--",l.lastIndexOf('"'));if(d>=0){const f=l.slice(d+2,l.length);if(f==="ltr"||f==="rtl")return f;throw new Error(l+" is not a literal with a valid direction")}return""}function o(l,d){if(d=d||t,!l||!l.length)return d.defaultGraph();switch(l[0]){case"_":return d.blankNode(l.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(l.substr(1));case'"':const f=e(l),h=i(l),p=d.namedNode(r(l));return d.literal(n(l),f?{language:f,direction:h}:p);case"<":default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const b=l.slice(2,-2).trim();let _=[],y=0,g=0,m=!1;for(let v=0;v<b.length;v++){const T=b[v];if(T==="<"&&y++,T===">"){if(y===0)throw new Error("Found closing tag without opening tag in "+l);y--}if(T==='"'){let S=!1,x=v;for(;x-- >0&&b[x]==="\\";)S=!S;S||(m=!m)}if(T===" "&&!m&&y===0){for(_.push(b.slice(g,v));b[v+1]===" ";)v+=1;g=v+1}}if(y!==0)throw new Error("Found opening tag without closing tag in "+l);if(_.push(b.slice(g,b.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+l);return _=_.map(v=>v.startsWith("<")&&!v.includes(" ")?v.slice(1,-1):v),d.quad(o(_[0]),o(_[1]),o(_[2]),_[3]?o(_[3]):void 0)}return d.namedNode(l)}}function c(l){return{subject:u(l.subject),predicate:u(l.predicate),object:u(l.object),graph:u(l.graph)}}function s(l,d){return d=d||t,d.quad(o(l.subject,d),o(l.predicate,d),o(l.object,d),o(l.graph,d))}return ui}var Cte;function qte(){return Cte||(Cte=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralDirection=a.getLiteralLanguage=void 0;const t=RTe();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralDirection",{enumerable:!0,get:function(){return t.getLiteralDirection}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return t.termToString}})}(OF)),OF}var cf={},qt={},Bte;function FTe(){if(Bte)return qt;Bte=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.TRIPLE_TERM_NAMES=qt.QUAD_TERM_NAMES=void 0,qt.getTerms=u,qt.getTermsNested=n,qt.getNamedTerms=r,qt.collectNamedTerms=e,qt.forEachTerms=i,qt.forEachTermsNested=o,qt.filterTerms=c,qt.filterTermsNested=s,qt.filterQuadTermNames=l,qt.filterQuadTermNamesNested=d,qt.mapTerms=f,qt.mapTermsNested=h,qt.reduceTerms=p,qt.reduceTermsNested=b,qt.everyTerms=_,qt.everyTermsNested=y,qt.someTerms=g,qt.someTermsNested=m,qt.getValueNestedPath=v,qt.matchTerm=T,qt.matchPattern=S,qt.matchPatternComplete=x,qt.matchPatternMappings=L;const a=ln(),t=new a.DataFactory;qt.QUAD_TERM_NAMES=["subject","predicate","object","graph"],qt.TRIPLE_TERM_NAMES=["subject","predicate","object"];function u(O,w){return w&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function n(O,w){const A=[];for(const E of u(O,w))E.termType==="Quad"?n(E,w).forEach(R=>A.push(R)):A.push(E);return A}function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function e(O,w,A){const E={};return O.forEach(R=>E[R.key]=R.value),w&&(E.subject=E.subject||w("subject"),E.predicate=E.predicate||w("predicate"),E.object=E.object||w("object"),E.graph=E.graph||w("graph")),(A||t).quad(E.subject,E.predicate,E.object,E.graph)}function i(O,w){w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph")}function o(O,w,A=[]){O.subject.termType==="Quad"?o(O.subject,w,[...A,"subject"]):w(O.subject,[...A,"subject"]),O.predicate.termType==="Quad"?o(O.predicate,w,[...A,"predicate"]):w(O.predicate,[...A,"predicate"]),O.object.termType==="Quad"?o(O.object,w,[...A,"object"]):w(O.object,[...A,"object"]),O.graph.termType==="Quad"?o(O.graph,w,[...A,"graph"]):w(O.graph,[...A,"graph"])}function c(O,w){const A=[];return w(O.subject,"subject")&&A.push(O.subject),w(O.predicate,"predicate")&&A.push(O.predicate),w(O.object,"object")&&A.push(O.object),w(O.graph,"graph")&&A.push(O.graph),A}function s(O,w,A=[]){let E=[];return O.subject.termType==="Quad"?E=[...E,...s(O.subject,w,[...A,"subject"])]:w(O.subject,[...A,"subject"])&&E.push(O.subject),O.predicate.termType==="Quad"?E=[...E,...s(O.predicate,w,[...A,"predicate"])]:w(O.predicate,[...A,"predicate"])&&E.push(O.predicate),O.object.termType==="Quad"?E=[...E,...s(O.object,w,[...A,"object"])]:w(O.object,[...A,"object"])&&E.push(O.object),O.graph.termType==="Quad"?E=[...E,...s(O.graph,w,[...A,"graph"])]:w(O.graph,[...A,"graph"])&&E.push(O.graph),E}function l(O,w){const A=[];return w(O.subject,"subject")&&A.push("subject"),w(O.predicate,"predicate")&&A.push("predicate"),w(O.object,"object")&&A.push("object"),w(O.graph,"graph")&&A.push("graph"),A}function d(O,w,A=[]){let E=[];const R=[...A,"subject"];O.subject.termType==="Quad"?E=[...E,...d(O.subject,w,R)]:w(O.subject,R)&&E.push(R);const V=[...A,"predicate"];O.predicate.termType==="Quad"?E=[...E,...d(O.predicate,w,V)]:w(O.predicate,V)&&E.push(V);const $=[...A,"object"];O.object.termType==="Quad"?E=[...E,...d(O.object,w,$)]:w(O.object,$)&&E.push($);const Q=[...A,"graph"];return O.graph.termType==="Quad"?E=[...E,...d(O.graph,w,Q)]:w(O.graph,Q)&&E.push(Q),E}function f(O,w,A){return(A||t).quad(w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph"))}function h(O,w,A,E=[]){return(A||t).quad(O.subject.termType==="Quad"?h(O.subject,w,A,[...E,"subject"]):w(O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,w,A,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?h(O.object,w,A,[...E,"object"]):w(O.object,[...E,"object"]),O.graph.termType==="Quad"?h(O.graph,w,A,[...E,"graph"]):w(O.graph,[...E,"graph"]))}function p(O,w,A){let E=A;return E=w(E,O.subject,"subject"),E=w(E,O.predicate,"predicate"),E=w(E,O.object,"object"),w(E,O.graph,"graph")}function b(O,w,A,E=[]){let R=A;return O.subject.termType==="Quad"?R=b(O.subject,w,R,[...E,"subject"]):R=w(R,O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?R=b(O.predicate,w,R,[...E,"predicate"]):R=w(R,O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?R=b(O.object,w,R,[...E,"object"]):R=w(R,O.object,[...E,"object"]),O.graph.termType==="Quad"?R=b(O.graph,w,R,[...E,"graph"]):R=w(R,O.graph,[...E,"graph"]),R}function _(O,w){return w(O.subject,"subject")&&w(O.predicate,"predicate")&&w(O.object,"object")&&w(O.graph,"graph")}function y(O,w,A=[]){return(O.subject.termType==="Quad"?y(O.subject,w,[...A,"subject"]):w(O.subject,[...A,"subject"]))&&(O.predicate.termType==="Quad"?y(O.predicate,w,[...A,"predicate"]):w(O.predicate,[...A,"predicate"]))&&(O.object.termType==="Quad"?y(O.object,w,[...A,"object"]):w(O.object,[...A,"object"]))&&(O.graph.termType==="Quad"?y(O.graph,w,[...A,"graph"]):w(O.graph,[...A,"graph"]))}function g(O,w){return w(O.subject,"subject")||w(O.predicate,"predicate")||w(O.object,"object")||w(O.graph,"graph")}function m(O,w,A=[]){return(O.subject.termType==="Quad"?m(O.subject,w,[...A,"subject"]):w(O.subject,[...A,"subject"]))||(O.predicate.termType==="Quad"?m(O.predicate,w,[...A,"predicate"]):w(O.predicate,[...A,"predicate"]))||(O.object.termType==="Quad"?m(O.object,w,[...A,"object"]):w(O.object,[...A,"object"]))||(O.graph.termType==="Quad"?m(O.graph,w,[...A,"graph"]):w(O.graph,[...A,"graph"]))}function v(O,w){if(w.length===0)return O;if(O.termType==="Quad")return v(O[w[0]],w.slice(1));throw new Error(`Tried to get ${w[0]} from term of type ${O.termType}`)}function T(O,w){return!w||w.termType==="Variable"||w.termType==="Quad"&&O.termType==="Quad"&&x(O,w)||w.equals(O)}function S(O,w,A,E,R){return T(O.subject,w)&&T(O.predicate,A)&&T(O.object,E)&&T(O.graph,R)}function x(O,w){return S(O,w.subject,w.predicate,w.object,w.graph)}function L(O,w,A={}){const E={};function R(V,$){return _(V,(Q,ne)=>{var ie,fe;const J=$[ne];switch(Q.termType){case"Variable":return A.skipVarMapping&&J.termType==="Variable"||((fe=(ie=E[Q.value])===null||ie===void 0?void 0:ie.equals(J))!==null&&fe!==void 0?fe:(E[Q.value]=J,!0));case"Quad":return J.termType==="Quad"&&R(Q,J);default:return Q.equals(J)}})}return R(w,O)&&(A.returnMappings?E:!0)}return qt}var vn={},$te;function DTe(){if($te)return vn;$te=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.TERM_TYPES=void 0,vn.uniqTerms=t,vn.getTermsOfType=u,vn.getNamedNodes=n,vn.getBlankNodes=r,vn.getLiterals=e,vn.getVariables=i,vn.getDefaultGraphs=o,vn.getQuads=c;const a=qte();vn.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function t(s){const l={};return s.filter(d=>{const f=(0,a.termToString)(d);return!(f in l)&&(l[f]=!0)})}function u(s,l){return s.filter(d=>d.termType===l)}function n(s){return u(s,"NamedNode")}function r(s){return u(s,"BlankNode")}function e(s){return u(s,"Literal")}function i(s){return u(s,"Variable")}function o(s){return u(s,"DefaultGraph")}function c(s){return u(s,"Quad")}return vn}var Vte;function PTe(){return Vte||(Vte=1,function(a){var t=cf&&cf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=cf&&cf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(FTe(),a),u(DTe(),a)}(cf)),cf}var Ute;function Qte(){if(Ute)return _S;Ute=1,Object.defineProperty(_S,"__esModule",{value:!0}),_S.PendingStreamsIndex=void 0;const a=qte(),t=PTe();let u=class Xf{constructor(){this.indexedStreams=new Map,this.allStreams=[]}termToString(r){return r&&r.termType!=="Variable"?(0,a.termToString)(r):Xf.ID_VARIABLE}addPatternListener(r,e,i,o,c){this.allStreams.push(r);const s=`${this.termToString(e)}${Xf.ID_SEPARATOR}${this.termToString(i)}${Xf.ID_SEPARATOR}${this.termToString(o)}${Xf.ID_SEPARATOR}${this.termToString(c)}`;let l=this.indexedStreams.get(s);l||(l=[],this.indexedStreams.set(s,l)),l.push(r)}getPendingStreamsForQuad(r){let e=[(0,t.getTerms)(r).map(o=>(0,a.termToString)(o))];for(let o=0;o<t.QUAD_TERM_NAMES.length;o++){const c=e;e=[];for(const s of c){e.push(s);const l=[...s];l[o]=Xf.ID_VARIABLE,e.push(l)}}const i=[];for(const o of e){const c=this.indexedStreams.get(o.join(Xf.ID_SEPARATOR));c&&i.push(...c)}return i}};return u.ID_VARIABLE="?",u.ID_SEPARATOR=":",_S.PendingStreamsIndex=u,_S}var oi={},Hte;function jTe(){if(Hte)return oi;Hte=1;var a=oi&&oi.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=o[Symbol.asyncIterator],s;return c?c.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s);function l(f){s[f]=o[f]&&function(h){return new Promise(function(p,b){h=o[f](h),d(p,b,h.done,h.value)})}}function d(f,h,p,b){Promise.resolve(b).then(function(_){f({value:_,done:p})},h)}},t=oi&&oi.__await||function(o){return this instanceof t?(this.v=o,this):new t(o)},u=oi&&oi.__asyncGenerator||function(o,c,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=s.apply(o,c||[]),d,f=[];return d={},h("next"),h("throw"),h("return"),d[Symbol.asyncIterator]=function(){return this},d;function h(m){l[m]&&(d[m]=function(v){return new Promise(function(T,S){f.push([m,v,T,S])>1||p(m,v)})})}function p(m,v){try{b(l[m](v))}catch(T){g(f[0][3],T)}}function b(m){m.value instanceof t?Promise.resolve(m.value.v).then(_,y):g(f[0][2],m)}function _(m){p("next",m)}function y(m){p("throw",m)}function g(m,v){m(v),f.shift(),f.length&&p(f[0][0],f[0][1])}};Object.defineProperty(oi,"__esModule",{value:!0}),oi.StreamingStore=void 0;const n=Sa,r=Mt(),e=Qte();let i=class mae{constructor(c=new n.Store){this.pendingStreams=new e.PendingStreamsIndex,this.ended=!1,this.listeners=[],this.store=c}addEndListener(c){this.listeners.push(c)}emitEndEvent(){for(const c of this.listeners)c()}hasEnded(){return this.ended}end(){this.ended=!0;for(const c of this.pendingStreams.allStreams)c.push(null);this.emitEndEvent()}importToListeners(c){c.on("data",s=>{if(!this.ended&&!this.store.countQuads(s.subject,s.predicate,s.object,s.graph))for(const l of this.pendingStreams.getPendingStreamsForQuad(s))l.emit("quad",s),l.isInitialized&&l.push(s)})}static concatStreams(c){return u(this,arguments,function*(){var l,d,f,h;for(const y of c)try{for(var p=!0,b=(d=void 0,a(y)),_;_=yield t(b.next()),l=_.done,!l;){h=_.value,p=!1;try{yield yield t(h)}finally{p=!0}}}catch(g){d={error:g}}finally{try{!p&&!l&&(f=b.return)&&(yield t(f.call(b)))}finally{if(d)throw d.error}}})}import(c){if(this.ended)throw new Error("Attempted to import into an ended StreamingStore");return this.importToListeners(c),this.store.import(c)}match(c,s,l,d){const f=this.store.match(c,s,l,d);let h=f;if(!this.ended){const p=new r.PassThrough({objectMode:!0});this.pendingStreams.addPatternListener(p,c,s,l,d),h=r.Readable.from(mae.concatStreams([f,p])),p.on("quad",_=>{h.emit("quad",_)}),h._pipeSource=f;const b=f._read;f._read=_=>{p.isInitialized=!0,b.call(f,_)}}return h}getStore(){return this.store}};return oi.StreamingStore=i,oi}var Gte;function LTe(){return Gte||(Gte=1,function(a){var t=sf&&sf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=sf&&sf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(Qte(),a),u(jTe(),a)}(sf)),sf}var zte;function MTe(){if(zte)return mS;zte=1,Object.defineProperty(mS,"__esModule",{value:!0}),mS.StreamingStoreMetadata=void 0;const a=Ia(),t=Er(),u=LTe();let n=class extends u.StreamingStore{constructor(e,i){super(e),this.started=!1,this.containedSources=new Set,this.runningIterators=new Set,this.iteratorCreatedListeners=new Set,this.baseMetadata={state:new t.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]},this.metadataAccumulator=i}import(e){return this.ended||super.import(e),e}hasRunningIterators(){return this.runningIterators.size>0}match(e,i,o,c){const s=super.match(e,i,o,c),l=new a.ClosableTransformIterator(s,{autoStart:!1,onClose:()=>{this.runningIterators.delete(l)}});let d=this.getStore().countQuads(e,i,o,c);const f={state:new t.MetadataValidationState,cardinality:{type:"estimate",value:d}};l.setProperty("metadata",f),l.setProperty("lastCount",d),s.on("quad",()=>{l.setProperty("lastCount",++d),this.updateMetadataState(l,d)}),this.runningIterators.add(l);for(const h of this.iteratorCreatedListeners)h();return l}setBaseMetadata(e,i){if(this.baseMetadata={...e},this.baseMetadata.cardinality={type:"exact",value:0},i)for(const o of this.runningIterators){const c=o.getProperty("lastCount");this.updateMetadataState(o,c)}}updateMetadataState(e,i){const o={state:new t.MetadataValidationState,cardinality:{type:"estimate",value:i},variables:[]};this.metadataAccumulator(this.baseMetadata,o).then(c=>{c.state=new t.MetadataValidationState;const s=e.getProperty("metadata");e.setProperty("metadata",c),s==null||s.state.invalidate()}).catch(()=>{})}addIteratorCreatedListener(e){this.iteratorCreatedListeners.add(e)}removeIteratorCreatedListener(e){this.iteratorCreatedListeners.delete(e)}};return mS.StreamingStoreMetadata=n,mS}var kte;function Xte(){if(kte)return pS;kte=1,Object.defineProperty(pS,"__esModule",{value:!0}),pS.QuerySourceHypermedia=void 0;const a=bF(),t=ze(),u=gt(),n=bh(),r=Mt(),e=ht(),i=NTe(),o=MTe();let c=class{constructor(l,d,f,h,p,b,_,y,g){this.referenceValue=d,this.cacheSize=l,this.firstUrl=d,this.forceSourceType=f,this.maxIterators=h,this.mediators=b,this.aggregateStore=p,this.logWarning=_,this.dataFactory=y,this.bindingsFactory=g,this.sourcesState=new n.LRUCache({max:this.cacheSize})}async getSelectorShape(l){return(await this.getSourceCached({url:this.firstUrl},{},l,this.getAggregateStore(l))).source.getSelectorShape(l)}queryBindings(l,d,f){const h=this.getAggregateStore(d);if(h&&l.type==="pattern"&&h.started)return new a.QuerySourceRdfJs(h,d.getSafe(t.KeysInitQuery.dataFactory),this.bindingsFactory).queryBindings(l,d);this.sourcesState.size===0&&this.getSourceCached({url:this.firstUrl},{},d,h).catch(y=>_.destroy(y));const p=d.getSafe(t.KeysInitQuery.dataFactory),b=new e.Factory(p),_=new i.MediatedLinkedRdfSourcesAsyncRdfIterator(this.cacheSize,l,f,d,this.forceSourceType,this.firstUrl,this.maxIterators,(y,g)=>this.getSourceCached(y,g,d,h),h,this.mediators.mediatorMetadataAccumulate,this.mediators.mediatorRdfResolveHypermediaLinks,this.mediators.mediatorRdfResolveHypermediaLinksQueue,p,b);if(h){h.started=!0;const y=()=>_.kickstart();h.addIteratorCreatedListener(y),_.on("end",()=>h.removeIteratorCreatedListener(y))}return _}queryQuads(l,d){return new u.TransformIterator(async()=>(await this.getSourceCached({url:this.firstUrl},{},d,this.getAggregateStore(d))).source.queryQuads(l,d))}async queryBoolean(l,d){return await(await this.getSourceCached({url:this.firstUrl},{},d,this.getAggregateStore(d))).source.queryBoolean(l,d)}async queryVoid(l,d){return await(await this.getSourceCached({url:this.firstUrl},{},d,this.getAggregateStore(d))).source.queryVoid(l,d)}async getSource(l,d,f,h){var m,v;l.context&&(f=f.merge(l.context));let p=l.url,b,_;if(this.forceSourceType==="sparql"&&((m=f.get(t.KeysQueryOperation.querySources))==null?void 0:m.length)===1)b=new r.Readable,b.read=()=>null,{metadata:_}=await this.mediators.mediatorMetadataAccumulate.mediate({context:f,mode:"initialize"});else try{const T=await this.mediators.mediatorDereferenceRdf.mediate({context:f,url:p});p=T.url;const S=await this.mediators.mediatorMetadata.mediate({context:f,url:p,quads:T.data,triples:(v=T.metadata)==null?void 0:v.triples});S.data.on("error",()=>{}),_=(await this.mediators.mediatorMetadataExtract.mediate({context:f,url:p,metadata:S.metadata,headers:T.headers,requestTime:T.requestTime})).metadata,b=S.data,l.transform&&(b=await l.transform(b))}catch(T){b=new r.Readable,b.read=()=>(setTimeout(()=>b.emit("error",T)),null),{metadata:_}=await this.mediators.mediatorMetadataAccumulate.mediate({context:f,mode:"initialize"}),this.logWarning(`Metadata extraction for ${p} failed: ${T.message}`)}h==null||h.setBaseMetadata(_,!1),h==null||h.containedSources.add(l.url),h==null||h.import(b);const{source:y,dataset:g}=await this.mediators.mediatorQuerySourceIdentifyHypermedia.mediate({context:f,forceSourceType:l.url===this.firstUrl?this.forceSourceType:void 0,handledDatasets:d,metadata:_,quads:b,url:p});return g&&(d[g]=!0),{link:l,source:y,metadata:_,handledDatasets:d}}getSourceCached(l,d,f,h){let p=this.sourcesState.get(l.url);return p||(p=this.getSource(l,d,f,h),(l.url===this.firstUrl||h===void 0)&&this.sourcesState.set(l.url,p),p)}getAggregateStore(l){let d;if(this.aggregateStore){const f=l.get(t.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores);if(f)return d=f.get(this.firstUrl),d||(d=new o.StreamingStoreMetadata(void 0,async(h,p)=>(await this.mediators.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:h,appendingMetadata:p,context:l})).metadata),f.set(this.firstUrl,d)),d}}toString(){return`QuerySourceHypermedia(${this.firstUrl})`}};return pS.QuerySourceHypermedia=c,pS}var Jte;function CTe(){if(Jte)return hS;Jte=1,Object.defineProperty(hS,"__esModule",{value:!0}),hS.ActorQuerySourceIdentifyHypermedia=void 0;const a=N3(),t=ze(),u=Te(),n=Xt(),r=Xte();let e=class extends a.ActorQuerySourceIdentify{constructor(o){super(o)}async test(o){return typeof o.querySourceUnidentified.value!="string"?(0,u.failTest)(`${this.name} requires a single query source with a URL value to be present in the context.`):(0,u.passTestVoid)()}async run(o){var s;const c=o.context.getSafe(t.KeysInitQuery.dataFactory);return{querySource:{source:new r.QuerySourceHypermedia(this.cacheSize,o.querySourceUnidentified.value,o.querySourceUnidentified.type,this.maxIterators,this.aggregateTraversalStore&&!!((s=o.querySourceUnidentified.context)!=null&&s.get(t.KeysQuerySourceIdentify.traverse)),{mediatorMetadata:this.mediatorMetadata,mediatorMetadataExtract:this.mediatorMetadataExtract,mediatorMetadataAccumulate:this.mediatorMetadataAccumulate,mediatorDereferenceRdf:this.mediatorDereferenceRdf,mediatorQuerySourceIdentifyHypermedia:this.mediatorQuerySourceIdentifyHypermedia,mediatorRdfResolveHypermediaLinks:this.mediatorRdfResolveHypermediaLinks,mediatorRdfResolveHypermediaLinksQueue:this.mediatorRdfResolveHypermediaLinksQueue},l=>this.logWarn(o.context,l),c,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,o.context,c)),context:o.querySourceUnidentified.context??new u.ActionContext}}}};return hS.ActorQuerySourceIdentifyHypermedia=e,hS}var Kte;function qTe(){return Kte||(Kte=1,function(a){var t=of&&of.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=of&&of.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(CTe(),a),u(Xte(),a)}(of)),of}var lf={},gS={},Wte;function BTe(){if(Wte)return gS;Wte=1,Object.defineProperty(gS,"__esModule",{value:!0}),gS.ActorRdfJoinNone=void 0;const a=nn(),t=ze(),u=Te(),n=Xt(),r=Er(),e=gt();let i=class extends a.ActorRdfJoin{constructor(c){super(c,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(c){return c.entries.length>0?(0,u.failTest)(`Actor ${this.name} can only join zero entries`):await this.getJoinCoefficients(c,void 0)}async getOutput(c){const s=c.context.getSafe(t.KeysInitQuery.dataFactory),l=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s);return{result:{bindingsStream:new e.ArrayIterator([l.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new r.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}}async getJoinCoefficients(c,s){return(0,u.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},s)}};return gS.ActorRdfJoinNone=i,gS}var Yte;function $Te(){return Yte||(Yte=1,function(a){var t=lf&&lf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=lf&&lf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(BTe(),a)}(lf)),lf}var df={},vS={},ff={},TS={},Zte;function VTe(){if(Zte)return TS;Zte=1,Object.defineProperty(TS,"__esModule",{value:!0}),TS.ActorRdfJoinMultiBind=void 0;const a=nn(),t=ze(),u=Te(),n=Xt(),r=wt(),e=gt(),i=ht();let o=class _ae extends a.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0,isLeaf:!1})}static createBindStream(s,l,d,f,h,p,b){const _=s==="depth-first",y=g=>{const m=d.map(T=>(0,r.materializeOperation)(T,g,p,b,{bindFilter:!0})),v=T=>T.merge(g);return new e.TransformIterator(async()=>(await f(m,g)).transform({map:v}),{maxBufferSize:128,autoStart:_})};switch(s){case"depth-first":return new e.MultiTransformIterator(l,{autoStart:!1,multiTransform:y,optional:h});case"breadth-first":return new e.UnionIterator(l.transform({map:y,optional:h}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${s}`)}}async getOutput(s,l){const d=s.context.getSafe(t.KeysInitQuery.dataFactory),f=new i.Factory(d),h=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,d),p=l.entriesSorted;this.logDebug(s.context,"First entry for Bind Join: ",()=>({entry:p[0].operation,cardinality:p[0].metadata.cardinality,order:p[0].metadata.order,availableOrders:p[0].metadata.availableOrders}));for(const[m,v]of p.entries())m!==0&&v.output.bindingsStream.close();const b=p[0].output,_=[...p];_.splice(0,1);const y=s.context.set(t.KeysQueryOperation.joinLeftMetadata,p[0].metadata).set(t.KeysQueryOperation.joinRightMetadatas,_.map(m=>m.metadata));return{result:{type:"bindings",bindingsStream:_ae.createBindStream(this.bindOrder,b.bindingsStream,_.map(m=>m.operation),async(m,v)=>{const T=m.length===1?m[0]:f.createJoin(m,m.every(x=>!x.metadata));return(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:T,context:y==null?void 0:y.set(t.KeysQueryOperation.joinBindings,v)})).bindingsStream},!1,f,h),metadata:()=>this.constructResultMetadata(p,p.map(m=>m.metadata),s.context)},physicalPlanMetadata:{bindIndex:l.entriesUnsorted.indexOf(p[0]),bindOperation:p[0].operation,bindOperationCardinality:p[0].metadata.cardinality,bindOrder:this.bindOrder}}}canBindWithOperation(s){let l=!0;return i.Util.recurseOperation(s,{[i.Algebra.types.EXTEND](){return l=!1,!1},[i.Algebra.types.GROUP](){return l=!1,!1}}),l}async getJoinCoefficients(s,l){let{metadatas:d}=l;const f=s.entries.map((O,w)=>({...O,metadata:d[w]})),h=await a.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,f,s.context);if(h.isFailed())return h;const p=h.get();d=p.map(O=>O.metadata);const b=a.ActorRdfJoin.getRequestInitialTimes(d),_=a.ActorRdfJoin.getRequestItemTimes(d),y=[...p],g=[...b],m=[..._];if(y.splice(0,1),g.splice(0,1),m.splice(0,1),y.some(O=>!this.canBindWithOperation(O.operation)))return(0,u.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);if(y.some(O=>O.operationModified))return(0,u.failTest)(`Actor ${this.name} can not be used over remaining entries with modified operations`);const v=_.some(O=>O>0);if(d[0].cardinality.value*this.minMaxCardinalityRatio/(v?1:3)>Math.max(...d.map(O=>O.cardinality.value)))return(0,u.failTest)(`Actor ${this.name} can only run if the smallest stream is much smaller than largest stream`);const T=await Promise.all(y.map(async O=>(await this.mediatorJoinSelectivity.mediate({entries:[p[0],O],context:s.context})).selectivity*this.selectivityModifier)),S=y.map((O,w)=>O.metadata.cardinality.value*T[w]).reduce((O,w)=>O+w,0),x=g.reduce((O,w)=>O+w,0),L=m.reduce((O,w)=>O+w,0);return(0,u.passTestWithSideData)({iterations:d[0].cardinality.value*S,persistedItems:0,blockingItems:0,requestTime:b[0]+d[0].cardinality.value*(_[0]+x+S*L)},{...l,entriesUnsorted:f,entriesSorted:p})}};return TS.ActorRdfJoinMultiBind=o,TS}var ere;function tre(){return ere||(ere=1,function(a){var t=ff&&ff.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=ff&&ff.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(VTe(),a)}(ff)),ff}var rre;function UTe(){if(rre)return vS;rre=1,Object.defineProperty(vS,"__esModule",{value:!0}),vS.ActorRdfJoinOptionalBind=void 0;const a=tre(),t=nn(),u=ze(),n=Te(),r=Xt(),e=wt(),i=ht();let o=class extends t.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0,isLeaf:!1,requiresVariableOverlap:!0})}async getOutput(s){const l=s.context.getSafe(u.KeysInitQuery.dataFactory),d=new i.Factory(l),f=await r.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,l);s.entries[1].output.bindingsStream.close();const h=s.context.set(u.KeysQueryOperation.joinLeftMetadata,await s.entries[0].output.metadata()).set(u.KeysQueryOperation.joinRightMetadatas,[await s.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:a.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,s.entries[0].output.bindingsStream,[s.entries[1].operation],async(b,_)=>{const y=b[0];return(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:y,context:h==null?void 0:h.set(u.KeysQueryOperation.joinBindings,_)})).bindingsStream},!0,d,f),metadata:async()=>await this.constructResultMetadata(s.entries,await t.ActorRdfJoin.getMetadatas(s.entries),s.context,{},!0)}}}async getJoinCoefficients(s,l){const{metadatas:d}=l,f=t.ActorRdfJoin.getRequestInitialTimes(d),h=t.ActorRdfJoin.getRequestItemTimes(d);if(s.entries[1].operation.type===i.Algebra.types.EXTEND||s.entries[1].operation.type===i.Algebra.types.GROUP)return(0,n.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);const p=(await this.mediatorJoinSelectivity.mediate({entries:s.entries,context:s.context})).selectivity*this.selectivityModifier;return(0,n.passTestWithSideData)({iterations:d[0].cardinality.value*d[1].cardinality.value*p,persistedItems:0,blockingItems:0,requestTime:f[0]+d[0].cardinality.value*(h[0]+f[1]+p*d[1].cardinality.value*h[1])},l)}};return vS.ActorRdfJoinOptionalBind=o,vS}var nre;function QTe(){return nre||(nre=1,function(a){var t=df&&df.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=df&&df.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(UTe(),a)}(df)),df}var hf={},wS={},pf={},SS={},ire;function HTe(){if(ire)return SS;ire=1,Object.defineProperty(SS,"__esModule",{value:!0}),SS.ActorTermComparatorFactory=void 0;const a=Te();let t=class extends a.Actor{constructor(n){super(n),this.mediatorQueryOperation=n.mediatorQueryOperation,this.mediatorFunctionFactory=n.mediatorFunctionFactory,this.mediatorMergeBindingsContext=n.mediatorMergeBindingsContext}};return SS.ActorTermComparatorFactory=t,SS}var are;function GTe(){return are||(are=1,function(a){var t=pf&&pf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=pf&&pf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(HTe(),a)}(pf)),pf}var OS={},ure;function zTe(){if(ure)return OS;ure=1,Object.defineProperty(OS,"__esModule",{value:!0}),OS.TermComparatorExpressionEvaluator=void 0;let a=class{constructor(u,n,r){this.internalEvaluator=u,this.equalityFunction=n,this.lessThanFunction=r,this._TERM_ORDERING_PRIORITY={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5}}orderTypes(u,n){if(u===n)return 0;if(u===void 0)return-1;if(n===void 0)return 1;if(u.termType!==n.termType)return this._TERM_ORDERING_PRIORITY[u.termType]<this._TERM_ORDERING_PRIORITY[n.termType]?-1:1;if(u.equals(n))return 0;if(u.termType==="Quad"&&n.termType==="Quad"){const r=this.orderTypes(u.subject,n.subject);if(r!==0)return r;const e=this.orderTypes(u.predicate,n.predicate);if(e!==0)return e;const i=this.orderTypes(u.object,n.object);return i!==0?i:this.orderTypes(u.graph,n.graph)}return u.termType==="Literal"?this.orderLiteralTypes(u,n):this.comparePrimitives(u.value,n.value)}orderLiteralTypes(u,n){const r=this.internalEvaluator.transformer.transformLiteral(u),e=this.internalEvaluator.transformer.transformLiteral(n);try{return this.equalityFunction.applyOnTerms([r,e],this.internalEvaluator).typedValue?0:this.lessThanFunction.applyOnTerms([r,e],this.internalEvaluator).typedValue?-1:1}catch{const i=this.comparePrimitives(r.dataType,e.dataType);return i!==0?i:this.comparePrimitives(r.str(),e.str())}}comparePrimitives(u,n){return u===n?0:u<n?-1:1}};return OS.TermComparatorExpressionEvaluator=a,OS}var ore;function kTe(){if(ore)return wS;ore=1,Object.defineProperty(wS,"__esModule",{value:!0}),wS.ActorTermComparatorFactoryExpressionEvaluator=void 0;const a=cte(),t=GTe(),u=ze(),n=Te(),r=Xt(),e=Ae(),i=zTe();let o=class extends t.ActorTermComparatorFactory{async test(s){return(0,n.passTestVoid)()}async run({context:s}){return s=e.prepareEvaluatorActionContext(s),new i.TermComparatorExpressionEvaluator(new a.InternalEvaluator(s,this.mediatorFunctionFactory,this.mediatorQueryOperation,await r.BindingsFactory.create(this.mediatorMergeBindingsContext,s,s.getSafe(u.KeysInitQuery.dataFactory))),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,context:s,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LT,context:s,requireTermExpression:!0}))}};return wS.ActorTermComparatorFactoryExpressionEvaluator=o,wS}var sre;function XTe(){return sre||(sre=1,function(a){var t=hf&&hf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=hf&&hf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(kTe(),a)}(hf)),hf}var yf={},AS={},cre;function JTe(){if(cre)return AS;cre=1,Object.defineProperty(AS,"__esModule",{value:!0}),AS.ActorRdfJoinMultiSmallestFilterBindings=void 0;const a=nn(),t=ze(),u=Te(),n=Xt(),r=Ia(),e=wt(),i=gt(),o=ht();let c=class extends a.ActorRdfJoin{constructor(l){super(l,{logicalType:"inner",physicalName:"multi-smallest-filter-bindings",limitEntries:2,limitEntriesMin:!0,isLeaf:!1})}async sortJoinEntries(l,d){let{entries:f}=await this.mediatorJoinEntriesSort.mediate({entries:l,context:d});f=f.sort((g,m)=>g.operationModified&&!m.operationModified?-1:0);const h=f.splice(0,1)[0];let p,b=-1,_=0;for(const[g,m]of f.entries()){const v=h.metadata.variables.filter(T=>m.metadata.variables.some(S=>T.variable.equals(S.variable))).length;(!p||v>_||v===_&&(m.metadata.variables.length<p.metadata.variables.length||m.metadata.variables.length===p.metadata.variables.length&&m.metadata.cardinality.value<p.metadata.cardinality.value))&&(p=m,b=g,_=v)}if(_===0)return(0,u.failTest)(`Actor ${this.name} can only join with common variables`);const y=f;return y.splice(b,1),(0,u.passTest)({first:h,second:p,remaining:y})}async getOutput(l){const d=l.context.getSafe(t.KeysInitQuery.dataFactory),f=new o.Factory(d),h=await a.ActorRdfJoin.getEntriesWithMetadatas([...l.entries]),{first:p,second:b,remaining:_}=(await this.sortJoinEntries(h,l.context)).getOrThrow(),y=p.output.bindingsStream;p.output.bindingsStream=y.clone();const g=p.metadata.variables.filter(A=>b.metadata.variables.some(E=>A.variable.equals(E.variable))),m={},v=y.clone().map(A=>A.filter((E,R)=>g.some(V=>V.variable.equals(R)))).filter(A=>{const E=(0,n.bindingsToString)(A);return!(E in m)&&(m[E]=!0)}),T=new r.ChunkedIterator(v,this.blockSize,{autoStart:!1}),S=(0,e.getOperationSource)(b.operation),L={output:{type:"bindings",bindingsStream:new i.UnionIterator(T.map(A=>S.source.queryBindings(b.operation,S.context?l.context.merge(S.context):l.context,{filterBindings:{bindings:A,metadata:p.metadata}}))),metadata:b.output.metadata},operation:b.operation,operationModified:!0};b.output.bindingsStream.destroy();const O={output:(0,e.getSafeBindings)(await this.mediatorJoin.mediate({type:l.type,entries:[p,L],context:l.context.set(t.KeysRdfJoin.lastPhysicalJoin,this.physicalName)})),operation:f.createJoin([p.operation,L.operation],!1),operationModified:!0},w=_;return w.unshift(O),{result:await this.mediatorJoin.mediate({type:l.type,entries:w,context:l.context}),physicalPlanMetadata:{firstIndex:h.indexOf(p),secondIndex:h.indexOf(b)}}}async getJoinCoefficients(l,d){let{metadatas:f}=d;if(l.context.get(t.KeysRdfJoin.lastPhysicalJoin)===this.physicalName)return(0,u.failTest)(`Actor ${this.name} can not be called recursively`);f=[...f];const h=await this.sortJoinEntries(l.entries.map((L,O)=>({...L,metadata:f[O]})),l.context);if(h.isFailed())return h;const{first:p,second:b,remaining:_}=h.get(),y=(0,e.getOperationSource)(b.operation);if(!y)return(0,u.failTest)(`Actor ${this.name} can only process if entries[1] has a source`);const g=b.operation,m=await y.source.getSelectorShape(l.context);if(!(0,e.doesShapeAcceptOperation)(m,g,{filterBindings:!0}))return(0,u.failTest)(`Actor ${this.name} can only process if entries[1] accept filterBindings`);f=[p.metadata,b.metadata,..._.map(L=>L.metadata)];const v=a.ActorRdfJoin.getRequestInitialTimes(f),T=a.ActorRdfJoin.getRequestItemTimes(f),{selectivity:S}=await this.mediatorJoinSelectivity.mediate({entries:[p,b],context:l.context}),x=_.reduce((L,O)=>L*O.metadata.cardinality.value*this.selectivityModifier,1);return(0,u.passTestWithSideData)({iterations:S*this.selectivityModifier*b.metadata.cardinality.value*x,persistedItems:p.metadata.cardinality.value,blockingItems:p.metadata.cardinality.value,requestTime:v[0]+f[0].cardinality.value*T[0]+v[1]+x*T[1]},d)}};return AS.ActorRdfJoinMultiSmallestFilterBindings=c,AS}var lre;function KTe(){return lre||(lre=1,function(a){var t=yf&&yf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=yf&&yf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(JTe(),a)}(yf)),yf}var bf={},ES={},dre;function WTe(){if(dre)return ES;dre=1,Object.defineProperty(ES,"__esModule",{value:!0}),ES.ActorQueryProcessExplainLogical=void 0;const a=KA(),t=ze(),u=Te();let n=class extends a.ActorQueryProcess{constructor(e){super(e)}async test(e){return(e.context.get(t.KeysInitQuery.explain)??e.context.get(new u.ActionContextKey("explain")))!=="logical"?(0,u.failTest)(`${this.name} can only explain in 'logical' mode.`):(0,u.passTestVoid)()}async run(e){let{operation:i,context:o}=await this.queryProcessor.parse(e.query,e.context);return{operation:i,context:o}=await this.queryProcessor.optimize(i,o),{result:{explain:!0,type:"logical",data:i}}}};return ES.ActorQueryProcessExplainLogical=n,ES}var fre;function YTe(){return fre||(fre=1,function(a){var t=bf&&bf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=bf&&bf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(WTe(),a)}(bf)),bf}var mf={},IS={},hre;function ZTe(){if(hre)return IS;hre=1,Object.defineProperty(IS,"__esModule",{value:!0}),IS.ActorQueryProcessExplainParsed=void 0;const a=KA(),t=ze(),u=Te();let n=class extends a.ActorQueryProcess{constructor(e){super(e)}async test(e){return(e.context.get(t.KeysInitQuery.explain)??e.context.get(new u.ActionContextKey("explain")))!=="parsed"?(0,u.failTest)(`${this.name} can only explain in 'parsed' mode.`):(0,u.passTestVoid)()}async run(e){const{operation:i}=await this.queryProcessor.parse(e.query,e.context);return{result:{explain:!0,type:"parsed",data:i}}}};return IS.ActorQueryProcessExplainParsed=n,IS}var pre;function e2e(){return pre||(pre=1,function(a){var t=mf&&mf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=mf&&mf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(ZTe(),a)}(mf)),mf}var _f={},xS={},gf={},yre;function bre(){if(yre)return gf;yre=1,Object.defineProperty(gf,"__esModule",{value:!0}),gf.numberToString=gf.MemoryPhysicalQueryPlanLogger=void 0;const a=ir();let t=class{constructor(){this.planNodes=new Map}logOperation(r,e,i,o,c,s){const l={actor:c,logicalOperator:r,physicalOperator:e,rawNode:i,children:[],metadata:s};if(this.planNodes.set(i,l),this.rootNode){if(!o)throw new Error("Detected more than one parent-less node");const d=this.planNodes.get(o);if(!d)throw new Error("Could not find parent node");d.children.push(l)}else{if(o)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=l}}stashChildren(r,e){const i=this.planNodes.get(r);if(!i)throw new Error("Could not find plan node");i.children=e?i.children.filter(e):[]}unstashChild(r,e){const i=this.planNodes.get(r);if(i){const o=this.planNodes.get(e);if(!o)throw new Error("Could not find plan parent node");o.children.push(i)}}appendMetadata(r,e){const i=this.planNodes.get(r);i&&(i.metadata={...i.metadata,...e})}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(r){var i;const e={logical:r.logicalOperator,physical:r.physicalOperator,...this.getLogicalMetadata(r.rawNode),...this.compactMetadata(r.metadata)};if(r.children.length>0&&(e.children=r.children.map(o=>this.planNodeToJson(o))),e.physical==="bind"&&e.children){const o={};for(const s of e.children){const l=((i=s.children)==null?void 0:i.at(-1))??s,d=this.getPlanHash(l).join(",");o[d]||(o[d]=[]),o[d].push(s)}const c=[];for(const s of Object.values(o))c.push({occurrences:s.length,firstOccurrence:s[0]});e.childrenCompact=c,delete e.children}return e}getPlanHash(r){let e=[`${r.logical}-${r.physical}`];return r.children?e=[...e,...r.children.flatMap(i=>this.getPlanHash(i))]:r.childrenCompact&&(e=[...e,...r.childrenCompact.flatMap(i=>this.getPlanHash(i.firstOccurrence))]),e}compactMetadata(r){return Object.fromEntries(Object.entries(r).map(([e,i])=>[e,this.compactMetadataValue(i)]))}compactMetadataValue(r){return r&&typeof r=="object"&&"termType"in r?this.getLogicalMetadata(r):r}getLogicalMetadata(r){var i;const e={};if("type"in r){const o=r;switch((i=o.metadata)!=null&&i.scopedSource&&(e.source=o.metadata.scopedSource.source.toString()),o.type){case"pattern":e.pattern=this.quadToString(o);break;case"project":e.variables=o.variables.map(c=>c.value);break}}return e}quadToString(r){return`${(0,a.termToString)(r.subject)} ${(0,a.termToString)(r.predicate)} ${(0,a.termToString)(r.object)}${r.graph.termType==="DefaultGraph"?"":` ${(0,a.termToString)(r.graph)}`}`}toCompactString(){const r=this.toJson(),e=[],i=new Map;if("logical"in r?this.nodeToCompactString(e,i,"",r):e.push("Empty"),i.size>0){e.push(""),e.push("sources:");for(const[o,c]of i.entries())e.push(`  ${c}: ${o}`)}return e.join(`
`)}nodeToCompactString(r,e,i,o,c){let s;o.source&&(s=e.get(o.source),s===void 0&&(s=e.size,e.set(o.source,s))),r.push(`${i}${o.logical}${o.physical?`(${o.physical})`:""}${o.pattern?` (${o.pattern})`:""}${o.variables?` (${o.variables.join(",")})`:""}${o.bindOperation?` bindOperation:(${o.bindOperation.pattern}) bindCardEst:${o.bindOperationCardinality.type==="estimate"?"~":""}${u(o.bindOperationCardinality.value)}`:""}${o.cardinality?` cardEst:${o.cardinality.type==="estimate"?"~":""}${u(o.cardinality.value)}`:""}${o.source?` src:${s}`:""}${o.cardinalityReal?` cardReal:${o.cardinalityReal}`:""}${o.timeSelf?` timeSelf:${u(o.timeSelf)}ms`:""}${o.timeLife?` timeLife:${u(o.timeLife)}ms`:""}${c?` ${c}`:""}`);for(const l of o.children??[])this.nodeToCompactString(r,e,`${i}  `,l);for(const l of o.childrenCompact??[])this.nodeToCompactString(r,e,`${i}  `,l.firstOccurrence,`compacted-occurrences:${l.occurrences}`)}};gf.MemoryPhysicalQueryPlanLogger=t;function u(n){return n.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:3})}return gf.numberToString=u,gf}var mre;function t2e(){if(mre)return xS;mre=1,Object.defineProperty(xS,"__esModule",{value:!0}),xS.ActorQueryProcessExplainPhysical=void 0;const a=KA(),t=ze(),u=Te(),n=bre();let r=class extends a.ActorQueryProcess{constructor(i){super(i)}async test(i){const o=i.context.get(t.KeysInitQuery.explain)??i.context.get(new u.ActionContextKey("explain"));return o!=="physical"&&o!=="physical-json"?(0,u.failTest)(`${this.name} can only explain in 'physical' or 'physical-json' mode.`):(0,u.passTestVoid)()}async run(i){let{operation:o,context:c}=await this.queryProcessor.parse(i.query,i.context);({operation:o,context:c}=await this.queryProcessor.optimize(o,c));const s=new n.MemoryPhysicalQueryPlanLogger;c=c.set(t.KeysInitQuery.physicalQueryPlanLogger,s);const l=await this.queryProcessor.evaluate(o,c);switch(l.type){case"bindings":await l.bindingsStream.toArray();break;case"quads":await l.quadStream.toArray();break;case"boolean":await l.execute();break;case"void":await l.execute();break}const d=i.context.get(t.KeysInitQuery.explain)??i.context.getSafe(new u.ActionContextKey("explain"));return{result:{explain:!0,type:d,data:d==="physical"?s.toCompactString():s.toJson()}}}};return xS.ActorQueryProcessExplainPhysical=r,xS}var _re;function r2e(){return _re||(_re=1,function(a){var t=_f&&_f.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=_f&&_f.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(t2e(),a),u(bre(),a)}(_f)),_f}var vf={},NS={},gre;function n2e(){if(gre)return NS;gre=1,Object.defineProperty(NS,"__esModule",{value:!0}),NS.ActorOptimizeQueryOperationPruneEmptySourceOperations=void 0;const a=Dn(),t=ze(),u=Te(),n=wt(),r=ht();let e=class dO extends a.ActorOptimizeQueryOperation{constructor(o){super(o)}async test(o){return(0,n.getOperationSource)(o.operation)?(0,u.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,u.passTestVoid)()}async run(o){const c=o.context.getSafe(t.KeysInitQuery.dataFactory),s=new r.Factory(c);let l=o.operation;const d=[],f=this;r.Util.recurseOperation(l,{[r.Algebra.types.UNION](p){return f.collectMultiOperationInputs(p.input,d,r.Algebra.types.PATTERN),!0},[r.Algebra.types.ALT](p){return f.collectMultiOperationInputs(p.input,d,r.Algebra.types.LINK),!1},[r.Algebra.types.SERVICE](){return!1}});const h=new Set;return await Promise.all(d.map(async p=>{const b=p.type==="link"?s.createPattern(c.variable("s"),p.iri,c.variable("o")):p;await this.hasSourceResults(s,(0,n.getOperationSource)(p),b,o.context)||h.add(p)})),h.size>0&&(this.logDebug(o.context,`Pruning ${h.size} source-specific operations`),l=r.Util.mapOperation(l,{[r.Algebra.types.UNION](p,b){return f.mapMultiOperation(p,h,_=>b.createUnion(_))},[r.Algebra.types.ALT](p,b){return f.mapMultiOperation(p,h,_=>b.createAlt(_))}},s),l=r.Util.mapOperation(l,{[r.Algebra.types.PROJECT](p,b){return dO.hasEmptyOperation(p)?{recurse:!1,result:b.createUnion([])}:{recurse:!0,result:p}},[r.Algebra.types.LEFT_JOIN](p){return dO.hasEmptyOperation(p.input[1])?{recurse:!0,result:p.input[0]}:{recurse:!0,result:p}}},s)),{operation:l,context:o.context}}static hasEmptyOperation(o){let c=!1;return r.Util.recurseOperation(o,{[r.Algebra.types.UNION](s){return s.input.every(l=>dO.hasEmptyOperation(l))&&(c=!0),!1},[r.Algebra.types.ALT](s){return s.input.length===0&&(c=!0),!1},[r.Algebra.types.LEFT_JOIN](s){return dO.hasEmptyOperation(s.input[0])&&(c=!0),!1}}),c}collectMultiOperationInputs(o,c,s){for(const l of o)(0,n.getOperationSource)(l)&&l.type===s&&c.push(l)}mapMultiOperation(o,c,s){const l=o.input.filter(d=>!c.has(d));return l.length===o.input.length?{result:o,recurse:!0}:l.length===0?{result:s([]),recurse:!1}:l.length===1?{result:l[0],recurse:!0}:{result:s(l),recurse:!0}}async hasSourceResults(o,c,s,l){var f;if(((f=c.context)==null?void 0:f.get(t.KeysQuerySourceIdentify.traverse))??l.get(t.KeysQuerySourceIdentify.traverse))return!0;if(this.useAskIfSupported){const h=o.createAsk(s);if((0,n.doesShapeAcceptOperation)(await c.source.getSelectorShape(l),h))return c.source.queryBoolean(h,l)}const d=c.source.queryBindings(s,l);return new Promise((h,p)=>{d.on("error",p),d.getProperty("metadata",b=>{d.destroy(),h(b.cardinality.value>0)})})}};return NS.ActorOptimizeQueryOperationPruneEmptySourceOperations=e,NS}var vre;function i2e(){return vre||(vre=1,function(a){var t=vf&&vf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=vf&&vf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(n2e(),a)}(vf)),vf}var Tf={},RS={},Tre;function a2e(){if(Tre)return RS;Tre=1,Object.defineProperty(RS,"__esModule",{value:!0}),RS.ActorHttpRetry=void 0;const a=Ki(),t=ze(),u=Te();let n=class Jf extends a.ActorHttp{constructor(e){super(e),this.activeDelays={},this.httpInvalidator=e.httpInvalidator,this.httpInvalidator.addInvalidateListener(i=>this.handleHttpInvalidateEvent(i)),this.mediatorHttp=e.mediatorHttp}async test(e){if(e.context.has(Jf.keyWrapped))return(0,u.failTest)(`${this.name} can only wrap a request once`);const i=e.context.get(t.KeysHttp.httpRetryCount);return!i||i<1?(0,u.failTest)(`${this.name} requires a retry count greater than zero to function`):(0,u.passTest)({time:0})}async run(e){const i=a.ActorHttp.getInputUrl(e.input),o=e.context.getSafe(t.KeysHttp.httpRetryCount)+1,c=e.context.get(t.KeysHttp.httpRetryDelayFallback)??0,s=e.context.get(t.KeysHttp.httpRetryDelayLimit),l=e.context.get(t.KeysHttp.httpRetryStatusCodes);for(let d=1;d<=o;d++){const f=i.host in this.activeDelays?this.activeDelays[i.host].date.getTime()-Date.now():c;if(s&&f>s){this.logWarn(e.context,"Requested delay exceeds the limit",()=>({url:i.href,delay:f,delayDate:this.activeDelays[i.host].date.toISOString(),delayLimit:s,currentAttempt:`${d} / ${o}`}));break}else f>0&&d>1&&(this.logDebug(e.context,"Delaying request",()=>({url:i.href,delay:f,currentAttempt:`${d} / ${o}`})),await Jf.sleep(f));const h=await this.mediatorHttp.mediate({...e,context:e.context.set(Jf.keyWrapped,!0)});if(h.ok)return h;if(l&&l.includes(h.status)){this.logDebug(e.context,"Status code in force retry list, forcing retry",()=>({url:i.href,status:h.status,statusText:h.statusText,currentAttempt:`${d} / ${o}`}));continue}if(h.status===504){this.logDebug(e.context,"Received proxy timeout",()=>({url:i.href,status:h.status,statusText:h.statusText,currentAttempt:`${d} / ${o}`}));continue}if(h.status===429||h.status===503||h.status===405&&h.headers.has("retry-after")){const p=h.headers.get("retry-after");if(p){const b=Jf.parseRetryAfterHeader(p);b?(i.host in this.activeDelays&&clearTimeout(this.activeDelays[i.host].timeout),this.activeDelays[i.host]={date:b,timeout:setTimeout(()=>delete this.activeDelays[i.host],b.getTime()-Date.now())}):this.logDebug(e.context,"Invalid Retry-After header value from server",()=>({url:i.href,status:h.status,statusText:h.statusText,retryAfterHeader:p,currentAttempt:`${d} / ${o}`}))}this.logDebug(e.context,"Server temporarily unavailable",()=>({url:i.href,status:h.status,statusText:h.statusText,currentAttempt:`${d} / ${o}`}));continue}if(h.status>=400&&h.status<500){this.logDebug(e.context,"Server reported client-side error",()=>({url:i.href,status:h.status,statusText:h.statusText,currentAttempt:`${d} / ${o}`}));break}if(h.status>=500&&h.status<600){this.logDebug(e.context,"Server-side error encountered, terminating",()=>({url:i.href,status:h.status,statusText:h.statusText,currentAttempt:`${d} / ${o}`}));break}this.logDebug(e.context,"Request failed",()=>({url:i.href,status:h.status,statusText:h.statusText,currentAttempt:`${d} / ${o}`}))}throw new Error(`Request failed: ${i.href}`)}static async sleep(e){e>0&&await new Promise(i=>setTimeout(i,e))}static parseRetryAfterHeader(e){if(Jf.numberRegex.test(e))return new Date(Date.now()+Number.parseInt(e,10)*1e3);if(Jf.dateRegex.test(e))return new Date(e)}handleHttpInvalidateEvent(e){const i=e.url?new URL(e.url).host:void 0;for(const o of Object.keys(this.activeDelays))(!i||o===i)&&(clearTimeout(this.activeDelays[o].timeout),delete this.activeDelays[o])}};return RS.ActorHttpRetry=n,n.dateRegex=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), [0-9]{2} (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) [0-9]{4} [0-9]{2}:[0-9]{2}:[0-9]{2} GMT$/u,n.numberRegex=/^[0-9]+$/u,n.keyWrapped=new u.ActionContextKey("urn:comunica:actor-http-retry#wrapped"),RS}var wre;function u2e(){return wre||(wre=1,function(a){var t=Tf&&Tf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Tf&&Tf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(a2e(),a)}(Tf)),Tf}var wf={},FS={},Sre;function o2e(){if(Sre)return FS;Sre=1,Object.defineProperty(FS,"__esModule",{value:!0}),FS.ActorHttpLimitRate=void 0;const a=Ki(),t=Te();let u=class CD extends a.ActorHttp{constructor(r){super(r),this.mediatorHttp=r.mediatorHttp,this.httpInvalidator=r.httpInvalidator,this.httpInvalidator.addInvalidateListener(e=>this.handleHttpInvalidateEvent(e)),this.correctionMultiplier=r.correctionMultiplier,this.failureMultiplier=r.failureMultiplier,this.limitByDefault=r.limitByDefault,this.allowOverlap=r.allowOverlap,this.hostData=new Map}async test(r){return r.context.has(CD.keyWrapped)?(0,t.failTest)(`${this.name} can only wrap a request once`):(0,t.passTest)({time:0})}async run(r){const e=a.ActorHttp.getInputUrl(r.input);let i=this.hostData.get(e.host);i||(i={latestRequestTimestamp:0,rateLimited:this.limitByDefault,requestInterval:Number.NEGATIVE_INFINITY},this.hostData.set(e.host,i));const o=Date.now();let c=0;i.rateLimited&&(c=Math.max(0,i.latestRequestTimestamp+i.requestInterval-o)),i.latestRequestTimestamp=o+(this.allowOverlap?0:1)*c,c>0&&(this.logDebug(r.context,"Delaying request",()=>({url:e.href,requestInterval:i.requestInterval,currentDelay:c})),await new Promise(l=>setTimeout(l,c)));const s=l=>{const d=(l?1:this.failureMultiplier)*(Date.now()-o-c);i.requestInterval<0?i.requestInterval=Math.round(d*this.correctionMultiplier):i.requestInterval+=Math.round(this.correctionMultiplier*(d-i.requestInterval)),!l&&!i.rateLimited&&(this.logDebug(r.context,"Marking host as rate-limited",()=>({host:e.host})),i.rateLimited=!0)};try{const l=await this.mediatorHttp.mediate({...r,context:r.context.set(CD.keyWrapped,!0)});return s(l.ok),l}catch(l){throw s(!1),l}}handleHttpInvalidateEvent(r){if(r.url){const e=new URL(r.url).host;this.hostData.delete(e)}else this.hostData.clear()}};return FS.ActorHttpLimitRate=u,u.keyWrapped=new t.ActionContextKey("urn:comunica:actor-http-limit-rate#wrapped"),FS}var Ore;function s2e(){return Ore||(Ore=1,function(a){var t=wf&&wf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=wf&&wf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(o2e(),a)}(wf)),wf}var Sf={},DS={},Are;function c2e(){if(Are)return DS;Are=1,Object.defineProperty(DS,"__esModule",{value:!0}),DS.ActorQuerySourceIdentifySerialized=void 0;const a=N3(),t=Te(),u=tte(),n=Mt();let r=class extends a.ActorQuerySourceIdentify{constructor(i){super(i)}async test(i){return this.isStringSource(i.querySourceUnidentified)?(0,t.passTestVoid)():(0,t.failTest)(`${this.name} requires a single query source with serialized type to be present in the context.`)}async run(i){return await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{type:"rdfjs",value:await this.getRdfSource(i.context,i.querySourceUnidentified),context:i.querySourceUnidentified.context},context:i.context})}async getRdfSource(i,o){const c=new n.Readable({objectMode:!0});c._read=()=>{},c.push(o.value),c.push(null);const s={context:i,handle:{metadata:{baseIRI:o.baseIRI},data:c,context:i},handleMediaType:o.mediaType},l=await this.mediatorRdfParse.mediate(s);return await(0,u.storeStream)(l.handle.data)}isStringSource(i){return"type"in i?i.type==="serialized":typeof i.value!="string"?!1:"mediaType"in i}};return DS.ActorQuerySourceIdentifySerialized=r,DS}var Ere;function l2e(){return Ere||(Ere=1,function(a){var t=Sf&&Sf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Sf&&Sf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(c2e(),a)}(Sf)),Sf}var Of={},PS={},Ire;function d2e(){if(Ire)return PS;Ire=1,Object.defineProperty(PS,"__esModule",{value:!0}),PS.ActorRdfJoinMultiBindSource=void 0;const a=nn(),t=ze(),u=Te(),n=Ia(),r=wt(),e=gt(),i=ht();let o=class extends a.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind-source",canHandleUndefs:!0})}async getOutput(s,l){const d=s.context.getSafe(t.KeysInitQuery.dataFactory),f=new i.Factory(d),h=l.entriesSorted;this.logDebug(s.context,"First entry for Bind Join Source: ",()=>({entry:h[0].operation,cardinality:h[0].metadata.cardinality,order:h[0].metadata.order,availableOrders:h[0].metadata.availableOrders}));for(const[T,S]of h.entries())T!==0&&S.output.bindingsStream.close();const p=h[0].output,b=h[0].metadata,_=[...h];_.splice(0,1);const y=(0,r.getOperationSource)(_[0].operation),g=this.createOperationFromEntries(f,_),m=new n.ChunkedIterator(p.bindingsStream,this.blockSize,{autoStart:!1});return{result:{type:"bindings",bindingsStream:new e.UnionIterator(m.map(T=>y.source.queryBindings(g,y.context?s.context.merge(y.context):s.context,{joinBindings:{bindings:T,metadata:b}}))),metadata:()=>this.constructResultMetadata(h,h.map(T=>T.metadata),s.context)},physicalPlanMetadata:{bindIndex:l.entriesUnsorted.indexOf(h[0])}}}async sortJoinEntries(s,l){const d=await a.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,s,l);return d.isFailed()?d:(s=d.get(),s=s.sort((f,h)=>f.operationModified&&!h.operationModified?-1:0),(0,u.passTest)(s))}async getJoinCoefficients(s,l){let{metadatas:d}=l;const f=s.context.getSafe(t.KeysInitQuery.dataFactory),h=new i.Factory(f),p=s.entries.map((w,A)=>({...w,metadata:d[A]})),b=await this.sortJoinEntries(p,s.context);if(b.isFailed())return b;const _=b.get();d=_.map(w=>w.metadata);const y=a.ActorRdfJoin.getRequestInitialTimes(d),g=a.ActorRdfJoin.getRequestItemTimes(d),m=[..._];[...y],[...g],m.splice(0,1);const v=m.map(w=>(0,r.getOperationSource)(w.operation));if(v.some(w=>!w))return(0,u.failTest)(`Actor ${this.name} can not bind on remaining operations without source annotation`);if(v.some(w=>w!==v[0]))return(0,u.failTest)(`Actor ${this.name} can not bind on remaining operations with non-equal source annotation`);const T=v[0],S=this.createOperationFromEntries(h,m),x=await T.source.getSelectorShape(s.context);if(!(0,r.doesShapeAcceptOperation)(x,S,{joinBindings:!0}))return(0,u.failTest)(`Actor ${this.name} detected a source that can not handle passing down join bindings`);const L=await Promise.all(m.map(async w=>(await this.mediatorJoinSelectivity.mediate({entries:[_[0],w],context:s.context})).selectivity*this.selectivityModifier)),O=m.map((w,A)=>w.metadata.cardinality.value*L[A]).reduce((w,A)=>w+A,0);return(0,u.passTestWithSideData)({iterations:1,persistedItems:d[0].cardinality.value,blockingItems:d[0].cardinality.value,requestTime:y[0]+d[0].cardinality.value*g[0]+y[1]+O*g[1]},{...l,entriesUnsorted:p,entriesSorted:_})}createOperationFromEntries(s,l){return l.length===1?l[0].operation:s.createJoin(l.map(d=>d.operation),!0)}};return PS.ActorRdfJoinMultiBindSource=o,PS}var xre;function f2e(){return xre||(xre=1,function(a){var t=Of&&Of.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Of&&Of.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(d2e(),a)}(Of)),Of}var Af={},jS={},Nre;function h2e(){if(Nre)return jS;Nre=1,Object.defineProperty(jS,"__esModule",{value:!0}),jS.ActorOptimizeQueryOperationJoinConnected=void 0;const a=Dn(),t=ze(),u=Te(),n=ht();let r=class ME extends a.ActorOptimizeQueryOperation{async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(t.KeysInitQuery.dataFactory),c=new n.Factory(o);return{operation:n.Util.mapOperation(i.operation,{join(l,d){return{recurse:!1,result:ME.cluster(l,d)}}},c),context:i.context}}static cluster(i,o){const c=i.input.map(f=>({inScopeVariables:Object.fromEntries(n.Util.inScopeVariables(f).map(h=>[h.value,!0])),entries:[f]}));let s,l=c;do s=l,l=ME.clusterIteration(s);while(s.length!==l.length);const d=l.map(f=>f.entries.length===1?f.entries[0]:o.createJoin(f.entries));return d.length===1?d[0]:o.createJoin(d,!1)}static clusterIteration(i){const o=[];for(const c of i){let s=!1;for(const l of o)if(ME.haveOverlappingVariables(c.inScopeVariables,l.inScopeVariables)){l.entries=[...l.entries,...c.entries],l.inScopeVariables={...l.inScopeVariables,...c.inScopeVariables},s=!0;break}s||o.push({inScopeVariables:c.inScopeVariables,entries:c.entries})}return o}static haveOverlappingVariables(i,o){for(const c of Object.keys(i))if(o[c])return!0;return!1}};return jS.ActorOptimizeQueryOperationJoinConnected=r,jS}var Rre;function p2e(){return Rre||(Rre=1,function(a){var t=Af&&Af.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Af&&Af.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(h2e(),a)}(Af)),Af}var Ef={},LS={},Fre;function y2e(){if(Fre)return LS;Fre=1,Object.defineProperty(LS,"__esModule",{value:!0}),LS.ActorOptimizeQueryOperationBgpToJoin=void 0;const a=Dn(),t=ze(),u=Te(),n=ht();let r=class extends a.ActorOptimizeQueryOperation{async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(t.KeysInitQuery.dataFactory),c=new n.Factory(o);return{operation:n.Util.mapOperation(i.operation,{bgp(l,d){return{recurse:!1,result:d.createJoin(l.patterns)}}},c),context:i.context}}};return LS.ActorOptimizeQueryOperationBgpToJoin=r,LS}var Dre;function b2e(){return Dre||(Dre=1,function(a){var t=Ef&&Ef.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ef&&Ef.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(y2e(),a)}(Ef)),Ef}var If={},MS={},Pre;function m2e(){if(Pre)return MS;Pre=1,Object.defineProperty(MS,"__esModule",{value:!0}),MS.ActorOptimizeQueryOperationJoinBgp=void 0;const a=Dn(),t=ze(),u=Te(),n=ht();let r=class extends a.ActorOptimizeQueryOperation{async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(t.KeysInitQuery.dataFactory),c=new n.Factory(o);return{operation:n.Util.mapOperation(i.operation,{join(l,d){return l.input.every(f=>f.type==="bgp")?{recurse:!1,result:d.createBgp(l.input.flatMap(f=>f.patterns))}:{recurse:!1,result:l}}},c),context:i.context}}};return MS.ActorOptimizeQueryOperationJoinBgp=r,MS}var jre;function _2e(){return jre||(jre=1,function(a){var t=If&&If.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=If&&If.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(m2e(),a)}(If)),If}var xf={},CS={},Lre;function g2e(){if(Lre)return CS;Lre=1,Object.defineProperty(CS,"__esModule",{value:!0}),CS.ActorOptimizeQueryOperationAssignSourcesExhaustive=void 0;const a=Dn(),t=RR(),u=ze(),n=Te(),r=wt(),e=ht();let i=class extends a.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,n.passTestVoid)()}async run(c){const s=c.context.getSafe(u.KeysInitQuery.dataFactory),l=new e.Factory(s),d=c.context.get(u.KeysQueryOperation.querySources)??[];if(d.length===0)return{operation:c.operation,context:c.context};if(d.length===1){const f=d[0],h=c.context.get(u.KeysRdfUpdateQuads.destination);if(!h||f.source.referenceValue===(0,t.getDataDestinationValue)(h))try{const p=await f.source.getSelectorShape(c.context);if((0,r.doesShapeAcceptOperation)(p,c.operation))return{operation:(0,r.assignOperationSource)(c.operation,f),context:c.context}}catch{}}return{operation:this.assignExhaustive(l,c.operation,d),context:c.context.delete(u.KeysInitQuery.queryString)}}assignExhaustive(c,s,l){const d=this;return e.Util.mapOperation(s,{[e.Algebra.types.PATTERN](f,h){return l.length===1?{result:(0,r.assignOperationSource)(f,l[0]),recurse:!1}:{result:h.createUnion(l.map(p=>(0,r.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.LINK](f,h){return l.length===1?{result:(0,r.assignOperationSource)(f,l[0]),recurse:!1}:{result:h.createAlt(l.map(p=>(0,r.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.NPS](f,h){return l.length===1?{result:(0,r.assignOperationSource)(f,l[0]),recurse:!1}:{result:h.createAlt(l.map(p=>(0,r.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.SERVICE](f){return{result:f,recurse:!1}},[e.Algebra.types.CONSTRUCT](f,h){return{result:h.createConstruct(d.assignExhaustive(c,f.input,l),f.template),recurse:!1}},[e.Algebra.types.DELETE_INSERT](f,h){return{result:h.createDeleteInsert(f.delete,f.insert,f.where?d.assignExhaustive(c,f.where,l):void 0),recurse:!1}}},c)}};return CS.ActorOptimizeQueryOperationAssignSourcesExhaustive=i,CS}var Mre;function v2e(){return Mre||(Mre=1,function(a){var t=xf&&xf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=xf&&xf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(g2e(),a)}(xf)),xf}var Nf={},qS={},Cre;function T2e(){if(Cre)return qS;Cre=1,Object.defineProperty(qS,"__esModule",{value:!0}),qS.ActorOptimizeQueryOperationDescribeToConstructsSubject=void 0;const a=Dn(),t=ze(),u=Te(),n=ht();let r=class extends a.ActorOptimizeQueryOperation{constructor(i){super(i)}async test(i){return i.operation.type!==n.Algebra.types.DESCRIBE?(0,u.failTest)(`Actor ${this.name} only supports describe operations, but got ${i.operation.type}`):(0,u.passTest)(!0)}async run(i){const o=i.context.getSafe(t.KeysInitQuery.dataFactory),c=new n.Factory(o),s=i.operation,l=s.terms.filter(f=>f.termType!=="Variable").map(f=>{const h=[o.quad(f,o.variable("__predicate"),o.variable("__object"))];return h.forEach(b=>b.type="pattern"),{input:{type:n.Algebra.types.BGP,patterns:h},template:h,type:"construct"}});if(l.length!==s.terms.length){let f=[];s.terms.filter(h=>h.termType==="Variable").forEach((h,p)=>{const b=[o.quad(h,o.variable(`__predicate${p}`),o.variable(`__object${p}`))];b.forEach(_=>_.type="pattern"),f=[...f,...b]}),l.push({input:{type:n.Algebra.types.JOIN,input:[s.input,{type:n.Algebra.types.BGP,patterns:f}]},template:f,type:n.Algebra.types.CONSTRUCT})}return{operation:c.createUnion(l,!1),context:i.context}}};return qS.ActorOptimizeQueryOperationDescribeToConstructsSubject=r,qS}var qre;function w2e(){return qre||(qre=1,function(a){var t=Nf&&Nf.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Nf&&Nf.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(T2e(),a)}(Nf)),Nf}var AF,Bre;function S2e(){return Bre||(Bre=1,AF=function(a){const t=new(Hue()).LoggerVoid,u=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^4.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),n=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^4.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),r=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^4.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),e=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^4.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),i=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^4.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),o=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^4.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),c=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^4.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),s=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify-hypermedia/^4.0.0/components/ActorQuerySourceIdentifyHypermedia.jsonld#ActorQuerySourceIdentifyHypermedia_default_bus"}),l=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference/^4.0.0/components/ActorDereference.jsonld#ActorDereference_default_bus"}),d=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^4.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus"}),f=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^4.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),h=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^4.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),p=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/^4.0.0/components/ActorRdfMetadata.jsonld#ActorRdfMetadata_default_bus"}),b=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^4.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),_=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/^4.0.0/components/ActorRdfMetadataExtract.jsonld#ActorRdfMetadataExtract_default_bus"}),y=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^4.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),g=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^4.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),m=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/^4.0.0/components/ActorRdfResolveHypermediaLinks.jsonld#ActorRdfResolveHypermediaLinks_default_bus"}),v=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links-queue/^4.0.0/components/ActorRdfResolveHypermediaLinksQueue.jsonld#ActorRdfResolveHypermediaLinksQueue_default_bus"}),T=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^4.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus"}),S=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-hypermedia/^4.0.0/components/ActorRdfUpdateHypermedia.jsonld#ActorRdfUpdateHypermedia_default_bus"}),x=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^4.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),L=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-bindings-aggregator-factory/^4.0.0/components/ActorBindingsAggregatorFactory.jsonld#ActorBindingsAggregatorFactory_default_bus"}),O=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-expression-evaluator-factory/^4.0.0/components/ActorExpressionEvaluatorFactory.jsonld#ActorExpressionEvaluatorFactory_default_bus"}),w=new(Ne()).BusFunctionFactory({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-function-factory/^4.0.0/components/ActorFunctionFactory.jsonld#ActorFunctionFactory_default_bus"}),A=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),E=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_fallback_bus"}),R=new(Qt()).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^4.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),V=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^4.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),$=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^4.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),Q=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^4.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),ne=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-term-comparator-factory/^4.0.0/components/ActorTermComparatorFactory.jsonld#ActorTermComparatorFactory_default_bus"}),ie=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^4.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),fe=new(Te()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^4.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"});new(joe()).ActorContextPreprocessConvertShortcuts({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",dataFactory:"@comunica/actor-init-query:dataFactory",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelayFallback:"@comunica/bus-http:http-retry-delay-fallback",httpRetryDelayLimit:"@comunica/bus-http:http-retry-delay-limit",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",invalidateCache:"@comunica/actor-init-query:invalidateCache",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",queryTimestampHighResolution:"@comunica/actor-init-query:queryTimestampHighResolution",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:n,busFailMessage:"Context preprocessing failed"}),new(qoe()).ActorContextPreprocessSetDefaults({logger:t,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:n,busFailMessage:"Context preprocessing failed"}),new($oe()).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:n,busFailMessage:"Context preprocessing failed"});const J=new(f8()).ActorContextPreprocessQuerySourceSkolemize({name:"urn:comunica:default:context-preprocess/actors#query-source-skolemize",bus:n,busFailMessage:"Context preprocessing failed"}),_e=new(y8()).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:n});new(Koe()).ActorHashBindingsMurmur({name:"urn:comunica:default:hash-bindings/actors#murmur",bus:r,busFailMessage:"Failed to obtaining hash functions for bindings"});const Fe=new(Ir()).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:r});new(tse()).ActorHashQuadsMurmur({name:"urn:comunica:default:hash-quads/actors#murmur",bus:e,busFailMessage:"Failed to obtaining hash functions for quads"}),new(ise()).ActorOptimizeQueryOperationRewriteCopy({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(use()).ActorOptimizeQueryOperationRewriteMove({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(lse()).ActorOptimizeQueryOperationRewriteAdd({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const ve=new(_se()).ActorOptimizeQueryOperationGroupSources({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});new(vse()).ActorOptimizeQueryOperationConstructDistinct({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const te=new(y8()).MediatorCombinePipeline({filterFailures:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:i});new(Sse()).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:o,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'}),new(cle()).ActorQueryParseGraphql({name:"urn:comunica:default:query-parse/actors#graphql",bus:o,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'});const Le=new(Ir()).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:o});new(gle()).ActorQueryResultSerializeJson({mediaTypePriorities:{"application/json":1},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#json",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Tle()).ActorQueryResultSerializeSimple({mediaTypePriorities:{simple:.9},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"urn:comunica:default:query-result-serialize/actors#simple",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Sle()).ActorQueryResultSerializeSparqlCsv({mediaTypePriorities:{"text/csv":.75},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"urn:comunica:default:query-result-serialize/actors#csv",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(xle()).ActorQueryResultSerializeSparqlTsv({mediaTypePriorities:{"text/tab-separated-values":.75},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"urn:comunica:default:query-result-serialize/actors#sparql-tsv",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Fle()).ActorQueryResultSerializeSparqlXml({mediaTypePriorities:{"application/sparql-results+xml":.8},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"urn:comunica:default:query-result-serialize/actors#sparql-xml",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Ple()).ActorQueryResultSerializeTable({columnWidth:50,mediaTypePriorities:{table:.6},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"urn:comunica:default:query-result-serialize/actors#table",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Xle()).ActorQueryResultSerializeTree({mediaTypePriorities:{tree:.5},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"urn:comunica:default:query-result-serialize/actors#tree",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"});const Ce=new(Ir()).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:c}),Ve=new(va()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:c}),ge=new(va()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:c}),we=new(Sh()).MediatorNumber({field:"filterFactor",type:"max",ignoreFailures:!0,name:"urn:comunica:default:query-source-identify-hypermedia/mediators#main",bus:s}),G=new(ede()).ActorDereferenceFallback({name:"urn:comunica:default:dereference/actors#fallback",bus:l,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}"}),D=new(Ir()).MediatorRace({name:"urn:comunica:default:dereference/mediators#main",bus:l}),j=new(Ir()).MediatorRace({name:"urn:comunica:default:dereference-rdf/mediators#main",bus:d});new(nde()).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:f,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"});const I=new(Sh()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:f});new(ode()).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:h,busFailMessage:"Determining join selectivity failed: none of the configured actors were able to calculate selectivities"});const N=new(Sh()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:h});new(lde()).ActorRdfMetadataPrimaryTopic({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:"urn:comunica:default:rdf-metadata/actors#primary-topic",bus:p,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"}),new(fde()).ActorRdfMetadataAll({name:"urn:comunica:default:rdf-metadata/actors#all",bus:p,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"});const B=new(Ir()).MediatorRace({name:"urn:comunica:default:rdf-metadata/mediators#main",bus:p});new(yde()).ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:b,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(mde()).ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:b,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(gde()).ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:b,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"});const X=new(va()).MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:b});new(Sde()).ActorRdfMetadataExtractHydraControls({name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-controls",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Ade()).ActorRdfMetadataExtractHydraCount({predicates:["http://www.w3.org/ns/hydra/core#totalItems","http://rdfs.org/ns/void#triples"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-count",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Ide()).ActorRdfMetadataExtractHydraPagesize({predicates:["http://www.w3.org/ns/hydra/core#itemsPerPage"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-pagesize",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Nde()).ActorRdfMetadataExtractRequestTime({name:"urn:comunica:default:rdf-metadata-extract/actors#request-time",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Fde()).ActorRdfMetadataExtractAllowHttpMethods({name:"urn:comunica:default:rdf-metadata-extract/actors#allow-http-methods",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Pde()).ActorRdfMetadataExtractPutAccepted({name:"urn:comunica:default:rdf-metadata-extract/actors#put-accepted",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Lde()).ActorRdfMetadataExtractPatchSparqlUpdate({name:"urn:comunica:default:rdf-metadata-extract/actors#patch-sparql-update",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Cde()).ActorRdfMetadataExtractSparqlService({inferHttpsEndpoint:!0,name:"urn:comunica:default:rdf-metadata-extract/actors#sparql-service",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new($de()).ActorRdfMetadataExtractVoid({name:"urn:comunica:default:rdf-metadata-extract/actors#void",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"});const H=new(va()).MediatorCombineUnion({filterFailures:!0,field:"metadata",name:"urn:comunica:default:rdf-metadata-extract/mediators#main",bus:_});new(dfe()).ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:y,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(Sfe()).ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:y,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(Hfe()).ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:y,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(Jfe()).ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:y,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"});const K=new(Ir()).MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:y}),z=new(va()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:y});new(Yfe()).ActorRdfParseHtml({busRdfParseHtml:g,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:y,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(dhe()).ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:g,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(hhe()).ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:g,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(mhe()).ActorRdfResolveHypermediaLinksNext({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#next",bus:m,busFailMessage:"Hypermedia link resolution failed: none of the configured actors were able to resolve links from metadata"});const Z=new(Ir()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links/mediators#main",bus:m});new(She()).ActorRdfResolveHypermediaLinksQueueFifo({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#fifo",bus:v,busFailMessage:"Link queue creation failed: none of the configured actors were able to create a link queue starting from ${action.firstUrl}"});const de=new(Ir()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/mediators#main",bus:v});new(Ihe()).ActorRdfSerializeN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},name:"urn:comunica:default:rdf-serialize/actors#n3",bus:T,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(Lhe()).ActorRdfSerializeJsonLd({jsonStringifyIndentSpaces:2,mediaTypePriorities:{"application/ld+json":1},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-serialize/actors#jsonld",bus:T,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(Yhe()).ActorRdfSerializeShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-serialize/actors#shaclc",bus:T,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"});const le=new(Ir()).MediatorRace({name:"urn:comunica:default:rdf-serialize/mediators#serialize",bus:T}),De=new(va()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-serialize/mediators#mediaType",bus:T}),Qe=new(va()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat",bus:T}),je=new(Ir()).MediatorRace({name:"urn:comunica:default:rdf-update-hypermedia/mediators#main",bus:S});new(ipe()).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:x,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const oe=new(Ir()).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:x}),se=new(Ir()).MediatorRace({name:"urn:comunica:default:bindings-aggregator-factory/mediators#main",bus:L}),ye=new(Ir()).MediatorRace({name:"urn:comunica:default:expression-evaluator-factory/mediators#main",bus:O});new(ope()).ActorFunctionFactoryExpressionBnode({name:"urn:comunica:default:function-factory/actors#expression-function-bnode",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(lpe()).ActorFunctionFactoryExpressionBound({name:"urn:comunica:default:function-factory/actors#expression-function-bound",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hpe()).ActorFunctionFactoryExpressionCoalesce({name:"urn:comunica:default:function-factory/actors#expression-function-coalesce",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bpe()).ActorFunctionFactoryExpressionConcat({name:"urn:comunica:default:function-factory/actors#expression-function-concat",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Tpe()).ActorFunctionFactoryExpressionExtensions({name:"urn:comunica:default:function-factory/actors#expression-function-extensions",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ope()).ActorFunctionFactoryExpressionIf({name:"urn:comunica:default:function-factory/actors#expression-function-if",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ipe()).ActorFunctionFactoryExpressionLogicalAnd({name:"urn:comunica:default:function-factory/actors#expression-function-logical-and",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Rpe()).ActorFunctionFactoryExpressionLogicalOr({name:"urn:comunica:default:function-factory/actors#expression-function-logical-or",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ppe()).ActorFunctionFactoryExpressionSameTerm({name:"urn:comunica:default:function-factory/actors#expression-function-same-term",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Mpe()).ActorFunctionFactoryTermAbs({name:"urn:comunica:default:function-factory/actors#term-function-abs",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($pe()).ActorFunctionFactoryTermAddition({name:"urn:comunica:default:function-factory/actors#term-function-addition",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Qpe()).ActorFunctionFactoryTermCeil({name:"urn:comunica:default:function-factory/actors#term-function-ceil",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zpe()).ActorFunctionFactoryTermContains({name:"urn:comunica:default:function-factory/actors#term-function-contains",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Jpe()).ActorFunctionFactoryTermDatatype({name:"urn:comunica:default:function-factory/actors#term-function-datatype",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ype()).ActorFunctionFactoryTermDay({name:"urn:comunica:default:function-factory/actors#term-function-day",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(t0e()).ActorFunctionFactoryTermDivision({name:"urn:comunica:default:function-factory/actors#term-function-division",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(i0e()).ActorFunctionFactoryTermEncodeForUri({name:"urn:comunica:default:function-factory/actors#term-function-encode-for-uri",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(o0e()).ActorFunctionFactoryTermEquality({name:"urn:comunica:default:function-factory/actors#term-function-equality",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(l0e()).ActorFunctionFactoryTermFloor({name:"urn:comunica:default:function-factory/actors#term-function-floor",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(h0e()).ActorFunctionFactoryTermHours({name:"urn:comunica:default:function-factory/actors#term-function-hours",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(b0e()).ActorFunctionFactoryTermIri({name:"urn:comunica:default:function-factory/actors#term-function-iri",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(g0e()).ActorFunctionFactoryTermIsBlank({name:"urn:comunica:default:function-factory/actors#term-function-is-blank",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(w0e()).ActorFunctionFactoryTermIsIri({name:"urn:comunica:default:function-factory/actors#term-function-is-iri",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(A0e()).ActorFunctionFactoryTermIsLiteral({name:"urn:comunica:default:function-factory/actors#term-function-is-literal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(x0e()).ActorFunctionFactoryTermIsNumeric({name:"urn:comunica:default:function-factory/actors#term-function-is-numeric",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(F0e()).ActorFunctionFactoryTermIsTriple({name:"urn:comunica:default:function-factory/actors#term-function-is-triple",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(j0e()).ActorFunctionFactoryTermLang({name:"urn:comunica:default:function-factory/actors#term-function-lang",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(C0e()).ActorFunctionFactoryTermLangmatches({name:"urn:comunica:default:function-factory/actors#term-function-langmatches",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($0e()).ActorFunctionFactoryTermLcase({name:"urn:comunica:default:function-factory/actors#term-function-lcase",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(H0e()).ActorFunctionFactoryTermMd5({name:"urn:comunica:default:function-factory/actors#term-function-md5",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(k0e()).ActorFunctionFactoryTermMinutes({name:"urn:comunica:default:function-factory/actors#term-function-minutes",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(K0e()).ActorFunctionFactoryTermMonth({name:"urn:comunica:default:function-factory/actors#term-function-month",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Z0e()).ActorFunctionFactoryTermMultiplication({name:"urn:comunica:default:function-factory/actors#term-function-multiplication",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rye()).ActorFunctionFactoryTermNot({name:"urn:comunica:default:function-factory/actors#term-function-not",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aye()).ActorFunctionFactoryTermNow({name:"urn:comunica:default:function-factory/actors#term-function-now",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(sye()).ActorFunctionFactoryTermObject({name:"urn:comunica:default:function-factory/actors#term-function-object",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dye()).ActorFunctionFactoryTermPredicate({name:"urn:comunica:default:function-factory/actors#term-function-predicate",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pye()).ActorFunctionFactoryTermRand({name:"urn:comunica:default:function-factory/actors#term-function-rand",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aG()).ActorFunctionFactoryTermRegex({name:"urn:comunica:default:function-factory/actors#term-function-regex",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_ye()).ActorFunctionFactoryTermReplace({name:"urn:comunica:default:function-factory/actors#term-function-replace",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Tye()).ActorFunctionFactoryTermRound({name:"urn:comunica:default:function-factory/actors#term-function-round",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Oye()).ActorFunctionFactoryTermSeconds({name:"urn:comunica:default:function-factory/actors#term-function-seconds",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Iye()).ActorFunctionFactoryTermSha1({name:"urn:comunica:default:function-factory/actors#term-function-sha1",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Rye()).ActorFunctionFactoryTermSha256({name:"urn:comunica:default:function-factory/actors#term-function-sha256",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Pye()).ActorFunctionFactoryTermSha384({name:"urn:comunica:default:function-factory/actors#term-function-sha384",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Mye()).ActorFunctionFactoryTermSha512({name:"urn:comunica:default:function-factory/actors#term-function-sha512",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Bye()).ActorFunctionFactoryTermStrAfter({name:"urn:comunica:default:function-factory/actors#term-function-str-after",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Uye()).ActorFunctionFactoryTermStrBefore({name:"urn:comunica:default:function-factory/actors#term-function-str-before",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Gye()).ActorFunctionFactoryTermStrDt({name:"urn:comunica:default:function-factory/actors#term-function-str-dt",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Xye()).ActorFunctionFactoryTermStrEnds({name:"urn:comunica:default:function-factory/actors#term-function-str-ends",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Wye()).ActorFunctionFactoryTermStrLang({name:"urn:comunica:default:function-factory/actors#term-function-str-lang",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(e1e()).ActorFunctionFactoryTermStrLen({name:"urn:comunica:default:function-factory/actors#term-function-str-len",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(n1e()).ActorFunctionFactoryTermStrStarts({name:"urn:comunica:default:function-factory/actors#term-function-str-starts",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(g1e()).ActorFunctionFactoryTermStrUuid({name:"urn:comunica:default:function-factory/actors#term-function-str-uuid",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(w1e()).ActorFunctionFactoryTermStr({name:"urn:comunica:default:function-factory/actors#term-function-str",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(A1e()).ActorFunctionFactoryTermSubStr({name:"urn:comunica:default:function-factory/actors#term-function-sub-str",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(x1e()).ActorFunctionFactoryTermSubject({name:"urn:comunica:default:function-factory/actors#term-function-subject",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(F1e()).ActorFunctionFactoryTermSubtraction({name:"urn:comunica:default:function-factory/actors#term-function-subtraction",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(j1e()).ActorFunctionFactoryTermTimezone({name:"urn:comunica:default:function-factory/actors#term-function-timezone",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(C1e()).ActorFunctionFactoryTermTriple({name:"urn:comunica:default:function-factory/actors#term-function-triple",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($1e()).ActorFunctionFactoryTermTz({name:"urn:comunica:default:function-factory/actors#term-function-tz",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Q1e()).ActorFunctionFactoryTermUcase({name:"urn:comunica:default:function-factory/actors#term-function-ucase",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(z1e()).ActorFunctionFactoryTermUnaryMinus({name:"urn:comunica:default:function-factory/actors#term-function-unary-minus",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(J1e()).ActorFunctionFactoryTermUnaryPlus({name:"urn:comunica:default:function-factory/actors#term-function-unary-plus",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Y1e()).ActorFunctionFactoryTermUuid({name:"urn:comunica:default:function-factory/actors#term-function-uuid",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tbe()).ActorFunctionFactoryTermXsdToBoolean({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-boolean",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ibe()).ActorFunctionFactoryTermXsdToDate({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-date",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(obe()).ActorFunctionFactoryTermXsdToDatetime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-datetime",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(lbe()).ActorFunctionFactoryTermXsdToDayTimeDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-day-time-duration",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hbe()).ActorFunctionFactoryTermXsdToDecimal({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-decimal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bbe()).ActorFunctionFactoryTermXsdToDouble({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-double",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gbe()).ActorFunctionFactoryTermXsdToDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-duration",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wbe()).ActorFunctionFactoryTermXsdToFloat({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-float",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Abe()).ActorFunctionFactoryTermXsdToInteger({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-integer",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xbe()).ActorFunctionFactoryTermXsdToString({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-string",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Fbe()).ActorFunctionFactoryTermXsdToTime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-time",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jbe()).ActorFunctionFactoryTermXsdToYearMonthDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-year-month-duration",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Cbe()).ActorFunctionFactoryTermYear({name:"urn:comunica:default:function-factory/actors#term-function-year",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"});const Ie=new(Ir()).MediatorRace({name:"urn:comunica:default:function-factory/mediators#main",bus:w}),U=new(Hbe()).ActorHttpFetch({agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:A,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),F=new(Sh()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#no-fallback",bus:A}),q=new(Sh()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#main",bus:E});new(zbe()).ActorQueryOperationSource({name:"urn:comunica:default:query-operation/actors#source",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const k=new(Sh()).MediatorNumber({field:"httpRequests",type:"min",ignoreFailures:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:R}),ce=new(Ir()).MediatorRace({name:"urn:comunica:default:query-process/mediators#main",bus:V}),be=new(Ir()).MediatorRace({name:"urn:comunica:default:query-source-identify/mediators#main",bus:$}),Se=new(Xbe()).MediatorJoinCoefficientsFixed({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:Q}),Ke=new(Ir()).MediatorRace({name:"urn:comunica:default:term-comparator-factory/mediators#main",bus:ne}),Y=new(Mh()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^4.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator",bus:ie,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Ee=new(Wbe()).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:ie}),Re=new(Mh()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-update-quads-hypermedia/^4.0.0/components/ActorRdfUpdateQuadsHypermedia.jsonld#IActorRdfUpdateQuadsHypermediaArgs_default_invalidator",bus:ie,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),qe=new(Mh()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-retry/^4.0.0/components/ActorHttpRetry.jsonld#IActorHttpQueueArgs_default_invalidator",bus:ie,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Ue=new(Mh()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-limit-rate/^4.0.0/components/ActorHttpLimitRate.jsonld#IActorHttpLimitRateArgs_default_invalidator",bus:ie,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),tt=new(Mh()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:ie,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),ut=new(Mh()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:ie,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),rt=new(va()).MediatorCombineUnion({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:fe});new(Zbe()).ActorRdfJoinEntriesSortSelectivity({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join-entries-sort/actors#selectivity",bus:f,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"}),new(ume()).ActorRdfJoinSingle({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(sme()).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const lt=new(PX()).ActorRdfJoinHash({mediatorHashBindings:Fe,canHandleUndefs:!1,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-hash-def",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),ae=new(PX()).ActorRdfJoinHash({mediatorHashBindings:Fe,canHandleUndefs:!0,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-hash-undef",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),M=new(gme()).ActorRdfJoinSymmetricHash({mediatorHashBindings:Fe,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),P=new(Tme()).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(GA()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(GA()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(GA()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(GA()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Ame()).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(KX()).ActorRdfJoinMinusHash({canHandleUndefs:!1,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#minus-hash-def",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(KX()).ActorRdfJoinMinusHash({canHandleUndefs:!0,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Rme()).ActorDereferenceRdfParse({mediatorDereference:D,mediatorParse:K,mediatorParseMediatypes:z,mediaMappings:{htm:"text/html",html:"text/html",json:"application/json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"},name:"urn:comunica:default:dereference-rdf/actors#parse",bus:d,busFailMessage:"RDF dereferencing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(Pme()).ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:z,mediatorRdfParseHandle:K,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:g,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(Lme()).ActorQueryResultSerializeRdf({mediatorRdfSerialize:le,mediatorMediaTypeCombiner:De,mediatorMediaTypeFormatCombiner:Qe,name:"urn:comunica:default:query-result-serialize/actors#rdf",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Bme()).ActorBindingsAggregatorFactoryGroupConcat({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#group-concat",bus:L,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Vme()).ActorBindingsAggregatorFactoryCount({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#count",bus:L,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Qme()).ActorBindingsAggregatorFactorySample({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#sample",bus:L,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Gme()).ActorBindingsAggregatorFactoryWildcardCount({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#wildcard-count",bus:L,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(kme()).ActorBindingsAggregatorFactoryAverage({mediatorFunctionFactory:Ie,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#average",bus:L,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Jme()).ActorBindingsAggregatorFactorySum({mediatorFunctionFactory:Ie,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#sum",bus:L,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Yme()).ActorFunctionFactoryExpressionIn({mediatorFunctionFactory:Ie,name:"urn:comunica:default:function-factory/actors#expression-function-in",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(t_e()).ActorFunctionFactoryExpressionNotIn({mediatorFunctionFactory:Ie,name:"urn:comunica:default:function-factory/actors#expression-function-not-in",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(i_e()).ActorFunctionFactoryTermGreaterThanEqual({mediatorFunctionFactory:Ie,name:"urn:comunica:default:function-factory/actors#term-function-greater-than-equal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(o_e()).ActorFunctionFactoryTermGreaterThan({mediatorFunctionFactory:Ie,name:"urn:comunica:default:function-factory/actors#term-function-greater-than",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(l_e()).ActorFunctionFactoryTermInequality({mediatorFunctionFactory:Ie,name:"urn:comunica:default:function-factory/actors#term-function-inequality",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(h_e()).ActorFunctionFactoryTermLesserThanEqual({mediatorFunctionFactory:Ie,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than-equal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(b_e()).ActorFunctionFactoryTermLesserThan({mediatorFunctionFactory:Ie,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(__e()).ActorHttpWayback({mediatorHttp:F,name:"urn:comunica:default:http/actors#wayback",bus:E,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),new(X_e()).ActorRdfParseJsonLd({mediatorHttp:q,mediaTypePriorities:{"application/json":.15,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:y,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(W_e()).ActorRdfUpdateHypermediaPatchSparqlUpdate({mediatorHttp:q,name:"urn:comunica:default:rdf-update-hypermedia/actors#patch-sparql-update",bus:S,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(Z_e()).ActorRdfUpdateHypermediaPutLdp({mediatorHttp:q,mediatorRdfSerializeMediatypes:De,mediatorRdfSerialize:le,name:"urn:comunica:default:rdf-update-hypermedia/actors#put-ldp",bus:S,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(sge()).ActorRdfUpdateHypermediaSparql({mediatorHttp:q,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,name:"urn:comunica:default:rdf-update-hypermedia/actors#sparql",bus:S,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(lge()).ActorQueryOperationAsk({mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#ask",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(fge()).ActorQueryOperationBgpJoin({mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#bgp",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(tY()).ActorQueryOperationConstruct({mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#construct",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(_ge()).ActorQueryOperationDistinctIdentity({mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#distinct",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(vge()).ActorQueryOperationExtend({mediatorExpressionEvaluatorFactory:ye,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#extend",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(wge()).ActorQueryOperationFilter({mediatorExpressionEvaluatorFactory:ye,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#filter",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Oge()).ActorQueryOperationFromQuad({mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#from",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Ege()).ActorQueryOperationProject({mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#project",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(xge()).ActorQueryOperationReducedHash({mediatorHashBindings:Fe,cacheSize:100,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#reduced",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Rge()).ActorQueryOperationSlice({mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#slice",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(PY()).ActorQueryOperationUnion({mediatorRdfMetadataAccumulate:X,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#union",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(jge()).ActorQueryOperationPathAlt({mediatorRdfMetadataAccumulate:X,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#path-alt",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Mge()).ActorQueryOperationPathInv({mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#path-inv",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(qge()).ActorQueryOperationPathLink({mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#path-link",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new($ge()).ActorQueryOperationPathNps({mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#path-nps",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Uge()).ActorQueryOperationClear({mediatorUpdateQuads:oe,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#update-clear",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Hge()).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#update-composite",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(zge()).ActorQueryOperationCreate({mediatorUpdateQuads:oe,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#update-create",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Xge()).ActorQueryOperationDrop({mediatorUpdateQuads:oe,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#update-drop",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Kge()).ActorQueryOperationLoad({mediatorUpdateQuads:oe,mediatorQuerySourceIdentify:be,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#update-load",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(eve()).ActorQueryOperationJoin({mediatorJoin:Se,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#join",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(rve()).ActorQueryOperationLeftJoin({mediatorJoin:Se,mediatorExpressionEvaluatorFactory:ye,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ive()).ActorQueryOperationMinus({mediatorJoin:Se,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#minus",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(uve()).ActorQueryOperationPathSeq({mediatorJoin:Se,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#path-seq",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const C=new(sve()).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:I,mediatorJoin:Se,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(lve()).ActorBindingsAggregatorFactoryMax({mediatorTermComparatorFactory:Ke,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#max",bus:L,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(fve()).ActorBindingsAggregatorFactoryMin({mediatorTermComparatorFactory:Ke,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#min",bus:L,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(yve()).ActorQueryOperationOrderBy({mediatorExpressionEvaluatorFactory:ye,mediatorTermComparatorFactory:Ke,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#orderby",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const W=new(mve()).ActorOptimizeQueryOperationFilterPushdown({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ve]});new(gve()).ActorDereferenceHttp({mediatorHttp:q,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,name:"urn:comunica:default:dereference/actors#http",bus:l,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}",beforeActors:[G]});const me=new(wve()).ActorHttpProxy({mediatorHttp:q,name:"urn:comunica:default:http/actors#proxy",bus:A,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[U]});new(Ove()).ActorContextPreprocessQuerySourceIdentify({cacheSize:100,httpInvalidator:Y,mediatorQuerySourceIdentify:be,mediatorContextPreprocess:_e,name:"urn:comunica:default:context-preprocess/actors#query-source-identify",bus:n,busFailMessage:"Context preprocessing failed",beforeActors:[J]});const pe=new(xP()).ActorInitQuery({mediatorQueryProcess:ce,mediatorQueryResultSerialize:Ce,mediatorQueryResultSerializeMediaTypeCombiner:Ve,mediatorQueryResultSerializeMediaTypeFormatCombiner:ge,mediatorHttpInvalidate:Ee,defaultQueryInputFormat:"sparql",allowNoSources:!1,name:"urn:comunica:default:init/actors#query",bus:u,busFailMessage:"Initialization failed: none of the configured actors were to initialize"});new(Eve()).ActorRdfUpdateQuadsHypermedia({cacheSize:100,httpInvalidator:Re,mediatorDereferenceRdf:j,mediatorMetadata:B,mediatorMetadataExtract:H,mediatorRdfUpdateHypermedia:je,name:"urn:comunica:default:rdf-update-quads/actors#hypermedia",bus:x,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const Pe=new(YZ()).ActionObserverHttp({httpInvalidator:tt,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActorQueryResultSerializeSparqlJson.jsonld#ActorQueryResultSerializeSparqlJson_default_observer",bus:A}),Be=new(ree()).ActionObserverHttp({httpInvalidator:ut,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer",bus:A});new(Lve()).ActorQuerySourceIdentifyHypermediaQpf({mediatorMetadata:B,mediatorMetadataExtract:H,mediatorDereferenceRdf:j,mediatorMergeBindingsContext:rt,subjectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject",predicateUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate",objectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",graphUri:"http://www.w3.org/ns/sparql-service-description#graph",name:"urn:comunica:default:query-source-identify-hypermedia/actors#qpf",bus:s,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(Cve()).ActorQuerySourceIdentifyHypermediaSparql({mediatorHttp:q,mediatorMergeBindingsContext:rt,checkUrlSuffix:!0,forceHttpGet:!1,cacheSize:1024,forceSourceType:!1,bindMethod:"values",countTimeout:3e3,cardinalityCountQueries:!0,cardinalityEstimateConstruction:!1,name:"urn:comunica:default:query-source-identify-hypermedia/actors#sparql",bus:s,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(rTe()).ActorQuerySourceIdentifyHypermediaNone({mediatorMergeBindingsContext:rt,name:"urn:comunica:default:query-source-identify-hypermedia/actors#none",bus:s,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(oTe()).ActorExpressionEvaluatorFactoryDefault({mediatorQueryOperation:k,mediatorFunctionFactory:Ie,mediatorMergeBindingsContext:rt,name:"urn:comunica:default:expression-evaluator-factory/actors#default",bus:O,busFailMessage:"Creation of Expression Evaluator failed"}),new(lTe()).ActorQueryOperationGroup({mediatorMergeBindingsContext:rt,mediatorBindingsAggregatorFactory:se,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#group",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(fTe()).ActorQueryOperationNop({mediatorMergeBindingsContext:rt,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#nop",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(pTe()).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorMergeBindingsContext:rt,mediatorQuerySourceIdentify:be,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#service",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(bTe()).ActorQueryOperationValues({mediatorMergeBindingsContext:rt,name:"urn:comunica:default:query-operation/actors#values",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(_Te()).ActorQueryOperationPathOneOrMore({mediatorMergeBindingsContext:rt,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(vTe()).ActorQueryOperationPathZeroOrMore({mediatorMergeBindingsContext:rt,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(wTe()).ActorQueryOperationPathZeroOrOne({mediatorMergeBindingsContext:rt,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(OTe()).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:oe,mediatorMergeBindingsContext:rt,mediatorQueryOperation:k,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const ke=new(ITe()).ActorQueryProcessSequential({mediatorContextPreprocess:_e,mediatorQueryParse:Le,mediatorOptimizeQueryOperation:te,mediatorQueryOperation:k,mediatorMergeBindingsContext:rt,name:"urn:comunica:default:query-process/actors#sequential",bus:V,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),Je=new(qTe()).ActorQuerySourceIdentifyHypermedia({cacheSize:100,maxIterators:64,aggregateTraversalStore:!0,mediatorDereferenceRdf:j,mediatorMetadata:B,mediatorMetadataExtract:H,mediatorMetadataAccumulate:X,mediatorQuerySourceIdentifyHypermedia:we,mediatorRdfResolveHypermediaLinks:Z,mediatorRdfResolveHypermediaLinksQueue:de,mediatorMergeBindingsContext:rt,name:"urn:comunica:default:query-source-identify/actors#hypermedia",bus:$,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"});new($Te()).ActorRdfJoinNone({mediatorMergeBindingsContext:rt,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(QTe()).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:k,mediatorMergeBindingsContext:rt,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(XTe()).ActorTermComparatorFactoryExpressionEvaluator({mediatorQueryOperation:k,mediatorFunctionFactory:Ie,mediatorMergeBindingsContext:rt,name:"urn:comunica:default:term-comparator-factory/actors#expression-evaluator",bus:ne,busFailMessage:"Creation of term comparator failed"});const ct=new(tre()).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:I,mediatorQueryOperation:k,mediatorMergeBindingsContext:rt,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[C,lt,ae,M,P]});new(KTe()).ActorRdfJoinMultiSmallestFilterBindings({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:I,mediatorJoin:Se,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[C,lt,ae,M,P]}),new(YZ()).ActorQueryResultSerializeSparqlJson({emitMetadata:!0,httpObserver:Pe,mediaTypePriorities:{"application/sparql-results+json":.8},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#sparql-json",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(ree()).ActorQueryResultSerializeStats({httpObserver:Be,mediaTypePriorities:{stats:.5},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"urn:comunica:default:query-result-serialize/actors#stats",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(YTe()).ActorQueryProcessExplainLogical({queryProcessor:ke,name:"urn:comunica:default:query-process/actors#explain-logical",bus:V,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(e2e()).ActorQueryProcessExplainParsed({queryProcessor:ke,name:"urn:comunica:default:query-process/actors#explain-parsed",bus:V,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(r2e()).ActorQueryProcessExplainPhysical({queryProcessor:ke,name:"urn:comunica:default:query-process/actors#explain-physical",bus:V,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'});const Ze=new(i2e()).ActorOptimizeQueryOperationPruneEmptySourceOperations({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[W]});new(u2e()).ActorHttpRetry({mediatorHttp:q,httpInvalidator:qe,name:"urn:comunica:default:http/actors#retry",bus:A,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[me]}),new(s2e()).ActorHttpLimitRate({mediatorHttp:q,httpInvalidator:Ue,correctionMultiplier:.1,failureMultiplier:10,limitByDefault:!1,allowOverlap:!1,name:"urn:comunica:default:http/actors#limit-rate",bus:A,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[me]}),new(bF()).ActorQuerySourceIdentifyRdfJs({mediatorMergeBindingsContext:rt,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:$,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}",beforeActors:[Je]}),new(l2e()).ActorQuerySourceIdentifySerialized({mediatorRdfParse:K,mediatorQuerySourceIdentify:be,name:"urn:comunica:default:query-source-identify/actors#serialized",bus:$,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}",beforeActors:[Je]}),new(f2e()).ActorRdfJoinMultiBindSource({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:I,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:Q,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[C,ct,lt,ae,M,P]});const Ye=new(p2e()).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Ze]}),zr=new(b2e()).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Ye]}),Xe=new(_2e()).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[zr]}),ue=new(v2e()).ActorOptimizeQueryOperationAssignSourcesExhaustive({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Xe]});return new(w2e()).ActorOptimizeQueryOperationDescribeToConstructsSubject({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ue]}),pe}),AF}var $re;function O2e(){if($re)return hi;$re=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.QueryEngine=void 0;const a=xP(),t=S2e();let u=class extends a.QueryEngineBase{constructor(r=t()){super(r)}};return hi.QueryEngine=u,hi}var Vre;function A2e(){return Vre||(Vre=1,function(a){var t=Ht&&Ht.__createBinding||(Object.create?function(n,r,e,i){i===void 0&&(i=e);var o=Object.getOwnPropertyDescriptor(r,e);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(n,i,o)}:function(n,r,e,i){i===void 0&&(i=e),n[i]=r[e]}),u=Ht&&Ht.__exportStar||function(n,r){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,n,e)};Object.defineProperty(a,"__esModule",{value:!0}),u(O2e(),a)}(Ht)),Ht}var E2e=A2e(),I2e=ln();class Rf extends Error{}class x2e extends Rf{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class N2e extends Rf{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class R2e extends Rf{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Ch extends Rf{}class Ure extends Rf{constructor(t){super(`Invalid unit ${t}`)}}class Hr extends Rf{}class Ra extends Rf{constructor(){super("Zone is an abstract class")}}const at="numeric",si="short",Tn="long",WA={year:at,month:at,day:at},Qre={year:at,month:si,day:at},F2e={year:at,month:si,day:at,weekday:si},Hre={year:at,month:Tn,day:at},Gre={year:at,month:Tn,day:at,weekday:Tn},zre={hour:at,minute:at},kre={hour:at,minute:at,second:at},Xre={hour:at,minute:at,second:at,timeZoneName:si},Jre={hour:at,minute:at,second:at,timeZoneName:Tn},Kre={hour:at,minute:at,hourCycle:"h23"},Wre={hour:at,minute:at,second:at,hourCycle:"h23"},Yre={hour:at,minute:at,second:at,hourCycle:"h23",timeZoneName:si},Zre={hour:at,minute:at,second:at,hourCycle:"h23",timeZoneName:Tn},ene={year:at,month:at,day:at,hour:at,minute:at},tne={year:at,month:at,day:at,hour:at,minute:at,second:at},rne={year:at,month:si,day:at,hour:at,minute:at},nne={year:at,month:si,day:at,hour:at,minute:at,second:at},D2e={year:at,month:si,day:at,weekday:si,hour:at,minute:at},ine={year:at,month:Tn,day:at,hour:at,minute:at,timeZoneName:si},ane={year:at,month:Tn,day:at,hour:at,minute:at,second:at,timeZoneName:si},une={year:at,month:Tn,day:at,weekday:Tn,hour:at,minute:at,timeZoneName:Tn},one={year:at,month:Tn,day:at,weekday:Tn,hour:at,minute:at,second:at,timeZoneName:Tn};class BS{get type(){throw new Ra}get name(){throw new Ra}get ianaName(){return this.name}get isUniversal(){throw new Ra}offsetName(t,u){throw new Ra}formatOffset(t,u){throw new Ra}offset(t){throw new Ra}equals(t){throw new Ra}get isValid(){throw new Ra}}let EF=null;class YA extends BS{static get instance(){return EF===null&&(EF=new YA),EF}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:u,locale:n}){return Pne(t,u,n)}formatOffset(t,u){return QS(this.offset(t),u)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const IF=new Map;function P2e(a){let t=IF.get(a);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),IF.set(a,t)),t}const j2e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function L2e(a,t){const u=a.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(u),[,r,e,i,o,c,s,l]=n;return[i,r,e,o,c,s,l]}function M2e(a,t){const u=a.formatToParts(t),n=[];for(let r=0;r<u.length;r++){const{type:e,value:i}=u[r],o=j2e[e];e==="era"?n[o]=i:_t(o)||(n[o]=parseInt(i,10))}return n}const xF=new Map;class Wi extends BS{static create(t){let u=xF.get(t);return u===void 0&&xF.set(t,u=new Wi(t)),u}static resetCache(){xF.clear(),IF.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Wi.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:u,locale:n}){return Pne(t,u,n,this.name)}formatOffset(t,u){return QS(this.offset(t),u)}offset(t){if(!this.valid)return NaN;const u=new Date(t);if(isNaN(u))return NaN;const n=P2e(this.name);let[r,e,i,o,c,s,l]=n.formatToParts?M2e(n,u):L2e(n,u);o==="BC"&&(r=-Math.abs(r)+1);const f=nE({year:r,month:e,day:i,hour:c===24?0:c,minute:s,second:l,millisecond:0});let h=+u;const p=h%1e3;return h-=p>=0?p:1e3+p,(f-h)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let sne={};function C2e(a,t={}){const u=JSON.stringify([a,t]);let n=sne[u];return n||(n=new Intl.ListFormat(a,t),sne[u]=n),n}const NF=new Map;function RF(a,t={}){const u=JSON.stringify([a,t]);let n=NF.get(u);return n===void 0&&(n=new Intl.DateTimeFormat(a,t),NF.set(u,n)),n}const FF=new Map;function q2e(a,t={}){const u=JSON.stringify([a,t]);let n=FF.get(u);return n===void 0&&(n=new Intl.NumberFormat(a,t),FF.set(u,n)),n}const DF=new Map;function B2e(a,t={}){const{base:u,...n}=t,r=JSON.stringify([a,n]);let e=DF.get(r);return e===void 0&&(e=new Intl.RelativeTimeFormat(a,t),DF.set(r,e)),e}let $S=null;function $2e(){return $S||($S=new Intl.DateTimeFormat().resolvedOptions().locale,$S)}const PF=new Map;function cne(a){let t=PF.get(a);return t===void 0&&(t=new Intl.DateTimeFormat(a).resolvedOptions(),PF.set(a,t)),t}const jF=new Map;function V2e(a){let t=jF.get(a);if(!t){const u=new Intl.Locale(a);t="getWeekInfo"in u?u.getWeekInfo():u.weekInfo,"minimalDays"in t||(t={...lne,...t}),jF.set(a,t)}return t}function U2e(a){const t=a.indexOf("-x-");t!==-1&&(a=a.substring(0,t));const u=a.indexOf("-u-");if(u===-1)return[a];{let n,r;try{n=RF(a).resolvedOptions(),r=a}catch{const c=a.substring(0,u);n=RF(c).resolvedOptions(),r=c}const{numberingSystem:e,calendar:i}=n;return[r,e,i]}}function Q2e(a,t,u){return(u||t)&&(a.includes("-u-")||(a+="-u"),u&&(a+=`-ca-${u}`),t&&(a+=`-nu-${t}`)),a}function H2e(a){const t=[];for(let u=1;u<=12;u++){const n=pt.utc(2009,u,1);t.push(a(n))}return t}function G2e(a){const t=[];for(let u=1;u<=7;u++){const n=pt.utc(2016,11,13+u);t.push(a(n))}return t}function ZA(a,t,u,n){const r=a.listingMode();return r==="error"?null:r==="en"?u(t):n(t)}function z2e(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||cne(a.locale).numberingSystem==="latn"}class k2e{constructor(t,u,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:e,...i}=n;if(!u||Object.keys(i).length>0){const o={useGrouping:!1,...n};n.padTo>0&&(o.minimumIntegerDigits=n.padTo),this.inf=q2e(t,o)}}format(t){if(this.inf){const u=this.floor?Math.floor(t):t;return this.inf.format(u)}else{const u=this.floor?Math.floor(t):QF(t,3);return Tr(u,this.padTo)}}}class X2e{constructor(t,u,n){this.opts=n,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const i=-1*(t.offset/60),o=i>=0?`Etc/GMT+${i}`:`Etc/GMT${i}`;t.offset!==0&&Wi.create(o).valid?(r=o,this.dt=t):(r="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,r=t.zone.name):(r="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const e={...this.opts};e.timeZone=e.timeZone||r,this.dtf=RF(u,e)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(u=>{if(u.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...u,value:n}}else return u}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class J2e{constructor(t,u,n){this.opts={style:"long",...n},!u&&Nne()&&(this.rtf=B2e(t,n))}format(t,u){return this.rtf?this.rtf.format(t,u):mwe(u,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,u){return this.rtf?this.rtf.formatToParts(t,u):[]}}const lne={firstDay:1,minimalDays:4,weekend:[6,7]};class Bt{static fromOpts(t){return Bt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,u,n,r,e=!1){const i=t||dr.defaultLocale,o=i||(e?"en-US":$2e()),c=u||dr.defaultNumberingSystem,s=n||dr.defaultOutputCalendar,l=VF(r)||dr.defaultWeekSettings;return new Bt(o,c,s,l,i)}static resetCache(){$S=null,NF.clear(),FF.clear(),DF.clear(),PF.clear(),jF.clear()}static fromObject({locale:t,numberingSystem:u,outputCalendar:n,weekSettings:r}={}){return Bt.create(t,u,n,r)}constructor(t,u,n,r,e){const[i,o,c]=U2e(t);this.locale=i,this.numberingSystem=u||o||null,this.outputCalendar=n||c||null,this.weekSettings=r,this.intl=Q2e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=e,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=z2e(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),u=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&u?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Bt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,VF(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,u=!1){return ZA(this,t,Mne,()=>{const n=u?{month:t,day:"numeric"}:{month:t},r=u?"format":"standalone";return this.monthsCache[r][t]||(this.monthsCache[r][t]=H2e(e=>this.extract(e,n,"month"))),this.monthsCache[r][t]})}weekdays(t,u=!1){return ZA(this,t,Bne,()=>{const n=u?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},r=u?"format":"standalone";return this.weekdaysCache[r][t]||(this.weekdaysCache[r][t]=G2e(e=>this.extract(e,n,"weekday"))),this.weekdaysCache[r][t]})}meridiems(){return ZA(this,void 0,()=>$ne,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[pt.utc(2016,11,13,9),pt.utc(2016,11,13,19)].map(u=>this.extract(u,t,"dayperiod"))}return this.meridiemCache})}eras(t){return ZA(this,t,Vne,()=>{const u={era:t};return this.eraCache[t]||(this.eraCache[t]=[pt.utc(-40,1,1),pt.utc(2017,1,1)].map(n=>this.extract(n,u,"era"))),this.eraCache[t]})}extract(t,u,n){const r=this.dtFormatter(t,u),e=r.formatToParts(),i=e.find(o=>o.type.toLowerCase()===n);return i?i.value:null}numberFormatter(t={}){return new k2e(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,u={}){return new X2e(t,this.intl,u)}relFormatter(t={}){return new J2e(this.intl,this.isEnglish(),t)}listFormatter(t={}){return C2e(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||cne(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Rne()?V2e(this.locale):lne}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let LF=null;class an extends BS{static get utcInstance(){return LF===null&&(LF=new an(0)),LF}static instance(t){return t===0?an.utcInstance:new an(t)}static parseSpecifier(t){if(t){const u=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(u)return new an(iE(u[1],u[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${QS(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${QS(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,u){return QS(this.fixed,u)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class K2e extends BS{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Fa(a,t){if(_t(a)||a===null)return t;if(a instanceof BS)return a;if(rwe(a)){const u=a.toLowerCase();return u==="default"?t:u==="local"||u==="system"?YA.instance:u==="utc"||u==="gmt"?an.utcInstance:an.parseSpecifier(u)||Wi.create(a)}else return Da(a)?an.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new K2e(a)}const MF={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},dne={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},W2e=MF.hanidec.replace(/[\[|\]]/g,"").split("");function Y2e(a){let t=parseInt(a,10);if(isNaN(t)){t="";for(let u=0;u<a.length;u++){const n=a.charCodeAt(u);if(a[u].search(MF.hanidec)!==-1)t+=W2e.indexOf(a[u]);else for(const r in dne){const[e,i]=dne[r];n>=e&&n<=i&&(t+=n-e)}}return parseInt(t,10)}else return t}const CF=new Map;function Z2e(){CF.clear()}function ci({numberingSystem:a},t=""){const u=a||"latn";let n=CF.get(u);n===void 0&&(n=new Map,CF.set(u,n));let r=n.get(t);return r===void 0&&(r=new RegExp(`${MF[u]}${t}`),n.set(t,r)),r}let fne=()=>Date.now(),hne="system",pne=null,yne=null,bne=null,mne=60,_ne,gne=null;class dr{static get now(){return fne}static set now(t){fne=t}static set defaultZone(t){hne=t}static get defaultZone(){return Fa(hne,YA.instance)}static get defaultLocale(){return pne}static set defaultLocale(t){pne=t}static get defaultNumberingSystem(){return yne}static set defaultNumberingSystem(t){yne=t}static get defaultOutputCalendar(){return bne}static set defaultOutputCalendar(t){bne=t}static get defaultWeekSettings(){return gne}static set defaultWeekSettings(t){gne=VF(t)}static get twoDigitCutoffYear(){return mne}static set twoDigitCutoffYear(t){mne=t%100}static get throwOnInvalid(){return _ne}static set throwOnInvalid(t){_ne=t}static resetCaches(){Bt.resetCache(),Wi.resetCache(),pt.resetCache(),Z2e()}}class li{constructor(t,u){this.reason=t,this.explanation=u}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const vne=[0,31,59,90,120,151,181,212,243,273,304,334],Tne=[0,31,60,91,121,152,182,213,244,274,305,335];function Ln(a,t){return new li("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${a}, which is invalid`)}function qF(a,t,u){const n=new Date(Date.UTC(a,t-1,u));a<100&&a>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const r=n.getUTCDay();return r===0?7:r}function wne(a,t,u){return u+(VS(a)?Tne:vne)[t-1]}function Sne(a,t){const u=VS(a)?Tne:vne,n=u.findIndex(e=>e<t),r=t-u[n];return{month:n+1,day:r}}function BF(a,t){return(a-t+7)%7+1}function eE(a,t=4,u=1){const{year:n,month:r,day:e}=a,i=wne(n,r,e),o=BF(qF(n,r,e),u);let c=Math.floor((i-o+14-t)/7),s;return c<1?(s=n-1,c=US(s,t,u)):c>US(n,t,u)?(s=n+1,c=1):s=n,{weekYear:s,weekNumber:c,weekday:o,...uE(a)}}function One(a,t=4,u=1){const{weekYear:n,weekNumber:r,weekday:e}=a,i=BF(qF(n,1,t),u),o=Bh(n);let c=r*7+e-i-7+t,s;c<1?(s=n-1,c+=Bh(s)):c>o?(s=n+1,c-=Bh(n)):s=n;const{month:l,day:d}=Sne(s,c);return{year:s,month:l,day:d,...uE(a)}}function $F(a){const{year:t,month:u,day:n}=a,r=wne(t,u,n);return{year:t,ordinal:r,...uE(a)}}function Ane(a){const{year:t,ordinal:u}=a,{month:n,day:r}=Sne(t,u);return{year:t,month:n,day:r,...uE(a)}}function Ene(a,t){if(!_t(a.localWeekday)||!_t(a.localWeekNumber)||!_t(a.localWeekYear)){if(!_t(a.weekday)||!_t(a.weekNumber)||!_t(a.weekYear))throw new Ch("Cannot mix locale-based week fields with ISO-based week fields");return _t(a.localWeekday)||(a.weekday=a.localWeekday),_t(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),_t(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function ewe(a,t=4,u=1){const n=tE(a.weekYear),r=Mn(a.weekNumber,1,US(a.weekYear,t,u)),e=Mn(a.weekday,1,7);return n?r?e?!1:Ln("weekday",a.weekday):Ln("week",a.weekNumber):Ln("weekYear",a.weekYear)}function twe(a){const t=tE(a.year),u=Mn(a.ordinal,1,Bh(a.year));return t?u?!1:Ln("ordinal",a.ordinal):Ln("year",a.year)}function Ine(a){const t=tE(a.year),u=Mn(a.month,1,12),n=Mn(a.day,1,rE(a.year,a.month));return t?u?n?!1:Ln("day",a.day):Ln("month",a.month):Ln("year",a.year)}function xne(a){const{hour:t,minute:u,second:n,millisecond:r}=a,e=Mn(t,0,23)||t===24&&u===0&&n===0&&r===0,i=Mn(u,0,59),o=Mn(n,0,59),c=Mn(r,0,999);return e?i?o?c?!1:Ln("millisecond",r):Ln("second",n):Ln("minute",u):Ln("hour",t)}function _t(a){return typeof a>"u"}function Da(a){return typeof a=="number"}function tE(a){return typeof a=="number"&&a%1===0}function rwe(a){return typeof a=="string"}function nwe(a){return Object.prototype.toString.call(a)==="[object Date]"}function Nne(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Rne(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function iwe(a){return Array.isArray(a)?a:[a]}function Fne(a,t,u){if(a.length!==0)return a.reduce((n,r)=>{const e=[t(r),r];return n&&u(n[0],e[0])===n[0]?n:e},null)[1]}function awe(a,t){return t.reduce((u,n)=>(u[n]=a[n],u),{})}function qh(a,t){return Object.prototype.hasOwnProperty.call(a,t)}function VF(a){if(a==null)return null;if(typeof a!="object")throw new Hr("Week settings must be an object");if(!Mn(a.firstDay,1,7)||!Mn(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(t=>!Mn(t,1,7)))throw new Hr("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function Mn(a,t,u){return tE(a)&&a>=t&&a<=u}function uwe(a,t){return a-t*Math.floor(a/t)}function Tr(a,t=2){const u=a<0;let n;return u?n="-"+(""+-a).padStart(t,"0"):n=(""+a).padStart(t,"0"),n}function Pa(a){if(!(_t(a)||a===null||a===""))return parseInt(a,10)}function Ff(a){if(!(_t(a)||a===null||a===""))return parseFloat(a)}function UF(a){if(!(_t(a)||a===null||a==="")){const t=parseFloat("0."+a)*1e3;return Math.floor(t)}}function QF(a,t,u=!1){const n=10**t;return(u?Math.trunc:Math.round)(a*n)/n}function VS(a){return a%4===0&&(a%100!==0||a%400===0)}function Bh(a){return VS(a)?366:365}function rE(a,t){const u=uwe(t-1,12)+1,n=a+(t-u)/12;return u===2?VS(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][u-1]}function nE(a){let t=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(t=new Date(t),t.setUTCFullYear(a.year,a.month-1,a.day)),+t}function Dne(a,t,u){return-BF(qF(a,1,t),u)+t-1}function US(a,t=4,u=1){const n=Dne(a,t,u),r=Dne(a+1,t,u);return(Bh(a)-n+r)/7}function HF(a){return a>99?a:a>dr.twoDigitCutoffYear?1900+a:2e3+a}function Pne(a,t,u,n=null){const r=new Date(a),e={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(e.timeZone=n);const i={timeZoneName:t,...e},o=new Intl.DateTimeFormat(u,i).formatToParts(r).find(c=>c.type.toLowerCase()==="timezonename");return o?o.value:null}function iE(a,t){let u=parseInt(a,10);Number.isNaN(u)&&(u=0);const n=parseInt(t,10)||0,r=u<0||Object.is(u,-0)?-n:n;return u*60+r}function jne(a){const t=Number(a);if(typeof a=="boolean"||a===""||Number.isNaN(t))throw new Hr(`Invalid unit value ${a}`);return t}function aE(a,t){const u={};for(const n in a)if(qh(a,n)){const r=a[n];if(r==null)continue;u[t(n)]=jne(r)}return u}function QS(a,t){const u=Math.trunc(Math.abs(a/60)),n=Math.trunc(Math.abs(a%60)),r=a>=0?"+":"-";switch(t){case"short":return`${r}${Tr(u,2)}:${Tr(n,2)}`;case"narrow":return`${r}${u}${n>0?`:${n}`:""}`;case"techie":return`${r}${Tr(u,2)}${Tr(n,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function uE(a){return awe(a,["hour","minute","second","millisecond"])}const owe=["January","February","March","April","May","June","July","August","September","October","November","December"],Lne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],swe=["J","F","M","A","M","J","J","A","S","O","N","D"];function Mne(a){switch(a){case"narrow":return[...swe];case"short":return[...Lne];case"long":return[...owe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Cne=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],qne=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],cwe=["M","T","W","T","F","S","S"];function Bne(a){switch(a){case"narrow":return[...cwe];case"short":return[...qne];case"long":return[...Cne];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const $ne=["AM","PM"],lwe=["Before Christ","Anno Domini"],dwe=["BC","AD"],fwe=["B","A"];function Vne(a){switch(a){case"narrow":return[...fwe];case"short":return[...dwe];case"long":return[...lwe];default:return null}}function hwe(a){return $ne[a.hour<12?0:1]}function pwe(a,t){return Bne(t)[a.weekday-1]}function ywe(a,t){return Mne(t)[a.month-1]}function bwe(a,t){return Vne(t)[a.year<0?0:1]}function mwe(a,t,u="always",n=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},e=["hours","minutes","seconds"].indexOf(a)===-1;if(u==="auto"&&e){const d=a==="days";switch(t){case 1:return d?"tomorrow":`next ${r[a][0]}`;case-1:return d?"yesterday":`last ${r[a][0]}`;case 0:return d?"today":`this ${r[a][0]}`}}const i=Object.is(t,-0)||t<0,o=Math.abs(t),c=o===1,s=r[a],l=n?c?s[1]:s[2]||s[1]:c?r[a][0]:a;return i?`${o} ${l} ago`:`in ${o} ${l}`}function Une(a,t){let u="";for(const n of a)n.literal?u+=n.val:u+=t(n.val);return u}const _we={D:WA,DD:Qre,DDD:Hre,DDDD:Gre,t:zre,tt:kre,ttt:Xre,tttt:Jre,T:Kre,TT:Wre,TTT:Yre,TTTT:Zre,f:ene,ff:rne,fff:ine,ffff:une,F:tne,FF:nne,FFF:ane,FFFF:one};class Gr{static create(t,u={}){return new Gr(t,u)}static parseFormat(t){let u=null,n="",r=!1;const e=[];for(let i=0;i<t.length;i++){const o=t.charAt(i);o==="'"?(n.length>0&&e.push({literal:r||/^\s+$/.test(n),val:n}),u=null,n="",r=!r):r||o===u?n+=o:(n.length>0&&e.push({literal:/^\s+$/.test(n),val:n}),n=o,u=o)}return n.length>0&&e.push({literal:r||/^\s+$/.test(n),val:n}),e}static macroTokenToFormatOpts(t){return _we[t]}constructor(t,u){this.opts=u,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,u){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...u}).format()}dtFormatter(t,u={}){return this.loc.dtFormatter(t,{...this.opts,...u})}formatDateTime(t,u){return this.dtFormatter(t,u).format()}formatDateTimeParts(t,u){return this.dtFormatter(t,u).formatToParts()}formatInterval(t,u){return this.dtFormatter(t.start,u).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,u){return this.dtFormatter(t,u).resolvedOptions()}num(t,u=0){if(this.opts.forceSimple)return Tr(t,u);const n={...this.opts};return u>0&&(n.padTo=u),this.loc.numberFormatter(n).format(t)}formatDateTimeFromString(t,u){const n=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",e=(h,p)=>this.loc.extract(t,h,p),i=h=>t.isOffsetFixed&&t.offset===0&&h.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,h.format):"",o=()=>n?hwe(t):e({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(h,p)=>n?ywe(t,h):e(p?{month:h}:{month:h,day:"numeric"},"month"),s=(h,p)=>n?pwe(t,h):e(p?{weekday:h}:{weekday:h,month:"long",day:"numeric"},"weekday"),l=h=>{const p=Gr.macroTokenToFormatOpts(h);return p?this.formatWithSystemDefault(t,p):h},d=h=>n?bwe(t,h):e({era:h},"era"),f=h=>{switch(h){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return o();case"d":return r?e({day:"numeric"},"day"):this.num(t.day);case"dd":return r?e({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return s("short",!0);case"cccc":return s("long",!0);case"ccccc":return s("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return s("short",!1);case"EEEE":return s("long",!1);case"EEEEE":return s("narrow",!1);case"L":return r?e({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return r?e({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return r?e({month:"numeric"},"month"):this.num(t.month);case"MM":return r?e({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return r?e({year:"numeric"},"year"):this.num(t.year);case"yy":return r?e({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return r?e({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return r?e({year:"numeric"},"year"):this.num(t.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return l(h)}};return Une(Gr.parseFormat(u),f)}formatDurationFromString(t,u){const n=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=c=>s=>{const l=n(s);return l?this.num(c.get(l),s.length):s},e=Gr.parseFormat(u),i=e.reduce((c,{literal:s,val:l})=>s?c:c.concat(l),[]),o=t.shiftTo(...i.map(n).filter(c=>c));return Une(e,r(o))}}const Qne=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function $h(...a){const t=a.reduce((u,n)=>u+n.source,"");return RegExp(`^${t}$`)}function Vh(...a){return t=>a.reduce(([u,n,r],e)=>{const[i,o,c]=e(t,r);return[{...u,...i},o||n,c]},[{},null,1]).slice(0,2)}function Uh(a,...t){if(a==null)return[null,null];for(const[u,n]of t){const r=u.exec(a);if(r)return n(r)}return[null,null]}function Hne(...a){return(t,u)=>{const n={};let r;for(r=0;r<a.length;r++)n[a[r]]=Pa(t[u+r]);return[n,null,u+r]}}const Gne=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,gwe=`(?:${Gne.source}?(?:\\[(${Qne.source})\\])?)?`,GF=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,zne=RegExp(`${GF.source}${gwe}`),zF=RegExp(`(?:T${zne.source})?`),vwe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Twe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,wwe=/(\d{4})-?(\d{3})/,Swe=Hne("weekYear","weekNumber","weekDay"),Owe=Hne("year","ordinal"),Awe=/(\d{4})-(\d\d)-(\d\d)/,kne=RegExp(`${GF.source} ?(?:${Gne.source}|(${Qne.source}))?`),Ewe=RegExp(`(?: ${kne.source})?`);function Qh(a,t,u){const n=a[t];return _t(n)?u:Pa(n)}function Iwe(a,t){return[{year:Qh(a,t),month:Qh(a,t+1,1),day:Qh(a,t+2,1)},null,t+3]}function Hh(a,t){return[{hours:Qh(a,t,0),minutes:Qh(a,t+1,0),seconds:Qh(a,t+2,0),milliseconds:UF(a[t+3])},null,t+4]}function HS(a,t){const u=!a[t]&&!a[t+1],n=iE(a[t+1],a[t+2]),r=u?null:an.instance(n);return[{},r,t+3]}function GS(a,t){const u=a[t]?Wi.create(a[t]):null;return[{},u,t+1]}const xwe=RegExp(`^T?${GF.source}$`),Nwe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Rwe(a){const[t,u,n,r,e,i,o,c,s]=a,l=t[0]==="-",d=c&&c[0]==="-",f=(h,p=!1)=>h!==void 0&&(p||h&&l)?-h:h;return[{years:f(Ff(u)),months:f(Ff(n)),weeks:f(Ff(r)),days:f(Ff(e)),hours:f(Ff(i)),minutes:f(Ff(o)),seconds:f(Ff(c),c==="-0"),milliseconds:f(UF(s),d)}]}const Fwe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function kF(a,t,u,n,r,e,i){const o={year:t.length===2?HF(Pa(t)):Pa(t),month:Lne.indexOf(u)+1,day:Pa(n),hour:Pa(r),minute:Pa(e)};return i&&(o.second=Pa(i)),a&&(o.weekday=a.length>3?Cne.indexOf(a)+1:qne.indexOf(a)+1),o}const Dwe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Pwe(a){const[,t,u,n,r,e,i,o,c,s,l,d]=a,f=kF(t,r,n,u,e,i,o);let h;return c?h=Fwe[c]:s?h=0:h=iE(l,d),[f,new an(h)]}function jwe(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Lwe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Mwe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Cwe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Xne(a){const[,t,u,n,r,e,i,o]=a;return[kF(t,r,n,u,e,i,o),an.utcInstance]}function qwe(a){const[,t,u,n,r,e,i,o]=a;return[kF(t,o,u,n,r,e,i),an.utcInstance]}const Bwe=$h(vwe,zF),$we=$h(Twe,zF),Vwe=$h(wwe,zF),Uwe=$h(zne),Jne=Vh(Iwe,Hh,HS,GS),Qwe=Vh(Swe,Hh,HS,GS),Hwe=Vh(Owe,Hh,HS,GS),Gwe=Vh(Hh,HS,GS);function zwe(a){return Uh(a,[Bwe,Jne],[$we,Qwe],[Vwe,Hwe],[Uwe,Gwe])}function kwe(a){return Uh(jwe(a),[Dwe,Pwe])}function Xwe(a){return Uh(a,[Lwe,Xne],[Mwe,Xne],[Cwe,qwe])}function Jwe(a){return Uh(a,[Nwe,Rwe])}const Kwe=Vh(Hh);function Wwe(a){return Uh(a,[xwe,Kwe])}const Ywe=$h(Awe,Ewe),Zwe=$h(kne),e3e=Vh(Hh,HS,GS);function t3e(a){return Uh(a,[Ywe,Jne],[Zwe,e3e])}const Kne="Invalid Duration",Wne={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},r3e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Wne},Cn=146097/400,Gh=146097/4800,n3e={years:{quarters:4,months:12,weeks:Cn/7,days:Cn,hours:Cn*24,minutes:Cn*24*60,seconds:Cn*24*60*60,milliseconds:Cn*24*60*60*1e3},quarters:{months:3,weeks:Cn/28,days:Cn/4,hours:Cn*24/4,minutes:Cn*24*60/4,seconds:Cn*24*60*60/4,milliseconds:Cn*24*60*60*1e3/4},months:{weeks:Gh/7,days:Gh,hours:Gh*24,minutes:Gh*24*60,seconds:Gh*24*60*60,milliseconds:Gh*24*60*60*1e3},...Wne},Df=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],i3e=Df.slice(0).reverse();function ja(a,t,u=!1){const n={values:u?t.values:{...a.values,...t.values||{}},loc:a.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||a.conversionAccuracy,matrix:t.matrix||a.matrix};return new Dt(n)}function Yne(a,t){let u=t.milliseconds??0;for(const n of i3e.slice(1))t[n]&&(u+=t[n]*a[n].milliseconds);return u}function Zne(a,t){const u=Yne(a,t)<0?-1:1;Df.reduceRight((n,r)=>{if(_t(t[r]))return n;if(n){const e=t[n]*u,i=a[r][n],o=Math.floor(e/i);t[r]+=o*u,t[n]-=o*i*u}return r},null),Df.reduce((n,r)=>{if(_t(t[r]))return n;if(n){const e=t[n]%1;t[n]-=e,t[r]+=e*a[n][r]}return r},null)}function a3e(a){const t={};for(const[u,n]of Object.entries(a))n!==0&&(t[u]=n);return t}class Dt{constructor(t){const u=t.conversionAccuracy==="longterm"||!1;let n=u?n3e:r3e;t.matrix&&(n=t.matrix),this.values=t.values,this.loc=t.loc||Bt.create(),this.conversionAccuracy=u?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,u){return Dt.fromObject({milliseconds:t},u)}static fromObject(t,u={}){if(t==null||typeof t!="object")throw new Hr(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Dt({values:aE(t,Dt.normalizeUnit),loc:Bt.fromObject(u),conversionAccuracy:u.conversionAccuracy,matrix:u.matrix})}static fromDurationLike(t){if(Da(t))return Dt.fromMillis(t);if(Dt.isDuration(t))return t;if(typeof t=="object")return Dt.fromObject(t);throw new Hr(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,u){const[n]=Jwe(t);return n?Dt.fromObject(n,u):Dt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,u){const[n]=Wwe(t);return n?Dt.fromObject(n,u):Dt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,u=null){if(!t)throw new Hr("need to specify a reason the Duration is invalid");const n=t instanceof li?t:new li(t,u);if(dr.throwOnInvalid)throw new R2e(n);return new Dt({invalid:n})}static normalizeUnit(t){const u={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!u)throw new Ure(t);return u}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,u={}){const n={...u,floor:u.round!==!1&&u.floor!==!1};return this.isValid?Gr.create(this.loc,n).formatDurationFromString(this,t):Kne}toHuman(t={}){if(!this.isValid)return Kne;const u=Df.map(n=>{const r=this.values[n];return _t(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:n.slice(0,-1)}).format(r)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(u)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=QF(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const u=this.toMillis();return u<0||u>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},pt.fromMillis(u,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Yne(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const u=Dt.fromDurationLike(t),n={};for(const r of Df)(qh(u.values,r)||qh(this.values,r))&&(n[r]=u.get(r)+this.get(r));return ja(this,{values:n},!0)}minus(t){if(!this.isValid)return this;const u=Dt.fromDurationLike(t);return this.plus(u.negate())}mapUnits(t){if(!this.isValid)return this;const u={};for(const n of Object.keys(this.values))u[n]=jne(t(this.values[n],n));return ja(this,{values:u},!0)}get(t){return this[Dt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const u={...this.values,...aE(t,Dt.normalizeUnit)};return ja(this,{values:u})}reconfigure({locale:t,numberingSystem:u,conversionAccuracy:n,matrix:r}={}){const i={loc:this.loc.clone({locale:t,numberingSystem:u}),matrix:r,conversionAccuracy:n};return ja(this,i)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Zne(this.matrix,t),ja(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=a3e(this.normalize().shiftToAll().toObject());return ja(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(i=>Dt.normalizeUnit(i));const u={},n={},r=this.toObject();let e;for(const i of Df)if(t.indexOf(i)>=0){e=i;let o=0;for(const s in n)o+=this.matrix[s][i]*n[s],n[s]=0;Da(r[i])&&(o+=r[i]);const c=Math.trunc(o);u[i]=c,n[i]=(o*1e3-c*1e3)/1e3}else Da(r[i])&&(n[i]=r[i]);for(const i in n)n[i]!==0&&(u[e]+=i===e?n[i]:n[i]/this.matrix[e][i]);return Zne(this.matrix,u),ja(this,{values:u},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const u of Object.keys(this.values))t[u]=this.values[u]===0?0:-this.values[u];return ja(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function u(n,r){return n===void 0||n===0?r===void 0||r===0:n===r}for(const n of Df)if(!u(this.values[n],t.values[n]))return!1;return!0}}const zh="Invalid Interval";function u3e(a,t){return!a||!a.isValid?fr.invalid("missing or invalid start"):!t||!t.isValid?fr.invalid("missing or invalid end"):t<a?fr.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${t.toISO()}`):null}class fr{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,u=null){if(!t)throw new Hr("need to specify a reason the Interval is invalid");const n=t instanceof li?t:new li(t,u);if(dr.throwOnInvalid)throw new N2e(n);return new fr({invalid:n})}static fromDateTimes(t,u){const n=XS(t),r=XS(u),e=u3e(n,r);return e??new fr({start:n,end:r})}static after(t,u){const n=Dt.fromDurationLike(u),r=XS(t);return fr.fromDateTimes(r,r.plus(n))}static before(t,u){const n=Dt.fromDurationLike(u),r=XS(t);return fr.fromDateTimes(r.minus(n),r)}static fromISO(t,u){const[n,r]=(t||"").split("/",2);if(n&&r){let e,i;try{e=pt.fromISO(n,u),i=e.isValid}catch{i=!1}let o,c;try{o=pt.fromISO(r,u),c=o.isValid}catch{c=!1}if(i&&c)return fr.fromDateTimes(e,o);if(i){const s=Dt.fromISO(r,u);if(s.isValid)return fr.after(e,s)}else if(c){const s=Dt.fromISO(n,u);if(s.isValid)return fr.before(o,s)}}return fr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",u){if(!this.isValid)return NaN;const n=this.start.startOf(t,u);let r;return u!=null&&u.useLocaleWeeks?r=this.end.reconfigure({locale:n.locale}):r=this.end,r=r.startOf(t,u),Math.floor(r.diff(n,t).get(t))+(r.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:u}={}){return this.isValid?fr.fromDateTimes(t||this.s,u||this.e):this}splitAt(...t){if(!this.isValid)return[];const u=t.map(XS).filter(i=>this.contains(i)).sort((i,o)=>i.toMillis()-o.toMillis()),n=[];let{s:r}=this,e=0;for(;r<this.e;){const i=u[e]||this.e,o=+i>+this.e?this.e:i;n.push(fr.fromDateTimes(r,o)),r=o,e+=1}return n}splitBy(t){const u=Dt.fromDurationLike(t);if(!this.isValid||!u.isValid||u.as("milliseconds")===0)return[];let{s:n}=this,r=1,e;const i=[];for(;n<this.e;){const o=this.start.plus(u.mapUnits(c=>c*r));e=+o>+this.e?this.e:o,i.push(fr.fromDateTimes(n,e)),n=e,r+=1}return i}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const u=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return u>=n?null:fr.fromDateTimes(u,n)}union(t){if(!this.isValid)return this;const u=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return fr.fromDateTimes(u,n)}static merge(t){const[u,n]=t.sort((r,e)=>r.s-e.s).reduce(([r,e],i)=>e?e.overlaps(i)||e.abutsStart(i)?[r,e.union(i)]:[r.concat([e]),i]:[r,i],[[],null]);return n&&u.push(n),u}static xor(t){let u=null,n=0;const r=[],e=t.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),i=Array.prototype.concat(...e),o=i.sort((c,s)=>c.time-s.time);for(const c of o)n+=c.type==="s"?1:-1,n===1?u=c.time:(u&&+u!=+c.time&&r.push(fr.fromDateTimes(u,c.time)),u=null);return fr.merge(r)}difference(...t){return fr.xor([this].concat(t)).map(u=>this.intersection(u)).filter(u=>u&&!u.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:zh}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=WA,u={}){return this.isValid?Gr.create(this.s.loc.clone(u),t).formatInterval(this):zh}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:zh}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:zh}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:zh}toFormat(t,{separator:u="  "}={}){return this.isValid?`${this.s.toFormat(t)}${u}${this.e.toFormat(t)}`:zh}toDuration(t,u){return this.isValid?this.e.diff(this.s,t,u):Dt.invalid(this.invalidReason)}mapEndpoints(t){return fr.fromDateTimes(t(this.s),t(this.e))}}class oE{static hasDST(t=dr.defaultZone){const u=pt.now().setZone(t).set({month:12});return!t.isUniversal&&u.offset!==u.set({month:6}).offset}static isValidIANAZone(t){return Wi.isValidZone(t)}static normalizeZone(t){return Fa(t,dr.defaultZone)}static getStartOfWeek({locale:t=null,locObj:u=null}={}){return(u||Bt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:u=null}={}){return(u||Bt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:u=null}={}){return(u||Bt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:u=null,numberingSystem:n=null,locObj:r=null,outputCalendar:e="gregory"}={}){return(r||Bt.create(u,n,e)).months(t)}static monthsFormat(t="long",{locale:u=null,numberingSystem:n=null,locObj:r=null,outputCalendar:e="gregory"}={}){return(r||Bt.create(u,n,e)).months(t,!0)}static weekdays(t="long",{locale:u=null,numberingSystem:n=null,locObj:r=null}={}){return(r||Bt.create(u,n,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:u=null,numberingSystem:n=null,locObj:r=null}={}){return(r||Bt.create(u,n,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Bt.create(t).meridiems()}static eras(t="short",{locale:u=null}={}){return Bt.create(u,null,"gregory").eras(t)}static features(){return{relative:Nne(),localeWeek:Rne()}}}function eie(a,t){const u=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=u(t)-u(a);return Math.floor(Dt.fromMillis(n).as("days"))}function o3e(a,t,u){const n=[["years",(c,s)=>s.year-c.year],["quarters",(c,s)=>s.quarter-c.quarter+(s.year-c.year)*4],["months",(c,s)=>s.month-c.month+(s.year-c.year)*12],["weeks",(c,s)=>{const l=eie(c,s);return(l-l%7)/7}],["days",eie]],r={},e=a;let i,o;for(const[c,s]of n)u.indexOf(c)>=0&&(i=c,r[c]=s(a,t),o=e.plus(r),o>t?(r[c]--,a=e.plus(r),a>t&&(o=a,r[c]--,a=e.plus(r))):a=o);return[a,r,o,i]}function s3e(a,t,u,n){let[r,e,i,o]=o3e(a,t,u);const c=t-r,s=u.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);s.length===0&&(i<t&&(i=r.plus({[o]:1})),i!==r&&(e[o]=(e[o]||0)+c/(i-r)));const l=Dt.fromObject(e,n);return s.length>0?Dt.fromMillis(c,n).shiftTo(...s).plus(l):l}const c3e="missing Intl.DateTimeFormat.formatToParts support";function Lt(a,t=u=>u){return{regex:a,deser:([u])=>t(Y2e(u))}}const tie="[ ]",rie=new RegExp(tie,"g");function l3e(a){return a.replace(/\./g,"\\.?").replace(rie,tie)}function nie(a){return a.replace(/\./g,"").replace(rie," ").toLowerCase()}function di(a,t){return a===null?null:{regex:RegExp(a.map(l3e).join("|")),deser:([u])=>a.findIndex(n=>nie(u)===nie(n))+t}}function iie(a,t){return{regex:a,deser:([,u,n])=>iE(u,n),groups:t}}function sE(a){return{regex:a,deser:([t])=>t}}function d3e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f3e(a,t){const u=ci(t),n=ci(t,"{2}"),r=ci(t,"{3}"),e=ci(t,"{4}"),i=ci(t,"{6}"),o=ci(t,"{1,2}"),c=ci(t,"{1,3}"),s=ci(t,"{1,6}"),l=ci(t,"{1,9}"),d=ci(t,"{2,4}"),f=ci(t,"{4,6}"),h=_=>({regex:RegExp(d3e(_.val)),deser:([y])=>y,literal:!0}),b=(_=>{if(a.literal)return h(_);switch(_.val){case"G":return di(t.eras("short"),0);case"GG":return di(t.eras("long"),0);case"y":return Lt(s);case"yy":return Lt(d,HF);case"yyyy":return Lt(e);case"yyyyy":return Lt(f);case"yyyyyy":return Lt(i);case"M":return Lt(o);case"MM":return Lt(n);case"MMM":return di(t.months("short",!0),1);case"MMMM":return di(t.months("long",!0),1);case"L":return Lt(o);case"LL":return Lt(n);case"LLL":return di(t.months("short",!1),1);case"LLLL":return di(t.months("long",!1),1);case"d":return Lt(o);case"dd":return Lt(n);case"o":return Lt(c);case"ooo":return Lt(r);case"HH":return Lt(n);case"H":return Lt(o);case"hh":return Lt(n);case"h":return Lt(o);case"mm":return Lt(n);case"m":return Lt(o);case"q":return Lt(o);case"qq":return Lt(n);case"s":return Lt(o);case"ss":return Lt(n);case"S":return Lt(c);case"SSS":return Lt(r);case"u":return sE(l);case"uu":return sE(o);case"uuu":return Lt(u);case"a":return di(t.meridiems(),0);case"kkkk":return Lt(e);case"kk":return Lt(d,HF);case"W":return Lt(o);case"WW":return Lt(n);case"E":case"c":return Lt(u);case"EEE":return di(t.weekdays("short",!1),1);case"EEEE":return di(t.weekdays("long",!1),1);case"ccc":return di(t.weekdays("short",!0),1);case"cccc":return di(t.weekdays("long",!0),1);case"Z":case"ZZ":return iie(new RegExp(`([+-]${o.source})(?::(${n.source}))?`),2);case"ZZZ":return iie(new RegExp(`([+-]${o.source})(${n.source})?`),2);case"z":return sE(/[a-z_+-/]{1,256}?/i);case" ":return sE(/[^\S\n\r]/);default:return h(_)}})(a)||{invalidReason:c3e};return b.token=a,b}const h3e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function p3e(a,t,u){const{type:n,value:r}=a;if(n==="literal"){const c=/^\s+$/.test(r);return{literal:!c,val:c?" ":r}}const e=t[n];let i=n;n==="hour"&&(t.hour12!=null?i=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?i="hour12":i="hour24":i=u.hour12?"hour12":"hour24");let o=h3e[i];if(typeof o=="object"&&(o=o[e]),o)return{literal:!1,val:o}}function y3e(a){return[`^${a.map(u=>u.regex).reduce((u,n)=>`${u}(${n.source})`,"")}$`,a]}function b3e(a,t,u){const n=a.match(t);if(n){const r={};let e=1;for(const i in u)if(qh(u,i)){const o=u[i],c=o.groups?o.groups+1:1;!o.literal&&o.token&&(r[o.token.val[0]]=o.deser(n.slice(e,e+c))),e+=c}return[n,r]}else return[n,{}]}function m3e(a){const t=e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let u=null,n;return _t(a.z)||(u=Wi.create(a.z)),_t(a.Z)||(u||(u=new an(a.Z)),n=a.Z),_t(a.q)||(a.M=(a.q-1)*3+1),_t(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),_t(a.u)||(a.S=UF(a.u)),[Object.keys(a).reduce((e,i)=>{const o=t(i);return o&&(e[o]=a[i]),e},{}),u,n]}let XF=null;function _3e(){return XF||(XF=pt.fromMillis(1555555555555)),XF}function g3e(a,t){if(a.literal)return a;const u=Gr.macroTokenToFormatOpts(a.val),n=sie(u,t);return n==null||n.includes(void 0)?a:n}function aie(a,t){return Array.prototype.concat(...a.map(u=>g3e(u,t)))}class uie{constructor(t,u){if(this.locale=t,this.format=u,this.tokens=aie(Gr.parseFormat(u),t),this.units=this.tokens.map(n=>f3e(n,t)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,r]=y3e(this.units);this.regex=RegExp(n,"i"),this.handlers=r}}explainFromTokens(t){if(this.isValid){const[u,n]=b3e(t,this.regex,this.handlers),[r,e,i]=n?m3e(n):[null,null,void 0];if(qh(n,"a")&&qh(n,"H"))throw new Ch("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:u,matches:n,result:r,zone:e,specificOffset:i}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function oie(a,t,u){return new uie(a,u).explainFromTokens(t)}function v3e(a,t,u){const{result:n,zone:r,specificOffset:e,invalidReason:i}=oie(a,t,u);return[n,r,e,i]}function sie(a,t){if(!a)return null;const n=Gr.create(t,a).dtFormatter(_3e()),r=n.formatToParts(),e=n.resolvedOptions();return r.map(i=>p3e(i,a,e))}const JF="Invalid DateTime",cie=864e13;function zS(a){return new li("unsupported zone",`the zone "${a.name}" is not supported`)}function KF(a){return a.weekData===null&&(a.weekData=eE(a.c)),a.weekData}function WF(a){return a.localWeekData===null&&(a.localWeekData=eE(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function Pf(a,t){const u={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new pt({...u,...t,old:u})}function lie(a,t,u){let n=a-t*60*1e3;const r=u.offset(n);if(t===r)return[n,t];n-=(r-t)*60*1e3;const e=u.offset(n);return r===e?[n,r]:[a-Math.min(r,e)*60*1e3,Math.max(r,e)]}function cE(a,t){a+=t*60*1e3;const u=new Date(a);return{year:u.getUTCFullYear(),month:u.getUTCMonth()+1,day:u.getUTCDate(),hour:u.getUTCHours(),minute:u.getUTCMinutes(),second:u.getUTCSeconds(),millisecond:u.getUTCMilliseconds()}}function lE(a,t,u){return lie(nE(a),t,u)}function die(a,t){const u=a.o,n=a.c.year+Math.trunc(t.years),r=a.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,e={...a.c,year:n,month:r,day:Math.min(a.c.day,rE(n,r))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},i=Dt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),o=nE(e);let[c,s]=lie(o,u,a.zone);return i!==0&&(c+=i,s=a.zone.offset(c)),{ts:c,o:s}}function kh(a,t,u,n,r,e){const{setZone:i,zone:o}=u;if(a&&Object.keys(a).length!==0||t){const c=t||o,s=pt.fromObject(a,{...u,zone:c,specificOffset:e});return i?s:s.setZone(o)}else return pt.invalid(new li("unparsable",`the input "${r}" can't be parsed as ${n}`))}function dE(a,t,u=!0){return a.isValid?Gr.create(Bt.create("en-US"),{allowZ:u,forceSimple:!0}).formatDateTimeFromString(a,t):null}function YF(a,t){const u=a.c.year>9999||a.c.year<0;let n="";return u&&a.c.year>=0&&(n+="+"),n+=Tr(a.c.year,u?6:4),t?(n+="-",n+=Tr(a.c.month),n+="-",n+=Tr(a.c.day)):(n+=Tr(a.c.month),n+=Tr(a.c.day)),n}function fie(a,t,u,n,r,e){let i=Tr(a.c.hour);return t?(i+=":",i+=Tr(a.c.minute),(a.c.millisecond!==0||a.c.second!==0||!u)&&(i+=":")):i+=Tr(a.c.minute),(a.c.millisecond!==0||a.c.second!==0||!u)&&(i+=Tr(a.c.second),(a.c.millisecond!==0||!n)&&(i+=".",i+=Tr(a.c.millisecond,3))),r&&(a.isOffsetFixed&&a.offset===0&&!e?i+="Z":a.o<0?(i+="-",i+=Tr(Math.trunc(-a.o/60)),i+=":",i+=Tr(Math.trunc(-a.o%60))):(i+="+",i+=Tr(Math.trunc(a.o/60)),i+=":",i+=Tr(Math.trunc(a.o%60)))),e&&(i+="["+a.zone.ianaName+"]"),i}const hie={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},T3e={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},w3e={ordinal:1,hour:0,minute:0,second:0,millisecond:0},pie=["year","month","day","hour","minute","second","millisecond"],S3e=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],O3e=["year","ordinal","hour","minute","second","millisecond"];function A3e(a){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!t)throw new Ure(a);return t}function yie(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return A3e(a)}}function E3e(a){if(kS===void 0&&(kS=dr.now()),a.type!=="iana")return a.offset(kS);const t=a.name;let u=ZF.get(t);return u===void 0&&(u=a.offset(kS),ZF.set(t,u)),u}function bie(a,t){const u=Fa(t.zone,dr.defaultZone);if(!u.isValid)return pt.invalid(zS(u));const n=Bt.fromObject(t);let r,e;if(_t(a.year))r=dr.now();else{for(const c of pie)_t(a[c])&&(a[c]=hie[c]);const i=Ine(a)||xne(a);if(i)return pt.invalid(i);const o=E3e(u);[r,e]=lE(a,o,u)}return new pt({ts:r,zone:u,loc:n,o:e})}function mie(a,t,u){const n=_t(u.round)?!0:u.round,r=(i,o)=>(i=QF(i,n||u.calendary?0:2,!0),t.loc.clone(u).relFormatter(u).format(i,o)),e=i=>u.calendary?t.hasSame(a,i)?0:t.startOf(i).diff(a.startOf(i),i).get(i):t.diff(a,i).get(i);if(u.unit)return r(e(u.unit),u.unit);for(const i of u.units){const o=e(i);if(Math.abs(o)>=1)return r(o,i)}return r(a>t?-0:0,u.units[u.units.length-1])}function _ie(a){let t={},u;return a.length>0&&typeof a[a.length-1]=="object"?(t=a[a.length-1],u=Array.from(a).slice(0,a.length-1)):u=Array.from(a),[t,u]}let kS;const ZF=new Map;class pt{constructor(t){const u=t.zone||dr.defaultZone;let n=t.invalid||(Number.isNaN(t.ts)?new li("invalid input"):null)||(u.isValid?null:zS(u));this.ts=_t(t.ts)?dr.now():t.ts;let r=null,e=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(u))[r,e]=[t.old.c,t.old.o];else{const o=Da(t.o)&&!t.old?t.o:u.offset(this.ts);r=cE(this.ts,o),n=Number.isNaN(r.year)?new li("invalid input"):null,r=n?null:r,e=n?null:o}this._zone=u,this.loc=t.loc||Bt.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=e,this.isLuxonDateTime=!0}static now(){return new pt({})}static local(){const[t,u]=_ie(arguments),[n,r,e,i,o,c,s]=u;return bie({year:n,month:r,day:e,hour:i,minute:o,second:c,millisecond:s},t)}static utc(){const[t,u]=_ie(arguments),[n,r,e,i,o,c,s]=u;return t.zone=an.utcInstance,bie({year:n,month:r,day:e,hour:i,minute:o,second:c,millisecond:s},t)}static fromJSDate(t,u={}){const n=nwe(t)?t.valueOf():NaN;if(Number.isNaN(n))return pt.invalid("invalid input");const r=Fa(u.zone,dr.defaultZone);return r.isValid?new pt({ts:n,zone:r,loc:Bt.fromObject(u)}):pt.invalid(zS(r))}static fromMillis(t,u={}){if(Da(t))return t<-cie||t>cie?pt.invalid("Timestamp out of range"):new pt({ts:t,zone:Fa(u.zone,dr.defaultZone),loc:Bt.fromObject(u)});throw new Hr(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,u={}){if(Da(t))return new pt({ts:t*1e3,zone:Fa(u.zone,dr.defaultZone),loc:Bt.fromObject(u)});throw new Hr("fromSeconds requires a numerical input")}static fromObject(t,u={}){t=t||{};const n=Fa(u.zone,dr.defaultZone);if(!n.isValid)return pt.invalid(zS(n));const r=Bt.fromObject(u),e=aE(t,yie),{minDaysInFirstWeek:i,startOfWeek:o}=Ene(e,r),c=dr.now(),s=_t(u.specificOffset)?n.offset(c):u.specificOffset,l=!_t(e.ordinal),d=!_t(e.year),f=!_t(e.month)||!_t(e.day),h=d||f,p=e.weekYear||e.weekNumber;if((h||l)&&p)throw new Ch("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&l)throw new Ch("Can't mix ordinal dates with month/day");const b=p||e.weekday&&!h;let _,y,g=cE(c,s);b?(_=S3e,y=T3e,g=eE(g,i,o)):l?(_=O3e,y=w3e,g=$F(g)):(_=pie,y=hie);let m=!1;for(const w of _){const A=e[w];_t(A)?m?e[w]=y[w]:e[w]=g[w]:m=!0}const v=b?ewe(e,i,o):l?twe(e):Ine(e),T=v||xne(e);if(T)return pt.invalid(T);const S=b?One(e,i,o):l?Ane(e):e,[x,L]=lE(S,s,n),O=new pt({ts:x,zone:n,o:L,loc:r});return e.weekday&&h&&t.weekday!==O.weekday?pt.invalid("mismatched weekday",`you can't specify both a weekday of ${e.weekday} and a date of ${O.toISO()}`):O.isValid?O:pt.invalid(O.invalid)}static fromISO(t,u={}){const[n,r]=zwe(t);return kh(n,r,u,"ISO 8601",t)}static fromRFC2822(t,u={}){const[n,r]=kwe(t);return kh(n,r,u,"RFC 2822",t)}static fromHTTP(t,u={}){const[n,r]=Xwe(t);return kh(n,r,u,"HTTP",u)}static fromFormat(t,u,n={}){if(_t(t)||_t(u))throw new Hr("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:e=null}=n,i=Bt.fromOpts({locale:r,numberingSystem:e,defaultToEN:!0}),[o,c,s,l]=v3e(i,t,u);return l?pt.invalid(l):kh(o,c,n,`format ${u}`,t,s)}static fromString(t,u,n={}){return pt.fromFormat(t,u,n)}static fromSQL(t,u={}){const[n,r]=t3e(t);return kh(n,r,u,"SQL",t)}static invalid(t,u=null){if(!t)throw new Hr("need to specify a reason the DateTime is invalid");const n=t instanceof li?t:new li(t,u);if(dr.throwOnInvalid)throw new x2e(n);return new pt({invalid:n})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,u={}){const n=sie(t,Bt.fromObject(u));return n?n.map(r=>r?r.val:null).join(""):null}static expandFormat(t,u={}){return aie(Gr.parseFormat(t),Bt.fromObject(u)).map(r=>r.val).join("")}static resetCache(){kS=void 0,ZF.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?KF(this).weekYear:NaN}get weekNumber(){return this.isValid?KF(this).weekNumber:NaN}get weekday(){return this.isValid?KF(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?WF(this).weekday:NaN}get localWeekNumber(){return this.isValid?WF(this).weekNumber:NaN}get localWeekYear(){return this.isValid?WF(this).weekYear:NaN}get ordinal(){return this.isValid?$F(this.c).ordinal:NaN}get monthShort(){return this.isValid?oE.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?oE.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?oE.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?oE.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,u=6e4,n=nE(this.c),r=this.zone.offset(n-t),e=this.zone.offset(n+t),i=this.zone.offset(n-r*u),o=this.zone.offset(n-e*u);if(i===o)return[this];const c=n-i*u,s=n-o*u,l=cE(c,i),d=cE(s,o);return l.hour===d.hour&&l.minute===d.minute&&l.second===d.second&&l.millisecond===d.millisecond?[Pf(this,{ts:c}),Pf(this,{ts:s})]:[this]}get isInLeapYear(){return VS(this.year)}get daysInMonth(){return rE(this.year,this.month)}get daysInYear(){return this.isValid?Bh(this.year):NaN}get weeksInWeekYear(){return this.isValid?US(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?US(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:u,numberingSystem:n,calendar:r}=Gr.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:u,numberingSystem:n,outputCalendar:r}}toUTC(t=0,u={}){return this.setZone(an.instance(t),u)}toLocal(){return this.setZone(dr.defaultZone)}setZone(t,{keepLocalTime:u=!1,keepCalendarTime:n=!1}={}){if(t=Fa(t,dr.defaultZone),t.equals(this.zone))return this;if(t.isValid){let r=this.ts;if(u||n){const e=t.offset(this.ts),i=this.toObject();[r]=lE(i,e,t)}return Pf(this,{ts:r,zone:t})}else return pt.invalid(zS(t))}reconfigure({locale:t,numberingSystem:u,outputCalendar:n}={}){const r=this.loc.clone({locale:t,numberingSystem:u,outputCalendar:n});return Pf(this,{loc:r})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const u=aE(t,yie),{minDaysInFirstWeek:n,startOfWeek:r}=Ene(u,this.loc),e=!_t(u.weekYear)||!_t(u.weekNumber)||!_t(u.weekday),i=!_t(u.ordinal),o=!_t(u.year),c=!_t(u.month)||!_t(u.day),s=o||c,l=u.weekYear||u.weekNumber;if((s||i)&&l)throw new Ch("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&i)throw new Ch("Can't mix ordinal dates with month/day");let d;e?d=One({...eE(this.c,n,r),...u},n,r):_t(u.ordinal)?(d={...this.toObject(),...u},_t(u.day)&&(d.day=Math.min(rE(d.year,d.month),d.day))):d=Ane({...$F(this.c),...u});const[f,h]=lE(d,this.o,this.zone);return Pf(this,{ts:f,o:h})}plus(t){if(!this.isValid)return this;const u=Dt.fromDurationLike(t);return Pf(this,die(this,u))}minus(t){if(!this.isValid)return this;const u=Dt.fromDurationLike(t).negate();return Pf(this,die(this,u))}startOf(t,{useLocaleWeeks:u=!1}={}){if(!this.isValid)return this;const n={},r=Dt.normalizeUnit(t);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(r==="weeks")if(u){const e=this.loc.getStartOfWeek(),{weekday:i}=this;i<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if(r==="quarters"){const e=Math.ceil(this.month/3);n.month=(e-1)*3+1}return this.set(n)}endOf(t,u){return this.isValid?this.plus({[t]:1}).startOf(t,u).minus(1):this}toFormat(t,u={}){return this.isValid?Gr.create(this.loc.redefaultToEN(u)).formatDateTimeFromString(this,t):JF}toLocaleString(t=WA,u={}){return this.isValid?Gr.create(this.loc.clone(u),t).formatDateTime(this):JF}toLocaleParts(t={}){return this.isValid?Gr.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:u=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:e=!1}={}){if(!this.isValid)return null;const i=t==="extended";let o=YF(this,i);return o+="T",o+=fie(this,i,u,n,r,e),o}toISODate({format:t="extended"}={}){return this.isValid?YF(this,t==="extended"):null}toISOWeekDate(){return dE(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:u=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:e=!1,format:i="extended"}={}){return this.isValid?(r?"T":"")+fie(this,i==="extended",u,t,n,e):null}toRFC2822(){return dE(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return dE(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?YF(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:u=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(u||t)&&(n&&(r+=" "),u?r+="z":t&&(r+="ZZ")),dE(this,r,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():JF}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const u={...this.c};return t.includeConfig&&(u.outputCalendar=this.outputCalendar,u.numberingSystem=this.loc.numberingSystem,u.locale=this.loc.locale),u}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,u="milliseconds",n={}){if(!this.isValid||!t.isValid)return Dt.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},e=iwe(u).map(Dt.normalizeUnit),i=t.valueOf()>this.valueOf(),o=i?this:t,c=i?t:this,s=s3e(o,c,e,r);return i?s.negate():s}diffNow(t="milliseconds",u={}){return this.diff(pt.now(),t,u)}until(t){return this.isValid?fr.fromDateTimes(this,t):this}hasSame(t,u,n){if(!this.isValid)return!1;const r=t.valueOf(),e=this.setZone(t.zone,{keepLocalTime:!0});return e.startOf(u,n)<=r&&r<=e.endOf(u,n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const u=t.base||pt.fromObject({},{zone:this.zone}),n=t.padding?this<u?-t.padding:t.padding:0;let r=["years","months","days","hours","minutes","seconds"],e=t.unit;return Array.isArray(t.unit)&&(r=t.unit,e=void 0),mie(u,this.plus(n),{...t,numeric:"always",units:r,unit:e})}toRelativeCalendar(t={}){return this.isValid?mie(t.base||pt.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(pt.isDateTime))throw new Hr("min requires all arguments be DateTimes");return Fne(t,u=>u.valueOf(),Math.min)}static max(...t){if(!t.every(pt.isDateTime))throw new Hr("max requires all arguments be DateTimes");return Fne(t,u=>u.valueOf(),Math.max)}static fromFormatExplain(t,u,n={}){const{locale:r=null,numberingSystem:e=null}=n,i=Bt.fromOpts({locale:r,numberingSystem:e,defaultToEN:!0});return oie(i,t,u)}static fromStringExplain(t,u,n={}){return pt.fromFormatExplain(t,u,n)}static buildFormatParser(t,u={}){const{locale:n=null,numberingSystem:r=null}=u,e=Bt.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return new uie(e,t)}static fromFormatParser(t,u,n={}){if(_t(t)||_t(u))throw new Hr("fromFormatParser requires an input string and a format parser");const{locale:r=null,numberingSystem:e=null}=n,i=Bt.fromOpts({locale:r,numberingSystem:e,defaultToEN:!0});if(!i.equals(u.locale))throw new Hr(`fromFormatParser called with a locale of ${i}, but the format parser was created for ${u.locale}`);const{result:o,zone:c,specificOffset:s,invalidReason:l}=u.explainFromTokens(t);return l?pt.invalid(l):kh(o,c,n,`format ${u.format}`,t,s)}static get DATE_SHORT(){return WA}static get DATE_MED(){return Qre}static get DATE_MED_WITH_WEEKDAY(){return F2e}static get DATE_FULL(){return Hre}static get DATE_HUGE(){return Gre}static get TIME_SIMPLE(){return zre}static get TIME_WITH_SECONDS(){return kre}static get TIME_WITH_SHORT_OFFSET(){return Xre}static get TIME_WITH_LONG_OFFSET(){return Jre}static get TIME_24_SIMPLE(){return Kre}static get TIME_24_WITH_SECONDS(){return Wre}static get TIME_24_WITH_SHORT_OFFSET(){return Yre}static get TIME_24_WITH_LONG_OFFSET(){return Zre}static get DATETIME_SHORT(){return ene}static get DATETIME_SHORT_WITH_SECONDS(){return tne}static get DATETIME_MED(){return rne}static get DATETIME_MED_WITH_SECONDS(){return nne}static get DATETIME_MED_WITH_WEEKDAY(){return D2e}static get DATETIME_FULL(){return ine}static get DATETIME_FULL_WITH_SECONDS(){return ane}static get DATETIME_HUGE(){return une}static get DATETIME_HUGE_WITH_SECONDS(){return one}}function XS(a){if(pt.isDateTime(a))return a;if(a&&a.valueOf&&Da(a.valueOf()))return pt.fromJSDate(a);if(a&&typeof a=="object")return pt.fromObject(a);throw new Hr(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const I3e=new E2e.QueryEngine,eD=new I2e.DataFactory;self.onmessage=async a=>{const{sources:t,query:u}=a.data;await x3e(t,u)};async function x3e(a,t){const u=await I3e.queryBindings(t,{sources:[a],lenient:!0,extensionFunctions:{async"https://w3id.org/time-fn#bindDefaultTimezone"(n){if(n.length!==2)throw new Error("Invalid number of arguments for https://w3id.org/time-fn#bindDefaultTimezone");return N3e(n[0],n[1])},async"https://w3id.org/time-fn#periodMinInclusive"(n){if(n.length!==1)throw new Error("Invalid number of arguments for https://w3id.org/time-fn#periodMinInclusive");return fE(n[0],!0,!0)},async"https://w3id.org/time-fn#periodMinExclusive"(n){if(n.length!==1)throw new Error("Invalid number of arguments for https://w3id.org/time-fn#periodMinExclusive");return fE(n[0],!0,!1)},async"https://w3id.org/time-fn#periodMaxInclusive"(n){if(n.length!==1)throw new Error("Invalid number of arguments for https://w3id.org/time-fn#periodMaxInclusive");return fE(n[0],!1,!0)},async"https://w3id.org/time-fn#periodMaxExclusive"(n){if(n.length!==1)throw new Error("Invalid number of arguments for https://w3id.org/time-fn#periodMaxExclusive");return fE(n[0],!1,!1)}}});u.on("data",n=>{postMessage(n.toString())}),u.on("end",()=>{console.log("done in worker"),postMessage("done")})}function N3e(a,t){if(a.termType!=="Literal"||a.datatype.value!=="http://www.w3.org/2001/XMLSchema#dateTime"&&a.datatype.value!=="http://www.w3.org/2001/XMLSchema#date")return console.error(`Invalid dateTime Term: ${a.value}`),a;if(!(t.termType==="Literal"&&t.datatype.value==="http://www.w3.org/2001/XMLSchema#string"))return console.error(`Invalid timezone Term: ${t.value}`),a;let u=pt.fromISO(a.value,{setZone:!0});return!u.isValid||/(Z|[+-]\d{2}:\d{2})$/.test(a.value)?a:(u=pt.fromISO(a.value,{zone:t.value}),u.isValid?eD.literal(a.datatype.value==="http://www.w3.org/2001/XMLSchema#dateTime"?u.toISO():u.toFormat("yyyy-MM-ddZZ"),a.datatype):(console.error(`Invalid timezone: ${t.value}`),a))}function R3e(a){return eD.namedNode(JS(a))}function JS(a){return`http://www.w3.org/2001/XMLSchema#${a}`}function fE(a,t,u){if(a.termType!=="Literal")return console.error(`Invalid term: ${a.value}. Must be Literal.`),a;let n,r,e,i;if(a.datatype.value===JS("gYear")){const c=a.value.match(/^(-?([1-9][0-9]{3,}|0[0-9]{3}))(Z|([+\-])((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/);if(!c)return console.error(`Invalid xsd:gYear: ${a.value}`),a;n=c[1],r=c[3],e="year",i={year:1}}else if(a.datatype.value===JS("gYearMonth")){const c=a.value.match(/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2]))(Z|([+\-])((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/);if(!c)return console.error(`Invalid xsd:gYearMonth: ${a.value}`),a;n=c[1],r=c[4],e="month",i={month:1}}else if(a.datatype.value===JS("date")){const c=a.value.match(/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01]))(Z|([+\-])((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/);if(!c)return console.error(`Invalid xsd:date: ${a.value}`),a;n=c[1],r=c[5],e="day",i={day:1}}else if(a.datatype.value===JS("dateTime")){const c=a.value.match(/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?)))(Z|([+\-])((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/);if(!c)return console.error(`Invalid xsd:dateTime: ${a.value}`),a;n=c[1],r=c[10],e="millisecond",i={millisecond:1}}else return a;r||(r=t?"+14:00":"-14:00"),r==="Z"&&(r="+00:00");let o;return t?o=u?pt.fromISO(n,{zone:r}).startOf(e).setZone(r).toISO():pt.fromISO(n,{zone:r}).minus(i).endOf(e).setZone(r).toISO():o=u?pt.fromISO(n,{zone:r}).endOf(e).setZone(r).toISO():pt.fromISO(n,{zone:r}).plus(i).startOf(e).setZone(r).toISO(),o?eD.literal(o,R3e("dateTime")):(console.error(`Invalid value for dateTime: ${a.value}`),a)}})();
